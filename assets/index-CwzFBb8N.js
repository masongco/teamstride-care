var vA=e=>{throw TypeError(e)};var uj=(e,t,r)=>t.has(e)||vA("Cannot "+r);var q=(e,t,r)=>(uj(e,t,"read from private field"),r?r.call(e):t.get(e)),Ge=(e,t,r)=>t.has(e)?vA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ae=(e,t,r,n)=>(uj(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),mt=(e,t,r)=>(uj(e,t,"access private method"),r);var jv=(e,t,r,n)=>({set _(a){Ae(e,t,a,r)},get _(){return q(e,t,n)}});function DH(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var _v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N4={exports:{}},Zb={},S4={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag=Symbol.for("react.element"),RH=Symbol.for("react.portal"),MH=Symbol.for("react.fragment"),$H=Symbol.for("react.strict_mode"),IH=Symbol.for("react.profiler"),LH=Symbol.for("react.provider"),FH=Symbol.for("react.context"),UH=Symbol.for("react.forward_ref"),BH=Symbol.for("react.suspense"),zH=Symbol.for("react.memo"),VH=Symbol.for("react.lazy"),yA=Symbol.iterator;function qH(e){return e===null||typeof e!="object"?null:(e=yA&&e[yA]||e["@@iterator"],typeof e=="function"?e:null)}var C4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E4=Object.assign,k4={};function ih(e,t,r){this.props=e,this.context=t,this.refs=k4,this.updater=r||C4}ih.prototype.isReactComponent={};ih.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ih.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function P4(){}P4.prototype=ih.prototype;function _C(e,t,r){this.props=e,this.context=t,this.refs=k4,this.updater=r||C4}var NC=_C.prototype=new P4;NC.constructor=_C;E4(NC,ih.prototype);NC.isPureReactComponent=!0;var xA=Array.isArray,A4=Object.prototype.hasOwnProperty,SC={current:null},O4={key:!0,ref:!0,__self:!0,__source:!0};function T4(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)A4.call(t,n)&&!O4.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Ag,type:e,key:i,ref:o,props:a,_owner:SC.current}}function WH(e,t){return{$$typeof:Ag,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function CC(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ag}function HH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var bA=/\/+/g;function dj(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HH(""+e.key):t.toString(36)}function wy(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ag:case RH:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+dj(o,0):n,xA(a)?(r="",e!=null&&(r=e.replace(bA,"$&/")+"/"),wy(a,t,r,"",function(u){return u})):a!=null&&(CC(a)&&(a=WH(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(bA,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",xA(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+dj(i,l);o+=wy(i,t,r,c,a)}else if(c=qH(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+dj(i,l++),o+=wy(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Nv(e,t,r){if(e==null)return e;var n=[],a=0;return wy(e,n,"","",function(i){return t.call(r,i,a++)}),n}function KH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var is={current:null},jy={transition:null},GH={ReactCurrentDispatcher:is,ReactCurrentBatchConfig:jy,ReactCurrentOwner:SC};function D4(){throw Error("act(...) is not supported in production builds of React.")}Nt.Children={map:Nv,forEach:function(e,t,r){Nv(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Nv(e,function(){t++}),t},toArray:function(e){return Nv(e,function(t){return t})||[]},only:function(e){if(!CC(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nt.Component=ih;Nt.Fragment=MH;Nt.Profiler=IH;Nt.PureComponent=_C;Nt.StrictMode=$H;Nt.Suspense=BH;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GH;Nt.act=D4;Nt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=E4({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=SC.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)A4.call(t,c)&&!O4.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ag,type:e.type,key:a,ref:i,props:n,_owner:o}};Nt.createContext=function(e){return e={$$typeof:FH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:LH,_context:e},e.Consumer=e};Nt.createElement=T4;Nt.createFactory=function(e){var t=T4.bind(null,e);return t.type=e,t};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(e){return{$$typeof:UH,render:e}};Nt.isValidElement=CC;Nt.lazy=function(e){return{$$typeof:VH,_payload:{_status:-1,_result:e},_init:KH}};Nt.memo=function(e,t){return{$$typeof:zH,type:e,compare:t===void 0?null:t}};Nt.startTransition=function(e){var t=jy.transition;jy.transition={};try{e()}finally{jy.transition=t}};Nt.unstable_act=D4;Nt.useCallback=function(e,t){return is.current.useCallback(e,t)};Nt.useContext=function(e){return is.current.useContext(e)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(e){return is.current.useDeferredValue(e)};Nt.useEffect=function(e,t){return is.current.useEffect(e,t)};Nt.useId=function(){return is.current.useId()};Nt.useImperativeHandle=function(e,t,r){return is.current.useImperativeHandle(e,t,r)};Nt.useInsertionEffect=function(e,t){return is.current.useInsertionEffect(e,t)};Nt.useLayoutEffect=function(e,t){return is.current.useLayoutEffect(e,t)};Nt.useMemo=function(e,t){return is.current.useMemo(e,t)};Nt.useReducer=function(e,t,r){return is.current.useReducer(e,t,r)};Nt.useRef=function(e){return is.current.useRef(e)};Nt.useState=function(e){return is.current.useState(e)};Nt.useSyncExternalStore=function(e,t,r){return is.current.useSyncExternalStore(e,t,r)};Nt.useTransition=function(){return is.current.useTransition()};Nt.version="18.3.1";S4.exports=Nt;var y=S4.exports;const O=Gt(y),EC=DH({__proto__:null,default:O},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YH=y,XH=Symbol.for("react.element"),QH=Symbol.for("react.fragment"),ZH=Object.prototype.hasOwnProperty,JH=YH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,e9={key:!0,ref:!0,__self:!0,__source:!0};function R4(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)ZH.call(t,n)&&!e9.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:XH,type:e,key:i,ref:o,props:a,_owner:JH.current}}Zb.Fragment=QH;Zb.jsx=R4;Zb.jsxs=R4;N4.exports=Zb;var s=N4.exports,M4={exports:{}},Xs={},$4={exports:{}},I4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,T){var F=M.length;M.push(T);e:for(;0<F;){var Z=F-1>>>1,W=M[Z];if(0<a(W,T))M[Z]=T,M[F]=W,F=Z;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var T=M[0],F=M.pop();if(F!==T){M[0]=F;e:for(var Z=0,W=M.length,K=W>>>1;Z<K;){var V=2*(Z+1)-1,le=M[V],be=V+1,ce=M[be];if(0>a(le,F))be<W&&0>a(ce,le)?(M[Z]=ce,M[be]=F,Z=be):(M[Z]=le,M[V]=F,Z=V);else if(be<W&&0>a(ce,F))M[Z]=ce,M[be]=F,Z=be;else break e}}return T}function a(M,T){var F=M.sortIndex-T.sortIndex;return F!==0?F:M.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var T=r(u);T!==null;){if(T.callback===null)n(u);else if(T.startTime<=M)n(u),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(u)}}function _(M){if(p=!1,w(M),!g)if(r(c)!==null)g=!0,B(j);else{var T=r(u);T!==null&&L(_,T.startTime-M)}}function j(M,T){g=!1,p&&(p=!1,x(E),E=-1),m=!0;var F=h;try{for(w(T),f=r(c);f!==null&&(!(f.expirationTime>T)||M&&!A());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,h=f.priorityLevel;var W=Z(f.expirationTime<=T);T=e.unstable_now(),typeof W=="function"?f.callback=W:f===r(c)&&n(c),w(T)}else n(c);f=r(c)}if(f!==null)var K=!0;else{var V=r(u);V!==null&&L(_,V.startTime-T),K=!1}return K}finally{f=null,h=F,m=!1}}var N=!1,S=null,E=-1,C=5,P=-1;function A(){return!(e.unstable_now()-P<C)}function k(){if(S!==null){var M=e.unstable_now();P=M;var T=!0;try{T=S(!0,M)}finally{T?D():(N=!1,S=null)}}else N=!1}var D;if(typeof b=="function")D=function(){b(k)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,U=R.port2;R.port1.onmessage=k,D=function(){U.postMessage(null)}}else D=function(){v(k,0)};function B(M){S=M,N||(N=!0,D())}function L(M,T){E=v(function(){M(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,B(j))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(M){switch(h){case 1:case 2:case 3:var T=3;break;default:T=h}var F=h;h=T;try{return M()}finally{h=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,T){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var F=h;h=M;try{return T()}finally{h=F}},e.unstable_scheduleCallback=function(M,T,F){var Z=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Z+F:Z):F=Z,M){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=F+W,M={id:d++,callback:T,priorityLevel:M,startTime:F,expirationTime:W,sortIndex:-1},F>Z?(M.sortIndex=F,t(u,M),r(c)===null&&M===r(u)&&(p?(x(E),E=-1):p=!0,L(_,F-Z))):(M.sortIndex=W,t(c,M),g||m||(g=!0,B(j))),M},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(M){var T=h;return function(){var F=h;h=T;try{return M.apply(this,arguments)}finally{h=F}}}})(I4);$4.exports=I4;var t9=$4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r9=y,Ws=t9;function ye(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L4=new Set,ap={};function Ru(e,t){ff(e,t),ff(e+"Capture",t)}function ff(e,t){for(ap[e]=t,e=0;e<t.length;e++)L4.add(t[e])}var vo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),G_=Object.prototype.hasOwnProperty,n9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wA={},jA={};function s9(e){return G_.call(jA,e)?!0:G_.call(wA,e)?!1:n9.test(e)?jA[e]=!0:(wA[e]=!0,!1)}function a9(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function i9(e,t,r,n){if(t===null||typeof t>"u"||a9(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function os(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Tn[e]=new os(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Tn[t]=new os(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Tn[e]=new os(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Tn[e]=new os(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Tn[e]=new os(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Tn[e]=new os(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Tn[e]=new os(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Tn[e]=new os(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Tn[e]=new os(e,5,!1,e.toLowerCase(),null,!1,!1)});var kC=/[\-:]([a-z])/g;function PC(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kC,PC);Tn[t]=new os(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kC,PC);Tn[t]=new os(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kC,PC);Tn[t]=new os(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Tn[e]=new os(e,1,!1,e.toLowerCase(),null,!1,!1)});Tn.xlinkHref=new os("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Tn[e]=new os(e,1,!1,e.toLowerCase(),null,!0,!0)});function AC(e,t,r,n){var a=Tn.hasOwnProperty(t)?Tn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(i9(t,r,a,n)&&(r=null),n||a===null?s9(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ao=r9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sv=Symbol.for("react.element"),yd=Symbol.for("react.portal"),xd=Symbol.for("react.fragment"),OC=Symbol.for("react.strict_mode"),Y_=Symbol.for("react.profiler"),F4=Symbol.for("react.provider"),U4=Symbol.for("react.context"),TC=Symbol.for("react.forward_ref"),X_=Symbol.for("react.suspense"),Q_=Symbol.for("react.suspense_list"),DC=Symbol.for("react.memo"),Yo=Symbol.for("react.lazy"),B4=Symbol.for("react.offscreen"),_A=Symbol.iterator;function Kh(e){return e===null||typeof e!="object"?null:(e=_A&&e[_A]||e["@@iterator"],typeof e=="function"?e:null)}var Pr=Object.assign,fj;function Sm(e){if(fj===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);fj=t&&t[1]||""}return`
`+fj+e}var hj=!1;function mj(e,t){if(!e||hj)return"";hj=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{hj=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Sm(e):""}function o9(e){switch(e.tag){case 5:return Sm(e.type);case 16:return Sm("Lazy");case 13:return Sm("Suspense");case 19:return Sm("SuspenseList");case 0:case 2:case 15:return e=mj(e.type,!1),e;case 11:return e=mj(e.type.render,!1),e;case 1:return e=mj(e.type,!0),e;default:return""}}function Z_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xd:return"Fragment";case yd:return"Portal";case Y_:return"Profiler";case OC:return"StrictMode";case X_:return"Suspense";case Q_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case U4:return(e.displayName||"Context")+".Consumer";case F4:return(e._context.displayName||"Context")+".Provider";case TC:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case DC:return t=e.displayName||null,t!==null?t:Z_(e.type)||"Memo";case Yo:t=e._payload,e=e._init;try{return Z_(e(t))}catch{}}return null}function l9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z_(t);case 8:return t===OC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function z4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function c9(e){var t=z4(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cv(e){e._valueTracker||(e._valueTracker=c9(e))}function V4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=z4(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ky(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function J_(e,t){var r=t.checked;return Pr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function NA(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Vl(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function q4(e,t){t=t.checked,t!=null&&AC(e,"checked",t,!1)}function eN(e,t){q4(e,t);var r=Vl(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?tN(e,t.type,r):t.hasOwnProperty("defaultValue")&&tN(e,t.type,Vl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function SA(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function tN(e,t,r){(t!=="number"||Ky(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Cm=Array.isArray;function Ld(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Vl(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function rN(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Pr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function CA(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ye(92));if(Cm(r)){if(1<r.length)throw Error(ye(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vl(r)}}function W4(e,t){var r=Vl(t.value),n=Vl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function EA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function H4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nN(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?H4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ev,K4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ev=Ev||document.createElement("div"),Ev.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ev.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ip(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var $m={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},u9=["Webkit","ms","Moz","O"];Object.keys($m).forEach(function(e){u9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$m[t]=$m[e]})});function G4(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||$m.hasOwnProperty(e)&&$m[e]?(""+t).trim():t+"px"}function Y4(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=G4(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var d9=Pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sN(e,t){if(t){if(d9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ye(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ye(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ye(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ye(62))}}function aN(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iN=null;function RC(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oN=null,Fd=null,Ud=null;function kA(e){if(e=Dg(e)){if(typeof oN!="function")throw Error(ye(280));var t=e.stateNode;t&&(t=n0(t),oN(e.stateNode,e.type,t))}}function X4(e){Fd?Ud?Ud.push(e):Ud=[e]:Fd=e}function Q4(){if(Fd){var e=Fd,t=Ud;if(Ud=Fd=null,kA(e),t)for(e=0;e<t.length;e++)kA(t[e])}}function Z4(e,t){return e(t)}function J4(){}var pj=!1;function eI(e,t,r){if(pj)return e(t,r);pj=!0;try{return Z4(e,t,r)}finally{pj=!1,(Fd!==null||Ud!==null)&&(J4(),Q4())}}function op(e,t){var r=e.stateNode;if(r===null)return null;var n=n0(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ye(231,t,typeof r));return r}var lN=!1;if(vo)try{var Gh={};Object.defineProperty(Gh,"passive",{get:function(){lN=!0}}),window.addEventListener("test",Gh,Gh),window.removeEventListener("test",Gh,Gh)}catch{lN=!1}function f9(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Im=!1,Gy=null,Yy=!1,cN=null,h9={onError:function(e){Im=!0,Gy=e}};function m9(e,t,r,n,a,i,o,l,c){Im=!1,Gy=null,f9.apply(h9,arguments)}function p9(e,t,r,n,a,i,o,l,c){if(m9.apply(this,arguments),Im){if(Im){var u=Gy;Im=!1,Gy=null}else throw Error(ye(198));Yy||(Yy=!0,cN=u)}}function Mu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function tI(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function PA(e){if(Mu(e)!==e)throw Error(ye(188))}function g9(e){var t=e.alternate;if(!t){if(t=Mu(e),t===null)throw Error(ye(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return PA(a),e;if(i===n)return PA(a),t;i=i.sibling}throw Error(ye(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(ye(189))}}if(r.alternate!==n)throw Error(ye(190))}if(r.tag!==3)throw Error(ye(188));return r.stateNode.current===r?e:t}function rI(e){return e=g9(e),e!==null?nI(e):null}function nI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nI(e);if(t!==null)return t;e=e.sibling}return null}var sI=Ws.unstable_scheduleCallback,AA=Ws.unstable_cancelCallback,v9=Ws.unstable_shouldYield,y9=Ws.unstable_requestPaint,Ur=Ws.unstable_now,x9=Ws.unstable_getCurrentPriorityLevel,MC=Ws.unstable_ImmediatePriority,aI=Ws.unstable_UserBlockingPriority,Xy=Ws.unstable_NormalPriority,b9=Ws.unstable_LowPriority,iI=Ws.unstable_IdlePriority,Jb=null,bi=null;function w9(e){if(bi&&typeof bi.onCommitFiberRoot=="function")try{bi.onCommitFiberRoot(Jb,e,void 0,(e.current.flags&128)===128)}catch{}}var qa=Math.clz32?Math.clz32:N9,j9=Math.log,_9=Math.LN2;function N9(e){return e>>>=0,e===0?32:31-(j9(e)/_9|0)|0}var kv=64,Pv=4194304;function Em(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qy(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Em(l):(i&=o,i!==0&&(n=Em(i)))}else o=r&~a,o!==0?n=Em(o):i!==0&&(n=Em(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-qa(t),a=1<<r,n|=e[r],t&=~a;return n}function S9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function C9(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-qa(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=S9(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function uN(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oI(){var e=kv;return kv<<=1,!(kv&4194240)&&(kv=64),e}function gj(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Og(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qa(t),e[t]=r}function E9(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-qa(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function $C(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-qa(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var er=0;function lI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cI,IC,uI,dI,fI,dN=!1,Av=[],Cl=null,El=null,kl=null,lp=new Map,cp=new Map,el=[],k9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OA(e,t){switch(e){case"focusin":case"focusout":Cl=null;break;case"dragenter":case"dragleave":El=null;break;case"mouseover":case"mouseout":kl=null;break;case"pointerover":case"pointerout":lp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cp.delete(t.pointerId)}}function Yh(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Dg(t),t!==null&&IC(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function P9(e,t,r,n,a){switch(t){case"focusin":return Cl=Yh(Cl,e,t,r,n,a),!0;case"dragenter":return El=Yh(El,e,t,r,n,a),!0;case"mouseover":return kl=Yh(kl,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return lp.set(i,Yh(lp.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,cp.set(i,Yh(cp.get(i)||null,e,t,r,n,a)),!0}return!1}function hI(e){var t=Tc(e.target);if(t!==null){var r=Mu(t);if(r!==null){if(t=r.tag,t===13){if(t=tI(r),t!==null){e.blockedOn=t,fI(e.priority,function(){uI(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _y(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=fN(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);iN=n,r.target.dispatchEvent(n),iN=null}else return t=Dg(r),t!==null&&IC(t),e.blockedOn=r,!1;t.shift()}return!0}function TA(e,t,r){_y(e)&&r.delete(t)}function A9(){dN=!1,Cl!==null&&_y(Cl)&&(Cl=null),El!==null&&_y(El)&&(El=null),kl!==null&&_y(kl)&&(kl=null),lp.forEach(TA),cp.forEach(TA)}function Xh(e,t){e.blockedOn===t&&(e.blockedOn=null,dN||(dN=!0,Ws.unstable_scheduleCallback(Ws.unstable_NormalPriority,A9)))}function up(e){function t(a){return Xh(a,e)}if(0<Av.length){Xh(Av[0],e);for(var r=1;r<Av.length;r++){var n=Av[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Cl!==null&&Xh(Cl,e),El!==null&&Xh(El,e),kl!==null&&Xh(kl,e),lp.forEach(t),cp.forEach(t),r=0;r<el.length;r++)n=el[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<el.length&&(r=el[0],r.blockedOn===null);)hI(r),r.blockedOn===null&&el.shift()}var Bd=Ao.ReactCurrentBatchConfig,Zy=!0;function O9(e,t,r,n){var a=er,i=Bd.transition;Bd.transition=null;try{er=1,LC(e,t,r,n)}finally{er=a,Bd.transition=i}}function T9(e,t,r,n){var a=er,i=Bd.transition;Bd.transition=null;try{er=4,LC(e,t,r,n)}finally{er=a,Bd.transition=i}}function LC(e,t,r,n){if(Zy){var a=fN(e,t,r,n);if(a===null)Cj(e,t,n,Jy,r),OA(e,n);else if(P9(a,e,t,r,n))n.stopPropagation();else if(OA(e,n),t&4&&-1<k9.indexOf(e)){for(;a!==null;){var i=Dg(a);if(i!==null&&cI(i),i=fN(e,t,r,n),i===null&&Cj(e,t,n,Jy,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Cj(e,t,n,null,r)}}var Jy=null;function fN(e,t,r,n){if(Jy=null,e=RC(n),e=Tc(e),e!==null)if(t=Mu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=tI(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jy=e,null}function mI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(x9()){case MC:return 1;case aI:return 4;case Xy:case b9:return 16;case iI:return 536870912;default:return 16}default:return 16}}var jl=null,FC=null,Ny=null;function pI(){if(Ny)return Ny;var e,t=FC,r=t.length,n,a="value"in jl?jl.value:jl.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Ny=a.slice(e,1<n?1-n:void 0)}function Sy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ov(){return!0}function DA(){return!1}function Qs(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ov:DA,this.isPropagationStopped=DA,this}return Pr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ov)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ov)},persist:function(){},isPersistent:Ov}),t}var oh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},UC=Qs(oh),Tg=Pr({},oh,{view:0,detail:0}),D9=Qs(Tg),vj,yj,Qh,e0=Pr({},Tg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:BC,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qh&&(Qh&&e.type==="mousemove"?(vj=e.screenX-Qh.screenX,yj=e.screenY-Qh.screenY):yj=vj=0,Qh=e),vj)},movementY:function(e){return"movementY"in e?e.movementY:yj}}),RA=Qs(e0),R9=Pr({},e0,{dataTransfer:0}),M9=Qs(R9),$9=Pr({},Tg,{relatedTarget:0}),xj=Qs($9),I9=Pr({},oh,{animationName:0,elapsedTime:0,pseudoElement:0}),L9=Qs(I9),F9=Pr({},oh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),U9=Qs(F9),B9=Pr({},oh,{data:0}),MA=Qs(B9),z9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function W9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=q9[e])?!!t[e]:!1}function BC(){return W9}var H9=Pr({},Tg,{key:function(e){if(e.key){var t=z9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Sy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?V9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:BC,charCode:function(e){return e.type==="keypress"?Sy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),K9=Qs(H9),G9=Pr({},e0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$A=Qs(G9),Y9=Pr({},Tg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:BC}),X9=Qs(Y9),Q9=Pr({},oh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z9=Qs(Q9),J9=Pr({},e0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),e7=Qs(J9),t7=[9,13,27,32],zC=vo&&"CompositionEvent"in window,Lm=null;vo&&"documentMode"in document&&(Lm=document.documentMode);var r7=vo&&"TextEvent"in window&&!Lm,gI=vo&&(!zC||Lm&&8<Lm&&11>=Lm),IA=" ",LA=!1;function vI(e,t){switch(e){case"keyup":return t7.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yI(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bd=!1;function n7(e,t){switch(e){case"compositionend":return yI(t);case"keypress":return t.which!==32?null:(LA=!0,IA);case"textInput":return e=t.data,e===IA&&LA?null:e;default:return null}}function s7(e,t){if(bd)return e==="compositionend"||!zC&&vI(e,t)?(e=pI(),Ny=FC=jl=null,bd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gI&&t.locale!=="ko"?null:t.data;default:return null}}var a7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!a7[e.type]:t==="textarea"}function xI(e,t,r,n){X4(n),t=ex(t,"onChange"),0<t.length&&(r=new UC("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Fm=null,dp=null;function i7(e){AI(e,0)}function t0(e){var t=_d(e);if(V4(t))return e}function o7(e,t){if(e==="change")return t}var bI=!1;if(vo){var bj;if(vo){var wj="oninput"in document;if(!wj){var UA=document.createElement("div");UA.setAttribute("oninput","return;"),wj=typeof UA.oninput=="function"}bj=wj}else bj=!1;bI=bj&&(!document.documentMode||9<document.documentMode)}function BA(){Fm&&(Fm.detachEvent("onpropertychange",wI),dp=Fm=null)}function wI(e){if(e.propertyName==="value"&&t0(dp)){var t=[];xI(t,dp,e,RC(e)),eI(i7,t)}}function l7(e,t,r){e==="focusin"?(BA(),Fm=t,dp=r,Fm.attachEvent("onpropertychange",wI)):e==="focusout"&&BA()}function c7(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return t0(dp)}function u7(e,t){if(e==="click")return t0(t)}function d7(e,t){if(e==="input"||e==="change")return t0(t)}function f7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ya=typeof Object.is=="function"?Object.is:f7;function fp(e,t){if(Ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!G_.call(t,a)||!Ya(e[a],t[a]))return!1}return!0}function zA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function VA(e,t){var r=zA(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zA(r)}}function jI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _I(){for(var e=window,t=Ky();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ky(e.document)}return t}function VC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function h7(e){var t=_I(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&jI(r.ownerDocument.documentElement,r)){if(n!==null&&VC(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=VA(r,i);var o=VA(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var m7=vo&&"documentMode"in document&&11>=document.documentMode,wd=null,hN=null,Um=null,mN=!1;function qA(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mN||wd==null||wd!==Ky(n)||(n=wd,"selectionStart"in n&&VC(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Um&&fp(Um,n)||(Um=n,n=ex(hN,"onSelect"),0<n.length&&(t=new UC("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=wd)))}function Tv(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var jd={animationend:Tv("Animation","AnimationEnd"),animationiteration:Tv("Animation","AnimationIteration"),animationstart:Tv("Animation","AnimationStart"),transitionend:Tv("Transition","TransitionEnd")},jj={},NI={};vo&&(NI=document.createElement("div").style,"AnimationEvent"in window||(delete jd.animationend.animation,delete jd.animationiteration.animation,delete jd.animationstart.animation),"TransitionEvent"in window||delete jd.transitionend.transition);function r0(e){if(jj[e])return jj[e];if(!jd[e])return e;var t=jd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in NI)return jj[e]=t[r];return e}var SI=r0("animationend"),CI=r0("animationiteration"),EI=r0("animationstart"),kI=r0("transitionend"),PI=new Map,WA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zl(e,t){PI.set(e,t),Ru(t,[e])}for(var _j=0;_j<WA.length;_j++){var Nj=WA[_j],p7=Nj.toLowerCase(),g7=Nj[0].toUpperCase()+Nj.slice(1);Zl(p7,"on"+g7)}Zl(SI,"onAnimationEnd");Zl(CI,"onAnimationIteration");Zl(EI,"onAnimationStart");Zl("dblclick","onDoubleClick");Zl("focusin","onFocus");Zl("focusout","onBlur");Zl(kI,"onTransitionEnd");ff("onMouseEnter",["mouseout","mouseover"]);ff("onMouseLeave",["mouseout","mouseover"]);ff("onPointerEnter",["pointerout","pointerover"]);ff("onPointerLeave",["pointerout","pointerover"]);Ru("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ru("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ru("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ru("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var km="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v7=new Set("cancel close invalid load scroll toggle".split(" ").concat(km));function HA(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,p9(n,t,void 0,e),e.currentTarget=null}function AI(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;HA(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;HA(a,l,u),i=c}}}if(Yy)throw e=cN,Yy=!1,cN=null,e}function xr(e,t){var r=t[xN];r===void 0&&(r=t[xN]=new Set);var n=e+"__bubble";r.has(n)||(OI(t,e,2,!1),r.add(n))}function Sj(e,t,r){var n=0;t&&(n|=4),OI(r,e,n,t)}var Dv="_reactListening"+Math.random().toString(36).slice(2);function hp(e){if(!e[Dv]){e[Dv]=!0,L4.forEach(function(r){r!=="selectionchange"&&(v7.has(r)||Sj(r,!1,e),Sj(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dv]||(t[Dv]=!0,Sj("selectionchange",!1,t))}}function OI(e,t,r,n){switch(mI(t)){case 1:var a=O9;break;case 4:a=T9;break;default:a=LC}r=a.bind(null,t,r,e),a=void 0,!lN||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Cj(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Tc(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}eI(function(){var u=i,d=RC(r),f=[];e:{var h=PI.get(e);if(h!==void 0){var m=UC,g=e;switch(e){case"keypress":if(Sy(r)===0)break e;case"keydown":case"keyup":m=K9;break;case"focusin":g="focus",m=xj;break;case"focusout":g="blur",m=xj;break;case"beforeblur":case"afterblur":m=xj;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=RA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=M9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=X9;break;case SI:case CI:case EI:m=L9;break;case kI:m=Z9;break;case"scroll":m=D9;break;case"wheel":m=e7;break;case"copy":case"cut":case"paste":m=U9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=$A}var p=(t&4)!==0,v=!p&&e==="scroll",x=p?h!==null?h+"Capture":null:h;p=[];for(var b=u,w;b!==null;){w=b;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,x!==null&&(_=op(b,x),_!=null&&p.push(mp(b,_,w)))),v)break;b=b.return}0<p.length&&(h=new m(h,g,null,r,d),f.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==iN&&(g=r.relatedTarget||r.fromElement)&&(Tc(g)||g[yo]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?Tc(g):null,g!==null&&(v=Mu(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=RA,_="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(p=$A,_="onPointerLeave",x="onPointerEnter",b="pointer"),v=m==null?h:_d(m),w=g==null?h:_d(g),h=new p(_,b+"leave",m,r,d),h.target=v,h.relatedTarget=w,_=null,Tc(d)===u&&(p=new p(x,b+"enter",g,r,d),p.target=w,p.relatedTarget=v,_=p),v=_,m&&g)t:{for(p=m,x=g,b=0,w=p;w;w=Zu(w))b++;for(w=0,_=x;_;_=Zu(_))w++;for(;0<b-w;)p=Zu(p),b--;for(;0<w-b;)x=Zu(x),w--;for(;b--;){if(p===x||x!==null&&p===x.alternate)break t;p=Zu(p),x=Zu(x)}p=null}else p=null;m!==null&&KA(f,h,m,p,!1),g!==null&&v!==null&&KA(f,v,g,p,!0)}}e:{if(h=u?_d(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=o7;else if(FA(h))if(bI)j=d7;else{j=c7;var N=l7}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=u7);if(j&&(j=j(e,u))){xI(f,j,r,d);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&tN(h,"number",h.value)}switch(N=u?_d(u):window,e){case"focusin":(FA(N)||N.contentEditable==="true")&&(wd=N,hN=u,Um=null);break;case"focusout":Um=hN=wd=null;break;case"mousedown":mN=!0;break;case"contextmenu":case"mouseup":case"dragend":mN=!1,qA(f,r,d);break;case"selectionchange":if(m7)break;case"keydown":case"keyup":qA(f,r,d)}var S;if(zC)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else bd?vI(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(gI&&r.locale!=="ko"&&(bd||E!=="onCompositionStart"?E==="onCompositionEnd"&&bd&&(S=pI()):(jl=d,FC="value"in jl?jl.value:jl.textContent,bd=!0)),N=ex(u,E),0<N.length&&(E=new MA(E,e,null,r,d),f.push({event:E,listeners:N}),S?E.data=S:(S=yI(r),S!==null&&(E.data=S)))),(S=r7?n7(e,r):s7(e,r))&&(u=ex(u,"onBeforeInput"),0<u.length&&(d=new MA("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=S))}AI(f,t)})}function mp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ex(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=op(e,r),i!=null&&n.unshift(mp(e,i,a)),i=op(e,t),i!=null&&n.push(mp(e,i,a))),e=e.return}return n}function Zu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function KA(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=op(r,i),c!=null&&o.unshift(mp(r,c,l))):a||(c=op(r,i),c!=null&&o.push(mp(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var y7=/\r\n?/g,x7=/\u0000|\uFFFD/g;function GA(e){return(typeof e=="string"?e:""+e).replace(y7,`
`).replace(x7,"")}function Rv(e,t,r){if(t=GA(t),GA(e)!==t&&r)throw Error(ye(425))}function tx(){}var pN=null,gN=null;function vN(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yN=typeof setTimeout=="function"?setTimeout:void 0,b7=typeof clearTimeout=="function"?clearTimeout:void 0,YA=typeof Promise=="function"?Promise:void 0,w7=typeof queueMicrotask=="function"?queueMicrotask:typeof YA<"u"?function(e){return YA.resolve(null).then(e).catch(j7)}:yN;function j7(e){setTimeout(function(){throw e})}function Ej(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),up(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);up(t)}function Pl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function XA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var lh=Math.random().toString(36).slice(2),pi="__reactFiber$"+lh,pp="__reactProps$"+lh,yo="__reactContainer$"+lh,xN="__reactEvents$"+lh,_7="__reactListeners$"+lh,N7="__reactHandles$"+lh;function Tc(e){var t=e[pi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[yo]||r[pi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=XA(e);e!==null;){if(r=e[pi])return r;e=XA(e)}return t}e=r,r=e.parentNode}return null}function Dg(e){return e=e[pi]||e[yo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _d(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ye(33))}function n0(e){return e[pp]||null}var bN=[],Nd=-1;function Jl(e){return{current:e}}function jr(e){0>Nd||(e.current=bN[Nd],bN[Nd]=null,Nd--)}function fr(e,t){Nd++,bN[Nd]=e.current,e.current=t}var ql={},Un=Jl(ql),bs=Jl(!1),lu=ql;function hf(e,t){var r=e.type.contextTypes;if(!r)return ql;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ws(e){return e=e.childContextTypes,e!=null}function rx(){jr(bs),jr(Un)}function QA(e,t,r){if(Un.current!==ql)throw Error(ye(168));fr(Un,t),fr(bs,r)}function TI(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ye(108,l9(e)||"Unknown",a));return Pr({},r,n)}function nx(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ql,lu=Un.current,fr(Un,e),fr(bs,bs.current),!0}function ZA(e,t,r){var n=e.stateNode;if(!n)throw Error(ye(169));r?(e=TI(e,t,lu),n.__reactInternalMemoizedMergedChildContext=e,jr(bs),jr(Un),fr(Un,e)):jr(bs),fr(bs,r)}var eo=null,s0=!1,kj=!1;function DI(e){eo===null?eo=[e]:eo.push(e)}function S7(e){s0=!0,DI(e)}function ec(){if(!kj&&eo!==null){kj=!0;var e=0,t=er;try{var r=eo;for(er=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}eo=null,s0=!1}catch(a){throw eo!==null&&(eo=eo.slice(e+1)),sI(MC,ec),a}finally{er=t,kj=!1}}return null}var Sd=[],Cd=0,sx=null,ax=0,aa=[],ia=0,cu=null,ao=1,io="";function wc(e,t){Sd[Cd++]=ax,Sd[Cd++]=sx,sx=e,ax=t}function RI(e,t,r){aa[ia++]=ao,aa[ia++]=io,aa[ia++]=cu,cu=e;var n=ao;e=io;var a=32-qa(n)-1;n&=~(1<<a),r+=1;var i=32-qa(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ao=1<<32-qa(t)+a|r<<a|n,io=i+e}else ao=1<<i|r<<a|n,io=e}function qC(e){e.return!==null&&(wc(e,1),RI(e,1,0))}function WC(e){for(;e===sx;)sx=Sd[--Cd],Sd[Cd]=null,ax=Sd[--Cd],Sd[Cd]=null;for(;e===cu;)cu=aa[--ia],aa[ia]=null,io=aa[--ia],aa[ia]=null,ao=aa[--ia],aa[ia]=null}var Bs=null,Us=null,Sr=!1,Ua=null;function MI(e,t){var r=la(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function JA(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bs=e,Us=Pl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bs=e,Us=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=cu!==null?{id:ao,overflow:io}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=la(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Bs=e,Us=null,!0):!1;default:return!1}}function wN(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jN(e){if(Sr){var t=Us;if(t){var r=t;if(!JA(e,t)){if(wN(e))throw Error(ye(418));t=Pl(r.nextSibling);var n=Bs;t&&JA(e,t)?MI(n,r):(e.flags=e.flags&-4097|2,Sr=!1,Bs=e)}}else{if(wN(e))throw Error(ye(418));e.flags=e.flags&-4097|2,Sr=!1,Bs=e}}}function eO(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bs=e}function Mv(e){if(e!==Bs)return!1;if(!Sr)return eO(e),Sr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vN(e.type,e.memoizedProps)),t&&(t=Us)){if(wN(e))throw $I(),Error(ye(418));for(;t;)MI(e,t),t=Pl(t.nextSibling)}if(eO(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ye(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Us=Pl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Us=null}}else Us=Bs?Pl(e.stateNode.nextSibling):null;return!0}function $I(){for(var e=Us;e;)e=Pl(e.nextSibling)}function mf(){Us=Bs=null,Sr=!1}function HC(e){Ua===null?Ua=[e]:Ua.push(e)}var C7=Ao.ReactCurrentBatchConfig;function Zh(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ye(309));var n=r.stateNode}if(!n)throw Error(ye(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ye(284));if(!r._owner)throw Error(ye(290,e))}return e}function $v(e,t){throw e=Object.prototype.toString.call(t),Error(ye(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tO(e){var t=e._init;return t(e._payload)}function II(e){function t(x,b){if(e){var w=x.deletions;w===null?(x.deletions=[b],x.flags|=16):w.push(b)}}function r(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function n(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function a(x,b){return x=Dl(x,b),x.index=0,x.sibling=null,x}function i(x,b,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<b?(x.flags|=2,b):w):(x.flags|=2,b)):(x.flags|=1048576,b)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,b,w,_){return b===null||b.tag!==6?(b=Mj(w,x.mode,_),b.return=x,b):(b=a(b,w),b.return=x,b)}function c(x,b,w,_){var j=w.type;return j===xd?d(x,b,w.props.children,_,w.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Yo&&tO(j)===b.type)?(_=a(b,w.props),_.ref=Zh(x,b,w),_.return=x,_):(_=Ty(w.type,w.key,w.props,null,x.mode,_),_.ref=Zh(x,b,w),_.return=x,_)}function u(x,b,w,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=$j(w,x.mode,_),b.return=x,b):(b=a(b,w.children||[]),b.return=x,b)}function d(x,b,w,_,j){return b===null||b.tag!==7?(b=Jc(w,x.mode,_,j),b.return=x,b):(b=a(b,w),b.return=x,b)}function f(x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Mj(""+b,x.mode,w),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Sv:return w=Ty(b.type,b.key,b.props,null,x.mode,w),w.ref=Zh(x,null,b),w.return=x,w;case yd:return b=$j(b,x.mode,w),b.return=x,b;case Yo:var _=b._init;return f(x,_(b._payload),w)}if(Cm(b)||Kh(b))return b=Jc(b,x.mode,w,null),b.return=x,b;$v(x,b)}return null}function h(x,b,w,_){var j=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(x,b,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Sv:return w.key===j?c(x,b,w,_):null;case yd:return w.key===j?u(x,b,w,_):null;case Yo:return j=w._init,h(x,b,j(w._payload),_)}if(Cm(w)||Kh(w))return j!==null?null:d(x,b,w,_,null);$v(x,w)}return null}function m(x,b,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(w)||null,l(b,x,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Sv:return x=x.get(_.key===null?w:_.key)||null,c(b,x,_,j);case yd:return x=x.get(_.key===null?w:_.key)||null,u(b,x,_,j);case Yo:var N=_._init;return m(x,b,w,N(_._payload),j)}if(Cm(_)||Kh(_))return x=x.get(w)||null,d(b,x,_,j,null);$v(b,_)}return null}function g(x,b,w,_){for(var j=null,N=null,S=b,E=b=0,C=null;S!==null&&E<w.length;E++){S.index>E?(C=S,S=null):C=S.sibling;var P=h(x,S,w[E],_);if(P===null){S===null&&(S=C);break}e&&S&&P.alternate===null&&t(x,S),b=i(P,b,E),N===null?j=P:N.sibling=P,N=P,S=C}if(E===w.length)return r(x,S),Sr&&wc(x,E),j;if(S===null){for(;E<w.length;E++)S=f(x,w[E],_),S!==null&&(b=i(S,b,E),N===null?j=S:N.sibling=S,N=S);return Sr&&wc(x,E),j}for(S=n(x,S);E<w.length;E++)C=m(S,x,E,w[E],_),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?E:C.key),b=i(C,b,E),N===null?j=C:N.sibling=C,N=C);return e&&S.forEach(function(A){return t(x,A)}),Sr&&wc(x,E),j}function p(x,b,w,_){var j=Kh(w);if(typeof j!="function")throw Error(ye(150));if(w=j.call(w),w==null)throw Error(ye(151));for(var N=j=null,S=b,E=b=0,C=null,P=w.next();S!==null&&!P.done;E++,P=w.next()){S.index>E?(C=S,S=null):C=S.sibling;var A=h(x,S,P.value,_);if(A===null){S===null&&(S=C);break}e&&S&&A.alternate===null&&t(x,S),b=i(A,b,E),N===null?j=A:N.sibling=A,N=A,S=C}if(P.done)return r(x,S),Sr&&wc(x,E),j;if(S===null){for(;!P.done;E++,P=w.next())P=f(x,P.value,_),P!==null&&(b=i(P,b,E),N===null?j=P:N.sibling=P,N=P);return Sr&&wc(x,E),j}for(S=n(x,S);!P.done;E++,P=w.next())P=m(S,x,E,P.value,_),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?E:P.key),b=i(P,b,E),N===null?j=P:N.sibling=P,N=P);return e&&S.forEach(function(k){return t(x,k)}),Sr&&wc(x,E),j}function v(x,b,w,_){if(typeof w=="object"&&w!==null&&w.type===xd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Sv:e:{for(var j=w.key,N=b;N!==null;){if(N.key===j){if(j=w.type,j===xd){if(N.tag===7){r(x,N.sibling),b=a(N,w.props.children),b.return=x,x=b;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Yo&&tO(j)===N.type){r(x,N.sibling),b=a(N,w.props),b.ref=Zh(x,N,w),b.return=x,x=b;break e}r(x,N);break}else t(x,N);N=N.sibling}w.type===xd?(b=Jc(w.props.children,x.mode,_,w.key),b.return=x,x=b):(_=Ty(w.type,w.key,w.props,null,x.mode,_),_.ref=Zh(x,b,w),_.return=x,x=_)}return o(x);case yd:e:{for(N=w.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(x,b.sibling),b=a(b,w.children||[]),b.return=x,x=b;break e}else{r(x,b);break}else t(x,b);b=b.sibling}b=$j(w,x.mode,_),b.return=x,x=b}return o(x);case Yo:return N=w._init,v(x,b,N(w._payload),_)}if(Cm(w))return g(x,b,w,_);if(Kh(w))return p(x,b,w,_);$v(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(x,b.sibling),b=a(b,w),b.return=x,x=b):(r(x,b),b=Mj(w,x.mode,_),b.return=x,x=b),o(x)):r(x,b)}return v}var pf=II(!0),LI=II(!1),ix=Jl(null),ox=null,Ed=null,KC=null;function GC(){KC=Ed=ox=null}function YC(e){var t=ix.current;jr(ix),e._currentValue=t}function _N(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function zd(e,t){ox=e,KC=Ed=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ys=!0),e.firstContext=null)}function ga(e){var t=e._currentValue;if(KC!==e)if(e={context:e,memoizedValue:t,next:null},Ed===null){if(ox===null)throw Error(ye(308));Ed=e,ox.dependencies={lanes:0,firstContext:e}}else Ed=Ed.next=e;return t}var Dc=null;function XC(e){Dc===null?Dc=[e]:Dc.push(e)}function FI(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,XC(t)):(r.next=a.next,a.next=r),t.interleaved=r,xo(e,n)}function xo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Xo=!1;function QC(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Al(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ft&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,xo(e,r)}return a=n.interleaved,a===null?(t.next=t,XC(n)):(t.next=a.next,a.next=t),n.interleaved=t,xo(e,r)}function Cy(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,$C(e,r)}}function rO(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function lx(e,t,r,n){var a=e.updateQueue;Xo=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(h=t,m=r,p.tag){case 1:if(g=p.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=Pr({},f,h);break e;case 2:Xo=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);du|=o,e.lanes=o,e.memoizedState=f}}function nO(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ye(191,a));a.call(n)}}}var Rg={},wi=Jl(Rg),gp=Jl(Rg),vp=Jl(Rg);function Rc(e){if(e===Rg)throw Error(ye(174));return e}function ZC(e,t){switch(fr(vp,t),fr(gp,e),fr(wi,Rg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nN(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=nN(t,e)}jr(wi),fr(wi,t)}function gf(){jr(wi),jr(gp),jr(vp)}function BI(e){Rc(vp.current);var t=Rc(wi.current),r=nN(t,e.type);t!==r&&(fr(gp,e),fr(wi,r))}function JC(e){gp.current===e&&(jr(wi),jr(gp))}var Er=Jl(0);function cx(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pj=[];function eE(){for(var e=0;e<Pj.length;e++)Pj[e]._workInProgressVersionPrimary=null;Pj.length=0}var Ey=Ao.ReactCurrentDispatcher,Aj=Ao.ReactCurrentBatchConfig,uu=0,kr=null,nn=null,gn=null,ux=!1,Bm=!1,yp=0,E7=0;function Dn(){throw Error(ye(321))}function tE(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ya(e[r],t[r]))return!1;return!0}function rE(e,t,r,n,a,i){if(uu=i,kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ey.current=e===null||e.memoizedState===null?O7:T7,e=r(n,a),Bm){i=0;do{if(Bm=!1,yp=0,25<=i)throw Error(ye(301));i+=1,gn=nn=null,t.updateQueue=null,Ey.current=D7,e=r(n,a)}while(Bm)}if(Ey.current=dx,t=nn!==null&&nn.next!==null,uu=0,gn=nn=kr=null,ux=!1,t)throw Error(ye(300));return e}function nE(){var e=yp!==0;return yp=0,e}function di(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?kr.memoizedState=gn=e:gn=gn.next=e,gn}function va(){if(nn===null){var e=kr.alternate;e=e!==null?e.memoizedState:null}else e=nn.next;var t=gn===null?kr.memoizedState:gn.next;if(t!==null)gn=t,nn=e;else{if(e===null)throw Error(ye(310));nn=e,e={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},gn===null?kr.memoizedState=gn=e:gn=gn.next=e}return gn}function xp(e,t){return typeof t=="function"?t(e):t}function Oj(e){var t=va(),r=t.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=e;var n=nn,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((uu&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,kr.lanes|=d,du|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Ya(n,t.memoizedState)||(ys=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,kr.lanes|=i,du|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Tj(e){var t=va(),r=t.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ya(i,t.memoizedState)||(ys=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function zI(){}function VI(e,t){var r=kr,n=va(),a=t(),i=!Ya(n.memoizedState,a);if(i&&(n.memoizedState=a,ys=!0),n=n.queue,sE(HI.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||gn!==null&&gn.memoizedState.tag&1){if(r.flags|=2048,bp(9,WI.bind(null,r,n,a,t),void 0,null),xn===null)throw Error(ye(349));uu&30||qI(r,t,a)}return a}function qI(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function WI(e,t,r,n){t.value=r,t.getSnapshot=n,KI(t)&&GI(e)}function HI(e,t,r){return r(function(){KI(t)&&GI(e)})}function KI(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ya(e,r)}catch{return!0}}function GI(e){var t=xo(e,1);t!==null&&Wa(t,e,1,-1)}function sO(e){var t=di();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xp,lastRenderedState:e},t.queue=e,e=e.dispatch=A7.bind(null,kr,e),[t.memoizedState,e]}function bp(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=kr.updateQueue,t===null?(t={lastEffect:null,stores:null},kr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function YI(){return va().memoizedState}function ky(e,t,r,n){var a=di();kr.flags|=e,a.memoizedState=bp(1|t,r,void 0,n===void 0?null:n)}function a0(e,t,r,n){var a=va();n=n===void 0?null:n;var i=void 0;if(nn!==null){var o=nn.memoizedState;if(i=o.destroy,n!==null&&tE(n,o.deps)){a.memoizedState=bp(t,r,i,n);return}}kr.flags|=e,a.memoizedState=bp(1|t,r,i,n)}function aO(e,t){return ky(8390656,8,e,t)}function sE(e,t){return a0(2048,8,e,t)}function XI(e,t){return a0(4,2,e,t)}function QI(e,t){return a0(4,4,e,t)}function ZI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function JI(e,t,r){return r=r!=null?r.concat([e]):null,a0(4,4,ZI.bind(null,t,e),r)}function aE(){}function eL(e,t){var r=va();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&tE(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function tL(e,t){var r=va();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&tE(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function rL(e,t,r){return uu&21?(Ya(r,t)||(r=oI(),kr.lanes|=r,du|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ys=!0),e.memoizedState=r)}function k7(e,t){var r=er;er=r!==0&&4>r?r:4,e(!0);var n=Aj.transition;Aj.transition={};try{e(!1),t()}finally{er=r,Aj.transition=n}}function nL(){return va().memoizedState}function P7(e,t,r){var n=Tl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},sL(e))aL(t,r);else if(r=FI(e,t,r,n),r!==null){var a=ns();Wa(r,e,n,a),iL(r,t,n)}}function A7(e,t,r){var n=Tl(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(sL(e))aL(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Ya(l,o)){var c=t.interleaved;c===null?(a.next=a,XC(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=FI(e,t,a,n),r!==null&&(a=ns(),Wa(r,e,n,a),iL(r,t,n))}}function sL(e){var t=e.alternate;return e===kr||t!==null&&t===kr}function aL(e,t){Bm=ux=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function iL(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,$C(e,r)}}var dx={readContext:ga,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useInsertionEffect:Dn,useLayoutEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useMutableSource:Dn,useSyncExternalStore:Dn,useId:Dn,unstable_isNewReconciler:!1},O7={readContext:ga,useCallback:function(e,t){return di().memoizedState=[e,t===void 0?null:t],e},useContext:ga,useEffect:aO,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ky(4194308,4,ZI.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ky(4194308,4,e,t)},useInsertionEffect:function(e,t){return ky(4,2,e,t)},useMemo:function(e,t){var r=di();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=di();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=P7.bind(null,kr,e),[n.memoizedState,e]},useRef:function(e){var t=di();return e={current:e},t.memoizedState=e},useState:sO,useDebugValue:aE,useDeferredValue:function(e){return di().memoizedState=e},useTransition:function(){var e=sO(!1),t=e[0];return e=k7.bind(null,e[1]),di().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=kr,a=di();if(Sr){if(r===void 0)throw Error(ye(407));r=r()}else{if(r=t(),xn===null)throw Error(ye(349));uu&30||qI(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,aO(HI.bind(null,n,i,e),[e]),n.flags|=2048,bp(9,WI.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=di(),t=xn.identifierPrefix;if(Sr){var r=io,n=ao;r=(n&~(1<<32-qa(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=yp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=E7++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},T7={readContext:ga,useCallback:eL,useContext:ga,useEffect:sE,useImperativeHandle:JI,useInsertionEffect:XI,useLayoutEffect:QI,useMemo:tL,useReducer:Oj,useRef:YI,useState:function(){return Oj(xp)},useDebugValue:aE,useDeferredValue:function(e){var t=va();return rL(t,nn.memoizedState,e)},useTransition:function(){var e=Oj(xp)[0],t=va().memoizedState;return[e,t]},useMutableSource:zI,useSyncExternalStore:VI,useId:nL,unstable_isNewReconciler:!1},D7={readContext:ga,useCallback:eL,useContext:ga,useEffect:sE,useImperativeHandle:JI,useInsertionEffect:XI,useLayoutEffect:QI,useMemo:tL,useReducer:Tj,useRef:YI,useState:function(){return Tj(xp)},useDebugValue:aE,useDeferredValue:function(e){var t=va();return nn===null?t.memoizedState=e:rL(t,nn.memoizedState,e)},useTransition:function(){var e=Tj(xp)[0],t=va().memoizedState;return[e,t]},useMutableSource:zI,useSyncExternalStore:VI,useId:nL,unstable_isNewReconciler:!1};function Da(e,t){if(e&&e.defaultProps){t=Pr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function NN(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Pr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var i0={isMounted:function(e){return(e=e._reactInternals)?Mu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ns(),a=Tl(e),i=fo(n,a);i.payload=t,r!=null&&(i.callback=r),t=Al(e,i,a),t!==null&&(Wa(t,e,a,n),Cy(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ns(),a=Tl(e),i=fo(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Al(e,i,a),t!==null&&(Wa(t,e,a,n),Cy(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ns(),n=Tl(e),a=fo(r,n);a.tag=2,t!=null&&(a.callback=t),t=Al(e,a,n),t!==null&&(Wa(t,e,n,r),Cy(t,e,n))}};function iO(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!fp(r,n)||!fp(a,i):!0}function oL(e,t,r){var n=!1,a=ql,i=t.contextType;return typeof i=="object"&&i!==null?i=ga(i):(a=ws(t)?lu:Un.current,n=t.contextTypes,i=(n=n!=null)?hf(e,a):ql),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=i0,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function oO(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&i0.enqueueReplaceState(t,t.state,null)}function SN(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},QC(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ga(i):(i=ws(t)?lu:Un.current,a.context=hf(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(NN(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&i0.enqueueReplaceState(a,a.state,null),lx(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function vf(e,t){try{var r="",n=t;do r+=o9(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Dj(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function CN(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var R7=typeof WeakMap=="function"?WeakMap:Map;function lL(e,t,r){r=fo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){hx||(hx=!0,$N=n),CN(e,t)},r}function cL(e,t,r){r=fo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){CN(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){CN(e,t),typeof n!="function"&&(Ol===null?Ol=new Set([this]):Ol.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function lO(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new R7;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=G7.bind(null,e,t,r),t.then(e,e))}function cO(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uO(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=fo(-1,1),t.tag=2,Al(r,t,1))),r.lanes|=1),e)}var M7=Ao.ReactCurrentOwner,ys=!1;function Yn(e,t,r,n){t.child=e===null?LI(t,null,r,n):pf(t,e.child,r,n)}function dO(e,t,r,n,a){r=r.render;var i=t.ref;return zd(t,a),n=rE(e,t,r,n,i,a),r=nE(),e!==null&&!ys?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bo(e,t,a)):(Sr&&r&&qC(t),t.flags|=1,Yn(e,t,n,a),t.child)}function fO(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!hE(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,uL(e,t,i,n,a)):(e=Ty(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:fp,r(o,n)&&e.ref===t.ref)return bo(e,t,a)}return t.flags|=1,e=Dl(i,n),e.ref=t.ref,e.return=t,t.child=e}function uL(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(fp(i,n)&&e.ref===t.ref)if(ys=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(ys=!0);else return t.lanes=e.lanes,bo(e,t,a)}return EN(e,t,r,n,a)}function dL(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fr(Pd,Ms),Ms|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fr(Pd,Ms),Ms|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,fr(Pd,Ms),Ms|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,fr(Pd,Ms),Ms|=n;return Yn(e,t,a,r),t.child}function fL(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function EN(e,t,r,n,a){var i=ws(r)?lu:Un.current;return i=hf(t,i),zd(t,a),r=rE(e,t,r,n,i,a),n=nE(),e!==null&&!ys?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bo(e,t,a)):(Sr&&n&&qC(t),t.flags|=1,Yn(e,t,r,a),t.child)}function hO(e,t,r,n,a){if(ws(r)){var i=!0;nx(t)}else i=!1;if(zd(t,a),t.stateNode===null)Py(e,t),oL(t,r,n),SN(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=ga(u):(u=ws(r)?lu:Un.current,u=hf(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&oO(t,o,n,u),Xo=!1;var h=t.memoizedState;o.state=h,lx(t,n,o,a),c=t.memoizedState,l!==n||h!==c||bs.current||Xo?(typeof d=="function"&&(NN(t,r,d,n),c=t.memoizedState),(l=Xo||iO(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,UI(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Da(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ga(c):(c=ws(r)?lu:Un.current,c=hf(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&oO(t,o,n,c),Xo=!1,h=t.memoizedState,o.state=h,lx(t,n,o,a);var g=t.memoizedState;l!==f||h!==g||bs.current||Xo?(typeof m=="function"&&(NN(t,r,m,n),g=t.memoizedState),(u=Xo||iO(t,r,u,n,h,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return kN(e,t,r,n,i,a)}function kN(e,t,r,n,a,i){fL(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&ZA(t,r,!1),bo(e,t,i);n=t.stateNode,M7.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=pf(t,e.child,null,i),t.child=pf(t,null,l,i)):Yn(e,t,l,i),t.memoizedState=n.state,a&&ZA(t,r,!0),t.child}function hL(e){var t=e.stateNode;t.pendingContext?QA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&QA(e,t.context,!1),ZC(e,t.containerInfo)}function mO(e,t,r,n,a){return mf(),HC(a),t.flags|=256,Yn(e,t,r,n),t.child}var PN={dehydrated:null,treeContext:null,retryLane:0};function AN(e){return{baseLanes:e,cachePool:null,transitions:null}}function mL(e,t,r){var n=t.pendingProps,a=Er.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),fr(Er,a&1),e===null)return jN(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=c0(o,n,0,null),e=Jc(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=AN(r),t.memoizedState=PN,e):iE(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return $7(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Dl(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Dl(l,i):(i=Jc(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?AN(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=PN,n}return i=e.child,e=i.sibling,n=Dl(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function iE(e,t){return t=c0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Iv(e,t,r,n){return n!==null&&HC(n),pf(t,e.child,null,r),e=iE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $7(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Dj(Error(ye(422))),Iv(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=c0({mode:"visible",children:n.children},a,0,null),i=Jc(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&pf(t,e.child,null,o),t.child.memoizedState=AN(o),t.memoizedState=PN,i);if(!(t.mode&1))return Iv(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ye(419)),n=Dj(i,n,void 0),Iv(e,t,o,n)}if(l=(o&e.childLanes)!==0,ys||l){if(n=xn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,xo(e,a),Wa(n,e,a,-1))}return fE(),n=Dj(Error(ye(421))),Iv(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Y7.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Us=Pl(a.nextSibling),Bs=t,Sr=!0,Ua=null,e!==null&&(aa[ia++]=ao,aa[ia++]=io,aa[ia++]=cu,ao=e.id,io=e.overflow,cu=t),t=iE(t,n.children),t.flags|=4096,t)}function pO(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),_N(e.return,t,r)}function Rj(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function pL(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Yn(e,t,n.children,r),n=Er.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pO(e,r,t);else if(e.tag===19)pO(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(fr(Er,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&cx(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Rj(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&cx(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Rj(t,!0,r,null,i);break;case"together":Rj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Py(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),du|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ye(153));if(t.child!==null){for(e=t.child,r=Dl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Dl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function I7(e,t,r){switch(t.tag){case 3:hL(t),mf();break;case 5:BI(t);break;case 1:ws(t.type)&&nx(t);break;case 4:ZC(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;fr(ix,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(fr(Er,Er.current&1),t.flags|=128,null):r&t.child.childLanes?mL(e,t,r):(fr(Er,Er.current&1),e=bo(e,t,r),e!==null?e.sibling:null);fr(Er,Er.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return pL(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),fr(Er,Er.current),n)break;return null;case 22:case 23:return t.lanes=0,dL(e,t,r)}return bo(e,t,r)}var gL,ON,vL,yL;gL=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ON=function(){};vL=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Rc(wi.current);var i=null;switch(r){case"input":a=J_(e,a),n=J_(e,n),i=[];break;case"select":a=Pr({},a,{value:void 0}),n=Pr({},n,{value:void 0}),i=[];break;case"textarea":a=rN(e,a),n=rN(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=tx)}sN(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ap.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ap.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&xr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};yL=function(e,t,r,n){r!==n&&(t.flags|=4)};function Jh(e,t){if(!Sr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Rn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function L7(e,t,r){var n=t.pendingProps;switch(WC(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(t),null;case 1:return ws(t.type)&&rx(),Rn(t),null;case 3:return n=t.stateNode,gf(),jr(bs),jr(Un),eE(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Mv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ua!==null&&(FN(Ua),Ua=null))),ON(e,t),Rn(t),null;case 5:JC(t);var a=Rc(vp.current);if(r=t.type,e!==null&&t.stateNode!=null)vL(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ye(166));return Rn(t),null}if(e=Rc(wi.current),Mv(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[pi]=t,n[pp]=i,e=(t.mode&1)!==0,r){case"dialog":xr("cancel",n),xr("close",n);break;case"iframe":case"object":case"embed":xr("load",n);break;case"video":case"audio":for(a=0;a<km.length;a++)xr(km[a],n);break;case"source":xr("error",n);break;case"img":case"image":case"link":xr("error",n),xr("load",n);break;case"details":xr("toggle",n);break;case"input":NA(n,i),xr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},xr("invalid",n);break;case"textarea":CA(n,i),xr("invalid",n)}sN(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Rv(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Rv(n.textContent,l,e),a=["children",""+l]):ap.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&xr("scroll",n)}switch(r){case"input":Cv(n),SA(n,i,!0);break;case"textarea":Cv(n),EA(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=tx)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=H4(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[pi]=t,e[pp]=n,gL(e,t,!1,!1),t.stateNode=e;e:{switch(o=aN(r,n),r){case"dialog":xr("cancel",e),xr("close",e),a=n;break;case"iframe":case"object":case"embed":xr("load",e),a=n;break;case"video":case"audio":for(a=0;a<km.length;a++)xr(km[a],e);a=n;break;case"source":xr("error",e),a=n;break;case"img":case"image":case"link":xr("error",e),xr("load",e),a=n;break;case"details":xr("toggle",e),a=n;break;case"input":NA(e,n),a=J_(e,n),xr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Pr({},n,{value:void 0}),xr("invalid",e);break;case"textarea":CA(e,n),a=rN(e,n),xr("invalid",e);break;default:a=n}sN(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Y4(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&K4(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ip(e,c):typeof c=="number"&&ip(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ap.hasOwnProperty(i)?c!=null&&i==="onScroll"&&xr("scroll",e):c!=null&&AC(e,i,c,o))}switch(r){case"input":Cv(e),SA(e,n,!1);break;case"textarea":Cv(e),EA(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Vl(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Ld(e,!!n.multiple,i,!1):n.defaultValue!=null&&Ld(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=tx)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Rn(t),null;case 6:if(e&&t.stateNode!=null)yL(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ye(166));if(r=Rc(vp.current),Rc(wi.current),Mv(t)){if(n=t.stateNode,r=t.memoizedProps,n[pi]=t,(i=n.nodeValue!==r)&&(e=Bs,e!==null))switch(e.tag){case 3:Rv(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rv(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[pi]=t,t.stateNode=n}return Rn(t),null;case 13:if(jr(Er),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sr&&Us!==null&&t.mode&1&&!(t.flags&128))$I(),mf(),t.flags|=98560,i=!1;else if(i=Mv(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ye(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ye(317));i[pi]=t}else mf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Rn(t),i=!1}else Ua!==null&&(FN(Ua),Ua=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Er.current&1?on===0&&(on=3):fE())),t.updateQueue!==null&&(t.flags|=4),Rn(t),null);case 4:return gf(),ON(e,t),e===null&&hp(t.stateNode.containerInfo),Rn(t),null;case 10:return YC(t.type._context),Rn(t),null;case 17:return ws(t.type)&&rx(),Rn(t),null;case 19:if(jr(Er),i=t.memoizedState,i===null)return Rn(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Jh(i,!1);else{if(on!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=cx(e),o!==null){for(t.flags|=128,Jh(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return fr(Er,Er.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ur()>yf&&(t.flags|=128,n=!0,Jh(i,!1),t.lanes=4194304)}else{if(!n)if(e=cx(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Jh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Sr)return Rn(t),null}else 2*Ur()-i.renderingStartTime>yf&&r!==1073741824&&(t.flags|=128,n=!0,Jh(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ur(),t.sibling=null,r=Er.current,fr(Er,n?r&1|2:r&1),t):(Rn(t),null);case 22:case 23:return dE(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ms&1073741824&&(Rn(t),t.subtreeFlags&6&&(t.flags|=8192)):Rn(t),null;case 24:return null;case 25:return null}throw Error(ye(156,t.tag))}function F7(e,t){switch(WC(t),t.tag){case 1:return ws(t.type)&&rx(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gf(),jr(bs),jr(Un),eE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return JC(t),null;case 13:if(jr(Er),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ye(340));mf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return jr(Er),null;case 4:return gf(),null;case 10:return YC(t.type._context),null;case 22:case 23:return dE(),null;case 24:return null;default:return null}}var Lv=!1,In=!1,U7=typeof WeakSet=="function"?WeakSet:Set,Te=null;function kd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){$r(e,t,n)}else r.current=null}function TN(e,t,r){try{r()}catch(n){$r(e,t,n)}}var gO=!1;function B7(e,t){if(pN=Zy,e=_I(),VC(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===i&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(gN={focusedElem:e,selectionRange:r},Zy=!1,Te=t;Te!==null;)if(t=Te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Te=e;else for(;Te!==null;){t=Te;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,v=g.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:Da(t.type,p),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(_){$r(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Te=e;break}Te=t.return}return g=gO,gO=!1,g}function zm(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&TN(t,r,i)}a=a.next}while(a!==n)}}function o0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function DN(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function xL(e){var t=e.alternate;t!==null&&(e.alternate=null,xL(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pi],delete t[pp],delete t[xN],delete t[_7],delete t[N7])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bL(e){return e.tag===5||e.tag===3||e.tag===4}function vO(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bL(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function RN(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=tx));else if(n!==4&&(e=e.child,e!==null))for(RN(e,t,r),e=e.sibling;e!==null;)RN(e,t,r),e=e.sibling}function MN(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(MN(e,t,r),e=e.sibling;e!==null;)MN(e,t,r),e=e.sibling}var Cn=null,$a=!1;function zo(e,t,r){for(r=r.child;r!==null;)wL(e,t,r),r=r.sibling}function wL(e,t,r){if(bi&&typeof bi.onCommitFiberUnmount=="function")try{bi.onCommitFiberUnmount(Jb,r)}catch{}switch(r.tag){case 5:In||kd(r,t);case 6:var n=Cn,a=$a;Cn=null,zo(e,t,r),Cn=n,$a=a,Cn!==null&&($a?(e=Cn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Cn.removeChild(r.stateNode));break;case 18:Cn!==null&&($a?(e=Cn,r=r.stateNode,e.nodeType===8?Ej(e.parentNode,r):e.nodeType===1&&Ej(e,r),up(e)):Ej(Cn,r.stateNode));break;case 4:n=Cn,a=$a,Cn=r.stateNode.containerInfo,$a=!0,zo(e,t,r),Cn=n,$a=a;break;case 0:case 11:case 14:case 15:if(!In&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&TN(r,t,o),a=a.next}while(a!==n)}zo(e,t,r);break;case 1:if(!In&&(kd(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){$r(r,t,l)}zo(e,t,r);break;case 21:zo(e,t,r);break;case 22:r.mode&1?(In=(n=In)||r.memoizedState!==null,zo(e,t,r),In=n):zo(e,t,r);break;default:zo(e,t,r)}}function yO(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new U7),t.forEach(function(n){var a=X7.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ka(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Cn=l.stateNode,$a=!1;break e;case 3:Cn=l.stateNode.containerInfo,$a=!0;break e;case 4:Cn=l.stateNode.containerInfo,$a=!0;break e}l=l.return}if(Cn===null)throw Error(ye(160));wL(i,o,a),Cn=null,$a=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){$r(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jL(t,e),t=t.sibling}function jL(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ka(t,e),ui(e),n&4){try{zm(3,e,e.return),o0(3,e)}catch(p){$r(e,e.return,p)}try{zm(5,e,e.return)}catch(p){$r(e,e.return,p)}}break;case 1:ka(t,e),ui(e),n&512&&r!==null&&kd(r,r.return);break;case 5:if(ka(t,e),ui(e),n&512&&r!==null&&kd(r,r.return),e.flags&32){var a=e.stateNode;try{ip(a,"")}catch(p){$r(e,e.return,p)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&q4(a,i),aN(l,o);var u=aN(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?Y4(a,f):d==="dangerouslySetInnerHTML"?K4(a,f):d==="children"?ip(a,f):AC(a,d,f,u)}switch(l){case"input":eN(a,i);break;case"textarea":W4(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ld(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ld(a,!!i.multiple,i.defaultValue,!0):Ld(a,!!i.multiple,i.multiple?[]:"",!1))}a[pp]=i}catch(p){$r(e,e.return,p)}}break;case 6:if(ka(t,e),ui(e),n&4){if(e.stateNode===null)throw Error(ye(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){$r(e,e.return,p)}}break;case 3:if(ka(t,e),ui(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{up(t.containerInfo)}catch(p){$r(e,e.return,p)}break;case 4:ka(t,e),ui(e);break;case 13:ka(t,e),ui(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(cE=Ur())),n&4&&yO(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(In=(u=In)||d,ka(t,e),In=u):ka(t,e),ui(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Te=e,d=e.child;d!==null;){for(f=Te=d;Te!==null;){switch(h=Te,m=h.child,h.tag){case 0:case 11:case 14:case 15:zm(4,h,h.return);break;case 1:kd(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){$r(n,r,p)}}break;case 5:kd(h,h.return);break;case 22:if(h.memoizedState!==null){bO(f);continue}}m!==null?(m.return=h,Te=m):bO(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=G4("display",o))}catch(p){$r(e,e.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){$r(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ka(t,e),ui(e),n&4&&yO(e);break;case 21:break;default:ka(t,e),ui(e)}}function ui(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(bL(r)){var n=r;break e}r=r.return}throw Error(ye(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ip(a,""),n.flags&=-33);var i=vO(e);MN(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=vO(e);RN(e,l,o);break;default:throw Error(ye(161))}}catch(c){$r(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function z7(e,t,r){Te=e,_L(e)}function _L(e,t,r){for(var n=(e.mode&1)!==0;Te!==null;){var a=Te,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Lv;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||In;l=Lv;var u=In;if(Lv=o,(In=c)&&!u)for(Te=a;Te!==null;)o=Te,c=o.child,o.tag===22&&o.memoizedState!==null?wO(a):c!==null?(c.return=o,Te=c):wO(a);for(;i!==null;)Te=i,_L(i),i=i.sibling;Te=a,Lv=l,In=u}xO(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Te=i):xO(e)}}function xO(e){for(;Te!==null;){var t=Te;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:In||o0(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!In)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Da(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&nO(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}nO(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&up(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}In||t.flags&512&&DN(t)}catch(h){$r(t,t.return,h)}}if(t===e){Te=null;break}if(r=t.sibling,r!==null){r.return=t.return,Te=r;break}Te=t.return}}function bO(e){for(;Te!==null;){var t=Te;if(t===e){Te=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Te=r;break}Te=t.return}}function wO(e){for(;Te!==null;){var t=Te;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{o0(4,t)}catch(c){$r(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){$r(t,a,c)}}var i=t.return;try{DN(t)}catch(c){$r(t,i,c)}break;case 5:var o=t.return;try{DN(t)}catch(c){$r(t,o,c)}}}catch(c){$r(t,t.return,c)}if(t===e){Te=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Te=l;break}Te=t.return}}var V7=Math.ceil,fx=Ao.ReactCurrentDispatcher,oE=Ao.ReactCurrentOwner,fa=Ao.ReactCurrentBatchConfig,Ft=0,xn=null,Gr=null,Pn=0,Ms=0,Pd=Jl(0),on=0,wp=null,du=0,l0=0,lE=0,Vm=null,gs=null,cE=0,yf=1/0,Qi=null,hx=!1,$N=null,Ol=null,Fv=!1,_l=null,mx=0,qm=0,IN=null,Ay=-1,Oy=0;function ns(){return Ft&6?Ur():Ay!==-1?Ay:Ay=Ur()}function Tl(e){return e.mode&1?Ft&2&&Pn!==0?Pn&-Pn:C7.transition!==null?(Oy===0&&(Oy=oI()),Oy):(e=er,e!==0||(e=window.event,e=e===void 0?16:mI(e.type)),e):1}function Wa(e,t,r,n){if(50<qm)throw qm=0,IN=null,Error(ye(185));Og(e,r,n),(!(Ft&2)||e!==xn)&&(e===xn&&(!(Ft&2)&&(l0|=r),on===4&&tl(e,Pn)),js(e,n),r===1&&Ft===0&&!(t.mode&1)&&(yf=Ur()+500,s0&&ec()))}function js(e,t){var r=e.callbackNode;C9(e,t);var n=Qy(e,e===xn?Pn:0);if(n===0)r!==null&&AA(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&AA(r),t===1)e.tag===0?S7(jO.bind(null,e)):DI(jO.bind(null,e)),w7(function(){!(Ft&6)&&ec()}),r=null;else{switch(lI(n)){case 1:r=MC;break;case 4:r=aI;break;case 16:r=Xy;break;case 536870912:r=iI;break;default:r=Xy}r=OL(r,NL.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function NL(e,t){if(Ay=-1,Oy=0,Ft&6)throw Error(ye(327));var r=e.callbackNode;if(Vd()&&e.callbackNode!==r)return null;var n=Qy(e,e===xn?Pn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=px(e,n);else{t=n;var a=Ft;Ft|=2;var i=CL();(xn!==e||Pn!==t)&&(Qi=null,yf=Ur()+500,Zc(e,t));do try{H7();break}catch(l){SL(e,l)}while(!0);GC(),fx.current=i,Ft=a,Gr!==null?t=0:(xn=null,Pn=0,t=on)}if(t!==0){if(t===2&&(a=uN(e),a!==0&&(n=a,t=LN(e,a))),t===1)throw r=wp,Zc(e,0),tl(e,n),js(e,Ur()),r;if(t===6)tl(e,n);else{if(a=e.current.alternate,!(n&30)&&!q7(a)&&(t=px(e,n),t===2&&(i=uN(e),i!==0&&(n=i,t=LN(e,i))),t===1))throw r=wp,Zc(e,0),tl(e,n),js(e,Ur()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ye(345));case 2:jc(e,gs,Qi);break;case 3:if(tl(e,n),(n&130023424)===n&&(t=cE+500-Ur(),10<t)){if(Qy(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ns(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=yN(jc.bind(null,e,gs,Qi),t);break}jc(e,gs,Qi);break;case 4:if(tl(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-qa(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Ur()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*V7(n/1960))-n,10<n){e.timeoutHandle=yN(jc.bind(null,e,gs,Qi),n);break}jc(e,gs,Qi);break;case 5:jc(e,gs,Qi);break;default:throw Error(ye(329))}}}return js(e,Ur()),e.callbackNode===r?NL.bind(null,e):null}function LN(e,t){var r=Vm;return e.current.memoizedState.isDehydrated&&(Zc(e,t).flags|=256),e=px(e,t),e!==2&&(t=gs,gs=r,t!==null&&FN(t)),e}function FN(e){gs===null?gs=e:gs.push.apply(gs,e)}function q7(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ya(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function tl(e,t){for(t&=~lE,t&=~l0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-qa(t),n=1<<r;e[r]=-1,t&=~n}}function jO(e){if(Ft&6)throw Error(ye(327));Vd();var t=Qy(e,0);if(!(t&1))return js(e,Ur()),null;var r=px(e,t);if(e.tag!==0&&r===2){var n=uN(e);n!==0&&(t=n,r=LN(e,n))}if(r===1)throw r=wp,Zc(e,0),tl(e,t),js(e,Ur()),r;if(r===6)throw Error(ye(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,gs,Qi),js(e,Ur()),null}function uE(e,t){var r=Ft;Ft|=1;try{return e(t)}finally{Ft=r,Ft===0&&(yf=Ur()+500,s0&&ec())}}function fu(e){_l!==null&&_l.tag===0&&!(Ft&6)&&Vd();var t=Ft;Ft|=1;var r=fa.transition,n=er;try{if(fa.transition=null,er=1,e)return e()}finally{er=n,fa.transition=r,Ft=t,!(Ft&6)&&ec()}}function dE(){Ms=Pd.current,jr(Pd)}function Zc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,b7(r)),Gr!==null)for(r=Gr.return;r!==null;){var n=r;switch(WC(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&rx();break;case 3:gf(),jr(bs),jr(Un),eE();break;case 5:JC(n);break;case 4:gf();break;case 13:jr(Er);break;case 19:jr(Er);break;case 10:YC(n.type._context);break;case 22:case 23:dE()}r=r.return}if(xn=e,Gr=e=Dl(e.current,null),Pn=Ms=t,on=0,wp=null,lE=l0=du=0,gs=Vm=null,Dc!==null){for(t=0;t<Dc.length;t++)if(r=Dc[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Dc=null}return e}function SL(e,t){do{var r=Gr;try{if(GC(),Ey.current=dx,ux){for(var n=kr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ux=!1}if(uu=0,gn=nn=kr=null,Bm=!1,yp=0,oE.current=null,r===null||r.return===null){on=1,wp=t,Gr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Pn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=cO(o);if(m!==null){m.flags&=-257,uO(m,o,l,i,t),m.mode&1&&lO(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){lO(i,u,t),fE();break e}c=Error(ye(426))}}else if(Sr&&l.mode&1){var v=cO(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),uO(v,o,l,i,t),HC(vf(c,l));break e}}i=c=vf(c,l),on!==4&&(on=2),Vm===null?Vm=[i]:Vm.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=lL(i,c,t);rO(i,x);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ol===null||!Ol.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=cL(i,l,t);rO(i,_);break e}}i=i.return}while(i!==null)}kL(r)}catch(j){t=j,Gr===r&&r!==null&&(Gr=r=r.return);continue}break}while(!0)}function CL(){var e=fx.current;return fx.current=dx,e===null?dx:e}function fE(){(on===0||on===3||on===2)&&(on=4),xn===null||!(du&268435455)&&!(l0&268435455)||tl(xn,Pn)}function px(e,t){var r=Ft;Ft|=2;var n=CL();(xn!==e||Pn!==t)&&(Qi=null,Zc(e,t));do try{W7();break}catch(a){SL(e,a)}while(!0);if(GC(),Ft=r,fx.current=n,Gr!==null)throw Error(ye(261));return xn=null,Pn=0,on}function W7(){for(;Gr!==null;)EL(Gr)}function H7(){for(;Gr!==null&&!v9();)EL(Gr)}function EL(e){var t=AL(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,t===null?kL(e):Gr=t,oE.current=null}function kL(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=F7(r,t),r!==null){r.flags&=32767,Gr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{on=6,Gr=null;return}}else if(r=L7(r,t,Ms),r!==null){Gr=r;return}if(t=t.sibling,t!==null){Gr=t;return}Gr=t=e}while(t!==null);on===0&&(on=5)}function jc(e,t,r){var n=er,a=fa.transition;try{fa.transition=null,er=1,K7(e,t,r,n)}finally{fa.transition=a,er=n}return null}function K7(e,t,r,n){do Vd();while(_l!==null);if(Ft&6)throw Error(ye(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ye(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(E9(e,i),e===xn&&(Gr=xn=null,Pn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Fv||(Fv=!0,OL(Xy,function(){return Vd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=fa.transition,fa.transition=null;var o=er;er=1;var l=Ft;Ft|=4,oE.current=null,B7(e,r),jL(r,e),h7(gN),Zy=!!pN,gN=pN=null,e.current=r,z7(r),y9(),Ft=l,er=o,fa.transition=i}else e.current=r;if(Fv&&(Fv=!1,_l=e,mx=a),i=e.pendingLanes,i===0&&(Ol=null),w9(r.stateNode),js(e,Ur()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(hx)throw hx=!1,e=$N,$N=null,e;return mx&1&&e.tag!==0&&Vd(),i=e.pendingLanes,i&1?e===IN?qm++:(qm=0,IN=e):qm=0,ec(),null}function Vd(){if(_l!==null){var e=lI(mx),t=fa.transition,r=er;try{if(fa.transition=null,er=16>e?16:e,_l===null)var n=!1;else{if(e=_l,_l=null,mx=0,Ft&6)throw Error(ye(331));var a=Ft;for(Ft|=4,Te=e.current;Te!==null;){var i=Te,o=i.child;if(Te.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Te=u;Te!==null;){var d=Te;switch(d.tag){case 0:case 11:case 15:zm(8,d,i)}var f=d.child;if(f!==null)f.return=d,Te=f;else for(;Te!==null;){d=Te;var h=d.sibling,m=d.return;if(xL(d),d===u){Te=null;break}if(h!==null){h.return=m,Te=h;break}Te=m}}}var g=i.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}Te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Te=o;else e:for(;Te!==null;){if(i=Te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zm(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Te=x;break e}Te=i.return}}var b=e.current;for(Te=b;Te!==null;){o=Te;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Te=w;else e:for(o=b;Te!==null;){if(l=Te,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:o0(9,l)}}catch(j){$r(l,l.return,j)}if(l===o){Te=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Te=_;break e}Te=l.return}}if(Ft=a,ec(),bi&&typeof bi.onPostCommitFiberRoot=="function")try{bi.onPostCommitFiberRoot(Jb,e)}catch{}n=!0}return n}finally{er=r,fa.transition=t}}return!1}function _O(e,t,r){t=vf(r,t),t=lL(e,t,1),e=Al(e,t,1),t=ns(),e!==null&&(Og(e,1,t),js(e,t))}function $r(e,t,r){if(e.tag===3)_O(e,e,r);else for(;t!==null;){if(t.tag===3){_O(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ol===null||!Ol.has(n))){e=vf(r,e),e=cL(t,e,1),t=Al(t,e,1),e=ns(),t!==null&&(Og(t,1,e),js(t,e));break}}t=t.return}}function G7(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ns(),e.pingedLanes|=e.suspendedLanes&r,xn===e&&(Pn&r)===r&&(on===4||on===3&&(Pn&130023424)===Pn&&500>Ur()-cE?Zc(e,0):lE|=r),js(e,t)}function PL(e,t){t===0&&(e.mode&1?(t=Pv,Pv<<=1,!(Pv&130023424)&&(Pv=4194304)):t=1);var r=ns();e=xo(e,t),e!==null&&(Og(e,t,r),js(e,r))}function Y7(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),PL(e,r)}function X7(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ye(314))}n!==null&&n.delete(t),PL(e,r)}var AL;AL=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||bs.current)ys=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ys=!1,I7(e,t,r);ys=!!(e.flags&131072)}else ys=!1,Sr&&t.flags&1048576&&RI(t,ax,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Py(e,t),e=t.pendingProps;var a=hf(t,Un.current);zd(t,r),a=rE(null,t,n,e,a,r);var i=nE();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ws(n)?(i=!0,nx(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,QC(t),a.updater=i0,t.stateNode=a,a._reactInternals=t,SN(t,n,e,r),t=kN(null,t,n,!0,i,r)):(t.tag=0,Sr&&i&&qC(t),Yn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Py(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Z7(n),e=Da(n,e),a){case 0:t=EN(null,t,n,e,r);break e;case 1:t=hO(null,t,n,e,r);break e;case 11:t=dO(null,t,n,e,r);break e;case 14:t=fO(null,t,n,Da(n.type,e),r);break e}throw Error(ye(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Da(n,a),EN(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Da(n,a),hO(e,t,n,a,r);case 3:e:{if(hL(t),e===null)throw Error(ye(387));n=t.pendingProps,i=t.memoizedState,a=i.element,UI(e,t),lx(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=vf(Error(ye(423)),t),t=mO(e,t,n,r,a);break e}else if(n!==a){a=vf(Error(ye(424)),t),t=mO(e,t,n,r,a);break e}else for(Us=Pl(t.stateNode.containerInfo.firstChild),Bs=t,Sr=!0,Ua=null,r=LI(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(mf(),n===a){t=bo(e,t,r);break e}Yn(e,t,n,r)}t=t.child}return t;case 5:return BI(t),e===null&&jN(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,vN(n,a)?o=null:i!==null&&vN(n,i)&&(t.flags|=32),fL(e,t),Yn(e,t,o,r),t.child;case 6:return e===null&&jN(t),null;case 13:return mL(e,t,r);case 4:return ZC(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=pf(t,null,n,r):Yn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Da(n,a),dO(e,t,n,a,r);case 7:return Yn(e,t,t.pendingProps,r),t.child;case 8:return Yn(e,t,t.pendingProps.children,r),t.child;case 12:return Yn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,fr(ix,n._currentValue),n._currentValue=o,i!==null)if(Ya(i.value,o)){if(i.children===a.children&&!bs.current){t=bo(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=fo(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),_N(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ye(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),_N(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Yn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,zd(t,r),a=ga(a),n=n(a),t.flags|=1,Yn(e,t,n,r),t.child;case 14:return n=t.type,a=Da(n,t.pendingProps),a=Da(n.type,a),fO(e,t,n,a,r);case 15:return uL(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Da(n,a),Py(e,t),t.tag=1,ws(n)?(e=!0,nx(t)):e=!1,zd(t,r),oL(t,n,a),SN(t,n,a,r),kN(null,t,n,!0,e,r);case 19:return pL(e,t,r);case 22:return dL(e,t,r)}throw Error(ye(156,t.tag))};function OL(e,t){return sI(e,t)}function Q7(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function la(e,t,r,n){return new Q7(e,t,r,n)}function hE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Z7(e){if(typeof e=="function")return hE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===TC)return 11;if(e===DC)return 14}return 2}function Dl(e,t){var r=e.alternate;return r===null?(r=la(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ty(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")hE(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case xd:return Jc(r.children,a,i,t);case OC:o=8,a|=8;break;case Y_:return e=la(12,r,t,a|2),e.elementType=Y_,e.lanes=i,e;case X_:return e=la(13,r,t,a),e.elementType=X_,e.lanes=i,e;case Q_:return e=la(19,r,t,a),e.elementType=Q_,e.lanes=i,e;case B4:return c0(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F4:o=10;break e;case U4:o=9;break e;case TC:o=11;break e;case DC:o=14;break e;case Yo:o=16,n=null;break e}throw Error(ye(130,e==null?e:typeof e,""))}return t=la(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Jc(e,t,r,n){return e=la(7,e,n,t),e.lanes=r,e}function c0(e,t,r,n){return e=la(22,e,n,t),e.elementType=B4,e.lanes=r,e.stateNode={isHidden:!1},e}function Mj(e,t,r){return e=la(6,e,null,t),e.lanes=r,e}function $j(e,t,r){return t=la(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function J7(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gj(0),this.expirationTimes=gj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gj(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function mE(e,t,r,n,a,i,o,l,c){return e=new J7(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=la(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},QC(i),e}function eK(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yd,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function TL(e){if(!e)return ql;e=e._reactInternals;e:{if(Mu(e)!==e||e.tag!==1)throw Error(ye(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ws(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ye(171))}if(e.tag===1){var r=e.type;if(ws(r))return TI(e,r,t)}return t}function DL(e,t,r,n,a,i,o,l,c){return e=mE(r,n,!0,e,a,i,o,l,c),e.context=TL(null),r=e.current,n=ns(),a=Tl(r),i=fo(n,a),i.callback=t??null,Al(r,i,a),e.current.lanes=a,Og(e,a,n),js(e,n),e}function u0(e,t,r,n){var a=t.current,i=ns(),o=Tl(a);return r=TL(r),t.context===null?t.context=r:t.pendingContext=r,t=fo(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Al(a,t,o),e!==null&&(Wa(e,a,o,i),Cy(e,a,o)),o}function gx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function NO(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function pE(e,t){NO(e,t),(e=e.alternate)&&NO(e,t)}function tK(){return null}var RL=typeof reportError=="function"?reportError:function(e){console.error(e)};function gE(e){this._internalRoot=e}d0.prototype.render=gE.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ye(409));u0(e,t,null,null)};d0.prototype.unmount=gE.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fu(function(){u0(null,e,null,null)}),t[yo]=null}};function d0(e){this._internalRoot=e}d0.prototype.unstable_scheduleHydration=function(e){if(e){var t=dI();e={blockedOn:null,target:e,priority:t};for(var r=0;r<el.length&&t!==0&&t<el[r].priority;r++);el.splice(r,0,e),r===0&&hI(e)}};function vE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function SO(){}function rK(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=gx(o);i.call(u)}}var o=DL(t,n,e,0,null,!1,!1,"",SO);return e._reactRootContainer=o,e[yo]=o.current,hp(e.nodeType===8?e.parentNode:e),fu(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=gx(c);l.call(u)}}var c=mE(e,0,!1,null,null,!1,!1,"",SO);return e._reactRootContainer=c,e[yo]=c.current,hp(e.nodeType===8?e.parentNode:e),fu(function(){u0(t,c,r,n)}),c}function h0(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=gx(o);l.call(c)}}u0(t,o,e,a)}else o=rK(r,t,e,a,n);return gx(o)}cI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Em(t.pendingLanes);r!==0&&($C(t,r|1),js(t,Ur()),!(Ft&6)&&(yf=Ur()+500,ec()))}break;case 13:fu(function(){var n=xo(e,1);if(n!==null){var a=ns();Wa(n,e,1,a)}}),pE(e,1)}};IC=function(e){if(e.tag===13){var t=xo(e,134217728);if(t!==null){var r=ns();Wa(t,e,134217728,r)}pE(e,134217728)}};uI=function(e){if(e.tag===13){var t=Tl(e),r=xo(e,t);if(r!==null){var n=ns();Wa(r,e,t,n)}pE(e,t)}};dI=function(){return er};fI=function(e,t){var r=er;try{return er=e,t()}finally{er=r}};oN=function(e,t,r){switch(t){case"input":if(eN(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=n0(n);if(!a)throw Error(ye(90));V4(n),eN(n,a)}}}break;case"textarea":W4(e,r);break;case"select":t=r.value,t!=null&&Ld(e,!!r.multiple,t,!1)}};Z4=uE;J4=fu;var nK={usingClientEntryPoint:!1,Events:[Dg,_d,n0,X4,Q4,uE]},em={findFiberByHostInstance:Tc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sK={bundleType:em.bundleType,version:em.version,rendererPackageName:em.rendererPackageName,rendererConfig:em.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rI(e),e===null?null:e.stateNode},findFiberByHostInstance:em.findFiberByHostInstance||tK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uv.isDisabled&&Uv.supportsFiber)try{Jb=Uv.inject(sK),bi=Uv}catch{}}Xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nK;Xs.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vE(t))throw Error(ye(200));return eK(e,t,null,r)};Xs.createRoot=function(e,t){if(!vE(e))throw Error(ye(299));var r=!1,n="",a=RL;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=mE(e,1,!1,null,null,r,!1,n,a),e[yo]=t.current,hp(e.nodeType===8?e.parentNode:e),new gE(t)};Xs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ye(188)):(e=Object.keys(e).join(","),Error(ye(268,e)));return e=rI(t),e=e===null?null:e.stateNode,e};Xs.flushSync=function(e){return fu(e)};Xs.hydrate=function(e,t,r){if(!f0(t))throw Error(ye(200));return h0(null,e,t,!0,r)};Xs.hydrateRoot=function(e,t,r){if(!vE(e))throw Error(ye(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=RL;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=DL(t,null,e,1,r??null,a,!1,i,o),e[yo]=t.current,hp(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new d0(t)};Xs.render=function(e,t,r){if(!f0(t))throw Error(ye(200));return h0(null,e,t,!1,r)};Xs.unmountComponentAtNode=function(e){if(!f0(e))throw Error(ye(40));return e._reactRootContainer?(fu(function(){h0(null,null,e,!1,function(){e._reactRootContainer=null,e[yo]=null})}),!0):!1};Xs.unstable_batchedUpdates=uE;Xs.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!f0(r))throw Error(ye(200));if(e==null||e._reactInternals===void 0)throw Error(ye(38));return h0(e,t,r,!1,n)};Xs.version="18.3.1-next-f1338f8080-20240426";function ML(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ML)}catch(e){console.error(e)}}ML(),M4.exports=Xs;var $u=M4.exports;const $L=Gt($u);var IL,CO=$u;IL=CO.createRoot,CO.hydrateRoot;const aK=1,iK=1e6;let Ij=0;function oK(){return Ij=(Ij+1)%Number.MAX_SAFE_INTEGER,Ij.toString()}const Lj=new Map,EO=e=>{if(Lj.has(e))return;const t=setTimeout(()=>{Lj.delete(e),Wm({type:"REMOVE_TOAST",toastId:e})},iK);Lj.set(e,t)},lK=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,aK)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?EO(r):e.toasts.forEach(n=>{EO(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Dy=[];let Ry={toasts:[]};function Wm(e){Ry=lK(Ry,e),Dy.forEach(t=>{t(Ry)})}function J({...e}){const t=oK(),r=a=>Wm({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>Wm({type:"DISMISS_TOAST",toastId:t});return Wm({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function lr(){const[e,t]=y.useState(Ry);return y.useEffect(()=>(Dy.push(t),()=>{const r=Dy.indexOf(t);r>-1&&Dy.splice(r,1)}),[e]),{...e,toast:J,dismiss:r=>Wm({type:"DISMISS_TOAST",toastId:r})}}function pe(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function kO(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function m0(...e){return t=>{let r=!1;const n=e.map(a=>{const i=kO(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():kO(e[a],null)}}}}function Ke(...e){return y.useCallback(m0(...e),e)}function cK(e,t){const r=y.createContext(t),n=i=>{const{children:o,...l}=i,c=y.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=y.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function Qr(e,t=[]){let r=[];function n(i,o){const l=y.createContext(o),c=r.length;r=[...r,o];const u=f=>{var x;const{scope:h,children:m,...g}=f,p=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,v=y.useMemo(()=>g,Object.values(g));return s.jsx(p.Provider,{value:v,children:m})};u.displayName=i+"Provider";function d(f,h){var p;const m=((p=h==null?void 0:h[e])==null?void 0:p[c])||l,g=y.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(o=>y.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return y.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,uK(a,...t)]}function uK(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Wl(e){const t=dK(e),r=y.forwardRef((n,a)=>{const{children:i,...o}=n,l=y.Children.toArray(i),c=l.find(fK);if(c){const u=c.props.children,d=l.map(f=>f===c?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...o,ref:a,children:y.isValidElement(u)?y.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var LL=Wl("Slot");function dK(e){const t=y.forwardRef((r,n)=>{const{children:a,...i}=r;if(y.isValidElement(a)){const o=mK(a),l=hK(i,a.props);return a.type!==y.Fragment&&(l.ref=n?m0(n,o):o),y.cloneElement(a,l)}return y.Children.count(a)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var FL=Symbol("radix.slottable");function UL(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=FL,t}function fK(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===FL}function hK(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function mK(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Mg(e){const t=e+"CollectionProvider",[r,n]=Qr(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:x}=p,b=O.useRef(null),w=O.useRef(new Map).current;return s.jsx(a,{scope:v,itemMap:w,collectionRef:b,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Wl(l),u=O.forwardRef((p,v)=>{const{scope:x,children:b}=p,w=i(l,x),_=Ke(v,w.collectionRef);return s.jsx(c,{ref:_,children:b})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=Wl(d),m=O.forwardRef((p,v)=>{const{scope:x,children:b,...w}=p,_=O.useRef(null),j=Ke(v,_),N=i(d,x);return O.useEffect(()=>(N.itemMap.set(_,{ref:_,...w}),()=>void N.itemMap.delete(_))),s.jsx(h,{[f]:"",ref:j,children:b})});m.displayName=d;function g(p){const v=i(e+"CollectionConsumer",p);return O.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((N,S)=>w.indexOf(N.ref.current)-w.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,n]}var pK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ee=pK.reduce((e,t)=>{const r=Wl(`Primitive.${t}`),n=y.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function yE(e,t){e&&$u.flushSync(()=>e.dispatchEvent(t))}function Lr(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),y.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function gK(e,t=globalThis==null?void 0:globalThis.document){const r=Lr(e);y.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var vK="DismissableLayer",UN="dismissableLayer.update",yK="dismissableLayer.pointerDownOutside",xK="dismissableLayer.focusOutside",PO,BL=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Iu=y.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=y.useContext(BL),[d,f]=y.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=y.useState({}),g=Ke(t,S=>f(S)),p=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(v),b=d?p.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=b>=x,j=wK(S=>{const E=S.target,C=[...u.branches].some(P=>P.contains(E));!_||C||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},h),N=jK(S=>{const E=S.target;[...u.branches].some(P=>P.contains(E))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},h);return gK(S=>{b===u.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},h),y.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(PO=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),AO(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=PO)}},[d,h,r,u]),y.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),AO())},[d,u]),y.useEffect(()=>{const S=()=>m({});return document.addEventListener(UN,S),()=>document.removeEventListener(UN,S)},[]),s.jsx(Ee.div,{...c,ref:g,style:{pointerEvents:w?_?"auto":"none":void 0,...e.style},onFocusCapture:pe(e.onFocusCapture,N.onFocusCapture),onBlurCapture:pe(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:pe(e.onPointerDownCapture,j.onPointerDownCapture)})});Iu.displayName=vK;var bK="DismissableLayerBranch",zL=y.forwardRef((e,t)=>{const r=y.useContext(BL),n=y.useRef(null),a=Ke(t,n);return y.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Ee.div,{...e,ref:a})});zL.displayName=bK;function wK(e,t=globalThis==null?void 0:globalThis.document){const r=Lr(e),n=y.useRef(!1),a=y.useRef(()=>{});return y.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){VL(yK,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function jK(e,t=globalThis==null?void 0:globalThis.document){const r=Lr(e),n=y.useRef(!1);return y.useEffect(()=>{const a=i=>{i.target&&!n.current&&VL(xK,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function AO(){const e=new CustomEvent(UN);document.dispatchEvent(e)}function VL(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?yE(a,i):a.dispatchEvent(i)}var _K=Iu,NK=zL,Vr=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},SK="Portal",ch=y.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=y.useState(!1);Vr(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?$L.createPortal(s.jsx(Ee.div,{...n,ref:t}),o):null});ch.displayName=SK;function CK(e,t){return y.useReducer((r,n)=>t[r][n]??r,e)}var dn=e=>{const{present:t,children:r}=e,n=EK(t),a=typeof r=="function"?r({present:n.isPresent}):y.Children.only(r),i=Ke(n.ref,kK(a));return typeof r=="function"||n.isPresent?y.cloneElement(a,{ref:i}):null};dn.displayName="Presence";function EK(e){const[t,r]=y.useState(),n=y.useRef(null),a=y.useRef(e),i=y.useRef("none"),o=e?"mounted":"unmounted",[l,c]=CK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=Bv(n.current);i.current=l==="mounted"?u:"none"},[l]),Vr(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=Bv(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Vr(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const p=Bv(n.current).includes(m.animationName);if(m.target===t&&p&&(c("ANIMATION_END"),!a.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=m=>{m.target===t&&(i.current=Bv(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:y.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Bv(e){return(e==null?void 0:e.animationName)||"none"}function kK(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var PK=EC[" useInsertionEffect ".trim().toString()]||Vr;function Hs({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=AK({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=y.useRef(e!==void 0);y.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=y.useCallback(d=>{var f;if(l){const h=OK(d)?d(e):d;h!==e&&((f=o.current)==null||f.call(o,h))}else i(d)},[l,e,i,o]);return[c,u]}function AK({defaultProp:e,onChange:t}){const[r,n]=y.useState(e),a=y.useRef(r),i=y.useRef(t);return PK(()=>{i.current=t},[t]),y.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function OK(e){return typeof e=="function"}var qL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),TK="VisuallyHidden",p0=y.forwardRef((e,t)=>s.jsx(Ee.span,{...e,ref:t,style:{...qL,...e.style}}));p0.displayName=TK;var DK=p0,xE="ToastProvider",[bE,RK,MK]=Mg("Toast"),[WL,BFe]=Qr("Toast",[MK]),[$K,g0]=WL(xE),HL=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=y.useState(null),[u,d]=y.useState(0),f=y.useRef(!1),h=y.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${xE}\`. Expected non-empty \`string\`.`),s.jsx(bE.Provider,{scope:t,children:s.jsx($K,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:y.useCallback(()=>d(m=>m+1),[]),onToastRemove:y.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};HL.displayName=xE;var KL="ToastViewport",IK=["F8"],BN="toast.viewportPause",zN="toast.viewportResume",GL=y.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=IK,label:a="Notifications ({hotkey})",...i}=e,o=g0(KL,r),l=RK(r),c=y.useRef(null),u=y.useRef(null),d=y.useRef(null),f=y.useRef(null),h=Ke(t,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;y.useEffect(()=>{const v=x=>{var w;n.length!==0&&n.every(_=>x[_]||x.code===_)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),y.useEffect(()=>{const v=c.current,x=f.current;if(g&&v&&x){const b=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(BN);x.dispatchEvent(N),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(zN);x.dispatchEvent(N),o.isClosePausedRef.current=!1}},_=N=>{!v.contains(N.relatedTarget)&&w()},j=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",b),v.addEventListener("focusout",_),v.addEventListener("pointermove",b),v.addEventListener("pointerleave",j),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",b),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",b),v.removeEventListener("pointerleave",j),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const p=y.useCallback(({tabbingDirection:v})=>{const b=l().map(w=>{const _=w.ref.current,j=[_,...XK(_)];return v==="forwards"?j:j.reverse()});return(v==="forwards"?b.reverse():b).flat()},[l]);return y.useEffect(()=>{const v=f.current;if(v){const x=b=>{var j,N,S;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const E=document.activeElement,C=b.shiftKey;if(b.target===v&&C){(j=u.current)==null||j.focus();return}const k=p({tabbingDirection:C?"backwards":"forwards"}),D=k.findIndex(R=>R===E);Fj(k.slice(D+1))?b.preventDefault():C?(N=u.current)==null||N.focus():(S=d.current)==null||S.focus()}};return v.addEventListener("keydown",x),()=>v.removeEventListener("keydown",x)}},[l,p]),s.jsxs(NK,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&s.jsx(VN,{ref:u,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});Fj(v)}}),s.jsx(bE.Slot,{scope:r,children:s.jsx(Ee.ol,{tabIndex:-1,...i,ref:h})}),g&&s.jsx(VN,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});Fj(v)}})]})});GL.displayName=KL;var YL="ToastFocusProxy",VN=y.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=g0(YL,r);return s.jsx(p0,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});VN.displayName=YL;var $g="Toast",LK="toast.swipeStart",FK="toast.swipeMove",UK="toast.swipeCancel",BK="toast.swipeEnd",XL=y.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=Hs({prop:n,defaultProp:a??!0,onChange:i,caller:$g});return s.jsx(dn,{present:r||l,children:s.jsx(qK,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Lr(e.onPause),onResume:Lr(e.onResume),onSwipeStart:pe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:pe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});XL.displayName=$g;var[zK,VK]=WL($g,{onClose(){}}),qK=y.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...g}=e,p=g0($g,r),[v,x]=y.useState(null),b=Ke(t,R=>x(R)),w=y.useRef(null),_=y.useRef(null),j=a||p.duration,N=y.useRef(0),S=y.useRef(j),E=y.useRef(0),{onToastAdd:C,onToastRemove:P}=p,A=Lr(()=>{var U;(v==null?void 0:v.contains(document.activeElement))&&((U=p.viewport)==null||U.focus()),o()}),k=y.useCallback(R=>{!R||R===1/0||(window.clearTimeout(E.current),N.current=new Date().getTime(),E.current=window.setTimeout(A,R))},[A]);y.useEffect(()=>{const R=p.viewport;if(R){const U=()=>{k(S.current),u==null||u()},B=()=>{const L=new Date().getTime()-N.current;S.current=S.current-L,window.clearTimeout(E.current),c==null||c()};return R.addEventListener(BN,B),R.addEventListener(zN,U),()=>{R.removeEventListener(BN,B),R.removeEventListener(zN,U)}}},[p.viewport,j,c,u,k]),y.useEffect(()=>{i&&!p.isClosePausedRef.current&&k(j)},[i,j,p.isClosePausedRef,k]),y.useEffect(()=>(C(),()=>P()),[C,P]);const D=y.useMemo(()=>v?nF(v):null,[v]);return p.viewport?s.jsxs(s.Fragment,{children:[D&&s.jsx(WK,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),s.jsx(zK,{scope:r,onClose:A,children:$u.createPortal(s.jsx(bE.ItemSlot,{scope:r,children:s.jsx(_K,{asChild:!0,onEscapeKeyDown:pe(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||A(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Ee.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:pe(e.onKeyDown,R=>{R.key==="Escape"&&(l==null||l(R.nativeEvent),R.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:pe(e.onPointerDown,R=>{R.button===0&&(w.current={x:R.clientX,y:R.clientY})}),onPointerMove:pe(e.onPointerMove,R=>{if(!w.current)return;const U=R.clientX-w.current.x,B=R.clientY-w.current.y,L=!!_.current,M=["left","right"].includes(p.swipeDirection),T=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,F=M?T(0,U):0,Z=M?0:T(0,B),W=R.pointerType==="touch"?10:2,K={x:F,y:Z},V={originalEvent:R,delta:K};L?(_.current=K,zv(FK,f,V,{discrete:!1})):OO(K,p.swipeDirection,W)?(_.current=K,zv(LK,d,V,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(U)>W||Math.abs(B)>W)&&(w.current=null)}),onPointerUp:pe(e.onPointerUp,R=>{const U=_.current,B=R.target;if(B.hasPointerCapture(R.pointerId)&&B.releasePointerCapture(R.pointerId),_.current=null,w.current=null,U){const L=R.currentTarget,M={originalEvent:R,delta:U};OO(U,p.swipeDirection,p.swipeThreshold)?zv(BK,m,M,{discrete:!0}):zv(UK,h,M,{discrete:!0}),L.addEventListener("click",T=>T.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),WK=e=>{const{__scopeToast:t,children:r,...n}=e,a=g0($g,t),[i,o]=y.useState(!1),[l,c]=y.useState(!1);return GK(()=>o(!0)),y.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(ch,{asChild:!0,children:s.jsx(p0,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},HK="ToastTitle",QL=y.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ee.div,{...n,ref:t})});QL.displayName=HK;var KK="ToastDescription",ZL=y.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ee.div,{...n,ref:t})});ZL.displayName=KK;var JL="ToastAction",eF=y.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(rF,{altText:r,asChild:!0,children:s.jsx(wE,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${JL}\`. Expected non-empty \`string\`.`),null)});eF.displayName=JL;var tF="ToastClose",wE=y.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=VK(tF,r);return s.jsx(rF,{asChild:!0,children:s.jsx(Ee.button,{type:"button",...n,ref:t,onClick:pe(e.onClick,a.onClose)})})});wE.displayName=tF;var rF=y.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Ee.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function nF(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),YK(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...nF(n))}}),t}function zv(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?yE(a,i):a.dispatchEvent(i)}var OO=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function GK(e=()=>{}){const t=Lr(e);Vr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function YK(e){return e.nodeType===e.ELEMENT_NODE}function XK(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Fj(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var QK=HL,sF=GL,aF=XL,iF=QL,oF=ZL,lF=eF,cF=wE;function uF(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=uF(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function st(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=uF(e))&&(n&&(n+=" "),n+=t);return n}const TO=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,DO=st,uh=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return DO(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const h=TO(d)||TO(f);return a[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(g=>{let[p,v]=g;return Array.isArray(v)?v.includes({...i,...l}[p]):{...i,...l}[p]===v})?[...u,f,h]:u},[]);return DO(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dF=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>y.createElement("svg",{ref:c,...JK,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:dF("lucide",a),...l},[...o.map(([u,d])=>y.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(e,t)=>{const r=y.forwardRef(({className:n,...a},i)=>y.createElement(eG,{ref:i,iconNode:t,className:dF(`lucide-${ZK(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=xe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=xe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=xe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=xe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=xe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rG=xe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=xe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nG=xe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sG=xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=xe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=xe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=xe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=xe("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=xe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iG=xe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=xe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oG=xe("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=xe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lG=xe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=xe("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=xe("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=xe("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cG=xe("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=xe("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uG=xe("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=xe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=xe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=xe("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=xe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dG=xe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=xe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=xe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=xe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=xe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fG=xe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=xe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=xe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=xe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=xe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=xe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hG=xe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=xe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=xe("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=xe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mG=xe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=xe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=xe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pG=xe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gG=xe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=xe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=xe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=xe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=xe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),EE="-",vG=e=>{const t=xG(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(EE);return l[0]===""&&l.length!==1&&l.shift(),EF(l,t)||yG(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},EF=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?EF(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(EE);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},MO=/^\[(.+)\]$/,yG=e=>{if(MO.test(e)){const t=MO.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},xG=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return wG(Object.entries(e.classGroups),r).forEach(([i,o])=>{KN(o,n,i,t)}),n},KN=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:$O(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(bG(a)){KN(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{KN(o,$O(t,i),r,n)})})},$O=(e,t)=>{let r=e;return t.split(EE).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},bG=e=>e.isThemeGetter,wG=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,jG=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},kF="!",_G=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let v=0;v<l.length;v++){let x=l[v];if(u===0){if(x===a&&(n||l.slice(v,v+i)===t)){c.push(l.slice(d,v)),d=v+i;continue}if(x==="/"){f=v;continue}}x==="["?u++:x==="]"&&u--}const h=c.length===0?l:l.substring(d),m=h.startsWith(kF),g=m?h.substring(1):h,p=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:o}):o},NG=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},SG=e=>({cache:jG(e.cacheSize),parseClassName:_G(e),...vG(e)}),CG=/\s+/,EG=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(CG);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(u);let g=!!m,p=n(g?h.substring(0,m):h);if(!p){if(!g){l=u+(l.length>0?" "+l:l);continue}if(p=n(h),!p){l=u+(l.length>0?" "+l:l);continue}g=!1}const v=NG(d).join(":"),x=f?v+kF:v,b=x+p;if(i.includes(b))continue;i.push(b);const w=a(p,g);for(let _=0;_<w.length;++_){const j=w[_];i.push(x+j)}l=u+(l.length>0?" "+l:l)}return l};function kG(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=PF(t))&&(n&&(n+=" "),n+=r);return n}const PF=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=PF(e[n]))&&(r&&(r+=" "),r+=t);return r};function PG(e,...t){let r,n,a,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=SG(u),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=EG(c,r);return a(c,d),d}return function(){return i(kG.apply(null,arguments))}}const vr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},AF=/^\[(?:([a-z-]+):)?(.+)\]$/i,AG=/^\d+\/\d+$/,OG=new Set(["px","full","screen"]),TG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,DG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,RG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,MG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$G=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hi=e=>qd(e)||OG.has(e)||AG.test(e),Vo=e=>hh(e,"length",qG),qd=e=>!!e&&!Number.isNaN(Number(e)),Uj=e=>hh(e,"number",qd),tm=e=>!!e&&Number.isInteger(Number(e)),IG=e=>e.endsWith("%")&&qd(e.slice(0,-1)),dt=e=>AF.test(e),qo=e=>TG.test(e),LG=new Set(["length","size","percentage"]),FG=e=>hh(e,LG,OF),UG=e=>hh(e,"position",OF),BG=new Set(["image","url"]),zG=e=>hh(e,BG,HG),VG=e=>hh(e,"",WG),rm=()=>!0,hh=(e,t,r)=>{const n=AF.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},qG=e=>DG.test(e)&&!RG.test(e),OF=()=>!1,WG=e=>MG.test(e),HG=e=>$G.test(e),KG=()=>{const e=vr("colors"),t=vr("spacing"),r=vr("blur"),n=vr("brightness"),a=vr("borderColor"),i=vr("borderRadius"),o=vr("borderSpacing"),l=vr("borderWidth"),c=vr("contrast"),u=vr("grayscale"),d=vr("hueRotate"),f=vr("invert"),h=vr("gap"),m=vr("gradientColorStops"),g=vr("gradientColorStopPositions"),p=vr("inset"),v=vr("margin"),x=vr("opacity"),b=vr("padding"),w=vr("saturate"),_=vr("scale"),j=vr("sepia"),N=vr("skew"),S=vr("space"),E=vr("translate"),C=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",dt,t],k=()=>[dt,t],D=()=>["",Hi,Vo],R=()=>["auto",qd,dt],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],T=()=>["","0",dt],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[qd,dt];return{cacheSize:500,separator:":",theme:{colors:[rm],spacing:[Hi,Vo],blur:["none","",qo,dt],brightness:Z(),borderColor:[e],borderRadius:["none","","full",qo,dt],borderSpacing:k(),borderWidth:D(),contrast:Z(),grayscale:T(),hueRotate:Z(),invert:T(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[IG,Vo],inset:A(),margin:A(),opacity:Z(),padding:k(),saturate:Z(),scale:Z(),sepia:T(),skew:Z(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",dt]}],container:["container"],columns:[{columns:[qo]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),dt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tm,dt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",dt]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",tm,dt]}],"grid-cols":[{"grid-cols":[rm]}],"col-start-end":[{col:["auto",{span:["full",tm,dt]},dt]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[rm]}],"row-start-end":[{row:["auto",{span:[tm,dt]},dt]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",dt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",dt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",dt,t]}],"min-w":[{"min-w":[dt,t,"min","max","fit"]}],"max-w":[{"max-w":[dt,t,"none","full","min","max","fit","prose",{screen:[qo]},qo]}],h:[{h:[dt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[dt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[dt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[dt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",qo,Vo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Uj]}],"font-family":[{font:[rm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",dt]}],"line-clamp":[{"line-clamp":["none",qd,Uj]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hi,dt]}],"list-image":[{"list-image":["none",dt]}],"list-style-type":[{list:["none","disc","decimal",dt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hi,Vo]}],"underline-offset":[{"underline-offset":["auto",Hi,dt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",dt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",dt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),UG]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",FG]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zG]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:B()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[Hi,dt]}],"outline-w":[{outline:[Hi,Vo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Hi,Vo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",qo,VG]}],"shadow-color":[{shadow:[rm]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",qo,dt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",dt]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",dt]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",dt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[tm,dt]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",dt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",dt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",dt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Hi,Vo,Uj]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},GG=PG(KG);function ae(...e){return GG(st(e))}const YG=QK,TF=y.forwardRef(({className:e,...t},r)=>s.jsx(sF,{ref:r,className:ae("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));TF.displayName=sF.displayName;const XG=uh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),DF=y.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(aF,{ref:n,className:ae(XG({variant:t}),e),...r}));DF.displayName=aF.displayName;const QG=y.forwardRef(({className:e,...t},r)=>s.jsx(lF,{ref:r,className:ae("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));QG.displayName=lF.displayName;const RF=y.forwardRef(({className:e,...t},r)=>s.jsx(cF,{ref:r,className:ae("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Fn,{className:"h-4 w-4"})}));RF.displayName=cF.displayName;const MF=y.forwardRef(({className:e,...t},r)=>s.jsx(iF,{ref:r,className:ae("text-sm font-semibold",e),...t}));MF.displayName=iF.displayName;const $F=y.forwardRef(({className:e,...t},r)=>s.jsx(oF,{ref:r,className:ae("text-sm opacity-90",e),...t}));$F.displayName=oF.displayName;function ZG(){const{toasts:e}=lr();return s.jsxs(YG,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(DF,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(MF,{children:r}),n&&s.jsx($F,{children:n})]}),a,s.jsx(RF,{})]},t)}),s.jsx(TF,{})]})}var IO=["light","dark"],JG="(prefers-color-scheme: dark)",eY=y.createContext(void 0),tY={setTheme:e=>{},themes:[]},rY=()=>{var e;return(e=y.useContext(eY))!=null?e:tY};y.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=a?IO.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,p=!1,v=!0)=>{let x=o?o[g]:g,b=p?g+"|| ''":`'${x}'`,w="";return a&&v&&!p&&IO.includes(g)&&(w+=`d.style.colorScheme = '${g}';`),r==="class"?p||x?w+=`c.add(${b})`:w+="null":x&&(w+=`d[s](n,${b})`),w},m=e?`!function(){${d}${h(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${JG}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(i,!1,!1)};}${f}}catch(t){}}();`;return y.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var nY=e=>{switch(e){case"success":return iY;case"info":return lY;case"warning":return oY;case"error":return cY;default:return null}},sY=Array(12).fill(0),aY=({visible:e,className:t})=>O.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},O.createElement("div",{className:"sonner-spinner"},sY.map((r,n)=>O.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),iY=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),oY=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),lY=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),cY=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),uY=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},O.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),O.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),dY=()=>{let[e,t]=O.useState(document.hidden);return O.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},GN=1,fY=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:GN++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],O.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(mY(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||GN++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ms=new fY,hY=(e,t)=>{let r=(t==null?void 0:t.id)||GN++;return ms.addToast({title:e,...t,id:r}),r},mY=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",pY=hY,gY=()=>ms.toasts,vY=()=>ms.getActiveToasts();Object.assign(pY,{success:ms.success,info:ms.info,warning:ms.warning,error:ms.error,custom:ms.custom,message:ms.message,promise:ms.promise,dismiss:ms.dismiss,loading:ms.loading},{getHistory:gY,getToasts:vY});function yY(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}yY(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Vv(e){return e.label!==void 0}var xY=3,bY="32px",wY="16px",LO=4e3,jY=356,_Y=14,NY=20,SY=200;function Pa(...e){return e.filter(Boolean).join(" ")}function CY(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var EY=e=>{var t,r,n,a,i,o,l,c,u,d,f;let{invert:h,toast:m,unstyled:g,interacting:p,setHeights:v,visibleToasts:x,heights:b,index:w,toasts:_,expanded:j,removeToast:N,defaultRichColors:S,closeButton:E,style:C,cancelButtonStyle:P,actionButtonStyle:A,className:k="",descriptionClassName:D="",duration:R,position:U,gap:B,loadingIcon:L,expandByDefault:M,classNames:T,icons:F,closeButtonAriaLabel:Z="Close toast",pauseWhenPageIsHidden:W}=e,[K,V]=O.useState(null),[le,be]=O.useState(null),[ce,Pe]=O.useState(!1),[ie,me]=O.useState(!1),[_e,se]=O.useState(!1),[ot,He]=O.useState(!1),[Lt,Tt]=O.useState(!1),[Wt,Yt]=O.useState(0),[qr,z]=O.useState(0),Q=O.useRef(m.duration||R||LO),ee=O.useRef(null),Ne=O.useRef(null),Se=w===0,ve=w+1<=x,ke=m.type,lt=m.dismissible!==!1,St=m.className||"",jn=m.descriptionClassName||"",zn=O.useMemo(()=>b.findIndex(at=>at.toastId===m.id)||0,[b,m.id]),As=O.useMemo(()=>{var at;return(at=m.closeButton)!=null?at:E},[m.closeButton,E]),ci=O.useMemo(()=>m.duration||R||LO,[m.duration,R]),Na=O.useRef(0),cs=O.useRef(0),Uo=O.useRef(0),Zs=O.useRef(null),[Yu,Xu]=U.split("-"),hc=O.useMemo(()=>b.reduce((at,It,rr)=>rr>=zn?at:at+It.height,0),[b,zn]),vv=dY(),Vh=m.invert||h,qi=ke==="loading";cs.current=O.useMemo(()=>zn*B+hc,[zn,hc]),O.useEffect(()=>{Q.current=ci},[ci]),O.useEffect(()=>{Pe(!0)},[]),O.useEffect(()=>{let at=Ne.current;if(at){let It=at.getBoundingClientRect().height;return z(It),v(rr=>[{toastId:m.id,height:It,position:m.position},...rr]),()=>v(rr=>rr.filter(Vn=>Vn.toastId!==m.id))}},[v,m.id]),O.useLayoutEffect(()=>{if(!ce)return;let at=Ne.current,It=at.style.height;at.style.height="auto";let rr=at.getBoundingClientRect().height;at.style.height=It,z(rr),v(Vn=>Vn.find(qn=>qn.toastId===m.id)?Vn.map(qn=>qn.toastId===m.id?{...qn,height:rr}:qn):[{toastId:m.id,height:rr,position:m.position},...Vn])},[ce,m.title,m.description,v,m.id]);let Sa=O.useCallback(()=>{me(!0),Yt(cs.current),v(at=>at.filter(It=>It.toastId!==m.id)),setTimeout(()=>{N(m)},SY)},[m,N,v,cs]);O.useEffect(()=>{if(m.promise&&ke==="loading"||m.duration===1/0||m.type==="loading")return;let at;return j||p||W&&vv?(()=>{if(Uo.current<Na.current){let It=new Date().getTime()-Na.current;Q.current=Q.current-It}Uo.current=new Date().getTime()})():Q.current!==1/0&&(Na.current=new Date().getTime(),at=setTimeout(()=>{var It;(It=m.onAutoClose)==null||It.call(m,m),Sa()},Q.current)),()=>clearTimeout(at)},[j,p,m,ke,W,vv,Sa]),O.useEffect(()=>{m.delete&&Sa()},[Sa,m.delete]);function mc(){var at,It,rr;return F!=null&&F.loading?O.createElement("div",{className:Pa(T==null?void 0:T.loader,(at=m==null?void 0:m.classNames)==null?void 0:at.loader,"sonner-loader"),"data-visible":ke==="loading"},F.loading):L?O.createElement("div",{className:Pa(T==null?void 0:T.loader,(It=m==null?void 0:m.classNames)==null?void 0:It.loader,"sonner-loader"),"data-visible":ke==="loading"},L):O.createElement(aY,{className:Pa(T==null?void 0:T.loader,(rr=m==null?void 0:m.classNames)==null?void 0:rr.loader),visible:ke==="loading"})}return O.createElement("li",{tabIndex:0,ref:Ne,className:Pa(k,St,T==null?void 0:T.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,T==null?void 0:T.default,T==null?void 0:T[ke],(r=m==null?void 0:m.classNames)==null?void 0:r[ke]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:S,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":ce,"data-promise":!!m.promise,"data-swiped":Lt,"data-removed":ie,"data-visible":ve,"data-y-position":Yu,"data-x-position":Xu,"data-index":w,"data-front":Se,"data-swiping":_e,"data-dismissible":lt,"data-type":ke,"data-invert":Vh,"data-swipe-out":ot,"data-swipe-direction":le,"data-expanded":!!(j||M&&ce),style:{"--index":w,"--toasts-before":w,"--z-index":_.length-w,"--offset":`${ie?Wt:cs.current}px`,"--initial-height":M?"auto":`${qr}px`,...C,...m.style},onDragEnd:()=>{se(!1),V(null),Zs.current=null},onPointerDown:at=>{qi||!lt||(ee.current=new Date,Yt(cs.current),at.target.setPointerCapture(at.pointerId),at.target.tagName!=="BUTTON"&&(se(!0),Zs.current={x:at.clientX,y:at.clientY}))},onPointerUp:()=>{var at,It,rr,Vn;if(ot||!lt)return;Zs.current=null;let qn=Number(((at=Ne.current)==null?void 0:at.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Js=Number(((It=Ne.current)==null?void 0:It.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ca=new Date().getTime()-((rr=ee.current)==null?void 0:rr.getTime()),us=K==="x"?qn:Js,Ea=Math.abs(us)/Ca;if(Math.abs(us)>=NY||Ea>.11){Yt(cs.current),(Vn=m.onDismiss)==null||Vn.call(m,m),be(K==="x"?qn>0?"right":"left":Js>0?"down":"up"),Sa(),He(!0),Tt(!1);return}se(!1),V(null)},onPointerMove:at=>{var It,rr,Vn,qn;if(!Zs.current||!lt||((It=window.getSelection())==null?void 0:It.toString().length)>0)return;let Js=at.clientY-Zs.current.y,Ca=at.clientX-Zs.current.x,us=(rr=e.swipeDirections)!=null?rr:CY(U);!K&&(Math.abs(Ca)>1||Math.abs(Js)>1)&&V(Math.abs(Ca)>Math.abs(Js)?"x":"y");let Ea={x:0,y:0};K==="y"?(us.includes("top")||us.includes("bottom"))&&(us.includes("top")&&Js<0||us.includes("bottom")&&Js>0)&&(Ea.y=Js):K==="x"&&(us.includes("left")||us.includes("right"))&&(us.includes("left")&&Ca<0||us.includes("right")&&Ca>0)&&(Ea.x=Ca),(Math.abs(Ea.x)>0||Math.abs(Ea.y)>0)&&Tt(!0),(Vn=Ne.current)==null||Vn.style.setProperty("--swipe-amount-x",`${Ea.x}px`),(qn=Ne.current)==null||qn.style.setProperty("--swipe-amount-y",`${Ea.y}px`)}},As&&!m.jsx?O.createElement("button",{"aria-label":Z,"data-disabled":qi,"data-close-button":!0,onClick:qi||!lt?()=>{}:()=>{var at;Sa(),(at=m.onDismiss)==null||at.call(m,m)},className:Pa(T==null?void 0:T.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(i=F==null?void 0:F.close)!=null?i:uY):null,m.jsx||y.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:O.createElement(O.Fragment,null,ke||m.icon||m.promise?O.createElement("div",{"data-icon":"",className:Pa(T==null?void 0:T.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||mc():null,m.type!=="loading"?m.icon||(F==null?void 0:F[ke])||nY(ke):null):null,O.createElement("div",{"data-content":"",className:Pa(T==null?void 0:T.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},O.createElement("div",{"data-title":"",className:Pa(T==null?void 0:T.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?O.createElement("div",{"data-description":"",className:Pa(D,jn,T==null?void 0:T.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),y.isValidElement(m.cancel)?m.cancel:m.cancel&&Vv(m.cancel)?O.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:at=>{var It,rr;Vv(m.cancel)&&lt&&((rr=(It=m.cancel).onClick)==null||rr.call(It,at),Sa())},className:Pa(T==null?void 0:T.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,y.isValidElement(m.action)?m.action:m.action&&Vv(m.action)?O.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||A,onClick:at=>{var It,rr;Vv(m.action)&&((rr=(It=m.action).onClick)==null||rr.call(It,at),!at.defaultPrevented&&Sa())},className:Pa(T==null?void 0:T.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function FO(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function kY(e,t){let r={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?wY:bY;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var PY=y.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:h,style:m,visibleToasts:g=xY,toastOptions:p,dir:v=FO(),gap:x=_Y,loadingIcon:b,icons:w,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:j}=e,[N,S]=O.useState([]),E=O.useMemo(()=>Array.from(new Set([n].concat(N.filter(W=>W.position).map(W=>W.position)))),[N,n]),[C,P]=O.useState([]),[A,k]=O.useState(!1),[D,R]=O.useState(!1),[U,B]=O.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=O.useRef(null),M=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=O.useRef(null),F=O.useRef(!1),Z=O.useCallback(W=>{S(K=>{var V;return(V=K.find(le=>le.id===W.id))!=null&&V.delete||ms.dismiss(W.id),K.filter(({id:le})=>le!==W.id)})},[]);return O.useEffect(()=>ms.subscribe(W=>{if(W.dismiss){S(K=>K.map(V=>V.id===W.id?{...V,delete:!0}:V));return}setTimeout(()=>{$L.flushSync(()=>{S(K=>{let V=K.findIndex(le=>le.id===W.id);return V!==-1?[...K.slice(0,V),{...K[V],...W},...K.slice(V+1)]:[W,...K]})})})}),[]),O.useEffect(()=>{if(d!=="system"){B(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;let W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:K})=>{B(K?"dark":"light")})}catch{W.addListener(({matches:V})=>{try{B(V?"dark":"light")}catch(le){console.error(le)}})}},[d]),O.useEffect(()=>{N.length<=1&&k(!1)},[N]),O.useEffect(()=>{let W=K=>{var V,le;a.every(be=>K[be]||K.code===be)&&(k(!0),(V=L.current)==null||V.focus()),K.code==="Escape"&&(document.activeElement===L.current||(le=L.current)!=null&&le.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[a]),O.useEffect(()=>{if(L.current)return()=>{T.current&&(T.current.focus({preventScroll:!0}),T.current=null,F.current=!1)}},[L.current]),O.createElement("section",{ref:t,"aria-label":`${_} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((W,K)=>{var V;let[le,be]=W.split("-");return N.length?O.createElement("ol",{key:W,dir:v==="auto"?FO():v,tabIndex:-1,ref:L,className:l,"data-sonner-toaster":!0,"data-theme":U,"data-y-position":le,"data-lifted":A&&N.length>1&&!i,"data-x-position":be,style:{"--front-toast-height":`${((V=C[0])==null?void 0:V.height)||0}px`,"--width":`${jY}px`,"--gap":`${x}px`,...m,...kY(c,u)},onBlur:ce=>{F.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(F.current=!1,T.current&&(T.current.focus({preventScroll:!0}),T.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||F.current||(F.current=!0,T.current=ce.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{D||k(!1)},onDragEnd:()=>k(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},N.filter(ce=>!ce.position&&K===0||ce.position===W).map((ce,Pe)=>{var ie,me;return O.createElement(EY,{key:ce.id,icons:w,index:Pe,toast:ce,defaultRichColors:f,duration:(ie=p==null?void 0:p.duration)!=null?ie:h,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:r,visibleToasts:g,closeButton:(me=p==null?void 0:p.closeButton)!=null?me:o,interacting:D,position:W,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:Z,toasts:N.filter(_e=>_e.position==ce.position),heights:C.filter(_e=>_e.position==ce.position),setHeights:P,expandByDefault:i,gap:x,loadingIcon:b,expanded:A,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const AY=({...e})=>{const{theme:t="system"}=rY();return s.jsx(PY,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var OY=EC[" useId ".trim().toString()]||(()=>{}),TY=0;function ha(e){const[t,r]=y.useState(OY());return Vr(()=>{r(n=>n??String(TY++))},[e]),t?`radix-${t}`:""}const DY=["top","right","bottom","left"],Kl=Math.min,Ls=Math.max,bx=Math.round,qv=Math.floor,ji=e=>({x:e,y:e}),RY={left:"right",right:"left",bottom:"top",top:"bottom"},MY={start:"end",end:"start"};function YN(e,t,r){return Ls(e,Kl(t,r))}function _o(e,t){return typeof e=="function"?e(t):e}function No(e){return e.split("-")[0]}function mh(e){return e.split("-")[1]}function kE(e){return e==="x"?"y":"x"}function PE(e){return e==="y"?"height":"width"}const $Y=new Set(["top","bottom"]);function vi(e){return $Y.has(No(e))?"y":"x"}function AE(e){return kE(vi(e))}function IY(e,t,r){r===void 0&&(r=!1);const n=mh(e),a=AE(e),i=PE(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=wx(o)),[o,wx(o)]}function LY(e){const t=wx(e);return[XN(e),t,XN(t)]}function XN(e){return e.replace(/start|end/g,t=>MY[t])}const UO=["left","right"],BO=["right","left"],FY=["top","bottom"],UY=["bottom","top"];function BY(e,t,r){switch(e){case"top":case"bottom":return r?t?BO:UO:t?UO:BO;case"left":case"right":return t?FY:UY;default:return[]}}function zY(e,t,r,n){const a=mh(e);let i=BY(No(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(XN)))),i}function wx(e){return e.replace(/left|right|bottom|top/g,t=>RY[t])}function VY(e){return{top:0,right:0,bottom:0,left:0,...e}}function IF(e){return typeof e!="number"?VY(e):{top:e,right:e,bottom:e,left:e}}function jx(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function zO(e,t,r){let{reference:n,floating:a}=e;const i=vi(t),o=AE(t),l=PE(o),c=No(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-a.width,y:f};break;default:m={x:n.x,y:n.y}}switch(mh(t)){case"start":m[o]-=h*(r&&u?-1:1);break;case"end":m[o]+=h*(r&&u?-1:1);break}return m}const qY=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=zO(u,n,c),h=n,m={},g=0;for(let p=0;p<l.length;p++){const{name:v,fn:x}=l[p],{x:b,y:w,data:_,reset:j}=await x({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=b??d,f=w??f,m={...m,[v]:{...m[v],..._}},j&&g<=50&&(g++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:d,y:f}=zO(u,h,c)),p=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function Cp(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=_o(t,e),g=IF(m),v=l[h?f==="floating"?"reference":"floating":f],x=jx(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=jx(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(x.top-j.top+g.top)/_.y,bottom:(j.bottom-x.bottom+g.bottom)/_.y,left:(x.left-j.left+g.left)/_.x,right:(j.right-x.right+g.right)/_.x}}const WY=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=_o(e,t)||{};if(u==null)return{};const f=IF(d),h={x:r,y:n},m=AE(a),g=PE(m),p=await o.getDimensions(u),v=m==="y",x=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",_=i.reference[g]+i.reference[m]-h[m]-i.floating[g],j=h[m]-i.reference[m],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=N?N[w]:0;(!S||!await(o.isElement==null?void 0:o.isElement(N)))&&(S=l.floating[w]||i.floating[g]);const E=_/2-j/2,C=S/2-p[g]/2-1,P=Kl(f[x],C),A=Kl(f[b],C),k=P,D=S-p[g]-A,R=S/2-p[g]/2+E,U=YN(k,R,D),B=!c.arrow&&mh(a)!=null&&R!==U&&i.reference[g]/2-(R<k?P:A)-p[g]/2<0,L=B?R<k?R-k:R-D:0;return{[m]:h[m]+L,data:{[m]:U,centerOffset:R-U-L,...B&&{alignmentOffset:L}},reset:B}}}),HY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...v}=_o(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=No(a),b=vi(l),w=No(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=h||(w||!p?[wx(l)]:LY(l)),N=g!=="none";!h&&N&&j.push(...zY(l,p,g,_));const S=[l,...j],E=await Cp(t,v),C=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&C.push(E[x]),f){const R=IY(a,o,_);C.push(E[R[0]],E[R[1]])}if(P=[...P,{placement:a,overflows:C}],!C.every(R=>R<=0)){var A,k;const R=(((A=i.flip)==null?void 0:A.index)||0)+1,U=S[R];if(U&&(!(f==="alignment"?b!==vi(U):!1)||P.every(M=>M.overflows[0]>0&&vi(M.placement)===b)))return{data:{index:R,overflows:P},reset:{placement:U}};let B=(k=P.filter(L=>L.overflows[0]<=0).sort((L,M)=>L.overflows[1]-M.overflows[1])[0])==null?void 0:k.placement;if(!B)switch(m){case"bestFit":{var D;const L=(D=P.filter(M=>{if(N){const T=vi(M.placement);return T===b||T==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(T=>T>0).reduce((T,F)=>T+F,0)]).sort((M,T)=>M[1]-T[1])[0])==null?void 0:D[0];L&&(B=L);break}case"initialPlacement":B=l;break}if(a!==B)return{reset:{placement:B}}}return{}}}};function VO(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function qO(e){return DY.some(t=>e[t]>=0)}const KY=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=_o(e,t);switch(n){case"referenceHidden":{const i=await Cp(t,{...a,elementContext:"reference"}),o=VO(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qO(o)}}}case"escaped":{const i=await Cp(t,{...a,altBoundary:!0}),o=VO(i,r.floating);return{data:{escapedOffsets:o,escaped:qO(o)}}}default:return{}}}}},LF=new Set(["left","top"]);async function GY(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=No(r),l=mh(r),c=vi(r)==="y",u=LF.has(o)?-1:1,d=i&&c?-1:1,f=_o(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const YY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await GY(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},XY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x,y:b}=v;return{x,y:b}}},...c}=_o(e,t),u={x:r,y:n},d=await Cp(t,c),f=vi(No(a)),h=kE(f);let m=u[h],g=u[f];if(i){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",b=m+d[v],w=m-d[x];m=YN(b,m,w)}if(o){const v=f==="y"?"top":"left",x=f==="y"?"bottom":"right",b=g+d[v],w=g-d[x];g=YN(b,g,w)}const p=l.fn({...t,[h]:m,[f]:g});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[h]:i,[f]:o}}}}}},QY=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=_o(e,t),d={x:r,y:n},f=vi(a),h=kE(f);let m=d[h],g=d[f];const p=_o(l,t),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const w=h==="y"?"height":"width",_=i.reference[h]-i.floating[w]+v.mainAxis,j=i.reference[h]+i.reference[w]-v.mainAxis;m<_?m=_:m>j&&(m=j)}if(u){var x,b;const w=h==="y"?"width":"height",_=LF.has(No(a)),j=i.reference[f]-i.floating[w]+(_&&((x=o.offset)==null?void 0:x[f])||0)+(_?0:v.crossAxis),N=i.reference[f]+i.reference[w]+(_?0:((b=o.offset)==null?void 0:b[f])||0)-(_?v.crossAxis:0);g<j?g=j:g>N&&(g=N)}return{[h]:m,[f]:g}}}},ZY=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=_o(e,t),d=await Cp(t,u),f=No(a),h=mh(a),m=vi(a)==="y",{width:g,height:p}=i.floating;let v,x;f==="top"||f==="bottom"?(v=f,x=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,v=h==="end"?"top":"bottom");const b=p-d.top-d.bottom,w=g-d.left-d.right,_=Kl(p-d[v],b),j=Kl(g-d[x],w),N=!t.middlewareData.shift;let S=_,E=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(E=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(S=b),N&&!h){const P=Ls(d.left,0),A=Ls(d.right,0),k=Ls(d.top,0),D=Ls(d.bottom,0);m?E=g-2*(P!==0||A!==0?P+A:Ls(d.left,d.right)):S=p-2*(k!==0||D!==0?k+D:Ls(d.top,d.bottom))}await c({...t,availableWidth:E,availableHeight:S});const C=await o.getDimensions(l.floating);return g!==C.width||p!==C.height?{reset:{rects:!0}}:{}}}};function x0(){return typeof window<"u"}function ph(e){return FF(e)?(e.nodeName||"").toLowerCase():"#document"}function zs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ii(e){var t;return(t=(FF(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function FF(e){return x0()?e instanceof Node||e instanceof zs(e).Node:!1}function Qa(e){return x0()?e instanceof Element||e instanceof zs(e).Element:!1}function ki(e){return x0()?e instanceof HTMLElement||e instanceof zs(e).HTMLElement:!1}function WO(e){return!x0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof zs(e).ShadowRoot}const JY=new Set(["inline","contents"]);function Fg(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Za(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!JY.has(a)}const eX=new Set(["table","td","th"]);function tX(e){return eX.has(ph(e))}const rX=[":popover-open",":modal"];function b0(e){return rX.some(t=>{try{return e.matches(t)}catch{return!1}})}const nX=["transform","translate","scale","rotate","perspective"],sX=["transform","translate","scale","rotate","perspective","filter"],aX=["paint","layout","strict","content"];function OE(e){const t=TE(),r=Qa(e)?Za(e):e;return nX.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||sX.some(n=>(r.willChange||"").includes(n))||aX.some(n=>(r.contain||"").includes(n))}function iX(e){let t=Gl(e);for(;ki(t)&&!wf(t);){if(OE(t))return t;if(b0(t))return null;t=Gl(t)}return null}function TE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const oX=new Set(["html","body","#document"]);function wf(e){return oX.has(ph(e))}function Za(e){return zs(e).getComputedStyle(e)}function w0(e){return Qa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Gl(e){if(ph(e)==="html")return e;const t=e.assignedSlot||e.parentNode||WO(e)&&e.host||Ii(e);return WO(t)?t.host:t}function UF(e){const t=Gl(e);return wf(t)?e.ownerDocument?e.ownerDocument.body:e.body:ki(t)&&Fg(t)?t:UF(t)}function Ep(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=UF(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=zs(a);if(i){const l=QN(o);return t.concat(o,o.visualViewport||[],Fg(a)?a:[],l&&r?Ep(l):[])}return t.concat(a,Ep(a,[],r))}function QN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function BF(e){const t=Za(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=ki(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=bx(r)!==i||bx(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function DE(e){return Qa(e)?e:e.contextElement}function Wd(e){const t=DE(e);if(!ki(t))return ji(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=BF(t);let o=(i?bx(r.width):r.width)/n,l=(i?bx(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const lX=ji(0);function zF(e){const t=zs(e);return!TE()||!t.visualViewport?lX:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function cX(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==zs(e)?!1:t}function vu(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=DE(e);let o=ji(1);t&&(n?Qa(n)&&(o=Wd(n)):o=Wd(e));const l=cX(i,r,n)?zF(i):ji(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const h=zs(i),m=n&&Qa(n)?zs(n):n;let g=h,p=QN(g);for(;p&&n&&m!==g;){const v=Wd(p),x=p.getBoundingClientRect(),b=Za(p),w=x.left+(p.clientLeft+parseFloat(b.paddingLeft))*v.x,_=x.top+(p.clientTop+parseFloat(b.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,f*=v.y,c+=w,u+=_,g=zs(p),p=QN(g)}}return jx({width:d,height:f,x:c,y:u})}function RE(e,t){const r=w0(e).scrollLeft;return t?t.left+r:vu(Ii(e)).left+r}function VF(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:RE(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function uX(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Ii(n),l=t?b0(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=ji(1);const d=ji(0),f=ki(n);if((f||!f&&!i)&&((ph(n)!=="body"||Fg(o))&&(c=w0(n)),ki(n))){const m=vu(n);u=Wd(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=o&&!f&&!i?VF(o,c,!0):ji(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function dX(e){return Array.from(e.getClientRects())}function fX(e){const t=Ii(e),r=w0(e),n=e.ownerDocument.body,a=Ls(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Ls(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+RE(e);const l=-r.scrollTop;return Za(n).direction==="rtl"&&(o+=Ls(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function hX(e,t){const r=zs(e),n=Ii(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=TE();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const mX=new Set(["absolute","fixed"]);function pX(e,t){const r=vu(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=ki(e)?Wd(e):ji(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function HO(e,t,r){let n;if(t==="viewport")n=hX(e,r);else if(t==="document")n=fX(Ii(e));else if(Qa(t))n=pX(t,r);else{const a=zF(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return jx(n)}function qF(e,t){const r=Gl(e);return r===t||!Qa(r)||wf(r)?!1:Za(r).position==="fixed"||qF(r,t)}function gX(e,t){const r=t.get(e);if(r)return r;let n=Ep(e,[],!1).filter(l=>Qa(l)&&ph(l)!=="body"),a=null;const i=Za(e).position==="fixed";let o=i?Gl(e):e;for(;Qa(o)&&!wf(o);){const l=Za(o),c=OE(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&mX.has(a.position)||Fg(o)&&!c&&qF(e,o))?n=n.filter(d=>d!==o):a=l,o=Gl(o)}return t.set(e,n),n}function vX(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?b0(t)?[]:gX(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=HO(t,d,a);return u.top=Ls(f.top,u.top),u.right=Kl(f.right,u.right),u.bottom=Kl(f.bottom,u.bottom),u.left=Ls(f.left,u.left),u},HO(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function yX(e){const{width:t,height:r}=BF(e);return{width:t,height:r}}function xX(e,t,r){const n=ki(t),a=Ii(t),i=r==="fixed",o=vu(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=ji(0);function u(){c.x=RE(a)}if(n||!n&&!i)if((ph(t)!=="body"||Fg(a))&&(l=w0(t)),n){const m=vu(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?VF(a,l):ji(0),f=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function Bj(e){return Za(e).position==="static"}function KO(e,t){if(!ki(e)||Za(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Ii(e)===r&&(r=r.ownerDocument.body),r}function WF(e,t){const r=zs(e);if(b0(e))return r;if(!ki(e)){let a=Gl(e);for(;a&&!wf(a);){if(Qa(a)&&!Bj(a))return a;a=Gl(a)}return r}let n=KO(e,t);for(;n&&tX(n)&&Bj(n);)n=KO(n,t);return n&&wf(n)&&Bj(n)&&!OE(n)?r:n||iX(e)||r}const bX=async function(e){const t=this.getOffsetParent||WF,r=this.getDimensions,n=await r(e.floating);return{reference:xX(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function wX(e){return Za(e).direction==="rtl"}const jX={convertOffsetParentRelativeRectToViewportRelativeRect:uX,getDocumentElement:Ii,getClippingRect:vX,getOffsetParent:WF,getElementRects:bX,getClientRects:dX,getDimensions:yX,getScale:Wd,isElement:Qa,isRTL:wX};function HF(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function _X(e,t){let r=null,n;const a=Ii(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=qv(f),p=qv(a.clientWidth-(d+h)),v=qv(a.clientHeight-(f+m)),x=qv(d),w={rootMargin:-g+"px "+-p+"px "+-v+"px "+-x+"px",threshold:Ls(0,Kl(1,c))||1};let _=!0;function j(N){const S=N[0].intersectionRatio;if(S!==c){if(!_)return o();S?o(!1,S):n=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!HF(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function NX(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=DE(e),d=a||i?[...u?Ep(u):[],...Ep(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const f=u&&l?_X(u,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(x=>{let[b]=x;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let g,p=c?vu(e):null;c&&v();function v(){const x=vu(e);p&&!HF(p,x)&&r(),p=x,g=requestAnimationFrame(v)}return r(),()=>{var x;d.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),f==null||f(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const SX=YY,CX=XY,EX=HY,kX=ZY,PX=KY,GO=WY,AX=QY,OX=(e,t,r)=>{const n=new Map,a={platform:jX,...r},i={...a.platform,_c:n};return qY(e,t,{...a,platform:i})};var TX=typeof document<"u",DX=function(){},$y=TX?y.useLayoutEffect:DX;function _x(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!_x(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!_x(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function KF(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function YO(e,t){const r=KF(e);return Math.round(t*r)/r}function zj(e){const t=y.useRef(e);return $y(()=>{t.current=e}),t}function RX(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=y.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=y.useState(n);_x(h,n)||m(n);const[g,p]=y.useState(null),[v,x]=y.useState(null),b=y.useCallback(M=>{M!==N.current&&(N.current=M,p(M))},[]),w=y.useCallback(M=>{M!==S.current&&(S.current=M,x(M))},[]),_=i||g,j=o||v,N=y.useRef(null),S=y.useRef(null),E=y.useRef(d),C=c!=null,P=zj(c),A=zj(a),k=zj(u),D=y.useCallback(()=>{if(!N.current||!S.current)return;const M={placement:t,strategy:r,middleware:h};A.current&&(M.platform=A.current),OX(N.current,S.current,M).then(T=>{const F={...T,isPositioned:k.current!==!1};R.current&&!_x(E.current,F)&&(E.current=F,$u.flushSync(()=>{f(F)}))})},[h,t,r,A,k]);$y(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const R=y.useRef(!1);$y(()=>(R.current=!0,()=>{R.current=!1}),[]),$y(()=>{if(_&&(N.current=_),j&&(S.current=j),_&&j){if(P.current)return P.current(_,j,D);D()}},[_,j,D,P,C]);const U=y.useMemo(()=>({reference:N,floating:S,setReference:b,setFloating:w}),[b,w]),B=y.useMemo(()=>({reference:_,floating:j}),[_,j]),L=y.useMemo(()=>{const M={position:r,left:0,top:0};if(!B.floating)return M;const T=YO(B.floating,d.x),F=YO(B.floating,d.y);return l?{...M,transform:"translate("+T+"px, "+F+"px)",...KF(B.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:T,top:F}},[r,l,B.floating,d.x,d.y]);return y.useMemo(()=>({...d,update:D,refs:U,elements:B,floatingStyles:L}),[d,D,U,B,L])}const MX=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?GO({element:n.current,padding:a}).fn(r):{}:n?GO({element:n,padding:a}).fn(r):{}}}},$X=(e,t)=>({...SX(e),options:[e,t]}),IX=(e,t)=>({...CX(e),options:[e,t]}),LX=(e,t)=>({...AX(e),options:[e,t]}),FX=(e,t)=>({...EX(e),options:[e,t]}),UX=(e,t)=>({...kX(e),options:[e,t]}),BX=(e,t)=>({...PX(e),options:[e,t]}),zX=(e,t)=>({...MX(e),options:[e,t]});var VX="Arrow",GF=y.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Ee.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});GF.displayName=VX;var qX=GF;function Ug(e){const[t,r]=y.useState(void 0);return Vr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var ME="Popper",[YF,tc]=Qr(ME),[WX,XF]=YF(ME),QF=e=>{const{__scopePopper:t,children:r}=e,[n,a]=y.useState(null);return s.jsx(WX,{scope:t,anchor:n,onAnchorChange:a,children:r})};QF.displayName=ME;var ZF="PopperAnchor",JF=y.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=XF(ZF,r),o=y.useRef(null),l=Ke(t,o);return y.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(Ee.div,{...a,ref:l})});JF.displayName=ZF;var $E="PopperContent",[HX,KX]=YF($E),e3=y.forwardRef((e,t)=>{var ce,Pe,ie,me,_e,se;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...p}=e,v=XF($E,r),[x,b]=y.useState(null),w=Ke(t,ot=>b(ot)),[_,j]=y.useState(null),N=Ug(_),S=(N==null?void 0:N.width)??0,E=(N==null?void 0:N.height)??0,C=n+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},A=Array.isArray(u)?u:[u],k=A.length>0,D={padding:P,boundary:A.filter(YX),altBoundary:k},{refs:R,floatingStyles:U,placement:B,isPositioned:L,middlewareData:M}=RX({strategy:"fixed",placement:C,whileElementsMounted:(...ot)=>NX(...ot,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[$X({mainAxis:a+E,alignmentAxis:o}),c&&IX({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?LX():void 0,...D}),c&&FX({...D}),UX({...D,apply:({elements:ot,rects:He,availableWidth:Lt,availableHeight:Tt})=>{const{width:Wt,height:Yt}=He.reference,qr=ot.floating.style;qr.setProperty("--radix-popper-available-width",`${Lt}px`),qr.setProperty("--radix-popper-available-height",`${Tt}px`),qr.setProperty("--radix-popper-anchor-width",`${Wt}px`),qr.setProperty("--radix-popper-anchor-height",`${Yt}px`)}}),_&&zX({element:_,padding:l}),XX({arrowWidth:S,arrowHeight:E}),h&&BX({strategy:"referenceHidden",...D})]}),[T,F]=n3(B),Z=Lr(g);Vr(()=>{L&&(Z==null||Z())},[L,Z]);const W=(ce=M.arrow)==null?void 0:ce.x,K=(Pe=M.arrow)==null?void 0:Pe.y,V=((ie=M.arrow)==null?void 0:ie.centerOffset)!==0,[le,be]=y.useState();return Vr(()=>{x&&be(window.getComputedStyle(x).zIndex)},[x]),s.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:L?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(me=M.transformOrigin)==null?void 0:me.x,(_e=M.transformOrigin)==null?void 0:_e.y].join(" "),...((se=M.hide)==null?void 0:se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(HX,{scope:r,placedSide:T,onArrowChange:j,arrowX:W,arrowY:K,shouldHideArrow:V,children:s.jsx(Ee.div,{"data-side":T,"data-align":F,...p,ref:w,style:{...p.style,animation:L?void 0:"none"}})})})});e3.displayName=$E;var t3="PopperArrow",GX={top:"bottom",right:"left",bottom:"top",left:"right"},r3=y.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=KX(t3,n),o=GX[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(qX,{...a,ref:r,style:{...a.style,display:"block"}})})});r3.displayName=t3;function YX(e){return e!==null}var XX=e=>({name:"transformOrigin",options:e,fn(t){var v,x,b;const{placement:r,rects:n,middlewareData:a}=t,o=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=n3(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((x=a.arrow)==null?void 0:x.x)??0)+l/2,m=(((b=a.arrow)==null?void 0:b.y)??0)+c/2;let g="",p="";return u==="bottom"?(g=o?f:`${h}px`,p=`${-c}px`):u==="top"?(g=o?f:`${h}px`,p=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,p=o?f:`${m}px`):u==="left"&&(g=`${n.floating.width+c}px`,p=o?f:`${m}px`),{data:{x:g,y:p}}}});function n3(e){const[t,r="center"]=e.split("-");return[t,r]}var j0=QF,Bg=JF,_0=e3,N0=r3,[S0,zFe]=Qr("Tooltip",[tc]),C0=tc(),s3="TooltipProvider",QX=700,ZN="tooltip.open",[ZX,IE]=S0(s3),a3=e=>{const{__scopeTooltip:t,delayDuration:r=QX,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=y.useRef(!0),l=y.useRef(!1),c=y.useRef(0);return y.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(ZX,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:y.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:y.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};a3.displayName=s3;var kp="Tooltip",[JX,E0]=S0(kp),i3=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=IE(kp,e.__scopeTooltip),u=C0(t),[d,f]=y.useState(null),h=ha(),m=y.useRef(0),g=o??c.disableHoverableContent,p=l??c.delayDuration,v=y.useRef(!1),[x,b]=Hs({prop:n,defaultProp:a??!1,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(ZN))):c.onClose(),i==null||i(S)},caller:kp}),w=y.useMemo(()=>x?v.current?"delayed-open":"instant-open":"closed",[x]),_=y.useCallback(()=>{window.clearTimeout(m.current),m.current=0,v.current=!1,b(!0)},[b]),j=y.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b(!1)},[b]),N=y.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{v.current=!0,b(!0),m.current=0},p)},[p,b]);return y.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),s.jsx(j0,{...u,children:s.jsx(JX,{scope:t,contentId:h,open:x,stateAttribute:w,trigger:d,onTriggerChange:f,onTriggerEnter:y.useCallback(()=>{c.isOpenDelayedRef.current?N():_()},[c.isOpenDelayedRef,N,_]),onTriggerLeave:y.useCallback(()=>{g?j():(window.clearTimeout(m.current),m.current=0)},[j,g]),onOpen:_,onClose:j,disableHoverableContent:g,children:r})})};i3.displayName=kp;var JN="TooltipTrigger",o3=y.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=E0(JN,r),i=IE(JN,r),o=C0(r),l=y.useRef(null),c=Ke(t,l,a.onTriggerChange),u=y.useRef(!1),d=y.useRef(!1),f=y.useCallback(()=>u.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(Bg,{asChild:!0,...o,children:s.jsx(Ee.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:pe(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:pe(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:pe(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:pe(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:pe(e.onBlur,a.onClose),onClick:pe(e.onClick,a.onClose)})})});o3.displayName=JN;var eQ="TooltipPortal",[VFe,tQ]=S0(eQ,{forceMount:void 0}),jf="TooltipContent",l3=y.forwardRef((e,t)=>{const r=tQ(jf,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=E0(jf,e.__scopeTooltip);return s.jsx(dn,{present:n||o.open,children:o.disableHoverableContent?s.jsx(c3,{side:a,...i,ref:t}):s.jsx(rQ,{side:a,...i,ref:t})})}),rQ=y.forwardRef((e,t)=>{const r=E0(jf,e.__scopeTooltip),n=IE(jf,e.__scopeTooltip),a=y.useRef(null),i=Ke(t,a),[o,l]=y.useState(null),{trigger:c,onClose:u}=r,d=a.current,{onPointerInTransitChange:f}=n,h=y.useCallback(()=>{l(null),f(!1)},[f]),m=y.useCallback((g,p)=>{const v=g.currentTarget,x={x:g.clientX,y:g.clientY},b=oQ(x,v.getBoundingClientRect()),w=lQ(x,b),_=cQ(p.getBoundingClientRect()),j=dQ([...w,..._]);l(j),f(!0)},[f]);return y.useEffect(()=>()=>h(),[h]),y.useEffect(()=>{if(c&&d){const g=v=>m(v,d),p=v=>m(v,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",p)}}},[c,d,m,h]),y.useEffect(()=>{if(o){const g=p=>{const v=p.target,x={x:p.clientX,y:p.clientY},b=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),w=!uQ(x,o);b?h():w&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,o,u,h]),s.jsx(c3,{...e,ref:i})}),[nQ,sQ]=S0(kp,{isInside:!1}),aQ=UL("TooltipContent"),c3=y.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=E0(jf,r),u=C0(r),{onClose:d}=c;return y.useEffect(()=>(document.addEventListener(ZN,d),()=>document.removeEventListener(ZN,d)),[d]),y.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),s.jsx(Iu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:s.jsxs(_0,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(aQ,{children:n}),s.jsx(nQ,{scope:r,isInside:!0,children:s.jsx(DK,{id:c.contentId,role:"tooltip",children:a||n})})]})})});l3.displayName=jf;var u3="TooltipArrow",iQ=y.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=C0(r);return sQ(u3,r).isInside?null:s.jsx(N0,{...a,...n,ref:t})});iQ.displayName=u3;function oQ(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function lQ(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function cQ(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function uQ(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function dQ(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),fQ(t)}function fQ(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var hQ=a3,mQ=i3,pQ=o3,d3=l3;const gQ=hQ,f3=mQ,h3=pQ,LE=y.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(d3,{ref:n,sideOffset:t,className:ae("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));LE.displayName=d3.displayName;var gh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yu=typeof window>"u"||"Deno"in globalThis;function Xn(){}function vQ(e,t){return typeof e=="function"?e(t):e}function e1(e){return typeof e=="number"&&e>=0&&e!==1/0}function m3(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Rl(e,t){return typeof e=="function"?e(t):e}function sa(e,t){return typeof e=="function"?e(t):e}function XO(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==FE(o,t.options))return!1}else if(!Pp(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function QO(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(xu(t.options.mutationKey)!==xu(i))return!1}else if(!Pp(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function FE(e,t){return((t==null?void 0:t.queryKeyHashFn)||xu)(e)}function xu(e){return JSON.stringify(e,(t,r)=>t1(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Pp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Pp(e[r],t[r])):!1}function p3(e,t){if(e===t)return e;const r=ZO(e)&&ZO(t);if(r||t1(e)&&t1(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const f=r?d:i[d];(!r&&c.has(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,u++):(l[f]=p3(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function Nx(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function ZO(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function t1(e){if(!JO(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!JO(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function JO(e){return Object.prototype.toString.call(e)==="[object Object]"}function yQ(e){return new Promise(t=>{setTimeout(t,e)})}function r1(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?p3(e,t):t}function xQ(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function bQ(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var UE=Symbol();function g3(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===UE?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function v3(e,t){return typeof e=="function"?e(...t):!!e}var Vc,fl,Jd,m4,wQ=(m4=class extends gh{constructor(){super();Ge(this,Vc);Ge(this,fl);Ge(this,Jd);Ae(this,Jd,t=>{if(!yu&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){q(this,fl)||this.setEventListener(q(this,Jd))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,fl))==null||t.call(this),Ae(this,fl,void 0))}setEventListener(t){var r;Ae(this,Jd,t),(r=q(this,fl))==null||r.call(this),Ae(this,fl,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){q(this,Vc)!==t&&(Ae(this,Vc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof q(this,Vc)=="boolean"?q(this,Vc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Vc=new WeakMap,fl=new WeakMap,Jd=new WeakMap,m4),BE=new wQ,ef,hl,tf,p4,jQ=(p4=class extends gh{constructor(){super();Ge(this,ef,!0);Ge(this,hl);Ge(this,tf);Ae(this,tf,t=>{if(!yu&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){q(this,hl)||this.setEventListener(q(this,tf))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,hl))==null||t.call(this),Ae(this,hl,void 0))}setEventListener(t){var r;Ae(this,tf,t),(r=q(this,hl))==null||r.call(this),Ae(this,hl,t(this.setOnline.bind(this)))}setOnline(t){q(this,ef)!==t&&(Ae(this,ef,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return q(this,ef)}},ef=new WeakMap,hl=new WeakMap,tf=new WeakMap,p4),Sx=new jQ;function n1(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function _Q(e){return Math.min(1e3*2**e,3e4)}function y3(e){return(e??"online")==="online"?Sx.isOnline():!0}var x3=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Vj(e){return e instanceof x3}function b3(e){let t=!1,r=0,n=!1,a;const i=n1(),o=p=>{var v;n||(h(new x3(p)),(v=e.abort)==null||v.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>BE.isFocused()&&(e.networkMode==="always"||Sx.isOnline())&&e.canRun(),d=()=>y3(e.networkMode)&&e.canRun(),f=p=>{var v;n||(n=!0,(v=e.onSuccess)==null||v.call(e,p),a==null||a(),i.resolve(p))},h=p=>{var v;n||(n=!0,(v=e.onError)==null||v.call(e,p),a==null||a(),i.reject(p))},m=()=>new Promise(p=>{var v;a=x=>{(n||u())&&p(x)},(v=e.onPause)==null||v.call(e)}).then(()=>{var p;a=void 0,n||(p=e.onContinue)==null||p.call(e)}),g=()=>{if(n)return;let p;const v=r===0?e.initialPromise:void 0;try{p=v??e.fn()}catch(x){p=Promise.reject(x)}Promise.resolve(p).then(f).catch(x=>{var N;if(n)return;const b=e.retry??(yu?0:3),w=e.retryDelay??_Q,_=typeof w=="function"?w(r,x):w,j=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,x);if(t||!j){h(x);return}r++,(N=e.onFail)==null||N.call(e,r,x),yQ(_).then(()=>u()?void 0:m()).then(()=>{t?h(x):g()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():m().then(g),i)}}var NQ=e=>setTimeout(e,0);function SQ(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=NQ;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var an=SQ(),qc,g4,w3=(g4=class{constructor(){Ge(this,qc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),e1(this.gcTime)&&Ae(this,qc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(yu?1/0:5*60*1e3))}clearGcTimeout(){q(this,qc)&&(clearTimeout(q(this,qc)),Ae(this,qc,void 0))}},qc=new WeakMap,g4),rf,Wc,na,Hc,Mn,Cg,Kc,Ra,Xi,v4,CQ=(v4=class extends w3{constructor(t){super();Ge(this,Ra);Ge(this,rf);Ge(this,Wc);Ge(this,na);Ge(this,Hc);Ge(this,Mn);Ge(this,Cg);Ge(this,Kc);Ae(this,Kc,!1),Ae(this,Cg,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ae(this,Hc,t.client),Ae(this,na,q(this,Hc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ae(this,rf,EQ(this.options)),this.state=t.state??q(this,rf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=q(this,Mn))==null?void 0:t.promise}setOptions(t){this.options={...q(this,Cg),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,na).remove(this)}setData(t,r){const n=r1(this.state.data,t,this.options);return mt(this,Ra,Xi).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){mt(this,Ra,Xi).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=q(this,Mn))==null?void 0:n.promise;return(a=q(this,Mn))==null||a.cancel(t),r?r.then(Xn).catch(Xn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,rf))}isActive(){return this.observers.some(t=>sa(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===UE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Rl(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!m3(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=q(this,Mn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=q(this,Mn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),q(this,na).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(q(this,Mn)&&(q(this,Kc)?q(this,Mn).cancel({revert:!0}):q(this,Mn).cancelRetry()),this.scheduleGc()),q(this,na).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||mt(this,Ra,Xi).call(this,{type:"invalidate"})}fetch(t,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(q(this,Mn))return q(this,Mn).continueRetry(),q(this,Mn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Ae(this,Kc,!0),n.signal)})},i=()=>{const h=g3(this.options,r),g=(()=>{const p={client:q(this,Hc),queryKey:this.queryKey,meta:this.meta};return a(p),p})();return Ae(this,Kc,!1),this.options.persister?this.options.persister(h,g,this):h(g)},l=(()=>{const h={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:q(this,Hc),state:this.state,fetchFn:i};return a(h),h})();(u=this.options.behavior)==null||u.onFetch(l,this),Ae(this,Wc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&mt(this,Ra,Xi).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=h=>{var m,g,p,v;Vj(h)&&h.silent||mt(this,Ra,Xi).call(this,{type:"error",error:h}),Vj(h)||((g=(m=q(this,na).config).onError)==null||g.call(m,h,this),(v=(p=q(this,na).config).onSettled)==null||v.call(p,this.state.data,h,this)),this.scheduleGc()};return Ae(this,Mn,b3({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var m,g,p,v;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(x){c(x);return}(g=(m=q(this,na).config).onSuccess)==null||g.call(m,h,this),(v=(p=q(this,na).config).onSettled)==null||v.call(p,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,m)=>{mt(this,Ra,Xi).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{mt(this,Ra,Xi).call(this,{type:"pause"})},onContinue:()=>{mt(this,Ra,Xi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),q(this,Mn).start()}},rf=new WeakMap,Wc=new WeakMap,na=new WeakMap,Hc=new WeakMap,Mn=new WeakMap,Cg=new WeakMap,Kc=new WeakMap,Ra=new WeakSet,Xi=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...j3(n.data,this.options),fetchMeta:t.meta??null};case"success":return Ae(this,Wc,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Vj(a)&&a.revert&&q(this,Wc)?{...q(this,Wc),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),an.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),q(this,na).notify({query:this,type:"updated",action:t})})},v4);function j3(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:y3(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function EQ(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var fi,y4,kQ=(y4=class extends gh{constructor(t={}){super();Ge(this,fi);this.config=t,Ae(this,fi,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??FE(a,r);let o=this.get(i);return o||(o=new CQ({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){q(this,fi).has(t.queryHash)||(q(this,fi).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=q(this,fi).get(t.queryHash);r&&(t.destroy(),r===t&&q(this,fi).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){an.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return q(this,fi).get(t)}getAll(){return[...q(this,fi).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>XO(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>XO(t,n)):r}notify(t){an.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){an.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){an.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},fi=new WeakMap,y4),hi,Hn,Gc,mi,Ko,x4,PQ=(x4=class extends w3{constructor(t){super();Ge(this,mi);Ge(this,hi);Ge(this,Hn);Ge(this,Gc);this.mutationId=t.mutationId,Ae(this,Hn,t.mutationCache),Ae(this,hi,[]),this.state=t.state||_3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){q(this,hi).includes(t)||(q(this,hi).push(t),this.clearGcTimeout(),q(this,Hn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ae(this,hi,q(this,hi).filter(r=>r!==t)),this.scheduleGc(),q(this,Hn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){q(this,hi).length||(this.state.status==="pending"?this.scheduleGc():q(this,Hn).remove(this))}continue(){var t;return((t=q(this,Gc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,u,d,f,h,m,g,p,v,x,b,w,_,j,N,S,E;const r=()=>{mt(this,mi,Ko).call(this,{type:"continue"})};Ae(this,Gc,b3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,P)=>{mt(this,mi,Ko).call(this,{type:"failed",failureCount:C,error:P})},onPause:()=>{mt(this,mi,Ko).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,Hn).canRun(this)}));const n=this.state.status==="pending",a=!q(this,Gc).canStart();try{if(n)r();else{mt(this,mi,Ko).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=q(this,Hn).config).onMutate)==null?void 0:o.call(i,t,this));const P=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));P!==this.state.context&&mt(this,mi,Ko).call(this,{type:"pending",context:P,variables:t,isPaused:a})}const C=await q(this,Gc).start();return await((d=(u=q(this,Hn).config).onSuccess)==null?void 0:d.call(u,C,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,C,t,this.state.context)),await((g=(m=q(this,Hn).config).onSettled)==null?void 0:g.call(m,C,null,this.state.variables,this.state.context,this)),await((v=(p=this.options).onSettled)==null?void 0:v.call(p,C,null,t,this.state.context)),mt(this,mi,Ko).call(this,{type:"success",data:C}),C}catch(C){try{throw await((b=(x=q(this,Hn).config).onError)==null?void 0:b.call(x,C,t,this.state.context,this)),await((_=(w=this.options).onError)==null?void 0:_.call(w,C,t,this.state.context)),await((N=(j=q(this,Hn).config).onSettled)==null?void 0:N.call(j,void 0,C,this.state.variables,this.state.context,this)),await((E=(S=this.options).onSettled)==null?void 0:E.call(S,void 0,C,t,this.state.context)),C}finally{mt(this,mi,Ko).call(this,{type:"error",error:C})}}finally{q(this,Hn).runNext(this)}}},hi=new WeakMap,Hn=new WeakMap,Gc=new WeakMap,mi=new WeakSet,Ko=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),an.batch(()=>{q(this,hi).forEach(n=>{n.onMutationUpdate(t)}),q(this,Hn).notify({mutation:this,type:"updated",action:t})})},x4);function _3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var to,Ma,Eg,b4,AQ=(b4=class extends gh{constructor(t={}){super();Ge(this,to);Ge(this,Ma);Ge(this,Eg);this.config=t,Ae(this,to,new Set),Ae(this,Ma,new Map),Ae(this,Eg,0)}build(t,r,n){const a=new PQ({mutationCache:this,mutationId:++jv(this,Eg)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){q(this,to).add(t);const r=Wv(t);if(typeof r=="string"){const n=q(this,Ma).get(r);n?n.push(t):q(this,Ma).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(q(this,to).delete(t)){const r=Wv(t);if(typeof r=="string"){const n=q(this,Ma).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&q(this,Ma).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Wv(t);if(typeof r=="string"){const n=q(this,Ma).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Wv(t);if(typeof r=="string"){const a=(n=q(this,Ma).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){an.batch(()=>{q(this,to).forEach(t=>{this.notify({type:"removed",mutation:t})}),q(this,to).clear(),q(this,Ma).clear()})}getAll(){return Array.from(q(this,to))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>QO(r,n))}findAll(t={}){return this.getAll().filter(r=>QO(t,r))}notify(t){an.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return an.batch(()=>Promise.all(t.map(r=>r.continue().catch(Xn))))}},to=new WeakMap,Ma=new WeakMap,Eg=new WeakMap,b4);function Wv(e){var t;return(t=e.options.scope)==null?void 0:t.id}function e2(e){return{onFetch:(t,r)=>{var d,f,h,m,g;const n=t.options,a=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},x=g3(t.options,t.fetchOptions),b=async(w,_,j)=>{if(p)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const S=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:_,direction:j?"backward":"forward",meta:t.options.meta};return v(A),A})(),E=await x(S),{maxPages:C}=t.options,P=j?bQ:xQ;return{pages:P(w.pages,E,C),pageParams:P(w.pageParams,_,C)}};if(a&&i.length){const w=a==="backward",_=w?OQ:t2,j={pages:i,pageParams:o},N=_(n,j);l=await b(j,N,w)}else{const w=e??i.length;do{const _=c===0?o[0]??n.initialPageParam:t2(n,l);if(c>0&&_==null)break;l=await b(l,_),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var p,v;return(v=(p=t.options).persister)==null?void 0:v.call(p,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function t2(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function OQ(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Dr,ml,pl,nf,sf,gl,af,of,w4,TQ=(w4=class{constructor(e={}){Ge(this,Dr);Ge(this,ml);Ge(this,pl);Ge(this,nf);Ge(this,sf);Ge(this,gl);Ge(this,af);Ge(this,of);Ae(this,Dr,e.queryCache||new kQ),Ae(this,ml,e.mutationCache||new AQ),Ae(this,pl,e.defaultOptions||{}),Ae(this,nf,new Map),Ae(this,sf,new Map),Ae(this,gl,0)}mount(){jv(this,gl)._++,q(this,gl)===1&&(Ae(this,af,BE.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Dr).onFocus())})),Ae(this,of,Sx.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Dr).onOnline())})))}unmount(){var e,t;jv(this,gl)._--,q(this,gl)===0&&((e=q(this,af))==null||e.call(this),Ae(this,af,void 0),(t=q(this,of))==null||t.call(this),Ae(this,of,void 0))}isFetching(e){return q(this,Dr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return q(this,ml).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=q(this,Dr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=q(this,Dr).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Rl(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return q(this,Dr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=q(this,Dr).get(n.queryHash),i=a==null?void 0:a.state.data,o=vQ(t,i);if(o!==void 0)return q(this,Dr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return an.batch(()=>q(this,Dr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=q(this,Dr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=q(this,Dr);an.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=q(this,Dr);return an.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=an.batch(()=>q(this,Dr).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Xn).catch(Xn)}invalidateQueries(e,t={}){return an.batch(()=>(q(this,Dr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=an.batch(()=>q(this,Dr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Xn)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Xn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=q(this,Dr).build(this,t);return r.isStaleByTime(Rl(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Xn).catch(Xn)}fetchInfiniteQuery(e){return e.behavior=e2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Xn).catch(Xn)}ensureInfiniteQueryData(e){return e.behavior=e2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Sx.isOnline()?q(this,ml).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,Dr)}getMutationCache(){return q(this,ml)}getDefaultOptions(){return q(this,pl)}setDefaultOptions(e){Ae(this,pl,e)}setQueryDefaults(e,t){q(this,nf).set(xu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...q(this,nf).values()],r={};return t.forEach(n=>{Pp(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){q(this,sf).set(xu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...q(this,sf).values()],r={};return t.forEach(n=>{Pp(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...q(this,pl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=FE(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===UE&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...q(this,pl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){q(this,Dr).clear(),q(this,ml).clear()}},Dr=new WeakMap,ml=new WeakMap,pl=new WeakMap,nf=new WeakMap,sf=new WeakMap,gl=new WeakMap,af=new WeakMap,of=new WeakMap,w4),ds,Dt,kg,Kn,Yc,lf,vl,yl,Pg,cf,uf,Xc,Qc,xl,df,Qt,Pm,s1,a1,i1,o1,l1,c1,u1,N3,j4,DQ=(j4=class extends gh{constructor(t,r){super();Ge(this,Qt);Ge(this,ds);Ge(this,Dt);Ge(this,kg);Ge(this,Kn);Ge(this,Yc);Ge(this,lf);Ge(this,vl);Ge(this,yl);Ge(this,Pg);Ge(this,cf);Ge(this,uf);Ge(this,Xc);Ge(this,Qc);Ge(this,xl);Ge(this,df,new Set);this.options=r,Ae(this,ds,t),Ae(this,yl,null),Ae(this,vl,n1()),this.options.experimental_prefetchInRender||q(this,vl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(q(this,Dt).addObserver(this),r2(q(this,Dt),this.options)?mt(this,Qt,Pm).call(this):this.updateResult(),mt(this,Qt,o1).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return d1(q(this,Dt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return d1(q(this,Dt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,mt(this,Qt,l1).call(this),mt(this,Qt,c1).call(this),q(this,Dt).removeObserver(this)}setOptions(t){const r=this.options,n=q(this,Dt);if(this.options=q(this,ds).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof sa(this.options.enabled,q(this,Dt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");mt(this,Qt,u1).call(this),q(this,Dt).setOptions(this.options),r._defaulted&&!Nx(this.options,r)&&q(this,ds).getQueryCache().notify({type:"observerOptionsUpdated",query:q(this,Dt),observer:this});const a=this.hasListeners();a&&n2(q(this,Dt),n,this.options,r)&&mt(this,Qt,Pm).call(this),this.updateResult(),a&&(q(this,Dt)!==n||sa(this.options.enabled,q(this,Dt))!==sa(r.enabled,q(this,Dt))||Rl(this.options.staleTime,q(this,Dt))!==Rl(r.staleTime,q(this,Dt)))&&mt(this,Qt,s1).call(this);const i=mt(this,Qt,a1).call(this);a&&(q(this,Dt)!==n||sa(this.options.enabled,q(this,Dt))!==sa(r.enabled,q(this,Dt))||i!==q(this,xl))&&mt(this,Qt,i1).call(this,i)}getOptimisticResult(t){const r=q(this,ds).getQueryCache().build(q(this,ds),t),n=this.createResult(r,t);return MQ(this,n)&&(Ae(this,Kn,n),Ae(this,lf,this.options),Ae(this,Yc,q(this,Dt).state)),n}getCurrentResult(){return q(this,Kn)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),Reflect.get(n,a))})}trackProp(t){q(this,df).add(t)}getCurrentQuery(){return q(this,Dt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=q(this,ds).defaultQueryOptions(t),n=q(this,ds).getQueryCache().build(q(this,ds),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return mt(this,Qt,Pm).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),q(this,Kn)))}createResult(t,r){var C;const n=q(this,Dt),a=this.options,i=q(this,Kn),o=q(this,Yc),l=q(this,lf),u=t!==n?t.state:q(this,kg),{state:d}=t;let f={...d},h=!1,m;if(r._optimisticResults){const P=this.hasListeners(),A=!P&&r2(t,r),k=P&&n2(t,n,r,a);(A||k)&&(f={...f,...j3(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:p,status:v}=f;m=f.data;let x=!1;if(r.placeholderData!==void 0&&m===void 0&&v==="pending"){let P;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(P=i.data,x=!0):P=typeof r.placeholderData=="function"?r.placeholderData((C=q(this,uf))==null?void 0:C.state.data,q(this,uf)):r.placeholderData,P!==void 0&&(v="success",m=r1(i==null?void 0:i.data,P,r),h=!0)}if(r.select&&m!==void 0&&!x)if(i&&m===(o==null?void 0:o.data)&&r.select===q(this,Pg))m=q(this,cf);else try{Ae(this,Pg,r.select),m=r.select(m),m=r1(i==null?void 0:i.data,m,r),Ae(this,cf,m),Ae(this,yl,null)}catch(P){Ae(this,yl,P)}q(this,yl)&&(g=q(this,yl),m=q(this,cf),p=Date.now(),v="error");const b=f.fetchStatus==="fetching",w=v==="pending",_=v==="error",j=w&&b,N=m!==void 0,E={status:v,fetchStatus:f.fetchStatus,isPending:w,isSuccess:v==="success",isError:_,isInitialLoading:j,isLoading:j,data:m,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:p,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:_&&!N,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&N,isStale:zE(t,r),refetch:this.refetch,promise:q(this,vl),isEnabled:sa(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=D=>{E.status==="error"?D.reject(E.error):E.data!==void 0&&D.resolve(E.data)},A=()=>{const D=Ae(this,vl,E.promise=n1());P(D)},k=q(this,vl);switch(k.status){case"pending":t.queryHash===n.queryHash&&P(k);break;case"fulfilled":(E.status==="error"||E.data!==k.value)&&A();break;case"rejected":(E.status!=="error"||E.error!==k.reason)&&A();break}}return E}updateResult(){const t=q(this,Kn),r=this.createResult(q(this,Dt),this.options);if(Ae(this,Yc,q(this,Dt).state),Ae(this,lf,this.options),q(this,Yc).data!==void 0&&Ae(this,uf,q(this,Dt)),Nx(r,t))return;Ae(this,Kn,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!q(this,df).size)return!0;const o=new Set(i??q(this,df));return this.options.throwOnError&&o.add("error"),Object.keys(q(this,Kn)).some(l=>{const c=l;return q(this,Kn)[c]!==t[c]&&o.has(c)})};mt(this,Qt,N3).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&mt(this,Qt,o1).call(this)}},ds=new WeakMap,Dt=new WeakMap,kg=new WeakMap,Kn=new WeakMap,Yc=new WeakMap,lf=new WeakMap,vl=new WeakMap,yl=new WeakMap,Pg=new WeakMap,cf=new WeakMap,uf=new WeakMap,Xc=new WeakMap,Qc=new WeakMap,xl=new WeakMap,df=new WeakMap,Qt=new WeakSet,Pm=function(t){mt(this,Qt,u1).call(this);let r=q(this,Dt).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Xn)),r},s1=function(){mt(this,Qt,l1).call(this);const t=Rl(this.options.staleTime,q(this,Dt));if(yu||q(this,Kn).isStale||!e1(t))return;const n=m3(q(this,Kn).dataUpdatedAt,t)+1;Ae(this,Xc,setTimeout(()=>{q(this,Kn).isStale||this.updateResult()},n))},a1=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(q(this,Dt)):this.options.refetchInterval)??!1},i1=function(t){mt(this,Qt,c1).call(this),Ae(this,xl,t),!(yu||sa(this.options.enabled,q(this,Dt))===!1||!e1(q(this,xl))||q(this,xl)===0)&&Ae(this,Qc,setInterval(()=>{(this.options.refetchIntervalInBackground||BE.isFocused())&&mt(this,Qt,Pm).call(this)},q(this,xl)))},o1=function(){mt(this,Qt,s1).call(this),mt(this,Qt,i1).call(this,mt(this,Qt,a1).call(this))},l1=function(){q(this,Xc)&&(clearTimeout(q(this,Xc)),Ae(this,Xc,void 0))},c1=function(){q(this,Qc)&&(clearInterval(q(this,Qc)),Ae(this,Qc,void 0))},u1=function(){const t=q(this,ds).getQueryCache().build(q(this,ds),this.options);if(t===q(this,Dt))return;const r=q(this,Dt);Ae(this,Dt,t),Ae(this,kg,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},N3=function(t){an.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(q(this,Kn))}),q(this,ds).getQueryCache().notify({query:q(this,Dt),type:"observerResultsUpdated"})})},j4);function RQ(e,t){return sa(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function r2(e,t){return RQ(e,t)||e.state.data!==void 0&&d1(e,t,t.refetchOnMount)}function d1(e,t,r){if(sa(t.enabled,e)!==!1&&Rl(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&zE(e,t)}return!1}function n2(e,t,r,n){return(e!==t||sa(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&zE(e,r)}function zE(e,t){return sa(t.enabled,e)!==!1&&e.isStaleByTime(Rl(t.staleTime,e))}function MQ(e,t){return!Nx(e.getCurrentResult(),t)}var bl,wl,fs,ro,go,Iy,f1,_4,$Q=(_4=class extends gh{constructor(r,n){super();Ge(this,go);Ge(this,bl);Ge(this,wl);Ge(this,fs);Ge(this,ro);Ae(this,bl,r),this.setOptions(n),this.bindMethods(),mt(this,go,Iy).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=q(this,bl).defaultMutationOptions(r),Nx(this.options,n)||q(this,bl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:q(this,fs),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&xu(n.mutationKey)!==xu(this.options.mutationKey)?this.reset():((a=q(this,fs))==null?void 0:a.state.status)==="pending"&&q(this,fs).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=q(this,fs))==null||r.removeObserver(this)}onMutationUpdate(r){mt(this,go,Iy).call(this),mt(this,go,f1).call(this,r)}getCurrentResult(){return q(this,wl)}reset(){var r;(r=q(this,fs))==null||r.removeObserver(this),Ae(this,fs,void 0),mt(this,go,Iy).call(this),mt(this,go,f1).call(this)}mutate(r,n){var a;return Ae(this,ro,n),(a=q(this,fs))==null||a.removeObserver(this),Ae(this,fs,q(this,bl).getMutationCache().build(q(this,bl),this.options)),q(this,fs).addObserver(this),q(this,fs).execute(r)}},bl=new WeakMap,wl=new WeakMap,fs=new WeakMap,ro=new WeakMap,go=new WeakSet,Iy=function(){var n;const r=((n=q(this,fs))==null?void 0:n.state)??_3();Ae(this,wl,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},f1=function(r){an.batch(()=>{var n,a,i,o,l,c,u,d;if(q(this,ro)&&this.hasListeners()){const f=q(this,wl).variables,h=q(this,wl).context;(r==null?void 0:r.type)==="success"?((a=(n=q(this,ro)).onSuccess)==null||a.call(n,r.data,f,h),(o=(i=q(this,ro)).onSettled)==null||o.call(i,r.data,null,f,h)):(r==null?void 0:r.type)==="error"&&((c=(l=q(this,ro)).onError)==null||c.call(l,r.error,f,h),(d=(u=q(this,ro)).onSettled)==null||d.call(u,void 0,r.error,f,h))}this.listeners.forEach(f=>{f(q(this,wl))})})},_4),S3=y.createContext(void 0),ai=e=>{const t=y.useContext(S3);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},IQ=({client:e,children:t})=>(y.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(S3.Provider,{value:e,children:t})),C3=y.createContext(!1),LQ=()=>y.useContext(C3);C3.Provider;function FQ(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var UQ=y.createContext(FQ()),BQ=()=>y.useContext(UQ),zQ=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},VQ=e=>{y.useEffect(()=>{e.clearReset()},[e])},qQ=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||v3(r,[e.error,n])),WQ=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},HQ=(e,t)=>e.isLoading&&e.isFetching&&!t,KQ=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,s2=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function GQ(e,t,r){var f,h,m,g,p;const n=LQ(),a=BQ(),i=ai(),o=i.defaultQueryOptions(e);(h=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,o),o._optimisticResults=n?"isRestoring":"optimistic",WQ(o),zQ(o,a),VQ(a);const l=!i.getQueryCache().get(o.queryHash),[c]=y.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),d=!n&&e.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(v=>{const x=d?c.subscribe(an.batchCalls(v)):Xn;return c.updateResult(),x},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),y.useEffect(()=>{c.setOptions(o)},[o,c]),KQ(o,u))throw s2(o,c,a);if(qQ({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,u),o.experimental_prefetchInRender&&!yu&&HQ(u,n)){const v=l?s2(o,c,a):(p=i.getQueryCache().get(o.queryHash))==null?void 0:p.promise;v==null||v.catch(Xn).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function sr(e,t){return GQ(e,DQ)}function Ht(e,t){const r=ai(),[n]=y.useState(()=>new $Q(r,e));y.useEffect(()=>{n.setOptions(e)},[n,e]);const a=y.useSyncExternalStore(y.useCallback(o=>n.subscribe(an.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=y.useCallback((o,l)=>{n.mutate(o,l).catch(Xn)},[n]);if(a.error&&v3(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ap.apply(this,arguments)}var Nl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Nl||(Nl={}));const a2="popstate";function YQ(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return h1("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Cx(a)}return QQ(t,r,null,e)}function Yr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function E3(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function XQ(){return Math.random().toString(36).substr(2,8)}function i2(e,t){return{usr:e.state,key:e.key,idx:t}}function h1(e,t,r,n){return r===void 0&&(r=null),Ap({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?vh(t):t,{state:r,key:t&&t.key||n||XQ()})}function Cx(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function vh(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function QQ(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Nl.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Ap({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Nl.Pop;let v=d(),x=v==null?null:v-u;u=v,c&&c({action:l,location:p.location,delta:x})}function h(v,x){l=Nl.Push;let b=h1(p.location,v,x);u=d()+1;let w=i2(b,u),_=p.createHref(b);try{o.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(_)}i&&c&&c({action:l,location:p.location,delta:1})}function m(v,x){l=Nl.Replace;let b=h1(p.location,v,x);u=d();let w=i2(b,u),_=p.createHref(b);o.replaceState(w,"",_),i&&c&&c({action:l,location:p.location,delta:0})}function g(v){let x=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof v=="string"?v:Cx(v);return b=b.replace(/ $/,"%20"),Yr(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let p={get action(){return l},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(a2,f),c=v,()=>{a.removeEventListener(a2,f),c=null}},createHref(v){return t(a,v)},createURL:g,encodeLocation(v){let x=g(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(v){return o.go(v)}};return p}var o2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(o2||(o2={}));function ZQ(e,t,r){return r===void 0&&(r="/"),JQ(e,t,r,!1)}function JQ(e,t,r,n){let a=typeof t=="string"?vh(t):t,i=VE(a.pathname||"/",r);if(i==null)return null;let o=k3(e);eZ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=dZ(i);l=cZ(o[c],u,n)}return l}function k3(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Yr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Ml([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Yr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),k3(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:oZ(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of P3(i.path))a(i,o,c)}),t}function P3(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=P3(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function eZ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:lZ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const tZ=/^:[\w-]+$/,rZ=3,nZ=2,sZ=1,aZ=10,iZ=-2,l2=e=>e==="*";function oZ(e,t){let r=e.split("/"),n=r.length;return r.some(l2)&&(n+=iZ),t&&(n+=nZ),r.filter(a=>!l2(a)).reduce((a,i)=>a+(tZ.test(i)?rZ:i===""?sZ:aZ),n)}function lZ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function cZ(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=c2({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=c2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Ml([i,f.pathname]),pathnameBase:pZ(Ml([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Ml([i,f.pathnameBase]))}return o}function c2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=uZ(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let p=l[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=l[f];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function uZ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),E3(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function dZ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return E3(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function VE(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function fZ(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?vh(e):e;return{pathname:r?r.startsWith("/")?r:hZ(r,t):t,search:gZ(n),hash:vZ(a)}}function hZ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function qj(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mZ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function A3(e,t){let r=mZ(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function O3(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=vh(e):(a=Ap({},e),Yr(!a.pathname||!a.pathname.includes("?"),qj("?","pathname","search",a)),Yr(!a.pathname||!a.pathname.includes("#"),qj("#","pathname","hash",a)),Yr(!a.search||!a.search.includes("#"),qj("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=fZ(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Ml=e=>e.join("/").replace(/\/\/+/g,"/"),pZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function yZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const T3=["post","put","patch","delete"];new Set(T3);const xZ=["get",...T3];new Set(xZ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Op(){return Op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Op.apply(this,arguments)}const qE=y.createContext(null),bZ=y.createContext(null),Lu=y.createContext(null),k0=y.createContext(null),rc=y.createContext({outlet:null,matches:[],isDataRoute:!1}),D3=y.createContext(null);function wZ(e,t){let{relative:r}=t===void 0?{}:t;zg()||Yr(!1);let{basename:n,navigator:a}=y.useContext(Lu),{hash:i,pathname:o,search:l}=$3(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Ml([n,o])),a.createHref({pathname:c,search:l,hash:i})}function zg(){return y.useContext(k0)!=null}function Fu(){return zg()||Yr(!1),y.useContext(k0).location}function R3(e){y.useContext(Lu).static||y.useLayoutEffect(e)}function ii(){let{isDataRoute:e}=y.useContext(rc);return e?RZ():jZ()}function jZ(){zg()||Yr(!1);let e=y.useContext(qE),{basename:t,future:r,navigator:n}=y.useContext(Lu),{matches:a}=y.useContext(rc),{pathname:i}=Fu(),o=JSON.stringify(A3(a,r.v7_relativeSplatPath)),l=y.useRef(!1);return R3(()=>{l.current=!0}),y.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=O3(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ml([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function M3(){let{matches:e}=y.useContext(rc),t=e[e.length-1];return t?t.params:{}}function $3(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=y.useContext(Lu),{matches:a}=y.useContext(rc),{pathname:i}=Fu(),o=JSON.stringify(A3(a,n.v7_relativeSplatPath));return y.useMemo(()=>O3(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function _Z(e,t){return NZ(e,t)}function NZ(e,t,r,n){zg()||Yr(!1);let{navigator:a}=y.useContext(Lu),{matches:i}=y.useContext(rc),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Fu(),d;if(t){var f;let v=typeof t=="string"?vh(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||Yr(!1),d=v}else d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=ZQ(e,{pathname:m}),p=PZ(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Ml([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Ml([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n);return t&&p?y.createElement(k0.Provider,{value:{location:Op({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Nl.Pop}},p):p}function SZ(){let e=DZ(),t=yZ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:a},r):null,null)}const CZ=y.createElement(SZ,null);class EZ extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?y.createElement(rc.Provider,{value:this.props.routeContext},y.createElement(D3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kZ(e){let{routeContext:t,match:r,children:n}=e,a=y.useContext(qE);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(rc.Provider,{value:t},n)}function PZ(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Yr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,g=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,g=!1,p=null,v=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,p=f.route.errorElement||CZ,c&&(u<0&&h===0?(g=!0,v=null):u===h&&(g=!0,v=f.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),b=()=>{let w;return m?w=p:g?w=v:f.route.Component?w=y.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,y.createElement(kZ,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?y.createElement(EZ,{location:r.location,revalidation:r.revalidation,component:p,error:m,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var I3=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(I3||{}),Ex=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ex||{});function AZ(e){let t=y.useContext(qE);return t||Yr(!1),t}function OZ(e){let t=y.useContext(bZ);return t||Yr(!1),t}function TZ(e){let t=y.useContext(rc);return t||Yr(!1),t}function L3(e){let t=TZ(),r=t.matches[t.matches.length-1];return r.route.id||Yr(!1),r.route.id}function DZ(){var e;let t=y.useContext(D3),r=OZ(Ex.UseRouteError),n=L3(Ex.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function RZ(){let{router:e}=AZ(I3.UseNavigateStable),t=L3(Ex.UseNavigateStable),r=y.useRef(!1);return R3(()=>{r.current=!0}),y.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Op({fromRouteId:t},i)))},[e,t])}function MZ(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ct(e){Yr(!1)}function $Z(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Nl.Pop,navigator:i,static:o=!1,future:l}=e;zg()&&Yr(!1);let c=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:i,static:o,future:Op({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=vh(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:g="default"}=n,p=y.useMemo(()=>{let v=VE(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:m,key:g},navigationType:a}},[c,d,f,h,m,g,a]);return p==null?null:y.createElement(Lu.Provider,{value:u},y.createElement(k0.Provider,{children:r,value:p}))}function IZ(e){let{children:t,location:r}=e;return _Z(m1(t),r)}new Promise(()=>{});function m1(e,t){t===void 0&&(t=[]);let r=[];return y.Children.forEach(e,(n,a)=>{if(!y.isValidElement(n))return;let i=[...t,a];if(n.type===y.Fragment){r.push.apply(r,m1(n.props.children,i));return}n.type!==Ct&&Yr(!1),!n.props.index||!n.props.children||Yr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=m1(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p1(){return p1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p1.apply(this,arguments)}function LZ(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function FZ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function UZ(e,t){return e.button===0&&(!t||t==="_self")&&!FZ(e)}const BZ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zZ="6";try{window.__reactRouterVersion=zZ}catch{}const VZ="startTransition",u2=EC[VZ];function qZ(e){let{basename:t,children:r,future:n,window:a}=e,i=y.useRef();i.current==null&&(i.current=YQ({window:a,v5Compat:!0}));let o=i.current,[l,c]=y.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=y.useCallback(f=>{u&&u2?u2(()=>c(f)):c(f)},[c,u]);return y.useLayoutEffect(()=>o.listen(d),[o,d]),y.useEffect(()=>MZ(n),[n]),y.createElement($Z,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const WZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yn=y.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=LZ(t,BZ),{basename:m}=y.useContext(Lu),g,p=!1;if(typeof u=="string"&&HZ.test(u)&&(g=u,WZ))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=VE(_.pathname,m);_.origin===w.origin&&j!=null?u=j+_.search+_.hash:p=!0}catch{}let v=wZ(u,{relative:a}),x=KZ(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function b(w){n&&n(w),w.defaultPrevented||x(w)}return y.createElement("a",p1({},h,{href:g||v,onClick:p||i?n:b,ref:r,target:c}))});var d2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(d2||(d2={}));var f2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(f2||(f2={}));function KZ(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=ii(),u=Fu(),d=$3(e,{relative:o});return y.useCallback(f=>{if(UZ(f,r)){f.preventDefault();let h=n!==void 0?n:Cx(u)===Cx(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,a,r,e,i,o,l])}const Tp=uh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),I=y.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?LL:"button";return s.jsx(o,{className:ae(Tp({variant:t,size:r,className:e})),ref:i,...a})});I.displayName="Button";var GZ="Separator",h2="horizontal",YZ=["horizontal","vertical"],F3=y.forwardRef((e,t)=>{const{decorative:r,orientation:n=h2,...a}=e,i=XZ(n)?n:h2,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(Ee.div,{"data-orientation":i,...l,...a,ref:t})});F3.displayName=GZ;function XZ(e){return YZ.includes(e)}var U3=F3;const Et=y.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(U3,{ref:a,decorative:r,orientation:t,className:ae("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Et.displayName=U3.displayName;var gi=function(){return gi=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},gi.apply(this,arguments)};function yh(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function QZ(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function ZZ(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}const JZ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class WE extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class eJ extends WE{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class m2 extends WE{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class p2 extends WE{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var g1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(g1||(g1={}));class tJ{constructor(t,{headers:r={},customFetch:n,region:a=g1.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=JZ(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return QZ(this,arguments,void 0,function*(r,n={}){var a;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=n;let h={},{region:m}=n;m||(m=this.region);const g=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let p;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",p=u):typeof u=="string"?(h["Content-Type"]="text/plain",p=u):typeof FormData<"u"&&u instanceof FormData?p=u:(h["Content-Type"]="application/json",p=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?p=JSON.stringify(u):p=u;let v=d;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),d?(v=o.signal,d.addEventListener("abort",()=>o.abort())):v=o.signal);const x=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:p,signal:v}).catch(j=>{throw new eJ(j)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new m2(x);if(!x.ok)throw new p2(x);let w=((a=x.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield x.json():w==="application/octet-stream"||w==="application/pdf"?_=yield x.blob():w==="text/event-stream"?_=x:w==="multipart/form-data"?_=yield x.formData():_=yield x.text(),{data:_,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof p2||l instanceof m2?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var rJ=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},nJ=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var f,h;if(r.method!=="HEAD"){var m;const x=await i.text();x===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=x:l=JSON.parse(x))}const p=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),v=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");p&&v&&v.length>1&&(c=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var g;const p=await i.text();try{o=JSON.parse(p),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,d="OK")}catch{i.status===404&&p===""?(u=204,d="No Content"):o={message:p}}if(o&&r.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new rJ(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,d,f,h;const g=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",p=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"Error"}: ${g}`,p&&(l+=` (${p})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var m;l=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},sJ=class extends nJ{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const g2=new RegExp("[,()]");var md=class extends sJ{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&g2.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&g2.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},aJ=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new md({method:a,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new md({method:a,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),a||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);l.searchParams.set("columns",d.join(","))}}return new md({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:a,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new md({method:n,url:a,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new md({method:r,url:n,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},iJ=class B3{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new aJ(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new B3(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),f=n&&Object.values(r).some(d);f?(l="POST",u=r):n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,g])=>g!==void 0).map(([m,g])=>[m,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([m,g])=>{c.searchParams.append(m,g)})):(l="POST",u=r);const h=new Headers(this.headers);return f?h.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&h.set("Prefer",`count=${i}`),new md({method:l,url:c,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class oJ{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const lJ="2.93.1",cJ=`realtime-js/${lJ}`,uJ="1.0.0",z3="2.0.0",v2=z3,v1=1e4,dJ=1e3,fJ=100;var Qo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Qo||(Qo={}));var tn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(tn||(tn={}));var Ia;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ia||(Ia={}));var y1;(function(e){e.websocket="websocket"})(y1||(y1={}));var kc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(kc||(kc={}));class hJ{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+f.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let g=new DataView(m),p=0;g.setUint8(p++,this.KINDS.userBroadcastPush),g.setUint8(p++,c.length),g.setUint8(p++,l.length),g.setUint8(p++,o.length),g.setUint8(p++,u.length),g.setUint8(p++,f.length),g.setUint8(p++,r),Array.from(c,x=>g.setUint8(p++,x.charCodeAt(0))),Array.from(l,x=>g.setUint8(p++,x.charCodeAt(0))),Array.from(o,x=>g.setUint8(p++,x.charCodeAt(0))),Array.from(u,x=>g.setUint8(p++,x.charCodeAt(0))),Array.from(f,x=>g.setUint8(p++,x.charCodeAt(0)));var v=new Uint8Array(m.byteLength+n.byteLength);return v.set(new Uint8Array(m),0),v.set(new Uint8Array(n),m.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,o,l,c]=n;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+o));c=c+o;const h=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,g={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class V3{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var cr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(cr||(cr={}));const y2=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=mJ(o,e,t,a),i),{}):{}},mJ=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?q3(i,o):x1(o)},q3=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return yJ(t,r)}switch(e){case cr.bool:return pJ(t);case cr.float4:case cr.float8:case cr.int2:case cr.int4:case cr.int8:case cr.numeric:case cr.oid:return gJ(t);case cr.json:case cr.jsonb:return vJ(t);case cr.timestamp:return xJ(t);case cr.abstime:case cr.date:case cr.daterange:case cr.int4range:case cr.int8range:case cr.money:case cr.reltime:case cr.text:case cr.time:case cr.timestamptz:case cr.timetz:case cr.tsrange:case cr.tstzrange:return x1(t);default:return x1(t)}},x1=e=>e,pJ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},gJ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},vJ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},yJ=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>q3(t,l))}return e},xJ=e=>typeof e=="string"?e.replace(" ","T"):e,W3=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Wj{constructor(t,r,n={},a=v1){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var x2;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(x2||(x2={}));class Hm{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hm.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Hm.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Hm.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(v=>v.presence_ref),m=f.map(v=>v.presence_ref),g=d.filter(v=>m.indexOf(v.presence_ref)<0),p=f.filter(v=>h.indexOf(v.presence_ref)<0);g.length>0&&(l[u]=g),p.length>0&&(c[u]=p)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var b2;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(b2||(b2={}));var Km;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Km||(Km={}));var Zi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zi||(Zi={}));class Td{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Wj(this,Ia.join,this.params,this.timeout),this.rejoinTimer=new V3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ia.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Hm(this),this.broadcastEndpointURL=W3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==tn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Km.PRESENCE]&&this.bindings[Km.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Zi.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Zi.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(Zi.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,v=(g=p==null?void 0:p.length)!==null&&g!==void 0?g:0,x=[];for(let b=0;b<v;b++){const w=p[b],{filter:{event:_,schema:j,table:N,filter:S}}=w,E=m&&m[b];if(E&&E.event===_&&Td.isFilterValueEqual(E.schema,j)&&Td.isFilterValueEqual(E.table,N)&&Td.isFilterValueEqual(E.filter,S))x.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=tn.errored,t==null||t(Zi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Zi.SUBSCRIBED);return}}).receive("error",m=>{this.state=tn.errored,t==null||t(Zi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Zi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===tn.joined&&t===Km.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=tn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ia.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Wj(this,Ia.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Wj(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>fJ){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ia;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,p,v;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(p=m.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var g,p,v,x,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((p=r.ids)===null||p===void 0?void 0:p.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(b=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:p,table:v,commit_timestamp:x,type:b,errors:w}=g;h=Object.assign(Object.assign({},{schema:p,table:v,commit_timestamp:x,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===tn.closed}_isJoined(){return this.state===tn.joined}_isJoining(){return this.state===tn.joining}_isLeaving(){return this.state===tn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Td.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ia.close,{},t)}_onError(t){this._on(Ia.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=y2(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=y2(t.columns,t.old_record)),r}}const Hj=()=>{},Hv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bJ=[1e3,2e3,5e3,1e4],wJ=1e4,jJ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _J{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=v1,this.transport=null,this.heartbeatIntervalMs=Hv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hj,this.ref=0,this.reconnectTimer=null,this.vsn=v2,this.logger=Hj,this.conn=null,this.sendBuffer=[],this.serializer=new hJ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${y1.websocket}`,this.httpEndpoint=W3(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=oJ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Qo.connecting:return kc.Connecting;case Qo.open:return kc.Open;case Qo.closing:return kc.Closing;default:return kc.Closed}}isConnected(){return this.connectionState()===kc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Td(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(dJ,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Hv.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Qo.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Qo.open||this.conn.readyState===Qo.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ia.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([jJ],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:cJ};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Ia.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new V3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Hv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,u,d,f,h,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:v1,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Hv.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Hj,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:v2,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>bJ[g-1]||wJ,this.vsn){case uJ:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,p)=>p(JSON.stringify(g)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(g,p)=>p(JSON.parse(g));break;case z3:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Dp=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function NJ(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function SJ(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function CJ(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:o}){const l=NJ(e.baseUrl,n,a),c=await SJ(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),h=f&&d?JSON.parse(d):d;if(!u.ok){const m=f?h:void 0,g=m==null?void 0:m.error;throw new Dp((g==null?void 0:g.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:m})}return{status:u.status,headers:u.headers,data:h}}}}function Kv(e){return e.join("")}var EJ=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Kv(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Kv(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kv(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Kv(e.namespace)}`}),!0}catch(t){if(t instanceof Dp&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Dp&&r.status===409)return;throw r}}};function Ju(e){return e.join("")}var kJ=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ju(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ju(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ju(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ju(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ju(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ju(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Dp&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Dp&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},PJ=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=CJ({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new EJ(this.client,t),this.tableOps=new kJ(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},P0=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function A0(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Gv=class extends P0{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},H3=class extends P0{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const AJ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),OJ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},b1=e=>{if(Array.isArray(e))return e.map(r=>b1(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=b1(n)}),t},TJ=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Rp(e){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function DJ(e,t){if(Rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RJ(e){var t=DJ(e,"string");return Rp(t)=="symbol"?t:t+""}function MJ(e,t,r){return(t=RJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(r),!0).forEach(function(n){MJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const j2=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},$J=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e,i=a.status||500;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";t(new Gv(j2(o),i,l,n))}).catch(()=>{if(n==="vectors"){const o=i+"";t(new Gv(a.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";t(new Gv(a.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";t(new Gv(a.statusText||`HTTP ${i} error`,i,o,n))}}else t(new H3(j2(e),e,n))},IJ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?et(et({},a),r):(OJ(n)?(a.headers=et({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),et(et({},a),r))};async function nm(e,t,r,n,a,i,o){return new Promise((l,c)=>{e(r,IJ(t,n,a,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(o==="vectors"){const d=u.headers.get("content-type");if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>$J(u,c,n,o))})}function LJ(e="storage"){return{get:async(t,r,n,a)=>nm(t,"GET",r,n,a,void 0,e),post:async(t,r,n,a,i)=>nm(t,"POST",r,a,i,n,e),put:async(t,r,n,a,i)=>nm(t,"PUT",r,a,i,n,e),head:async(t,r,n,a)=>nm(t,"HEAD",r,et(et({},n),{},{noResolveJson:!0}),a,void 0,e),remove:async(t,r,n,a,i)=>nm(t,"DELETE",r,a,i,n,e)}}const FJ=LJ("storage"),{get:Mp,post:Nr,put:w1,head:UJ,remove:HE}=FJ;var xh=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=AJ(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(A0(r))return{data:null,error:r};throw r}}},BJ=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(A0(t))return{data:null,error:t};throw t}}};let K3;K3=Symbol.toStringTag;var zJ=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[K3]="BlobDownloadBuilder",this.promise=null}asStream(){return new BJ(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(A0(t))return{data:null,error:t};throw t}}};const VJ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var qJ=class extends xh{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var a=this;return a.handleOperation(async()=>{let i;const o=et(et({},_2),n);let l=et(et({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=et(et({},l),n.headers));const u=a._removeEmptyFolders(t),d=a._getFinalPath(u),f=await(e=="PUT"?w1:Nr)(a.fetch,`${a.url}/object/${d}`,i,et({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:f.Id,fullPath:f.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),a.handleOperation(async()=>{let c;const u=et({upsert:_2.upsert},n),d=et(et({},a.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:i,fullPath:(await w1(a.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const a=et({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await Nr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new P0("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await Nr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await Nr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let a=n._getFinalPath(e),i=await Nr(n.fetch,`${n.url}/object/sign/${a}`,et({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const a=await Nr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a.map(o=>et(et({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Mp(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new zJ(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>b1(await Mp(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await UJ(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(A0(n)&&n instanceof H3){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await HE(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const a=et(et(et({},VJ),t),{},{prefix:e||""});return await Nr(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=et({},e);return await Nr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const WJ="2.93.1",Vg={"X-Client-Info":`storage-js/${WJ}`};var HJ=class extends xh{constructor(e,t={},r,n){const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const i=a.href.replace(/\/$/,""),o=et(et({},Vg),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Mp(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Mp(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await Nr(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await w1(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await HE(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},KJ=class extends xh{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=et(et({},Vg),t);super(n,a,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await Mp(t.fetch,a,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await HE(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!TJ(e))throw new P0("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new PJ({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},GJ=class extends xh{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=et(et({},Vg),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Nr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Nr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},YJ=class extends xh{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=et(et({},Vg),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},XJ=class extends xh{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=et(et({},Vg),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Nr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},QJ=class extends XJ{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new ZJ(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},ZJ=class extends GJ{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new JJ(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},JJ=class extends YJ{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},eee=class extends HJ{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new qJ(this.url,this.headers,e,this.fetch)}get vectors(){return new QJ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new KJ(this.url+"/iceberg",this.headers,this.fetch)}};const G3="2.93.1",pd=30*1e3,j1=3,Kj=j1*pd,tee="http://localhost:9999",ree="supabase.auth.token",nee={"X-Client-Info":`gotrue-js/${G3}`},_1="X-Supabase-Api-Version",Y3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},see=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,aee=10*60*1e3;class $p extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Be(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class iee extends $p{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function oee(e){return Be(e)&&e.name==="AuthApiError"}class Pc extends $p{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class To extends $p{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Ts extends To{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Gj(e){return Be(e)&&e.name==="AuthSessionMissingError"}class ed extends To{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yv extends To{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Xv extends To{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lee(e){return Be(e)&&e.name==="AuthImplicitGrantRedirectError"}class N2 extends To{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cee extends To{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class N1 extends To{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Yj(e){return Be(e)&&e.name==="AuthRetryableFetchError"}class S2 extends To{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class S1 extends To{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const kx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),C2=` 	
\r=`.split(""),uee=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<C2.length;t+=1)e[C2[t].charCodeAt(0)]=-2;for(let t=0;t<kx.length;t+=1)e[kx[t].charCodeAt(0)]=t;return e})();function E2(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(kx[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(kx[n]),t.queuedBits-=6}}function X3(e,t,r){const n=uee[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function k2(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{hee(o,n,r)};for(let o=0;o<e.length;o+=1)X3(e.charCodeAt(o),a,i);return t.join("")}function dee(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function fee(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}dee(n,t)}}function hee(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Hd(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)X3(e.charCodeAt(a),r,n);return new Uint8Array(t)}function mee(e){const t=[];return fee(e,r=>t.push(r)),new Uint8Array(t)}function $c(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>E2(a,r,n)),E2(null,r,n),t.join("")}function pee(e){return Math.round(Date.now()/1e3)+e}function gee(){return Symbol("auth-callback")}const Nn=()=>typeof window<"u"&&typeof document<"u",gc={tested:!1,writable:!1},Q3=()=>{if(!Nn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gc.tested)return gc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),gc.tested=!0,gc.writable=!0}catch{gc.tested=!0,gc.writable=!1}return gc.writable};function vee(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const Z3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),yee=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",gd=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},vc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},_n=async(e,t)=>{await e.removeItem(t)};class O0{constructor(){this.promise=new O0.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}O0.promiseConstructor=Promise;function Qv(e){const t=e.split(".");if(t.length!==3)throw new S1("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!see.test(t[n]))throw new S1("JWT not in base64url format");return{header:JSON.parse(k2(t[0])),payload:JSON.parse(k2(t[1])),signature:Hd(t[2]),raw:{header:t[0],payload:t[1]}}}async function xee(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function bee(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function wee(e){return("0"+e.toString(16)).substr(-2)}function jee(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,wee).join("")}async function _ee(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Nee(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await _ee(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function td(e,t,r=!1){const n=jee();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await gd(e,`${t}-code-verifier`,a);const i=await Nee(n);return[i,n===i?"plain":"s256"]}const See=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Cee(e){const t=e.headers.get(_1);if(!t||!t.match(See))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Eee(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function kee(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Pee=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function rd(e){if(!Pee.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xj(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Aee(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function P2(e){return JSON.parse(JSON.stringify(e))}const _c=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Oee=[502,503,504];async function A2(e){var t;if(!yee(e))throw new N1(_c(e),0);if(Oee.includes(e.status))throw new N1(_c(e),e.status);let r;try{r=await e.json()}catch(i){throw new Pc(_c(i),i)}let n;const a=Cee(e);if(a&&a.getTime()>=Y3["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new S2(_c(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ts}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new S2(_c(r),e.status,r.weak_password.reasons);throw new iee(_c(r),e.status||500,n)}const Tee=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Ze(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[_1]||(i[_1]=Y3["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Dee(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Dee(e,t,r,n,a,i){const o=Tee(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new N1(_c(c),0)}if(l.ok||await A2(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await A2(c)}}function Oa(e){var t;let r=null;$ee(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=pee(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function O2(e){const t=Oa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function nl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Ree(e){return{data:e,error:null}}function Mee(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=yh(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function T2(e){return e}function $ee(e){return e.access_token&&e.refresh_token&&e.expires_in}const Qj=["global","local","others"];class Iee{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Z3(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Qj[0]){if(Qj.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qj.join(", ")}`);try{return await Ze(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:nl})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=yh(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Mee,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Be(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ze(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:nl})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:T2});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Be(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){rd(t);try{return await Ze(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:nl})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){rd(t);try{return await Ze(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:nl})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){rd(t);try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:nl})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){rd(t.userId);try{const{data:r,error:n}=await Ze(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _deleteFactor(t){rd(t.userId),rd(t.id);try{return{data:await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ze(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:T2});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Be(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ze(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ze(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Ze(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ze(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Be(r))return{data:null,error:r};throw r}}}function D2(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const nd={debug:!!(globalThis&&Q3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class J3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Lee extends J3{}async function Fee(e,t,r){nd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),nd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){nd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{nd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw nd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Lee(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(nd.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Uee(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function e5(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Bee(e){return parseInt(e,16)}function zee(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Vee(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=e5(e.address),g=d?`${d}://${n}`:n,p=e.statement?`${e.statement}
`:"",v=`${g} wants you to sign in with your Ethereum account:
${m}

${p}`;let x=`URI: ${f}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(x+=`
Expiration Time: ${a.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}x+=b}return`${v}
${x}`}class Kr extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Px extends Kr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function qee({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Kr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Kr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Kr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Kr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Kr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Kr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Kr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Kr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(t5(o)){if(i.rp.id!==o)return new Kr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Kr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Kr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Kr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Kr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Wee({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Kr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Kr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(t5(n)){if(r.rpId!==n)return new Kr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Kr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Kr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Kr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Hee{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Kee=new Hee;function Gee(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=yh(e,["challenge","user","excludeCredentials"]),i=Hd(t).buffer,o=Object.assign(Object.assign({},r),{id:Hd(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Hd(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Yee(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=yh(e,["challenge","allowCredentials"]),a=Hd(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Hd(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Xee(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:$c(new Uint8Array(e.response.attestationObject)),clientDataJSON:$c(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Qee(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:$c(new Uint8Array(a.authenticatorData)),clientDataJSON:$c(new Uint8Array(a.clientDataJSON)),signature:$c(new Uint8Array(a.signature)),userHandle:a.userHandle?$c(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function t5(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function R2(){var e,t;return!!(Nn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Zee(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Px("Browser returned unexpected credential type",t)}:{data:null,error:new Px("Empty credential response",t)}}catch(t){return{data:null,error:qee({error:t,options:e})}}}async function Jee(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Px("Browser returned unexpected credential type",t)}:{data:null,error:new Px("Empty credential response",t)}}catch(t){return{data:null,error:Wee({error:t,options:e})}}}const ete={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},tte={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ax(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Ax(l,o):n[i]=Ax(o)}else n[i]=o}return n}function rte(e,t){return Ax(ete,e,t||{})}function nte(e,t){return Ax(tte,e,t||{})}class ste{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??Kee.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=rte(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await Zee({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=nte(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await Jee(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(o){return Be(o)?{data:null,error:o}:{data:null,error:new Pc("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new $p("rpId is required for WebAuthn authentication")};try{if(!R2())return{data:null,error:new Pc("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return Be(o)?{data:null,error:o}:{data:null,error:new Pc("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new $p("rpId is required for WebAuthn registration")};try{if(!R2())return{data:null,error:new Pc("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Be(o)?{data:null,error:o}:{data:null,error:new Pc("Unexpected error in register",o)}}}}Uee();const ate={url:tee,storageKey:ree,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nee,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function M2(e,t,r){return await r()}const sd={};class Ip{get jwks(){var t,r;return(r=(t=sd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){sd[this.storageKey]=Object.assign(Object.assign({},sd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=sd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){sd[this.storageKey]=Object.assign(Object.assign({},sd[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},ate),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Ip.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ip.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Nn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Iee({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Z3(i.fetch),this.lock=i.lock||M2,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Nn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Fee:this.lock=M2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ste(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Q3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=D2(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=D2(this.memoryStorage)),Nn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${G3}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Nn()&&(r=vee(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Nn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),lee(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Be(r)?this._returnResult({error:r}):this._returnResult({error:new Pc("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Oa}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(Be(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await td(this.storage,this.storageKey)),i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:Oa})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Oa})}else throw new Yv("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await _n(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Be(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:O2})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:O2})}else throw new Yv("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new ed;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,c,u,d,f,h;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:p,wallet:v,statement:x,options:b}=t;let w;if(Nn())if(typeof v=="object")w=v;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")w=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=e5(j[0]);let S=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const C=await w.request({method:"eth_chainId"});S=Bee(C)}const E={domain:_.host,address:N,statement:x,uri:_.href,version:"1",chainId:S,nonce:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=Vee(E),g=await w.request({method:"personal_sign",params:[zee(m),N]})}try{const{data:p,error:v}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Oa});if(v)throw v;if(!p||!p.session||!p.user){const x=new ed;return this._returnResult({data:{user:null,session:null},error:x})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:v})}catch(p){if(Be(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(t){var r,n,a,i,o,l,c,u,d,f,h,m;let g,p;if("message"in t)g=t.message,p=t.signature;else{const{chain:v,wallet:x,statement:b,options:w}=t;let _;if(Nn())if(typeof x=="object")_=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),p=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=N}}try{const{data:v,error:x}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:$c(p)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Oa});if(x)throw x;if(!v||!v.session||!v.user){const b=new ed;return this._returnResult({data:{user:null,session:null},error:b})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(Be(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await vc(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new cee;const{data:i,error:o}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Oa});if(await _n(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new ed;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Be(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Oa}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new ed;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(Be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await td(this.storage,this.storageKey));const{error:f}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Yv("You must provide either an email or phone number.")}catch(l){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Oa});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(Be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await td(this.storage,this.storageKey));const u=await Ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:Ree});return!((i=u.data)===null||i===void 0)&&i.url&&Nn()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Be(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ts;const{error:a}=await Ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Ze(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await Ze(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Yv("You must provide either an email or phone number and a type")}catch(r){if(Be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await vc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Kj:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await vc(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Xj()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=Aee(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:nl}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ts}:await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:nl})})}catch(r){if(Be(r))return Gj(r)&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Ts;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await td(this.storage,this.storageKey));const{data:u,error:d}=await Ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:nl});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Be(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ts;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Qv(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Be(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ts;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Nn())throw new Xv("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Xv(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new N2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xv("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new N2("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Xv("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=pd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:p,error:v}=await this._getUser(i);if(v)throw v;const x={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(n){if(Be(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await vc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i&&!Gj(i))return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(oee(l)&&(l.status===404||l.status===401||l.status===403)||Gj(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=gee(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await td(this.storage,this.storageKey,!0));try{return await Ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Be(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Be(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ze(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Nn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Be(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,f=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Oa}),{data:h,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new ed}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(a){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Ze(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Be(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await bee(async a=>(a>0&&await xee(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Oa})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Yj(i)&&Date.now()+o-n<pd})}catch(n){if(this._debug(r,"error",n),Be(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Nn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await vc(this.storage,this.storageKey);if(a&&this.userStorage){let o=await vc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await gd(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Xj()}else if(a&&!a.user&&!a.user){const o=await vc(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await _n(this.storage,this.storageKey+"-user"),await gd(this.storage,this.storageKey,a)):a.user=Xj()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Kj;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Kj}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Yj(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ts;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new O0;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ts;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Be(i)){const o={data:null,error:i};return Yj(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await _n(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await gd(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=P2(a);await gd(this.storage,this.storageKey,i)}else{const a=P2(r);await gd(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _n(this.storage,this.storageKey),await _n(this.storage,this.storageKey+"-code-verifier"),await _n(this.storage,this.storageKey+"-user"),this.userStorage&&await _n(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Nn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),pd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/pd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${pd}ms, refresh threshold is ${j1} ticks`),a<=j1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof J3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await td(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Ze(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Be(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Ze(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Be(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Xee(t.webauthn.credential_response):Qee(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Ze(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(Be(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Ze(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Gee(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Yee(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Be(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,a,i;if(t)try{const{payload:m}=Qv(t);let g=null;m.aal&&(g=m.aal);let p=g;const{data:{user:v},error:x}=await this.getUser(t);if(x)return this._returnResult({data:null,error:x});((n=(r=v==null?void 0:v.factors)===null||r===void 0?void 0:r.filter(_=>_.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(p="aal2");const w=m.amr||[];return{data:{currentLevel:g,nextLevel:p,currentAuthenticationMethods:w},error:null}}catch(m){if(Be(m))return this._returnResult({data:null,error:m});throw m}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Qv(o.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((i=(a=o.user.factors)===null||a===void 0?void 0:a.filter(m=>m.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const h=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Ze(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ts})})}catch(r){if(Be(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ts});const o=await Ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Nn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Be(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ts});const o=await Ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Nn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Be(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Ze(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ts})})}catch(t){if(Be(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await Ze(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ts})})}catch(r){if(Be(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+aee>a)return n;const{data:i,error:o}=await Ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Qv(n);r!=null&&r.allowExpired||Eee(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=kee(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,mee(`${l}.${c}`)))throw new S1("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(Be(n))return this._returnResult({data:null,error:n});throw n}}}Ip.nextInstanceID={};const ite=Ip,ote="2.93.1";let Am="";typeof Deno<"u"?Am="deno":typeof document<"u"?Am="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Am="react-native":Am="node";function lte(){const e=globalThis.process;if(e&&e.platform){const t=e.platform;if(t==="darwin")return"macOS";if(t==="win32")return"Windows";if(t==="linux")return"Linux";if(t==="android")return"Android"}if(typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platform){const t=navigator.userAgentData.platform;if(t==="macOS")return"macOS";if(t==="Windows")return"Windows";if(t==="Linux")return"Linux";if(t==="Android")return"Android";if(t==="iOS")return"iOS"}return null}function cte(){const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node&&typeof window>"u")try{const r=globalThis.require;if(r)return r("os").release()}catch{return null}}if(typeof Deno<"u"&&Deno.osRelease)try{return Deno.osRelease()}catch{return null}return typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}function ute(){if(typeof Deno<"u")return"deno";if(typeof Bun<"u")return"bun";const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return"node"}return null}function dte(){if(typeof Deno<"u"&&Deno.version)return Deno.version.deno;if(typeof Bun<"u"&&Bun.version)return Bun.version;const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return t.node}return null}function fte(){const e={"X-Client-Info":`supabase-js-${Am}/${ote}`},t=lte();t&&(e["X-Supabase-Client-Platform"]=t);const r=cte();r&&(e["X-Supabase-Client-Platform-Version"]=r);const n=ute();n&&(e["X-Supabase-Client-Runtime"]=n);const a=dte();return a&&(e["X-Supabase-Client-Runtime-Version"]=a),e}const hte=fte(),mte={headers:hte},pte={schema:"public"},gte={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vte={};function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}function yte(e,t){if(Lp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xte(e){var t=yte(e,"string");return Lp(t)=="symbol"?t:t+""}function bte(e,t,r){return(t=xte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$2(Object(r),!0).forEach(function(n){bte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const wte=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),jte=()=>Headers,_te=(e,t,r)=>{const n=wte(r),a=jte();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Rr(Rr({},o),{},{headers:u}))}};function Nte(e){return e.endsWith("/")?e:e+"/"}function Ste(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Rr(Rr({},c),a),auth:Rr(Rr({},u),i),realtime:Rr(Rr({},d),o),storage:{},global:Rr(Rr(Rr({},f),l),{},{headers:Rr(Rr({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function Cte(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Nte(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Ete=class extends ite{constructor(e){super(e)}},kte=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=Cte(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:pte,realtime:vte,auth:Rr(Rr({},gte),{},{storageKey:o}),global:mte},c=Ste(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=_te(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Rr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new iJ(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new eee(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new tJ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ete({url:this.authUrl.href,headers:Rr(Rr({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new _J(this.realtimeUrl.href,Rr(Rr({},e),{},{params:Rr(Rr({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Pte=(e,t,r)=>new kte(e,t,r);function Ate(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Ate()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ote="https://zrqhgzmsbesstxticbbk.supabase.co",Tte="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpycWhnem1zYmVzc3R4dGljYmJrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk0ODE5MDMsImV4cCI6MjA4NTA1NzkwM30.p1QAaYye6ZF3xXRrlK_f_j4LK1g9NN1AvYEQlrWlEiM",$=Pte(Ote,Tte,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});function r5(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),a=async()=>{const{data:u,error:d}=await $.from("sidebar_settings").select("*").order("display_order");if(d){console.error("Failed to load sidebar settings:",d);return}t(u||[])};return y.useEffect(()=>{(async()=>{n(!0),await a(),n(!1)})()},[]),{settings:e,loading:r,updateVisibility:async(u,d)=>{const{error:f}=await $.from("sidebar_settings").update({is_visible:d}).eq("module_key",u);return f?(J({title:"Error",description:"Failed to update sidebar visibility. You may not have admin permissions.",variant:"destructive"}),!1):(t(h=>h.map(m=>m.module_key===u?{...m,is_visible:d}:m)),J({title:"Success",description:`${u} visibility updated`}),!0)},updateOrder:async(u,d)=>{const{error:f}=await $.from("sidebar_settings").update({display_order:d}).eq("module_key",u);return f?(J({title:"Error",description:"Failed to update display order",variant:"destructive"}),!1):(await a(),!0)},isModuleVisible:u=>{const d=e.find(f=>f.module_key===u);return(d==null?void 0:d.is_visible)??!0},getVisibleModules:()=>e.filter(u=>u.is_visible).sort((u,d)=>u.display_order-d.display_order).map(u=>u.module_key),refetch:a}}class Dte{async getCurrentUser(){const{data:{user:t}}=await $.auth.getUser();if(!t)return null;const{data:r}=await $.from("profiles").select("display_name").eq("user_id",t.id).maybeSingle();return{id:t.id,email:t.email,name:(r==null?void 0:r.display_name)||t.email}}async log(t){try{const r=await this.getCurrentUser(),n={action:t.action,entity_type:t.entityType,entity_id:t.entityId,organisation_id:t.organisationId||null,user_id:(r==null?void 0:r.id)||null,user_email:(r==null?void 0:r.email)||null,user_name:(r==null?void 0:r.name)||null,old_values:t.beforeState?JSON.parse(JSON.stringify(t.beforeState)):null,new_values:t.afterState?JSON.parse(JSON.stringify(t.afterState)):null},{error:a}=await $.from("audit_logs").insert(n);return a?(console.error("[AuditService] Failed to write audit log:",a),!1):!0}catch(r){return console.error("[AuditService] Unexpected error writing audit log:",r),!1}}async logEmployeeAction(t,r,n,a,i){return this.log({action:`employee.${t}`,entityType:"employee",entityId:r,organisationId:n,beforeState:a,afterState:i})}async logCertificationAction(t,r,n,a,i){return this.log({action:`certification.${t}`,entityType:"certification",entityId:r,organisationId:n,beforeState:a,afterState:i})}async logTimesheetAction(t,r,n,a,i){return this.log({action:`timesheet.${t}`,entityType:"timesheet",entityId:r,organisationId:n,beforeState:a,afterState:i})}async logLeaveAction(t,r,n,a,i){return this.log({action:`leave.${t}`,entityType:"leave_request",entityId:r,organisationId:n,beforeState:a,afterState:i})}}const _r=new Dte,Zv="hrms_employees";function xa(e,t){const r=ai(),[n,a]=y.useState("idle"),i=!e&&!(t!=null&&t.skipFallback),{data:o}=sr({queryKey:["default-organisation"],queryFn:async()=>{const{data:_,error:j}=await $.from("organisations").select("id").limit(1).maybeSingle();if(j)throw j;return _},enabled:i}),l=e||(o==null?void 0:o.id),{data:c=[],isLoading:u,error:d,refetch:f}=sr({queryKey:["employees",l],queryFn:async()=>{if(!l)return[];const{data:_,error:j}=await $.from("employees").select("*").eq("organisation_id",l).order("last_name",{ascending:!0});if(j)throw console.error("[useSupabaseEmployees] Failed to fetch employees:",j),j;return _||[]},enabled:!!l}),{data:h=[]}=sr({queryKey:["employee-certifications",l],queryFn:async()=>{if(!l)return[];const{data:_,error:j}=await $.from("employee_certifications").select("*").eq("organisation_id",l).order("expiry_date",{ascending:!0});if(j)throw console.error("[useSupabaseEmployees] Failed to fetch certifications:",j),j;return _||[]},enabled:!!l}),m=Ht({mutationFn:async _=>{const j=_.organisation_id||l;if(!j)throw new Error("No organisation ID available for employee creation.");const N={..._,organisation_id:j},{data:S,error:E}=await $.from("employees").insert(N).select().single();if(E)throw E;return S},onSuccess:async _=>{r.invalidateQueries({queryKey:["employees",l]}),await _r.logEmployeeAction("create",_.id,l,void 0,_),J({title:"Employee Added",description:`${_.first_name} ${_.last_name} has been added to the system.`})},onError:_=>{console.error("[useSupabaseEmployees] Create failed:",_),J({title:"Error",description:"Failed to add employee. Please try again.",variant:"destructive"})}}),g=Ht({mutationFn:async({id:_,updates:j})=>{const{data:N}=await $.from("employees").select("*").eq("id",_).single(),{data:S,error:E}=await $.from("employees").update(j).eq("id",_).select().single();if(E)throw E;return{employee:S,beforeState:N}},onSuccess:async({employee:_,beforeState:j})=>{r.invalidateQueries({queryKey:["employees",l]}),await _r.logEmployeeAction("update",_.id,l,j,_),J({title:"Employee Updated",description:`${_.first_name} ${_.last_name}'s profile has been updated.`})},onError:_=>{console.error("[useSupabaseEmployees] Update failed:",_),J({title:"Error",description:"Failed to update employee. Please try again.",variant:"destructive"})}}),p=Ht({mutationFn:async({id:_,status:j})=>{const{data:N}=await $.from("employees").select("*").eq("id",_).single(),{data:S,error:E}=await $.from("employees").update({status:j}).eq("id",_).select().single();if(E)throw E;return{employee:S,beforeState:N}},onSuccess:async({employee:_,beforeState:j})=>{r.invalidateQueries({queryKey:["employees",l]}),await _r.logEmployeeAction("status_change",_.id,l,{status:j==null?void 0:j.status},{status:_.status});const N=_.status==="inactive"?"deactivated":"reactivated";J({title:`Employee ${N.charAt(0).toUpperCase()+N.slice(1)}`,description:`${_.first_name} ${_.last_name} has been ${N}.`})},onError:_=>{console.error("[useSupabaseEmployees] Status change failed:",_),J({title:"Error",description:"Failed to change employee status. Please try again.",variant:"destructive"})}}),v=Ht({mutationFn:async _=>{const{data:j,error:N}=await $.from("employee_certifications").insert(_).select().single();if(N)throw N;return j},onSuccess:async _=>{r.invalidateQueries({queryKey:["employee-certifications",l]}),await _r.logCertificationAction("create",_.id,l,void 0,_),J({title:"Certification Added",description:`${_.name} has been added.`})},onError:_=>{console.error("[useSupabaseEmployees] Add certification failed:",_),J({title:"Error",description:"Failed to add certification. Please try again.",variant:"destructive"})}}),x=y.useCallback(async()=>{if(l)try{const _=localStorage.getItem(Zv);if(!_){a("complete");return}const j=JSON.parse(_);if(!Array.isArray(j)||j.length===0){a("complete"),localStorage.removeItem(Zv);return}const{count:N}=await $.from("employees").select("*",{count:"exact",head:!0}).eq("organisation_id",l);if(N&&N>0){localStorage.removeItem(Zv),a("complete"),console.log("[Migration] Employees already in database, clearing localStorage");return}a("migrating"),console.log(`[Migration] Migrating ${j.length} employees from localStorage`);const S=j.map(C=>{var P,A,k;return{organisation_id:l,first_name:C.firstName||"Unknown",last_name:C.lastName||"Unknown",email:C.email||`unknown-${Date.now()}@temp.local`,phone:C.phone||null,avatar_url:C.avatar||null,employment_type:C.employmentType||"casual",position:C.position||null,department:C.department||null,start_date:C.startDate||null,status:C.status||"active",compliance_status:C.complianceStatus||"pending",pay_rate:C.payRate||null,award_classification_id:null,emergency_contact_name:((P=C.emergencyContact)==null?void 0:P.name)||null,emergency_contact_phone:((A=C.emergencyContact)==null?void 0:A.phone)||null,emergency_contact_relationship:((k=C.emergencyContact)==null?void 0:k.relationship)||null}}),{error:E}=await $.from("employees").insert(S);if(E){console.error("[Migration] Failed to migrate employees:",E),a("error");return}localStorage.removeItem(Zv),a("complete"),f(),J({title:"Data Migration Complete",description:`${j.length} employees have been migrated to the database.`}),console.log("[Migration] Successfully migrated employees to Supabase")}catch(_){console.error("[Migration] Unexpected error:",_),a("error")}},[l,f]);y.useEffect(()=>{l&&n==="idle"&&x()},[l,n,x]);const b=y.useCallback(_=>h.filter(j=>j.employee_id===_),[h]),w=c.filter(_=>_.status==="active");return{employees:c,activeEmployees:w,certifications:h,getCertificationsForEmployee:b,organisationId:l,isLoading:u,error:d,migrationStatus:n,createEmployee:m.mutateAsync,updateEmployee:(_,j)=>g.mutateAsync({id:_,updates:j}),changeStatus:(_,j)=>p.mutateAsync({id:_,status:j}),addCertification:v.mutateAsync,refetch:f,isCreating:m.isPending,isUpdating:g.isPending,isChangingStatus:p.isPending}}const Rte=[{label:"Dashboard",icon:xF,href:"/",moduleKey:"dashboard"},{label:"Employees",icon:Ar,href:"/employees",moduleKey:"employees"},{label:"Compliance",icon:bf,href:"/compliance",moduleKey:"compliance",badge:3},{label:"Recruitment",icon:gu,href:"/recruitment",moduleKey:"recruitment"},{label:"Documents",icon:gt,href:"/documents",moduleKey:"documents"},{label:"Contracts",icon:aG,href:"/contracts",moduleKey:"contracts"},{label:"Performance",icon:Ks,href:"/performance",moduleKey:"performance"},{label:"HR Cases",icon:or,href:"/hr-cases",moduleKey:"hr-cases"},{label:"LMS Admin",icon:jE,href:"/lms",moduleKey:"lms"},{label:"Payroll",icon:Ad,href:"/payroll",moduleKey:"payroll"},{label:"Payroll Export",icon:xf,href:"/payroll-export",moduleKey:"payroll-export"},{label:"Audit & Exports",icon:xf,href:"/audit-exports",moduleKey:"audit-exports"},{label:"Reports",icon:_E,href:"/reports",moduleKey:"reports"}],Mte=[{label:"My Portal",icon:xF,href:"/portal",moduleKey:"portal"},{label:"My Documents",icon:vF,href:"/portal/documents",moduleKey:"portal-documents"},{label:"My Training",icon:_p,href:"/portal/training",moduleKey:"portal-training"},{label:"My Reviews",icon:Ha,href:"/portal/reviews",moduleKey:"portal-reviews"},{label:"My Goals",icon:Ks,href:"/portal/goals",moduleKey:"portal-goals"},{label:"My Profile",icon:Bn,href:"/portal/profile",moduleKey:"portal-profile"}],$te=[{label:"Settings",icon:Lg,href:"/settings",moduleKey:"settings"},{label:"Help",icon:jp,href:"/help",moduleKey:"help"}];function I2(){const[e,t]=y.useState(!1),r=Fu(),{settings:n,loading:a,isModuleVisible:i}=r5(),{employees:o}=xa(),l=y.useMemo(()=>o.length===0?0:o.filter(h=>h.status!=="inactive"&&h.compliance_status==="pending").length,[o]),d=[...y.useMemo(()=>Rte.map(h=>h.moduleKey==="compliance"?{...h,badge:l>0?l:void 0}:h),[l]).filter(h=>a||n.length===0?!0:i(h.moduleKey))].sort((h,m)=>{const g=n.find(v=>v.module_key===h.moduleKey),p=n.find(v=>v.module_key===m.moduleKey);return((g==null?void 0:g.display_order)??99)-((p==null?void 0:p.display_order)??99)}),f=({item:h})=>{const m=r.pathname===h.href,g=h.icon,p=s.jsxs(yn,{to:h.href,className:ae("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group relative",m?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:text-sidebar-foreground hover:bg-sidebar-accent/50"),children:[s.jsx(g,{className:ae("h-5 w-5 flex-shrink-0",m&&"text-sidebar-primary")}),!e&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-medium text-sm",children:h.label}),h.badge&&s.jsx("span",{className:"ml-auto bg-accent text-accent-foreground text-xs font-semibold px-2 py-0.5 rounded-full",children:h.badge})]}),e&&h.badge&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-accent-foreground text-xs font-semibold w-5 h-5 flex items-center justify-center rounded-full",children:h.badge})]});return e?s.jsxs(f3,{delayDuration:0,children:[s.jsx(h3,{asChild:!0,children:p}),s.jsxs(LE,{side:"right",className:"font-medium",children:[h.label,h.badge&&s.jsxs("span",{className:"ml-2 text-accent",children:["(",h.badge,")"]})]})]}):p};return s.jsxs("aside",{className:ae("fixed left-0 top-0 z-40 h-screen bg-sidebar flex flex-col transition-all duration-300",e?"w-16":"w-64"),children:[s.jsxs("div",{className:ae("flex items-center h-16 px-4 border-b border-sidebar-border",e?"justify-center":"gap-3"),children:[s.jsx("div",{className:"w-8 h-8 rounded-lg gradient-hero flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"S+"})}),!e&&s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-semibold text-sidebar-foreground text-sm",children:"Social Plus"}),s.jsx("span",{className:"text-xs text-sidebar-foreground/60",children:"Support Work"})]})]}),s.jsxs("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:[d.map(h=>s.jsx(f,{item:h},h.href)),!e&&s.jsx("div",{className:"pt-4 pb-2",children:s.jsx("span",{className:"px-3 text-xs font-semibold text-sidebar-foreground/50 uppercase tracking-wider",children:"Self-Service"})}),e&&s.jsx(Et,{className:"my-2"}),Mte.map(h=>s.jsx(f,{item:h},h.href))]}),s.jsx("div",{className:"px-3 py-4 border-t border-sidebar-border space-y-1",children:$te.map(h=>s.jsx(f,{item:h},h.href))}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>t(!e),className:"absolute -right-3 top-20 h-6 w-6 rounded-full border border-sidebar-border bg-sidebar text-sidebar-foreground hover:bg-sidebar-accent",children:e?s.jsx(Oo,{className:"h-3 w-3"}):s.jsx(SE,{className:"h-3 w-3"})})]})}const ne=y.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:ae("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));ne.displayName="Input";var n5={exports:{}},s5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f=y;function Ite(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lte=typeof Object.is=="function"?Object.is:Ite,Fte=_f.useState,Ute=_f.useEffect,Bte=_f.useLayoutEffect,zte=_f.useDebugValue;function Vte(e,t){var r=t(),n=Fte({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return Bte(function(){a.value=r,a.getSnapshot=t,Zj(a)&&i({inst:a})},[e,r,t]),Ute(function(){return Zj(a)&&i({inst:a}),e(function(){Zj(a)&&i({inst:a})})},[e]),zte(r),r}function Zj(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Lte(e,r)}catch{return!0}}function qte(e,t){return t()}var Wte=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qte:Vte;s5.useSyncExternalStore=_f.useSyncExternalStore!==void 0?_f.useSyncExternalStore:Wte;n5.exports=s5;var Hte=n5.exports;function Kte(){return Hte.useSyncExternalStore(Gte,()=>!0,()=>!1)}function Gte(){return()=>{}}var KE="Avatar",[Yte,WFe]=Qr(KE),[Xte,a5]=Yte(KE),i5=y.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,i]=y.useState("idle");return s.jsx(Xte,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(Ee.span,{...n,ref:t})})});i5.displayName=KE;var o5="AvatarImage",l5=y.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=a5(o5,r),l=Qte(n,i),c=Lr(u=>{a(u),o.onImageLoadingStatusChange(u)});return Vr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Ee.img,{...i,ref:t,src:n}):null});l5.displayName=o5;var c5="AvatarFallback",u5=y.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=a5(c5,r),[o,l]=y.useState(n===void 0);return y.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(Ee.span,{...a,ref:t}):null});u5.displayName=c5;function L2(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Qte(e,{referrerPolicy:t,crossOrigin:r}){const n=Kte(),a=y.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=y.useState(()=>L2(i,e));return Vr(()=>{l(L2(i,e))},[i,e]),Vr(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,t]),o}var d5=i5,f5=l5,h5=u5;const Or=y.forwardRef(({className:e,...t},r)=>s.jsx(d5,{ref:r,className:ae("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Or.displayName=d5.displayName;const qg=y.forwardRef(({className:e,...t},r)=>s.jsx(f5,{ref:r,className:ae("aspect-square h-full w-full",e),...t}));qg.displayName=f5.displayName;const Tr=y.forwardRef(({className:e,...t},r)=>s.jsx(h5,{ref:r,className:ae("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Tr.displayName=h5.displayName;var Zte=y.createContext(void 0);function Uu(e){const t=y.useContext(Zte);return e||t||"ltr"}var Jj=0;function T0(){y.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??F2()),document.body.insertAdjacentElement("beforeend",e[1]??F2()),Jj++,()=>{Jj===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Jj--}},[])}function F2(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var e_="focusScope.autoFocusOnMount",t_="focusScope.autoFocusOnUnmount",U2={bubbles:!1,cancelable:!0},Jte="FocusScope",Wg=y.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=y.useState(null),u=Lr(a),d=Lr(i),f=y.useRef(null),h=Ke(t,p=>c(p)),m=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(n){let p=function(w){if(m.paused||!l)return;const _=w.target;l.contains(_)?f.current=_:Go(f.current,{select:!0})},v=function(w){if(m.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||Go(f.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&Go(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const b=new MutationObserver(x);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),b.disconnect()}}},[n,l,m.paused]),y.useEffect(()=>{if(l){z2.add(m);const p=document.activeElement;if(!l.contains(p)){const x=new CustomEvent(e_,U2);l.addEventListener(e_,u),l.dispatchEvent(x),x.defaultPrevented||(ere(are(m5(l)),{select:!0}),document.activeElement===p&&Go(l))}return()=>{l.removeEventListener(e_,u),setTimeout(()=>{const x=new CustomEvent(t_,U2);l.addEventListener(t_,d),l.dispatchEvent(x),x.defaultPrevented||Go(p??document.body,{select:!0}),l.removeEventListener(t_,d),z2.remove(m)},0)}}},[l,u,d,m]);const g=y.useCallback(p=>{if(!r&&!n||m.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(v&&x){const b=p.currentTarget,[w,_]=tre(b);w&&_?!p.shiftKey&&x===_?(p.preventDefault(),r&&Go(w,{select:!0})):p.shiftKey&&x===w&&(p.preventDefault(),r&&Go(_,{select:!0})):x===b&&p.preventDefault()}},[r,n,m.paused]);return s.jsx(Ee.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});Wg.displayName=Jte;function ere(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Go(n,{select:t}),document.activeElement!==r)return}function tre(e){const t=m5(e),r=B2(t,e),n=B2(t.reverse(),e);return[r,n]}function m5(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function B2(e,t){for(const r of e)if(!rre(r,{upTo:t}))return r}function rre(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function nre(e){return e instanceof HTMLInputElement&&"select"in e}function Go(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&nre(e)&&t&&e.select()}}var z2=sre();function sre(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=V2(e,t),e.unshift(t)},remove(t){var r;e=V2(e,t),(r=e[0])==null||r.resume()}}}function V2(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function are(e){return e.filter(t=>t.tagName!=="A")}var r_="rovingFocusGroup.onEntryFocus",ire={bubbles:!1,cancelable:!0},Hg="RovingFocusGroup",[C1,p5,ore]=Mg(Hg),[lre,bh]=Qr(Hg,[ore]),[cre,ure]=lre(Hg),g5=y.forwardRef((e,t)=>s.jsx(C1.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(C1.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(dre,{...e,ref:t})})}));g5.displayName=Hg;var dre=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=y.useRef(null),m=Ke(t,h),g=Uu(i),[p,v]=Hs({prop:o,defaultProp:l??null,onChange:c,caller:Hg}),[x,b]=y.useState(!1),w=Lr(u),_=p5(r),j=y.useRef(!1),[N,S]=y.useState(0);return y.useEffect(()=>{const E=h.current;if(E)return E.addEventListener(r_,w),()=>E.removeEventListener(r_,w)},[w]),s.jsx(cre,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:p,onItemFocus:y.useCallback(E=>v(E),[v]),onItemShiftTab:y.useCallback(()=>b(!0),[]),onFocusableItemAdd:y.useCallback(()=>S(E=>E+1),[]),onFocusableItemRemove:y.useCallback(()=>S(E=>E-1),[]),children:s.jsx(Ee.div,{tabIndex:x||N===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:pe(e.onMouseDown,()=>{j.current=!0}),onFocus:pe(e.onFocus,E=>{const C=!j.current;if(E.target===E.currentTarget&&C&&!x){const P=new CustomEvent(r_,ire);if(E.currentTarget.dispatchEvent(P),!P.defaultPrevented){const A=_().filter(B=>B.focusable),k=A.find(B=>B.active),D=A.find(B=>B.id===p),U=[k,D,...A].filter(Boolean).map(B=>B.ref.current);x5(U,d)}}j.current=!1}),onBlur:pe(e.onBlur,()=>b(!1))})})}),v5="RovingFocusGroupItem",y5=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=ha(),u=i||c,d=ure(v5,r),f=d.currentTabStopId===u,h=p5(r),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:p}=d;return y.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),s.jsx(C1.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(Ee.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:pe(e.onMouseDown,v=>{n?d.onItemFocus(u):v.preventDefault()}),onFocus:pe(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:pe(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=mre(v,d.orientation,d.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=h().filter(_=>_.focusable).map(_=>_.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const _=w.indexOf(v.currentTarget);w=d.loop?pre(w,_+1):w.slice(_+1)}setTimeout(()=>x5(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:p!=null}):o})})});y5.displayName=v5;var fre={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hre(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function mre(e,t,r){const n=hre(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return fre[n]}function x5(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function pre(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var GE=g5,YE=y5,gre=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ad=new WeakMap,Jv=new WeakMap,ey={},n_=0,b5=function(e){return e&&(e.host||b5(e.parentNode))},vre=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=b5(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},yre=function(e,t,r,n){var a=vre(t,Array.isArray(e)?e:[e]);ey[r]||(ey[r]=new WeakMap);var i=ey[r],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var m=h.getAttribute(n),g=m!==null&&m!=="false",p=(ad.get(h)||0)+1,v=(i.get(h)||0)+1;ad.set(h,p),i.set(h,v),o.push(h),p===1&&g&&Jv.set(h,!0),v===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return d(t),l.clear(),n_++,function(){o.forEach(function(f){var h=ad.get(f)-1,m=i.get(f)-1;ad.set(f,h),i.set(f,m),h||(Jv.has(f)||f.removeAttribute(n),Jv.delete(f)),m||f.removeAttribute(r)}),n_--,n_||(ad=new WeakMap,ad=new WeakMap,Jv=new WeakMap,ey={})}},D0=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=gre(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),yre(n,a,r,"aria-hidden")):function(){return null}},Ly="right-scroll-bar-position",Fy="width-before-scroll-bar",xre="with-scroll-bars-hidden",bre="--removed-body-scroll-bar-size";function s_(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function wre(e,t){var r=y.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var jre=typeof window<"u"?y.useLayoutEffect:y.useEffect,q2=new WeakMap;function _re(e,t){var r=wre(null,function(n){return e.forEach(function(a){return s_(a,n)})});return jre(function(){var n=q2.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||s_(l,null)}),i.forEach(function(l){a.has(l)||s_(l,o)})}q2.set(r,e)},[e]),r}function Nre(e){return e}function Sre(e,t){t===void 0&&(t=Nre);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function Cre(e){e===void 0&&(e={});var t=Sre(null);return t.options=gi({async:!0,ssr:!1},e),t}var w5=function(e){var t=e.sideCar,r=yh(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return y.createElement(n,gi({},r))};w5.isSideCarExport=!0;function Ere(e,t){return e.useMedium(t),w5}var j5=Cre(),a_=function(){},R0=y.forwardRef(function(e,t){var r=y.useRef(null),n=y.useState({onScrollCapture:a_,onWheelCapture:a_,onTouchMoveCapture:a_}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,p=e.inert,v=e.allowPinchZoom,x=e.as,b=x===void 0?"div":x,w=e.gapMode,_=yh(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,N=_re([r,t]),S=gi(gi({},_),a);return y.createElement(y.Fragment,null,d&&y.createElement(j,{sideCar:j5,removeScrollBar:u,shards:f,noRelative:m,noIsolation:g,inert:p,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:w}),o?y.cloneElement(y.Children.only(l),gi(gi({},S),{ref:N})):y.createElement(b,gi({},S,{className:c,ref:N}),l))});R0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};R0.classNames={fullWidth:Fy,zeroRight:Ly};var kre=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Pre(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=kre();return t&&e.setAttribute("nonce",t),e}function Are(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ore(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Tre=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Pre())&&(Are(t,r),Ore(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Dre=function(){var e=Tre();return function(t,r){y.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},_5=function(){var e=Dre(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},Rre={left:0,top:0,right:0,gap:0},i_=function(e){return parseInt(e||"",10)||0},Mre=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[i_(r),i_(n),i_(a)]},$re=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Rre;var t=Mre(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Ire=_5(),Kd="data-scroll-locked",Lre=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(xre,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Kd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ly,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Fy,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ly," .").concat(Ly,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Fy," .").concat(Fy,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Kd,`] {
    `).concat(bre,": ").concat(l,`px;
  }
`)},W2=function(){var e=parseInt(document.body.getAttribute(Kd)||"0",10);return isFinite(e)?e:0},Fre=function(){y.useEffect(function(){return document.body.setAttribute(Kd,(W2()+1).toString()),function(){var e=W2()-1;e<=0?document.body.removeAttribute(Kd):document.body.setAttribute(Kd,e.toString())}},[])},Ure=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;Fre();var i=y.useMemo(function(){return $re(a)},[a]);return y.createElement(Ire,{styles:Lre(i,!t,a,r?"":"!important")})},E1=!1;if(typeof window<"u")try{var ty=Object.defineProperty({},"passive",{get:function(){return E1=!0,!0}});window.addEventListener("test",ty,ty),window.removeEventListener("test",ty,ty)}catch{E1=!1}var id=E1?{passive:!1}:!1,Bre=function(e){return e.tagName==="TEXTAREA"},N5=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Bre(e)&&r[t]==="visible")},zre=function(e){return N5(e,"overflowY")},Vre=function(e){return N5(e,"overflowX")},H2=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=S5(e,n);if(a){var i=C5(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},qre=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Wre=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},S5=function(e,t){return e==="v"?zre(t):Vre(t)},C5=function(e,t){return e==="v"?qre(t):Wre(t)},Hre=function(e,t){return e==="h"&&t==="rtl"?-1:1},Kre=function(e,t,r,n,a){var i=Hre(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{if(!l)break;var m=C5(e,l),g=m[0],p=m[1],v=m[2],x=p-v-i*g;(g||x)&&S5(e,l)&&(f+=x,h+=g);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!a)||!d&&(Math.abs(h)<1||!a))&&(u=!0),u},ry=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},K2=function(e){return[e.deltaX,e.deltaY]},G2=function(e){return e&&"current"in e?e.current:e},Gre=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Yre=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Xre=0,od=[];function Qre(e){var t=y.useRef([]),r=y.useRef([0,0]),n=y.useRef(),a=y.useState(Xre++)[0],i=y.useState(_5)[0],o=y.useRef(e);y.useEffect(function(){o.current=e},[e]),y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var p=ZZ([e.lockRef.current],(e.shards||[]).map(G2),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=y.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var x=ry(p),b=r.current,w="deltaX"in p?p.deltaX:b[0]-x[0],_="deltaY"in p?p.deltaY:b[1]-x[1],j,N=p.target,S=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in p&&S==="h"&&N.type==="range")return!1;var E=H2(S,N);if(!E)return!0;if(E?j=S:(j=S==="v"?"h":"v",E=H2(S,N)),!E)return!1;if(!n.current&&"changedTouches"in p&&(w||_)&&(n.current=j),!j)return!0;var C=n.current||j;return Kre(C,v,p,C==="h"?w:_,!0)},[]),c=y.useCallback(function(p){var v=p;if(!(!od.length||od[od.length-1]!==i)){var x="deltaY"in v?K2(v):ry(v),b=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&Gre(j.delta,x)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(G2).filter(Boolean).filter(function(j){return j.contains(v.target)}),_=w.length>0?l(v,w[0]):!o.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),u=y.useCallback(function(p,v,x,b){var w={name:p,delta:v,target:x,should:b,shadowParent:Zre(x)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(_){return _!==w})},1)},[]),d=y.useCallback(function(p){r.current=ry(p),n.current=void 0},[]),f=y.useCallback(function(p){u(p.type,K2(p),p.target,l(p,e.lockRef.current))},[]),h=y.useCallback(function(p){u(p.type,ry(p),p.target,l(p,e.lockRef.current))},[]);y.useEffect(function(){return od.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,id),document.addEventListener("touchmove",c,id),document.addEventListener("touchstart",d,id),function(){od=od.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,id),document.removeEventListener("touchmove",c,id),document.removeEventListener("touchstart",d,id)}},[]);var m=e.removeScrollBar,g=e.inert;return y.createElement(y.Fragment,null,g?y.createElement(i,{styles:Yre(a)}):null,m?y.createElement(Ure,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Zre(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Jre=Ere(j5,Qre);var Kg=y.forwardRef(function(e,t){return y.createElement(R0,gi({},e,{ref:t,sideCar:Jre}))});Kg.classNames=R0.classNames;var k1=["Enter"," "],ene=["ArrowDown","PageUp","Home"],E5=["ArrowUp","PageDown","End"],tne=[...ene,...E5],rne={ltr:[...k1,"ArrowRight"],rtl:[...k1,"ArrowLeft"]},nne={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Gg="Menu",[Fp,sne,ane]=Mg(Gg),[Bu,k5]=Qr(Gg,[ane,tc,bh]),M0=tc(),P5=bh(),[ine,zu]=Bu(Gg),[one,Yg]=Bu(Gg),A5=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=M0(t),[c,u]=y.useState(null),d=y.useRef(!1),f=Lr(i),h=Uu(a);return y.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),s.jsx(j0,{...l,children:s.jsx(ine,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:s.jsx(one,{scope:t,onClose:y.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:n})})})};A5.displayName=Gg;var lne="MenuAnchor",XE=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=M0(r);return s.jsx(Bg,{...a,...n,ref:t})});XE.displayName=lne;var QE="MenuPortal",[cne,O5]=Bu(QE,{forceMount:void 0}),T5=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=zu(QE,t);return s.jsx(cne,{scope:t,forceMount:r,children:s.jsx(dn,{present:r||i.open,children:s.jsx(ch,{asChild:!0,container:a,children:n})})})};T5.displayName=QE;var ma="MenuContent",[une,ZE]=Bu(ma),D5=y.forwardRef((e,t)=>{const r=O5(ma,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=zu(ma,e.__scopeMenu),o=Yg(ma,e.__scopeMenu);return s.jsx(Fp.Provider,{scope:e.__scopeMenu,children:s.jsx(dn,{present:n||i.open,children:s.jsx(Fp.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(dne,{...a,ref:t}):s.jsx(fne,{...a,ref:t})})})})}),dne=y.forwardRef((e,t)=>{const r=zu(ma,e.__scopeMenu),n=y.useRef(null),a=Ke(t,n);return y.useEffect(()=>{const i=n.current;if(i)return D0(i)},[]),s.jsx(JE,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:pe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),fne=y.forwardRef((e,t)=>{const r=zu(ma,e.__scopeMenu);return s.jsx(JE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),hne=Wl("MenuContent.ScrollLock"),JE=y.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...p}=e,v=zu(ma,r),x=Yg(ma,r),b=M0(r),w=P5(r),_=sne(r),[j,N]=y.useState(null),S=y.useRef(null),E=Ke(t,S,v.onContentChange),C=y.useRef(0),P=y.useRef(""),A=y.useRef(0),k=y.useRef(null),D=y.useRef("right"),R=y.useRef(0),U=g?Kg:y.Fragment,B=g?{as:hne,allowPinchZoom:!0}:void 0,L=T=>{var ce,Pe;const F=P.current+T,Z=_().filter(ie=>!ie.disabled),W=document.activeElement,K=(ce=Z.find(ie=>ie.ref.current===W))==null?void 0:ce.textValue,V=Z.map(ie=>ie.textValue),le=Sne(V,F,K),be=(Pe=Z.find(ie=>ie.textValue===le))==null?void 0:Pe.ref.current;(function ie(me){P.current=me,window.clearTimeout(C.current),me!==""&&(C.current=window.setTimeout(()=>ie(""),1e3))})(F),be&&setTimeout(()=>be.focus())};y.useEffect(()=>()=>window.clearTimeout(C.current),[]),T0();const M=y.useCallback(T=>{var Z,W;return D.current===((Z=k.current)==null?void 0:Z.side)&&Ene(T,(W=k.current)==null?void 0:W.area)},[]);return s.jsx(une,{scope:r,searchRef:P,onItemEnter:y.useCallback(T=>{M(T)&&T.preventDefault()},[M]),onItemLeave:y.useCallback(T=>{var F;M(T)||((F=S.current)==null||F.focus(),N(null))},[M]),onTriggerLeave:y.useCallback(T=>{M(T)&&T.preventDefault()},[M]),pointerGraceTimerRef:A,onPointerGraceIntentChange:y.useCallback(T=>{k.current=T},[]),children:s.jsx(U,{...B,children:s.jsx(Wg,{asChild:!0,trapped:a,onMountAutoFocus:pe(i,T=>{var F;T.preventDefault(),(F=S.current)==null||F.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Iu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:s.jsx(GE,{asChild:!0,...w,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:N,onEntryFocus:pe(c,T=>{x.isUsingKeyboardRef.current||T.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(_0,{role:"menu","aria-orientation":"vertical","data-state":Y5(v.open),"data-radix-menu-content":"",dir:x.dir,...b,...p,ref:E,style:{outline:"none",...p.style},onKeyDown:pe(p.onKeyDown,T=>{const Z=T.target.closest("[data-radix-menu-content]")===T.currentTarget,W=T.ctrlKey||T.altKey||T.metaKey,K=T.key.length===1;Z&&(T.key==="Tab"&&T.preventDefault(),!W&&K&&L(T.key));const V=S.current;if(T.target!==V||!tne.includes(T.key))return;T.preventDefault();const be=_().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);E5.includes(T.key)&&be.reverse(),_ne(be)}),onBlur:pe(e.onBlur,T=>{T.currentTarget.contains(T.target)||(window.clearTimeout(C.current),P.current="")}),onPointerMove:pe(e.onPointerMove,Up(T=>{const F=T.target,Z=R.current!==T.clientX;if(T.currentTarget.contains(F)&&Z){const W=T.clientX>R.current?"right":"left";D.current=W,R.current=T.clientX}}))})})})})})})});D5.displayName=ma;var mne="MenuGroup",ek=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ee.div,{role:"group",...n,ref:t})});ek.displayName=mne;var pne="MenuLabel",R5=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ee.div,{...n,ref:t})});R5.displayName=pne;var Ox="MenuItem",Y2="menu.itemSelect",$0=y.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=y.useRef(null),o=Yg(Ox,e.__scopeMenu),l=ZE(Ox,e.__scopeMenu),c=Ke(t,i),u=y.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const h=new CustomEvent(Y2,{bubbles:!0,cancelable:!0});f.addEventListener(Y2,m=>n==null?void 0:n(m),{once:!0}),yE(f,h),h.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(M5,{...a,ref:c,disabled:r,onClick:pe(e.onClick,d),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),u.current=!0},onPointerUp:pe(e.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:pe(e.onKeyDown,f=>{const h=l.searchRef.current!=="";r||h&&f.key===" "||k1.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});$0.displayName=Ox;var M5=y.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=ZE(Ox,r),l=P5(r),c=y.useRef(null),u=Ke(t,c),[d,f]=y.useState(!1),[h,m]=y.useState("");return y.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[i.children]),s.jsx(Fp.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:s.jsx(YE,{asChild:!0,...l,focusable:!n,children:s.jsx(Ee.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:pe(e.onPointerMove,Up(g=>{n?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:pe(e.onPointerLeave,Up(g=>o.onItemLeave(g))),onFocus:pe(e.onFocus,()=>f(!0)),onBlur:pe(e.onBlur,()=>f(!1))})})})}),gne="MenuCheckboxItem",$5=y.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(B5,{scope:e.__scopeMenu,checked:r,children:s.jsx($0,{role:"menuitemcheckbox","aria-checked":Tx(r)?"mixed":r,...a,ref:t,"data-state":rk(r),onSelect:pe(a.onSelect,()=>n==null?void 0:n(Tx(r)?!0:!r),{checkForDefaultPrevented:!1})})})});$5.displayName=gne;var I5="MenuRadioGroup",[vne,yne]=Bu(I5,{value:void 0,onValueChange:()=>{}}),L5=y.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=Lr(n);return s.jsx(vne,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(ek,{...a,ref:t})})});L5.displayName=I5;var F5="MenuRadioItem",U5=y.forwardRef((e,t)=>{const{value:r,...n}=e,a=yne(F5,e.__scopeMenu),i=r===a.value;return s.jsx(B5,{scope:e.__scopeMenu,checked:i,children:s.jsx($0,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":rk(i),onSelect:pe(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});U5.displayName=F5;var tk="MenuItemIndicator",[B5,xne]=Bu(tk,{checked:!1}),z5=y.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=xne(tk,r);return s.jsx(dn,{present:n||Tx(i.checked)||i.checked===!0,children:s.jsx(Ee.span,{...a,ref:t,"data-state":rk(i.checked)})})});z5.displayName=tk;var bne="MenuSeparator",V5=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ee.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});V5.displayName=bne;var wne="MenuArrow",q5=y.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=M0(r);return s.jsx(N0,{...a,...n,ref:t})});q5.displayName=wne;var jne="MenuSub",[HFe,W5]=Bu(jne),Om="MenuSubTrigger",H5=y.forwardRef((e,t)=>{const r=zu(Om,e.__scopeMenu),n=Yg(Om,e.__scopeMenu),a=W5(Om,e.__scopeMenu),i=ZE(Om,e.__scopeMenu),o=y.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=y.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return y.useEffect(()=>d,[d]),y.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(XE,{asChild:!0,...u,children:s.jsx(M5,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":Y5(r.open),...e,ref:m0(t,a.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:pe(e.onPointerMove,Up(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:pe(e.onPointerLeave,Up(f=>{var m,g;d();const h=(m=r.content)==null?void 0:m.getBoundingClientRect();if(h){const p=(g=r.content)==null?void 0:g.dataset.side,v=p==="right",x=v?-5:5,b=h[v?"left":"right"],w=h[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:b,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:b,y:h.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:pe(e.onKeyDown,f=>{var m;const h=i.searchRef.current!=="";e.disabled||h&&f.key===" "||rne[n.dir].includes(f.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),f.preventDefault())})})})});H5.displayName=Om;var K5="MenuSubContent",G5=y.forwardRef((e,t)=>{const r=O5(ma,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=zu(ma,e.__scopeMenu),o=Yg(ma,e.__scopeMenu),l=W5(K5,e.__scopeMenu),c=y.useRef(null),u=Ke(t,c);return s.jsx(Fp.Provider,{scope:e.__scopeMenu,children:s.jsx(dn,{present:n||i.open,children:s.jsx(Fp.Slot,{scope:e.__scopeMenu,children:s.jsx(JE,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:pe(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:pe(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:pe(e.onKeyDown,d=>{var m;const f=d.currentTarget.contains(d.target),h=nne[o.dir].includes(d.key);f&&h&&(i.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});G5.displayName=K5;function Y5(e){return e?"open":"closed"}function Tx(e){return e==="indeterminate"}function rk(e){return Tx(e)?"indeterminate":e?"checked":"unchecked"}function _ne(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Nne(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function Sne(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=Nne(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function Cne(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function Ene(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return Cne(r,t)}function Up(e){return t=>t.pointerType==="mouse"?e(t):void 0}var kne=A5,Pne=XE,Ane=T5,One=D5,Tne=ek,Dne=R5,Rne=$0,Mne=$5,$ne=L5,Ine=U5,Lne=z5,Fne=V5,Une=q5,Bne=H5,zne=G5,I0="DropdownMenu",[Vne,KFe]=Qr(I0,[k5]),ls=k5(),[qne,X5]=Vne(I0),Q5=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=ls(t),u=y.useRef(null),[d,f]=Hs({prop:a,defaultProp:i??!1,onChange:o,caller:I0});return s.jsx(qne,{scope:t,triggerId:ha(),triggerRef:u,contentId:ha(),open:d,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(h=>!h),[f]),modal:l,children:s.jsx(kne,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};Q5.displayName=I0;var Z5="DropdownMenuTrigger",J5=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=X5(Z5,r),o=ls(r);return s.jsx(Pne,{asChild:!0,...o,children:s.jsx(Ee.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:m0(t,i.triggerRef),onPointerDown:pe(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:pe(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});J5.displayName=Z5;var Wne="DropdownMenuPortal",eU=e=>{const{__scopeDropdownMenu:t,...r}=e,n=ls(t);return s.jsx(Ane,{...n,...r})};eU.displayName=Wne;var tU="DropdownMenuContent",rU=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=X5(tU,r),i=ls(r),o=y.useRef(!1);return s.jsx(One,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:pe(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:pe(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});rU.displayName=tU;var Hne="DropdownMenuGroup",Kne=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Tne,{...a,...n,ref:t})});Kne.displayName=Hne;var Gne="DropdownMenuLabel",nU=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Dne,{...a,...n,ref:t})});nU.displayName=Gne;var Yne="DropdownMenuItem",sU=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Rne,{...a,...n,ref:t})});sU.displayName=Yne;var Xne="DropdownMenuCheckboxItem",aU=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Mne,{...a,...n,ref:t})});aU.displayName=Xne;var Qne="DropdownMenuRadioGroup",Zne=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx($ne,{...a,...n,ref:t})});Zne.displayName=Qne;var Jne="DropdownMenuRadioItem",iU=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Ine,{...a,...n,ref:t})});iU.displayName=Jne;var ese="DropdownMenuItemIndicator",oU=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Lne,{...a,...n,ref:t})});oU.displayName=ese;var tse="DropdownMenuSeparator",lU=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Fne,{...a,...n,ref:t})});lU.displayName=tse;var rse="DropdownMenuArrow",nse=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Une,{...a,...n,ref:t})});nse.displayName=rse;var sse="DropdownMenuSubTrigger",cU=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Bne,{...a,...n,ref:t})});cU.displayName=sse;var ase="DropdownMenuSubContent",uU=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(zne,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});uU.displayName=ase;var ise=Q5,ose=J5,lse=eU,dU=rU,fU=nU,hU=sU,mU=aU,pU=iU,gU=oU,vU=lU,yU=cU,xU=uU;const Ns=ise,Ss=ose,cse=y.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(yU,{ref:a,className:ae("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(Oo,{className:"ml-auto h-4 w-4"})]}));cse.displayName=yU.displayName;const use=y.forwardRef(({className:e,...t},r)=>s.jsx(xU,{ref:r,className:ae("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));use.displayName=xU.displayName;const ss=y.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(lse,{children:s.jsx(dU,{ref:n,sideOffset:t,className:ae("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));ss.displayName=dU.displayName;const tt=y.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(hU,{ref:n,className:ae("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));tt.displayName=hU.displayName;const dse=y.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(mU,{ref:a,className:ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(gU,{children:s.jsx(dh,{className:"h-4 w-4"})})}),t]}));dse.displayName=mU.displayName;const fse=y.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(pU,{ref:n,className:ae("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(gU,{children:s.jsx(mF,{className:"h-2 w-2 fill-current"})})}),t]}));fse.displayName=pU.displayName;const P1=y.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(fU,{ref:n,className:ae("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));P1.displayName=fU.displayName;const ca=y.forwardRef(({className:e,...t},r)=>s.jsx(vU,{ref:r,className:ae("-mx-1 my-1 h-px bg-muted",e),...t}));ca.displayName=vU.displayName;const hse=uh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function fe({className:e,variant:t,...r}){return s.jsx("div",{className:ae(hse({variant:t}),e),...r})}function nc(){const[e,t]=y.useState(null),[r,n]=y.useState(null),[a,i]=y.useState(!0);return y.useEffect(()=>{const{data:{subscription:u}}=$.auth.onAuthStateChange((d,f)=>{n(f),t((f==null?void 0:f.user)??null),i(!1)});return $.auth.getSession().then(({data:{session:d}})=>{n(d),t((d==null?void 0:d.user)??null),i(!1)}),()=>u.unsubscribe()},[]),{user:e,session:r,loading:a,signUp:async(u,d,f)=>{const h=`${window.location.origin}/`,{data:m,error:g}=await $.auth.signUp({email:u,password:d,options:{emailRedirectTo:h,data:{display_name:f}}});return{data:m,error:g}},signIn:async(u,d)=>{const{data:f,error:h}=await $.auth.signInWithPassword({email:u,password:d});return{data:f,error:h}},signOut:async()=>{const{error:u}=await $.auth.signOut();return{error:u}}}}function mse(){const[e,t]=y.useState([]),[r,n]=y.useState(0),[a,i]=y.useState(!0),{toast:o}=lr(),l=y.useCallback(async()=>{try{i(!0);const{data:{user:d}}=await $.auth.getUser();if(!d){i(!1);return}const{data:f,error:h}=await $.from("notifications").select("*").eq("user_id",d.id).order("created_at",{ascending:!1}).limit(50);if(h)throw h;const m=f||[];t(m),n(m.filter(g=>!g.is_read).length)}catch(d){console.error("Error fetching notifications:",d.message)}finally{i(!1)}},[]),c=async d=>{try{const{error:f}=await $.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",d);if(f)throw f;t(h=>h.map(m=>m.id===d?{...m,is_read:!0,read_at:new Date().toISOString()}:m)),n(h=>Math.max(0,h-1))}catch(f){console.error("Error marking notification as read:",f.message)}},u=async()=>{try{const{data:{user:d}}=await $.auth.getUser();if(!d)return;const{error:f}=await $.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("user_id",d.id).eq("is_read",!1);if(f)throw f;t(h=>h.map(m=>({...m,is_read:!0,read_at:new Date().toISOString()}))),n(0),o({title:"All notifications marked as read"})}catch(d){o({title:"Error marking notifications as read",description:d.message,variant:"destructive"})}};return y.useEffect(()=>{l();const d=async()=>{const{data:{user:h}}=await $.auth.getUser();return h?$.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${h.id}`},g=>{const p=g.new;t(v=>[p,...v]),n(v=>v+1),o({title:p.title,description:p.message})}).subscribe():null};let f=null;return d().then(h=>{f=h}),()=>{f&&$.removeChannel(f)}},[l,o]),{notifications:e,unreadCount:r,loading:a,fetchNotifications:l,markAsRead:c,markAllAsRead:u}}function Ye(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Cs(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function sn(e,t){const r=Ye(e);return isNaN(t)?Cs(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Ja(e,t){const r=Ye(e);if(isNaN(t))return Cs(e,NaN);if(!t)return r;const n=r.getDate(),a=Cs(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function pse(e){const t=Ye(e).getDay();return t===0||t===6}const nk=6048e5,gse=864e5,bU=6e4,wU=36e5,ny=43200,X2=1440;let vse={};function wh(){return vse}function Pi(e,t){var l,c,u,d;const r=wh(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Ye(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function bu(e){return Pi(e,{weekStartsOn:1})}function jU(e){const t=Ye(e),r=t.getFullYear(),n=Cs(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=bu(n),i=Cs(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=bu(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Nf(e){const t=Ye(e);return t.setHours(0,0,0,0),t}function Sf(e){const t=Ye(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function ua(e,t){const r=Nf(e),n=Nf(t),a=+r-Sf(r),i=+n-Sf(n);return Math.round((a-i)/gse)}function yse(e){const t=jU(e),r=Cs(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),bu(r)}function A1(e,t){const r=t*7;return sn(e,r)}function xse(e,t){return Ja(e,t*12)}function bse(e){let t;return e.forEach(function(r){const n=Ye(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function wse(e){let t;return e.forEach(r=>{const n=Ye(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function Uy(e,t){const r=Ye(e),n=Ye(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function jse(e){return Cs(e,Date.now())}function Jn(e,t){const r=Nf(e),n=Nf(t);return+r==+n}function sk(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function O1(e){if(!sk(e)&&typeof e!="number")return!1;const t=Ye(e);return!isNaN(Number(t))}function _se(e,t){const r=Ye(e);let n=Ye(t);if(!O1(r)||!O1(n))return NaN;const a=ua(r,n),i=a<0?-1:1,o=Math.trunc(a/7);let l=o*5;for(n=sn(n,o*7);!Jn(r,n);)l+=pse(n)?0:i,n=sn(n,i);return l===0?0:l}function Cf(e,t){const r=Ye(e),n=Ye(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function Nse(e,t,r){const n=Pi(e,r),a=Pi(t,r),i=+n-Sf(n),o=+a-Sf(a);return Math.round((i-o)/nk)}function Ai(e,t){const r=Ye(e),n=Ye(t),a=Q2(r,n),i=Math.abs(ua(r,n));r.setDate(r.getDate()-a*i);const o=+(Q2(r,n)===-a),l=a*(i-o);return l===0?0:l}function Q2(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function Sse(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function Cse(e,t){return+Ye(e)-+Ye(t)}function Ese(e){const t=Ye(e);return t.setHours(23,59,59,999),t}function L0(e){const t=Ye(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function kse(e){const t=Ye(e);return+Ese(t)==+L0(t)}function Pse(e,t){const r=Ye(e),n=Ye(t),a=Uy(r,n),i=Math.abs(Cf(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);let l=Uy(r,n)===-a;kse(Ye(e))&&i===1&&Uy(e,n)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function Ase(e,t,r){const n=Cse(e,t)/1e3;return Sse(r==null?void 0:r.roundingMethod)(n)}function _s(e){const t=Ye(e);return t.setDate(1),t.setHours(0,0,0,0),t}function _U(e){const t=Ye(e),r=Cs(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function ak(e,t){var l,c,u,d;const r=wh(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Ye(e),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function NU(e){return ak(e,{weekStartsOn:1})}const Ose={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Tse=(e,t,r)=>{let n;const a=Ose[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function o_(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Dse={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rse={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Mse={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$se={date:o_({formats:Dse,defaultWidth:"full"}),time:o_({formats:Rse,defaultWidth:"full"}),dateTime:o_({formats:Mse,defaultWidth:"full"})},Ise={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Lse=(e,t,r,n)=>Ise[e];function sm(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Fse={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Use={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bse={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zse={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Vse={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qse={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wse=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Hse={ordinalNumber:Wse,era:sm({values:Fse,defaultWidth:"wide"}),quarter:sm({values:Use,defaultWidth:"wide",argumentCallback:e=>e-1}),month:sm({values:Bse,defaultWidth:"wide"}),day:sm({values:zse,defaultWidth:"wide"}),dayPeriod:sm({values:Vse,defaultWidth:"wide",formattingValues:qse,defaultFormattingWidth:"wide"})};function am(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Gse(l,f=>f.test(o)):Kse(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function Kse(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Gse(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Yse(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const Xse=/^(\d+)(th|st|nd|rd)?/i,Qse=/\d+/i,Zse={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Jse={any:[/^b/i,/^(a|c)/i]},eae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tae={any:[/1/i,/2/i,/3/i,/4/i]},rae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},iae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lae={ordinalNumber:Yse({matchPattern:Xse,parsePattern:Qse,valueCallback:e=>parseInt(e,10)}),era:am({matchPatterns:Zse,defaultMatchWidth:"wide",parsePatterns:Jse,defaultParseWidth:"any"}),quarter:am({matchPatterns:eae,defaultMatchWidth:"wide",parsePatterns:tae,defaultParseWidth:"any",valueCallback:e=>e+1}),month:am({matchPatterns:rae,defaultMatchWidth:"wide",parsePatterns:nae,defaultParseWidth:"any"}),day:am({matchPatterns:sae,defaultMatchWidth:"wide",parsePatterns:aae,defaultParseWidth:"any"}),dayPeriod:am({matchPatterns:iae,defaultMatchWidth:"any",parsePatterns:oae,defaultParseWidth:"any"})},ik={code:"en-US",formatDistance:Tse,formatLong:$se,formatRelative:Lse,localize:Hse,match:lae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cae(e){const t=Ye(e);return ua(t,_U(t))+1}function SU(e){const t=Ye(e),r=+bu(t)-+yse(t);return Math.round(r/nk)+1}function CU(e,t){var d,f,h,m;const r=Ye(e),n=r.getFullYear(),a=wh(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Cs(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Pi(o,t),c=Cs(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=Pi(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function uae(e,t){var l,c,u,d;const r=wh(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=CU(e,t),i=Cs(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Pi(i,t)}function EU(e,t){const r=Ye(e),n=+Pi(r,t)-+uae(r,t);return Math.round(n/nk)+1}function Jt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Wo={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Jt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Jt(r+1,2)},d(e,t){return Jt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Jt(e.getHours()%12||12,t.length)},H(e,t){return Jt(e.getHours(),t.length)},m(e,t){return Jt(e.getMinutes(),t.length)},s(e,t){return Jt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Jt(a,t.length)}},ld={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Z2={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Wo.y(e,t)},Y:function(e,t,r,n){const a=CU(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Jt(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Jt(i,t.length)},R:function(e,t){const r=jU(e);return Jt(r,t.length)},u:function(e,t){const r=e.getFullYear();return Jt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Jt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Jt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Wo.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Jt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=EU(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Jt(a,t.length)},I:function(e,t,r){const n=SU(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Jt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Wo.d(e,t)},D:function(e,t,r){const n=cae(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Jt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Jt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Jt(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Jt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=ld.noon:n===0?a=ld.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=ld.evening:n>=12?a=ld.afternoon:n>=4?a=ld.morning:a=ld.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Wo.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Wo.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Jt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Jt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Wo.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Wo.s(e,t)},S:function(e,t){return Wo.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return eT(n);case"XXXX":case"XX":return Nc(n);case"XXXXX":case"XXX":default:return Nc(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return eT(n);case"xxxx":case"xx":return Nc(n);case"xxxxx":case"xxx":default:return Nc(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+J2(n,":");case"OOOO":default:return"GMT"+Nc(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+J2(n,":");case"zzzz":default:return"GMT"+Nc(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Jt(n,t.length)},T:function(e,t,r){const n=e.getTime();return Jt(n,t.length)}};function J2(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+Jt(i,2)}function eT(e,t){return e%60===0?(e>0?"-":"+")+Jt(Math.abs(e)/60,2):Nc(e,t)}function Nc(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Jt(Math.trunc(n/60),2),i=Jt(n%60,2);return r+a+t+i}const tT=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},kU=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},dae=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return tT(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",tT(n,t)).replace("{{time}}",kU(a,t))},fae={p:kU,P:dae},hae=/^D+$/,mae=/^Y+$/,pae=["D","DD","YY","YYYY"];function gae(e){return hae.test(e)}function vae(e){return mae.test(e)}function yae(e,t,r){const n=xae(e,t,r);if(console.warn(n),pae.includes(e))throw new RangeError(n)}function xae(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jae=/^'([^]*?)'?$/,_ae=/''/g,Nae=/[a-zA-Z]/;function de(e,t,r){var d,f,h,m,g,p,v,x;const n=wh(),a=(r==null?void 0:r.locale)??n.locale??ik,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((p=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((x=(v=n.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,l=Ye(e);if(!O1(l))throw new RangeError("Invalid time value");let c=t.match(wae).map(b=>{const w=b[0];if(w==="p"||w==="P"){const _=fae[w];return _(b,a.formatLong)}return b}).join("").match(bae).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:Sae(b)};if(Z2[w])return{isToken:!0,value:b};if(w.match(Nae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(b=>{if(!b.isToken)return b.value;const w=b.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&vae(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&gae(w))&&yae(w,t,String(e));const _=Z2[w[0]];return _(l,w,a.localize,u)}).join("")}function Sae(e){const t=e.match(jae);return t?t[1].replace(_ae,"'"):e}function Cae(e,t,r){const n=wh(),a=(r==null?void 0:r.locale)??n.locale??ik,i=2520,o=Uy(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=Ye(t),u=Ye(e)):(c=Ye(e),u=Ye(t));const d=Ase(u,c),f=(Sf(u)-Sf(c))/1e3,h=Math.round((d-f)/60);let m;if(h<2)return r!=null&&r.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,l):d<10?a.formatDistance("lessThanXSeconds",10,l):d<20?a.formatDistance("lessThanXSeconds",20,l):d<40?a.formatDistance("halfAMinute",0,l):d<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):h===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",h,l);if(h<45)return a.formatDistance("xMinutes",h,l);if(h<90)return a.formatDistance("aboutXHours",1,l);if(h<X2){const g=Math.round(h/60);return a.formatDistance("aboutXHours",g,l)}else{if(h<i)return a.formatDistance("xDays",1,l);if(h<ny){const g=Math.round(h/X2);return a.formatDistance("xDays",g,l)}else if(h<ny*2)return m=Math.round(h/ny),a.formatDistance("aboutXMonths",m,l)}if(m=Pse(u,c),m<12){const g=Math.round(h/ny);return a.formatDistance("xMonths",g,l)}else{const g=m%12,p=Math.trunc(m/12);return g<3?a.formatDistance("aboutXYears",p,l):g<9?a.formatDistance("overXYears",p,l):a.formatDistance("almostXYears",p+1,l)}}function ok(e,t){return Cae(e,jse(e),t)}function Eae(e){const t=Ye(e),r=t.getFullYear(),n=t.getMonth(),a=Cs(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function kae(e){return Math.trunc(+Ye(e)/1e3)}function Pae(e){const t=Ye(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function Aae(e,t){return Nse(Pae(e),_s(e),t)+1}function T1(e,t){const r=Ye(e),n=Ye(t);return r.getTime()>n.getTime()}function PU(e,t){const r=Ye(e),n=Ye(t);return+r<+n}function Gm(e){return+Ye(e)<Date.now()}function lk(e,t){const r=Ye(e),n=Ye(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Oae(e,t){const r=Ye(e),n=Ye(t);return r.getFullYear()===n.getFullYear()}function l_(e,t){return sn(e,-t)}function On(e,t){const n=Mae(e);let a;if(n.date){const c=$ae(n.date,2);a=Iae(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,l;if(n.time&&(o=Lae(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=Fae(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(i+o+l)}const sy={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Tae=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Dae=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Rae=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Mae(e){const t={},r=e.split(sy.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],sy.timeZoneDelimiter.test(t.date)&&(t.date=e.split(sy.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=sy.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function $ae(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function Iae(e,t){if(t===null)return new Date(NaN);const r=e.match(Tae);if(!r)return new Date(NaN);const n=!!r[4],a=im(r[1]),i=im(r[2])-1,o=im(r[3]),l=im(r[4]),c=im(r[5])-1;if(n)return qae(t,l,c)?Uae(t,l,c):new Date(NaN);{const u=new Date(0);return!zae(t,i,o)||!Vae(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}}function im(e){return e?parseInt(e):1}function Lae(e){const t=e.match(Dae);if(!t)return NaN;const r=c_(t[1]),n=c_(t[2]),a=c_(t[3]);return Wae(r,n,a)?r*wU+n*bU+a*1e3:NaN}function c_(e){return e&&parseFloat(e.replace(",","."))||0}function Fae(e){if(e==="Z")return 0;const t=e.match(Rae);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return Hae(n,a)?r*(n*wU+a*bU):NaN}function Uae(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const Bae=[31,null,31,30,31,30,31,31,30,31,30,31];function AU(e){return e%400===0||e%4===0&&e%100!==0}function zae(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Bae[t]||(AU(e)?29:28))}function Vae(e,t){return t>=1&&t<=(AU(e)?366:365)}function qae(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Wae(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function Hae(e,t){return t>=0&&t<=59}function u_(e,t){const r=Ye(e),n=r.getFullYear(),a=r.getDate(),i=Cs(e,0);i.setFullYear(n,t,15),i.setHours(0,0,0,0);const o=Eae(i);return r.setMonth(t,Math.min(a,o)),r}function rT(e,t){const r=Ye(e);return isNaN(+r)?Cs(e,NaN):(r.setFullYear(t),r)}function Kae({onMenuClick:e}){var f;const t=ii(),{user:r,signOut:n}=nc(),{notifications:a,unreadCount:i,markAsRead:o,markAllAsRead:l}=mse(),c=async()=>{const{error:h}=await n();if(h){J({title:"Error",description:"Failed to log out. Please try again.",variant:"destructive"});return}J({title:"Logged out",description:"You have been successfully logged out."}),t("/auth")},u=((f=r==null?void 0:r.user_metadata)==null?void 0:f.display_name)||(r==null?void 0:r.email)||"User",d=u.split(" ").map(h=>h[0]).join("").toUpperCase().slice(0,2);return s.jsx("header",{className:"sticky top-0 z-30 h-16 border-b border-border bg-card/80 backdrop-blur-sm",children:s.jsxs("div",{className:"flex items-center justify-between h-full px-4 md:px-6",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.jsx(I,{variant:"ghost",size:"icon",className:"md:hidden",onClick:e,children:s.jsx(wF,{className:"h-5 w-5"})}),s.jsxs("div",{className:"relative hidden sm:block max-w-md flex-1",children:[s.jsx(un,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{type:"search",placeholder:"Search employees, documents...",className:"pl-10 bg-muted/50 border-0 focus-visible:ring-1 focus-visible:ring-primary"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsxs(I,{variant:"ghost",size:"icon",className:"relative",children:[s.jsx(fF,{className:"h-5 w-5"}),i>0&&s.jsx(fe,{className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs bg-destructive border-0",children:i>9?"9+":i})]})}),s.jsxs(ss,{align:"end",className:"w-80 max-h-96 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between px-2",children:[s.jsx(P1,{children:"Notifications"}),i>0&&s.jsxs(I,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:h=>{h.preventDefault(),l()},children:[s.jsx(nG,{className:"h-3 w-3 mr-1"}),"Mark all read"]})]}),s.jsx(ca,{}),a.length===0?s.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No notifications yet"}):a.slice(0,10).map(h=>s.jsxs(tt,{className:`flex flex-col items-start gap-1 cursor-pointer ${h.is_read?"":"bg-muted/50"}`,onClick:()=>{h.is_read||o(h.id),h.link&&t(h.link)},children:[s.jsxs("div",{className:"flex items-start justify-between w-full gap-2",children:[s.jsx("span",{className:"font-medium text-sm",children:h.title}),!h.is_read&&s.jsx("span",{className:"h-2 w-2 rounded-full bg-primary flex-shrink-0 mt-1.5"})]}),s.jsx("span",{className:"text-xs text-muted-foreground line-clamp-2",children:h.message}),s.jsx("span",{className:"text-xs text-muted-foreground/70",children:ok(new Date(h.created_at),{addSuffix:!0})})]},h.id)),a.length>10&&s.jsxs(s.Fragment,{children:[s.jsx(ca,{}),s.jsx(tt,{className:"text-center justify-center text-primary cursor-pointer",children:"View all notifications"})]})]})]}),s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsx(I,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:s.jsxs(Or,{className:"h-9 w-9",children:[s.jsx(qg,{src:"/avatars/admin.jpg",alt:u}),s.jsx(Tr,{className:"bg-primary text-primary-foreground text-sm",children:d})]})})}),s.jsxs(ss,{align:"end",className:"w-56",children:[s.jsx(P1,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:u}),s.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:(r==null?void 0:r.email)||"No email"})]})}),s.jsx(ca,{}),s.jsx(tt,{children:"My Profile"}),s.jsx(tt,{children:"Account Settings"}),s.jsx(ca,{}),s.jsx(tt,{className:"text-destructive",onClick:c,children:"Log out"})]})]})]})]})})}function OU({children:e}){const[t,r]=y.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"hidden md:block",children:s.jsx(I2,{})}),t&&s.jsx("div",{className:"fixed inset-0 z-40 bg-foreground/20 backdrop-blur-sm md:hidden",onClick:()=>r(!1),children:s.jsx("div",{onClick:n=>n.stopPropagation(),children:s.jsx(I2,{})})}),s.jsxs("div",{className:ae("md:ml-64 min-h-screen flex flex-col transition-all duration-300"),children:[s.jsx(Kae,{onMenuClick:()=>r(!t)}),s.jsx("main",{className:"flex-1 p-4 md:p-6",children:e})]})]})}function Gae({children:e}){const{user:t,loading:r}=nc(),n=ii();return y.useEffect(()=>{!r&&!t&&n("/auth")},[t,r,n]),r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):t?s.jsx(s.Fragment,{children:e}):null}const Yae={default:"bg-primary/10 text-primary",success:"bg-success/10 text-success",warning:"bg-warning/10 text-warning",danger:"bg-destructive/10 text-destructive",info:"bg-info/10 text-info"};function Ut({title:e,value:t,description:r,icon:n,trend:a,variant:i="default",className:o}){return s.jsx("div",{className:ae("metric-card bg-card rounded-xl border border-border p-5 card-interactive",o),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("h3",{className:"text-3xl font-bold tracking-tight",children:t}),a&&s.jsxs("span",{className:ae("text-xs font-medium",a.positive?"text-success":"text-destructive"),children:[a.positive?"+":"",a.value,"%"]})]}),r&&s.jsx("p",{className:"text-xs text-muted-foreground",children:r})]}),s.jsx("div",{className:ae("p-3 rounded-lg",Yae[i]),children:s.jsx(n,{className:"h-5 w-5"})})]})})}const G=y.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ae("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));G.displayName="Card";const he=y.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ae("flex flex-col space-y-1.5 p-6",e),...t}));he.displayName="CardHeader";const ge=y.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:ae("text-2xl font-semibold leading-none tracking-tight",e),...t}));ge.displayName="CardTitle";const Le=y.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:ae("text-sm text-muted-foreground",e),...t}));Le.displayName="CardDescription";const X=y.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ae("p-6 pt-0",e),...t}));X.displayName="CardContent";const Xae=y.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ae("flex items-center p-6 pt-0",e),...t}));Xae.displayName="CardFooter";function Qae({organisationId:e}){const{employees:t,certifications:r,getCertificationsForEmployee:n,isLoading:a}=xa(e,{skipFallback:!0}),i=y.useMemo(()=>t.filter(o=>o.status==="active").flatMap(o=>n(o.id).filter(c=>c.status==="expired"||c.status==="expiring").map(c=>({employeeId:o.id,employeeName:`${o.first_name} ${o.last_name}`,certification:c.name,expiryDate:c.expiry_date||"",status:c.status,daysUntilExpiry:c.expiry_date?Ai(On(c.expiry_date),new Date):0}))).sort((o,l)=>o.status==="expired"&&l.status!=="expired"?-1:o.status!=="expired"&&l.status==="expired"?1:o.daysUntilExpiry-l.daysUntilExpiry),[t,n]);return a?s.jsxs(G,{className:"h-full",children:[s.jsx(he,{className:"flex flex-row items-center justify-between pb-2",children:s.jsx(ge,{className:"text-lg font-semibold",children:"Compliance Alerts"})}),s.jsx(X,{className:"flex items-center justify-center py-8",children:s.jsx(We,{className:"h-6 w-6 animate-spin text-muted-foreground"})})]}):s.jsxs(G,{className:"h-full",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between pb-2",children:[s.jsx(ge,{className:"text-lg font-semibold",children:"Compliance Alerts"}),s.jsxs(I,{variant:"ghost",size:"sm",className:"text-primary",children:["View All",s.jsx(Oo,{className:"ml-1 h-4 w-4"})]})]}),s.jsx(X,{className:"space-y-3",children:i.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(xt,{className:"h-10 w-10 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"text-sm",children:"All certifications are up to date!"})]}):i.slice(0,5).map((o,l)=>s.jsxs("div",{className:ae("flex items-start gap-3 p-3 rounded-lg border transition-colors hover:bg-muted/50",o.status==="expired"?"border-destructive/30 bg-destructive/5":"border-warning/30 bg-warning/5"),children:[s.jsx("div",{className:ae("p-2 rounded-full flex-shrink-0",o.status==="expired"?"bg-destructive/10":"bg-warning/10"),children:o.status==="expired"?s.jsx(An,{className:"h-4 w-4 text-destructive"}):s.jsx(or,{className:"h-4 w-4 text-warning"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:o.employeeName}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:o.certification}),s.jsx("p",{className:ae("text-xs font-medium mt-1",o.status==="expired"?"text-destructive":"text-warning"),children:o.status==="expired"?`Expired ${Math.abs(o.daysUntilExpiry)} days ago`:`Expires in ${o.daysUntilExpiry} days`})]}),s.jsx(I,{variant:"ghost",size:"sm",className:"flex-shrink-0",children:"Resolve"})]},`${o.employeeId}-${o.certification}-${l}`))})]})}const Zae={hire:gu,leave:Vt,document:Ei,timesheet:xt,compliance:jt},Jae={hire:"bg-success/10 text-success",leave:"bg-info/10 text-info",document:"bg-primary/10 text-primary",timesheet:"bg-warning/10 text-warning",compliance:"bg-success/10 text-success"};function eie(e){return e.trim().split(/\s+/).slice(0,2).map(r=>{var n;return(n=r[0])==null?void 0:n.toUpperCase()}).join("")||"NA"}function tie(e){return e.startsWith("employee")?"hire":e.startsWith("leave")?"leave":e.startsWith("document")?"document":e.startsWith("timesheet")?"timesheet":(e.startsWith("compliance"),"compliance")}function rie(e){return e.replace(/[._-]/g," ").trim().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function nie({organisationId:e}){const[t,r]=y.useState([]),[n,a]=y.useState(!0);y.useEffect(()=>{let o=!0;return(async()=>{if(!e){r([]),a(!1);return}a(!0);const{data:c,error:u}=await $.from("audit_logs").select("id, action, entity_type, entity_id, created_at, user_name, user_email, new_values").eq("organisation_id",e).order("created_at",{ascending:!1}).limit(5);o&&(u?(console.error("[RecentActivity] Failed to fetch audit logs:",u),r([])):r(c||[]),a(!1))})(),()=>{o=!1}},[e]);const i=y.useMemo(()=>t.map(o=>{var g,p,v,x,b;const l=o.user_name||o.user_email||o.entity_id||"System",c=o.action==="employee.create",u=String(((g=o.new_values)==null?void 0:g.first_name)||"").trim(),d=String(((p=o.new_values)==null?void 0:p.last_name)||"").trim(),f=`${u} ${d}`.trim(),h=String(((v=o.new_values)==null?void 0:v.position)||((x=o.new_values)==null?void 0:x.role)||"").trim(),m=String(((b=o.new_values)==null?void 0:b.department)||"").trim();return{id:o.id,type:tie(o.action),title:c&&f?`${f} Joined`:rie(o.action),description:c&&(h||m)?`${h||""}  ${m||""}`:`${o.entity_type.replace(/_/g," ")}${o.entity_id?`  ${o.entity_id}`:""}`,time:ok(new Date(o.created_at),{addSuffix:!0}),user:{name:c&&f?f:l,initials:eie(c&&f?f:l)}}}),[t]);return s.jsxs(G,{className:"h-full",children:[s.jsx(he,{className:"pb-3",children:s.jsx(ge,{className:"text-lg font-semibold",children:"Recent Activity"})}),s.jsx(X,{children:n?s.jsx("div",{className:"flex items-center justify-center py-10 text-muted-foreground",children:s.jsx(We,{className:"h-6 w-6 animate-spin"})}):i.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(xt,{className:"h-10 w-10 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No recent activity yet"})]}):s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-5 top-0 bottom-0 w-px bg-border"}),s.jsx("div",{className:"space-y-4",children:i.map(o=>{const l=Zae[o.type];return s.jsxs("div",{className:"relative flex gap-4 pl-2",children:[s.jsx("div",{className:ae("relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2 border-background",Jae[o.type]),children:s.jsx(l,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex-1 min-w-0 pb-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:o.title}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:o.description})]}),o.user&&s.jsx(Or,{className:"h-6 w-6 flex-shrink-0",children:s.jsx(Tr,{className:"text-[10px] bg-muted",children:o.user.initials})})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1.5",children:o.time})]})]},o.id)})})]})})]})}const sie={compliant:{label:"Compliant",className:"status-compliant",icon:jt},expiring:{label:"Expiring Soon",className:"status-expiring",icon:or},expired:{label:"Expired",className:"status-expired",icon:An},pending:{label:"Pending",className:"status-pending",icon:xt},approved:{label:"Approved",className:"status-compliant",icon:jt},rejected:{label:"Rejected",className:"status-expired",icon:An},cancelled:{label:"Cancelled",className:"bg-muted text-muted-foreground border-muted",icon:An},active:{label:"Active",className:"status-compliant",icon:jt},inactive:{label:"Inactive",className:"bg-muted text-muted-foreground border-muted",icon:jp},onboarding:{label:"Onboarding",className:"status-pending",icon:xt},offboarding:{label:"Offboarding",className:"status-expiring",icon:or}};function jh({status:e,showIcon:t=!0,size:r="md",className:n}){const a=sie[e],i=a.icon;return s.jsxs("span",{className:ae("inline-flex items-center gap-1.5 rounded-full border font-medium",r==="sm"?"px-2 py-0.5 text-xs":"px-2.5 py-1 text-xs",a.className,n),children:[t&&s.jsx(i,{className:ae(r==="sm"?"h-3 w-3":"h-3.5 w-3.5")}),a.label]})}class aie{async getLeaveTypes(t){const{data:r,error:n}=await $.from("leave_types").select("*").eq("organisation_id",t).eq("is_active",!0).order("display_order");if(n)throw console.error("[LeaveService] Failed to fetch leave types:",n),n;return r||[]}async getEmployeeBalances(t){const{data:r,error:n}=await $.from("leave_balances").select(`
        *,
        leave_type:leave_types(*)
      `).eq("employee_id",t);if(n)throw console.error("[LeaveService] Failed to fetch employee balances:",n),n;return r||[]}async getOrganisationBalances(t){const{data:r,error:n}=await $.from("leave_balances").select(`
        *,
        leave_type:leave_types(*)
      `).eq("organisation_id",t);if(n)throw console.error("[LeaveService] Failed to fetch organisation balances:",n),n;return r||[]}async getLeaveRequests(t,r){let n=$.from("leave_requests").select(`
        *,
        employee:employees(id, first_name, last_name, email, employment_type, department),
        leave_type:leave_types(*)
      `).eq("organisation_id",t).order("created_at",{ascending:!1});r!=null&&r.status&&(n=n.eq("status",r.status)),r!=null&&r.employeeId&&(n=n.eq("employee_id",r.employeeId)),r!=null&&r.startDate&&(n=n.gte("start_date",r.startDate)),r!=null&&r.endDate&&(n=n.lte("end_date",r.endDate));const{data:a,error:i}=await n;if(i)throw console.error("[LeaveService] Failed to fetch leave requests:",i),i;return a||[]}async createLeaveRequest(t,r,n,a,i,o,l){var h;const{data:c}=await $.from("leave_types").select("name").eq("id",n).single(),u=((h=c==null?void 0:c.name)==null?void 0:h.toLowerCase().replace(/[^a-z]/g,"_"))||"other",{data:d,error:f}=await $.from("leave_requests").insert({organisation_id:t,employee_id:r,leave_type_id:n,type:u,start_date:a,end_date:i,hours:o,reason:l,status:"pending"}).select().single();if(f)throw console.error("[LeaveService] Failed to create leave request:",f),f;return await _r.logLeaveAction("create",d.id,t,void 0,{employee_id:r,leave_type_id:n,start_date:a,end_date:i,hours:o}),d}async processLeaveDecision(t,r){const{data:n,error:a}=await $.from("leave_requests").select("*").eq("id",t.request_id).single();if(a||!n)throw new Error("Leave request not found");const i={...n},{data:{user:o}}=await $.auth.getUser(),{data:l}=await $.from("profiles").select("display_name").eq("user_id",o==null?void 0:o.id).maybeSingle(),c=new Date().toISOString();if(t.action==="approve"){if(!t.override_insufficient_balance&&n.leave_type_id){const{data:f}=await $.rpc("check_leave_balance",{_employee_id:n.employee_id,_leave_type_id:n.leave_type_id,_hours_requested:n.hours});if(!f)throw new Error("Insufficient leave balance. Use override to approve anyway.")}const{data:u,error:d}=await $.from("leave_requests").update({status:"approved",approved_by:(l==null?void 0:l.display_name)||(o==null?void 0:o.email),approved_at:c,decided_by_user_id:o==null?void 0:o.id,decided_at:c,balance_deducted:!!n.leave_type_id,override_reason:t.override_insufficient_balance?t.reason:null}).eq("id",t.request_id).select().single();if(d)throw d;return n.leave_type_id&&await $.rpc("deduct_leave_balance",{_employee_id:n.employee_id,_leave_type_id:n.leave_type_id,_hours:n.hours}),await _r.logLeaveAction("approve",t.request_id,r,i,{status:"approved",approved_by:l==null?void 0:l.display_name,override_reason:t.override_insufficient_balance?t.reason:null}),u}else if(t.action==="reject"){const{data:u,error:d}=await $.from("leave_requests").update({status:"rejected",decided_by_user_id:o==null?void 0:o.id,decided_at:c}).eq("id",t.request_id).select().single();if(d)throw d;return await _r.logLeaveAction("reject",t.request_id,r,i,{status:"rejected",reason:t.reason}),u}else if(t.action==="cancel"){n.status==="approved"&&n.balance_deducted&&n.leave_type_id&&await $.rpc("restore_leave_balance",{_employee_id:n.employee_id,_leave_type_id:n.leave_type_id,_hours:n.hours});const{data:u,error:d}=await $.from("leave_requests").update({status:"cancelled",cancelled_at:c,cancellation_reason:t.reason,balance_deducted:!1}).eq("id",t.request_id).select().single();if(d)throw d;return await _r.logLeaveAction("update",t.request_id,r,i,{status:"cancelled",cancellation_reason:t.reason}),u}throw new Error("Invalid action")}async createAdjustment(t,r){const{data:{user:n}}=await $.auth.getUser(),{data:a}=await $.from("profiles").select("display_name").eq("user_id",n==null?void 0:n.id).maybeSingle(),{data:i}=await $.from("leave_balances").select("balance_hours").eq("employee_id",t.employee_id).eq("leave_type_id",t.leave_type_id).maybeSingle(),o={balance_hours:(i==null?void 0:i.balance_hours)||0},{data:l,error:c}=await $.from("leave_adjustments").insert({organisation_id:r,employee_id:t.employee_id,leave_type_id:t.leave_type_id,adjustment_hours:t.adjustment_hours,reason:t.reason,adjusted_by_user_id:n==null?void 0:n.id,adjusted_by_name:(a==null?void 0:a.display_name)||(n==null?void 0:n.email),adjusted_by_email:n==null?void 0:n.email}).select().single();if(c)throw console.error("[LeaveService] Failed to create adjustment:",c),c;i?await $.from("leave_balances").update({balance_hours:i.balance_hours+t.adjustment_hours}).eq("employee_id",t.employee_id).eq("leave_type_id",t.leave_type_id):await $.from("leave_balances").insert({organisation_id:r,employee_id:t.employee_id,leave_type_id:t.leave_type_id,balance_hours:t.adjustment_hours});const u={balance_hours:((i==null?void 0:i.balance_hours)||0)+t.adjustment_hours};return await _r.log({action:"admin.override",entityType:"leave_request",entityId:l.id,organisationId:r,beforeState:o,afterState:{...u,adjustment_hours:t.adjustment_hours,reason:t.reason}}),l}async getAdjustments(t,r){let n=$.from("leave_adjustments").select(`
        *,
        leave_type:leave_types(id, name),
        employee:employees(id, first_name, last_name)
      `).eq("organisation_id",t).order("created_at",{ascending:!1});r&&(n=n.eq("employee_id",r));const{data:a,error:i}=await n;if(i)throw console.error("[LeaveService] Failed to fetch adjustments:",i),i;return a||[]}async runAccruals(t){const{data:r,error:n}=await $.rpc("run_leave_accruals",{_organisation_id:t});if(n)throw console.error("[LeaveService] Failed to run accruals:",n),n;return r}async initializeEmployeeBalances(t,r,n){const{data:a}=await $.from("leave_types").select("*").eq("organisation_id",t).eq("is_active",!0).contains("applicable_employment_types",[n]);if(!a||a.length===0)return;const i=a.map(o=>({organisation_id:t,employee_id:r,leave_type_id:o.id,balance_hours:0}));await $.from("leave_balances").upsert(i,{onConflict:"employee_id,leave_type_id"})}}const Ho=new aie;function sc(e,t){const r=ai(),{toast:n}=lr(),a=!e&&!(t!=null&&t.skipFallback),{data:i}=sr({queryKey:["organisation"],queryFn:async()=>{const{data:E}=await $.from("organisations").select("id").limit(1).single();return E},enabled:a}),o=e||(i==null?void 0:i.id),{data:l=[],isLoading:c}=sr({queryKey:["leaveTypes",o],queryFn:()=>Ho.getLeaveTypes(o),enabled:!!o}),{data:u=[],isLoading:d,refetch:f}=sr({queryKey:["leaveRequests",o],queryFn:()=>Ho.getLeaveRequests(o),enabled:!!o}),{data:h=[],isLoading:m,refetch:g}=sr({queryKey:["leaveBalances",o],queryFn:()=>Ho.getOrganisationBalances(o),enabled:!!o}),{data:p=[],isLoading:v}=sr({queryKey:["leaveAdjustments",o],queryFn:()=>Ho.getAdjustments(o),enabled:!!o}),x=Ht({mutationFn:async E=>{if(!o)throw new Error("No organisation ID");return Ho.createLeaveRequest(o,E.employeeId,E.leaveTypeId,E.startDate,E.endDate,E.hours,E.reason)},onSuccess:()=>{r.invalidateQueries({queryKey:["leaveRequests"]}),n({title:"Leave request submitted",description:"Your request is pending approval."})},onError:E=>{n({title:"Failed to submit request",description:E.message,variant:"destructive"})}}),b=Ht({mutationFn:async E=>{if(!o)throw new Error("No organisation ID");return Ho.processLeaveDecision(E,o)},onSuccess:E=>{r.invalidateQueries({queryKey:["leaveRequests"]}),r.invalidateQueries({queryKey:["leaveBalances"]}),n({title:`Leave request ${{approved:"approved",rejected:"rejected",cancelled:"cancelled"}[E.status]}`,description:E.status==="approved"?"Balance has been deducted.":E.status==="cancelled"?"Balance has been restored.":void 0})},onError:E=>{n({title:"Failed to process request",description:E.message,variant:"destructive"})}}),w=Ht({mutationFn:async E=>{if(!o)throw new Error("No organisation ID");return Ho.createAdjustment(E,o)},onSuccess:()=>{r.invalidateQueries({queryKey:["leaveBalances"]}),r.invalidateQueries({queryKey:["leaveAdjustments"]}),n({title:"Balance adjusted",description:"The adjustment has been recorded."})},onError:E=>{n({title:"Failed to adjust balance",description:E.message,variant:"destructive"})}}),_=Ht({mutationFn:async()=>{if(!o)throw new Error("No organisation ID");return Ho.runAccruals(o)},onSuccess:E=>{r.invalidateQueries({queryKey:["leaveBalances"]}),n({title:"Accruals processed",description:`${E} balance(s) updated.`})},onError:E=>{n({title:"Accrual failed",description:E.message,variant:"destructive"})}}),j={pending:u.filter(E=>E.status==="pending").length,approved:u.filter(E=>E.status==="approved").length,rejected:u.filter(E=>E.status==="rejected").length,cancelled:u.filter(E=>E.status==="cancelled").length};return{leaveTypes:l,leaveRequests:u,leaveBalances:h,adjustments:p,stats:j,organisationId:o,isLoading:c||d||m,leaveTypesLoading:c,requestsLoading:d,balancesLoading:m,adjustmentsLoading:v,getEmployeeBalances:E=>h.filter(C=>C.employee_id===E),getRequestsByStatus:E=>E==="all"?u:u.filter(C=>C.status===E),createRequest:x.mutate,processDecision:b.mutate,createAdjustment:w.mutate,runAccruals:_.mutate,isCreatingRequest:x.isPending,isProcessingDecision:b.isPending,isCreatingAdjustment:w.isPending,isRunningAccruals:_.isPending,refetchRequests:f,refetchBalances:g}}function $t({className:e,...t}){return s.jsx("div",{className:ae("animate-pulse rounded-md bg-muted",e),...t})}function iie({organisationId:e}){const t=ii(),{leaveRequests:r,processDecision:n,isProcessingDecision:a,isLoading:i}=sc(e,{skipFallback:!0}),o=r.filter(u=>u.status==="pending").slice(0,5),l=u=>{n({request_id:u,action:"approve"})},c=u=>{n({request_id:u,action:"reject"})};return i?s.jsxs(G,{className:"h-full",children:[s.jsx(he,{className:"flex flex-row items-center justify-between pb-2",children:s.jsx(ge,{className:"text-lg font-semibold",children:"Leave Requests"})}),s.jsx(X,{children:s.jsx("div",{className:"space-y-4",children:[1,2,3].map(u=>s.jsx($t,{className:"h-20 w-full"},u))})})]}):s.jsxs(G,{className:"h-full",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between pb-2",children:[s.jsx(ge,{className:"text-lg font-semibold",children:"Leave Requests"}),s.jsxs(I,{variant:"ghost",size:"sm",className:"text-primary",onClick:()=>t("/leave"),children:["View All",s.jsx(Oo,{className:"ml-1 h-4 w-4"})]})]}),s.jsx(X,{children:o.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Vt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No pending leave requests"})]}):s.jsx("div",{className:"space-y-4",children:o.map(u=>{var f;const d=u.employee;return d?s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border bg-card hover:bg-muted/30 transition-colors",children:[s.jsx(Or,{className:"h-10 w-10 flex-shrink-0",children:s.jsxs(Tr,{className:"bg-primary/10 text-primary text-sm",children:[d.first_name[0],d.last_name[0]]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("p",{className:"text-sm font-medium",children:[d.first_name," ",d.last_name]}),s.jsx(jh,{status:u.status,size:"sm",showIcon:!1})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:((f=u.leave_type)==null?void 0:f.name)||u.type}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[de(On(u.start_date),"MMM d")," -"," ",de(On(u.end_date),"MMM d, yyyy"),s.jsx("span",{className:"mx-1.5",children:""}),u.hours," hours"]}),u.reason&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1 italic",children:['"',u.reason,'"']})]}),s.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[s.jsx(I,{size:"icon",variant:"ghost",className:"h-8 w-8 text-success hover:text-success hover:bg-success/10",onClick:()=>l(u.id),disabled:a,children:s.jsx(dh,{className:"h-4 w-4"})}),s.jsx(I,{size:"icon",variant:"ghost",className:"h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>c(u.id),disabled:a,children:s.jsx(Fn,{className:"h-4 w-4"})})]})]},u.id):null})})})]})}const oie=[{label:"Add Employee",icon:gu,description:"Onboard a new team member",variant:"primary",path:"/employees"},{label:"Submit Timesheet",icon:xt,description:"Log hours for approval",variant:"secondary",path:"/payroll"},{label:"Request Leave",icon:Vt,description:"Submit a leave request",variant:"secondary",path:"/leave"},{label:"Upload Document",icon:jo,description:"Add compliance documents",variant:"secondary",path:"/documents"},{label:"Send Invite",icon:wo,description:"Invite staff to portal",variant:"secondary",path:"/settings"},{label:"Generate Report",icon:gt,description:"Create HR reports",variant:"secondary",path:"/audit-exports"}];function lie(){const e=ii(),t=r=>{e(r)};return s.jsxs(G,{children:[s.jsx(he,{className:"pb-3",children:s.jsx(ge,{className:"text-lg font-semibold",children:"Quick Actions"})}),s.jsx(X,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:oie.map(r=>s.jsxs(I,{variant:r.variant==="primary"?"default":"outline",className:ae("h-auto flex-col gap-2 py-4 px-3",r.variant==="primary"?"gradient-primary hover:opacity-90":"hover:bg-muted/50"),onClick:()=>t(r.path),children:[s.jsx(r.icon,{className:"h-5 w-5"}),s.jsx("span",{className:"text-xs font-medium",children:r.label})]},r.label))})})]})}function _h(){const{user:e}=nc(),[t,r]=y.useState(null),[n,a]=y.useState(null),[i,o]=y.useState(!0);y.useEffect(()=>{e?l():(r(null),a(null),o(!1))},[e]);const l=async()=>{var g;if(e){o(!0);try{const[p,v]=await Promise.all([$.from("user_roles").select("role").eq("user_id",e.id).maybeSingle(),$.rpc("get_platform_role",{_user_id:e.id})]);p.error?(console.error("Error fetching user role:",p.error),r("employee")):r(((g=p.data)==null?void 0:g.role)||"employee"),v.error?((v.error.message||"").toLowerCase().includes("not found")||console.error("Error fetching platform role:",v.error),a(null)):a(v.data)}catch(p){console.error("Error fetching user roles:",p),r("employee"),a(null)}finally{o(!1)}}};return{currentUserRole:t,platformRole:n,loading:i,isAdmin:t==="admin",isManager:t==="manager"||t==="admin",isEmployee:t==="employee",isPlatformUser:!!n,isPlatformAdmin:n==="admin"||n==="owner",hasPermission:g=>{if(!t)return!1;const p={admin:3,manager:2,employee:1};return p[t]>=p[g]},refetch:l}}function cie(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),a=async()=>{n(!0);try{const{data:l,error:c}=await $.from("user_roles").select("id, user_id, role, created_at");if(c)throw c;const u=(l==null?void 0:l.map(m=>m.user_id))||[];if(u.length===0){t([]),n(!1);return}const{data:d,error:f}=await $.from("profiles").select("user_id, display_name").in("user_id",u);if(f)throw f;const h=l.map(m=>{const g=d==null?void 0:d.find(p=>p.user_id===m.user_id);return{id:m.id,user_id:m.user_id,email:(g==null?void 0:g.display_name)||"Unknown",display_name:g==null?void 0:g.display_name,role:m.role,created_at:m.created_at}});t(h)}catch(l){console.error("Error fetching users with roles:",l)}finally{n(!1)}},i=async(l,c)=>{try{const{error:u}=await $.from("user_roles").update({role:c}).eq("user_id",l);if(u)throw u;return await a(),{success:!0}}catch(u){return console.error("Error updating user role:",u),{success:!1,error:u}}},o=async l=>{try{const{error:c}=await $.from("user_roles").delete().eq("user_id",l);if(c)throw c;return await a(),{success:!0}}catch(c){return console.error("Error deleting user role:",c),{success:!1,error:c}}};return y.useEffect(()=>{a()},[]),{users:e,loading:r,fetchUsersWithRoles:a,updateUserRole:i,deleteUserRole:o}}function TU(e){const r=(typeof e=="string"?e:(e&&"message"in e?e.message:"")||"").toLowerCase();return r.includes("permission denied")||r.includes("not authorized")||r.includes("not authorised")||r.includes("access denied")||r.includes("violates row-level security")||r.includes("rls")}function vs(e){return`You don't have access to ${e}. Please contact your Organisation Administrator.`}function uie(e,t,r){return(typeof e=="string"?e:(e&&"message"in e?e.message:"")||"")||t}function die(){const{user:e}=nc(),{isAdmin:t,isEmployee:r,isPlatformAdmin:n,loading:a}=_h(),[i,o]=y.useState(null),[l,c]=y.useState(""),[u,d]=y.useState("there"),[f,h]=y.useState(!0);y.useEffect(()=>{var E,C;if(!e)return;const S=((E=e.user_metadata)==null?void 0:E.display_name)||((C=e.email)==null?void 0:C.split("@")[0])||"there";d(S)},[e]),y.useEffect(()=>{(async()=>{if(!e){o(null),c(""),h(!1);return}h(!0);const{data:E,error:C}=await $.rpc("get_user_organisation_id",{_user_id:e.id});if(C||!E){o(null),c(""),h(!1);return}o(E);const{data:P}=await $.from("organisations").select("legal_name, trading_name").eq("id",E).maybeSingle(),A=(P==null?void 0:P.trading_name)||(P==null?void 0:P.legal_name)||"";c(A),h(!1)})()},[e]);const{employees:m,activeEmployees:g,certifications:p,getCertificationsForEmployee:v,isLoading:x}=xa(i??void 0,{skipFallback:!0}),{stats:b,isLoading:w}=sc(i??void 0,{skipFallback:!0}),_=y.useMemo(()=>{if(!i)return{alerts:0,compliantEmployees:0,totalEmployees:0,percent:100,needsAttention:0};const S=new Set(g.map(R=>R.id)),C=p.filter(R=>S.has(R.employee_id)).filter(R=>R.status==="expired"||R.status==="expiring").length,P=g.filter(R=>v(R.id).some(B=>B.status==="expired"||B.status==="expiring")).length,A=g.length,k=Math.max(A-P,0),D=A===0?100:Math.round(k/A*100);return{alerts:C,compliantEmployees:k,totalEmployees:A,percent:D,needsAttention:P}},[g,p,v,i]),j=a||f||x||w,N=!!i;return j?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(xt,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome back, ",u]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:N&&l?`Here's what's happening at ${l} today.`:"Select an organisation to view your dashboard."})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:new Date().toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]}),N?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Ut,{title:"Total Employees",value:m.length,description:"All team members",icon:Ar,variant:"default"}),s.jsx(Ut,{title:"Active Employees",value:g.length,description:"Currently active",icon:xt,variant:"success"}),s.jsx(Ut,{title:"Pending Leave",value:b.pending,description:"Awaiting approval",icon:Vt,variant:"info"}),s.jsx(Ut,{title:"Compliance Alerts",value:_.alerts,description:"Require attention",icon:or,variant:_.alerts>0?"warning":"success"})]}),s.jsx(lie,{}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsx(Qae,{organisationId:i??void 0})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx(iie,{organisationId:i??void 0})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx(nie,{organisationId:i??void 0})})]}),s.jsx("div",{className:"bg-card rounded-xl border border-border p-5",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-success/10",children:s.jsx(bf,{className:"h-5 w-5 text-success"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Team Compliance Overview"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[_.compliantEmployees," of"," ",_.totalEmployees," employees fully compliant"]})]})]}),s.jsxs("div",{className:"flex-1 max-w-md",children:[s.jsx("div",{className:"compliance-bar",children:s.jsx("div",{className:"compliance-bar-fill bg-success",style:{width:`${_.percent}%`}})}),s.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[s.jsxs("span",{children:[_.percent,"% Compliant"]}),s.jsxs("span",{children:[_.needsAttention," need attention"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Gs,{className:"h-4 w-4 text-success"}),s.jsx("span",{className:"text-success font-medium",children:"On track"}),s.jsx("span",{className:"text-muted-foreground",children:"this month"})]})]})})]}):s.jsx(G,{children:s.jsxs(X,{className:"py-12 text-center text-muted-foreground",children:[s.jsx(Mc,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm",children:n?"Select an organisation in Settings to view metrics.":"Youre not assigned to an organisation yet."}),s.jsx("div",{className:"mt-4 flex items-center justify-center gap-2",children:t||n?s.jsx(I,{asChild:!0,size:"sm",children:s.jsx(yn,{to:"/settings",children:"Go to Settings"})}):r?s.jsx("span",{className:"text-xs text-muted-foreground",children:vs("this dashboard")}):null})]})})]})}const fie=()=>{const{user:e,loading:t}=nc(),r=ii();return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):e?s.jsx(OU,{children:s.jsx(die,{})}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b border-border",children:s.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-primary",children:"SocialPlus HR"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(I,{variant:"ghost",onClick:()=>r("/auth"),children:"Log in"}),s.jsx(I,{onClick:()=>r("/auth"),children:"Get Started"})]})]})}),s.jsxs("section",{className:"container mx-auto px-4 py-20 text-center",children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Human Resource Management",s.jsx("br",{}),s.jsx("span",{className:"text-primary",children:"Made Simple"})]}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto mb-8",children:"Streamline your HR operations with our comprehensive HRMS solution. Manage employees, track compliance, handle contracts, and more."}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx(I,{size:"lg",onClick:()=>r("/auth"),children:"Start Free Trial"}),s.jsx(I,{size:"lg",variant:"outline",children:"Learn More"})]})]}),s.jsxs("section",{className:"container mx-auto px-4 py-20",children:[s.jsx("h3",{className:"text-2xl font-bold text-center mb-12",children:"Everything you need to manage your workforce"}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"p-6 rounded-lg border border-border bg-card",children:[s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg w-fit mb-4",children:s.jsx(Ar,{className:"h-6 w-6 text-primary"})}),s.jsx("h4",{className:"font-semibold mb-2",children:"Employee Management"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Centralize employee data, track onboarding, and manage your entire workforce."})]}),s.jsxs("div",{className:"p-6 rounded-lg border border-border bg-card",children:[s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg w-fit mb-4",children:s.jsx(ln,{className:"h-6 w-6 text-primary"})}),s.jsx("h4",{className:"font-semibold mb-2",children:"Compliance Tracking"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay compliant with automated document tracking and expiry alerts."})]}),s.jsxs("div",{className:"p-6 rounded-lg border border-border bg-card",children:[s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg w-fit mb-4",children:s.jsx(gt,{className:"h-6 w-6 text-primary"})}),s.jsx("h4",{className:"font-semibold mb-2",children:"Digital Contracts"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Create, send, and sign employment contracts with e-signature support."})]}),s.jsxs("div",{className:"p-6 rounded-lg border border-border bg-card",children:[s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg w-fit mb-4",children:s.jsx(xt,{className:"h-6 w-6 text-primary"})}),s.jsx("h4",{className:"font-semibold mb-2",children:"Time & Attendance"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Track hours, manage leave requests, and process payroll seamlessly."})]})]})]}),s.jsx("section",{className:"container mx-auto px-4 py-20",children:s.jsxs("div",{className:"bg-primary rounded-2xl p-12 text-center",children:[s.jsx("h3",{className:"text-3xl font-bold text-primary-foreground mb-4",children:"Ready to get started?"}),s.jsx("p",{className:"text-primary-foreground/80 mb-8 max-w-xl mx-auto",children:"Join thousands of organizations already using SocialPlus HR to manage their workforce effectively."}),s.jsx(I,{size:"lg",variant:"secondary",onClick:()=>r("/auth"),children:"Create Your Account"})]})}),s.jsx("footer",{className:"border-t border-border py-8",children:s.jsx("div",{className:"container mx-auto px-4 text-center text-sm text-muted-foreground",children:" 2024 SocialPlus. All rights reserved."})})]})};var zt;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(zt||(zt={}));var nT;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(nT||(nT={}));const $e=zt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zo=e=>{switch(typeof e){case"undefined":return $e.undefined;case"string":return $e.string;case"number":return Number.isNaN(e)?$e.nan:$e.number;case"boolean":return $e.boolean;case"function":return $e.function;case"bigint":return $e.bigint;case"symbol":return $e.symbol;case"object":return Array.isArray(e)?$e.array:e===null?$e.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?$e.promise:typeof Map<"u"&&e instanceof Map?$e.map:typeof Set<"u"&&e instanceof Set?$e.set:typeof Date<"u"&&e instanceof Date?$e.date:$e.object;default:return $e.unknown}},we=zt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class So extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return a(this),n}static assert(t){if(!(t instanceof So))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,zt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}So.create=e=>new So(e);const D1=(e,t)=>{let r;switch(e.code){case we.invalid_type:e.received===$e.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case we.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,zt.jsonStringifyReplacer)}`;break;case we.unrecognized_keys:r=`Unrecognized key(s) in object: ${zt.joinValues(e.keys,", ")}`;break;case we.invalid_union:r="Invalid input";break;case we.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${zt.joinValues(e.options)}`;break;case we.invalid_enum_value:r=`Invalid enum value. Expected ${zt.joinValues(e.options)}, received '${e.received}'`;break;case we.invalid_arguments:r="Invalid function arguments";break;case we.invalid_return_type:r="Invalid function return type";break;case we.invalid_date:r="Invalid date";break;case we.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:zt.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case we.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case we.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case we.custom:r="Invalid input";break;case we.invalid_intersection_types:r="Intersection results could not be merged";break;case we.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case we.not_finite:r="Number must be finite";break;default:r=t.defaultError,zt.assertNever(e)}return{message:r}};let hie=D1;function mie(){return hie}const pie=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function Oe(e,t){const r=mie(),n=pie({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===D1?void 0:D1].filter(a=>!!a)});e.common.issues.push(n)}class Ys{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return ct;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return Ys.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return ct;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const ct=Object.freeze({status:"aborted"}),Tm=e=>({status:"dirty",value:e}),ba=e=>({status:"valid",value:e}),sT=e=>e.status==="aborted",aT=e=>e.status==="dirty",Ef=e=>e.status==="valid",Dx=e=>typeof Promise<"u"&&e instanceof Promise;var Ue;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ue||(Ue={}));class Yl{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const iT=(e,t)=>{if(Ef(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new So(e.common.issues);return this._error=r,this._error}}};function bt(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class Bt{get description(){return this._def.description}_getType(t){return Zo(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Zo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ys,ctx:{common:t.parent.common,data:t.data,parsedType:Zo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Dx(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zo(t)},a=this._parseSync({data:t,path:n.path,parent:n});return iT(n,a)}"~validate"(t){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zo(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return Ef(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>Ef(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zo(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(Dx(a)?a:Promise.resolve(a));return iT(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:we.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Af({schema:this,typeName:ut.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return $l.create(this,this._def)}nullable(){return Of.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _i.create(this)}promise(){return Ix.create(this,this._def)}or(t){return Mx.create([this,t],this._def)}and(t){return $x.create(this,t,this._def)}transform(t){return new Af({...bt(this._def),schema:this,typeName:ut.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new $1({...bt(this._def),innerType:this,defaultValue:r,typeName:ut.ZodDefault})}brand(){return new Lie({typeName:ut.ZodBranded,type:this,...bt(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new I1({...bt(this._def),innerType:this,catchValue:r,typeName:ut.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return ck.create(this,t)}readonly(){return L1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const gie=/^c[^\s-]{8,}$/i,vie=/^[0-9a-z]+$/,yie=/^[0-9A-HJKMNP-TV-Z]{26}$/i,xie=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,bie=/^[a-z0-9_-]{21}$/i,wie=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,jie=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_ie=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Nie="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let d_;const Sie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Cie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Eie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,kie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Pie=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Aie=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,DU="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Oie=new RegExp(`^${DU}$`);function RU(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function Tie(e){return new RegExp(`^${RU(e)}$`)}function Die(e){let t=`${DU}T${RU(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Rie(e,t){return!!((t==="v4"||!t)&&Sie.test(e)||(t==="v6"||!t)&&Eie.test(e))}function Mie(e,t){if(!wie.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function $ie(e,t){return!!((t==="v4"||!t)&&Cie.test(e)||(t==="v6"||!t)&&kie.test(e))}class oo extends Bt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==$e.string){const i=this._getOrReturnCtx(t);return Oe(i,{code:we.invalid_type,expected:$e.string,received:i.parsedType}),ct}const n=new Ys;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Oe(a,{code:we.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Oe(a,{code:we.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?Oe(a,{code:we.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Oe(a,{code:we.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")_ie.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"email",code:we.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")d_||(d_=new RegExp(Nie,"u")),d_.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"emoji",code:we.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")xie.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"uuid",code:we.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")bie.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"nanoid",code:we.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")gie.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"cuid",code:we.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")vie.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"cuid2",code:we.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")yie.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"ulid",code:we.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Oe(a,{validation:"url",code:we.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"regex",code:we.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:we.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:we.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:we.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Die(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:we.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Oie.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:we.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?Tie(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{code:we.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?jie.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"duration",code:we.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Rie(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"ip",code:we.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?Mie(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"jwt",code:we.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?$ie(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"cidr",code:we.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?Pie.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"base64",code:we.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?Aie.test(t.data)||(a=this._getOrReturnCtx(t,a),Oe(a,{validation:"base64url",code:we.invalid_string,message:i.message}),n.dirty()):zt.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:we.invalid_string,...Ue.errToObj(n)})}_addCheck(t){return new oo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ue.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ue.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ue.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ue.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ue.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ue.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ue.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ue.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ue.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ue.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ue.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ue.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ue.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Ue.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ue.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ue.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Ue.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Ue.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Ue.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Ue.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Ue.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Ue.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Ue.errToObj(r)})}nonempty(t){return this.min(1,Ue.errToObj(t))}trim(){return new oo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new oo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new oo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}oo.create=e=>new oo({checks:[],typeName:ut.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...bt(e)});function Iie(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class wu extends Bt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==$e.number){const i=this._getOrReturnCtx(t);return Oe(i,{code:we.invalid_type,expected:$e.number,received:i.parsedType}),ct}let n;const a=new Ys;for(const i of this._def.checks)i.kind==="int"?zt.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Oe(n,{code:we.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Oe(n,{code:we.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Oe(n,{code:we.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?Iie(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),Oe(n,{code:we.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Oe(n,{code:we.not_finite,message:i.message}),a.dirty()):zt.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ue.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ue.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ue.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ue.toString(r))}setLimit(t,r,n,a){return new wu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ue.toString(a)}]})}_addCheck(t){return new wu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ue.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ue.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ue.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ue.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ue.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ue.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Ue.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ue.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ue.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&zt.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}wu.create=e=>new wu({checks:[],typeName:ut.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...bt(e)});class ju extends Bt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==$e.bigint)return this._getInvalidInput(t);let n;const a=new Ys;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Oe(n,{code:we.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Oe(n,{code:we.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Oe(n,{code:we.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):zt.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Oe(r,{code:we.invalid_type,expected:$e.bigint,received:r.parsedType}),ct}gte(t,r){return this.setLimit("min",t,!0,Ue.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ue.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ue.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ue.toString(r))}setLimit(t,r,n,a){return new ju({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ue.toString(a)}]})}_addCheck(t){return new ju({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ue.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ue.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ue.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ue.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ue.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}ju.create=e=>new ju({checks:[],typeName:ut.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...bt(e)});class Rx extends Bt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==$e.boolean){const n=this._getOrReturnCtx(t);return Oe(n,{code:we.invalid_type,expected:$e.boolean,received:n.parsedType}),ct}return ba(t.data)}}Rx.create=e=>new Rx({typeName:ut.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...bt(e)});class kf extends Bt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==$e.date){const i=this._getOrReturnCtx(t);return Oe(i,{code:we.invalid_type,expected:$e.date,received:i.parsedType}),ct}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Oe(i,{code:we.invalid_date}),ct}const n=new Ys;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Oe(a,{code:we.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Oe(a,{code:we.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):zt.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new kf({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Ue.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Ue.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}kf.create=e=>new kf({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ut.ZodDate,...bt(e)});class oT extends Bt{_parse(t){if(this._getType(t)!==$e.symbol){const n=this._getOrReturnCtx(t);return Oe(n,{code:we.invalid_type,expected:$e.symbol,received:n.parsedType}),ct}return ba(t.data)}}oT.create=e=>new oT({typeName:ut.ZodSymbol,...bt(e)});class lT extends Bt{_parse(t){if(this._getType(t)!==$e.undefined){const n=this._getOrReturnCtx(t);return Oe(n,{code:we.invalid_type,expected:$e.undefined,received:n.parsedType}),ct}return ba(t.data)}}lT.create=e=>new lT({typeName:ut.ZodUndefined,...bt(e)});class cT extends Bt{_parse(t){if(this._getType(t)!==$e.null){const n=this._getOrReturnCtx(t);return Oe(n,{code:we.invalid_type,expected:$e.null,received:n.parsedType}),ct}return ba(t.data)}}cT.create=e=>new cT({typeName:ut.ZodNull,...bt(e)});class uT extends Bt{constructor(){super(...arguments),this._any=!0}_parse(t){return ba(t.data)}}uT.create=e=>new uT({typeName:ut.ZodAny,...bt(e)});class dT extends Bt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ba(t.data)}}dT.create=e=>new dT({typeName:ut.ZodUnknown,...bt(e)});class Xl extends Bt{_parse(t){const r=this._getOrReturnCtx(t);return Oe(r,{code:we.invalid_type,expected:$e.never,received:r.parsedType}),ct}}Xl.create=e=>new Xl({typeName:ut.ZodNever,...bt(e)});class fT extends Bt{_parse(t){if(this._getType(t)!==$e.undefined){const n=this._getOrReturnCtx(t);return Oe(n,{code:we.invalid_type,expected:$e.void,received:n.parsedType}),ct}return ba(t.data)}}fT.create=e=>new fT({typeName:ut.ZodVoid,...bt(e)});class _i extends Bt{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==$e.array)return Oe(r,{code:we.invalid_type,expected:$e.array,received:r.parsedType}),ct;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(Oe(r,{code:o?we.too_big:we.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(Oe(r,{code:we.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(Oe(r,{code:we.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new Yl(r,o,r.path,l)))).then(o=>Ys.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new Yl(r,o,r.path,l)));return Ys.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new _i({...this._def,minLength:{value:t,message:Ue.toString(r)}})}max(t,r){return new _i({...this._def,maxLength:{value:t,message:Ue.toString(r)}})}length(t,r){return new _i({...this._def,exactLength:{value:t,message:Ue.toString(r)}})}nonempty(t){return this.min(1,t)}}_i.create=(e,t)=>new _i({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ut.ZodArray,...bt(t)});function vd(e){if(e instanceof Mr){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=$l.create(vd(n))}return new Mr({...e._def,shape:()=>t})}else return e instanceof _i?new _i({...e._def,type:vd(e.element)}):e instanceof $l?$l.create(vd(e.unwrap())):e instanceof Of?Of.create(vd(e.unwrap())):e instanceof _u?_u.create(e.items.map(t=>vd(t))):e}class Mr extends Bt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=zt.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==$e.object){const u=this._getOrReturnCtx(t);return Oe(u,{code:we.invalid_type,expected:$e.object,received:u.parsedType}),ct}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Xl&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=i[u],f=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Yl(a,f,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Xl){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")l.length>0&&(Oe(a,{code:we.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Yl(a,f,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>Ys.mergeObjectSync(n,u)):Ys.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return Ue.errToObj,new Mr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:Ue.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Mr({...this._def,unknownKeys:"strip"})}passthrough(){return new Mr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Mr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Mr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ut.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Mr({...this._def,catchall:t})}pick(t){const r={};for(const n of zt.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Mr({...this._def,shape:()=>r})}omit(t){const r={};for(const n of zt.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new Mr({...this._def,shape:()=>r})}deepPartial(){return vd(this)}partial(t){const r={};for(const n of zt.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new Mr({...this._def,shape:()=>r})}required(t){const r={};for(const n of zt.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof $l;)i=i._def.innerType;r[n]=i}return new Mr({...this._def,shape:()=>r})}keyof(){return MU(zt.objectKeys(this.shape))}}Mr.create=(e,t)=>new Mr({shape:()=>e,unknownKeys:"strip",catchall:Xl.create(),typeName:ut.ZodObject,...bt(t)});Mr.strictCreate=(e,t)=>new Mr({shape:()=>e,unknownKeys:"strict",catchall:Xl.create(),typeName:ut.ZodObject,...bt(t)});Mr.lazycreate=(e,t)=>new Mr({shape:e,unknownKeys:"strip",catchall:Xl.create(),typeName:ut.ZodObject,...bt(t)});class Mx extends Bt{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new So(l.ctx.common.issues));return Oe(r,{code:we.invalid_union,unionErrors:o}),ct}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new So(c));return Oe(r,{code:we.invalid_union,unionErrors:l}),ct}}get options(){return this._def.options}}Mx.create=(e,t)=>new Mx({options:e,typeName:ut.ZodUnion,...bt(t)});function R1(e,t){const r=Zo(e),n=Zo(t);if(e===t)return{valid:!0,data:e};if(r===$e.object&&n===$e.object){const a=zt.objectKeys(t),i=zt.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=R1(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===$e.array&&n===$e.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=R1(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===$e.date&&n===$e.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class $x extends Bt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(sT(i)||sT(o))return ct;const l=R1(i.value,o.value);return l.valid?((aT(i)||aT(o))&&r.dirty(),{status:r.value,value:l.data}):(Oe(n,{code:we.invalid_intersection_types}),ct)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}$x.create=(e,t,r)=>new $x({left:e,right:t,typeName:ut.ZodIntersection,...bt(r)});class _u extends Bt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==$e.array)return Oe(n,{code:we.invalid_type,expected:$e.array,received:n.parsedType}),ct;if(n.data.length<this._def.items.length)return Oe(n,{code:we.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ct;!this._def.rest&&n.data.length>this._def.items.length&&(Oe(n,{code:we.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Yl(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Ys.mergeArray(r,o)):Ys.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new _u({...this._def,rest:t})}}_u.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _u({items:e,typeName:ut.ZodTuple,rest:null,...bt(t)})};class hT extends Bt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==$e.map)return Oe(n,{code:we.invalid_type,expected:$e.map,received:n.parsedType}),ct;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:a._parse(new Yl(n,l,n.path,[u,"key"])),value:i._parse(new Yl(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return ct;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return ct;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}hT.create=(e,t,r)=>new hT({valueType:t,keyType:e,typeName:ut.ZodMap,...bt(r)});class Bp extends Bt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==$e.set)return Oe(n,{code:we.invalid_type,expected:$e.set,received:n.parsedType}),ct;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(Oe(n,{code:we.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(Oe(n,{code:we.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return ct;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>i._parse(new Yl(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new Bp({...this._def,minSize:{value:t,message:Ue.toString(r)}})}max(t,r){return new Bp({...this._def,maxSize:{value:t,message:Ue.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Bp.create=(e,t)=>new Bp({valueType:e,minSize:null,maxSize:null,typeName:ut.ZodSet,...bt(t)});class mT extends Bt{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}mT.create=(e,t)=>new mT({getter:e,typeName:ut.ZodLazy,...bt(t)});class M1 extends Bt{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Oe(r,{received:r.data,code:we.invalid_literal,expected:this._def.value}),ct}return{status:"valid",value:t.data}}get value(){return this._def.value}}M1.create=(e,t)=>new M1({value:e,typeName:ut.ZodLiteral,...bt(t)});function MU(e,t){return new Pf({values:e,typeName:ut.ZodEnum,...bt(t)})}class Pf extends Bt{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Oe(r,{expected:zt.joinValues(n),received:r.parsedType,code:we.invalid_type}),ct}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Oe(r,{received:r.data,code:we.invalid_enum_value,options:n}),ct}return ba(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Pf.create(t,{...this._def,...r})}exclude(t,r=this._def){return Pf.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Pf.create=MU;class pT extends Bt{_parse(t){const r=zt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==$e.string&&n.parsedType!==$e.number){const a=zt.objectValues(r);return Oe(n,{expected:zt.joinValues(a),received:n.parsedType,code:we.invalid_type}),ct}if(this._cache||(this._cache=new Set(zt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=zt.objectValues(r);return Oe(n,{received:n.data,code:we.invalid_enum_value,options:a}),ct}return ba(t.data)}get enum(){return this._def.values}}pT.create=(e,t)=>new pT({values:e,typeName:ut.ZodNativeEnum,...bt(t)});class Ix extends Bt{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==$e.promise&&r.common.async===!1)return Oe(r,{code:we.invalid_type,expected:$e.promise,received:r.parsedType}),ct;const n=r.parsedType===$e.promise?r.data:Promise.resolve(r.data);return ba(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Ix.create=(e,t)=>new Ix({type:e,typeName:ut.ZodPromise,...bt(t)});class Af extends Bt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ut.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Oe(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return ct;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?ct:c.status==="dirty"||r.value==="dirty"?Tm(c.value):c});{if(r.value==="aborted")return ct;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?ct:l.status==="dirty"||r.value==="dirty"?Tm(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ct:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ct:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ef(o))return ct;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Ef(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):ct);zt.assertNever(a)}}Af.create=(e,t,r)=>new Af({schema:e,typeName:ut.ZodEffects,effect:t,...bt(r)});Af.createWithPreprocess=(e,t,r)=>new Af({schema:t,effect:{type:"preprocess",transform:e},typeName:ut.ZodEffects,...bt(r)});class $l extends Bt{_parse(t){return this._getType(t)===$e.undefined?ba(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}$l.create=(e,t)=>new $l({innerType:e,typeName:ut.ZodOptional,...bt(t)});class Of extends Bt{_parse(t){return this._getType(t)===$e.null?ba(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Of.create=(e,t)=>new Of({innerType:e,typeName:ut.ZodNullable,...bt(t)});class $1 extends Bt{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===$e.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}$1.create=(e,t)=>new $1({innerType:e,typeName:ut.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...bt(t)});class I1 extends Bt{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Dx(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new So(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new So(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}I1.create=(e,t)=>new I1({innerType:e,typeName:ut.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...bt(t)});class gT extends Bt{_parse(t){if(this._getType(t)!==$e.nan){const n=this._getOrReturnCtx(t);return Oe(n,{code:we.invalid_type,expected:$e.nan,received:n.parsedType}),ct}return{status:"valid",value:t.data}}}gT.create=e=>new gT({typeName:ut.ZodNaN,...bt(e)});class Lie extends Bt{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ck extends Bt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ct:i.status==="dirty"?(r.dirty(),Tm(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?ct:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new ck({in:t,out:r,typeName:ut.ZodPipeline})}}class L1 extends Bt{_parse(t){const r=this._def.innerType._parse(t),n=a=>(Ef(a)&&(a.value=Object.freeze(a.value)),a);return Dx(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}L1.create=(e,t)=>new L1({innerType:e,typeName:ut.ZodReadonly,...bt(t)});Mr.lazycreate;var ut;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ut||(ut={}));const Je=oo.create,$U=wu.create;ju.create;const Lx=Rx.create,Nu=kf.create;Xl.create;_i.create;const ks=Mr.create;Mr.strictCreate;Mx.create;$x.create;_u.create;const Ic=M1.create,Vu=Pf.create;Ix.create;$l.create;Of.create;const IU={string:e=>oo.create({...e,coerce:!0}),number:e=>wu.create({...e,coerce:!0}),boolean:e=>Rx.create({...e,coerce:!0}),bigint:e=>ju.create({...e,coerce:!0}),date:e=>kf.create({...e,coerce:!0})};var Xg=e=>e.type==="checkbox",Lc=e=>e instanceof Date,Qn=e=>e==null;const LU=e=>typeof e=="object";var zr=e=>!Qn(e)&&!Array.isArray(e)&&LU(e)&&!Lc(e),FU=e=>zr(e)&&e.target?Xg(e.target)?e.target.checked:e.target.value:e,Fie=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,UU=(e,t)=>e.has(Fie(t)),Uie=e=>{const t=e.constructor&&e.constructor.prototype;return zr(t)&&t.hasOwnProperty("isPrototypeOf")},uk=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function rn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(uk&&(e instanceof Blob||n))&&(r||zr(e)))if(t=r?[]:{},!r&&!Uie(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=rn(e[a]));else return e;return t}var F0=e=>/^\w*$/.test(e),Fr=e=>e===void 0,dk=e=>Array.isArray(e)?e.filter(Boolean):[],fk=e=>dk(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ce=(e,t,r)=>{if(!t||!zr(e))return r;const n=(F0(t)?[t]:fk(t)).reduce((a,i)=>Qn(a)?a:a[i],e);return Fr(n)||n===e?Fr(e[t])?r:e[t]:n},Is=e=>typeof e=="boolean",Zt=(e,t,r)=>{let n=-1;const a=F0(t)?[t]:fk(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=zr(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Fx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ba={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ki={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},hk=O.createContext(null);hk.displayName="HookFormContext";const U0=()=>O.useContext(hk),Bie=e=>{const{children:t,...r}=e;return O.createElement(hk.Provider,{value:r},t)};var BU=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Ba.all&&(t._proxyFormState[o]=!n||Ba.all),r&&(r[o]=!0),e[o]}});return a};const mk=typeof window<"u"?O.useLayoutEffect:O.useEffect;function zie(e){const t=U0(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[o,l]=O.useState(r._formState),c=O.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return mk(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:u=>{!n&&l({...r._formState,...u})}}),[a,n,i]),O.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),O.useMemo(()=>BU(o,r,c.current,!1),[o,r])}var yi=e=>typeof e=="string",zU=(e,t,r,n,a)=>yi(e)?(n&&t.watch.add(e),Ce(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Ce(r,i))):(n&&(t.watchAll=!0),r),F1=e=>Qn(e)||!LU(e);function no(e,t,r=new WeakSet){if(F1(e)||F1(t))return e===t;if(Lc(e)&&Lc(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=t[i];if(Lc(o)&&Lc(l)||zr(o)&&zr(l)||Array.isArray(o)&&Array.isArray(l)?!no(o,l,r):o!==l)return!1}}return!0}function Vie(e){const t=U0(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:o,compute:l}=e||{},c=O.useRef(a),u=O.useRef(l),d=O.useRef(void 0);u.current=l;const f=O.useMemo(()=>r._getWatch(n,c.current),[r,n]),[h,m]=O.useState(u.current?u.current(f):f);return mk(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:g=>{if(!i){const p=zU(n,r._names,g.values||r._formValues,!1,c.current);if(u.current){const v=u.current(p);no(v,d.current)||(m(v),d.current=v)}else m(p)}}}),[r,i,n,o]),O.useEffect(()=>r._removeUnmounted()),h}function qie(e){const t=U0(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i,defaultValue:o}=e,l=UU(a._names.array,r),c=O.useMemo(()=>Ce(a._formValues,r,Ce(a._defaultValues,r,o)),[a,r,o]),u=Vie({control:a,name:r,defaultValue:c,exact:!0}),d=zie({control:a,name:r,exact:!0}),f=O.useRef(e),h=O.useRef(a.register(r,{...e.rules,value:u,...Is(e.disabled)?{disabled:e.disabled}:{}}));f.current=e;const m=O.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ce(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ce(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ce(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ce(d.validatingFields,r)},error:{enumerable:!0,get:()=>Ce(d.errors,r)}}),[d,r]),g=O.useCallback(b=>h.current.onChange({target:{value:FU(b),name:r},type:Fx.CHANGE}),[r]),p=O.useCallback(()=>h.current.onBlur({target:{value:Ce(a._formValues,r),name:r},type:Fx.BLUR}),[r,a._formValues]),v=O.useCallback(b=>{const w=Ce(a._fields,r);w&&b&&(w._f.ref={focus:()=>b.focus&&b.focus(),select:()=>b.select&&b.select(),setCustomValidity:_=>b.setCustomValidity(_),reportValidity:()=>b.reportValidity()})},[a._fields,r]),x=O.useMemo(()=>({name:r,value:u,...Is(n)||d.disabled?{disabled:d.disabled||n}:{},onChange:g,onBlur:p,ref:v}),[r,n,d.disabled,g,p,v,u]);return O.useEffect(()=>{const b=a._options.shouldUnregister||i;a.register(r,{...f.current.rules,...Is(f.current.disabled)?{disabled:f.current.disabled}:{}});const w=(_,j)=>{const N=Ce(a._fields,_);N&&N._f&&(N._f.mount=j)};if(w(r,!0),b){const _=rn(Ce(a._options.defaultValues,r));Zt(a._defaultValues,r,_),Fr(Ce(a._formValues,r))&&Zt(a._formValues,r,_)}return!l&&a.register(r),()=>{(l?b&&!a._state.action:b)?a.unregister(r):w(r,!1)}},[r,a,l,i]),O.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),O.useMemo(()=>({field:x,formState:d,fieldState:m}),[x,d,m])}const Wie=e=>e.render(qie(e));var VU=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Ym=e=>Array.isArray(e)?e:[e],vT=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},hs=e=>zr(e)&&!Object.keys(e).length,pk=e=>e.type==="file",za=e=>typeof e=="function",Ux=e=>{if(!uk)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},qU=e=>e.type==="select-multiple",gk=e=>e.type==="radio",Hie=e=>gk(e)||Xg(e),f_=e=>Ux(e)&&e.isConnected;function Kie(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Fr(e)?n++:e[t[n++]];return e}function Gie(e){for(const t in e)if(e.hasOwnProperty(t)&&!Fr(e[t]))return!1;return!0}function Wr(e,t){const r=Array.isArray(t)?t:F0(t)?[t]:fk(t),n=r.length===1?e:Kie(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(zr(n)&&hs(n)||Array.isArray(n)&&Gie(n))&&Wr(e,r.slice(0,-1)),e}var WU=e=>{for(const t in e)if(za(e[t]))return!0;return!1};function Bx(e,t={}){const r=Array.isArray(e);if(zr(e)||r)for(const n in e)Array.isArray(e[n])||zr(e[n])&&!WU(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Bx(e[n],t[n])):Qn(e[n])||(t[n]=!0);return t}function HU(e,t,r){const n=Array.isArray(e);if(zr(e)||n)for(const a in e)Array.isArray(e[a])||zr(e[a])&&!WU(e[a])?Fr(t)||F1(r[a])?r[a]=Array.isArray(e[a])?Bx(e[a],[]):{...Bx(e[a])}:HU(e[a],Qn(t)?{}:t[a],r[a]):r[a]=!no(e[a],t[a]);return r}var om=(e,t)=>HU(e,t,Bx(t));const yT={value:!1,isValid:!1},xT={value:!0,isValid:!0};var KU=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Fr(e[0].attributes.value)?Fr(e[0].value)||e[0].value===""?xT:{value:e[0].value,isValid:!0}:xT:yT}return yT},GU=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Fr(e)?e:t?e===""?NaN:e&&+e:r&&yi(e)?new Date(e):n?n(e):e;const bT={isValid:!1,value:null};var YU=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,bT):bT;function wT(e){const t=e.ref;return pk(t)?t.files:gk(t)?YU(e.refs).value:qU(t)?[...t.selectedOptions].map(({value:r})=>r):Xg(t)?KU(e.refs).value:GU(Fr(t.value)?e.ref.value:t.value,e)}var Yie=(e,t,r,n)=>{const a={};for(const i of e){const o=Ce(t,i);o&&Zt(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},zx=e=>e instanceof RegExp,lm=e=>Fr(e)?e:zx(e)?e.source:zr(e)?zx(e.value)?e.value.source:e.value:e,jT=e=>({isOnSubmit:!e||e===Ba.onSubmit,isOnBlur:e===Ba.onBlur,isOnChange:e===Ba.onChange,isOnAll:e===Ba.all,isOnTouch:e===Ba.onTouched});const _T="AsyncFunction";var Xie=e=>!!e&&!!e.validate&&!!(za(e.validate)&&e.validate.constructor.name===_T||zr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===_T)),Qie=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),NT=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Xm=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=Ce(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Xm(l,t))break}else if(zr(l)&&Xm(l,t))break}}};function ST(e,t,r){const n=Ce(e,r);if(n||F0(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=Ce(t,i),l=Ce(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var Zie=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return hs(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||Ba.all))},Jie=(e,t,r)=>!e||!t||e===t||Ym(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),eoe=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,toe=(e,t)=>!dk(Ce(e,t)).length&&Wr(e,t),roe=(e,t,r)=>{const n=Ym(Ce(e,r));return Zt(n,"root",t[r]),Zt(e,r,n),e},By=e=>yi(e);function CT(e,t,r="validate"){if(By(e)||Array.isArray(e)&&e.every(By)||Is(e)&&!e)return{type:r,message:By(e)?e:"",ref:t}}var cd=e=>zr(e)&&!zx(e)?e:{value:e,message:""},ET=async(e,t,r,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:g,name:p,valueAsNumber:v,mount:x}=e._f,b=Ce(r,p);if(!x||t.has(p))return{};const w=l?l[0]:o,_=k=>{a&&w.reportValidity&&(w.setCustomValidity(Is(k)?"":k||""),w.reportValidity())},j={},N=gk(o),S=Xg(o),E=N||S,C=(v||pk(o))&&Fr(o.value)&&Fr(b)||Ux(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,P=VU.bind(null,p,n,j),A=(k,D,R,U=Ki.maxLength,B=Ki.minLength)=>{const L=k?D:R;j[p]={type:k?U:B,message:L,ref:o,...P(k?U:B,L)}};if(i?!Array.isArray(b)||!b.length:c&&(!E&&(C||Qn(b))||Is(b)&&!b||S&&!KU(l).isValid||N&&!YU(l).isValid)){const{value:k,message:D}=By(c)?{value:!!c,message:c}:cd(c);if(k&&(j[p]={type:Ki.required,message:D,ref:w,...P(Ki.required,D)},!n))return _(D),j}if(!C&&(!Qn(f)||!Qn(h))){let k,D;const R=cd(h),U=cd(f);if(!Qn(b)&&!isNaN(b)){const B=o.valueAsNumber||b&&+b;Qn(R.value)||(k=B>R.value),Qn(U.value)||(D=B<U.value)}else{const B=o.valueAsDate||new Date(b),L=F=>new Date(new Date().toDateString()+" "+F),M=o.type=="time",T=o.type=="week";yi(R.value)&&b&&(k=M?L(b)>L(R.value):T?b>R.value:B>new Date(R.value)),yi(U.value)&&b&&(D=M?L(b)<L(U.value):T?b<U.value:B<new Date(U.value))}if((k||D)&&(A(!!k,R.message,U.message,Ki.max,Ki.min),!n))return _(j[p].message),j}if((u||d)&&!C&&(yi(b)||i&&Array.isArray(b))){const k=cd(u),D=cd(d),R=!Qn(k.value)&&b.length>+k.value,U=!Qn(D.value)&&b.length<+D.value;if((R||U)&&(A(R,k.message,D.message),!n))return _(j[p].message),j}if(m&&!C&&yi(b)){const{value:k,message:D}=cd(m);if(zx(k)&&!b.match(k)&&(j[p]={type:Ki.pattern,message:D,ref:o,...P(Ki.pattern,D)},!n))return _(D),j}if(g){if(za(g)){const k=await g(b,r),D=CT(k,w);if(D&&(j[p]={...D,...P(Ki.validate,D.message)},!n))return _(D.message),j}else if(zr(g)){let k={};for(const D in g){if(!hs(k)&&!n)break;const R=CT(await g[D](b,r),w,D);R&&(k={...R,...P(D,R.message)},_(R.message),n&&(j[p]=k))}if(!hs(k)&&(j[p]={ref:w,...k},!n))return j}}return _(!0),j};const noe={mode:Ba.onSubmit,reValidateMode:Ba.onChange,shouldFocusError:!0};function soe(e={}){let t={...noe,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:za(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=zr(t.defaultValues)||zr(t.values)?rn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:rn(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:vT(),state:vT()},m=t.criteriaMode===Ba.all,g=z=>Q=>{clearTimeout(u),u=setTimeout(z,Q)},p=async z=>{if(!t.disabled&&(d.isValid||f.isValid||z)){const Q=t.resolver?hs((await S()).errors):await C(n,!0);Q!==r.isValid&&h.state.next({isValid:Q})}},v=(z,Q)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((z||Array.from(l.mount)).forEach(ee=>{ee&&(Q?Zt(r.validatingFields,ee,Q):Wr(r.validatingFields,ee))}),h.state.next({validatingFields:r.validatingFields,isValidating:!hs(r.validatingFields)}))},x=(z,Q=[],ee,Ne,Se=!0,ve=!0)=>{if(Ne&&ee&&!t.disabled){if(o.action=!0,ve&&Array.isArray(Ce(n,z))){const ke=ee(Ce(n,z),Ne.argA,Ne.argB);Se&&Zt(n,z,ke)}if(ve&&Array.isArray(Ce(r.errors,z))){const ke=ee(Ce(r.errors,z),Ne.argA,Ne.argB);Se&&Zt(r.errors,z,ke),toe(r.errors,z)}if((d.touchedFields||f.touchedFields)&&ve&&Array.isArray(Ce(r.touchedFields,z))){const ke=ee(Ce(r.touchedFields,z),Ne.argA,Ne.argB);Se&&Zt(r.touchedFields,z,ke)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=om(a,i)),h.state.next({name:z,isDirty:A(z,Q),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Zt(i,z,Q)},b=(z,Q)=>{Zt(r.errors,z,Q),h.state.next({errors:r.errors})},w=z=>{r.errors=z,h.state.next({errors:r.errors,isValid:!1})},_=(z,Q,ee,Ne)=>{const Se=Ce(n,z);if(Se){const ve=Ce(i,z,Fr(ee)?Ce(a,z):ee);Fr(ve)||Ne&&Ne.defaultChecked||Q?Zt(i,z,Q?ve:wT(Se._f)):R(z,ve),o.mount&&p()}},j=(z,Q,ee,Ne,Se)=>{let ve=!1,ke=!1;const lt={name:z};if(!t.disabled){if(!ee||Ne){(d.isDirty||f.isDirty)&&(ke=r.isDirty,r.isDirty=lt.isDirty=A(),ve=ke!==lt.isDirty);const St=no(Ce(a,z),Q);ke=!!Ce(r.dirtyFields,z),St?Wr(r.dirtyFields,z):Zt(r.dirtyFields,z,!0),lt.dirtyFields=r.dirtyFields,ve=ve||(d.dirtyFields||f.dirtyFields)&&ke!==!St}if(ee){const St=Ce(r.touchedFields,z);St||(Zt(r.touchedFields,z,ee),lt.touchedFields=r.touchedFields,ve=ve||(d.touchedFields||f.touchedFields)&&St!==ee)}ve&&Se&&h.state.next(lt)}return ve?lt:{}},N=(z,Q,ee,Ne)=>{const Se=Ce(r.errors,z),ve=(d.isValid||f.isValid)&&Is(Q)&&r.isValid!==Q;if(t.delayError&&ee?(c=g(()=>b(z,ee)),c(t.delayError)):(clearTimeout(u),c=null,ee?Zt(r.errors,z,ee):Wr(r.errors,z)),(ee?!no(Se,ee):Se)||!hs(Ne)||ve){const ke={...Ne,...ve&&Is(Q)?{isValid:Q}:{},errors:r.errors,name:z};r={...r,...ke},h.state.next(ke)}},S=async z=>{v(z,!0);const Q=await t.resolver(i,t.context,Yie(z||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(z),Q},E=async z=>{const{errors:Q}=await S(z);if(z)for(const ee of z){const Ne=Ce(Q,ee);Ne?Zt(r.errors,ee,Ne):Wr(r.errors,ee)}else r.errors=Q;return Q},C=async(z,Q,ee={valid:!0})=>{for(const Ne in z){const Se=z[Ne];if(Se){const{_f:ve,...ke}=Se;if(ve){const lt=l.array.has(ve.name),St=Se._f&&Xie(Se._f);St&&d.validatingFields&&v([Ne],!0);const jn=await ET(Se,l.disabled,i,m,t.shouldUseNativeValidation&&!Q,lt);if(St&&d.validatingFields&&v([Ne]),jn[ve.name]&&(ee.valid=!1,Q))break;!Q&&(Ce(jn,ve.name)?lt?roe(r.errors,jn,ve.name):Zt(r.errors,ve.name,jn[ve.name]):Wr(r.errors,ve.name))}!hs(ke)&&await C(ke,Q,ee)}}return ee.valid},P=()=>{for(const z of l.unMount){const Q=Ce(n,z);Q&&(Q._f.refs?Q._f.refs.every(ee=>!f_(ee)):!f_(Q._f.ref))&&ce(z)}l.unMount=new Set},A=(z,Q)=>!t.disabled&&(z&&Q&&Zt(i,z,Q),!no(F(),a)),k=(z,Q,ee)=>zU(z,l,{...o.mount?i:Fr(Q)?a:yi(z)?{[z]:Q}:Q},ee,Q),D=z=>dk(Ce(o.mount?i:a,z,t.shouldUnregister?Ce(a,z,[]):[])),R=(z,Q,ee={})=>{const Ne=Ce(n,z);let Se=Q;if(Ne){const ve=Ne._f;ve&&(!ve.disabled&&Zt(i,z,GU(Q,ve)),Se=Ux(ve.ref)&&Qn(Q)?"":Q,qU(ve.ref)?[...ve.ref.options].forEach(ke=>ke.selected=Se.includes(ke.value)):ve.refs?Xg(ve.ref)?ve.refs.forEach(ke=>{(!ke.defaultChecked||!ke.disabled)&&(Array.isArray(Se)?ke.checked=!!Se.find(lt=>lt===ke.value):ke.checked=Se===ke.value||!!Se)}):ve.refs.forEach(ke=>ke.checked=ke.value===Se):pk(ve.ref)?ve.ref.value="":(ve.ref.value=Se,ve.ref.type||h.state.next({name:z,values:rn(i)})))}(ee.shouldDirty||ee.shouldTouch)&&j(z,Se,ee.shouldTouch,ee.shouldDirty,!0),ee.shouldValidate&&T(z)},U=(z,Q,ee)=>{for(const Ne in Q){if(!Q.hasOwnProperty(Ne))return;const Se=Q[Ne],ve=z+"."+Ne,ke=Ce(n,ve);(l.array.has(z)||zr(Se)||ke&&!ke._f)&&!Lc(Se)?U(ve,Se,ee):R(ve,Se,ee)}},B=(z,Q,ee={})=>{const Ne=Ce(n,z),Se=l.array.has(z),ve=rn(Q);Zt(i,z,ve),Se?(h.array.next({name:z,values:rn(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&ee.shouldDirty&&h.state.next({name:z,dirtyFields:om(a,i),isDirty:A(z,ve)})):Ne&&!Ne._f&&!Qn(ve)?U(z,ve,ee):R(z,ve,ee),NT(z,l)&&h.state.next({...r,name:z}),h.state.next({name:o.mount?z:void 0,values:rn(i)})},L=async z=>{o.mount=!0;const Q=z.target;let ee=Q.name,Ne=!0;const Se=Ce(n,ee),ve=St=>{Ne=Number.isNaN(St)||Lc(St)&&isNaN(St.getTime())||no(St,Ce(i,ee,St))},ke=jT(t.mode),lt=jT(t.reValidateMode);if(Se){let St,jn;const zn=Q.type?wT(Se._f):FU(z),As=z.type===Fx.BLUR||z.type===Fx.FOCUS_OUT,ci=!Qie(Se._f)&&!t.resolver&&!Ce(r.errors,ee)&&!Se._f.deps||eoe(As,Ce(r.touchedFields,ee),r.isSubmitted,lt,ke),Na=NT(ee,l,As);Zt(i,ee,zn),As?(Se._f.onBlur&&Se._f.onBlur(z),c&&c(0)):Se._f.onChange&&Se._f.onChange(z);const cs=j(ee,zn,As),Uo=!hs(cs)||Na;if(!As&&h.state.next({name:ee,type:z.type,values:rn(i)}),ci)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?As&&p():As||p()),Uo&&h.state.next({name:ee,...Na?{}:cs});if(!As&&Na&&h.state.next({...r}),t.resolver){const{errors:Zs}=await S([ee]);if(ve(zn),Ne){const Yu=ST(r.errors,n,ee),Xu=ST(Zs,n,Yu.name||ee);St=Xu.error,ee=Xu.name,jn=hs(Zs)}}else v([ee],!0),St=(await ET(Se,l.disabled,i,m,t.shouldUseNativeValidation))[ee],v([ee]),ve(zn),Ne&&(St?jn=!1:(d.isValid||f.isValid)&&(jn=await C(n,!0)));Ne&&(Se._f.deps&&T(Se._f.deps),N(ee,jn,St,cs))}},M=(z,Q)=>{if(Ce(r.errors,Q)&&z.focus)return z.focus(),1},T=async(z,Q={})=>{let ee,Ne;const Se=Ym(z);if(t.resolver){const ve=await E(Fr(z)?z:Se);ee=hs(ve),Ne=z?!Se.some(ke=>Ce(ve,ke)):ee}else z?(Ne=(await Promise.all(Se.map(async ve=>{const ke=Ce(n,ve);return await C(ke&&ke._f?{[ve]:ke}:ke)}))).every(Boolean),!(!Ne&&!r.isValid)&&p()):Ne=ee=await C(n);return h.state.next({...!yi(z)||(d.isValid||f.isValid)&&ee!==r.isValid?{}:{name:z},...t.resolver||!z?{isValid:ee}:{},errors:r.errors}),Q.shouldFocus&&!Ne&&Xm(n,M,z?Se:l.mount),Ne},F=z=>{const Q={...o.mount?i:a};return Fr(z)?Q:yi(z)?Ce(Q,z):z.map(ee=>Ce(Q,ee))},Z=(z,Q)=>({invalid:!!Ce((Q||r).errors,z),isDirty:!!Ce((Q||r).dirtyFields,z),error:Ce((Q||r).errors,z),isValidating:!!Ce(r.validatingFields,z),isTouched:!!Ce((Q||r).touchedFields,z)}),W=z=>{z&&Ym(z).forEach(Q=>Wr(r.errors,Q)),h.state.next({errors:z?r.errors:{}})},K=(z,Q,ee)=>{const Ne=(Ce(n,z,{_f:{}})._f||{}).ref,Se=Ce(r.errors,z)||{},{ref:ve,message:ke,type:lt,...St}=Se;Zt(r.errors,z,{...St,...Q,ref:Ne}),h.state.next({name:z,errors:r.errors,isValid:!1}),ee&&ee.shouldFocus&&Ne&&Ne.focus&&Ne.focus()},V=(z,Q)=>za(z)?h.state.subscribe({next:ee=>"values"in ee&&z(k(void 0,Q),ee)}):k(z,Q,!0),le=z=>h.state.subscribe({next:Q=>{Jie(z.name,Q.name,z.exact)&&Zie(Q,z.formState||d,Wt,z.reRenderRoot)&&z.callback({values:{...i},...r,...Q,defaultValues:a})}}).unsubscribe,be=z=>(o.mount=!0,f={...f,...z.formState},le({...z,formState:f})),ce=(z,Q={})=>{for(const ee of z?Ym(z):l.mount)l.mount.delete(ee),l.array.delete(ee),Q.keepValue||(Wr(n,ee),Wr(i,ee)),!Q.keepError&&Wr(r.errors,ee),!Q.keepDirty&&Wr(r.dirtyFields,ee),!Q.keepTouched&&Wr(r.touchedFields,ee),!Q.keepIsValidating&&Wr(r.validatingFields,ee),!t.shouldUnregister&&!Q.keepDefaultValue&&Wr(a,ee);h.state.next({values:rn(i)}),h.state.next({...r,...Q.keepDirty?{isDirty:A()}:{}}),!Q.keepIsValid&&p()},Pe=({disabled:z,name:Q})=>{(Is(z)&&o.mount||z||l.disabled.has(Q))&&(z?l.disabled.add(Q):l.disabled.delete(Q))},ie=(z,Q={})=>{let ee=Ce(n,z);const Ne=Is(Q.disabled)||Is(t.disabled);return Zt(n,z,{...ee||{},_f:{...ee&&ee._f?ee._f:{ref:{name:z}},name:z,mount:!0,...Q}}),l.mount.add(z),ee?Pe({disabled:Is(Q.disabled)?Q.disabled:t.disabled,name:z}):_(z,!0,Q.value),{...Ne?{disabled:Q.disabled||t.disabled}:{},...t.progressive?{required:!!Q.required,min:lm(Q.min),max:lm(Q.max),minLength:lm(Q.minLength),maxLength:lm(Q.maxLength),pattern:lm(Q.pattern)}:{},name:z,onChange:L,onBlur:L,ref:Se=>{if(Se){ie(z,Q),ee=Ce(n,z);const ve=Fr(Se.value)&&Se.querySelectorAll&&Se.querySelectorAll("input,select,textarea")[0]||Se,ke=Hie(ve),lt=ee._f.refs||[];if(ke?lt.find(St=>St===ve):ve===ee._f.ref)return;Zt(n,z,{_f:{...ee._f,...ke?{refs:[...lt.filter(f_),ve,...Array.isArray(Ce(a,z))?[{}]:[]],ref:{type:ve.type,name:z}}:{ref:ve}}}),_(z,!1,void 0,ve)}else ee=Ce(n,z,{}),ee._f&&(ee._f.mount=!1),(t.shouldUnregister||Q.shouldUnregister)&&!(UU(l.array,z)&&o.action)&&l.unMount.add(z)}}},me=()=>t.shouldFocusError&&Xm(n,M,l.mount),_e=z=>{Is(z)&&(h.state.next({disabled:z}),Xm(n,(Q,ee)=>{const Ne=Ce(n,ee);Ne&&(Q.disabled=Ne._f.disabled||z,Array.isArray(Ne._f.refs)&&Ne._f.refs.forEach(Se=>{Se.disabled=Ne._f.disabled||z}))},0,!1))},se=(z,Q)=>async ee=>{let Ne;ee&&(ee.preventDefault&&ee.preventDefault(),ee.persist&&ee.persist());let Se=rn(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ve,values:ke}=await S();r.errors=ve,Se=rn(ke)}else await C(n);if(l.disabled.size)for(const ve of l.disabled)Wr(Se,ve);if(Wr(r.errors,"root"),hs(r.errors)){h.state.next({errors:{}});try{await z(Se,ee)}catch(ve){Ne=ve}}else Q&&await Q({...r.errors},ee),me(),setTimeout(me);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:hs(r.errors)&&!Ne,submitCount:r.submitCount+1,errors:r.errors}),Ne)throw Ne},ot=(z,Q={})=>{Ce(n,z)&&(Fr(Q.defaultValue)?B(z,rn(Ce(a,z))):(B(z,Q.defaultValue),Zt(a,z,rn(Q.defaultValue))),Q.keepTouched||Wr(r.touchedFields,z),Q.keepDirty||(Wr(r.dirtyFields,z),r.isDirty=Q.defaultValue?A(z,rn(Ce(a,z))):A()),Q.keepError||(Wr(r.errors,z),d.isValid&&p()),h.state.next({...r}))},He=(z,Q={})=>{const ee=z?rn(z):a,Ne=rn(ee),Se=hs(z),ve=Se?a:Ne;if(Q.keepDefaultValues||(a=ee),!Q.keepValues){if(Q.keepDirtyValues){const ke=new Set([...l.mount,...Object.keys(om(a,i))]);for(const lt of Array.from(ke))Ce(r.dirtyFields,lt)?Zt(ve,lt,Ce(i,lt)):B(lt,Ce(ve,lt))}else{if(uk&&Fr(z))for(const ke of l.mount){const lt=Ce(n,ke);if(lt&&lt._f){const St=Array.isArray(lt._f.refs)?lt._f.refs[0]:lt._f.ref;if(Ux(St)){const jn=St.closest("form");if(jn){jn.reset();break}}}}if(Q.keepFieldsRef)for(const ke of l.mount)B(ke,Ce(ve,ke));else n={}}i=t.shouldUnregister?Q.keepDefaultValues?rn(a):{}:rn(ve),h.array.next({values:{...ve}}),h.state.next({values:{...ve}})}l={mount:Q.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!Q.keepIsValid||!!Q.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:Q.keepSubmitCount?r.submitCount:0,isDirty:Se?!1:Q.keepDirty?r.isDirty:!!(Q.keepDefaultValues&&!no(z,a)),isSubmitted:Q.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Se?{}:Q.keepDirtyValues?Q.keepDefaultValues&&i?om(a,i):r.dirtyFields:Q.keepDefaultValues&&z?om(a,z):Q.keepDirty?r.dirtyFields:{},touchedFields:Q.keepTouched?r.touchedFields:{},errors:Q.keepErrors?r.errors:{},isSubmitSuccessful:Q.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Lt=(z,Q)=>He(za(z)?z(i):z,Q),Tt=(z,Q={})=>{const ee=Ce(n,z),Ne=ee&&ee._f;if(Ne){const Se=Ne.refs?Ne.refs[0]:Ne.ref;Se.focus&&(Se.focus(),Q.shouldSelect&&za(Se.select)&&Se.select())}},Wt=z=>{r={...r,...z}},qr={control:{register:ie,unregister:ce,getFieldState:Z,handleSubmit:se,setError:K,_subscribe:le,_runSchema:S,_focusError:me,_getWatch:k,_getDirty:A,_setValid:p,_setFieldArray:x,_setDisabledField:Pe,_setErrors:w,_getFieldArray:D,_reset:He,_resetDefaultValues:()=>za(t.defaultValues)&&t.defaultValues().then(z=>{Lt(z,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:_e,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(z){o=z},get _defaultValues(){return a},get _names(){return l},set _names(z){l=z},get _formState(){return r},get _options(){return t},set _options(z){t={...t,...z}}},subscribe:be,trigger:T,register:ie,handleSubmit:se,watch:V,setValue:B,getValues:F,reset:Lt,resetField:ot,clearErrors:W,unregister:ce,setError:K,setFocus:Tt,getFieldState:Z};return{...qr,formControl:qr}}function as(e={}){const t=O.useRef(void 0),r=O.useRef(void 0),[n,a]=O.useState({isDirty:!1,isValidating:!1,isLoading:za(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:za(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!za(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=soe(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,mk(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),O.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),O.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),O.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),O.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),O.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),O.useEffect(()=>{e.values&&!no(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),O.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=BU(n,i),t.current}const kT=(e,t,r)=>{if(e&&"reportValidity"in e){const n=Ce(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},XU=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?kT(n.ref,r,e):n.refs&&n.refs.forEach(a=>kT(a,r,e))}},aoe=(e,t)=>{t.shouldUseNativeValidation&&XU(e,t);const r={};for(const n in e){const a=Ce(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(ioe(t.names||Object.keys(e),n)){const o=Object.assign({},Ce(r,n));Zt(o,"root",i),Zt(r,n,o)}else Zt(r,n,i)}return r},ioe=(e,t)=>e.some(r=>r.startsWith(t+"."));var ooe=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return e.push(f)})}),t){var c=r[o].types,u=c&&c[n.code];r[o]=VU(o,t,r,a,u?[].concat(u,n.message):n.message)}e.shift()}return r},Oi=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(u){return i.shouldUseNativeValidation&&XU({},i),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:aoe(ooe(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},loe="Label",QU=y.forwardRef((e,t)=>s.jsx(Ee.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));QU.displayName=loe;var ZU=QU;const coe=uh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),H=y.forwardRef(({className:e,...t},r)=>s.jsx(ZU,{ref:r,className:ae(coe(),e),...t}));H.displayName=ZU.displayName;function Qg(e){const t=y.useRef({value:e,previous:e});return y.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var B0="Checkbox",[uoe,GFe]=Qr(B0),[doe,vk]=uoe(B0);function foe(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[h,m]=Hs({prop:r,defaultProp:a??!1,onChange:c,caller:B0}),[g,p]=y.useState(null),[v,x]=y.useState(null),b=y.useRef(!1),w=g?!!o||!!g.closest("form"):!0,_={checked:h,disabled:i,setChecked:m,control:g,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:Il(a)?!1:a,isFormControl:w,bubbleInput:v,setBubbleInput:x};return s.jsx(doe,{scope:t,..._,children:hoe(f)?f(_):n})}var JU="CheckboxTrigger",eB=y.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=vk(JU,e),p=Ke(a,d),v=y.useRef(c);return y.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const b=()=>f(v.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[i,f]),s.jsx(Ee.button,{type:"button",role:"checkbox","aria-checked":Il(c)?"mixed":c,"aria-required":u,"data-state":aB(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:p,onKeyDown:pe(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:pe(r,x=>{f(b=>Il(b)?!0:!b),g&&m&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});eB.displayName=JU;var yk=y.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return s.jsx(foe,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>s.jsxs(s.Fragment,{children:[s.jsx(eB,{...f,ref:t,__scopeCheckbox:r}),h&&s.jsx(sB,{__scopeCheckbox:r})]})})});yk.displayName=B0;var tB="CheckboxIndicator",rB=y.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=vk(tB,r);return s.jsx(dn,{present:n||Il(i.checked)||i.checked===!0,children:s.jsx(Ee.span,{"data-state":aB(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});rB.displayName=tB;var nB="CheckboxBubbleInput",sB=y.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:m}=vk(nB,e),g=Ke(r,m),p=Qg(i),v=Ug(n);y.useEffect(()=>{const b=h;if(!b)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set,N=!a.current;if(p!==i&&j){const S=new Event("click",{bubbles:N});b.indeterminate=Il(i),j.call(b,Il(i)?!1:i),b.dispatchEvent(S)}},[h,p,i,a]);const x=y.useRef(Il(i)?!1:i);return s.jsx(Ee.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});sB.displayName=nB;function hoe(e){return typeof e=="function"}function Il(e){return e==="indeterminate"}function aB(e){return Il(e)?"indeterminate":e?"checked":"unchecked"}const Ti=y.forwardRef(({className:e,...t},r)=>s.jsx(yk,{ref:r,className:ae("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(rB,{className:ae("flex items-center justify-center text-current"),children:s.jsx(dh,{className:"h-4 w-4"})})}));Ti.displayName=yk.displayName;const moe=ks({email:Je().email({message:"Please enter a valid email address"}),password:Je().min(6,{message:"Password must be at least 6 characters"})}),poe=ks({displayName:Je().min(2,{message:"Display name must be at least 2 characters"}).max(50,{message:"Display name must be less than 50 characters"}),email:Je().email({message:"Please enter a valid email address"}),password:Je().min(6,{message:"Password must be at least 6 characters"}),confirmPassword:Je()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function goe(){const[e,t]=y.useState(!0),[r,n]=y.useState(!1),[a,i]=y.useState(!1),[o,l]=y.useState(!1),c=ii(),{user:u,loading:d,signIn:f,signUp:h}=nc(),m=as({resolver:Oi(moe),defaultValues:{email:"",password:""},mode:"onChange"}),g=as({resolver:Oi(poe),defaultValues:{displayName:"",email:"",password:"",confirmPassword:""},mode:"onChange"});y.useEffect(()=>{!d&&u&&c("/employees")},[u,d,c]);const p=async b=>{n(!0);const{error:w}=await f(b.email,b.password);if(n(!1),w){w.message.includes("Invalid login credentials")?J({title:"Login failed",description:"Invalid email or password. Please try again.",variant:"destructive"}):J({title:"Login failed",description:w.message,variant:"destructive"});return}J({title:"Welcome back!",description:"You have successfully logged in."}),c("/employees")},v=async b=>{n(!0);const{error:w}=await h(b.email,b.password,b.displayName);if(n(!1),w){w.message.includes("User already registered")?J({title:"Account exists",description:"An account with this email already exists. Please log in instead.",variant:"destructive"}):J({title:"Signup failed",description:w.message,variant:"destructive"});return}J({title:"Account created!",description:"Welcome to SocialPlus HR. You are now logged in."}),c("/employees")},x=async()=>{const b=m.watch("email");if(!b||!Je().email().safeParse(b).success){J({title:"Email required",description:"Please enter your email address first.",variant:"destructive"});return}l(!0);const{error:w}=await $.auth.resetPasswordForEmail(b,{redirectTo:`${window.location.origin}/auth`});if(l(!1),w){J({title:"Error",description:w.message,variant:"destructive"});return}J({title:"Password reset email sent",description:"Check your inbox for a link to reset your password."})};return d?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs("div",{className:"min-h-screen flex bg-background",children:[s.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-primary p-12 flex-col justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-primary-foreground",children:"SocialPlus HR"}),s.jsx("p",{className:"text-primary-foreground/80 mt-2",children:"Human Resource Management System"})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-primary-foreground/10 rounded-lg",children:s.jsx(Ar,{className:"h-6 w-6 text-primary-foreground"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-primary-foreground",children:"Employee Management"}),s.jsx("p",{className:"text-primary-foreground/70 text-sm",children:"Manage your entire workforce from one central location"})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-primary-foreground/10 rounded-lg",children:s.jsx(ln,{className:"h-6 w-6 text-primary-foreground"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-primary-foreground",children:"Compliance Tracking"}),s.jsx("p",{className:"text-primary-foreground/70 text-sm",children:"Stay compliant with automated document tracking"})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-primary-foreground/10 rounded-lg",children:s.jsx(xt,{className:"h-6 w-6 text-primary-foreground"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-primary-foreground",children:"Time & Attendance"}),s.jsx("p",{className:"text-primary-foreground/70 text-sm",children:"Track hours, manage leave, and process payroll seamlessly"})]})]})]}),s.jsx("p",{className:"text-primary-foreground/60 text-sm",children:" 2024 SocialPlus. All rights reserved."})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:s.jsxs(G,{className:"w-full max-w-md",children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"lg:hidden mb-4",children:s.jsx("h1",{className:"text-2xl font-bold text-primary",children:"SocialPlus HR"})}),s.jsx(ge,{className:"text-2xl",children:e?"Welcome back":"Create an account"}),s.jsx(Le,{children:e?"Enter your credentials to access your account":"Enter your details to get started"})]}),s.jsxs(X,{children:[e?s.jsxs("form",{onSubmit:m.handleSubmit(p),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"login-email",children:"Email"}),s.jsx(ne,{id:"login-email",type:"email",placeholder:"name@company.com",value:m.watch("email"),onChange:b=>m.setValue("email",b.target.value,{shouldValidate:!0})}),m.formState.errors.email&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:m.formState.errors.email.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"login-password",children:"Password"}),s.jsx(ne,{id:"login-password",type:"password",placeholder:"Enter your password",value:m.watch("password"),onChange:b=>m.setValue("password",b.target.value,{shouldValidate:!0})}),m.formState.errors.password&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:m.formState.errors.password.message})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ti,{id:"remember-me",checked:a,onCheckedChange:b=>i(b===!0)}),s.jsx(H,{htmlFor:"remember-me",className:"text-sm font-normal cursor-pointer",children:"Remember me"})]}),s.jsx("button",{type:"button",onClick:x,disabled:o,className:"text-sm text-primary hover:underline disabled:opacity-50",children:o?"Sending...":"Forgot password?"})]}),s.jsx(I,{type:"submit",className:"w-full",disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign in"})]}):s.jsxs("form",{onSubmit:g.handleSubmit(v),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"signup-displayName",children:"Display Name"}),s.jsx(ne,{id:"signup-displayName",placeholder:"John Doe",value:g.watch("displayName"),onChange:b=>g.setValue("displayName",b.target.value,{shouldValidate:!0})}),g.formState.errors.displayName&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:g.formState.errors.displayName.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"signup-email",children:"Email"}),s.jsx(ne,{id:"signup-email",type:"email",placeholder:"name@company.com",value:g.watch("email"),onChange:b=>g.setValue("email",b.target.value,{shouldValidate:!0})}),g.formState.errors.email&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:g.formState.errors.email.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"signup-password",children:"Password"}),s.jsx(ne,{id:"signup-password",type:"password",placeholder:"Create a password",value:g.watch("password"),onChange:b=>g.setValue("password",b.target.value,{shouldValidate:!0})}),g.formState.errors.password&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:g.formState.errors.password.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"signup-confirmPassword",children:"Confirm Password"}),s.jsx(ne,{id:"signup-confirmPassword",type:"password",placeholder:"Confirm your password",value:g.watch("confirmPassword"),onChange:b=>g.setValue("confirmPassword",b.target.value,{shouldValidate:!0})}),g.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:g.formState.errors.confirmPassword.message})]}),s.jsx(I,{type:"submit",className:"w-full",disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create account"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{type:"button",onClick:()=>t(!e),className:"text-sm text-primary hover:underline",children:e?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})]})}function zp(e,[t,r]){return Math.min(r,Math.max(t,e))}var voe=[" ","Enter","ArrowUp","ArrowDown"],yoe=[" ","Enter"],Su="Select",[z0,V0,xoe]=Mg(Su),[Nh,YFe]=Qr(Su,[xoe,tc]),q0=tc(),[boe,ac]=Nh(Su),[woe,joe]=Nh(Su),iB=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:g}=e,p=q0(t),[v,x]=y.useState(null),[b,w]=y.useState(null),[_,j]=y.useState(!1),N=Uu(u),[S,E]=Hs({prop:n,defaultProp:a??!1,onChange:i,caller:Su}),[C,P]=Hs({prop:o,defaultProp:l,onChange:c,caller:Su}),A=y.useRef(null),k=v?g||!!v.closest("form"):!0,[D,R]=y.useState(new Set),U=Array.from(D).map(B=>B.props.value).join(";");return s.jsx(j0,{...p,children:s.jsxs(boe,{required:m,scope:t,trigger:v,onTriggerChange:x,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:ha(),value:C,onValueChange:P,open:S,onOpenChange:E,dir:N,triggerPointerDownPosRef:A,disabled:h,children:[s.jsx(z0.Provider,{scope:t,children:s.jsx(woe,{scope:e.__scopeSelect,onNativeOptionAdd:y.useCallback(B=>{R(L=>new Set(L).add(B))},[]),onNativeOptionRemove:y.useCallback(B=>{R(L=>{const M=new Set(L);return M.delete(B),M})},[]),children:r})}),k?s.jsxs(AB,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:C,onChange:B=>P(B.target.value),disabled:h,form:g,children:[C===void 0?s.jsx("option",{value:""}):null,Array.from(D)]},U):null]})})};iB.displayName=Su;var oB="SelectTrigger",lB=y.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=q0(r),o=ac(oB,r),l=o.disabled||n,c=Ke(t,o.onTriggerChange),u=V0(r),d=y.useRef("touch"),[f,h,m]=TB(p=>{const v=u().filter(w=>!w.disabled),x=v.find(w=>w.value===o.value),b=DB(v,p,x);b!==void 0&&o.onValueChange(b.value)}),g=p=>{l||(o.onOpenChange(!0),m()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return s.jsx(Bg,{asChild:!0,...i,children:s.jsx(Ee.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":OB(o.value)?"":void 0,...a,ref:c,onClick:pe(a.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&g(p)}),onPointerDown:pe(a.onPointerDown,p=>{d.current=p.pointerType;const v=p.target;v.hasPointerCapture(p.pointerId)&&v.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:pe(a.onKeyDown,p=>{const v=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(v&&p.key===" ")&&voe.includes(p.key)&&(g(),p.preventDefault())})})})});lB.displayName=oB;var cB="SelectValue",uB=y.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=ac(cB,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=Ke(t,c.onValueNodeChange);return Vr(()=>{u(d)},[u,d]),s.jsx(Ee.span,{...l,ref:f,style:{pointerEvents:"none"},children:OB(c.value)?s.jsx(s.Fragment,{children:o}):i})});uB.displayName=cB;var _oe="SelectIcon",dB=y.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Ee.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});dB.displayName=_oe;var Noe="SelectPortal",fB=e=>s.jsx(ch,{asChild:!0,...e});fB.displayName=Noe;var Cu="SelectContent",hB=y.forwardRef((e,t)=>{const r=ac(Cu,e.__scopeSelect),[n,a]=y.useState();if(Vr(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?$u.createPortal(s.jsx(mB,{scope:e.__scopeSelect,children:s.jsx(z0.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(pB,{...e,ref:t})});hB.displayName=Cu;var Ta=10,[mB,ic]=Nh(Cu),Soe="SelectContentImpl",Coe=Wl("SelectContent.RemoveScroll"),pB=y.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:v,...x}=e,b=ac(Cu,r),[w,_]=y.useState(null),[j,N]=y.useState(null),S=Ke(t,ce=>_(ce)),[E,C]=y.useState(null),[P,A]=y.useState(null),k=V0(r),[D,R]=y.useState(!1),U=y.useRef(!1);y.useEffect(()=>{if(w)return D0(w)},[w]),T0();const B=y.useCallback(ce=>{const[Pe,...ie]=k().map(se=>se.ref.current),[me]=ie.slice(-1),_e=document.activeElement;for(const se of ce)if(se===_e||(se==null||se.scrollIntoView({block:"nearest"}),se===Pe&&j&&(j.scrollTop=0),se===me&&j&&(j.scrollTop=j.scrollHeight),se==null||se.focus(),document.activeElement!==_e))return},[k,j]),L=y.useCallback(()=>B([E,w]),[B,E,w]);y.useEffect(()=>{D&&L()},[D,L]);const{onOpenChange:M,triggerPointerDownPosRef:T}=b;y.useEffect(()=>{if(w){let ce={x:0,y:0};const Pe=me=>{var _e,se;ce={x:Math.abs(Math.round(me.pageX)-(((_e=T.current)==null?void 0:_e.x)??0)),y:Math.abs(Math.round(me.pageY)-(((se=T.current)==null?void 0:se.y)??0))}},ie=me=>{ce.x<=10&&ce.y<=10?me.preventDefault():w.contains(me.target)||M(!1),document.removeEventListener("pointermove",Pe),T.current=null};return T.current!==null&&(document.addEventListener("pointermove",Pe),document.addEventListener("pointerup",ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Pe),document.removeEventListener("pointerup",ie,{capture:!0})}}},[w,M,T]),y.useEffect(()=>{const ce=()=>M(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[M]);const[F,Z]=TB(ce=>{const Pe=k().filter(_e=>!_e.disabled),ie=Pe.find(_e=>_e.ref.current===document.activeElement),me=DB(Pe,ce,ie);me&&setTimeout(()=>me.ref.current.focus())}),W=y.useCallback((ce,Pe,ie)=>{const me=!U.current&&!ie;(b.value!==void 0&&b.value===Pe||me)&&(C(ce),me&&(U.current=!0))},[b.value]),K=y.useCallback(()=>w==null?void 0:w.focus(),[w]),V=y.useCallback((ce,Pe,ie)=>{const me=!U.current&&!ie;(b.value!==void 0&&b.value===Pe||me)&&A(ce)},[b.value]),le=n==="popper"?U1:gB,be=le===U1?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:v}:{};return s.jsx(mB,{scope:r,content:w,viewport:j,onViewportChange:N,itemRefCallback:W,selectedItem:E,onItemLeave:K,itemTextRefCallback:V,focusSelectedItem:L,selectedItemText:P,position:n,isPositioned:D,searchRef:F,children:s.jsx(Kg,{as:Coe,allowPinchZoom:!0,children:s.jsx(Wg,{asChild:!0,trapped:b.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:pe(a,ce=>{var Pe;(Pe=b.trigger)==null||Pe.focus({preventScroll:!0}),ce.preventDefault()}),children:s.jsx(Iu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(le,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:ce=>ce.preventDefault(),...x,...be,onPlaced:()=>R(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:pe(x.onKeyDown,ce=>{const Pe=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!Pe&&ce.key.length===1&&Z(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let me=k().filter(_e=>!_e.disabled).map(_e=>_e.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const _e=ce.target,se=me.indexOf(_e);me=me.slice(se+1)}setTimeout(()=>B(me)),ce.preventDefault()}})})})})})})});pB.displayName=Soe;var Eoe="SelectItemAlignedPosition",gB=y.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=ac(Cu,r),o=ic(Cu,r),[l,c]=y.useState(null),[u,d]=y.useState(null),f=Ke(t,S=>d(S)),h=V0(r),m=y.useRef(!1),g=y.useRef(!0),{viewport:p,selectedItem:v,selectedItemText:x,focusSelectedItem:b}=o,w=y.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&v&&x){const S=i.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(i.dir!=="rtl"){const _e=P.left-E.left,se=C.left-_e,ot=S.left-se,He=S.width+ot,Lt=Math.max(He,E.width),Tt=window.innerWidth-Ta,Wt=zp(se,[Ta,Math.max(Ta,Tt-Lt)]);l.style.minWidth=He+"px",l.style.left=Wt+"px"}else{const _e=E.right-P.right,se=window.innerWidth-C.right-_e,ot=window.innerWidth-S.right-se,He=S.width+ot,Lt=Math.max(He,E.width),Tt=window.innerWidth-Ta,Wt=zp(se,[Ta,Math.max(Ta,Tt-Lt)]);l.style.minWidth=He+"px",l.style.right=Wt+"px"}const A=h(),k=window.innerHeight-Ta*2,D=p.scrollHeight,R=window.getComputedStyle(u),U=parseInt(R.borderTopWidth,10),B=parseInt(R.paddingTop,10),L=parseInt(R.borderBottomWidth,10),M=parseInt(R.paddingBottom,10),T=U+B+D+M+L,F=Math.min(v.offsetHeight*5,T),Z=window.getComputedStyle(p),W=parseInt(Z.paddingTop,10),K=parseInt(Z.paddingBottom,10),V=S.top+S.height/2-Ta,le=k-V,be=v.offsetHeight/2,ce=v.offsetTop+be,Pe=U+B+ce,ie=T-Pe;if(Pe<=V){const _e=A.length>0&&v===A[A.length-1].ref.current;l.style.bottom="0px";const se=u.clientHeight-p.offsetTop-p.offsetHeight,ot=Math.max(le,be+(_e?K:0)+se+L),He=Pe+ot;l.style.height=He+"px"}else{const _e=A.length>0&&v===A[0].ref.current;l.style.top="0px";const ot=Math.max(V,U+p.offsetTop+(_e?W:0)+be)+ie;l.style.height=ot+"px",p.scrollTop=Pe-V+p.offsetTop}l.style.margin=`${Ta}px 0`,l.style.minHeight=F+"px",l.style.maxHeight=k+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,u,p,v,x,i.dir,n]);Vr(()=>w(),[w]);const[_,j]=y.useState();Vr(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const N=y.useCallback(S=>{S&&g.current===!0&&(w(),b==null||b(),g.current=!1)},[w,b]);return s.jsx(Poe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:N,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:s.jsx(Ee.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});gB.displayName=Eoe;var koe="SelectPopperPosition",U1=y.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Ta,...i}=e,o=q0(r);return s.jsx(_0,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});U1.displayName=koe;var[Poe,xk]=Nh(Cu,{}),B1="SelectViewport",vB=y.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=ic(B1,r),o=xk(B1,r),l=Ke(t,i.onViewportChange),c=y.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(z0.Slot,{scope:r,children:s.jsx(Ee.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:pe(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const g=window.innerHeight-Ta*2,p=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),x=Math.max(p,v);if(x<g){const b=x+m,w=Math.min(g,b),_=b-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});vB.displayName=B1;var yB="SelectGroup",[Aoe,Ooe]=Nh(yB),Toe=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=ha();return s.jsx(Aoe,{scope:r,id:a,children:s.jsx(Ee.div,{role:"group","aria-labelledby":a,...n,ref:t})})});Toe.displayName=yB;var xB="SelectLabel",bB=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Ooe(xB,r);return s.jsx(Ee.div,{id:a.id,...n,ref:t})});bB.displayName=xB;var Vx="SelectItem",[Doe,wB]=Nh(Vx),jB=y.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=ac(Vx,r),c=ic(Vx,r),u=l.value===n,[d,f]=y.useState(i??""),[h,m]=y.useState(!1),g=Ke(t,b=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,b,n,a)}),p=ha(),v=y.useRef("touch"),x=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(Doe,{scope:r,value:n,disabled:a,textId:p,isSelected:u,onItemTextChange:y.useCallback(b=>{f(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:s.jsx(z0.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:s.jsx(Ee.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:pe(o.onFocus,()=>m(!0)),onBlur:pe(o.onBlur,()=>m(!1)),onClick:pe(o.onClick,()=>{v.current!=="mouse"&&x()}),onPointerUp:pe(o.onPointerUp,()=>{v.current==="mouse"&&x()}),onPointerDown:pe(o.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:pe(o.onPointerMove,b=>{var w;v.current=b.pointerType,a?(w=c.onItemLeave)==null||w.call(c):v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:pe(o.onKeyDown,b=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&b.key===" "||(yoe.includes(b.key)&&x(),b.key===" "&&b.preventDefault())})})})})});jB.displayName=Vx;var Dm="SelectItemText",_B=y.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=ac(Dm,r),l=ic(Dm,r),c=wB(Dm,r),u=joe(Dm,r),[d,f]=y.useState(null),h=Ke(t,x=>f(x),c.onItemTextChange,x=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,x,c.value,c.disabled)}),m=d==null?void 0:d.textContent,g=y.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:v}=u;return Vr(()=>(p(g),()=>v(g)),[p,v,g]),s.jsxs(s.Fragment,{children:[s.jsx(Ee.span,{id:c.textId,...i,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?$u.createPortal(i.children,o.valueNode):null]})});_B.displayName=Dm;var NB="SelectItemIndicator",SB=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return wB(NB,r).isSelected?s.jsx(Ee.span,{"aria-hidden":!0,...n,ref:t}):null});SB.displayName=NB;var z1="SelectScrollUpButton",CB=y.forwardRef((e,t)=>{const r=ic(z1,e.__scopeSelect),n=xk(z1,e.__scopeSelect),[a,i]=y.useState(!1),o=Ke(t,n.onScrollButtonChange);return Vr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(kB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});CB.displayName=z1;var V1="SelectScrollDownButton",EB=y.forwardRef((e,t)=>{const r=ic(V1,e.__scopeSelect),n=xk(V1,e.__scopeSelect),[a,i]=y.useState(!1),o=Ke(t,n.onScrollButtonChange);return Vr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(kB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});EB.displayName=V1;var kB=y.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=ic("SelectScrollButton",r),o=y.useRef(null),l=V0(r),c=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),Vr(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(Ee.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:pe(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:pe(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:pe(a.onPointerLeave,()=>{c()})})}),Roe="SelectSeparator",PB=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Ee.div,{"aria-hidden":!0,...n,ref:t})});PB.displayName=Roe;var q1="SelectArrow",Moe=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=q0(r),i=ac(q1,r),o=ic(q1,r);return i.open&&o.position==="popper"?s.jsx(N0,{...a,...n,ref:t}):null});Moe.displayName=q1;var $oe="SelectBubbleInput",AB=y.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=y.useRef(null),i=Ke(n,a),o=Qg(t);return y.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Ee.select,{...r,style:{...qL,...r.style},ref:i,defaultValue:t})});AB.displayName=$oe;function OB(e){return e===""||e===void 0}function TB(e){const t=Lr(e),r=y.useRef(""),n=y.useRef(0),a=y.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=y.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function DB(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=Ioe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function Ioe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Loe=iB,RB=lB,Foe=uB,Uoe=dB,Boe=fB,MB=hB,zoe=vB,$B=bB,IB=jB,Voe=_B,qoe=SB,LB=CB,FB=EB,UB=PB;const Ie=Loe,Fe=Foe,Re=y.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(RB,{ref:n,className:ae("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(Uoe,{asChild:!0,children:s.jsx(NE,{className:"h-4 w-4 opacity-50"})})]}));Re.displayName=RB.displayName;const BB=y.forwardRef(({className:e,...t},r)=>s.jsx(LB,{ref:r,className:ae("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(sG,{className:"h-4 w-4"})}));BB.displayName=LB.displayName;const zB=y.forwardRef(({className:e,...t},r)=>s.jsx(FB,{ref:r,className:ae("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(NE,{className:"h-4 w-4"})}));zB.displayName=FB.displayName;const Me=y.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(Boe,{children:s.jsxs(MB,{ref:a,className:ae("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(BB,{}),s.jsx(zoe,{className:ae("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(zB,{})]})}));Me.displayName=MB.displayName;const Woe=y.forwardRef(({className:e,...t},r)=>s.jsx($B,{ref:r,className:ae("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Woe.displayName=$B.displayName;const Y=y.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(IB,{ref:n,className:ae("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(qoe,{children:s.jsx(dh,{className:"h-4 w-4"})})}),s.jsx(Voe,{children:t})]}));Y.displayName=IB.displayName;const Hoe=y.forwardRef(({className:e,...t},r)=>s.jsx(UB,{ref:r,className:ae("-mx-1 my-1 h-px bg-muted",e),...t}));Hoe.displayName=UB.displayName;var W0="Dialog",[VB,qB]=Qr(W0),[Koe,oi]=VB(W0),WB=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=y.useRef(null),c=y.useRef(null),[u,d]=Hs({prop:n,defaultProp:a??!1,onChange:i,caller:W0});return s.jsx(Koe,{scope:t,triggerRef:l,contentRef:c,contentId:ha(),titleId:ha(),descriptionId:ha(),open:u,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};WB.displayName=W0;var HB="DialogTrigger",KB=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=oi(HB,r),i=Ke(t,a.triggerRef);return s.jsx(Ee.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":jk(a.open),...n,ref:i,onClick:pe(e.onClick,a.onOpenToggle)})});KB.displayName=HB;var bk="DialogPortal",[Goe,GB]=VB(bk,{forceMount:void 0}),YB=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=oi(bk,t);return s.jsx(Goe,{scope:t,forceMount:r,children:y.Children.map(n,o=>s.jsx(dn,{present:r||i.open,children:s.jsx(ch,{asChild:!0,container:a,children:o})}))})};YB.displayName=bk;var qx="DialogOverlay",XB=y.forwardRef((e,t)=>{const r=GB(qx,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=oi(qx,e.__scopeDialog);return i.modal?s.jsx(dn,{present:n||i.open,children:s.jsx(Xoe,{...a,ref:t})}):null});XB.displayName=qx;var Yoe=Wl("DialogOverlay.RemoveScroll"),Xoe=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=oi(qx,r);return s.jsx(Kg,{as:Yoe,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Ee.div,{"data-state":jk(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Eu="DialogContent",QB=y.forwardRef((e,t)=>{const r=GB(Eu,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=oi(Eu,e.__scopeDialog);return s.jsx(dn,{present:n||i.open,children:i.modal?s.jsx(Qoe,{...a,ref:t}):s.jsx(Zoe,{...a,ref:t})})});QB.displayName=Eu;var Qoe=y.forwardRef((e,t)=>{const r=oi(Eu,e.__scopeDialog),n=y.useRef(null),a=Ke(t,r.contentRef,n);return y.useEffect(()=>{const i=n.current;if(i)return D0(i)},[]),s.jsx(ZB,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pe(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:pe(e.onFocusOutside,i=>i.preventDefault())})}),Zoe=y.forwardRef((e,t)=>{const r=oi(Eu,e.__scopeDialog),n=y.useRef(!1),a=y.useRef(!1);return s.jsx(ZB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),ZB=y.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=oi(Eu,r),c=y.useRef(null),u=Ke(t,c);return T0(),s.jsxs(s.Fragment,{children:[s.jsx(Wg,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Iu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":jk(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(ele,{titleId:l.titleId}),s.jsx(rle,{contentRef:c,descriptionId:l.descriptionId})]})]})}),wk="DialogTitle",JB=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=oi(wk,r);return s.jsx(Ee.h2,{id:a.titleId,...n,ref:t})});JB.displayName=wk;var e6="DialogDescription",t6=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=oi(e6,r);return s.jsx(Ee.p,{id:a.descriptionId,...n,ref:t})});t6.displayName=e6;var r6="DialogClose",n6=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=oi(r6,r);return s.jsx(Ee.button,{type:"button",...n,ref:t,onClick:pe(e.onClick,()=>a.onOpenChange(!1))})});n6.displayName=r6;function jk(e){return e?"open":"closed"}var s6="DialogTitleWarning",[Joe,a6]=cK(s6,{contentName:Eu,titleName:wk,docsSlug:"dialog"}),ele=({titleId:e})=>{const t=a6(s6),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return y.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},tle="DialogDescriptionWarning",rle=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a6(tle).contentName}}.`;return y.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},_k=WB,i6=KB,Nk=YB,Zg=XB,Jg=QB,ev=JB,tv=t6,H0=n6;const Rt=_k,rv=i6,nle=Nk,o6=y.forwardRef(({className:e,...t},r)=>s.jsx(Zg,{ref:r,className:ae("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));o6.displayName=Zg.displayName;const kt=y.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(nle,{children:[s.jsx(o6,{}),s.jsxs(Jg,{ref:n,className:ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(H0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Fn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));kt.displayName=Jg.displayName;const Pt=({className:e,...t})=>s.jsx("div",{className:ae("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Pt.displayName="DialogHeader";const ar=({className:e,...t})=>s.jsx("div",{className:ae("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ar.displayName="DialogFooter";const At=y.forwardRef(({className:e,...t},r)=>s.jsx(ev,{ref:r,className:ae("text-lg font-semibold leading-none tracking-tight",e),...t}));At.displayName=ev.displayName;const Ot=y.forwardRef(({className:e,...t},r)=>s.jsx(tv,{ref:r,className:ae("text-sm text-muted-foreground",e),...t}));Ot.displayName=tv.displayName;const sle=ks({firstName:Je().min(1,"First name is required").max(50,"First name must be less than 50 characters").trim(),lastName:Je().min(1,"Last name is required").max(50,"Last name must be less than 50 characters").trim(),email:Je().min(1,"Email is required").email("Please enter a valid email address").max(255,"Email must be less than 255 characters").trim(),phone:Je().max(20,"Phone must be less than 20 characters").regex(/^[0-9\s\-\+\(\)]*$/,"Please enter a valid phone number").optional().or(Ic("")),position:Je().min(1,"Position is required").max(100,"Position must be less than 100 characters").trim(),department:Je().max(100,"Department must be less than 100 characters").trim().optional().or(Ic("")),employmentType:Vu(["casual","part_time","full_time","contractor"]),payRate:Je().regex(/^(\d+(\.\d{0,2})?)?$/,"Please enter a valid pay rate").refine(e=>{if(!e)return!0;const t=parseFloat(e);return t>=0&&t<=9999.99},"Pay rate must be between 0 and 9999.99").optional().or(Ic(""))}),ale=ks({title:Je().max(200,"Title must be less than 200 characters").trim().optional().or(Ic("")),employee_name:Je().min(1,"Employee name is required").max(100,"Employee name must be less than 100 characters").trim(),employee_email:Je().min(1,"Employee email is required").email("Please enter a valid email address").max(255,"Email must be less than 255 characters").trim(),position:Je().min(1,"Position is required").max(100,"Position must be less than 100 characters").trim(),department:Je().max(100,"Department must be less than 100 characters").trim().optional().or(Ic("")),start_date:Je().regex(/^(\d{4}-\d{2}-\d{2})?$/,"Please enter a valid date").optional().or(Ic("")),pay_rate:Je().regex(/^(\d+(\.\d{0,2})?)?$/,"Please enter a valid pay rate").refine(e=>{if(!e)return!0;const t=parseFloat(e);return t>=0&&t<=9999.99},"Pay rate must be between 0 and 9999.99").optional().or(Ic("")),employment_type:Vu(["casual","part_time","full_time","contractor"]),content:Je().min(10,"Contract content must be at least 10 characters").max(5e4,"Contract content must be less than 50000 characters")}),PT={firstName:"",lastName:"",email:"",phone:"",position:"",department:"",employmentType:"casual",payRate:""};function ile({open:e,onOpenChange:t,onAdd:r}){var S,E,C,P;const[n,a]=y.useState(PT),[i,o]=y.useState({}),[l,c]=y.useState(null),[u,d]=y.useState(null),[f,h]=y.useState(!1),m=y.useRef(null),{data:g=[]}=sr({queryKey:["departments"],queryFn:async()=>{const{data:A,error:k}=await $.from("departments").select("*").order("name");if(k)throw k;return A}}),{data:p=[]}=sr({queryKey:["positions"],queryFn:async()=>{const{data:A,error:k}=await $.from("positions").select("*, departments(name)").order("name");if(k)throw k;return A}}),v=n.department?p.filter(A=>{const k=g.find(D=>D.name===n.department);return k?A.department_id===k.id:!0}):p,x=A=>{var D;const k=(D=A.target.files)==null?void 0:D[0];if(k){if(k.size>5*1024*1024){J({title:"File too large",description:"Please select an image under 5MB",variant:"destructive"});return}if(!k.type.startsWith("image/")){J({title:"Invalid file type",description:"Please select an image file",variant:"destructive"});return}c(k),d(URL.createObjectURL(k))}},b=()=>{c(null),u&&(URL.revokeObjectURL(u),d(null)),m.current&&(m.current.value="")},w=async()=>{if(!l)return null;const A=l.name.split(".").pop(),k=`${Date.now()}-${Math.random().toString(36).substring(2)}.${A}`,{error:D}=await $.storage.from("employee-avatars").upload(k,l);if(D)throw console.error("Upload error:",D),D;const{data:{publicUrl:R}}=$.storage.from("employee-avatars").getPublicUrl(k);return R},_=()=>{const A=sle.safeParse(n);if(!A.success){const k={};return A.error.errors.forEach(D=>{const R=D.path[0];k[R]||(k[R]=D.message)}),o(k),!1}return o({}),!0},j=async()=>{var A,k;if(!_()){J({title:"Validation Error",description:"Please fix the errors in the form",variant:"destructive"});return}h(!0);try{let D;l&&(D=await w()||void 0),r({firstName:n.firstName.trim(),lastName:n.lastName.trim(),email:n.email.trim(),phone:((A=n.phone)==null?void 0:A.trim())||"",position:n.position.trim(),department:((k=n.department)==null?void 0:k.trim())||"",employmentType:n.employmentType,payRate:n.payRate?parseFloat(n.payRate):0,avatar:D}),a(PT),o({}),b(),t(!1)}catch(D){console.error("Error adding employee:",D),J({title:"Upload Error",description:"Failed to upload employee photo. Please try again.",variant:"destructive"})}finally{h(!1)}},N=(A,k)=>{a({...n,[A]:k}),i[A]&&o({...i,[A]:void 0})};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-lg",children:[s.jsxs(Pt,{children:[s.jsxs(At,{className:"flex items-center gap-2",children:[s.jsx(gu,{className:"h-5 w-5 text-primary"}),"Add New Employee"]}),s.jsx(Ot,{children:"Enter the details for the new employee"})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Or,{className:"h-24 w-24",children:u?s.jsx(qg,{src:u,alt:"Employee photo"}):s.jsxs(Tr,{className:"bg-muted text-muted-foreground text-2xl",children:[((E=(S=n.firstName)==null?void 0:S[0])==null?void 0:E.toUpperCase())||"?",((P=(C=n.lastName)==null?void 0:C[0])==null?void 0:P.toUpperCase())||""]})}),u&&s.jsx(I,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:b,children:s.jsx(Fn,{className:"h-3 w-3"})})]}),s.jsxs("div",{children:[s.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:x,className:"hidden"}),s.jsxs(I,{type:"button",variant:"outline",size:"sm",onClick:()=>{var A;return(A=m.current)==null?void 0:A.click()},children:[s.jsx(jo,{className:"h-4 w-4 mr-2"}),u?"Change Photo":"Upload Photo"]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Personal Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"firstName",children:"First Name *"}),s.jsx(ne,{id:"firstName",value:n.firstName,onChange:A=>N("firstName",A.target.value),placeholder:"John",className:i.firstName?"border-destructive":"",maxLength:50}),i.firstName&&s.jsx("p",{className:"text-xs text-destructive",children:i.firstName})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"lastName",children:"Last Name *"}),s.jsx(ne,{id:"lastName",value:n.lastName,onChange:A=>N("lastName",A.target.value),placeholder:"Smith",className:i.lastName?"border-destructive":"",maxLength:50}),i.lastName&&s.jsx("p",{className:"text-xs text-destructive",children:i.lastName})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"email",children:"Email *"}),s.jsx(ne,{id:"email",type:"email",value:n.email,onChange:A=>N("email",A.target.value),placeholder:"john@example.com",className:i.email?"border-destructive":"",maxLength:255}),i.email&&s.jsx("p",{className:"text-xs text-destructive",children:i.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"phone",children:"Phone"}),s.jsx(ne,{id:"phone",value:n.phone||"",onChange:A=>N("phone",A.target.value),placeholder:"0400 000 000",className:i.phone?"border-destructive":"",maxLength:20}),i.phone&&s.jsx("p",{className:"text-xs text-destructive",children:i.phone})]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Employment Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"department",children:"Department"}),s.jsxs(Ie,{value:n.department||"none",onValueChange:A=>{N("department",A==="none"?"":A),n.position&&N("position","")},children:[s.jsx(Re,{className:i.department?"border-destructive":"",children:s.jsx(Fe,{placeholder:"Select department"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"none",children:"No department"}),g.map(A=>s.jsx(Y,{value:A.name,children:A.name},A.id))]})]}),i.department&&s.jsx("p",{className:"text-xs text-destructive",children:i.department})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"position",children:"Position *"}),s.jsxs(Ie,{value:n.position||"none",onValueChange:A=>N("position",A==="none"?"":A),children:[s.jsx(Re,{className:i.position?"border-destructive":"",children:s.jsx(Fe,{placeholder:"Select position"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"none",children:"Select a position"}),v.map(A=>s.jsx(Y,{value:A.name,children:A.name},A.id))]})]}),i.position&&s.jsx("p",{className:"text-xs text-destructive",children:i.position})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"employmentType",children:"Employment Type"}),s.jsxs(Ie,{value:n.employmentType,onValueChange:A=>N("employmentType",A),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"casual",children:"Casual"}),s.jsx(Y,{value:"part_time",children:"Part-Time"}),s.jsx(Y,{value:"full_time",children:"Full-Time"}),s.jsx(Y,{value:"contractor",children:"Contractor"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"payRate",children:"Pay Rate ($/hr)"}),s.jsx(ne,{id:"payRate",type:"text",inputMode:"decimal",value:n.payRate||"",onChange:A=>N("payRate",A.target.value),placeholder:"40.00",className:i.payRate?"border-destructive":""}),i.payRate&&s.jsx("p",{className:"text-xs text-destructive",children:i.payRate})]})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(I,{variant:"outline",onClick:()=>t(!1),className:"flex-1",disabled:f,children:"Cancel"}),s.jsx(I,{className:"flex-1 gradient-primary",onClick:j,disabled:f,children:f?"Adding...":"Add Employee"})]})]})]})})}const Do=_k,ole=Nk,l6=y.forwardRef(({className:e,...t},r)=>s.jsx(Zg,{className:ae("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));l6.displayName=Zg.displayName;const lle=uh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Li=y.forwardRef(({side:e="right",className:t,children:r,...n},a)=>s.jsxs(ole,{children:[s.jsx(l6,{}),s.jsxs(Jg,{ref:a,className:ae(lle({side:e}),t),...n,children:[r,s.jsxs(H0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Fn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Li.displayName=Jg.displayName;const Fi=({className:e,...t})=>s.jsx("div",{className:ae("flex flex-col space-y-2 text-center sm:text-left",e),...t});Fi.displayName="SheetHeader";const Ui=y.forwardRef(({className:e,...t},r)=>s.jsx(ev,{ref:r,className:ae("text-lg font-semibold text-foreground",e),...t}));Ui.displayName=ev.displayName;const Ro=y.forwardRef(({className:e,...t},r)=>s.jsx(tv,{ref:r,className:ae("text-sm text-muted-foreground",e),...t}));Ro.displayName=tv.displayName;function cle(e,t){return y.useReducer((r,n)=>t[r][n]??r,e)}var Sk="ScrollArea",[c6,XFe]=Qr(Sk),[ule,wa]=c6(Sk),u6=y.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=y.useState(null),[u,d]=y.useState(null),[f,h]=y.useState(null),[m,g]=y.useState(null),[p,v]=y.useState(null),[x,b]=y.useState(0),[w,_]=y.useState(0),[j,N]=y.useState(!1),[S,E]=y.useState(!1),C=Ke(t,A=>c(A)),P=Uu(a);return s.jsx(ule,{scope:r,type:n,dir:P,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:j,onScrollbarXEnabledChange:N,scrollbarY:p,onScrollbarYChange:v,scrollbarYEnabled:S,onScrollbarYEnabledChange:E,onCornerWidthChange:b,onCornerHeightChange:_,children:s.jsx(Ee.div,{dir:P,...o,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});u6.displayName=Sk;var d6="ScrollAreaViewport",f6=y.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=wa(d6,r),l=y.useRef(null),c=Ke(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(Ee.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});f6.displayName=d6;var Bi="ScrollAreaScrollbar",Ck=y.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=wa(Bi,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return y.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(dle,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(fle,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(h6,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(Ek,{...n,ref:t}):null});Ck.displayName=Bi;var dle=y.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=wa(Bi,e.__scopeScrollArea),[i,o]=y.useState(!1);return y.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(dn,{present:r||i,children:s.jsx(h6,{"data-state":i?"visible":"hidden",...n,ref:t})})}),fle=y.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=wa(Bi,e.__scopeScrollArea),i=e.orientation==="horizontal",o=G0(()=>c("SCROLL_END"),100),[l,c]=cle("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),y.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const m=u[d];f!==m&&(c("SCROLL"),o()),f=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,i,c,o]),s.jsx(dn,{present:r||l!=="hidden",children:s.jsx(Ek,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:pe(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:pe(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),h6=y.forwardRef((e,t)=>{const r=wa(Bi,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=y.useState(!1),l=e.orientation==="horizontal",c=G0(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Tf(r.viewport,c),Tf(r.content,c),s.jsx(dn,{present:n||i,children:s.jsx(Ek,{"data-state":i?"visible":"hidden",...a,ref:t})})}),Ek=y.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=wa(Bi,e.__scopeScrollArea),i=y.useRef(null),o=y.useRef(0),[l,c]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=y6(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,m){return yle(h,o.current,l,m)}return r==="horizontal"?s.jsx(hle,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,m=AT(h,l,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?s.jsx(mle,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,m=AT(h,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),hle=y.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=wa(Bi,e.__scopeScrollArea),[o,l]=y.useState(),c=y.useRef(null),u=Ke(t,c,i.onScrollbarXChange);return y.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(p6,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":K0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),b6(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Hx(o.paddingLeft),paddingEnd:Hx(o.paddingRight)}})}})}),mle=y.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=wa(Bi,e.__scopeScrollArea),[o,l]=y.useState(),c=y.useRef(null),u=Ke(t,c,i.onScrollbarYChange);return y.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(p6,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":K0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),b6(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Hx(o.paddingTop),paddingEnd:Hx(o.paddingBottom)}})}})}),[ple,m6]=c6(Bi),p6=y.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=e,m=wa(Bi,r),[g,p]=y.useState(null),v=Ke(t,C=>p(C)),x=y.useRef(null),b=y.useRef(""),w=m.viewport,_=n.content-n.viewport,j=Lr(d),N=Lr(c),S=G0(f,10);function E(C){if(x.current){const P=C.clientX-x.current.left,A=C.clientY-x.current.top;u({x:P,y:A})}}return y.useEffect(()=>{const C=P=>{const A=P.target;(g==null?void 0:g.contains(A))&&j(P,_)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[w,g,_,j]),y.useEffect(N,[n,N]),Tf(g,S),Tf(m.content,S),s.jsx(ple,{scope:r,scrollbar:g,hasThumb:a,onThumbChange:Lr(i),onThumbPointerUp:Lr(o),onThumbPositionChange:N,onThumbPointerDown:Lr(l),children:s.jsx(Ee.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:pe(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),x.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),E(C))}),onPointerMove:pe(e.onPointerMove,E),onPointerUp:pe(e.onPointerUp,C=>{const P=C.target;P.hasPointerCapture(C.pointerId)&&P.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=b.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})})})}),Wx="ScrollAreaThumb",g6=y.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=m6(Wx,e.__scopeScrollArea);return s.jsx(dn,{present:r||a.hasThumb,children:s.jsx(gle,{ref:t,...n})})}),gle=y.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=wa(Wx,r),o=m6(Wx,r),{onThumbPositionChange:l}=o,c=Ke(t,f=>o.onThumbChange(f)),u=y.useRef(void 0),d=G0(()=>{u.current&&(u.current(),u.current=void 0)},100);return y.useEffect(()=>{const f=i.viewport;if(f){const h=()=>{if(d(),!u.current){const m=xle(f,l);u.current=m,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[i.viewport,d,l]),s.jsx(Ee.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:pe(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),g=f.clientX-m.left,p=f.clientY-m.top;o.onThumbPointerDown({x:g,y:p})}),onPointerUp:pe(e.onPointerUp,o.onThumbPointerUp)})});g6.displayName=Wx;var kk="ScrollAreaCorner",v6=y.forwardRef((e,t)=>{const r=wa(kk,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(vle,{...e,ref:t}):null});v6.displayName=kk;var vle=y.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=wa(kk,r),[i,o]=y.useState(0),[l,c]=y.useState(0),u=!!(i&&l);return Tf(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),Tf(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?s.jsx(Ee.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Hx(e){return e?parseInt(e,10):0}function y6(e,t){const r=e/t;return isNaN(r)?0:r}function K0(e){const t=y6(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function yle(e,t,r,n="ltr"){const a=K0(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return x6([c,u],f)(e)}function AT(e,t,r="ltr"){const n=K0(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],u=zp(e,c);return x6([0,o],[0,l])(u)}function x6(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function b6(e,t){return e>0&&e<t}var xle=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function G0(e,t){const r=Lr(e),n=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(n.current),[]),y.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Tf(e,t){const r=Lr(t);Vr(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var w6=u6,ble=f6,wle=v6;const qu=y.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(w6,{ref:n,className:ae("relative overflow-hidden",e),...r,children:[s.jsx(ble,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(j6,{}),s.jsx(wle,{})]}));qu.displayName=w6.displayName;const j6=y.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(Ck,{ref:n,orientation:t,className:ae("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(g6,{className:"relative flex-1 rounded-full bg-border"})}));j6.displayName=Ck.displayName;var Pk="Progress",Ak=100,[jle,QFe]=Qr(Pk),[_le,Nle]=jle(Pk),_6=y.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=Sle,...o}=e;(a||a===0)&&!OT(a)&&console.error(Cle(`${a}`,"Progress"));const l=OT(a)?a:Ak;n!==null&&!TT(n,l)&&console.error(Ele(`${n}`,"Progress"));const c=TT(n,l)?n:null,u=Kx(c)?i(c,l):void 0;return s.jsx(_le,{scope:r,value:c,max:l,children:s.jsx(Ee.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Kx(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":C6(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});_6.displayName=Pk;var N6="ProgressIndicator",S6=y.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=Nle(N6,r);return s.jsx(Ee.div,{"data-state":C6(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});S6.displayName=N6;function Sle(e,t){return`${Math.round(e/t*100)}%`}function C6(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Kx(e){return typeof e=="number"}function OT(e){return Kx(e)&&!isNaN(e)&&e>0}function TT(e,t){return Kx(e)&&!isNaN(e)&&e<=t&&e>=0}function Cle(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ak}\`.`}function Ele(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ak} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var E6=_6,kle=S6;const pa=y.forwardRef(({className:e,value:t,...r},n)=>s.jsx(E6,{ref:n,className:ae("relative h-4 w-full overflow-hidden rounded-full bg-muted",e),...r,children:s.jsx(kle,{className:ae("h-full w-full flex-1 transition-all",(t??0)<50?"bg-destructive":(t??0)<80?"bg-warning":"bg-success"),style:{transform:`translateX(-${100-(t||0)}%)`}})}));pa.displayName=E6.displayName;var Y0="Popover",[k6,ZFe]=Qr(Y0,[tc]),nv=tc(),[Ple,oc]=k6(Y0),P6=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=nv(t),c=y.useRef(null),[u,d]=y.useState(!1),[f,h]=Hs({prop:n,defaultProp:a??!1,onChange:i,caller:Y0});return s.jsx(j0,{...l,children:s.jsx(Ple,{scope:t,contentId:ha(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:y.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:y.useCallback(()=>d(!0),[]),onCustomAnchorRemove:y.useCallback(()=>d(!1),[]),modal:o,children:r})})};P6.displayName=Y0;var A6="PopoverAnchor",Ale=y.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=oc(A6,r),i=nv(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return y.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Bg,{...i,...n,ref:t})});Ale.displayName=A6;var O6="PopoverTrigger",T6=y.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=oc(O6,r),i=nv(r),o=Ke(t,a.triggerRef),l=s.jsx(Ee.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":I6(a.open),...n,ref:o,onClick:pe(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(Bg,{asChild:!0,...i,children:l})});T6.displayName=O6;var Ok="PopoverPortal",[Ole,Tle]=k6(Ok,{forceMount:void 0}),D6=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=oc(Ok,t);return s.jsx(Ole,{scope:t,forceMount:r,children:s.jsx(dn,{present:r||i.open,children:s.jsx(ch,{asChild:!0,container:a,children:n})})})};D6.displayName=Ok;var Df="PopoverContent",R6=y.forwardRef((e,t)=>{const r=Tle(Df,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=oc(Df,e.__scopePopover);return s.jsx(dn,{present:n||i.open,children:i.modal?s.jsx(Rle,{...a,ref:t}):s.jsx(Mle,{...a,ref:t})})});R6.displayName=Df;var Dle=Wl("PopoverContent.RemoveScroll"),Rle=y.forwardRef((e,t)=>{const r=oc(Df,e.__scopePopover),n=y.useRef(null),a=Ke(t,n),i=y.useRef(!1);return y.useEffect(()=>{const o=n.current;if(o)return D0(o)},[]),s.jsx(Kg,{as:Dle,allowPinchZoom:!0,children:s.jsx(M6,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:pe(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:pe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Mle=y.forwardRef((e,t)=>{const r=oc(Df,e.__scopePopover),n=y.useRef(!1),a=y.useRef(!1);return s.jsx(M6,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),M6=y.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=oc(Df,r),m=nv(r);return T0(),s.jsx(Wg,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Iu,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:s.jsx(_0,{"data-state":I6(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),$6="PopoverClose",$le=y.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=oc($6,r);return s.jsx(Ee.button,{type:"button",...n,ref:t,onClick:pe(e.onClick,()=>a.onOpenChange(!1))})});$le.displayName=$6;var Ile="PopoverArrow",Lle=y.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=nv(r);return s.jsx(N0,{...a,...n,ref:t})});Lle.displayName=Ile;function I6(e){return e?"open":"closed"}var Fle=P6,Ule=T6,Ble=D6,L6=R6;const Di=Fle,Ri=Ule,ei=y.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(Ble,{children:s.jsx(L6,{ref:a,align:t,sideOffset:r,className:ae("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ei.displayName=L6.displayName;var nt=function(){return nt=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},nt.apply(this,arguments)};function zle(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function F6(e,t,r){for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function sv(e){return e.mode==="multiple"}function av(e){return e.mode==="range"}function X0(e){return e.mode==="single"}var Vle={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function qle(e,t){return de(e,"LLLL y",t)}function Wle(e,t){return de(e,"d",t)}function Hle(e,t){return de(e,"LLLL",t)}function Kle(e){return"".concat(e)}function Gle(e,t){return de(e,"cccccc",t)}function Yle(e,t){return de(e,"yyyy",t)}var Xle=Object.freeze({__proto__:null,formatCaption:qle,formatDay:Wle,formatMonthCaption:Hle,formatWeekNumber:Kle,formatWeekdayName:Gle,formatYearCaption:Yle}),Qle=function(e,t,r){return de(e,"do MMMM (EEEE)",r)},Zle=function(){return"Month: "},Jle=function(){return"Go to next month"},ece=function(){return"Go to previous month"},tce=function(e,t){return de(e,"cccc",t)},rce=function(e){return"Week n. ".concat(e)},nce=function(){return"Year: "},sce=Object.freeze({__proto__:null,labelDay:Qle,labelMonthDropdown:Zle,labelNext:Jle,labelPrevious:ece,labelWeekNumber:rce,labelWeekday:tce,labelYearDropdown:nce});function ace(){var e="buttons",t=Vle,r=ik,n={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:Xle,labels:sce,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function ice(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=_s(n):t&&(i=new Date(t,0,1)),a?o=L0(a):r&&(o=new Date(r,11,31)),{fromDate:i?Nf(i):void 0,toDate:o?Nf(o):void 0}}var U6=y.createContext(void 0);function oce(e){var t,r=e.initialProps,n=ace(),a=ice(r),i=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(X0(r)||sv(r)||av(r))&&(c=r.onSelect);var u=nt(nt(nt({},n),r),{captionLayout:l,classNames:nt(nt({},n.classNames),r.classNames),components:nt({},r.components),formatters:nt(nt({},n.formatters),r.formatters),fromDate:i,labels:nt(nt({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:nt(nt({},n.modifiers),r.modifiers),modifiersClassNames:nt(nt({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:nt(nt({},n.styles),r.styles),toDate:o});return s.jsx(U6.Provider,{value:u,children:e.children})}function gr(){var e=y.useContext(U6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function B6(e){var t=gr(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function lce(e){return s.jsx("svg",nt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function z6(e){var t,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,u=gr(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:lce;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:n,children:i}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function cce(e){var t,r=gr(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var f=[];if(Oae(n,a))for(var h=_s(n),m=n.getMonth();m<=a.getMonth();m++)f.push(u_(h,m));else for(var h=_s(new Date),m=0;m<=11;m++)f.push(u_(h,m));var g=function(v){var x=Number(v.target.value),b=u_(_s(e.displayMonth),x);e.onChange(b)},p=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:z6;return s.jsx(p,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(v){return s.jsx("option",{value:v.getMonth(),children:l(v,{locale:o})},v.getMonth())})})}function uce(e){var t,r=e.displayMonth,n=gr(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!a)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});for(var m=a.getFullYear(),g=i.getFullYear(),p=m;p<=g;p++)h.push(rT(_U(new Date),p));var v=function(b){var w=rT(_s(r),Number(b.target.value));e.onChange(w)},x=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:z6;return s.jsx(x,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:r.getFullYear(),caption:d(r,{locale:o}),children:h.map(function(b){return s.jsx("option",{value:b.getFullYear(),children:d(b,{locale:o})},b.getFullYear())})})}function dce(e,t){var r=y.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function fce(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&Cf(i,a)<0){var u=-1*(c-1);a=Ja(i,u)}return o&&Cf(a,o)<0&&(a=o),_s(a)}function hce(){var e=gr(),t=fce(e),r=dce(t,e.month),n=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var c=_s(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,i]}function mce(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=_s(e),i=_s(Ja(a,n)),o=Cf(i,a),l=[],c=0;c<o;c++){var u=Ja(a,c);l.push(u)}return r&&(l=l.reverse()),l}function pce(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=_s(e);if(!r)return Ja(l,o);var c=Cf(r,e);if(!(c<i))return Ja(l,o)}}function gce(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=_s(e);if(!r)return Ja(l,-o);var c=Cf(l,r);if(!(c<=0))return Ja(l,-o)}}var V6=y.createContext(void 0);function vce(e){var t=gr(),r=hce(),n=r[0],a=r[1],i=mce(n,t),o=pce(n,t),l=gce(n,t),c=function(f){return i.some(function(h){return lk(f,h)})},u=function(f,h){c(f)||(h&&PU(f,h)?a(Ja(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(V6.Provider,{value:d,children:e.children})}function iv(){var e=y.useContext(V6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function DT(e){var t,r=gr(),n=r.classNames,a=r.styles,i=r.components,o=iv().goToMonth,l=function(d){o(Ja(d,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:B6,u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:u}),s.jsx(cce,{onChange:l,displayMonth:e.displayMonth}),s.jsx(uce,{onChange:l,displayMonth:e.displayMonth})]})}function yce(e){return s.jsx("svg",nt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function xce(e){return s.jsx("svg",nt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Gx=y.forwardRef(function(e,t){var r=gr(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),l=nt(nt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",nt({},e,{ref:t,type:"button",className:o,style:l}))});function bce(e){var t,r,n=gr(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var h=u(e.previousMonth,{locale:i}),m=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:i}),p=[o.nav_button,o.nav_button_next].join(" "),v=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:xce,x=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:yce;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(Gx,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(v,{className:o.nav_icon,style:l.nav_icon}):s.jsx(x,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(Gx,{name:"next-month","aria-label":g,className:p,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(x,{className:o.nav_icon,style:l.nav_icon}):s.jsx(v,{className:o.nav_icon,style:l.nav_icon})})]})}function RT(e){var t=gr().numberOfMonths,r=iv(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(g){return lk(e.displayMonth,g)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){n&&i(n)},m=function(){a&&i(a)};return s.jsx(bce,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:m})}function wce(e){var t,r=gr(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:B6,u;return a?u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=s.jsx(DT,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(DT,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(RT,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(RT,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:i.caption,children:u})}function jce(e){var t=gr(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?s.jsx("tfoot",{className:a,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function _ce(e,t,r){for(var n=r?bu(new Date):Pi(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=sn(n,i);a.push(o)}return a}function Nce(){var e=gr(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=_ce(a,i,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},f)})]})}function Sce(){var e,t=gr(),r=t.classNames,n=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:Nce;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(i,{})})}function Cce(e){var t=gr(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var Tk=y.createContext(void 0);function Ece(e){if(!sv(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(Tk.Provider,{value:t,children:e.children})}return s.jsx(kce,{initialProps:e.initialProps,children:e.children})}function kce(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,o=function(u,d,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var g=!!(d.selected&&a&&(n==null?void 0:n.length)===a);if(!g){var p=!!(!d.selected&&i&&(n==null?void 0:n.length)===i);if(!p){var v=n?F6([],n):[];if(d.selected){var x=v.findIndex(function(b){return Jn(u,b)});v.splice(x,1)}else v.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,v,u,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=i&&n.length>i-1,f=n.some(function(h){return Jn(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(Tk.Provider,{value:c,children:r})}function Dk(){var e=y.useContext(Tk);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Pce(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?Jn(a,e)&&Jn(n,e)?void 0:Jn(a,e)?{from:a,to:void 0}:Jn(n,e)?void 0:T1(n,e)?{from:e,to:a}:{from:n,to:e}:a?T1(e,a)?{from:a,to:e}:{from:e,to:a}:n?PU(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var Rk=y.createContext(void 0);function Ace(e){if(!av(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(Rk.Provider,{value:t,children:e.children})}return s.jsx(Oce,{initialProps:e.initialProps,children:e.children})}function Oce(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,o=a.to,l=t.min,c=t.max,u=function(m,g,p){var v,x;(v=t.onDayClick)===null||v===void 0||v.call(t,m,g,p);var b=Pce(m,n);(x=t.onSelect)===null||x===void 0||x.call(t,b,m,g,p)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],Jn(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),l&&(i&&!o&&d.disabled.push({after:l_(i,l-1),before:sn(i,l-1)}),i&&o&&d.disabled.push({after:i,before:sn(i,l-1)}),!i&&o&&d.disabled.push({after:l_(o,l-1),before:sn(o,l-1)})),c){if(i&&!o&&(d.disabled.push({before:sn(i,-c+1)}),d.disabled.push({after:sn(i,c-1)})),i&&o){var f=ua(o,i)+1,h=c-f;d.disabled.push({before:l_(i,h)}),d.disabled.push({after:sn(o,h)})}!i&&o&&(d.disabled.push({before:sn(o,-c+1)}),d.disabled.push({after:sn(o,c-1)}))}return s.jsx(Rk.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function Mk(){var e=y.useContext(Rk);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function zy(e){return Array.isArray(e)?F6([],e):e!==void 0?[e]:[]}function Tce(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=zy(a)}),t}var ti;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(ti||(ti={}));var Dce=ti.Selected,Gi=ti.Disabled,Rce=ti.Hidden,Mce=ti.Today,h_=ti.RangeEnd,m_=ti.RangeMiddle,p_=ti.RangeStart,$ce=ti.Outside;function Ice(e,t,r){var n,a=(n={},n[Dce]=zy(e.selected),n[Gi]=zy(e.disabled),n[Rce]=zy(e.hidden),n[Mce]=[e.today],n[h_]=[],n[m_]=[],n[p_]=[],n[$ce]=[],n);return e.fromDate&&a[Gi].push({before:e.fromDate}),e.toDate&&a[Gi].push({after:e.toDate}),sv(e)?a[Gi]=a[Gi].concat(t.modifiers[Gi]):av(e)&&(a[Gi]=a[Gi].concat(r.modifiers[Gi]),a[p_]=r.modifiers[p_],a[m_]=r.modifiers[m_],a[h_]=r.modifiers[h_]),a}var q6=y.createContext(void 0);function Lce(e){var t=gr(),r=Dk(),n=Mk(),a=Ice(t,r,n),i=Tce(t.modifiers),o=nt(nt({},a),i);return s.jsx(q6.Provider,{value:o,children:e.children})}function W6(){var e=y.useContext(q6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Fce(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Uce(e){return!!(e&&typeof e=="object"&&"from"in e)}function Bce(e){return!!(e&&typeof e=="object"&&"after"in e)}function zce(e){return!!(e&&typeof e=="object"&&"before"in e)}function Vce(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function qce(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=ua(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=ua(e,n)>=0&&ua(a,e)>=0;return o}return a?Jn(a,e):n?Jn(n,e):!1}function Wce(e){return sk(e)}function Hce(e){return Array.isArray(e)&&e.every(sk)}function Kce(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(Wce(r))return Jn(e,r);if(Hce(r))return r.includes(e);if(Uce(r))return qce(e,r);if(Vce(r))return r.dayOfWeek.includes(e.getDay());if(Fce(r)){var n=ua(r.before,e),a=ua(r.after,e),i=n>0,o=a<0,l=T1(r.before,r.after);return l?o&&i:i||o}return Bce(r)?ua(e,r.after)>0:zce(r)?ua(r.before,e)>0:typeof r=="function"?r(e):!1})}function $k(e,t,r){var n=Object.keys(t).reduce(function(i,o){var l=t[o];return Kce(e,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!lk(e,r)&&(a.outside=!0),a}function Gce(e,t){for(var r=_s(e[0]),n=L0(e[e.length-1]),a,i,o=r;o<=n;){var l=$k(o,t),c=!l.disabled&&!l.hidden;if(!c){o=sn(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=sn(o,1)}return i||a}var Yce=365;function H6(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,h={day:sn,week:A1,month:Ja,year:xse,startOfWeek:function(v){return a.ISOWeek?bu(v):Pi(v,{locale:f,weekStartsOn:c})},endOfWeek:function(v){return a.ISOWeek?NU(v):ak(v,{locale:f,weekStartsOn:c})}},m=h[r](e,n==="after"?1:-1);n==="before"&&u?m=bse([u,m]):n==="after"&&d&&(m=wse([d,m]));var g=!0;if(i){var p=$k(m,i);g=!p.disabled&&!p.hidden}return g?m:l.count>Yce?l.lastFocused:H6(m,{moveBy:r,direction:n,context:a,modifiers:i,retry:nt(nt({},l),{count:l.count+1})})}var K6=y.createContext(void 0);function Xce(e){var t=iv(),r=W6(),n=y.useState(),a=n[0],i=n[1],o=y.useState(),l=o[0],c=o[1],u=Gce(t.displayMonths,r),d=a??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(a),i(void 0)},h=function(v){i(v)},m=gr(),g=function(v,x){if(a){var b=H6(a,{moveBy:v,direction:x,context:m,modifiers:r});Jn(a,b)||(t.goToDate(b,a),h(b))}},p={focusedDay:a,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return s.jsx(K6.Provider,{value:p,children:e.children})}function Ik(){var e=y.useContext(K6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Qce(e,t){var r=W6(),n=$k(e,r,t);return n}var Lk=y.createContext(void 0);function Zce(e){if(!X0(e.initialProps)){var t={selected:void 0};return s.jsx(Lk.Provider,{value:t,children:e.children})}return s.jsx(Jce,{initialProps:e.initialProps,children:e.children})}function Jce(e){var t=e.initialProps,r=e.children,n=function(i,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:n};return s.jsx(Lk.Provider,{value:a,children:r})}function G6(){var e=y.useContext(Lk);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function eue(e,t){var r=gr(),n=G6(),a=Dk(),i=Mk(),o=Ik(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,p=o.focusYearBefore,v=o.focusYearAfter,x=o.focusStartOfWeek,b=o.focusEndOfWeek,w=function(L){var M,T,F,Z;X0(r)?(M=n.onDayClick)===null||M===void 0||M.call(n,e,t,L):sv(r)?(T=a.onDayClick)===null||T===void 0||T.call(a,e,t,L):av(r)?(F=i.onDayClick)===null||F===void 0||F.call(i,e,t,L):(Z=r.onDayClick)===null||Z===void 0||Z.call(r,e,t,L)},_=function(L){var M;h(e),(M=r.onDayFocus)===null||M===void 0||M.call(r,e,t,L)},j=function(L){var M;f(),(M=r.onDayBlur)===null||M===void 0||M.call(r,e,t,L)},N=function(L){var M;(M=r.onDayMouseEnter)===null||M===void 0||M.call(r,e,t,L)},S=function(L){var M;(M=r.onDayMouseLeave)===null||M===void 0||M.call(r,e,t,L)},E=function(L){var M;(M=r.onDayPointerEnter)===null||M===void 0||M.call(r,e,t,L)},C=function(L){var M;(M=r.onDayPointerLeave)===null||M===void 0||M.call(r,e,t,L)},P=function(L){var M;(M=r.onDayTouchCancel)===null||M===void 0||M.call(r,e,t,L)},A=function(L){var M;(M=r.onDayTouchEnd)===null||M===void 0||M.call(r,e,t,L)},k=function(L){var M;(M=r.onDayTouchMove)===null||M===void 0||M.call(r,e,t,L)},D=function(L){var M;(M=r.onDayTouchStart)===null||M===void 0||M.call(r,e,t,L)},R=function(L){var M;(M=r.onDayKeyUp)===null||M===void 0||M.call(r,e,t,L)},U=function(L){var M;switch(L.key){case"ArrowLeft":L.preventDefault(),L.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":L.preventDefault(),L.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":L.preventDefault(),L.stopPropagation(),u();break;case"ArrowUp":L.preventDefault(),L.stopPropagation(),d();break;case"PageUp":L.preventDefault(),L.stopPropagation(),L.shiftKey?p():m();break;case"PageDown":L.preventDefault(),L.stopPropagation(),L.shiftKey?v():g();break;case"Home":L.preventDefault(),L.stopPropagation(),x();break;case"End":L.preventDefault(),L.stopPropagation(),b();break}(M=r.onDayKeyDown)===null||M===void 0||M.call(r,e,t,L)},B={onClick:w,onFocus:_,onBlur:j,onKeyDown:U,onKeyUp:R,onMouseEnter:N,onMouseLeave:S,onPointerEnter:E,onPointerLeave:C,onTouchCancel:P,onTouchEnd:A,onTouchMove:k,onTouchStart:D};return B}function tue(){var e=gr(),t=G6(),r=Dk(),n=Mk(),a=X0(e)?t.selected:sv(e)?r.selected:av(e)?n.selected:void 0;return a}function rue(e){return Object.values(ti).includes(e)}function nue(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(rue(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function sue(e,t){var r=nt({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=nt(nt({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function aue(e,t,r){var n,a,i,o=gr(),l=Ik(),c=Qce(e,t),u=eue(e,c),d=tue(),f=!!(o.onDayClick||o.mode!=="default");y.useEffect(function(){var N;c.outside||l.focusedDay&&f&&Jn(l.focusedDay,e)&&((N=r.current)===null||N===void 0||N.focus())},[l.focusedDay,e,r,f,c.outside]);var h=nue(o,c).join(" "),m=sue(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),p=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:Cce,v=s.jsx(p,{date:e,displayMonth:t,activeModifiers:c}),x={style:m,className:h,children:v,role:"gridcell"},b=l.focusTarget&&Jn(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&Jn(l.focusedDay,e),_=nt(nt(nt({},x),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||b?0:-1,n)),u),j={isButton:f,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:x};return j}function iue(e){var t=y.useRef(null),r=aue(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(Gx,nt({name:"day",ref:t},r.buttonProps)):s.jsx("div",nt({},r.divProps))}function oue(e){var t=e.number,r=e.dates,n=gr(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return s.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:d});var f=c(Number(t),{locale:l}),h=function(m){a(t,r,m)};return s.jsx(Gx,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:h,children:d})}function lue(e){var t,r,n=gr(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:iue,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:oue,d;return o&&(d=s.jsx("td",{className:i.cell,style:a.cell,children:s.jsx(u,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:i.row,style:a.row,children:[d,e.dates.map(function(f){return s.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:f})},kae(f))})]})}function MT(e,t,r){for(var n=r!=null&&r.ISOWeek?NU(t):ak(t,r),a=r!=null&&r.ISOWeek?bu(e):Pi(e,r),i=ua(n,a),o=[],l=0;l<=i;l++)o.push(sn(a,l));var c=o.reduce(function(u,d){var f=r!=null&&r.ISOWeek?SU(d):EU(d,r),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function cue(e,t){var r=MT(_s(e),L0(e),t);if(t!=null&&t.useFixedWeeks){var n=Aae(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=A1(i,6-n),l=MT(A1(i,1),o,t);r.push.apply(r,l)}}return r}function uue(e){var t,r,n,a=gr(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=cue(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:h}),p=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:Sce,v=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:lue,x=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:jce;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(p,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(b){return s.jsx(v,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),s.jsx(x,{displayMonth:e.displayMonth})]})}function due(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var fue=due()?y.useLayoutEffect:y.useEffect,g_=!1,hue=0;function $T(){return"react-day-picker-".concat(++hue)}function mue(e){var t,r=e??(g_?$T():null),n=y.useState(r),a=n[0],i=n[1];return fue(function(){a===null&&i($T())},[]),y.useEffect(function(){g_===!1&&(g_=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function pue(e){var t,r,n=gr(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,c=iv().displayMonths,u=mue(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,p=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(f.push(i.caption_start),h=nt(nt({},h),o.caption_start)),g&&(f.push(i.caption_end),h=nt(nt({},h),o.caption_end)),p&&(f.push(i.caption_between),h=nt(nt({},h),o.caption_between));var v=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:wce;return s.jsxs("div",{className:f.join(" "),style:h,children:[s.jsx(v,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(uue,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function gue(e){var t=gr(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function vue(e){var t,r,n=e.initialProps,a=gr(),i=Ik(),o=iv(),l=y.useState(!1),c=l[0],u=l[1];y.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=nt(nt({},a.styles.root),a.style),h=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,p){var v;return nt(nt({},g),(v={},v[p]=n[p],v))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:gue;return s.jsx("div",nt({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:s.jsx(m,{children:o.displayMonths.map(function(g,p){return s.jsx(pue,{displayIndex:p,displayMonth:g},p)})})}))}function yue(e){var t=e.children,r=zle(e,["children"]);return s.jsx(oce,{initialProps:r,children:s.jsx(vce,{children:s.jsx(Zce,{initialProps:r,children:s.jsx(Ece,{initialProps:r,children:s.jsx(Ace,{initialProps:r,children:s.jsx(Lce,{children:s.jsx(Xce,{children:t})})})})})})})}function xue(e){return s.jsx(yue,nt({},e,{children:s.jsx(vue,{initialProps:e})}))}function ri({className:e,classNames:t,showOutsideDays:r=!0,...n}){return s.jsx(xue,{showOutsideDays:r,className:ae("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ae(Tp({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ae(Tp({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>s.jsx(SE,{className:"h-4 w-4"}),IconRight:({...a})=>s.jsx(Oo,{className:"h-4 w-4"})},...n})}ri.displayName="Calendar";const v_=[{value:"police_check",label:"Police Check",defaultValidityYears:3},{value:"ndis_screening",label:"NDIS Worker Screening",defaultValidityYears:5},{value:"first_aid",label:"First Aid Certificate",defaultValidityYears:3},{value:"cpr",label:"CPR Certificate",defaultValidityYears:1},{value:"wwcc_vic",label:"Working with Children's Check Victoria",defaultValidityYears:5},{value:"wwcc_nsw",label:"Working with Children's Check NSW",defaultValidityYears:5},{value:"drivers_license",label:"Drivers License",defaultValidityYears:10},{value:"training",label:"Training Certificate",defaultValidityYears:2},{value:"other",label:"Other",defaultValidityYears:1}],bue=ks({name:Je().min(1,"Name is required").max(100,"Name must be less than 100 characters"),type:Vu(["police_check","ndis_screening","first_aid","cpr","wwcc_vic","wwcc_nsw","drivers_license","training","other"]),issueDate:Nu({required_error:"Issue date is required"}),expiryDate:Nu({required_error:"Expiry date is required"})});function IT(e){const r=Ai(e,new Date);return r<0?"expired":r<=30?"expiring":"compliant"}function wue(e){switch(e){case"expired":return s.jsx(or,{className:"h-4 w-4 text-destructive"});case"expiring":return s.jsx(xt,{className:"h-4 w-4 text-warning"});case"compliant":return s.jsx(jt,{className:"h-4 w-4 text-success"});case"pending":return s.jsx(xt,{className:"h-4 w-4 text-muted-foreground"})}}function jue({open:e,onOpenChange:t,certification:r,onSave:n,onDelete:a}){const i=!!r,o=y.useRef(null),[l,c]=y.useState({name:(r==null?void 0:r.name)||"",type:(r==null?void 0:r.type)||"police_check",issueDate:r!=null&&r.issueDate?new Date(r.issueDate):void 0,expiryDate:r!=null&&r.expiryDate?new Date(r.expiryDate):void 0}),[u,d]=y.useState(null),[f,h]=y.useState({}),[m,g]=y.useState(!1),p=j=>{const N=v_.find(P=>P.value===j),S=j,E=(N==null?void 0:N.label)||"";let C=l.expiryDate;l.issueDate&&N&&(C=sn(l.issueDate,N.defaultValidityYears*365)),c({...l,type:S,name:l.name||E,expiryDate:C})},v=j=>{if(!j){c({...l,issueDate:void 0});return}const N=v_.find(E=>E.value===l.type),S=N?sn(j,N.defaultValidityYears*365):l.expiryDate;c({...l,issueDate:j,expiryDate:S})},x=j=>{var C;const N=(C=j.target.files)==null?void 0:C[0];if(!N)return;if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(N.type)){J({title:"Invalid File Type",description:"Please upload a PDF or image file (JPG, PNG)",variant:"destructive"});return}const E=10*1024*1024;if(N.size>E){J({title:"File Too Large",description:"Please upload a file smaller than 10MB",variant:"destructive"});return}d(N)},b=()=>{const j=bue.safeParse(l);if(!j.success){const S={};j.error.errors.forEach(E=>{E.path[0]&&(S[E.path[0]]=E.message)}),h(S);return}if(l.expiryDate&&l.issueDate&&l.expiryDate<=l.issueDate){h({expiryDate:"Expiry date must be after issue date"});return}g(!0);const N={id:(r==null?void 0:r.id)||`cert-${Date.now()}`,name:l.name.trim(),type:l.type,issueDate:l.issueDate.toISOString().split("T")[0],expiryDate:l.expiryDate.toISOString().split("T")[0],status:IT(l.expiryDate),documentId:r==null?void 0:r.documentId};n(N,u||void 0),g(!1),t(!1),c({name:"",type:"police_check",issueDate:void 0,expiryDate:void 0}),d(null),h({})},w=()=>{r&&a&&(a(r.id),t(!1))},_=l.expiryDate?IT(l.expiryDate):null;return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-md",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:i?"Edit Certification":"Add Certification"}),s.jsx(Ot,{children:i?"Update the certification details and upload a new document if needed.":"Add a new compliance certification with document upload."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"cert-type",children:"Certification Type *"}),s.jsxs(Ie,{value:l.type,onValueChange:p,children:[s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select type"})}),s.jsx(Me,{className:"bg-popover",children:v_.map(j=>s.jsx(Y,{value:j.value,children:j.label},j.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"cert-name",children:"Certificate Name *"}),s.jsx(ne,{id:"cert-name",value:l.name,onChange:j=>c({...l,name:j.target.value}),placeholder:"e.g., National Police Certificate",maxLength:100}),f.name&&s.jsx("p",{className:"text-xs text-destructive",children:f.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Issue Date *"}),s.jsxs(Di,{children:[s.jsx(Ri,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:ae("w-full justify-start text-left font-normal",!l.issueDate&&"text-muted-foreground"),children:[s.jsx(Vt,{className:"mr-2 h-4 w-4"}),l.issueDate?de(l.issueDate,"PPP"):"Select issue date"]})}),s.jsx(ei,{className:"w-auto p-0",align:"start",children:s.jsx(ri,{mode:"single",selected:l.issueDate,onSelect:v,disabled:j=>j>new Date,initialFocus:!0,className:ae("p-3 pointer-events-auto")})})]}),f.issueDate&&s.jsx("p",{className:"text-xs text-destructive",children:f.issueDate})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Expiry Date *"}),s.jsxs(Di,{children:[s.jsx(Ri,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:ae("w-full justify-start text-left font-normal",!l.expiryDate&&"text-muted-foreground"),children:[s.jsx(Vt,{className:"mr-2 h-4 w-4"}),l.expiryDate?de(l.expiryDate,"PPP"):"Select expiry date"]})}),s.jsx(ei,{className:"w-auto p-0",align:"start",children:s.jsx(ri,{mode:"single",selected:l.expiryDate,onSelect:j=>c({...l,expiryDate:j}),disabled:j=>l.issueDate?j<=l.issueDate:!1,initialFocus:!0,className:ae("p-3 pointer-events-auto")})})]}),f.expiryDate&&s.jsx("p",{className:"text-xs text-destructive",children:f.expiryDate}),_&&s.jsxs("div",{className:ae("flex items-center gap-2 text-xs p-2 rounded-md",_==="expired"&&"bg-destructive/10 text-destructive",_==="expiring"&&"bg-warning/10 text-warning",_==="compliant"&&"bg-success/10 text-success"),children:[wue(_),s.jsxs("span",{children:[_==="expired"&&"This certificate has expired",_==="expiring"&&`Expires in ${Ai(l.expiryDate,new Date)} days`,_==="compliant"&&`Valid for ${Ai(l.expiryDate,new Date)} days`]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Supporting Document"}),s.jsx("div",{className:"border-2 border-dashed border-muted rounded-lg p-4",children:u?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(jo,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"truncate max-w-[200px]",children:u.name})]}),s.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>d(null),children:s.jsx(Fn,{className:"h-4 w-4"})})]}):s.jsxs("div",{className:"text-center",children:[s.jsx(jo,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Upload certificate document"}),s.jsx(I,{variant:"outline",size:"sm",onClick:()=>{var j;return(j=o.current)==null?void 0:j.click()},children:"Choose File"}),s.jsx("input",{ref:o,type:"file",accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:x})]})}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepted formats: PDF, JPG, PNG (max 10MB)"})]})]}),s.jsxs(ar,{className:"flex-col sm:flex-row gap-2",children:[i&&a&&s.jsx(I,{variant:"destructive",onClick:w,className:"w-full sm:w-auto",children:"Delete"}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto sm:ml-auto",children:[s.jsx(I,{variant:"outline",onClick:()=>t(!1),className:"flex-1 sm:flex-none",children:"Cancel"}),s.jsx(I,{onClick:b,disabled:m,className:"flex-1 sm:flex-none gradient-primary",children:m?"Saving...":i?"Update":"Add Certification"})]})]})]})})}const _ue={casual:"Casual",part_time:"Part-Time",full_time:"Full-Time",contractor:"Contractor"},Nue={casual:"bg-info/10 text-info",part_time:"bg-primary/10 text-primary",full_time:"bg-success/10 text-success",contractor:"bg-warning/10 text-warning"};function Sue({employee:e,open:t,onOpenChange:r,onUpdate:n}){var R,U,B,L,M;const[a,i]=y.useState(!1),[o,l]=y.useState({}),[c,u]=y.useState(!1),[d,f]=y.useState(!1),[h,m]=y.useState(null),g=y.useRef(null);if(!e)return null;const p=T=>{const F=new Date(T);return{daysUntil:Ai(F,new Date),expiry:F}},v=T=>{switch(T){case"expired":return s.jsx(or,{className:"h-4 w-4 text-destructive"});case"expiring":return s.jsx(xt,{className:"h-4 w-4 text-warning"});case"compliant":return s.jsx(jt,{className:"h-4 w-4 text-success"});case"pending":return s.jsx(xt,{className:"h-4 w-4 text-muted-foreground"})}},x=()=>{m(null),f(!0)},b=T=>{m(T),f(!0)},w=(T,F)=>{let Z=[...e.documents];if(F){const ie={id:`doc-${Date.now()}`,name:F.name,type:"certificate",uploadedAt:new Date().toISOString(),url:URL.createObjectURL(F)};Z=[...Z,ie],T.documentId=ie.id}const W=e.certifications.findIndex(ie=>ie.id===T.id);let K;W>=0?(K=[...e.certifications],K[W]=T):K=[...e.certifications,T];const V=K.some(ie=>ie.status==="expired"),le=K.some(ie=>ie.status==="expiring"),be=K.some(ie=>ie.status==="pending");let ce="compliant";V?ce="expired":le?ce="expiring":be&&(ce="pending");const Pe={...e,certifications:K,documents:Z,complianceStatus:ce};n==null||n(Pe),J({title:W>=0?"Certification Updated":"Certification Added",description:`${T.name} has been ${W>=0?"updated":"added"} successfully.`})},_=T=>{const F=e.certifications.filter(be=>be.id!==T),Z=F.some(be=>be.status==="expired"),W=F.some(be=>be.status==="expiring"),K=F.some(be=>be.status==="pending");let V="compliant";Z?V="expired":W?V="expiring":K&&(V="pending");const le={...e,certifications:F,complianceStatus:F.length===0?"pending":V};n==null||n(le),J({title:"Certification Removed",description:"The certification has been removed."})},j=T=>{var le;const F=(le=T.target.files)==null?void 0:le[0];if(!F)return;if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(F.type)){J({title:"Invalid File Type",description:"Please upload a PDF or image file (JPG, PNG)",variant:"destructive"});return}const W=10*1024*1024;if(F.size>W){J({title:"File Too Large",description:"Please upload a file smaller than 10MB",variant:"destructive"});return}u(!0);const K={id:`doc-${Date.now()}`,name:F.name,type:"certificate",uploadedAt:new Date().toISOString(),url:URL.createObjectURL(F)},V={...e,documents:[...e.documents,K]};n==null||n(V),u(!1),J({title:"Document Uploaded",description:`${F.name} has been uploaded successfully.`}),g.current&&(g.current.value="")},N=()=>{var T;(T=g.current)==null||T.click()},S=e.certifications.length,E=e.certifications.filter(T=>T.status==="compliant").length,C=S>0?Math.round(E/S*100):0,P=()=>{l({firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,position:e.position,department:e.department,employmentType:e.employmentType,payRate:e.payRate,awardClassification:e.awardClassification,emergencyContact:e.emergencyContact}),i(!0)},A=()=>{i(!1),l({})},k=()=>{if(!o.firstName||!o.lastName||!o.email){J({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}const T={...e,...o};n==null||n(T),i(!1),l({}),J({title:"Profile Updated",description:`${T.firstName} ${T.lastName}'s profile has been updated.`})},D=T=>{T||(i(!1),l({})),r(T)};return s.jsxs(Do,{open:t,onOpenChange:D,children:[s.jsxs(Li,{className:"w-full sm:max-w-lg overflow-hidden flex flex-col",children:[s.jsx(Fi,{children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Or,{className:"h-16 w-16 avatar-ring",children:s.jsxs(Tr,{className:"bg-primary/10 text-primary text-xl font-semibold",children:[(a?(R=o.firstName)==null?void 0:R[0]:e.firstName[0])||"E",(a?(U=o.lastName)==null?void 0:U[0]:e.lastName[0])||"E"]})}),s.jsx("div",{className:"flex-1",children:a?s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{value:o.firstName||"",onChange:T=>l({...o,firstName:T.target.value}),placeholder:"First Name",className:"h-8"}),s.jsx(ne,{value:o.lastName||"",onChange:T=>l({...o,lastName:T.target.value}),placeholder:"Last Name",className:"h-8"})]})}):s.jsxs(s.Fragment,{children:[s.jsxs(Ui,{className:"text-xl",children:[e.firstName," ",e.lastName]}),s.jsxs(Ro,{className:"flex items-center gap-2 mt-1",children:[e.position,s.jsx("span",{className:ae("text-xs px-2 py-0.5 rounded-full font-medium",Nue[e.employmentType]),children:_ue[e.employmentType]})]})]})}),!a&&s.jsx(I,{variant:"outline",size:"icon",onClick:P,children:s.jsx(Np,{className:"h-4 w-4"})})]})}),s.jsx(qu,{className:"flex-1 -mx-6 px-6",children:s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(Bn,{className:"h-4 w-4"}),"Contact Information"]}),a?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"edit-email",children:"Email"}),s.jsx(ne,{id:"edit-email",type:"email",value:o.email||"",onChange:T=>l({...o,email:T.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"edit-phone",children:"Phone"}),s.jsx(ne,{id:"edit-phone",value:o.phone||"",onChange:T=>l({...o,phone:T.target.value})})]})]}):s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Hl,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("a",{href:`mailto:${e.email}`,className:"text-primary hover:underline",children:e.email})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(tu,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("a",{href:`tel:${e.phone}`,className:"hover:underline",children:e.phone})]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(ho,{className:"h-4 w-4"}),"Employment Details"]}),a?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"edit-position",children:"Position"}),s.jsx(ne,{id:"edit-position",value:o.position||"",onChange:T=>l({...o,position:T.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"edit-department",children:"Department"}),s.jsx(ne,{id:"edit-department",value:o.department||"",onChange:T=>l({...o,department:T.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"edit-employmentType",children:"Employment Type"}),s.jsxs(Ie,{value:o.employmentType,onValueChange:T=>l({...o,employmentType:T}),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"casual",children:"Casual"}),s.jsx(Y,{value:"part_time",children:"Part-Time"}),s.jsx(Y,{value:"full_time",children:"Full-Time"}),s.jsx(Y,{value:"contractor",children:"Contractor"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"edit-payRate",children:"Pay Rate ($/hr)"}),s.jsx(ne,{id:"edit-payRate",type:"number",step:"0.01",value:o.payRate||"",onChange:T=>l({...o,payRate:parseFloat(T.target.value)||0})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"edit-award",children:"Award Classification"}),s.jsx(ne,{id:"edit-award",value:o.awardClassification||"",onChange:T=>l({...o,awardClassification:T.target.value}),placeholder:"e.g., Level 2.1"})]})]}):s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Department"}),s.jsx("p",{className:"font-medium",children:e.department})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Start Date"}),s.jsx("p",{className:"font-medium",children:de(new Date(e.startDate),"MMM d, yyyy")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Pay Rate"}),s.jsxs("p",{className:"font-medium",children:["$",e.payRate.toFixed(2),"/hr"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Award Classification"}),s.jsx("p",{className:"font-medium",children:e.awardClassification||"Not set"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Status"}),s.jsx(fe,{variant:e.status==="active"?"default":"secondary",className:"mt-1",children:e.status})]})]})]}),a&&s.jsxs(s.Fragment,{children:[s.jsx(Et,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(tu,{className:"h-4 w-4"}),"Emergency Contact"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"edit-emergency-name",children:"Contact Name"}),s.jsx(ne,{id:"edit-emergency-name",value:((B=o.emergencyContact)==null?void 0:B.name)||"",onChange:T=>{var F,Z;return l({...o,emergencyContact:{...o.emergencyContact,name:T.target.value,phone:((F=o.emergencyContact)==null?void 0:F.phone)||"",relationship:((Z=o.emergencyContact)==null?void 0:Z.relationship)||""}})},placeholder:"Emergency contact name"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"edit-emergency-phone",children:"Phone"}),s.jsx(ne,{id:"edit-emergency-phone",value:((L=o.emergencyContact)==null?void 0:L.phone)||"",onChange:T=>{var F,Z;return l({...o,emergencyContact:{...o.emergencyContact,name:((F=o.emergencyContact)==null?void 0:F.name)||"",phone:T.target.value,relationship:((Z=o.emergencyContact)==null?void 0:Z.relationship)||""}})},placeholder:"Phone number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"edit-emergency-relationship",children:"Relationship"}),s.jsx(ne,{id:"edit-emergency-relationship",value:((M=o.emergencyContact)==null?void 0:M.relationship)||"",onChange:T=>{var F,Z;return l({...o,emergencyContact:{...o.emergencyContact,name:((F=o.emergencyContact)==null?void 0:F.name)||"",phone:((Z=o.emergencyContact)==null?void 0:Z.phone)||"",relationship:T.target.value}})},placeholder:"e.g., Spouse, Parent"})]})]})]})]})]}),!a&&s.jsxs(s.Fragment,{children:[s.jsx(Et,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(ln,{className:"h-4 w-4"}),"Compliance Status"]}),s.jsx(jh,{status:e.complianceStatus})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Overall Compliance"}),s.jsxs("span",{className:"font-medium",children:[C,"%"]})]}),s.jsx(pa,{value:C,className:"h-2"})]}),s.jsxs("div",{className:"space-y-2 mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Certifications"}),s.jsxs(I,{variant:"outline",size:"sm",onClick:x,className:"h-7 text-xs",children:[s.jsx(yt,{className:"h-3 w-3 mr-1"}),"Add"]})]}),e.certifications.length>0?s.jsx("div",{className:"space-y-2",children:e.certifications.map(T=>{const{daysUntil:F,expiry:Z}=p(T.expiryDate);return s.jsx("div",{className:ae("p-3 rounded-lg border cursor-pointer hover:bg-muted/50 transition-colors",T.status==="expired"&&"border-destructive/50 bg-destructive/5",T.status==="expiring"&&"border-warning/50 bg-warning/5",T.status==="compliant"&&"border-success/50 bg-success/5",T.status==="pending"&&"border-muted"),onClick:()=>b(T),children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[v(T.status),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:T.name}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:T.status==="pending"?"Awaiting documentation":T.status==="expired"?`Expired ${de(Z,"MMM d, yyyy")}`:`Expires ${de(Z,"MMM d, yyyy")} (${F} days)`})]})]}),s.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:W=>{W.stopPropagation(),b(T)},children:s.jsx(rl,{className:"h-3 w-3"})})]})},T.id)})}):s.jsxs("div",{className:"text-center py-4 border-2 border-dashed border-muted rounded-lg",children:[s.jsx(ln,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No certifications added"}),s.jsxs(I,{variant:"outline",size:"sm",onClick:x,children:[s.jsx(yt,{className:"h-3 w-3 mr-1"}),"Add Certification"]})]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4"}),"Documents (",e.documents.length,")"]}),s.jsxs(I,{variant:"outline",size:"sm",onClick:N,disabled:c,children:[s.jsx(jo,{className:"h-3 w-3 mr-1"}),c?"Uploading...":"Upload"]}),s.jsx("input",{ref:g,type:"file",accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:j})]}),e.documents.length>0?s.jsx("div",{className:"space-y-2",children:e.documents.map(T=>s.jsxs("div",{className:"flex items-center justify-between text-sm p-2 rounded-lg bg-muted/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:T.name})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:de(new Date(T.uploadedAt),"MMM d, yyyy")})]},T.id))}):s.jsxs("div",{className:"text-center py-4 border-2 border-dashed border-muted rounded-lg",children:[s.jsx(gt,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No documents uploaded"}),s.jsxs(I,{variant:"outline",size:"sm",onClick:N,disabled:c,children:[s.jsx(yt,{className:"h-3 w-3 mr-1"}),"Add Document"]})]})]}),e.emergencyContact&&s.jsxs(s.Fragment,{children:[s.jsx(Et,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(tu,{className:"h-4 w-4"}),"Emergency Contact"]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsx("p",{className:"font-medium",children:e.emergencyContact.name}),s.jsx("p",{className:"text-muted-foreground",children:e.emergencyContact.relationship}),s.jsx("p",{children:e.emergencyContact.phone})]})]})]})]})]})}),s.jsx("div",{className:"flex gap-3 pt-4 border-t border-border",children:a?s.jsxs(s.Fragment,{children:[s.jsxs(I,{variant:"outline",className:"flex-1",onClick:A,children:[s.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs(I,{className:"flex-1 gradient-primary",onClick:k,children:[s.jsx(NF,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(I,{variant:"outline",className:"flex-1",onClick:P,children:[s.jsx(Np,{className:"h-4 w-4 mr-2"}),"Edit Profile"]}),s.jsxs(I,{variant:"outline",className:"flex-1",children:[s.jsx(Hl,{className:"h-4 w-4 mr-2"}),"Send Email"]})]})})]}),s.jsx(jue,{open:d,onOpenChange:f,certification:h,onSave:w,onDelete:_})]})}const Cue={casual:"Casual",part_time:"Part-Time",full_time:"Full-Time",contractor:"Contractor"},Eue={casual:"bg-info/10 text-info",part_time:"bg-primary/10 text-primary",full_time:"bg-success/10 text-success",contractor:"bg-warning/10 text-warning"};function kue(e){return{id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,phone:e.phone||"",avatar:e.avatar_url||void 0,employmentType:e.employment_type,position:e.position||"",department:e.department||"",startDate:e.start_date||"",status:e.status,complianceStatus:e.compliance_status,payRate:e.pay_rate||0,awardClassification:void 0,emergencyContact:e.emergency_contact_name?{name:e.emergency_contact_name,phone:e.emergency_contact_phone||"",relationship:e.emergency_contact_relationship||""}:void 0,documents:[],certifications:[]}}function cm(e){return TU(e)?vs("this action"):uie(e,"You may not have permission to do that.")}function Pue(e){return e.trim().toLowerCase().replace(/\s+/g,"_")}function Aue(e){const t=[];let r=[],n="",a=!1;for(let o=0;o<e.length;o++){const l=e[o],c=e[o+1];if(a){if(l==='"'&&c==='"'){n+='"',o++;continue}if(l==='"'){a=!1;continue}n+=l;continue}if(l==='"'){a=!0;continue}if(l===","){r.push(n),n="";continue}if(l===`
`){r.push(n),n="",r.every(d=>d.trim()==="")||t.push(r),r=[];continue}l!=="\r"&&(n+=l)}return r.push(n),r.every(o=>o.trim()==="")||t.push(r),t}function Oue(e){const t=e.trim();if(!t)return;const r=Number(t);return Number.isFinite(r)?r:void 0}function um(e){const t=e.trim();return t||void 0}function Tue(){const{user:e}=nc(),t=_h(),r=!!(t!=null&&t.isManager),n=!!(t!=null&&t.isAdmin),a=!!(t!=null&&t.isPlatformUser),[i,o]=y.useState(""),[l,c]=y.useState("all"),[u,d]=y.useState("all"),[f,h]=y.useState(!1),[m,g]=y.useState(!1),[p,v]=y.useState(null),x=y.useRef(null),[b,w]=y.useState(!1),{employees:_,isLoading:j,error:N,createEmployee:S,updateEmployee:E,changeStatus:C,organisationId:P,isCreating:A}=xa(),k=a||n||r,D=k&&(!!P||a),R=y.useMemo(()=>_.map(kue),[_]),U=y.useMemo(()=>R.filter(V=>{if(V.status==="inactive")return!1;const le=`${V.firstName} ${V.lastName}`.toLowerCase().includes(i.toLowerCase())||V.email.toLowerCase().includes(i.toLowerCase())||V.position.toLowerCase().includes(i.toLowerCase()),be=l==="all"||V.department===l,ce=u==="all"||V.status===u;return le&&be&&ce}),[R,i,l,u]),B=y.useMemo(()=>[...new Set(R.map(V=>V.department).filter(Boolean))],[R]),L=V=>{v(V),g(!0)},M=async V=>{var be,ce,Pe;if(!a&&!P){J({title:"No organisation",description:"Create or join an organisation before editing employees.",variant:"destructive"});return}if(_.find(ie=>ie.id===V.id))try{await E(V.id,{first_name:V.firstName,last_name:V.lastName,email:V.email,phone:V.phone||null,position:V.position||null,department:V.department||null,employment_type:V.employmentType,pay_rate:V.payRate||null,status:V.status,compliance_status:V.complianceStatus,emergency_contact_name:((be=V.emergencyContact)==null?void 0:be.name)||null,emergency_contact_phone:((ce=V.emergencyContact)==null?void 0:ce.phone)||null,emergency_contact_relationship:((Pe=V.emergencyContact)==null?void 0:Pe.relationship)||null}),v(V),J({title:"Saved",description:"Employee details updated."})}catch(ie){console.error("Failed to update employee:",ie),J({title:"Update blocked",description:cm(ie),variant:"destructive"})}},T=async V=>{const le=V.status==="inactive"?"active":"inactive";try{await C(V.id,le),J({title:V.status==="inactive"?"Reactivated":"Deactivated",description:`${V.firstName} ${V.lastName} is now ${le}.`})}catch(be){console.error("Failed to change status:",be),J({title:"Action blocked",description:cm(be),variant:"destructive"})}},F=async V=>{if(!e){J({title:"Not signed in",description:"You must be signed in to add employees.",variant:"destructive"});return}if(!k){J({title:"Access restricted",description:vs("adding employees"),variant:"destructive"});return}if(!a&&!P){J({title:"No organisation yet",description:"Create your organisation first, then add employees.",variant:"destructive"});return}try{await S({first_name:V.firstName,last_name:V.lastName,email:V.email,phone:V.phone||void 0,avatar_url:V.avatar||void 0,position:V.position||void 0,department:V.department||void 0,employment_type:V.employmentType,pay_rate:V.payRate||void 0,start_date:new Date().toISOString().split("T")[0]}),h(!1),J({title:"Employee added",description:`${V.firstName} ${V.lastName} was created.`})}catch(le){console.error("Failed to add employee:",le),J({title:"Create blocked",description:cm(le),variant:"destructive"})}},Z=()=>{var V;if(!e){J({title:"Not signed in",description:"You must be signed in to import employees.",variant:"destructive"});return}if(!k){J({title:"Access restricted",description:vs("importing employees"),variant:"destructive"});return}if(!a&&!P){J({title:"No organisation yet",description:"Create your organisation first, then import employees.",variant:"destructive"});return}(V=x.current)==null||V.click()},W=async V=>{var be,ce,Pe,ie,me;const le=(be=V.target.files)==null?void 0:be[0];if(V.target.value="",!!le){if(!le.name.toLowerCase().endsWith(".csv")){J({title:"Invalid file",description:"Please upload a .csv file.",variant:"destructive"});return}if(!b){w(!0);try{const _e=await le.text(),se=Aue(_e);if(se.length<2){J({title:"Empty CSV",description:"The CSV must include a header row and at least one data row.",variant:"destructive"});return}const He=se[0].map(z=>Pue(z)),Tt=["first_name","last_name","email","employment_type"].filter(z=>!He.includes(z));if(Tt.length>0){J({title:"Missing columns",description:`CSV is missing: ${Tt.join(", ")}`,variant:"destructive"});return}const Wt=se.slice(1),Yt={ok:0,failed:0,errors:[]};if(Wt.length>500){J({title:"Too many rows",description:"Please import 500 employees or fewer per file.",variant:"destructive"});return}J({title:"Import started",description:`Importing ${Wt.length} employees...`});for(let z=0;z<Wt.length;z++){const Q=Wt[z],ee={};He.forEach((lt,St)=>{ee[lt]=Q[St]??""});const Ne=(ce=ee.first_name)==null?void 0:ce.trim(),Se=(Pe=ee.last_name)==null?void 0:Pe.trim(),ve=(ie=ee.email)==null?void 0:ie.trim(),ke=(me=ee.employment_type)==null?void 0:me.trim();if(!Ne||!Se||!ve||!ke){Yt.failed++,Yt.errors.push(`Row ${z+2}: missing required fields`);continue}try{await S({first_name:Ne,last_name:Se,email:ve,phone:um(ee.phone??""),avatar_url:um(ee.avatar_url??""),position:um(ee.position??""),department:um(ee.department??""),employment_type:ke,pay_rate:Oue(ee.pay_rate??""),start_date:um(ee.start_date??"")??new Date().toISOString().split("T")[0]}),Yt.ok++}catch(lt){Yt.failed++,Yt.errors.push(`Row ${z+2}: ${cm(lt)}`)}}const qr=`${Yt.ok} imported, ${Yt.failed} failed.`;J({title:"Import finished",description:qr,variant:Yt.failed>0?"destructive":void 0}),Yt.failed>0&&(console.group("CSV import errors"),Yt.errors.slice(0,25).forEach(z=>console.warn(z)),Yt.errors.length>25&&console.warn(`...and ${Yt.errors.length-25} more`),console.groupEnd())}catch(_e){console.error("Import failed:",_e),J({title:"Import failed",description:cm(_e),variant:"destructive"})}finally{w(!1)}}}},K=()=>{if(U.length===0){J({title:"Nothing to export",description:"There are no employees to export.",variant:"destructive"});return}try{const V=U.map(me=>({firstName:me.firstName,lastName:me.lastName,email:me.email,phone:me.phone,position:me.position,department:me.department,employmentType:me.employmentType,status:me.status,complianceStatus:me.complianceStatus,payRate:me.payRate})),le=Object.keys(V[0]),be=[le.join(","),...V.map(me=>le.map(_e=>{const se=me[_e]??"";return`"${String(se).replace(/"/g,'""')}"`}).join(","))].join(`
`),ce=new Blob([be],{type:"text/csv;charset=utf-8;"}),Pe=URL.createObjectURL(ce),ie=document.createElement("a");ie.href=Pe,ie.download="employees.csv",ie.click(),URL.revokeObjectURL(Pe)}catch{J({title:"Export failed",description:"Unable to export employees.",variant:"destructive"})}};return j?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):N?s.jsx(G,{children:s.jsxs(X,{className:"py-12 text-center",children:[s.jsx("p",{className:"text-destructive",children:"Failed to load employees. Please try again."}),s.jsx(I,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Retry"})]})}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Employees"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your team members and their information."}),!a&&!P&&s.jsx("p",{className:"text-sm text-warning mt-2",children:"You don't have an organisation yet. Create one before adding employees."})]}),s.jsxs("div",{className:"flex gap-2",children:[r&&s.jsx(I,{variant:"outline",asChild:!0,children:s.jsxs(yn,{to:"/employees/deactivated",children:[s.jsx(xx,{className:"h-4 w-4 mr-2"}),"Deactivated"]})}),s.jsx("input",{ref:x,type:"file",accept:".csv,text/csv",onChange:W,style:{display:"none"}}),s.jsxs(I,{variant:"outline",onClick:Z,disabled:!D||b,title:D?void 0:vs("creating employees"),children:[s.jsx(jo,{className:"h-4 w-4 mr-2"}),b?"Importing":"Import CSV"]}),s.jsxs(I,{variant:"outline",onClick:K,disabled:U.length===0,children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Export"]}),s.jsxs(I,{className:"gradient-primary",onClick:()=>h(!0),disabled:!D||A,title:D?void 0:vs("creating employees"),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Employee"]})]})]}),s.jsx(G,{children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(un,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{type:"search",placeholder:"Search by name, email, or position...",value:i,onChange:V=>o(V.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:l,onValueChange:c,children:[s.jsx(Re,{className:"w-full sm:w-48",children:s.jsx(Fe,{placeholder:"Department"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"all",children:"All Departments"}),B.map(V=>s.jsx(Y,{value:V,children:V},V))]})]}),s.jsxs(Ie,{value:u,onValueChange:d,children:[s.jsx(Re,{className:"w-full sm:w-36",children:s.jsx(Fe,{placeholder:"Status"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"all",children:"All Status"}),s.jsx(Y,{value:"active",children:"Active"}),s.jsx(Y,{value:"onboarding",children:"Onboarding"})]})]})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:U.map(V=>s.jsx(G,{className:"card-interactive cursor-pointer",onClick:()=>L(V),children:s.jsxs(X,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs(Or,{className:"h-12 w-12 avatar-ring",children:[s.jsx(qg,{src:V.avatar,alt:`${V.firstName} ${V.lastName}`}),s.jsxs(Tr,{className:"bg-primary/10 text-primary font-semibold",children:[V.firstName[0],V.lastName[0]]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold",children:[V.firstName," ",V.lastName]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:V.position}),s.jsx("div",{className:"flex items-center gap-2 mt-2",children:s.jsx("span",{className:ae("text-xs px-2 py-0.5 rounded-full font-medium",Eue[V.employmentType]),children:Cue[V.employmentType]})})]})]}),s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,onClick:le=>le.stopPropagation(),children:s.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(si,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",children:[s.jsx(tt,{onClick:le=>{le.stopPropagation(),L(V)},children:"View Profile"}),k?s.jsxs(s.Fragment,{children:[s.jsx(tt,{onClick:le=>le.stopPropagation(),children:"Edit Details"}),s.jsx(tt,{onClick:le=>le.stopPropagation(),children:"View Documents"}),s.jsx(ca,{}),s.jsx(tt,{className:V.status==="inactive"?"text-success":"text-destructive",onClick:le=>{le.stopPropagation(),T(V)},children:V.status==="inactive"?"Reactivate":"Deactivate"})]}):s.jsx(tt,{onClick:le=>{le.stopPropagation(),J({title:"Access restricted",description:vs("employee records"),variant:"destructive"})},children:"No actions available"})]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-border space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Department"}),s.jsx("span",{className:"font-medium",children:V.department||"Not assigned"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Compliance"}),s.jsx(jh,{status:V.complianceStatus,size:"sm"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Pay Rate"}),s.jsxs("span",{className:"font-medium",children:["$",(V.payRate||0).toFixed(2),"/hr"]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-border flex gap-2",children:[s.jsxs(I,{variant:"outline",size:"sm",className:"flex-1",onClick:le=>{le.stopPropagation(),window.location.href=`mailto:${V.email}`},children:[s.jsx(Hl,{className:"h-4 w-4 mr-1"}),"Email"]}),s.jsxs(I,{variant:"outline",size:"sm",className:"flex-1",onClick:le=>{le.stopPropagation(),window.location.href=`tel:${V.phone}`},children:[s.jsx(tu,{className:"h-4 w-4 mr-1"}),"Call"]})]})]})},V.id))}),U.length===0&&s.jsx(G,{children:s.jsx(X,{className:"py-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"No employees found matching your criteria."})})}),s.jsx(ile,{open:f,onOpenChange:h,onAdd:F}),s.jsx(Sue,{employee:p,open:m,onOpenChange:g,onUpdate:M})]})}var Y6="AlertDialog",[Due,JFe]=Qr(Y6,[qB]),Mo=qB(),X6=e=>{const{__scopeAlertDialog:t,...r}=e,n=Mo(t);return s.jsx(_k,{...n,...r,modal:!0})};X6.displayName=Y6;var Rue="AlertDialogTrigger",Q6=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mo(r);return s.jsx(i6,{...a,...n,ref:t})});Q6.displayName=Rue;var Mue="AlertDialogPortal",Z6=e=>{const{__scopeAlertDialog:t,...r}=e,n=Mo(t);return s.jsx(Nk,{...n,...r})};Z6.displayName=Mue;var $ue="AlertDialogOverlay",J6=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mo(r);return s.jsx(Zg,{...a,...n,ref:t})});J6.displayName=$ue;var Gd="AlertDialogContent",[Iue,Lue]=Due(Gd),Fue=UL("AlertDialogContent"),e8=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Mo(r),o=y.useRef(null),l=Ke(t,o),c=y.useRef(null);return s.jsx(Joe,{contentName:Gd,titleName:t8,docsSlug:"alert-dialog",children:s.jsx(Iue,{scope:r,cancelRef:c,children:s.jsxs(Jg,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:pe(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(Fue,{children:n}),s.jsx(Bue,{contentRef:o})]})})})});e8.displayName=Gd;var t8="AlertDialogTitle",r8=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mo(r);return s.jsx(ev,{...a,...n,ref:t})});r8.displayName=t8;var n8="AlertDialogDescription",s8=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mo(r);return s.jsx(tv,{...a,...n,ref:t})});s8.displayName=n8;var Uue="AlertDialogAction",a8=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Mo(r);return s.jsx(H0,{...a,...n,ref:t})});a8.displayName=Uue;var i8="AlertDialogCancel",o8=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=Lue(i8,r),i=Mo(r),o=Ke(t,a);return s.jsx(H0,{...i,...n,ref:o})});o8.displayName=i8;var Bue=({contentRef:e})=>{const t=`\`${Gd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Gd}\` by passing a \`${n8}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Gd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},zue=X6,Vue=Q6,que=Z6,l8=J6,c8=e8,u8=a8,d8=o8,f8=r8,h8=s8;const Ac=zue,m8=Vue,Wue=que,p8=y.forwardRef(({className:e,...t},r)=>s.jsx(l8,{className:ae("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));p8.displayName=l8.displayName;const sl=y.forwardRef(({className:e,...t},r)=>s.jsxs(Wue,{children:[s.jsx(p8,{}),s.jsx(c8,{ref:r,className:ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));sl.displayName=c8.displayName;const al=({className:e,...t})=>s.jsx("div",{className:ae("flex flex-col space-y-2 text-center sm:text-left",e),...t});al.displayName="AlertDialogHeader";const il=({className:e,...t})=>s.jsx("div",{className:ae("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});il.displayName="AlertDialogFooter";const ol=y.forwardRef(({className:e,...t},r)=>s.jsx(f8,{ref:r,className:ae("text-lg font-semibold",e),...t}));ol.displayName=f8.displayName;const ll=y.forwardRef(({className:e,...t},r)=>s.jsx(h8,{ref:r,className:ae("text-sm text-muted-foreground",e),...t}));ll.displayName=h8.displayName;const cl=y.forwardRef(({className:e,...t},r)=>s.jsx(u8,{ref:r,className:ae(Tp(),e),...t}));cl.displayName=u8.displayName;const ul=y.forwardRef(({className:e,...t},r)=>s.jsx(d8,{ref:r,className:ae(Tp({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ul.displayName=d8.displayName;const Hue={casual:"Casual",part_time:"Part-Time",full_time:"Full-Time",contractor:"Contractor"},Kue={casual:"bg-info/10 text-info",part_time:"bg-primary/10 text-primary",full_time:"bg-success/10 text-success",contractor:"bg-warning/10 text-warning"};function Gue(){const{isManager:e,loading:t}=_h(),[r,n]=y.useState(""),[a,i]=y.useState("all"),{employees:o,isLoading:l,error:c,changeStatus:u,isChangingStatus:d}=xa();if(t||l)return s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})});if(!e)return s.jsx("div",{className:"space-y-6 animate-fade-in",children:s.jsx(G,{children:s.jsxs(X,{className:"py-12 text-center",children:[s.jsx(mG,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Restricted"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:vs("the deactivated staff archive")}),s.jsx(I,{variant:"outline",asChild:!0,children:s.jsxs(yn,{to:"/employees",children:[s.jsx(eu,{className:"h-4 w-4 mr-2"}),"Back to Employees"]})})]})})});if(c)return s.jsx(G,{children:s.jsxs(X,{className:"py-12 text-center",children:[s.jsx("p",{className:"text-destructive",children:"Failed to load employees. Please try again."}),s.jsx(I,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Retry"})]})});const f=o.filter(g=>{var x;if(g.status!=="inactive")return!1;const p=`${g.first_name} ${g.last_name}`.toLowerCase().includes(r.toLowerCase())||g.email.toLowerCase().includes(r.toLowerCase())||(((x=g.position)==null?void 0:x.toLowerCase().includes(r.toLowerCase()))??!1),v=a==="all"||g.department===a;return p&&v}),h=[...new Set(o.map(g=>g.department).filter(Boolean))],m=async g=>{try{await u(g.id,"active")}catch(p){console.error("Failed to reactivate employee:",p)}};return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(I,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(yn,{to:"/employees",children:s.jsx(eu,{className:"h-5 w-5"})})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(xx,{className:"h-6 w-6 text-muted-foreground"}),"Deactivated Staff"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"View and manage former employees. Admins can reactivate staff when needed."})]})]})}),s.jsx(G,{children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(un,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{type:"search",placeholder:"Search by name, email, or position...",value:r,onChange:g=>n(g.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:a,onValueChange:i,children:[s.jsx(Re,{className:"w-full sm:w-48",children:s.jsx(Fe,{placeholder:"Department"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"all",children:"All Departments"}),h.map(g=>s.jsx(Y,{value:g,children:g},g))]})]})]})})}),f.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(g=>s.jsx(G,{className:"border-dashed border-muted-foreground/30",children:s.jsxs(X,{className:"pt-6",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Or,{className:"h-12 w-12 opacity-60",children:s.jsxs(Tr,{className:"bg-muted text-muted-foreground font-semibold",children:[g.first_name[0],g.last_name[0]]})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-muted-foreground",children:[g.first_name," ",g.last_name]}),s.jsx("p",{className:"text-sm text-muted-foreground/70",children:g.position||"No position"}),s.jsx("div",{className:"flex items-center gap-2 mt-2",children:s.jsx("span",{className:ae("text-xs px-2 py-0.5 rounded-full font-medium opacity-60",Kue[g.employment_type]),children:Hue[g.employment_type]})})]})]})}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-border space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Department"}),s.jsx("span",{className:"font-medium text-muted-foreground",children:g.department||"Not assigned"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Email"}),s.jsx("span",{className:"font-medium text-muted-foreground truncate max-w-[180px]",children:g.email})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status"}),s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-destructive/10 text-destructive font-medium",children:"Deactivated"})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:s.jsxs(Ac,{children:[s.jsx(m8,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:"w-full",disabled:d,children:[s.jsx(_F,{className:"h-4 w-4 mr-2"}),"Reactivate Employee"]})}),s.jsxs(sl,{children:[s.jsxs(al,{children:[s.jsx(ol,{children:"Reactivate Employee?"}),s.jsxs(ll,{children:["This will restore ",g.first_name," ",g.last_name," to active status. They will appear in the main Employees list again."]})]}),s.jsxs(il,{children:[s.jsx(ul,{children:"Cancel"}),s.jsx(cl,{onClick:()=>m(g),children:"Reactivate"})]})]})]})})]})},g.id))}):s.jsx(G,{children:s.jsxs(X,{className:"py-12 text-center",children:[s.jsx(xx,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"No Deactivated Staff"}),s.jsx("p",{className:"text-muted-foreground/70 mt-1",children:r||a!=="all"?"No deactivated employees match your search criteria.":"All employees are currently active."}),s.jsx(I,{variant:"outline",className:"mt-4",asChild:!0,children:s.jsxs(yn,{to:"/employees",children:[s.jsx(eu,{className:"h-4 w-4 mr-2"}),"Back to Employees"]})})]})})]})}var Q0="Tabs",[Yue,e3e]=Qr(Q0,[bh]),g8=bh(),[Xue,Fk]=Yue(Q0),v8=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Uu(l),[f,h]=Hs({prop:n,onChange:a,defaultProp:i??"",caller:Q0});return s.jsx(Xue,{scope:r,baseId:ha(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:s.jsx(Ee.div,{dir:d,"data-orientation":o,...u,ref:t})})});v8.displayName=Q0;var y8="TabsList",x8=y.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=Fk(y8,r),o=g8(r);return s.jsx(GE,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Ee.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});x8.displayName=y8;var b8="TabsTrigger",w8=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=Fk(b8,r),l=g8(r),c=N8(o.baseId,n),u=S8(o.baseId,n),d=n===o.value;return s.jsx(YE,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(Ee.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:pe(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:pe(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:pe(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});w8.displayName=b8;var j8="TabsContent",_8=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=Fk(j8,r),c=N8(l.baseId,n),u=S8(l.baseId,n),d=n===l.value,f=y.useRef(d);return y.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(dn,{present:a||d,children:({present:h})=>s.jsx(Ee.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});_8.displayName=j8;function N8(e,t){return`${e}-trigger-${t}`}function S8(e,t){return`${e}-content-${t}`}var Que=v8,C8=x8,E8=w8,k8=_8;const bn=Que,fn=y.forwardRef(({className:e,...t},r)=>s.jsx(C8,{ref:r,className:ae("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));fn.displayName=C8.displayName;const Ve=y.forwardRef(({className:e,...t},r)=>s.jsx(E8,{ref:r,className:ae("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Ve.displayName=E8.displayName;const rt=y.forwardRef(({className:e,...t},r)=>s.jsx(k8,{ref:r,className:ae("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));rt.displayName=k8.displayName;const hr=y.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:ae("w-full caption-bottom text-sm",e),...t})}));hr.displayName="Table";const mr=y.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:ae("[&_tr]:border-b",e),...t}));mr.displayName="TableHeader";const pr=y.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:ae("[&_tr:last-child]:border-0",e),...t}));pr.displayName="TableBody";const Zue=y.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:ae("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Zue.displayName="TableFooter";const ze=y.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:ae("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));ze.displayName="TableRow";const oe=y.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:ae("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));oe.displayName="TableHead";const te=y.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:ae("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));te.displayName="TableCell";const Jue=y.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:ae("mt-4 text-sm text-muted-foreground",e),...t}));Jue.displayName="TableCaption";const Rm={police_check:"Police Check",ndis_screening:"NDIS Screening",first_aid:"First Aid",cpr:"CPR",training:"Training",other:"Other"};function ede(){const[e,t]=y.useState(""),[r,n]=y.useState("all"),[a,i]=y.useState("all"),[o,l]=y.useState("all"),[c,u]=y.useState("certifications"),{employees:d,certifications:f,getCertificationsForEmployee:h,isLoading:m,error:g}=xa(),p=y.useMemo(()=>d.filter(k=>k.status!=="inactive").map(k=>({...k,certifications:h(k.id)})),[d,h]),v=y.useMemo(()=>[...new Set(p.map(k=>k.department).filter(Boolean))].sort(),[p]),x=y.useMemo(()=>[...new Set(f.map(k=>k.type))].sort(),[f]),b=y.useMemo(()=>({compliant:p.filter(k=>k.compliance_status==="compliant").length,expiring:p.filter(k=>k.compliance_status==="expiring").length,expired:p.filter(k=>k.compliance_status==="expired").length,pending:p.filter(k=>k.compliance_status==="pending").length}),[p]),w=p.length>0?Math.round(b.compliant/p.length*100):0,_=y.useMemo(()=>p.flatMap(k=>k.certifications.map(D=>({id:D.id,name:D.name,type:D.type,issueDate:D.issue_date||"",expiryDate:D.expiry_date||"",status:D.status,employeeId:k.id,employeeName:`${k.first_name} ${k.last_name}`,employeeInitials:`${k.first_name[0]||""}${k.last_name[0]||""}`,department:k.department||"Unassigned"}))),[p]),j=y.useMemo(()=>{const k={};return _.forEach(D=>{k[D.type]||(k[D.type]={total:0,compliant:0,expiring:0,expired:0,pending:0}),k[D.type].total++;const R=D.status;R in k[D.type]&&k[D.type][R]++}),Object.entries(k).map(([D,R])=>({type:D,label:Rm[D]||D,...R,complianceRate:R.total>0?Math.round(R.compliant/R.total*100):0}))},[_]),N=y.useMemo(()=>_.filter(k=>{const D=k.employeeName.toLowerCase().includes(e.toLowerCase())||k.name.toLowerCase().includes(e.toLowerCase()),R=r==="all"||k.department===r,U=a==="all"||k.type===a,B=o==="all"||k.status===o;return D&&R&&U&&B}),[_,e,r,a,o]),S=y.useMemo(()=>p.filter(k=>{const D=`${k.first_name} ${k.last_name}`.toLowerCase().includes(e.toLowerCase()),R=r==="all"||k.department===r,U=o==="all"||k.compliance_status===o;return D&&R&&U}),[p,e,r,o]),E=()=>{const k=["Employee","Department","Certification","Type","Issue Date","Expiry Date","Status","Days Remaining"],D=N.map(L=>{const M=L.expiryDate?Ai(On(L.expiryDate),new Date):"N/A";return[L.employeeName,L.department,L.name,Rm[L.type]||L.type,L.issueDate?de(On(L.issueDate),"yyyy-MM-dd"):"",L.expiryDate?de(On(L.expiryDate),"yyyy-MM-dd"):"",L.status,M.toString()]}),R=[k,...D].map(L=>L.map(M=>`"${M}"`).join(",")).join(`
`),U=new Blob([R],{type:"text/csv;charset=utf-8;"}),B=document.createElement("a");B.href=URL.createObjectURL(U),B.download=`compliance-report-${de(new Date,"yyyy-MM-dd")}.csv`,B.click(),J({title:"Report Exported",description:`Exported ${N.length} certification records to CSV.`})},C=()=>{const k=["Employee","Department","Status","Total Certs","Compliant","Expiring","Expired","Pending"],D=S.map(L=>{const M={total:L.certifications.length,compliant:L.certifications.filter(T=>T.status==="compliant").length,expiring:L.certifications.filter(T=>T.status==="expiring").length,expired:L.certifications.filter(T=>T.status==="expired").length,pending:L.certifications.filter(T=>T.status==="pending").length};return[`${L.first_name} ${L.last_name}`,L.department||"Unassigned",L.compliance_status,M.total.toString(),M.compliant.toString(),M.expiring.toString(),M.expired.toString(),M.pending.toString()]}),R=[k,...D].map(L=>L.map(M=>`"${M}"`).join(",")).join(`
`),U=new Blob([R],{type:"text/csv;charset=utf-8;"}),B=document.createElement("a");B.href=URL.createObjectURL(U),B.download=`employee-compliance-summary-${de(new Date,"yyyy-MM-dd")}.csv`,B.click(),J({title:"Summary Exported",description:`Exported ${S.length} employee compliance summaries to CSV.`})},P=()=>{t(""),n("all"),i("all"),l("all")},A=e||r!=="all"||a!=="all"||o!=="all";return m?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading compliance data..."})]})}):g?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx(G,{className:"p-6 max-w-md",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(An,{className:"h-12 w-12 text-destructive"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Unable to Load Compliance Data"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"The compliance dashboard cannot be displayed because employee data could not be retrieved from the database. Please try again or contact support if the issue persists."}),s.jsx(I,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Compliance Dashboard"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Track certifications, clearances, and training requirements across your team."})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsxs(I,{variant:"outline",children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Export",s.jsx(NE,{className:"h-4 w-4 ml-2"})]})}),s.jsxs(ss,{align:"end",className:"bg-popover",children:[s.jsxs(tt,{onClick:E,children:[s.jsx(Ei,{className:"h-4 w-4 mr-2"}),"Export Certifications (CSV)"]}),s.jsxs(tt,{onClick:C,children:[s.jsx(Ar,{className:"h-4 w-4 mr-2"}),"Export Employee Summary (CSV)"]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(G,{className:ae("card-interactive cursor-pointer transition-all",o==="compliant"&&"ring-2 ring-success"),onClick:()=>l(o==="compliant"?"all":"compliant"),children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-success/10",children:s.jsx(jt,{className:"h-5 w-5 text-success"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:b.compliant}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Compliant"})]})]})})}),s.jsx(G,{className:ae("card-interactive cursor-pointer transition-all",o==="expiring"&&"ring-2 ring-warning"),onClick:()=>l(o==="expiring"?"all":"expiring"),children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-warning/10",children:s.jsx(or,{className:"h-5 w-5 text-warning"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:b.expiring}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiring Soon"})]})]})})}),s.jsx(G,{className:ae("card-interactive cursor-pointer transition-all",o==="expired"&&"ring-2 ring-destructive"),onClick:()=>l(o==="expired"?"all":"expired"),children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-destructive/10",children:s.jsx(An,{className:"h-5 w-5 text-destructive"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:b.expired}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expired"})]})]})})}),s.jsx(G,{className:ae("card-interactive cursor-pointer transition-all",o==="pending"&&"ring-2 ring-info"),onClick:()=>l(o==="pending"?"all":"pending"),children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-info/10",children:s.jsx(xt,{className:"h-5 w-5 text-info"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:b.pending}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs(G,{children:[s.jsxs(he,{className:"pb-2",children:[s.jsx(ge,{className:"text-lg",children:"Overall Compliance Rate"}),s.jsx(Le,{children:"Percentage of employees fully compliant"})]}),s.jsxs(X,{children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(pa,{value:w,className:"flex-1 h-3"}),s.jsxs("span",{className:"text-2xl font-bold text-primary",children:[w,"%"]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[b.compliant," of ",p.length," employees have all required certifications up to date"]})]})]}),s.jsxs(G,{children:[s.jsxs(he,{className:"pb-2",children:[s.jsx(ge,{className:"text-lg",children:"Compliance by Certification Type"}),s.jsx(Le,{children:"Status breakdown for each certification type"})]}),s.jsx(X,{children:s.jsx("div",{className:"space-y-3",children:j.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No certification data available"}):j.map(k=>s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:k.label}),s.jsxs("span",{className:"text-muted-foreground",children:[k.compliant,"/",k.total," compliant"]})]}),s.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden bg-muted",children:[k.compliant>0&&s.jsx("div",{className:"bg-success transition-all",style:{width:`${k.compliant/k.total*100}%`}}),k.expiring>0&&s.jsx("div",{className:"bg-warning transition-all",style:{width:`${k.expiring/k.total*100}%`}}),k.expired>0&&s.jsx("div",{className:"bg-destructive transition-all",style:{width:`${k.expired/k.total*100}%`}}),k.pending>0&&s.jsx("div",{className:"bg-muted-foreground/30 transition-all",style:{width:`${k.pending/k.total*100}%`}})]})]},k.type))})})]})]}),s.jsx(G,{children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(un,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{type:"search",placeholder:"Search by employee or certification...",value:e,onChange:k=>t(k.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:r,onValueChange:n,children:[s.jsx(Re,{className:"w-full sm:w-48",children:s.jsx(Fe,{placeholder:"Department"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"all",children:"All Departments"}),v.map(k=>s.jsx(Y,{value:k,children:k},k))]})]}),s.jsxs(Ie,{value:a,onValueChange:i,children:[s.jsx(Re,{className:"w-full sm:w-48",children:s.jsx(Fe,{placeholder:"Certification Type"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"all",children:"All Types"}),x.map(k=>s.jsx(Y,{value:k,children:Rm[k]||k},k))]})]}),s.jsxs(Ie,{value:o,onValueChange:l,children:[s.jsx(Re,{className:"w-full sm:w-40",children:s.jsx(Fe,{placeholder:"Status"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"all",children:"All Status"}),s.jsx(Y,{value:"compliant",children:"Compliant"}),s.jsx(Y,{value:"expiring",children:"Expiring"}),s.jsx(Y,{value:"expired",children:"Expired"}),s.jsx(Y,{value:"pending",children:"Pending"})]})]})]}),A&&s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),e&&s.jsxs(fe,{variant:"secondary",className:"gap-1",children:["Search: ",e,s.jsx(Fn,{className:"h-3 w-3 cursor-pointer",onClick:()=>t("")})]}),r!=="all"&&s.jsxs(fe,{variant:"secondary",className:"gap-1",children:[r,s.jsx(Fn,{className:"h-3 w-3 cursor-pointer",onClick:()=>n("all")})]}),a!=="all"&&s.jsxs(fe,{variant:"secondary",className:"gap-1",children:[Rm[a]||a,s.jsx(Fn,{className:"h-3 w-3 cursor-pointer",onClick:()=>i("all")})]}),o!=="all"&&s.jsxs(fe,{variant:"secondary",className:"gap-1 capitalize",children:[o,s.jsx(Fn,{className:"h-3 w-3 cursor-pointer",onClick:()=>l("all")})]}),s.jsx(I,{variant:"ghost",size:"sm",onClick:P,className:"h-6 text-xs",children:"Clear all"})]})]})})}),s.jsxs(G,{children:[s.jsx(he,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsx(ge,{className:"text-lg",children:"Compliance Details"}),s.jsx(bn,{value:c,onValueChange:k=>u(k),children:s.jsxs(fn,{children:[s.jsxs(Ve,{value:"certifications",className:"gap-2",children:[s.jsx(Ei,{className:"h-4 w-4"}),"Certifications (",N.length,")"]}),s.jsxs(Ve,{value:"employees",className:"gap-2",children:[s.jsx(Ar,{className:"h-4 w-4"}),"Employees (",S.length,")"]})]})})]})}),s.jsx(X,{children:c==="certifications"?s.jsx(tde,{certifications:N}):s.jsx(rde,{employees:S})})]})]})}function tde({certifications:e}){return s.jsx("div",{className:"rounded-lg border overflow-hidden",children:s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{className:"bg-muted/50",children:[s.jsx(oe,{children:"Employee"}),s.jsx(oe,{children:"Department"}),s.jsx(oe,{children:"Certification"}),s.jsx(oe,{children:"Type"}),s.jsx(oe,{children:"Expiry Date"}),s.jsx(oe,{children:"Status"})]})}),s.jsx(pr,{children:e.length===0?s.jsx(ze,{children:s.jsx(te,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No certifications found matching your filters"})}):e.map(t=>{const r=t.expiryDate?Ai(On(t.expiryDate),new Date):null;return s.jsxs(ze,{className:"table-row-interactive",children:[s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Or,{className:"h-8 w-8",children:s.jsx(Tr,{className:"text-xs bg-primary/10 text-primary",children:t.employeeInitials})}),s.jsx("span",{className:"font-medium",children:t.employeeName})]})}),s.jsx(te,{children:s.jsx("span",{className:"text-sm text-muted-foreground",children:t.department})}),s.jsx(te,{children:t.name}),s.jsx(te,{children:s.jsx(fe,{variant:"outline",className:"text-xs",children:Rm[t.type]||t.type})}),s.jsx(te,{children:t.expiryDate?s.jsxs("div",{children:[s.jsx("span",{className:"text-sm",children:de(On(t.expiryDate),"dd MMM yyyy")}),r!==null&&s.jsx("span",{className:ae("text-xs block",r<0?"text-destructive":r<30?"text-warning":"text-muted-foreground"),children:r<0?`${Math.abs(r)} days overdue`:`${r} days remaining`})]}):s.jsx("span",{className:"text-muted-foreground",children:"Pending"})}),s.jsx(te,{children:s.jsx(jh,{status:t.status,size:"sm"})})]},t.id)})})]})})}function rde({employees:e}){return s.jsx("div",{className:"rounded-lg border overflow-hidden",children:s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{className:"bg-muted/50",children:[s.jsx(oe,{children:"Employee"}),s.jsx(oe,{children:"Department"}),s.jsx(oe,{children:"Overall Status"}),s.jsx(oe,{children:"Certifications"}),s.jsx(oe,{children:"Compliance Progress"})]})}),s.jsx(pr,{children:e.length===0?s.jsx(ze,{children:s.jsx(te,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No employees found matching your filters"})}):e.map(t=>{const r={total:t.certifications.length,compliant:t.certifications.filter(a=>a.status==="compliant").length,expiring:t.certifications.filter(a=>a.status==="expiring").length,expired:t.certifications.filter(a=>a.status==="expired").length,pending:t.certifications.filter(a=>a.status==="pending").length},n=r.total>0?Math.round(r.compliant/r.total*100):0;return s.jsxs(ze,{className:"table-row-interactive",children:[s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Or,{className:"h-8 w-8",children:s.jsxs(Tr,{className:"text-xs bg-primary/10 text-primary",children:[t.first_name[0],t.last_name[0]]})}),s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium block",children:[t.first_name," ",t.last_name]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:t.position||"No position"})]})]})}),s.jsx(te,{children:s.jsx("span",{className:"text-sm text-muted-foreground",children:t.department||"Unassigned"})}),s.jsx(te,{children:s.jsx(jh,{status:t.compliance_status,size:"sm"})}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[r.compliant>0&&s.jsxs(fe,{variant:"outline",className:"text-xs bg-success/10 text-success border-success/20",children:[r.compliant," "]}),r.expiring>0&&s.jsxs(fe,{variant:"outline",className:"text-xs bg-warning/10 text-warning border-warning/20",children:[r.expiring," "]}),r.expired>0&&s.jsxs(fe,{variant:"outline",className:"text-xs bg-destructive/10 text-destructive border-destructive/20",children:[r.expired," "]}),r.pending>0&&s.jsxs(fe,{variant:"outline",className:"text-xs",children:[r.pending," pending"]}),r.total===0&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"No certifications"})]})}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-2 min-w-[120px]",children:[s.jsx(pa,{value:n,className:"h-2 flex-1"}),s.jsxs("span",{className:"text-xs font-medium w-10 text-right",children:[n,"%"]})]})})]},t.id)})})]})})}const wt=y.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:ae("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));wt.displayName="Textarea";const lc=Bie,P8=y.createContext({}),pt=({...e})=>s.jsx(P8.Provider,{value:{name:e.name},children:s.jsx(Wie,{...e})}),Z0=()=>{const e=y.useContext(P8),t=y.useContext(A8),{getFieldState:r,formState:n}=U0(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},A8=y.createContext({}),ft=y.forwardRef(({className:e,...t},r)=>{const n=y.useId();return s.jsx(A8.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:ae("space-y-2",e),...t})})});ft.displayName="FormItem";const vt=y.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=Z0();return s.jsx(H,{ref:r,className:ae(n&&"text-destructive",e),htmlFor:a,...t})});vt.displayName="FormLabel";const ht=y.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=Z0();return s.jsx(LL,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});ht.displayName="FormControl";const Yd=y.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=Z0();return s.jsx("p",{ref:r,id:n,className:ae("text-sm text-muted-foreground",e),...t})});Yd.displayName="FormDescription";const _t=y.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=Z0(),o=a?String(a==null?void 0:a.message):t;return o?s.jsx("p",{ref:n,id:i,className:ae("text-sm font-medium text-destructive",e),...r,children:o}):null});_t.displayName="FormMessage";const nde=ks({employeeId:Je().min(1,"Employee is required"),leaveTypeId:Je().min(1,"Leave type is required"),startDate:Je().min(1,"Start date is required"),endDate:Je().min(1,"End date is required"),hours:$U().min(.5,"Hours must be at least 0.5"),reason:Je().optional()}).refine(e=>e.startDate&&e.endDate?On(e.endDate)>=On(e.startDate):!0,{message:"End date must be after start date",path:["endDate"]});function sde({open:e,onOpenChange:t,preselectedEmployeeId:r}){const{leaveTypes:n,createRequest:a,isCreatingRequest:i}=sc(),{employees:o}=xa(),l=o.filter(m=>m.status==="active"),c=as({resolver:Oi(nde),defaultValues:{employeeId:r||"",leaveTypeId:"",startDate:"",endDate:"",hours:8,reason:""}}),u=c.watch("startDate"),d=c.watch("endDate"),f=()=>{if(u&&d)try{const m=_se(On(d),On(u))+1;return Math.max(m*8,0)}catch{return 8}return 8},h=m=>{a({employeeId:m.employeeId,leaveTypeId:m.leaveTypeId,startDate:m.startDate,endDate:m.endDate,hours:m.hours,reason:m.reason},{onSuccess:()=>{c.reset(),t(!1)}})};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-md",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Submit Leave Request"}),s.jsx(Ot,{children:"Fill in the details for the leave request."})]}),s.jsx(lc,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(h),className:"space-y-4",children:[!r&&s.jsx(pt,{control:c.control,name:"employeeId",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Employee"}),s.jsxs(Ie,{onValueChange:m.onChange,value:m.value,children:[s.jsx(ht,{children:s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select employee"})})}),s.jsx(Me,{children:l.map(g=>s.jsxs(Y,{value:g.id,children:[g.first_name," ",g.last_name]},g.id))})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"leaveTypeId",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Leave Type"}),s.jsxs(Ie,{onValueChange:m.onChange,value:m.value,children:[s.jsx(ht,{children:s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select leave type"})})}),s.jsx(Me,{children:n.map(g=>s.jsxs(Y,{value:g.id,children:[g.name," ",!g.paid&&"(Unpaid)"]},g.id))})]}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(pt,{control:c.control,name:"startDate",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Start Date"}),s.jsx(ht,{children:s.jsx(ne,{type:"date",...m,onChange:g=>{m.onChange(g),setTimeout(()=>{const p=f();c.setValue("hours",p)},0)}})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"endDate",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"End Date"}),s.jsx(ht,{children:s.jsx(ne,{type:"date",...m,onChange:g=>{m.onChange(g),setTimeout(()=>{const p=f();c.setValue("hours",p)},0)}})}),s.jsx(_t,{})]})})]}),s.jsx(pt,{control:c.control,name:"hours",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Total Hours"}),s.jsx(ht,{children:s.jsx(ne,{type:"number",step:"0.5",...m,onChange:g=>m.onChange(parseFloat(g.target.value)||0)})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"reason",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Reason (Optional)"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Brief description...",...m})}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{type:"submit",className:"gradient-primary",disabled:i,children:i?"Submitting...":"Submit Request"})]})]})})]})})}function ade({onViewEmployee:e}){const{leaveRequests:t,stats:r,processDecision:n,isProcessingDecision:a,getEmployeeBalances:i}=sc(),[o,l]=y.useState("pending"),[c,u]=y.useState(null),[d,f]=y.useState({open:!1,action:null,reason:"",override:!1,insufficientBalance:!1}),h=o==="all"?t:t.filter(v=>v.status===o),m=(v,x)=>{let b=!1;if(x==="approve"&&v.leave_type_id){const _=i(v.employee_id).find(j=>j.leave_type_id===v.leave_type_id);b=!_||_.balance_hours<v.hours}u(v),f({open:!0,action:x,reason:"",override:!1,insufficientBalance:b})},g=()=>{!c||!d.action||n({request_id:c.id,action:d.action,reason:d.reason||void 0,override_insufficient_balance:d.override},{onSuccess:()=>{f({open:!1,action:null,reason:"",override:!1,insufficientBalance:!1}),u(null)}})},p=v=>({"Annual Leave":"bg-info/10 text-info","Personal/Sick Leave":"bg-warning/10 text-warning","Compassionate Leave":"bg-primary/10 text-primary","Parental Leave":"bg-success/10 text-success","Unpaid Leave":"bg-muted text-muted-foreground",Other:"bg-muted text-muted-foreground"})[v]||"bg-muted text-muted-foreground";return s.jsxs(s.Fragment,{children:[s.jsxs(G,{children:[s.jsx(he,{children:s.jsx(ge,{className:"text-lg",children:"Leave Requests"})}),s.jsx(X,{children:s.jsxs(bn,{value:o,onValueChange:l,children:[s.jsxs(fn,{className:"mb-4",children:[s.jsxs(Ve,{value:"pending",children:["Pending (",r.pending,")"]}),s.jsx(Ve,{value:"approved",children:"Approved"}),s.jsx(Ve,{value:"rejected",children:"Rejected"}),s.jsx(Ve,{value:"all",children:"All"})]}),s.jsx("div",{className:"space-y-4",children:h.length===0?s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:s.jsx("p",{children:"No leave requests found"})}):h.map(v=>{const x=v.employee;return x?s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-muted/30 transition-colors",children:[s.jsx(Or,{className:"h-12 w-12 flex-shrink-0 cursor-pointer",onClick:()=>e==null?void 0:e(x.id),children:s.jsxs(Tr,{className:"bg-primary/10 text-primary",children:[x.first_name[0],x.last_name[0]]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("p",{className:"font-semibold cursor-pointer hover:text-primary",onClick:()=>e==null?void 0:e(x.id),children:[x.first_name," ",x.last_name]}),v.leave_type&&s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${p(v.leave_type.name)}`,children:v.leave_type.name}),s.jsx(jh,{status:v.status,size:"sm"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[de(On(v.start_date),"EEE, dd MMM")," -"," ",de(On(v.end_date),"EEE, dd MMM yyyy")]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.hours," hours",v.override_reason&&s.jsxs("span",{className:"ml-2 text-warning",children:[s.jsx(or,{className:"inline h-3 w-3 mr-1"}),"Override applied"]})]}),v.reason&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-1 italic",children:['"',v.reason,'"']})]}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[v.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(I,{size:"sm",variant:"outline",className:"text-success border-success hover:bg-success/10",onClick:()=>m(v,"approve"),children:[s.jsx(jt,{className:"h-4 w-4 mr-1"}),"Approve"]}),s.jsxs(I,{size:"sm",variant:"outline",className:"text-destructive border-destructive hover:bg-destructive/10",onClick:()=>m(v,"reject"),children:[s.jsx(An,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),v.status==="approved"&&s.jsxs(I,{size:"sm",variant:"outline",className:"text-muted-foreground",onClick:()=>m(v,"cancel"),children:[s.jsx(tG,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]},v.id):null})})]})})]}),s.jsx(Rt,{open:d.open,onOpenChange:v=>{v||(f({open:!1,action:null,reason:"",override:!1,insufficientBalance:!1}),u(null))},children:s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsxs(At,{children:[d.action==="approve"&&"Approve Leave Request",d.action==="reject"&&"Reject Leave Request",d.action==="cancel"&&"Cancel Leave Request"]}),s.jsxs(Ot,{children:[d.action==="approve"&&"This will deduct the hours from the employee's balance.",d.action==="reject"&&"The employee will be notified of the rejection.",d.action==="cancel"&&"This will restore the hours to the employee's balance."]})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[d.insufficientBalance&&d.action==="approve"&&s.jsx("div",{className:"p-3 rounded-lg bg-warning/10 border border-warning/20",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(or,{className:"h-5 w-5 text-warning flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-warning",children:"Insufficient Balance"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"The employee does not have enough leave balance for this request."}),s.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[s.jsx(Ti,{id:"override",checked:d.override,onCheckedChange:v=>f(x=>({...x,override:!!v}))}),s.jsx(H,{htmlFor:"override",className:"text-sm",children:"Override and approve anyway (requires reason)"})]})]})]})}),(d.action==="reject"||d.action==="cancel"||d.insufficientBalance&&d.override)&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(H,{htmlFor:"reason",children:["Reason ",d.override?"(Required)":"(Optional)"]}),s.jsx(wt,{id:"reason",value:d.reason,onChange:v=>f(x=>({...x,reason:v.target.value})),placeholder:"Enter reason..."})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>{f({open:!1,action:null,reason:"",override:!1,insufficientBalance:!1}),u(null)},children:"Cancel"}),s.jsx(I,{onClick:g,disabled:a||d.insufficientBalance&&d.action==="approve"&&!d.override||d.override&&!d.reason.trim(),className:d.action==="approve"?"bg-success hover:bg-success/90":d.action==="reject"?"bg-destructive hover:bg-destructive/90":"",children:a?"Processing...":`Confirm ${d.action}`})]})]})})]})}const ide=ks({leaveTypeId:Je().min(1,"Leave type is required"),adjustmentHours:$U().refine(e=>e!==0,"Hours cannot be zero"),reason:Je().min(10,"Reason must be at least 10 characters")});function ode({open:e,onOpenChange:t,employeeId:r,employeeName:n}){const{leaveTypes:a,createAdjustment:i,isCreatingAdjustment:o,getEmployeeBalances:l}=sc(),c=as({resolver:Oi(ide),defaultValues:{leaveTypeId:"",adjustmentHours:0,reason:""}}),u=c.watch("leaveTypeId"),f=(r?l(r):[]).find(m=>m.leave_type_id===u),h=m=>{r&&i({employee_id:r,leave_type_id:m.leaveTypeId,adjustment_hours:m.adjustmentHours,reason:m.reason},{onSuccess:()=>{c.reset(),t(!1)}})};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-md",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Adjust Leave Balance"}),s.jsxs(Ot,{children:["Manually adjust the leave balance for ",n,". This action will be logged for audit purposes."]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-warning/10 border border-warning/20 flex items-start gap-2",children:[s.jsx(or,{className:"h-5 w-5 text-warning flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Balance adjustments are tracked in the audit log and visible in compliance reports. A detailed reason is required."})]}),s.jsx(lc,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(h),className:"space-y-4",children:[s.jsx(pt,{control:c.control,name:"leaveTypeId",render:({field:m})=>{var g;return s.jsxs(ft,{children:[s.jsx(vt,{children:"Leave Type"}),s.jsxs(Ie,{onValueChange:m.onChange,value:m.value,children:[s.jsx(ht,{children:s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select leave type"})})}),s.jsx(Me,{children:a.map(p=>s.jsx(Y,{value:p.id,children:p.name},p.id))})]}),f&&s.jsxs(Yd,{children:["Current balance: ",((g=f.balance_hours)==null?void 0:g.toFixed(1))||0," hours"]}),s.jsx(_t,{})]})}}),s.jsx(pt,{control:c.control,name:"adjustmentHours",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Adjustment Hours"}),s.jsx(ht,{children:s.jsx(ne,{type:"number",step:"0.5",placeholder:"e.g., 8 or -16",...m,onChange:g=>m.onChange(parseFloat(g.target.value)||0)})}),s.jsx(Yd,{children:"Use positive numbers to add hours, negative to deduct."}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"reason",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Reason"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Explain why this adjustment is being made...",className:"min-h-[100px]",...m})}),s.jsx(Yd,{children:"This will be recorded in the audit log."}),s.jsx(_t,{})]})}),s.jsxs(ar,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:o,children:o?"Saving...":"Save Adjustment"})]})]})})]})})}function lde({onViewEmployee:e}){const{leaveBalances:t,leaveTypes:r,runAccruals:n,isRunningAccruals:a}=sc(),{employees:i}=xa(),o=i.filter(m=>m.status==="active"),[l,c]=y.useState(""),[u,d]=y.useState({open:!1,employeeId:null,employeeName:""}),h=o.map(m=>{const g=t.filter(p=>p.employee_id===m.id);return{employee:m,balances:r.map(p=>{const v=g.find(x=>x.leave_type_id===p.id);return{leaveType:p,hours:(v==null?void 0:v.balance_hours)||0}})}}).filter(m=>`${m.employee.first_name} ${m.employee.last_name}`.toLowerCase().includes(l.toLowerCase()));return s.jsxs(s.Fragment,{children:[s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsx(ge,{className:"text-lg",children:"Leave Balances"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(un,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{placeholder:"Search employees...",value:l,onChange:m=>c(m.target.value),className:"pl-9 w-64"})]}),s.jsxs(I,{variant:"outline",size:"sm",onClick:()=>n(),disabled:a,children:[s.jsx(Gs,{className:"h-4 w-4 mr-2"}),a?"Running...":"Run Accruals"]})]})]}),s.jsx(X,{children:h.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.jsx("p",{children:"No employees found"})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(({employee:m,balances:g})=>{var p;return s.jsxs("div",{className:"p-4 rounded-lg border border-border bg-card hover:bg-muted/30 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e==null?void 0:e(m.id),children:[s.jsx(Or,{className:"h-10 w-10",children:s.jsxs(Tr,{className:"bg-primary/10 text-primary text-sm",children:[m.first_name[0],m.last_name[0]]})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium hover:text-primary",children:[m.first_name," ",m.last_name]}),s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:(p=m.employment_type)==null?void 0:p.replace("_"," ")})]})]}),s.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>d({open:!0,employeeId:m.id,employeeName:`${m.first_name} ${m.last_name}`}),children:s.jsx(yt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[g.slice(0,4).map(({leaveType:v,hours:x})=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground truncate mr-2",children:v.name}),s.jsxs(fe,{variant:x>0?"secondary":"outline",className:"font-mono",children:[x.toFixed(1),"h"]})]},v.id)),g.length>4&&s.jsxs("p",{className:"text-xs text-muted-foreground text-center pt-1",children:["+",g.length-4," more"]})]})]},m.id)})})})]}),s.jsx(ode,{open:u.open,onOpenChange:m=>d(g=>({...g,open:m})),employeeId:u.employeeId,employeeName:u.employeeName})]})}function cde(){const{adjustments:e,adjustmentsLoading:t}=sc();return t?s.jsxs(G,{children:[s.jsx(he,{children:s.jsx(ge,{className:"text-lg",children:"Adjustment History"})}),s.jsx(X,{children:s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading adjustments..."})})]}):s.jsxs(G,{children:[s.jsx(he,{children:s.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(Xa,{className:"h-5 w-5"}),"Balance Adjustment History"]})}),s.jsx(X,{children:e.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Xa,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No balance adjustments have been made"}),s.jsx("p",{className:"text-sm mt-1",children:"Adjustments will appear here when admins manually modify leave balances."})]}):s.jsx("div",{className:"space-y-4",children:e.map(r=>{const n=r.adjustment_hours>0,a=r.employee,i=r.leave_type;return s.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border border-border bg-card",children:[s.jsx("div",{className:`p-2 rounded-full ${n?"bg-success/10":"bg-destructive/10"}`,children:n?s.jsx(Gs,{className:"h-5 w-5 text-success"}):s.jsx(gG,{className:"h-5 w-5 text-destructive"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Or,{className:"h-6 w-6",children:s.jsxs(Tr,{className:"text-xs bg-primary/10 text-primary",children:[a.first_name[0],a.last_name[0]]})}),s.jsxs("span",{className:"font-medium",children:[a.first_name," ",a.last_name]})]}),i&&s.jsx(fe,{variant:"secondary",children:i.name}),s.jsxs(fe,{variant:n?"default":"destructive",className:"font-mono",children:[n?"+":"",r.adjustment_hours.toFixed(1),"h"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.reason}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Adjusted by ",r.adjusted_by_name||r.adjusted_by_email," on"," ",de(On(r.created_at),"PPp")]})]})]},r.id)})})})]})}function ude(){const[e,t]=y.useState("requests"),[r,n]=y.useState(!1),{stats:a,isLoading:i}=sc();return i?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx($t,{className:"h-8 w-48"}),s.jsx($t,{className:"h-10 w-40"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[1,2,3,4].map(o=>s.jsx($t,{className:"h-24"},o))}),s.jsx($t,{className:"h-96"})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Leave Management"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage leave requests, balances, and accruals."})]}),s.jsxs(I,{className:"gradient-primary",onClick:()=>n(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Leave Request"]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[s.jsx(G,{className:"card-interactive",children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-warning/10",children:s.jsx(xt,{className:"h-5 w-5 text-warning"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:a.pending}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"})]})]})})}),s.jsx(G,{className:"card-interactive",children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-success/10",children:s.jsx(jt,{className:"h-5 w-5 text-success"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:a.approved}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"})]})]})})}),s.jsx(G,{className:"card-interactive",children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-destructive/10",children:s.jsx(An,{className:"h-5 w-5 text-destructive"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:a.rejected}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejected"})]})]})})}),s.jsx(G,{className:"card-interactive",children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-muted",children:s.jsx(Vt,{className:"h-5 w-5 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:a.cancelled}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cancelled"})]})]})})})]}),s.jsxs(bn,{value:e,onValueChange:t,children:[s.jsxs(fn,{children:[s.jsxs(Ve,{value:"requests",children:[s.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Requests"]}),s.jsxs(Ve,{value:"balances",children:[s.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Balances"]}),s.jsxs(Ve,{value:"adjustments",children:[s.jsx(Xa,{className:"h-4 w-4 mr-2"}),"Adjustments"]})]}),s.jsx(rt,{value:"requests",className:"mt-6",children:s.jsx(ade,{})}),s.jsx(rt,{value:"balances",className:"mt-6",children:s.jsx(lde,{})}),s.jsx(rt,{value:"adjustments",className:"mt-6",children:s.jsx(cde,{})})]}),s.jsx(sde,{open:r,onOpenChange:n})]})}const dde={draft:{label:"Draft",className:"bg-muted text-muted-foreground"},active:{label:"Active",className:"bg-success/10 text-success border-success/20"},paused:{label:"Paused",className:"bg-warning/10 text-warning border-warning/20"},closed:{label:"Closed",className:"bg-destructive/10 text-destructive border-destructive/20"}};function fde({job:e,onView:t,onEdit:r,onToggleStatus:n,onDelete:a}){var o;const i=dde[e.status];return s.jsx(G,{className:"card-interactive",children:s.jsxs(X,{className:"pt-5",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold text-lg truncate",children:e.title}),s.jsx(fe,{variant:"outline",className:ae("text-xs capitalize",i.className),children:i.label})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(o=e.department)!=null&&o.trim()?e.department:""})]}),s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",children:s.jsx(si,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",className:"w-48 bg-popover",children:[s.jsxs(tt,{onClick:()=>t==null?void 0:t(e),children:[s.jsx($i,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.jsxs(tt,{onClick:()=>r==null?void 0:r(e),children:[s.jsx(CE,{className:"h-4 w-4 mr-2"}),"Edit Posting"]}),s.jsx(ca,{}),e.status==="active"?s.jsxs(tt,{onClick:()=>n==null?void 0:n(e),children:[s.jsx(y0,{className:"h-4 w-4 mr-2"}),"Pause Posting"]}):e.status==="paused"?s.jsxs(tt,{onClick:()=>n==null?void 0:n(e),children:[s.jsx(Sp,{className:"h-4 w-4 mr-2"}),"Resume Posting"]}):null,s.jsx(ca,{}),s.jsxs(tt,{className:"text-destructive",onClick:()=>a==null?void 0:a(e),children:[s.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),s.jsx("div",{className:"mt-4 space-y-2",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(ho,{className:"h-4 w-4"}),s.jsx("span",{children:"Recruitment job posting"})]})}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-border flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:typeof e.applicantCount=="number"?s.jsxs("span",{className:"font-medium",children:[e.applicantCount," applicants"]}):s.jsx("span",{className:"font-medium",children:"Applicants"})}),s.jsx(I,{variant:"outline",size:"sm",onClick:()=>t==null?void 0:t(e),children:"View Applicants"})]})]})})}const ay=[{key:"applied",label:"Applied",color:"bg-muted"},{key:"screening",label:"Screening",color:"bg-info/20"},{key:"interview",label:"Interview",color:"bg-primary/20"},{key:"reference_check",label:"Reference Check",color:"bg-warning/20"},{key:"offer",label:"Offer",color:"bg-success/20"}],LT={applied:"Applied",screening:"Screening",interview:"Interview",reference_check:"Reference Check",offer:"Offer",hired:"Hired",rejected:"Rejected"};function hde({applicants:e,onSelectApplicant:t,onMoveApplicant:r}){const n=i=>e.filter(o=>o.stage===i),a=i=>{const o=ay.findIndex(l=>l.key===i);return o>=0&&o<ay.length-1?ay[o+1].key:null};return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:ay.map(i=>{const o=n(i.key);return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:ae("rounded-lg p-3",i.color),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-sm",children:i.label}),s.jsx(fe,{variant:"secondary",className:"text-xs",children:o.length})]})}),s.jsxs("div",{className:"space-y-2 min-h-[200px]",children:[o.map(l=>s.jsx(mde,{applicant:l,nextStage:a(l.stage),onSelect:()=>t==null?void 0:t(l),onMove:c=>r==null?void 0:r(l,c)},l.id)),o.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm border-2 border-dashed rounded-lg",children:"No applicants"}):null]})]},i.key)})})}function mde({applicant:e,nextStage:t,onSelect:r,onMove:n}){var l;const a=`${(e.first_name||" ").trim().charAt(0)}${(e.last_name||" ").trim().charAt(0)}`.toUpperCase().trim(),i=(()=>{try{return de(On(e.created_at),"MMM d")}catch{return""}})(),o=Array.isArray(e.notes)?((l=e.notes[e.notes.length-1])==null?void 0:l.content)??"":e.notes??"";return s.jsx(G,{className:"cursor-pointer hover:shadow-md transition-all hover:-translate-y-0.5",onClick:r,children:s.jsxs(X,{className:"p-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Or,{className:"h-9 w-9 flex-shrink-0",children:s.jsx(Tr,{className:"bg-primary/10 text-primary text-xs",children:a||"NA"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"font-medium text-sm truncate",children:[e.first_name," ",e.last_name]}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.email||e.phone||""})]}),s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,onClick:c=>c.stopPropagation(),children:s.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6",children:s.jsx(si,{className:"h-3 w-3"})})}),s.jsxs(ss,{align:"end",className:"w-52 bg-popover",children:[s.jsxs(tt,{onClick:c=>{c.stopPropagation(),r()},children:[s.jsx(Bn,{className:"h-4 w-4 mr-2"}),"View Profile"]}),e.email?s.jsxs(tt,{onClick:c=>c.stopPropagation(),children:[s.jsx(Hl,{className:"h-4 w-4 mr-2"}),"Send Email"]}):null,s.jsx(ca,{}),t?s.jsxs(tt,{onClick:c=>{c.stopPropagation(),n(t)},children:[s.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Move to ",LT[t]]}):null,s.jsxs(tt,{onClick:c=>{c.stopPropagation(),n("hired")},children:[s.jsx(hF,{className:"h-4 w-4 mr-2"}),"Mark as Hired"]}),s.jsxs(tt,{className:"text-destructive",onClick:c=>{c.stopPropagation(),n("rejected")},children:[s.jsx(An,{className:"h-4 w-4 mr-2"}),"Reject Applicant"]})]})]})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[s.jsx(fe,{variant:"outline",className:"text-xs",children:LT[e.stage]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:i})]}),o.trim()?s.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:s.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:o})}):null]})})}const dm=["applied","screening","interview","reference_check","offer","hired"],FT={applied:"Applied",screening:"Screening",interview:"Interview",reference_check:"Reference Check",offer:"Offer",hired:"Hired",rejected:"Rejected"},pde={applied:"bg-muted text-muted-foreground",screening:"bg-info/10 text-info",interview:"bg-primary/10 text-primary",reference_check:"bg-warning/10 text-warning",offer:"bg-success/10 text-success",hired:"bg-success text-success-foreground",rejected:"bg-destructive/10 text-destructive"};function gde({applicant:e,open:t,onOpenChange:r,onMoveStage:n,onOpenOfferLetter:a}){const[i,o]=y.useState(""),l=y.useMemo(()=>{if(!e)return"NA";const f=(e.first_name||" ").trim().charAt(0),h=(e.last_name||" ").trim().charAt(0);return`${f}${h}`.toUpperCase().trim()||"NA"},[e]),c=y.useMemo(()=>{if(!(e!=null&&e.created_at))return"";try{return de(On(e.created_at),"MMMM d, yyyy")}catch{return""}},[e==null?void 0:e.created_at]),u=y.useMemo(()=>{if(!e||e.stage==="rejected"||e.stage==="hired")return null;const f=dm.indexOf(e.stage);return f>=0&&f<dm.length-1?dm[f+1]:null},[e]),d=y.useMemo(()=>e?Array.isArray(e.notes)?e.notes:typeof e.notes=="string"&&e.notes.trim()?[{id:`note-${e.id}`,content:e.notes,author:"System",createdAt:e.created_at}]:[]:[],[e]);return e?s.jsx(Do,{open:t,onOpenChange:r,children:s.jsxs(Li,{className:"w-full sm:max-w-lg overflow-y-auto",children:[s.jsx(Fi,{className:"pb-4",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Or,{className:"h-14 w-14",children:s.jsx(Tr,{className:"bg-primary/10 text-primary text-lg",children:l})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(Ui,{className:"text-xl",children:[e.first_name," ",e.last_name]}),s.jsx(Ro,{className:"mt-1",children:e.source?`Source: ${e.source}`:"Applicant details"}),s.jsx(fe,{className:ae("mt-2",pde[e.stage]),children:FT[e.stage]})]})]})}),s.jsxs("div",{className:"space-y-3 py-4 border-t border-b border-border",children:[e.email?s.jsxs("a",{href:`mailto:${e.email}`,className:"flex items-center gap-3 text-sm hover:text-primary transition-colors",children:[s.jsx(Hl,{className:"h-4 w-4 text-muted-foreground"}),e.email]}):s.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[s.jsx(Hl,{className:"h-4 w-4"}),""]}),e.phone?s.jsxs("a",{href:`tel:${e.phone}`,className:"flex items-center gap-3 text-sm hover:text-primary transition-colors",children:[s.jsx(tu,{className:"h-4 w-4 text-muted-foreground"}),e.phone]}):s.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[s.jsx(tu,{className:"h-4 w-4"}),""]}),c?s.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[s.jsx(Vt,{className:"h-4 w-4"}),"Applied ",c]}):null]}),s.jsxs("div",{className:"py-4",children:[s.jsx("p",{className:"text-sm font-medium mb-3",children:"Hiring Progress"}),s.jsx("div",{className:"flex items-center gap-1",children:dm.slice(0,-1).map((f,h)=>{const g=dm.indexOf(e.stage)>=h;return s.jsx("div",{className:"flex items-center flex-1",children:s.jsx("div",{className:ae("h-2 flex-1 rounded-full transition-colors",g?"bg-primary":"bg-muted")})},f)})}),s.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[s.jsx("span",{children:"Applied"}),s.jsx("span",{children:"Hired"})]})]}),s.jsxs("div",{className:"flex gap-2 py-4",children:[u&&e.stage!=="rejected"?s.jsxs(I,{className:"flex-1 gradient-primary",onClick:()=>n==null?void 0:n(e,u),children:["Move to ",FT[u],s.jsx(Oo,{className:"h-4 w-4 ml-1"})]}):null,e.stage==="offer"?s.jsxs(I,{className:"flex-1 gradient-primary",onClick:()=>a==null?void 0:a(e),children:[s.jsx(wo,{className:"h-4 w-4 mr-2"}),"Offer Letter"]}):null,e.stage!=="rejected"&&e.stage!=="hired"?s.jsxs(I,{variant:"outline",className:"text-destructive",onClick:()=>n==null?void 0:n(e,"rejected"),children:[s.jsx(Fn,{className:"h-4 w-4 mr-1"}),"Reject"]}):null]}),s.jsx(Et,{}),s.jsxs(bn,{defaultValue:"notes",className:"mt-4",children:[s.jsxs(fn,{className:"w-full",children:[s.jsx(Ve,{value:"notes",className:"flex-1",children:"Notes"}),s.jsx(Ve,{value:"documents",className:"flex-1",children:"Documents"})]}),s.jsxs(rt,{value:"notes",className:"mt-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(wt,{placeholder:"Add a note about this candidate...",value:i,onChange:f=>o(f.target.value),className:"min-h-[80px]"}),s.jsxs(I,{size:"sm",disabled:!i.trim(),onClick:()=>{o("")},children:[s.jsx(yt,{className:"h-4 w-4 mr-1"}),"Add Note"]})]}),s.jsx("div",{className:"space-y-3",children:d.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"}):d.map(f=>s.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:f.content}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:f.author??"System"}),s.jsx("span",{children:""}),s.jsx("span",{children:f.createdAt?f.createdAt:"Stored on applicant record"})]})]},f.id??f.content))})]}),s.jsxs(rt,{value:"documents",className:"mt-4 space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No documents yet. (Wire this to storage + a documents table later.)"}),s.jsx("div",{className:"hidden",children:s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(gt,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:"Resume.pdf"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Uploaded Jan 1, 2026"})]}),s.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(Es,{className:"h-4 w-4"})})]})}),s.jsxs(I,{variant:"outline",className:"w-full mt-2",disabled:!0,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Upload Document"]})]})]})]})}):null}function vde({onboardingProgress:e}){const t=(e==null?void 0:e.length)??0;return s.jsx("div",{className:"space-y-6",children:s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsx(ge,{className:"text-lg",children:"Onboarding"}),s.jsx(fe,{variant:"secondary",children:t})]}),s.jsxs(X,{className:"space-y-3",children:[t===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No onboarding data yet. This module will be enabled once onboarding tables are added and scoped by organisation_id."}):s.jsx("div",{className:"space-y-2",children:e.map(r=>s.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border p-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:r.employeeName}),r.startDate?s.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:["Starts ",r.startDate]}):null]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:typeof r.completionPercentage=="number"?`${r.completionPercentage}%`:""})]},r.employeeId))}),s.jsx("div",{className:"pt-2",children:s.jsx("p",{className:"text-xs text-muted-foreground",children:"Note: The old checklist template + mock tasks were removed to keep recruitment backend-focused."})})]})]})})}const iy=$;function yde({open:e,onOpenChange:t,trigger:r}){const[n,a]=y.useState(""),[i,o]=y.useState(""),[l,c]=y.useState(""),[u,d]=y.useState([]),[f,h]=y.useState(""),[m,g]=y.useState(!1),[p,v]=y.useState(null),{data:x=[],isLoading:b}=sr({queryKey:["departments"],queryFn:async()=>{const{data:P,error:A}=await iy.from("departments").select("id, name").order("name");if(A)throw A;return P??[]}}),w=()=>{f.trim()&&(d([...u,f.trim()]),h(""))},_=P=>{d(u.filter((A,k)=>k!==P))},j=()=>{a(""),o(""),c(""),d([]),h(""),v(null)},N=y.useMemo(()=>n.trim().length>0&&i.trim().length>0&&!m,[n,i,m]),S=async()=>{var U;const{data:P,error:A}=await iy.auth.getSession();if(A)throw A;const k=(U=P.session)==null?void 0:U.user;if(!k)throw new Error("Not authenticated");const{data:D,error:R}=await iy.rpc("get_user_organisation_id",{_user_id:k.id});if(R)throw R;if(!D)throw new Error("Missing organisation_id for user");return D},E=()=>{const P=l.trim();if(u.length===0)return P;const A=u.map(k=>`- ${k}`).join(`
`);return P?`${P}

Requirements:
${A}`:`Requirements:
${A}`},C=async P=>{v(null),g(!0);try{const k={organisation_id:await S(),title:n.trim(),department:i.trim()||null,status:P,description:E()||null},{error:D}=await iy.from("recruitment_job_postings").insert(k);if(D)throw D;j(),t==null||t(!1)}catch(A){String((A==null?void 0:A.message)??"").toLowerCase().includes("column")&&String((A==null?void 0:A.message)??"").toLowerCase().includes("description")?v("Your `recruitment_job_postings` table doesn't have a `description` column. Either add it, or tell me what column should store the description."):v((A==null?void 0:A.message)??"Failed to create job posting")}finally{g(!1)}};return s.jsxs(Rt,{open:e,onOpenChange:P=>{t==null||t(P),P||j()},children:[r&&s.jsx(rv,{asChild:!0,children:r}),s.jsxs(kt,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Create Job Posting"}),s.jsx(Ot,{children:"Fill in the details to create a new job listing."})]}),p?s.jsx("p",{className:"text-sm text-destructive",children:p}):null,s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"job-title",children:"Job Title *"}),s.jsx(ne,{id:"job-title",placeholder:"e.g. Support Worker",value:n,onChange:P=>a(P.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"department",children:"Department *"}),s.jsxs(Ie,{value:i,onValueChange:o,children:[s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select department"})}),s.jsx(Me,{className:"bg-popover",children:b?s.jsx("div",{className:"flex items-center justify-center py-2",children:s.jsx(We,{className:"h-4 w-4 animate-spin"})}):x.length===0?s.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No departments configured"}):x.map(P=>s.jsx(Y,{value:P.name,children:P.name},P.id))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"description",children:"Job Description"}),s.jsx(wt,{id:"description",placeholder:"Describe the role, responsibilities, and what you're looking for...",className:"min-h-[120px]",value:l,onChange:P=>c(P.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Requirements"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{placeholder:"Add a requirement...",value:f,onChange:P=>h(P.target.value),onKeyDown:P=>{P.key==="Enter"&&(P.preventDefault(),w())}}),s.jsx(I,{type:"button",onClick:w,variant:"outline",disabled:m,children:s.jsx(yt,{className:"h-4 w-4"})})]}),u.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:u.map((P,A)=>s.jsxs(fe,{variant:"secondary",className:"pl-3 pr-1 py-1.5",children:[P,s.jsx("button",{type:"button",onClick:()=>_(A),className:"ml-2 hover:text-destructive",disabled:m,children:s.jsx(Fn,{className:"h-3 w-3"})})]},A))})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[s.jsxs(I,{variant:"outline",className:"flex-1",onClick:()=>C("draft"),disabled:!N,children:[m?s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Save as Draft"]}),s.jsxs(I,{className:"flex-1 gradient-primary",onClick:()=>C("active"),disabled:!N,children:[m?s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Publish Job"]})]})]})]})]})}const y_=$;function xde({applicant:e,open:t,onOpenChange:r}){const[n,a]=y.useState("details"),[i,o]=y.useState(""),[l,c]=y.useState(""),[u,d]=y.useState(""),[f,h]=y.useState(""),[m,g]=y.useState(""),[p,v]=y.useState(!1),[x,b]=y.useState(null),w=y.useMemo(()=>e?`${e.first_name} ${e.last_name}`.trim():"",[e]),_=async()=>{var R;if(e!=null&&e.organisation_id)return e.organisation_id;const{data:C,error:P}=await y_.auth.getSession();if(P)throw P;const A=(R=C.session)==null?void 0:R.user;if(!A)throw new Error("Not authenticated");const{data:k,error:D}=await y_.rpc("get_user_organisation_id",{_user_id:A.id});if(D)throw D;if(!k)throw new Error("Missing organisation_id for user");return k},j=()=>{const C="Your Company",P=i.trim()||"the role",A=[];P&&A.push(`Position: ${P}`),l.trim()&&A.push(`Pay Rate: $${l.trim()} per hour`),u&&A.push(`Start Date: ${u}`),f&&A.push(`Offer Expiry Date: ${f}`);const k=A.length?A.map(R=>`- ${R}`).join(`
`):"- Position: (to be confirmed)",D=m.trim();return[`Dear ${w||"Candidate"},`,"",`We are pleased to offer you the position of ${P} at ${C}.`,"","Offer details:",k,"","This offer is contingent upon completion of any required pre-employment checks.","",D?`Additional notes:
${D}`:null,"","Please confirm your acceptance of this offer by replying to this letter or signing and returning it by the expiry date.","","Sincerely,",C].filter(Boolean).join(`
`)},N=async C=>{if(e){b(null),v(!0);try{const P=await _(),A=j(),{error:k}=await y_.from("recruitment_offer_letters").insert({organisation_id:P,applicant_id:e.id,status:C==="sent"?"sent":"draft",content:A});if(k)throw k;a("details"),o(""),c(""),d(""),h(""),g(""),r(!1)}catch(P){b((P==null?void 0:P.message)??"Failed to save offer letter")}finally{v(!1)}}},S=async()=>{try{await N("sent")}catch{}},E=y.useMemo(()=>j(),[w,i,l,u,f,m]);return e?s.jsx(Rt,{open:t,onOpenChange:C=>{r(C),C||(b(null),a("details"))},children:s.jsxs(kt,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Pt,{children:[s.jsxs(At,{className:"flex items-center gap-2",children:[s.jsx(fh,{className:"h-5 w-5 text-primary"}),"Offer Letter"]}),s.jsxs(Ot,{children:["Create an offer letter for ",w||"candidate","."]})]}),x?s.jsx("p",{className:"text-sm text-destructive",children:x}):null,n==="details"?s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Position Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"position",children:"Position Title"}),s.jsx(ne,{id:"position",value:i,onChange:C=>o(C.target.value),placeholder:"e.g. Support Worker"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"pay-rate",children:"Pay Rate ($/hr)"}),s.jsx(ne,{id:"pay-rate",type:"number",inputMode:"decimal",value:l,onChange:C=>c(C.target.value),placeholder:"e.g. 40.00"})]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Important Dates"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"start-date",children:"Proposed Start Date"}),s.jsx(ne,{id:"start-date",type:"date",value:u,onChange:C=>d(C.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"expiry-date",children:"Offer Expiry Date"}),s.jsx(ne,{id:"expiry-date",type:"date",value:f,onChange:C=>h(C.target.value)})]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"notes",children:"Additional Notes"}),s.jsx(wt,{id:"notes",placeholder:"Any additional terms or notes to include...",className:"min-h-[80px]",value:m,onChange:C=>g(C.target.value)})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(I,{variant:"outline",onClick:()=>r(!1),disabled:p,children:"Cancel"}),s.jsxs(I,{variant:"outline",onClick:()=>a("preview"),disabled:p,children:[s.jsx($i,{className:"h-4 w-4 mr-2"}),"Preview"]}),s.jsxs(I,{className:"flex-1 gradient-primary",onClick:()=>N("draft"),disabled:p,children:[p?s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(wo,{className:"h-4 w-4 mr-2"}),"Save Draft"]})]})]}):s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsx(G,{className:"bg-muted/30",children:s.jsxs(X,{className:"pt-6 space-y-4",children:[s.jsxs("div",{className:"text-center border-b border-border pb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg gradient-primary flex items-center justify-center mx-auto mb-3",children:s.jsx("span",{className:"text-white font-bold",children:"S+"})}),s.jsx("h2",{className:"text-xl font-bold",children:"Employment Offer Letter"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Draft preview"})]}),s.jsx("div",{className:"space-y-3 text-sm whitespace-pre-wrap",children:E})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(I,{variant:"outline",onClick:()=>a("details"),disabled:p,children:"Back to Edit"}),s.jsxs(I,{variant:"outline",disabled:!0,children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),s.jsxs(I,{className:"flex-1 gradient-primary",onClick:S,disabled:p,children:[p?s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(wo,{className:"h-4 w-4 mr-2"}),"Save as Sent"]})]})]})]})}):null}const fm=$;function bde(){const[e,t]=y.useState("jobs"),[r,n]=y.useState("all"),[a,i]=y.useState(null),[o,l]=y.useState(!1),[c,u]=y.useState(!1),[d,f]=y.useState(!1),[h,m]=y.useState(""),[g,p]=y.useState("all"),[v,x]=y.useState(null),[b,w]=y.useState([]),[_,j]=y.useState([]),[N,S]=y.useState([]),[E,C]=y.useState(!0),[P,A]=y.useState(null),k=async()=>{var Pe;const{data:K,error:V}=await fm.auth.getSession();if(V)throw V;const le=(Pe=K.session)==null?void 0:Pe.user;if(!le)throw new Error("Not authenticated");const{data:be,error:ce}=await fm.rpc("get_user_organisation_id",{_user_id:le.id});if(ce)throw ce;if(!be)throw new Error("Missing organisation_id for user");return x(be),be},D=async K=>{const{data:V,error:le}=await fm.from("recruitment_job_postings").select("id, organisation_id, title, department, status, created_at, updated_at").eq("organisation_id",K).order("created_at",{ascending:!1});if(le)throw le;const{data:be,error:ce}=await fm.from("recruitment_applicants").select("id, organisation_id, job_posting_id, first_name, last_name, email, phone, stage, source, notes, created_at, updated_at").eq("organisation_id",K).order("created_at",{ascending:!1});if(ce)throw ce;w(V??[]),j(be??[]),S([])},R=async()=>{A(null),C(!0);try{const K=v??await k();await D(K)}catch(K){A((K==null?void 0:K.message)??"Failed to load recruitment data")}finally{C(!1)}};y.useEffect(()=>{R()},[]);const U=y.useMemo(()=>b.filter(K=>K.status==="active").length,[b]),B=y.useMemo(()=>_.length,[_]),L=y.useMemo(()=>_.filter(K=>!["hired","rejected"].includes(K.stage)).length,[_]),M=y.useMemo(()=>N.length,[N]),T=y.useMemo(()=>{const K=h.trim().toLowerCase();return b.filter(V=>{const le=!K||V.title.toLowerCase().includes(K)||(V.department??"").toLowerCase().includes(K),be=g==="all"?!0:V.status===g;return le&&be})},[b,h,g]),F=y.useMemo(()=>{const K=_.filter(V=>!["hired","rejected"].includes(V.stage));return r==="all"?K:K.filter(V=>V.job_posting_id===r)},[_,r]),Z=K=>{i(K),l(!0)},W=async(K,V)=>{A(null);try{const{error:le}=await fm.rpc("recruitment_move_applicant_stage",{p_applicant_id:K.id,p_to_stage:V,p_note:null});if(le)throw le;await R(),V==="offer"&&(i(K),f(!0))}catch(le){A((le==null?void 0:le.message)??"Failed to move applicant stage")}};return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Recruitment & Onboarding"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage job postings, track applicants, and onboard new hires."})]}),s.jsxs(I,{className:"gradient-primary",onClick:()=>u(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Post New Job"]})]}),P?s.jsx(G,{children:s.jsx(X,{className:"pt-4",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-sm text-destructive",children:P}),s.jsx("div",{children:s.jsx(I,{variant:"outline",onClick:R,children:"Retry"})})]})})}):null,s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Ut,{title:"Active Jobs",value:U,description:"Open positions",icon:ho,variant:"default"}),s.jsx(Ut,{title:"Total Applicants",value:B,description:"All time",icon:Ar,variant:"info"}),s.jsx(Ut,{title:"In Pipeline",value:L,description:"Currently reviewing",icon:SF,variant:"warning"}),s.jsx(Ut,{title:"Onboarding",value:M,description:"New hires in progress",icon:mu,variant:"success"})]}),s.jsxs(bn,{value:e,onValueChange:K=>t(K),children:[s.jsxs(fn,{children:[s.jsxs(Ve,{value:"jobs",className:"flex items-center gap-2",children:[s.jsx(ho,{className:"h-4 w-4"}),"Job Postings"]}),s.jsxs(Ve,{value:"applicants",className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4"}),"Applicants",s.jsx(fe,{variant:"secondary",className:"ml-1",children:L})]}),s.jsxs(Ve,{value:"onboarding",className:"flex items-center gap-2",children:[s.jsx(mu,{className:"h-4 w-4"}),"Onboarding",s.jsx(fe,{variant:"secondary",className:"ml-1",children:M})]})]}),s.jsx(rt,{value:"jobs",className:"mt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(G,{children:s.jsx(X,{className:"pt-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(un,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{type:"search",placeholder:"Search job postings...",value:h,onChange:K=>m(K.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:g,onValueChange:K=>p(K),children:[s.jsx(Re,{className:"w-full sm:w-40",children:s.jsx(Fe,{placeholder:"Status"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"all",children:"All Status"}),s.jsx(Y,{value:"active",children:"Active"}),s.jsx(Y,{value:"paused",children:"Paused"}),s.jsx(Y,{value:"draft",children:"Draft"}),s.jsx(Y,{value:"closed",children:"Closed"})]})]})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E?s.jsx(G,{children:s.jsx(X,{className:"pt-4",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})})}):T.length===0?s.jsx(G,{children:s.jsx(X,{className:"pt-4",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"No job postings found."})})}):T.map(K=>s.jsx(fde,{job:K,onView:V=>{n(V.id),t("applicants")},onEdit:V=>console.log("Edit job",V.id)},K.id))})]})}),s.jsx(rt,{value:"applicants",className:"mt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(G,{children:s.jsx(X,{className:"pt-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[s.jsx("div",{className:"flex-1",children:s.jsxs(Ie,{value:r,onValueChange:n,children:[s.jsx(Re,{className:"w-full sm:w-64",children:s.jsx(Fe,{placeholder:"Filter by job"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"all",children:"All Active Jobs"}),b.filter(K=>K.status==="active").map(K=>s.jsx(Y,{value:K.id,children:K.title},K.id))]})]})}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",F.length," applicants in pipeline"]})]})})}),s.jsx("div",{className:"overflow-x-auto pb-4",children:s.jsx(hde,{applicants:F,onSelectApplicant:Z,onMoveApplicant:W})})]})}),s.jsx(rt,{value:"onboarding",className:"mt-6",children:s.jsx(vde,{onboardingProgress:N})})]}),s.jsx(gde,{applicant:a,open:o,onOpenChange:l,onMoveStage:W}),s.jsx(yde,{open:c,onOpenChange:K=>{u(K),K||R()}}),s.jsx(xde,{applicant:a,open:d,onOpenChange:K=>{f(K),K||R()}})]})}const wde={draft:{label:"Draft",variant:"secondary",icon:gt},pending_signature:{label:"Pending Signature",variant:"default",icon:xt},signed:{label:"Signed",variant:"outline",icon:jt},expired:{label:"Expired",variant:"destructive",icon:hu},voided:{label:"Voided",variant:"destructive",icon:An}};function jde({contract:e,onView:t,onSign:r}){const n=wde[e.status],a=n.icon;return s.jsxs(G,{className:"hover:shadow-md transition-shadow",children:[s.jsx(he,{className:"pb-2",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(gt,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sm",children:e.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e.position})]})]}),s.jsxs(fe,{variant:n.variant,className:"flex items-center gap-1",children:[s.jsx(a,{className:"h-3 w-3"}),n.label]})]})}),s.jsxs(X,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Employee"}),s.jsx("p",{className:"font-medium",children:e.employee_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Email"}),s.jsx("p",{className:"font-medium truncate",children:e.employee_email})]}),e.start_date&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Start Date"}),s.jsx("p",{className:"font-medium",children:de(new Date(e.start_date),"MMM d, yyyy")})]}),e.pay_rate&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Pay Rate"}),s.jsxs("p",{className:"font-medium",children:["$",e.pay_rate,"/hr"]})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsxs(I,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>t(e),children:[s.jsx($i,{className:"h-4 w-4 mr-1"}),"View"]}),e.status==="pending_signature"&&s.jsxs(I,{size:"sm",className:"flex-1 gradient-primary",onClick:()=>r(e),children:[s.jsx(Np,{className:"h-4 w-4 mr-1"}),"Sign"]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created ",de(new Date(e.created_at),"MMM d, yyyy"),e.signed_at&&s.jsxs(s.Fragment,{children:["  Signed ",de(new Date(e.signed_at),"MMM d, yyyy")]})]})]})]})}const _de=`EMPLOYMENT CONTRACT

This Employment Agreement ("Agreement") is entered into between Social Plus Support Work ("Employer") and the Employee named below.

TERMS OF EMPLOYMENT:

1. POSITION AND DUTIES
   The Employee agrees to perform the duties and responsibilities associated with the position stated above, and such other duties as may be reasonably assigned.

2. COMPENSATION
   The Employee will be compensated at the rate specified above, paid in accordance with the Employer's standard payroll practices.

3. WORKING HOURS
   Working hours will be determined based on client needs and roster schedules. The Employee agrees to maintain availability as reasonably required.

4. CONFIDENTIALITY
   The Employee agrees to maintain strict confidentiality of all client information, business operations, and proprietary information.

5. COMPLIANCE
   The Employee agrees to maintain all required certifications and clearances, including NDIS Worker Screening Check.

6. TERMINATION
   Either party may terminate this agreement with appropriate notice as required by the relevant Award or legislation.

By signing this agreement, both parties acknowledge and agree to the terms outlined above.`,UT={title:"",employee_name:"",employee_email:"",position:"",department:"",start_date:"",pay_rate:"",employment_type:"casual",content:_de};function Nde({open:e,onOpenChange:t,onCreate:r}){const[n,a]=y.useState(!1),[i,o]=y.useState(UT),[l,c]=y.useState({}),u=()=>{const h=ale.safeParse(i);if(!h.success){const m={};return h.error.errors.forEach(g=>{const p=g.path[0];m[p]||(m[p]=g.message)}),c(m),!1}return c({}),!0},d=async h=>{var m,g;if(!u()){J({title:"Validation Error",description:"Please fix the errors in the form",variant:"destructive"});return}a(!0);try{await r({title:((m=i.title)==null?void 0:m.trim())||`Employment Contract - ${i.employee_name.trim()}`,content:i.content.trim(),employee_name:i.employee_name.trim(),employee_email:i.employee_email.trim(),position:i.position.trim(),department:((g=i.department)==null?void 0:g.trim())||void 0,start_date:i.start_date||void 0,pay_rate:i.pay_rate?parseFloat(i.pay_rate):void 0,employment_type:i.employment_type}),t(!1),o(UT),c({})}catch(p){console.error("Failed to create contract:",p)}finally{a(!1)}},f=(h,m)=>{o({...i,[h]:m}),l[h]&&c({...l,[h]:void 0})};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Pt,{children:[s.jsxs(At,{className:"flex items-center gap-2",children:[s.jsx(cG,{className:"h-5 w-5 text-primary"}),"Create Employment Contract"]}),s.jsx(Ot,{children:"Create a new employment contract for signing"})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Employee Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"employee_name",children:"Employee Name *"}),s.jsx(ne,{id:"employee_name",value:i.employee_name,onChange:h=>f("employee_name",h.target.value),placeholder:"John Smith",className:l.employee_name?"border-destructive":"",maxLength:100}),l.employee_name&&s.jsx("p",{className:"text-xs text-destructive",children:l.employee_name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"employee_email",children:"Employee Email *"}),s.jsx(ne,{id:"employee_email",type:"email",value:i.employee_email,onChange:h=>f("employee_email",h.target.value),placeholder:"john@example.com",className:l.employee_email?"border-destructive":"",maxLength:255}),l.employee_email&&s.jsx("p",{className:"text-xs text-destructive",children:l.employee_email})]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Position Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"position",children:"Position Title *"}),s.jsx(ne,{id:"position",value:i.position,onChange:h=>f("position",h.target.value),placeholder:"Support Worker",className:l.position?"border-destructive":"",maxLength:100}),l.position&&s.jsx("p",{className:"text-xs text-destructive",children:l.position})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"department",children:"Department"}),s.jsx(ne,{id:"department",value:i.department||"",onChange:h=>f("department",h.target.value),placeholder:"Disability Services",className:l.department?"border-destructive":"",maxLength:100}),l.department&&s.jsx("p",{className:"text-xs text-destructive",children:l.department})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"employment_type",children:"Employment Type"}),s.jsxs(Ie,{value:i.employment_type,onValueChange:h=>f("employment_type",h),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"casual",children:"Casual"}),s.jsx(Y,{value:"part_time",children:"Part-Time"}),s.jsx(Y,{value:"full_time",children:"Full-Time"}),s.jsx(Y,{value:"contractor",children:"Contractor"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"pay_rate",children:"Pay Rate ($/hr)"}),s.jsx(ne,{id:"pay_rate",type:"text",inputMode:"decimal",value:i.pay_rate||"",onChange:h=>f("pay_rate",h.target.value),placeholder:"40.00",className:l.pay_rate?"border-destructive":""}),l.pay_rate&&s.jsx("p",{className:"text-xs text-destructive",children:l.pay_rate})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"start_date",children:"Start Date"}),s.jsx(ne,{id:"start_date",type:"date",value:i.start_date||"",onChange:h=>f("start_date",h.target.value),className:l.start_date?"border-destructive":""}),l.start_date&&s.jsx("p",{className:"text-xs text-destructive",children:l.start_date})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"title",children:"Contract Title"}),s.jsx(ne,{id:"title",value:i.title||"",onChange:h=>f("title",h.target.value),placeholder:"Auto-generated if empty",className:l.title?"border-destructive":"",maxLength:200}),l.title&&s.jsx("p",{className:"text-xs text-destructive",children:l.title})]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"content",children:"Contract Content *"}),s.jsx(wt,{id:"content",value:i.content,onChange:h=>f("content",h.target.value),className:`min-h-[200px] font-mono text-xs ${l.content?"border-destructive":""}`,maxLength:5e4}),l.content&&s.jsx("p",{className:"text-xs text-destructive",children:l.content}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.content.length.toLocaleString()," / 50,000 characters"]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(I,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{variant:"outline",onClick:()=>d(),disabled:n,children:"Save as Draft"}),s.jsxs(I,{className:"flex-1 gradient-primary",onClick:()=>d(),disabled:n,children:[s.jsx(wo,{className:"h-4 w-4 mr-2"}),"Create & Send for Signature"]})]})]})]})})}const Sde=uh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ll=y.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:ae(Sde({variant:t}),e),...r}));Ll.displayName="Alert";const Qm=y.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:ae("mb-1 font-medium leading-none tracking-tight",e),...t}));Qm.displayName="AlertTitle";const Fl=y.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ae("text-sm [&_p]:leading-relaxed",e),...t}));Fl.displayName="AlertDescription";function Cde({onSignatureChange:e,signerName:t}){const r=y.useRef(null),[n,a]=y.useState(!1),[i,o]=y.useState(""),[l,c]=y.useState("draw");y.useEffect(()=>{const p=r.current;if(!p)return;const v=p.getContext("2d");if(!v)return;const x=p.getBoundingClientRect();p.width=x.width*2,p.height=x.height*2,v.scale(2,2),v.strokeStyle="hsl(var(--foreground))",v.lineWidth=2,v.lineCap="round",v.lineJoin="round",v.fillStyle="hsl(var(--background))",v.fillRect(0,0,x.width,x.height)},[]);const u=p=>{const v=r.current;if(!v)return{x:0,y:0};const x=v.getBoundingClientRect();return"touches"in p?{x:p.touches[0].clientX-x.left,y:p.touches[0].clientY-x.top}:{x:p.clientX-x.left,y:p.clientY-x.top}},d=p=>{p.preventDefault();const v=r.current,x=v==null?void 0:v.getContext("2d");if(!x)return;a(!0);const{x:b,y:w}=u(p);x.beginPath(),x.moveTo(b,w)},f=p=>{if(p.preventDefault(),!n)return;const v=r.current,x=v==null?void 0:v.getContext("2d");if(!x)return;const{x:b,y:w}=u(p);x.lineTo(b,w),x.stroke()},h=()=>{if(!n)return;a(!1);const p=r.current;if(p){const v=p.toDataURL("image/png");e(v,"drawn")}},m=()=>{const p=r.current,v=p==null?void 0:p.getContext("2d");if(!v||!p)return;const x=p.getBoundingClientRect();v.fillStyle="hsl(var(--background))",v.fillRect(0,0,x.width,x.height),e("","drawn")},g=p=>{if(o(p),p){const v=document.createElement("canvas");v.width=400,v.height=100;const x=v.getContext("2d");x&&(x.fillStyle="hsl(var(--background))",x.fillRect(0,0,400,100),x.font='italic 32px "Brush Script MT", cursive, serif',x.fillStyle="hsl(var(--foreground))",x.textAlign="center",x.textBaseline="middle",x.fillText(p,200,50),e(v.toDataURL("image/png"),"typed"))}else e("","typed")};return s.jsx("div",{className:"space-y-4",children:s.jsxs(bn,{value:l,onValueChange:p=>c(p),children:[s.jsxs(fn,{className:"grid w-full grid-cols-2",children:[s.jsxs(Ve,{value:"draw",className:"flex items-center gap-2",children:[s.jsx(rl,{className:"h-4 w-4"}),"Draw Signature"]}),s.jsx(Ve,{value:"type",children:"Type Signature"})]}),s.jsxs(rt,{value:"draw",className:"space-y-3",children:[s.jsxs("div",{className:"relative border border-border rounded-lg overflow-hidden bg-background",children:[s.jsx("canvas",{ref:r,className:"w-full h-32 cursor-crosshair touch-none",onMouseDown:d,onMouseMove:f,onMouseUp:h,onMouseLeave:h,onTouchStart:d,onTouchMove:f,onTouchEnd:h}),s.jsx("div",{className:"absolute bottom-2 left-2 right-2 border-t border-dashed border-muted-foreground/30"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign above the line using your mouse or finger"}),s.jsxs(I,{variant:"outline",size:"sm",onClick:m,children:[s.jsx(oG,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]}),s.jsxs(rt,{value:"type",className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"typed-signature",children:"Type your full legal name"}),s.jsx(ne,{id:"typed-signature",value:i,onChange:p=>g(p.target.value),placeholder:t,className:"text-xl italic",style:{fontFamily:'"Brush Script MT", cursive, serif'}})]}),i&&s.jsxs("div",{className:"p-4 border border-border rounded-lg bg-background",children:[s.jsx("p",{className:"text-3xl italic text-center",style:{fontFamily:'"Brush Script MT", cursive, serif'},children:i}),s.jsx("div",{className:"mt-2 border-t border-dashed border-muted-foreground/30"})]})]})]})})}function Ede({contract:e,open:t,onOpenChange:r,onSign:n}){const[a,i]=y.useState(""),[o,l]=y.useState("drawn"),[c,u]=y.useState(!1),[d,f]=y.useState(!1);if(!e)return null;const h=(p,v)=>{i(p),l(v)},m=async()=>{if(!(!a||!c)){f(!0);try{await n(e.id,a,o),r(!1),i(""),u(!1)}catch(p){console.error("Failed to sign contract:",p)}finally{f(!1)}}},g=a&&c&&!d;return s.jsx(Rt,{open:t,onOpenChange:r,children:s.jsxs(kt,{className:"sm:max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs(Pt,{children:[s.jsxs(At,{className:"flex items-center gap-2",children:[s.jsx(fh,{className:"h-5 w-5 text-primary"}),"Sign Employment Contract"]}),s.jsxs(Ot,{children:["Review and sign your employment contract with ",e.title]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col gap-4",children:[s.jsxs("div",{className:"flex-1 min-h-0",children:[s.jsx(H,{className:"text-sm font-medium mb-2 block",children:"Contract Document"}),s.jsx(qu,{className:"h-64 border border-border rounded-lg bg-muted/30",children:s.jsxs("div",{className:"p-4 space-y-4 text-sm",children:[s.jsxs("div",{className:"text-center border-b border-border pb-4",children:[s.jsx("h2",{className:"text-lg font-bold",children:"Employment Contract"}),s.jsx("p",{className:"text-muted-foreground",children:e.title})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Employee:"})," ",e.employee_name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Position:"})," ",e.position]}),e.department&&s.jsxs("p",{children:[s.jsx("strong",{children:"Department:"})," ",e.department]}),e.employment_type&&s.jsxs("p",{children:[s.jsx("strong",{children:"Employment Type:"})," ",e.employment_type]}),e.start_date&&s.jsxs("p",{children:[s.jsx("strong",{children:"Start Date:"})," ",de(new Date(e.start_date),"MMMM d, yyyy")]}),e.pay_rate&&s.jsxs("p",{children:[s.jsx("strong",{children:"Pay Rate:"})," $",e.pay_rate.toFixed(2),"/hr"]})]}),s.jsx(Et,{}),s.jsx("div",{className:"whitespace-pre-wrap",children:e.content})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(H,{className:"text-sm font-medium",children:"Your Signature"}),s.jsx(Cde,{onSignatureChange:h,signerName:e.employee_name})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx(Ti,{id:"agree-terms",checked:c,onCheckedChange:p=>u(p===!0)}),s.jsxs("div",{className:"grid gap-1.5 leading-none",children:[s.jsx(H,{htmlFor:"agree-terms",className:"text-sm font-medium leading-relaxed cursor-pointer",children:"I agree to the terms and conditions"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"By signing this document, I acknowledge that I have read and understood the terms of this employment contract and agree to be bound by them."})]})]}),s.jsxs(Ll,{children:[s.jsx(ln,{className:"h-4 w-4"}),s.jsx(Fl,{className:"text-xs",children:"Your signature will be securely recorded along with timestamp, IP address, and browser information for audit purposes."})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[s.jsx(I,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"}),s.jsx(I,{className:"flex-1 gradient-primary",onClick:m,disabled:!g,children:d?s.jsx(s.Fragment,{children:"Signing..."}):s.jsxs(s.Fragment,{children:[s.jsx(dh,{className:"h-4 w-4 mr-2"}),"Sign Contract"]})})]})]})})}const kde={created:gt,viewed:$i,sent:wo,signed:Np,approved:jt,rejected:An,voided:An},Pde={created:"text-blue-500 bg-blue-500/10",viewed:"text-gray-500 bg-gray-500/10",sent:"text-purple-500 bg-purple-500/10",signed:"text-green-500 bg-green-500/10",approved:"text-green-500 bg-green-500/10",rejected:"text-red-500 bg-red-500/10",voided:"text-red-500 bg-red-500/10"};function Ade({auditLogs:e}){return e.length===0?s.jsxs(G,{children:[s.jsx(he,{children:s.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[s.jsx(Xa,{className:"h-4 w-4"}),"Audit Trail"]})}),s.jsx(X,{children:s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No audit entries yet"})})]}):s.jsxs(G,{children:[s.jsx(he,{children:s.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[s.jsx(Xa,{className:"h-4 w-4"}),"Audit Trail"]})}),s.jsx(X,{children:s.jsx(qu,{className:"h-64",children:s.jsx("div",{className:"space-y-4",children:e.map((t,r)=>{const n=kde[t.action]||gt,a=Pde[t.action]||"text-gray-500 bg-gray-500/10";return s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:`p-2 rounded-full ${a}`,children:s.jsx(n,{className:"h-3 w-3"})}),r<e.length-1&&s.jsx("div",{className:"w-px h-full bg-border mt-2"})]}),s.jsxs("div",{className:"flex-1 pb-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("p",{className:"text-sm font-medium capitalize",children:t.action}),s.jsx("time",{className:"text-xs text-muted-foreground",children:de(new Date(t.created_at),"MMM d, yyyy h:mm a")})]}),t.actor_name&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",t.actor_name]}),t.actor_email&&!t.actor_name&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",t.actor_email]}),t.ip_address&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["IP: ",t.ip_address]}),t.details&&Object.keys(t.details).length>0&&s.jsx("div",{className:"mt-2 p-2 rounded bg-muted/50 text-xs",children:Object.entries(t.details).map(([i,o])=>s.jsxs("p",{children:[s.jsxs("span",{className:"text-muted-foreground",children:[i,":"]})," ",String(o)]},i))})]})]},t.id)})})})})]})}const Ode={draft:{label:"Draft",variant:"secondary"},pending_signature:{label:"Pending Signature",variant:"default"},signed:{label:"Signed",variant:"outline"},expired:{label:"Expired",variant:"destructive"},voided:{label:"Voided",variant:"destructive"}};function Tde({contract:e,signature:t,auditLogs:r,open:n,onOpenChange:a}){if(!e)return null;const i=Ode[e.status];return s.jsx(Do,{open:n,onOpenChange:a,children:s.jsxs(Li,{className:"w-full sm:max-w-xl overflow-hidden flex flex-col",children:[s.jsx(Fi,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(gt,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Ui,{children:e.title}),s.jsx(Ro,{children:e.position})]}),s.jsx(fe,{variant:i.variant,children:i.label})]})}),s.jsx(qu,{className:"flex-1 -mx-6 px-6",children:s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Contract Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Employee"}),s.jsx("p",{className:"font-medium",children:e.employee_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Email"}),s.jsx("p",{className:"font-medium",children:e.employee_email})]}),e.department&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Department"}),s.jsx("p",{className:"font-medium",children:e.department})]}),e.employment_type&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Employment Type"}),s.jsx("p",{className:"font-medium capitalize",children:e.employment_type.replace("_"," ")})]}),e.start_date&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Start Date"}),s.jsx("p",{className:"font-medium",children:de(new Date(e.start_date),"MMMM d, yyyy")})]}),e.pay_rate&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Pay Rate"}),s.jsxs("p",{className:"font-medium",children:["$",e.pay_rate,"/hr"]})]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Contract Content"}),s.jsx("div",{className:"p-4 rounded-lg bg-muted/30 text-sm whitespace-pre-wrap",children:e.content})]}),t&&s.jsxs(s.Fragment,{children:[s.jsx(Et,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(jt,{className:"h-4 w-4 text-primary"}),"Signature"]}),s.jsx("div",{className:"p-4 rounded-lg border border-border bg-background",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("img",{src:t.signature_data,alt:"Signature",className:"max-h-20 object-contain"})}),s.jsx(Et,{}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Signer"}),s.jsx("p",{className:"font-medium",children:t.signer_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Date Signed"}),s.jsx("p",{className:"font-medium",children:de(new Date(t.signed_at),"MMM d, yyyy h:mm a")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Signature Type"}),s.jsx("p",{className:"font-medium capitalize",children:t.signature_type})]}),t.ip_address&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"IP Address"}),s.jsx("p",{className:"font-medium",children:t.ip_address})]})]})]})})]})]}),s.jsx(Et,{}),s.jsx(Ade,{auditLogs:r}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(xt,{className:"h-3 w-3"}),"Created: ",de(new Date(e.created_at),"MMM d, yyyy h:mm a")]}),e.signed_at&&s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(jt,{className:"h-3 w-3"}),"Signed: ",de(new Date(e.signed_at),"MMM d, yyyy h:mm a")]})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[s.jsxs(I,{variant:"outline",className:"flex-1",children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),e.status==="pending_signature"&&s.jsxs(I,{variant:"outline",className:"flex-1",children:[s.jsx(Hl,{className:"h-4 w-4 mr-2"}),"Resend"]})]})]})})}function Dde(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),a=async()=>{var d;n(!0);try{const{data:f,error:h}=await $.auth.getUser(),m=(d=f.user)==null?void 0:d.id;if(h||!m){t([]);return}const{data:g,error:p}=await $.from("profiles").select("organisation_id").eq("user_id",m).maybeSingle();if(p){console.warn("Contracts fetch skipped: failed to resolve profile organisation_id",p),t([]);return}if(!(g!=null&&g.organisation_id)){t([]);return}const{data:v,error:x}=await $.from("contracts").select("*").order("created_at",{ascending:!1});if(x){console.error("Supabase contracts SELECT error:",x),t([]);return}t(v||[])}catch(f){console.error("Error fetching contracts:",f),t([])}finally{n(!1)}},i=async d=>{try{const{data:f,error:h}=await $.from("contracts").insert({...d,status:"pending_signature"}).select().single();if(h)throw console.error("Supabase contracts INSERT error:",h),J({title:"Create blocked",description:h.message??"Insert failed (RLS/constraint).",variant:"destructive"}),h;return await u(f.id,"created","Contract created and sent for signature"),t(m=>[f,...m]),await a(),J({title:"Contract Created",description:"Contract has been created and sent for signature"}),f}catch(f){throw console.error("Error creating contract:",f),f!=null&&f.message||J({title:"Error",description:"Failed to create contract",variant:"destructive"}),f}},o=async(d,f,h,m,g)=>{try{const{error:p}=await $.from("signatures").insert({contract_id:d,signer_name:m,signer_email:g,signature_data:f,signature_type:h,user_agent:navigator.userAgent});if(p)throw p;const{error:v}=await $.from("contracts").update({status:"signed",signed_at:new Date().toISOString()}).eq("id",d);if(v)throw console.error("Supabase contracts UPDATE error:",v),v;await u(d,"signed","Contract signed by employee",{signer_name:m,signature_type:h}),await a(),J({title:"Contract Signed",description:"The contract has been successfully signed"})}catch(p){throw console.error("Error signing contract:",p),J({title:"Error",description:"Failed to sign contract",variant:"destructive"}),p}},l=async d=>{try{const{data:f,error:h}=await $.from("signatures").select("*").eq("contract_id",d).single();if(h&&h.code!=="PGRST116")throw h;return f}catch(f){return console.error("Error fetching signature:",f),null}},c=async d=>{try{const{data:f,error:h}=await $.from("contract_audit_log").select("*").eq("contract_id",d).order("created_at",{ascending:!1});if(h)throw h;return f||[]}catch(f){return console.error("Error fetching audit logs:",f),[]}},u=async(d,f,h,m)=>{var g,p,v;try{const{data:x}=await $.auth.getUser(),b=m||(h?{description:h}:null);await $.from("contract_audit_log").insert([{contract_id:d,action:f,actor_email:(g=x.user)==null?void 0:g.email,actor_name:(v=(p=x.user)==null?void 0:p.user_metadata)==null?void 0:v.full_name,details:b,user_agent:navigator.userAgent}])}catch(x){console.error("Error logging audit event:",x)}};return y.useEffect(()=>{a()},[]),{contracts:e,isLoading:r,createContract:i,signContract:o,getSignature:l,getAuditLogs:c,logAuditEvent:u,refetch:a}}function Rde(){const{contracts:e,isLoading:t,createContract:r,signContract:n,getSignature:a,getAuditLogs:i,logAuditEvent:o}=Dde(),l=e??[],{isAdmin:c,isManager:u}=_h(),d=!!(c||u),[f,h]=y.useState(""),[m,g]=y.useState("all"),[p,v]=y.useState(!1),[x,b]=y.useState(!1),[w,_]=y.useState(!1),[j,N]=y.useState(null),[S,E]=y.useState(null),[C,P]=y.useState([]),[A,k]=y.useState(null);y.useEffect(()=>{let W=!0;return(async()=>{try{const{data:K,error:V}=await $.auth.getUser();if(V||!K.user){console.warn("Unable to resolve auth user for organisation check",V),W&&k(!1);return}const{data:le,error:be}=await $.from("profiles").select("organisation_id").eq("user_id",K.user.id).maybeSingle();if(!W)return;if(be){console.warn("Failed to load profile for organisation check",be),k(!1);return}k(!!(le!=null&&le.organisation_id))}catch(K){console.warn("Unexpected error during organisation check",K),W&&k(!1)}})(),()=>{W=!1}},[]);const D=l.length,R=l.filter(W=>W.status==="pending_signature").length,U=l.filter(W=>W.status==="signed").length,B=l.filter(W=>W.status==="expired").length,L=l.filter(W=>{const K=f.toLowerCase(),V=(W.employee_name||"").toLowerCase().includes(K)||(W.position||"").toLowerCase().includes(K)||(W.title||"").toLowerCase().includes(K),le=m==="all"||W.status===m;return V&&le}),M=async W=>{N(W);try{const[K,V]=await Promise.all([a(W.id),i(W.id)]);E(K),P(V);try{await o(W.id,"viewed")}catch{}_(!0)}catch(K){console.error("Failed to load contract details:",K),J({title:"Error",description:"Failed to load contract details. Please try again.",variant:"destructive"})}},T=W=>{N(W),b(!0)},F=async(W,K,V)=>{if(j)try{await n(W,K,V,j.employee_name,j.employee_email)}catch(le){console.error("Failed to sign contract:",le),J({title:"Error",description:"Failed to sign contract. Please try again.",variant:"destructive"})}},Z=async W=>{if(!d){J({title:"Access restricted",description:vs("contracts"),variant:"destructive"});return}try{await r(W),J({title:"Contract created",description:"The contract was created successfully."}),v(!1)}catch(K){console.error("Failed to create contract:",K),J({title:"Create blocked",description:TU(K)?vs("contracts"):"Failed to create contract. Please try again.",variant:"destructive"})}};return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Contracts & E-Signatures"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Create, send, and manage employment contracts with digital signatures"})]}),d&&s.jsxs(I,{className:"gradient-primary",onClick:()=>v(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create Contract"]})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Ut,{title:"Total Contracts",value:D,description:"All contracts",icon:gt,variant:"default"}),s.jsx(Ut,{title:"Pending Signature",value:R,description:"Awaiting signature",icon:xt,variant:"warning"}),s.jsx(Ut,{title:"Signed",value:U,description:"Completed",icon:jt,variant:"success"}),s.jsx(Ut,{title:"Expired",value:B,description:"Need attention",icon:hu,variant:"danger"})]}),s.jsx(G,{children:s.jsx(X,{className:"pt-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(un,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{type:"search",placeholder:"Search contracts...",value:f,onChange:W=>h(W.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:m,onValueChange:g,children:[s.jsx(Re,{className:"w-full sm:w-48",children:s.jsx(Fe,{placeholder:"Filter by status"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"all",children:"All Status"}),s.jsx(Y,{value:"draft",children:"Draft"}),s.jsx(Y,{value:"pending_signature",children:"Pending Signature"}),s.jsx(Y,{value:"signed",children:"Signed"}),s.jsx(Y,{value:"expired",children:"Expired"}),s.jsx(Y,{value:"voided",children:"Voided"})]})]})]})})}),(t||A===null)&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(W=>s.jsx(G,{className:"animate-pulse",children:s.jsx(X,{className:"pt-6 h-48"})},W))}),!t&&A===!1&&s.jsx(G,{children:s.jsxs(X,{className:"py-12 text-center",children:[s.jsx(hu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"No organisation assigned"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"You must be assigned to an organisation before viewing contracts."})]})}),A===!0&&(L.length===0?s.jsx(G,{children:s.jsxs(X,{className:"py-12 text-center",children:[s.jsx(fh,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"No contracts found"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:f||m!=="all"?"Try adjusting your search or filters":"Create your first employment contract"}),!f&&m==="all"&&d&&s.jsxs(I,{onClick:()=>v(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create Contract"]})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L.map(W=>s.jsx(jde,{contract:W,onView:M,onSign:T},W.id))})),s.jsx(Nde,{open:p,onOpenChange:v,onCreate:Z}),s.jsx(Ede,{contract:j,open:x,onOpenChange:b,onSign:F}),s.jsx(Tde,{contract:j,signature:S,auditLogs:C,open:w,onOpenChange:_})]})}function J0(){const{toast:e}=lr(),t=ai(),{data:r=[],isLoading:n,refetch:a}=sr({queryKey:["org-documents"],queryFn:async()=>{const{data:f,error:h}=await $.from("org_documents").select("*").order("created_at",{ascending:!1});if(h)throw h;return f||[]}}),i=Ht({mutationFn:async({file:f,metadata:h})=>{var N,S;const{data:m}=await $.auth.getUser(),g=(N=m==null?void 0:m.user)==null?void 0:N.id,p=(S=m==null?void 0:m.user)==null?void 0:S.email,v=f.name.split(".").pop(),x=`${crypto.randomUUID()}.${v}`,{error:b}=await $.storage.from("org-documents").upload(x,f);if(b)throw b;const{data:w}=$.storage.from("org-documents").getPublicUrl(x),{data:_,error:j}=await $.from("org_documents").insert({...h,file_url:w.publicUrl,file_name:f.name,file_size:f.size,mime_type:f.type,uploaded_by:g,uploaded_by_name:p}).select().single();if(j)throw j;return _},onSuccess:()=>{t.invalidateQueries({queryKey:["org-documents"]}),e({title:"Success",description:"Document uploaded successfully"})},onError:f=>{console.error("Error uploading document:",f),e({title:"Error",description:f.message||"Failed to upload document",variant:"destructive"})}}),o=Ht({mutationFn:async({id:f,updates:h})=>{const{data:m,error:g}=await $.from("org_documents").update(h).eq("id",f).select().single();if(g)throw g;return m},onSuccess:()=>{t.invalidateQueries({queryKey:["org-documents"]}),e({title:"Success",description:"Document updated successfully"})},onError:()=>{e({title:"Error",description:"Failed to update document",variant:"destructive"})}}),l=Ht({mutationFn:async f=>{const{error:h}=await $.from("org_documents").delete().eq("id",f);if(h)throw h},onSuccess:()=>{t.invalidateQueries({queryKey:["org-documents"]}),e({title:"Success",description:"Document deleted successfully"})},onError:()=>{e({title:"Error",description:"Failed to delete document",variant:"destructive"})}}),c=y.useCallback(async(f,h)=>i.mutateAsync({file:f,metadata:h}),[i]),u=y.useCallback(async(f,h)=>o.mutateAsync({id:f,updates:h}),[o]),d=y.useCallback(async f=>l.mutateAsync(f),[l]);return{documents:r,loading:n,refetch:a,uploadDocument:c,updateDocument:u,deleteDocument:d}}function ew(e){const[t,r]=y.useState([]),[n,a]=y.useState(!0),{toast:i}=lr(),o=y.useCallback(async()=>{try{a(!0);let u=$.from("document_distributions").select("*").order("created_at",{ascending:!1});e&&(u=u.eq("org_document_id",e));const{data:d,error:f}=await u;if(f)throw f;r(d||[])}catch(u){console.error("Error fetching distributions:",u),i({title:"Error",description:"Failed to load distributions",variant:"destructive"})}finally{a(!1)}},[e,i]);return y.useEffect(()=>{o()},[o]),{distributions:t,loading:n,refetch:o,createDistribution:async u=>{var d,f;try{const{data:h}=await $.auth.getUser(),{data:m,error:g}=await $.from("document_distributions").insert({...u,sent_by:(d=h==null?void 0:h.user)==null?void 0:d.id,sent_by_name:(f=h==null?void 0:h.user)==null?void 0:f.email,sent_at:new Date().toISOString(),status:"sent"}).select().single();if(g)throw g;return r(p=>[m,...p]),i({title:"Success",description:"Document distributed successfully"}),m}catch(h){throw console.error("Error creating distribution:",h),i({title:"Error",description:h.message||"Failed to distribute document",variant:"destructive"}),h}},updateDistribution:async(u,d)=>{try{const{data:f,error:h}=await $.from("document_distributions").update(d).eq("id",u).select().single();if(h)throw h;return r(m=>m.map(g=>g.id===u?f:g)),f}catch(f){throw console.error("Error updating distribution:",f),i({title:"Error",description:"Failed to update distribution",variant:"destructive"}),f}}}}const Mde={contract_template:"Contract Template",handbook:"Handbook",policy:"Policy",procedure:"Procedure",training:"Training",other:"Other"};function $de({open:e,onOpenChange:t,document:r}){const{distributions:n}=ew(r.id),a=o=>o?o<1024?`${o} B`:o<1024*1024?`${(o/1024).toFixed(1)} KB`:`${(o/(1024*1024)).toFixed(1)} MB`:"Unknown",i={pending:n.filter(o=>o.status==="pending"||o.status==="sent").length,viewed:n.filter(o=>o.status==="viewed"||o.status==="downloaded").length,completed:n.filter(o=>o.status==="acknowledged"||o.status==="signed").length};return s.jsx(Do,{open:e,onOpenChange:t,children:s.jsxs(Li,{className:"sm:max-w-[480px] overflow-y-auto",children:[s.jsxs(Fi,{children:[s.jsxs(Ui,{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-5 w-5 text-primary"}),"Document Details"]}),s.jsx(Ro,{children:"View document information and distribution status"})]}),s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.description})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(fe,{variant:"secondary",children:Mde[r.category]}),r.requires_acknowledgment&&s.jsxs(fe,{variant:"outline",className:"gap-1",children:[s.jsx(Ei,{className:"h-3 w-3"}),"Requires Acknowledgment"]}),r.requires_signature&&s.jsxs(fe,{variant:"outline",className:"gap-1",children:[s.jsx(fh,{className:"h-3 w-3"}),"Requires Signature"]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"File Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"File Name"}),s.jsx("p",{className:"font-medium truncate",children:r.file_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Size"}),s.jsx("p",{className:"font-medium",children:a(r.file_size)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Version"}),s.jsxs("p",{className:"font-medium",children:["v",r.version||1]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Type"}),s.jsx("p",{className:"font-medium",children:r.mime_type||"Unknown"})]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Metadata"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Uploaded:"}),s.jsx("span",{children:de(new Date(r.created_at),"dd MMM yyyy HH:mm")})]}),r.uploaded_by_name&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"By:"}),s.jsx("span",{children:r.uploaded_by_name})]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Distribution Summary"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-warning/10 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-warning",children:i.pending}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-info/10 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-info",children:i.viewed}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Viewed"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-success/10 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-success",children:i.completed}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"})]})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(I,{variant:"outline",className:"flex-1 gap-2",onClick:()=>window.open(r.file_url,"_blank"),children:[s.jsx(pF,{className:"h-4 w-4"}),"View"]}),s.jsxs(I,{className:"flex-1 gap-2",onClick:()=>window.open(r.file_url,"_blank"),children:[s.jsx(Es,{className:"h-4 w-4"}),"Download"]})]})]})]})})}function Ide({open:e,onOpenChange:t,document:r}){const[n,a]=y.useState([]),[i,o]=y.useState(new Set),[l,c]=y.useState(""),[u,d]=y.useState(!0),[f,h]=y.useState(!1),{createDistribution:m,distributions:g,refetch:p}=ew(r.id),{toast:v}=lr(),x=new Set(g.map(S=>S.recipient_user_id));y.useEffect(()=>{e&&(b(),o(new Set))},[e]);const b=async()=>{try{d(!0);const{data:S,error:E}=await $.from("profiles").select("user_id, display_name");if(E)throw E;const{data:C,error:P}=await $.from("user_roles").select("user_id, role");if(P)throw P;const A=new Map(C==null?void 0:C.map(D=>[D.user_id,D.role])),k=(S||[]).map(D=>({id:D.user_id,email:D.display_name||"Unknown",display_name:D.display_name,role:A.get(D.user_id)||"employee"}));a(k)}catch(S){console.error("Error fetching users:",S),v({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{d(!1)}},w=n.filter(S=>{var E;return!x.has(S.id)&&(((E=S.display_name)==null?void 0:E.toLowerCase().includes(l.toLowerCase()))||S.email.toLowerCase().includes(l.toLowerCase()))}),_=S=>{const E=new Set(i);E.has(S)?E.delete(S):E.add(S),o(E)},j=()=>{i.size===w.length?o(new Set):o(new Set(w.map(S=>S.id)))},N=async()=>{if(i.size!==0){h(!0);try{const S=n.filter(E=>i.has(E.id));for(const E of S)await m({org_document_id:r.id,recipient_user_id:E.id,recipient_name:E.display_name||E.email,recipient_email:E.email});v({title:"Success",description:`Document distributed to ${S.length} recipient(s)`}),t(!1),p()}catch(S){console.error("Error distributing document:",S)}finally{h(!1)}}};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Pt,{children:[s.jsxs(At,{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-5 w-5 text-primary"}),"Distribute Document"]}),s.jsxs(Ot,{children:['Select employees to receive "',r.title,'"']})]}),s.jsxs("div",{className:"space-y-4",children:[(r.requires_acknowledgment||r.requires_signature)&&s.jsxs("div",{className:"flex gap-2 text-sm",children:[r.requires_acknowledgment&&s.jsx(fe,{variant:"outline",children:"Requires Acknowledgment"}),r.requires_signature&&s.jsx(fe,{variant:"outline",children:"Requires Signature"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(un,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{placeholder:"Search employees...",value:l,onChange:S=>c(S.target.value),className:"pl-10"})]}),w.length>0&&s.jsxs("div",{className:"flex items-center justify-between px-1",children:[s.jsx("button",{type:"button",onClick:j,className:"text-sm text-primary hover:underline",children:i.size===w.length?"Deselect All":"Select All"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[i.size," selected"]})]}),u?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(We,{className:"h-6 w-6 animate-spin text-primary"})}):w.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ar,{className:"h-10 w-10 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No employees available"}),s.jsx("p",{className:"text-sm",children:"All users have already received this document"})]}):s.jsx(qu,{className:"h-[280px] border rounded-lg",children:s.jsx("div",{className:"p-2 space-y-1",children:w.map(S=>s.jsxs("div",{onClick:()=>_(S.id),className:`flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-colors ${i.has(S.id)?"bg-primary/10 border border-primary/20":"hover:bg-muted"}`,children:[s.jsx(Ti,{checked:i.has(S.id),onCheckedChange:()=>_(S.id)}),s.jsx(Or,{className:"h-8 w-8",children:s.jsx(Tr,{className:"text-xs",children:(S.display_name||S.email).split(" ").map(E=>E[0]).join("").slice(0,2)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:S.display_name||S.email}),s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:S.role})]})]},S.id))})})]}),s.jsxs(ar,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{onClick:N,disabled:f||i.size===0,children:[f&&s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Distribute to ",i.size," ",i.size===1?"User":"Users"]})]})]})})}const BT={contract_template:"Contract Template",handbook:"Handbook",policy:"Policy",procedure:"Procedure",training:"Training",other:"Other"},Lde={contract_template:"bg-blue-100 text-blue-800",handbook:"bg-purple-100 text-purple-800",policy:"bg-amber-100 text-amber-800",procedure:"bg-green-100 text-green-800",training:"bg-teal-100 text-teal-800",other:"bg-gray-100 text-gray-800"};function Fde({searchQuery:e}){const{documents:t,loading:r,deleteDocument:n}=J0(),[a,i]=y.useState(null),[o,l]=y.useState(!1),[c,u]=y.useState(!1),d=t.filter(v=>{var x,b;return v.title.toLowerCase().includes(e.toLowerCase())||((x=v.description)==null?void 0:x.toLowerCase().includes(e.toLowerCase()))||((b=BT[v.category])==null?void 0:b.toLowerCase().includes(e.toLowerCase()))}),f=v=>{i(v),l(!0)},h=v=>{i(v),u(!0)},m=v=>{window.open(v.file_url,"_blank")},g=async v=>{confirm("Are you sure you want to delete this document?")&&await n(v.id)},p=v=>v?v<1024?`${v} B`:v<1024*1024?`${(v/1024).toFixed(1)} KB`:`${(v/(1024*1024)).toFixed(1)} MB`:"Unknown";return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(s.Fragment,{children:[s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-lg",children:"All Documents"}),s.jsx(Le,{children:"Organizational documents, policies, and templates"})]}),s.jsx(X,{children:d.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(gt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No documents found"}),s.jsx("p",{className:"text-sm mt-1",children:"Upload a document to get started"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Document"}),s.jsx(oe,{children:"Category"}),s.jsx(oe,{children:"Requirements"}),s.jsx(oe,{children:"Size"}),s.jsx(oe,{children:"Uploaded"}),s.jsx(oe,{className:"text-right",children:"Actions"})]})}),s.jsx(pr,{children:d.map(v=>s.jsxs(ze,{children:[s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg bg-muted flex items-center justify-center",children:s.jsx(gt,{className:"h-5 w-5 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:v.title}),v.description&&s.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:v.description})]})]})}),s.jsx(te,{children:s.jsx(fe,{variant:"secondary",className:Lde[v.category],children:BT[v.category]})}),s.jsx(te,{children:s.jsxs("div",{className:"flex gap-1",children:[v.requires_acknowledgment&&s.jsxs(fe,{variant:"outline",className:"text-xs gap-1",children:[s.jsx(Ei,{className:"h-3 w-3"}),"Ack"]}),v.requires_signature&&s.jsxs(fe,{variant:"outline",className:"text-xs gap-1",children:[s.jsx(fh,{className:"h-3 w-3"}),"Sign"]}),!v.requires_acknowledgment&&!v.requires_signature&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"None"})]})}),s.jsx(te,{className:"text-sm text-muted-foreground",children:p(v.file_size)}),s.jsx(te,{className:"text-sm text-muted-foreground",children:de(new Date(v.created_at),"dd MMM yyyy")}),s.jsx(te,{className:"text-right",children:s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:s.jsx(si,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",className:"bg-popover",children:[s.jsxs(tt,{onClick:()=>f(v),children:[s.jsx($i,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.jsxs(tt,{onClick:()=>m(v),children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Download"]}),s.jsxs(tt,{onClick:()=>h(v),children:[s.jsx(wo,{className:"h-4 w-4 mr-2"}),"Distribute"]}),s.jsx(ca,{}),s.jsxs(tt,{onClick:()=>g(v),className:"text-destructive",children:[s.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},v.id))})]})})]}),a&&s.jsxs(s.Fragment,{children:[s.jsx($de,{open:o,onOpenChange:l,document:a}),s.jsx(Ide,{open:c,onOpenChange:u,document:a})]})]})}const Ude={pending:{label:"Pending",icon:xt,className:"bg-gray-100 text-gray-800"},sent:{label:"Sent",icon:gt,className:"bg-blue-100 text-blue-800"},viewed:{label:"Viewed",icon:$i,className:"bg-purple-100 text-purple-800"},downloaded:{label:"Downloaded",icon:Es,className:"bg-teal-100 text-teal-800"},acknowledged:{label:"Acknowledged",icon:dh,className:"bg-green-100 text-green-800"},signed:{label:"Signed",icon:fh,className:"bg-emerald-100 text-emerald-800"}};function Bde({searchQuery:e}){const{distributions:t,loading:r}=ew(),{documents:n}=J0(),a=new Map(n.map(o=>[o.id,o])),i=t.filter(o=>{const l=a.get(o.org_document_id);return o.recipient_name.toLowerCase().includes(e.toLowerCase())||o.recipient_email.toLowerCase().includes(e.toLowerCase())||(l==null?void 0:l.title.toLowerCase().includes(e.toLowerCase()))});return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-lg",children:"Document Distributions"}),s.jsx(Le,{children:"Track document distribution status and employee acknowledgments"})]}),s.jsx(X,{children:i.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(gt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No distributions found"}),s.jsx("p",{className:"text-sm mt-1",children:"Distribute a document to employees to track here"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Recipient"}),s.jsx(oe,{children:"Document"}),s.jsx(oe,{children:"Status"}),s.jsx(oe,{children:"Sent"}),s.jsx(oe,{children:"Last Action"})]})}),s.jsx(pr,{children:i.map(o=>{const l=a.get(o.org_document_id),c=Ude[o.status],u=c.icon,d=o.signed_at||o.acknowledged_at||o.downloaded_at||o.viewed_at||o.sent_at;return s.jsxs(ze,{children:[s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Or,{className:"h-8 w-8",children:s.jsx(Tr,{className:"text-xs",children:o.recipient_name.split(" ").map(f=>f[0]).join("")})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:o.recipient_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:o.recipient_email})]})]})}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:(l==null?void 0:l.title)||"Unknown Document"})]})}),s.jsx(te,{children:s.jsxs(fe,{variant:"secondary",className:`gap-1 ${c.className}`,children:[s.jsx(u,{className:"h-3 w-3"}),c.label]})}),s.jsx(te,{className:"text-sm text-muted-foreground",children:o.sent_at?de(new Date(o.sent_at),"dd MMM yyyy"):"-"}),s.jsx(te,{className:"text-sm text-muted-foreground",children:d?de(new Date(d),"dd MMM yyyy HH:mm"):"-"})]},o.id)})})]})})]})}const zde=ks({title:Je().min(1,"Title is required").max(200),description:Je().max(500).optional(),category:Vu(["contract_template","handbook","policy","procedure","training","other"]),requires_acknowledgment:Lx().default(!1),requires_signature:Lx().default(!1)}),Vde=[{value:"contract_template",label:"Contract Template"},{value:"handbook",label:"Handbook"},{value:"policy",label:"Policy"},{value:"procedure",label:"Procedure"},{value:"training",label:"Training Material"},{value:"other",label:"Other"}];function qde({open:e,onOpenChange:t}){const[r,n]=y.useState(!1),[a,i]=y.useState(null),o=y.useRef(null),{uploadDocument:l}=J0(),c=as({resolver:Oi(zde),defaultValues:{title:"",description:"",category:"other",requires_acknowledgment:!1,requires_signature:!1}}),u=m=>{var p;const g=(p=m.target.files)==null?void 0:p[0];if(g&&(i(g),!c.getValues("title"))){const v=g.name.replace(/\.[^/.]+$/,"");c.setValue("title",v)}},d=()=>{i(null),o.current&&(o.current.value="")},f=async m=>{if(a){n(!0);try{await l(a,{title:m.title,description:m.description||null,category:m.category,requires_acknowledgment:m.requires_acknowledgment,requires_signature:m.requires_signature}),c.reset(),i(null),t(!1)}finally{n(!1)}}},h=m=>m<1024?`${m} B`:m<1024*1024?`${(m/1024).toFixed(1)} KB`:`${(m/(1024*1024)).toFixed(1)} MB`;return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-[550px]",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Upload Document"}),s.jsx(Ot,{children:"Upload a new document to the organizational library"})]}),s.jsx(lc,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(f),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"File"}),a?s.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-muted/50",children:[s.jsx(gt,{className:"h-8 w-8 text-primary"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:a.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:h(a.size)})]}),s.jsx(I,{type:"button",variant:"ghost",size:"icon",onClick:d,children:s.jsx(Fn,{className:"h-4 w-4"})})]}):s.jsxs("div",{onClick:()=>{var m;return(m=o.current)==null?void 0:m.click()},className:"flex flex-col items-center justify-center gap-2 p-6 border-2 border-dashed rounded-lg cursor-pointer hover:border-primary transition-colors",children:[s.jsx(jo,{className:"h-8 w-8 text-muted-foreground"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload or drag and drop"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"PDF, Word, Excel, or other documents"})]}),s.jsx("input",{ref:o,type:"file",onChange:u,className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.rtf"})]}),s.jsx(pt,{control:c.control,name:"title",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Title"}),s.jsx(ht,{children:s.jsx(ne,{placeholder:"Document title",...m})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"category",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Category"}),s.jsxs(Ie,{onValueChange:m.onChange,value:m.value,children:[s.jsx(ht,{children:s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select a category"})})}),s.jsx(Me,{children:Vde.map(g=>s.jsx(Y,{value:g.value,children:g.label},g.value))})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"description",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Description (Optional)"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Brief description of the document...",className:"resize-none",...m})}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-sm font-medium",children:"Requirements"}),s.jsx(pt,{control:c.control,name:"requires_acknowledgment",render:({field:m})=>s.jsxs(ft,{className:"flex items-start space-x-3 space-y-0",children:[s.jsx(ht,{children:s.jsx(Ti,{checked:m.value,onCheckedChange:m.onChange})}),s.jsxs("div",{className:"space-y-1 leading-none",children:[s.jsx(vt,{className:"font-normal",children:"Requires acknowledgment"}),s.jsx(Yd,{children:"Employees must confirm they have read the document"})]})]})}),s.jsx(pt,{control:c.control,name:"requires_signature",render:({field:m})=>s.jsxs(ft,{className:"flex items-start space-x-3 space-y-0",children:[s.jsx(ht,{children:s.jsx(Ti,{checked:m.value,onCheckedChange:m.onChange})}),s.jsxs("div",{className:"space-y-1 leading-none",children:[s.jsx(vt,{className:"font-normal",children:"Requires signature"}),s.jsx(Yd,{children:"Employees must sign to accept the document"})]})]})})]}),s.jsxs(ar,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:r||!a,children:[r&&s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Upload Document"]})]})]})})]})})}function Wde(){const[e,t]=y.useState("library"),[r,n]=y.useState(""),[a,i]=y.useState(!1),{documents:o,loading:l}=J0(),{distributions:c,loading:u}=ew(),d=o.filter(m=>m.is_active),f=c.filter(m=>m.status==="pending"||m.status==="sent"),h=c.filter(m=>m.status==="acknowledged"||m.status==="signed");return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Document Library"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage organizational documents and distribute to employees"})]}),s.jsxs(I,{onClick:()=>i(!0),className:"gap-2",children:[s.jsx(jo,{className:"h-4 w-4"}),"Upload Document"]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Ut,{title:"Total Documents",value:d.length,description:"Active documents",icon:gt,variant:"default"}),s.jsx(Ut,{title:"Categories",value:new Set(o.map(m=>m.category)).size,description:"Document types",icon:vF,variant:"info"}),s.jsx(Ut,{title:"Pending Actions",value:f.length,description:"Awaiting response",icon:wo,variant:"warning"}),s.jsx(Ut,{title:"Completed",value:h.length,description:"Acknowledged/Signed",icon:_E,variant:"success"})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(un,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{placeholder:"Search documents...",value:r,onChange:m=>n(m.target.value),className:"pl-10"})]})}),s.jsxs(bn,{value:e,onValueChange:t,className:"space-y-4",children:[s.jsxs(fn,{className:"grid w-full grid-cols-2 lg:w-auto lg:inline-grid",children:[s.jsxs(Ve,{value:"library",className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Document Library"}),s.jsx("span",{className:"sm:hidden",children:"Library"})]}),s.jsxs(Ve,{value:"distributions",className:"flex items-center gap-2",children:[s.jsx(wo,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Distributions"}),s.jsx("span",{className:"sm:hidden",children:"Sent"})]})]}),s.jsx(rt,{value:"library",children:s.jsx(Fde,{searchQuery:r})}),s.jsx(rt,{value:"distributions",children:s.jsx(Bde,{searchQuery:r})})]}),s.jsx(qde,{open:a,onOpenChange:i})]})}const Hde=18,Kde=23,Gde=23,Yde=6;function Xde(){const[e,t]=y.useState([]),[r,n]=y.useState(null),[a,i]=y.useState([]),[o,l]=y.useState(!0);y.useEffect(()=>{(async()=>{l(!0);const{data:x,error:b}=await $.from("award_classifications").select("*").order("name");!b&&x&&(t(x),x.length>0&&n(x[0])),l(!1)})()},[]);const c=v=>{const x={...v,id:crypto.randomUUID()};i(b=>[...b,x])},u=(v,x)=>{i(b=>b.map(w=>w.id===v?{...w,...x}:w))},d=v=>{i(x=>x.filter(b=>b.id!==v))},f=()=>{i([])},h=(v,x,b,w,_,j)=>{const N=v+x/60,S=b+w/60;if(_>j){const P=h(v,x,b,w,_,24),A=h(v,x,b,w,0,j);return P+A}const E=Math.max(N,_),C=Math.min(S,j);return C>E?C-E:0},m=v=>{if(!r)return null;const[x,b]=v.startTime.split(":").map(Number),[w,_]=v.endTime.split(":").map(Number);let j=w*60+_-(x*60+b);j<0&&(j+=24*60);const N=j/60,S=v.breakMinutes/60,E=Math.max(0,N-S),P=new Date(v.date).getDay(),A=P===6,k=P===0;let D=0,R=0,U=0,B=0,L=0,M=0,T=0;v.isPublicHoliday?M=E:A?B=E:k?L=E:(R=h(x,b,w,_,Hde,Kde),U=h(x,b,w,_,Gde,Yde),D=Math.max(0,E-R-U)),v.isOvertime&&(T=E,D=0,R=0,U=0);const F=r.base_hourly_rate,Z=D*F,W=R*F*r.evening_multiplier,K=U*F*r.night_multiplier,V=B*F*r.saturday_multiplier,le=L*F*r.sunday_multiplier,be=M*F*r.public_holiday_multiplier,ce=T*F*r.overtime_multiplier,Pe=Z+W+K+V+le+be+ce;return{shiftId:v.id,date:v.date,startTime:v.startTime,endTime:v.endTime,totalHours:N,breakHours:S,workedHours:E,baseHours:D,eveningHours:R,nightHours:U,saturdayHours:B,sundayHours:L,publicHolidayHours:M,overtimeHours:T,basePay:Z,eveningPay:W,nightPay:K,saturdayPay:V,sundayPay:le,publicHolidayPay:be,overtimePay:ce,totalPay:Pe}},g=y.useMemo(()=>a.map(m).filter(v=>v!==null),[a,r]),p=y.useMemo(()=>{const v={totalHours:0,totalWorkedHours:0,baseHours:0,penaltyHours:0,basePay:0,eveningPay:0,nightPay:0,saturdayPay:0,sundayPay:0,publicHolidayPay:0,overtimePay:0,totalPenaltyPay:0,grossPay:0};return g.reduce((x,b)=>(x.totalHours+=b.totalHours,x.totalWorkedHours+=b.workedHours,x.baseHours+=b.baseHours,x.penaltyHours+=b.eveningHours+b.nightHours+b.saturdayHours+b.sundayHours+b.publicHolidayHours+b.overtimeHours,x.basePay+=b.basePay,x.eveningPay+=b.eveningPay,x.nightPay+=b.nightPay,x.saturdayPay+=b.saturdayPay,x.sundayPay+=b.sundayPay,x.publicHolidayPay+=b.publicHolidayPay,x.overtimePay+=b.overtimePay,x.totalPenaltyPay+=b.eveningPay+b.nightPay+b.saturdayPay+b.sundayPay+b.publicHolidayPay+b.overtimePay,x.grossPay+=b.totalPay,x),v)},[g]);return{awardClassifications:e,selectedAward:r,setSelectedAward:n,shifts:a,addShift:c,updateShift:u,removeShift:d,clearShifts:f,calculations:g,summary:p,loading:o}}function Qde({onAddShift:e}){const[t,r]=y.useState(new Date),[n,a]=y.useState("09:00"),[i,o]=y.useState("17:00"),[l,c]=y.useState("30"),[u,d]=y.useState(!1),[f,h]=y.useState(!1),m=g=>{g.preventDefault(),e({date:de(t,"yyyy-MM-dd"),startTime:n,endTime:i,breakMinutes:parseInt(l)||0,isPublicHoliday:u,isOvertime:f}),r(new Date),a("09:00"),o("17:00"),c("30"),d(!1),h(!1)};return s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Date"}),s.jsxs(Di,{children:[s.jsx(Ri,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:ae("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[s.jsx(Vt,{className:"mr-2 h-4 w-4"}),t?de(t,"PPP"):s.jsx("span",{children:"Pick a date"})]})}),s.jsx(ei,{className:"w-auto p-0",align:"start",children:s.jsx(ri,{mode:"single",selected:t,onSelect:g=>g&&r(g),initialFocus:!0,className:"pointer-events-auto"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"startTime",children:"Start Time"}),s.jsx(ne,{id:"startTime",type:"time",value:n,onChange:g=>a(g.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"endTime",children:"End Time"}),s.jsx(ne,{id:"endTime",type:"time",value:i,onChange:g=>o(g.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"breakMinutes",children:"Break (mins)"}),s.jsx(ne,{id:"breakMinutes",type:"number",min:"0",max:"120",value:l,onChange:g=>c(g.target.value),placeholder:"30"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{className:"invisible",children:"Add"}),s.jsxs(I,{type:"submit",className:"w-full",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Shift"]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ti,{id:"publicHoliday",checked:u,onCheckedChange:g=>d(g===!0)}),s.jsx(H,{htmlFor:"publicHoliday",className:"text-sm cursor-pointer",children:"Public Holiday"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ti,{id:"overtime",checked:f,onCheckedChange:g=>h(g===!0)}),s.jsx(H,{htmlFor:"overtime",className:"text-sm cursor-pointer",children:"Overtime"})]})]})]})}function Zde({shifts:e,calculations:t,onRemoveShift:r,formatCurrency:n}){const a=o=>t.find(l=>l.shiftId===o),i=o=>{const l=new Date(o);return de(l,"EEE")};return e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"No shifts added yet"}),s.jsx("p",{className:"text-sm",children:"Add shifts above to calculate payroll"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Date"}),s.jsx(oe,{children:"Time"}),s.jsx(oe,{children:"Hours"}),s.jsx(oe,{children:"Type"}),s.jsx(oe,{className:"text-right",children:"Pay"}),s.jsx(oe,{className:"w-[60px]"})]})}),s.jsx(pr,{children:e.map(o=>{const l=a(o.id);return s.jsxs(ze,{children:[s.jsx(te,{children:s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:de(new Date(o.date),"dd MMM yyyy")}),s.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",i(o.date),")"]})]})}),s.jsxs(te,{children:[o.startTime," - ",o.endTime,o.breakMinutes>0&&s.jsxs("span",{className:"text-muted-foreground text-sm ml-2",children:["(",o.breakMinutes,"m break)"]})]}),s.jsx(te,{children:l?s.jsxs("span",{children:[l.workedHours.toFixed(2)," hrs"]}):"-"}),s.jsx(te,{children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.isPublicHoliday&&s.jsx(fe,{variant:"destructive",className:"text-xs",children:"Public Holiday"}),o.isOvertime&&s.jsx(fe,{variant:"secondary",className:"text-xs",children:"Overtime"}),l&&l.saturdayHours>0&&s.jsx(fe,{variant:"outline",className:"text-xs",children:"Saturday"}),l&&l.sundayHours>0&&s.jsx(fe,{variant:"outline",className:"text-xs",children:"Sunday"}),l&&l.eveningHours>0&&!o.isOvertime&&s.jsx(fe,{variant:"outline",className:"text-xs",children:"Evening"}),l&&l.nightHours>0&&!o.isOvertime&&s.jsx(fe,{variant:"outline",className:"text-xs",children:"Night"}),l&&l.baseHours>0&&!o.isPublicHoliday&&!o.isOvertime&&s.jsx(fe,{variant:"outline",className:"text-xs",children:"Base"})]})}),s.jsx(te,{className:"text-right font-medium",children:l?n(l.totalPay):"-"}),s.jsx(te,{children:s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>r(o.id),children:s.jsx(Zn,{className:"h-4 w-4 text-destructive"})})})]},o.id)})})]})})}function Jde({summary:e,selectedAward:t,formatCurrency:r}){return s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ge,{className:"text-sm font-medium",children:"Total Hours"}),s.jsx(xt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(X,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[e.totalWorkedHours.toFixed(2)," hrs"]}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 space-y-0.5",children:[s.jsxs("p",{children:["Base: ",e.baseHours.toFixed(2)," hrs"]}),s.jsxs("p",{children:["Penalty: ",e.penaltyHours.toFixed(2)," hrs"]})]})]})]}),s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ge,{className:"text-sm font-medium",children:"Base Rate"}),s.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(X,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[t?r(t.base_hourly_rate):"$0.00","/hr"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(t==null?void 0:t.name)||"No award selected"})]})]}),s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ge,{className:"text-sm font-medium",children:"Gross Pay"}),s.jsx(Ad,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(X,{children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:r(e.grossPay)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Before tax & deductions"})]})]}),s.jsxs(G,{className:"md:col-span-3",children:[s.jsx(he,{children:s.jsx(ge,{className:"text-sm font-medium",children:"Pay Breakdown"})}),s.jsx(X,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Base Pay"}),s.jsx("span",{className:"font-medium",children:r(e.basePay)})]}),e.eveningPay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Evening Loading (",t==null?void 0:t.evening_multiplier,"x)"]}),s.jsx("span",{children:r(e.eveningPay)})]}),e.nightPay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Night Loading (",t==null?void 0:t.night_multiplier,"x)"]}),s.jsx("span",{children:r(e.nightPay)})]}),e.saturdayPay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Saturday Loading (",t==null?void 0:t.saturday_multiplier,"x)"]}),s.jsx("span",{children:r(e.saturdayPay)})]}),e.sundayPay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Sunday Loading (",t==null?void 0:t.sunday_multiplier,"x)"]}),s.jsx("span",{children:r(e.sundayPay)})]}),e.publicHolidayPay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Public Holiday (",t==null?void 0:t.public_holiday_multiplier,"x)"]}),s.jsx("span",{children:r(e.publicHolidayPay)})]}),e.overtimePay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Overtime (",t==null?void 0:t.overtime_multiplier,"x)"]}),s.jsx("span",{children:r(e.overtimePay)})]}),s.jsx(Et,{}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:"Total Penalty Pay"}),s.jsx("span",{className:"font-medium",children:r(e.totalPenaltyPay)})]}),s.jsx(Et,{}),s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"font-bold",children:"Gross Pay"}),s.jsx("span",{className:"font-bold text-primary",children:r(e.grossPay)})]})]})})]})]})}function efe(){const{awardClassifications:e,selectedAward:t,setSelectedAward:r,shifts:n,addShift:a,removeShift:i,clearShifts:o,calculations:l,summary:c,loading:u}=Xde(),d=h=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(h),f=h=>{const m=e.find(g=>g.id===h);m&&r(m)};return u?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):e.length===0?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Payroll Calculator"}),s.jsx("p",{className:"text-muted-foreground",children:"Calculate employee wages based on award classifications and shift times"})]}),s.jsxs(Ll,{children:[s.jsx(WN,{className:"h-4 w-4"}),s.jsx(Qm,{children:"No Award Classifications"}),s.jsx(Fl,{children:"You need to create at least one award classification before using the payroll calculator. Go to Settings  Award Classifications to add pay rates and penalty multipliers."})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Payroll Calculator"}),s.jsx("p",{className:"text-muted-foreground",children:"Calculate employee wages based on award classifications and shift times"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rG,{className:"h-5 w-5 text-primary"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[n.length," shifts"]})]})]}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-lg",children:"Award Classification"}),s.jsx(Le,{children:"Select the award classification to use for pay calculations"})]}),s.jsx(X,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[s.jsxs("div",{className:"space-y-2 flex-1 max-w-md",children:[s.jsx(H,{children:"Select Award"}),s.jsxs(Ie,{value:(t==null?void 0:t.id)||"",onValueChange:f,children:[s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select an award classification"})}),s.jsx(Me,{children:e.map(h=>s.jsxs(Y,{value:h.id,children:[h.name," - ",d(h.base_hourly_rate),"/hr"]},h.id))})]})]}),t&&s.jsxs("div",{className:"text-sm text-muted-foreground bg-muted/50 p-3 rounded-md flex-1",children:[s.jsx("p",{className:"font-medium text-foreground mb-1",children:"Penalty Rates:"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1",children:[s.jsxs("span",{children:["Saturday: ",t.saturday_multiplier,"x"]}),s.jsxs("span",{children:["Sunday: ",t.sunday_multiplier,"x"]}),s.jsxs("span",{children:["Public Holiday: ",t.public_holiday_multiplier,"x"]}),s.jsxs("span",{children:["Evening: ",t.evening_multiplier,"x"]}),s.jsxs("span",{children:["Night: ",t.night_multiplier,"x"]}),s.jsxs("span",{children:["Overtime: ",t.overtime_multiplier,"x"]})]})]})]})})]}),s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsx(ge,{className:"text-lg",children:"Add Shifts"}),s.jsx(Le,{children:"Enter shift details to calculate pay. Evening: 6pm-11pm, Night: 11pm-6am"})]}),n.length>0&&s.jsxs(I,{variant:"outline",size:"sm",onClick:o,children:[s.jsx(_F,{className:"h-4 w-4 mr-2"}),"Clear All"]})]}),s.jsx(X,{children:s.jsx(Qde,{onAddShift:a})})]}),n.length>0&&s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-lg",children:"Shifts"}),s.jsx(Le,{children:"All entered shifts with calculated pay"})]}),s.jsx(X,{children:s.jsx(Zde,{shifts:n,calculations:l,onRemoveShift:i,formatCurrency:d})})]}),n.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Pay Summary"}),s.jsx(Jde,{summary:c,selectedAward:t,formatCurrency:d})]})]})}class tfe{async getPayPeriods(t){const{data:r,error:n}=await $.from("pay_periods").select("*").eq("organisation_id",t).order("start_date",{ascending:!1});if(n)throw n;return r||[]}async createPayPeriod(t,r){var o;const{data:{user:n}}=await $.auth.getUser();if(!n)throw new Error("Not authenticated");const{data:a,error:i}=await $.from("pay_periods").insert({organisation_id:t,start_date:r.start_date,end_date:r.end_date,created_by_user_id:n.id,created_by_name:((o=n.user_metadata)==null?void 0:o.display_name)||n.email,created_by_email:n.email}).select().single();if(i)throw i;return await _r.log({action:"pay_period.create",entityType:"pay_period",entityId:a.id,organisationId:t,afterState:{start_date:r.start_date,end_date:r.end_date}}),a}async updatePayPeriodStatus(t,r){const{data:{user:n}}=await $.auth.getUser(),a={status:r};r==="closed"&&(a.closed_at=new Date().toISOString(),a.closed_by_user_id=n==null?void 0:n.id);const{data:i,error:o}=await $.from("pay_periods").update(a).eq("id",t).select().single();if(o)throw o;return await _r.log({action:r==="closed"?"pay_period.close":"pay_period.update",entityType:"pay_period",entityId:t,organisationId:i.organisation_id,afterState:{status:r}}),i}async getMappings(t){const{data:r,error:n}=await $.from("payroll_mappings").select("*").eq("organisation_id",t).order("shift_type");if(n)throw n;return r||[]}async createMapping(t,r){const{data:n,error:a}=await $.from("payroll_mappings").insert({organisation_id:t,shift_type:r.shift_type,earning_code:r.earning_code,description:r.description||null,multiplier:r.multiplier||1,applies_when:r.applies_when||null}).select().single();if(a)throw a;return n}async updateMapping(t,r){const n={};r.shift_type!==void 0&&(n.shift_type=r.shift_type),r.earning_code!==void 0&&(n.earning_code=r.earning_code),r.description!==void 0&&(n.description=r.description),r.multiplier!==void 0&&(n.multiplier=r.multiplier),r.applies_when!==void 0&&(n.applies_when=r.applies_when);const{data:a,error:i}=await $.from("payroll_mappings").update(n).eq("id",t).select().single();if(i)throw i;return a}async deleteMapping(t){const{error:r}=await $.from("payroll_mappings").delete().eq("id",t);if(r)throw r}async validateExport(t,r,n){const a=[],i=[],{data:o,error:l}=await $.from("pay_periods").select("*").eq("id",r).single();if(l||!o)return a.push({type:"invalid_dates",message:"Pay period not found"}),{isValid:!1,errors:a,warnings:i,timesheets:[]};const{data:c,error:u}=await $.from("timesheets").select(`
        id,
        employee_id,
        date,
        clock_in,
        clock_out,
        break_minutes,
        total_hours,
        status,
        notes,
        is_locked,
        exported_at
      `).eq("organisation_id",t).gte("date",o.start_date).lte("date",o.end_date).order("date");if(u)throw u;const d=[...new Set((c||[]).map(v=>v.employee_id))],{data:f}=await $.from("employees").select("id, first_name, last_name, email").in("id",d),h=new Map((f||[]).map(v=>[v.id,{name:`${v.first_name} ${v.last_name}`,email:v.email}])),m=new Map(n.map(v=>[v.shift_type,v.earning_code])),g=[],p=new Map;for(const v of c||[]){const x=h.get(v.employee_id),b=(x==null?void 0:x.name)||"Unknown",w=x==null?void 0:x.email;if(v.status!=="approved"){a.push({type:"unapproved",message:`Timesheet for ${b} on ${v.date} is not approved (status: ${v.status})`,employeeId:v.employee_id,employeeName:b});continue}if(v.is_locked&&v.exported_at){i.push({type:"duplicate",message:`Timesheet for ${b} on ${v.date} was already exported`,employeeId:v.employee_id,employeeName:b,date:v.date});continue}w||a.push({type:"missing_identifier",message:`Employee ${b} has no email address for payroll export`,employeeId:v.employee_id,employeeName:b});const _="standard";m.has(_)||a.push({type:"missing_mapping",message:`No payroll mapping found for shift type: ${_}`,shiftType:_});const j=`${v.employee_id}-${v.date}`;p.has(j)||p.set(j,[]);const N=p.get(j);N.length>0&&i.push({type:"overlap",message:`Multiple timesheets for ${b} on ${v.date}`,employeeId:v.employee_id,employeeName:b,date:v.date}),N.push(v.id),v.total_hours&&v.total_hours>12&&i.push({type:"long_shift",message:`Long shift (${v.total_hours.toFixed(1)}h) for ${b} on ${v.date}`,employeeId:v.employee_id,employeeName:b,date:v.date}),g.push({id:v.id,employee_id:v.employee_id,employee_name:b,employee_email:w,date:v.date,clock_in:v.clock_in,clock_out:v.clock_out,break_minutes:v.break_minutes||0,total_hours:v.total_hours,status:v.status,notes:v.notes,shift_type:_,is_locked:v.is_locked||!1,exported_at:v.exported_at})}return{isValid:a.length===0,errors:a,warnings:i,timesheets:g}}async getExports(t){const{data:r,error:n}=await $.from("payroll_exports").select(`
        *,
        pay_period:pay_periods(*)
      `).eq("organisation_id",t).order("created_at",{ascending:!1});if(n)throw n;return(r||[]).map(a=>({...a,file_urls:a.file_urls||[],totals_summary:this.parseTotalsSummary(a.totals_summary)}))}parseTotalsSummary(t){if(!t||typeof t!="object"||Array.isArray(t))return{totalHours:0,employeesCount:0,linesCount:0};const r=t;return{totalHours:typeof r.totalHours=="number"?r.totalHours:0,employeesCount:typeof r.employeesCount=="number"?r.employeesCount:0,linesCount:typeof r.linesCount=="number"?r.linesCount:0,totalEarnings:typeof r.totalEarnings=="number"?r.totalEarnings:void 0}}async generateExport(t,r,n,a){var g;const{data:{user:i}}=await $.auth.getUser();if(!i)throw new Error("Not authenticated");const o=this.generateCSVContent(r.provider,a,n),l=`export_${r.pay_period_id}_${r.provider}_${Date.now()}.csv`,c=`${t}/${l}`,{error:u}=await $.storage.from("payroll-exports").upload(c,new Blob([o],{type:"text/csv"}));if(u)throw u;const d={totalHours:a.reduce((p,v)=>p+(v.total_hours||0),0),employeesCount:new Set(a.map(p=>p.employee_id)).size,linesCount:a.length},{data:f,error:h}=await $.from("payroll_exports").insert({organisation_id:t,pay_period_id:r.pay_period_id,provider:r.provider,file_urls:[c],totals_summary:d,created_by_user_id:i.id,created_by_name:((g=i.user_metadata)==null?void 0:g.display_name)||i.email,created_by_email:i.email}).select().single();if(h)throw h;const m=a.map(p=>p.id);return await $.rpc("lock_timesheets_for_export",{_timesheet_ids:m,_pay_period_id:r.pay_period_id}),await this.updatePayPeriodStatus(r.pay_period_id,"exported"),await _r.log({action:"payroll_export.generate",entityType:"payroll_export",entityId:f.id,organisationId:t,afterState:{provider:r.provider,timesheets_count:m.length,total_hours:d.totalHours,employees_count:d.employeesCount}}),{...f,file_urls:f.file_urls||[],totals_summary:d}}generateCSVContent(t,r,n){const a=new Map(n.map(i=>[i.shift_type,i.earning_code]));switch(t){case"generic_csv":return this.generateGenericCSV(r,a);case"keypay":return this.generateKeyPayCSV(r,a);case"xero":return this.generateXeroCSV(r,a);case"myob":return this.generateMYOBCSV(r,a);default:return this.generateGenericCSV(r,a)}}escapeCSV(t){if(t==null)return"";const r=String(t);return r.includes(",")||r.includes('"')||r.includes(`
`)?`"${r.replace(/"/g,'""')}"`:r}generateGenericCSV(t,r){const n=["employee_email","employee_name","date","start_time","end_time","break_minutes","hours","earning_code","cost_center","notes"],a=t.map(i=>{var o;return[this.escapeCSV(i.employee_email),this.escapeCSV(i.employee_name),this.escapeCSV(i.date),this.escapeCSV(i.clock_in),this.escapeCSV(i.clock_out),this.escapeCSV(i.break_minutes),this.escapeCSV((o=i.total_hours)==null?void 0:o.toFixed(2)),this.escapeCSV(r.get(i.shift_type||"standard")||"ORD"),"",this.escapeCSV(i.notes)]});return[n.join(","),...a.map(i=>i.join(","))].join(`
`)}generateKeyPayCSV(t,r){const n=["Employee Email","Location","Date","Earnings Category","Units","Notes"],a=t.map(i=>{var o;return[this.escapeCSV(i.employee_email),"",this.escapeCSV(i.date),this.escapeCSV(r.get(i.shift_type||"standard")||"Ordinary Hours"),this.escapeCSV((o=i.total_hours)==null?void 0:o.toFixed(2)),this.escapeCSV(i.notes)]});return[n.join(","),...a.map(i=>i.join(","))].join(`
`)}generateXeroCSV(t,r){const n=["Employee Email","Earnings Rate Code","Units","Date"],a=t.map(i=>{var o;return[this.escapeCSV(i.employee_email),this.escapeCSV(r.get(i.shift_type||"standard")||"ORD"),this.escapeCSV((o=i.total_hours)==null?void 0:o.toFixed(2)),this.escapeCSV(i.date)]});return[n.join(","),...a.map(i=>i.join(","))].join(`
`)}generateMYOBCSV(t,r){const n=["Employee Email","Payroll Category","Units","Date"],a=t.map(i=>{var o;return[this.escapeCSV(i.employee_email),this.escapeCSV(r.get(i.shift_type||"standard")||"Base Hourly"),this.escapeCSV((o=i.total_hours)==null?void 0:o.toFixed(2)),this.escapeCSV(i.date)]});return[n.join(","),...a.map(i=>i.join(","))].join(`
`)}async getDownloadUrl(t){const{data:r,error:n}=await $.storage.from("payroll-exports").createSignedUrl(t,3600);if(n)throw n;return r.signedUrl}async voidExport(t,r){var o;const{data:{user:n}}=await $.auth.getUser();if(!n)throw new Error("Not authenticated");const{data:a,error:i}=await $.from("payroll_exports").update({status:"voided",voided_at:new Date().toISOString(),voided_by_user_id:n.id,voided_by_name:((o=n.user_metadata)==null?void 0:o.display_name)||n.email,voided_reason:r}).eq("id",t).select().single();if(i)throw i;return await _r.log({action:"payroll_export.void",entityType:"payroll_export",entityId:t,organisationId:a.organisation_id,afterState:{reason:r,voided_at:a.voided_at}}),{...a,file_urls:a.file_urls||[],totals_summary:this.parseTotalsSummary(a.totals_summary)}}async unlockTimesheet(t,r){var o;const{data:{user:n}}=await $.auth.getUser();if(!n)throw new Error("Not authenticated");const{data:a,error:i}=await $.rpc("unlock_timesheet",{_timesheet_id:t,_user_id:n.id,_user_name:((o=n.user_metadata)==null?void 0:o.display_name)||n.email,_user_email:n.email,_reason:r});if(i)throw i;return await _r.log({action:"timesheet.unlock",entityType:"timesheet",entityId:t,afterState:{reason:r,unlocked_at:new Date().toISOString()}}),a}}const Os=new tfe;function rfe(e){const t=ai(),{data:r}=sr({queryKey:["default-organisation"],queryFn:async()=>{const{data:C,error:P}=await $.from("organisations").select("id").limit(1).maybeSingle();if(P)throw P;return C},enabled:!e}),n=r==null?void 0:r.id,{data:a=[],isLoading:i}=sr({queryKey:["pay-periods",n],queryFn:async()=>n?Os.getPayPeriods(n):[],enabled:!!n}),o=Ht({mutationFn:async C=>{if(!n)throw new Error("Organisation not found");return Os.createPayPeriod(n,C)},onSuccess:()=>{t.invalidateQueries({queryKey:["pay-periods",n]}),J({title:"Pay Period Created",description:"The pay period has been created successfully."})},onError:C=>{console.error("[usePayrollExport] Create pay period failed:",C),J({title:"Error",description:"Failed to create pay period. Please try again.",variant:"destructive"})}}),l=Ht({mutationFn:async C=>Os.updatePayPeriodStatus(C,"closed"),onSuccess:()=>{t.invalidateQueries({queryKey:["pay-periods",n]}),J({title:"Pay Period Closed",description:"The pay period has been closed."})},onError:C=>{console.error("[usePayrollExport] Close pay period failed:",C),J({title:"Error",description:"Failed to close pay period.",variant:"destructive"})}}),{data:c=[],isLoading:u}=sr({queryKey:["payroll-mappings",n],queryFn:async()=>n?Os.getMappings(n):[],enabled:!!n}),d=Ht({mutationFn:async C=>{if(!n)throw new Error("Organisation not found");return Os.createMapping(n,C)},onSuccess:()=>{t.invalidateQueries({queryKey:["payroll-mappings",n]}),J({title:"Mapping Created",description:"Payroll mapping has been created."})},onError:C=>{console.error("[usePayrollExport] Create mapping failed:",C),J({title:"Error",description:"Failed to create mapping.",variant:"destructive"})}}),f=Ht({mutationFn:async({id:C,updates:P})=>Os.updateMapping(C,P),onSuccess:()=>{t.invalidateQueries({queryKey:["payroll-mappings",n]}),J({title:"Mapping Updated",description:"Payroll mapping has been updated."})},onError:C=>{console.error("[usePayrollExport] Update mapping failed:",C),J({title:"Error",description:"Failed to update mapping.",variant:"destructive"})}}),h=Ht({mutationFn:async C=>Os.deleteMapping(C),onSuccess:()=>{t.invalidateQueries({queryKey:["payroll-mappings",n]}),J({title:"Mapping Deleted",description:"Payroll mapping has been removed."})},onError:C=>{console.error("[usePayrollExport] Delete mapping failed:",C),J({title:"Error",description:"Failed to delete mapping.",variant:"destructive"})}}),m=Ht({mutationFn:async C=>{if(!n)throw new Error("Organisation not found");return Os.validateExport(n,C,c)}}),{data:g=[],isLoading:p}=sr({queryKey:["payroll-exports",n],queryFn:async()=>n?Os.getExports(n):[],enabled:!!n}),v=Ht({mutationFn:async({payPeriodId:C,provider:P,timesheets:A})=>{if(!n)throw new Error("Organisation not found");return Os.generateExport(n,{pay_period_id:C,provider:P,timesheet_ids:A.map(k=>k.id)},c,A)},onSuccess:()=>{t.invalidateQueries({queryKey:["payroll-exports",n]}),t.invalidateQueries({queryKey:["pay-periods",n]}),t.invalidateQueries({queryKey:["timesheets",n]}),J({title:"Export Generated",description:"Payroll export has been generated successfully."})},onError:C=>{console.error("[usePayrollExport] Generate export failed:",C),J({title:"Error",description:"Failed to generate export.",variant:"destructive"})}}),x=Ht({mutationFn:async({exportId:C,reason:P})=>Os.voidExport(C,P),onSuccess:()=>{t.invalidateQueries({queryKey:["payroll-exports",n]}),J({title:"Export Voided",description:"The export has been voided."})},onError:C=>{console.error("[usePayrollExport] Void export failed:",C),J({title:"Error",description:"Failed to void export.",variant:"destructive"})}}),b=Ht({mutationFn:async C=>Os.getDownloadUrl(C),onError:C=>{console.error("[usePayrollExport] Get download URL failed:",C),J({title:"Error",description:"Failed to get download link.",variant:"destructive"})}}),w=Ht({mutationFn:async({timesheetId:C,reason:P})=>Os.unlockTimesheet(C,P),onSuccess:()=>{t.invalidateQueries({queryKey:["timesheets",n]}),J({title:"Timesheet Unlocked",description:"The timesheet has been unlocked for editing."})},onError:C=>{console.error("[usePayrollExport] Unlock timesheet failed:",C),J({title:"Error",description:"Failed to unlock timesheet.",variant:"destructive"})}}),_=a.filter(C=>C.status==="open"),j=a.filter(C=>C.status==="exported"),N=a.filter(C=>C.status==="closed"),S=g.filter(C=>C.status==="generated"),E=g.filter(C=>C.status==="voided");return{payPeriods:a,openPayPeriods:_,exportedPayPeriods:j,closedPayPeriods:N,mappings:c,exports:g,activeExports:S,voidedExports:E,organisationId:n,isLoading:i||u||p,isLoadingPayPeriods:i,isLoadingMappings:u,isLoadingExports:p,createPayPeriod:o.mutateAsync,closePayPeriod:l.mutateAsync,isCreatingPayPeriod:o.isPending,createMapping:d.mutateAsync,updateMapping:(C,P)=>f.mutateAsync({id:C,updates:P}),deleteMapping:h.mutateAsync,isCreatingMapping:d.isPending,validateExport:m.mutateAsync,isValidating:m.isPending,validationResult:m.data,generateExport:v.mutateAsync,voidExport:(C,P)=>x.mutateAsync({exportId:C,reason:P}),getDownloadUrl:b.mutateAsync,isGenerating:v.isPending,isVoiding:x.isPending,isDownloading:b.isPending,unlockTimesheet:(C,P)=>w.mutateAsync({timesheetId:C,reason:P}),isUnlocking:w.isPending}}function zT({payPeriods:e,onCreatePayPeriod:t,onClosePayPeriod:r,onSelectPayPeriod:n,selectedPayPeriodId:a,isCreating:i}){const[o,l]=y.useState(!1),[c,u]=y.useState(""),[d,f]=y.useState(""),h=async()=>{!c||!d||(await t({start_date:c,end_date:d}),l(!1),u(""),f(""))},m=g=>{switch(g){case"open":return s.jsx(fe,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20",children:"Open"});case"exported":return s.jsx(fe,{variant:"outline",className:"bg-accent/50 text-accent-foreground border-accent/30",children:"Exported"});case"closed":return s.jsx(fe,{variant:"outline",className:"bg-muted text-muted-foreground border-muted",children:"Closed"})}};return s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(Vt,{className:"h-5 w-5"}),"Pay Periods"]}),s.jsx(Le,{children:"Manage pay periods for payroll exports"})]}),s.jsxs(Rt,{open:o,onOpenChange:l,children:[s.jsx(rv,{asChild:!0,children:s.jsxs(I,{size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Pay Period"]})}),s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Create Pay Period"}),s.jsx(Ot,{children:"Define the date range for this pay period"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"start_date",children:"Start Date"}),s.jsx(ne,{id:"start_date",type:"date",value:c,onChange:g=>u(g.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"end_date",children:"End Date"}),s.jsx(ne,{id:"end_date",type:"date",value:d,onChange:g=>f(g.target.value)})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsxs(I,{onClick:h,disabled:i||!c||!d,children:[i&&s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Create"]})]})]})]})]}),s.jsx(X,{children:e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Vt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No pay periods created yet"}),s.jsx("p",{className:"text-sm",children:"Create a pay period to start exporting payroll"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Period"}),s.jsx(oe,{children:"Status"}),s.jsx(oe,{children:"Created By"}),s.jsx(oe,{className:"text-right",children:"Actions"})]})}),s.jsx(pr,{children:e.map(g=>s.jsxs(ze,{className:a===g.id?"bg-muted/50":"",children:[s.jsxs(te,{className:"font-medium",children:[de(new Date(g.start_date),"dd MMM yyyy")," -"," ",de(new Date(g.end_date),"dd MMM yyyy")]}),s.jsx(te,{children:m(g.status)}),s.jsx(te,{className:"text-sm text-muted-foreground",children:g.created_by_name||g.created_by_email}),s.jsx(te,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[g.status==="open"&&s.jsx(I,{size:"sm",variant:a===g.id?"default":"outline",onClick:()=>n(g),children:"Select"}),g.status==="exported"&&s.jsxs(I,{size:"sm",variant:"outline",onClick:()=>r(g.id),children:[s.jsx(pu,{className:"h-4 w-4 mr-1"}),"Close"]}),g.status==="closed"&&s.jsx(jt,{className:"h-4 w-4 text-green-600"})]})})]},g.id))})]})})]})}function nfe({mappings:e,onCreateMapping:t,onUpdateMapping:r,onDeleteMapping:n,isCreating:a}){const[i,o]=y.useState(!1),[l,c]=y.useState(null),[u,d]=y.useState({shift_type:"",earning_code:"",description:"",multiplier:1}),f=()=>{c(null),d({shift_type:"",earning_code:"",description:"",multiplier:1}),o(!0)},h=p=>{c(p),d({shift_type:p.shift_type,earning_code:p.earning_code,description:p.description||"",multiplier:p.multiplier}),o(!0)},m=async()=>{!u.shift_type||!u.earning_code||(l?await r(l.id,u):await t(u),o(!1))},g=async p=>{confirm("Are you sure you want to delete this mapping?")&&await n(p)};return s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(HN,{className:"h-5 w-5"}),"Payroll Mappings"]}),s.jsx(Le,{children:"Map shift types to payroll earning codes"})]}),s.jsxs(Rt,{open:i,onOpenChange:o,children:[s.jsx(rv,{asChild:!0,children:s.jsxs(I,{size:"sm",onClick:f,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Mapping"]})}),s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:l?"Edit Mapping":"Create Mapping"}),s.jsx(Ot,{children:"Map a shift type to a payroll earning code"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"shift_type",children:"Shift Type"}),s.jsx(ne,{id:"shift_type",placeholder:"e.g., standard, overtime, weekend",value:u.shift_type,onChange:p=>d({...u,shift_type:p.target.value}),disabled:!!l})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"earning_code",children:"Earning Code"}),s.jsx(ne,{id:"earning_code",placeholder:"e.g., ORD, OT1.5, SAT",value:u.earning_code,onChange:p=>d({...u,earning_code:p.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"description",children:"Description"}),s.jsx(ne,{id:"description",placeholder:"e.g., Ordinary Hours",value:u.description,onChange:p=>d({...u,description:p.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"multiplier",children:"Multiplier"}),s.jsx(ne,{id:"multiplier",type:"number",step:"0.1",min:"0",value:u.multiplier,onChange:p=>d({...u,multiplier:parseFloat(p.target.value)||1})})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsxs(I,{onClick:m,disabled:a||!u.shift_type||!u.earning_code,children:[a&&s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),l?"Update":"Create"]})]})]})]})]}),s.jsx(X,{children:e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(HN,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No payroll mappings configured"}),s.jsx("p",{className:"text-sm",children:"Add mappings to export timesheets with earning codes"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Shift Type"}),s.jsx(oe,{children:"Earning Code"}),s.jsx(oe,{children:"Description"}),s.jsx(oe,{children:"Multiplier"}),s.jsx(oe,{className:"text-right",children:"Actions"})]})}),s.jsx(pr,{children:e.map(p=>s.jsxs(ze,{children:[s.jsx(te,{className:"font-medium font-mono",children:p.shift_type}),s.jsx(te,{className:"font-mono",children:p.earning_code}),s.jsx(te,{className:"text-muted-foreground",children:p.description||"-"}),s.jsxs(te,{children:[p.multiplier,"x"]}),s.jsx(te,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-1",children:[s.jsx(I,{size:"icon",variant:"ghost",onClick:()=>h(p),children:s.jsx(Np,{className:"h-4 w-4"})}),s.jsx(I,{size:"icon",variant:"ghost",className:"text-destructive",onClick:()=>g(p.id),children:s.jsx(Zn,{className:"h-4 w-4"})})]})})]},p.id))})]})})]})}var Uk="Radio",[sfe,O8]=Qr(Uk),[afe,ife]=sfe(Uk),T8=y.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:u,...d}=e,[f,h]=y.useState(null),m=Ke(t,v=>h(v)),g=y.useRef(!1),p=f?u||!!f.closest("form"):!0;return s.jsxs(afe,{scope:r,checked:a,disabled:o,children:[s.jsx(Ee.button,{type:"button",role:"radio","aria-checked":a,"data-state":$8(a),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:m,onClick:pe(e.onClick,v=>{a||c==null||c(),p&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),p&&s.jsx(M8,{control:f,bubbles:!g.current,name:n,value:l,checked:a,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});T8.displayName=Uk;var D8="RadioIndicator",R8=y.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,i=ife(D8,r);return s.jsx(dn,{present:n||i.checked,children:s.jsx(Ee.span,{"data-state":$8(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});R8.displayName=D8;var ofe="RadioBubbleInput",M8=y.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=y.useRef(null),l=Ke(o,i),c=Qg(r),u=Ug(t);return y.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const g=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(g)}},[c,r,n]),s.jsx(Ee.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});M8.displayName=ofe;function $8(e){return e?"checked":"unchecked"}var lfe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],tw="RadioGroup",[cfe,t3e]=Qr(tw,[bh,O8]),I8=bh(),L8=O8(),[ufe,dfe]=cfe(tw),F8=y.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:f,...h}=e,m=I8(r),g=Uu(u),[p,v]=Hs({prop:i,defaultProp:a??null,onChange:f,caller:tw});return s.jsx(ufe,{scope:r,name:n,required:o,disabled:l,value:p,onValueChange:v,children:s.jsx(GE,{asChild:!0,...m,orientation:c,dir:g,loop:d,children:s.jsx(Ee.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...h,ref:t})})})});F8.displayName=tw;var U8="RadioGroupItem",B8=y.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,i=dfe(U8,r),o=i.disabled||n,l=I8(r),c=L8(r),u=y.useRef(null),d=Ke(t,u),f=i.value===a.value,h=y.useRef(!1);return y.useEffect(()=>{const m=p=>{lfe.includes(p.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",g)}},[]),s.jsx(YE,{asChild:!0,...l,focusable:!o,active:f,children:s.jsx(T8,{disabled:o,required:i.required,checked:f,...c,...a,name:i.name,ref:d,onCheck:()=>i.onValueChange(a.value),onKeyDown:pe(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:pe(a.onFocus,()=>{var m;h.current&&((m=u.current)==null||m.click())})})})});B8.displayName=U8;var ffe="RadioGroupIndicator",z8=y.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=L8(r);return s.jsx(R8,{...a,...n,ref:t})});z8.displayName=ffe;var V8=F8,q8=B8,hfe=z8;const W8=y.forwardRef(({className:e,...t},r)=>s.jsx(V8,{className:ae("grid gap-2",e),...t,ref:r}));W8.displayName=V8.displayName;const H8=y.forwardRef(({className:e,...t},r)=>s.jsx(q8,{ref:r,className:ae("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(hfe,{className:"flex items-center justify-center",children:s.jsx(mF,{className:"h-2.5 w-2.5 fill-current text-current"})})}));H8.displayName=q8.displayName;const Vy={generic_csv:"Generic Payroll CSV",keypay:"KeyPay Import",xero:"Xero Payroll",myob:"MYOB Payroll"},mfe={generic_csv:"Standard CSV format compatible with most payroll systems",keypay:"KeyPay timesheet/earnings lines import format",xero:"Xero Payroll earnings import format",myob:"MYOB Payroll categories import format"};function pfe({selectedPayPeriod:e,validationResult:t,isValidating:r,isGenerating:n,onValidate:a,onGenerate:i,onDownload:o}){const[l,c]=y.useState("provider"),[u,d]=y.useState("generic_csv"),[f,h]=y.useState(null);y.useState(null);const m=async()=>{e&&(await a(e.id),c("validation"))},g=async()=>{!e||!t||(await i(e.id,u,t.timesheets),c("complete"))},p=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select Export Format"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the payroll system you're exporting to"})]}),s.jsx(W8,{value:u,onValueChange:w=>d(w),className:"space-y-3",children:Object.keys(Vy).map(w=>s.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-lg border cursor-pointer transition-colors ${u===w?"border-primary bg-primary/5":"border-border hover:bg-muted/50"}`,onClick:()=>d(w),children:[s.jsx(H8,{value:w,id:w,className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(H,{htmlFor:w,className:"font-medium cursor-pointer",children:Vy[w]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:mfe[w]})]})]},w))}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(I,{onClick:m,disabled:r,children:[r&&s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Validate & Continue",s.jsx(qN,{className:"h-4 w-4 ml-2"})]})})]}),v=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Validation Results"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Review any issues before generating the export"})]}),t&&s.jsx(fe,{variant:t.isValid?"outline":"destructive",className:t.isValid?"bg-green-50 text-green-700 border-green-200":"",children:t.isValid?"Valid":"Has Errors"})]}),(t==null?void 0:t.errors)&&t.errors.length>0&&s.jsxs(Ll,{variant:"destructive",children:[s.jsx(hu,{className:"h-4 w-4"}),s.jsxs(Qm,{children:["Errors (",t.errors.length,")"]}),s.jsx(Fl,{children:s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[t.errors.slice(0,5).map((w,_)=>s.jsx("li",{className:"text-sm",children:w.message},_)),t.errors.length>5&&s.jsxs("li",{className:"text-sm",children:["...and ",t.errors.length-5," more"]})]})})]}),(t==null?void 0:t.warnings)&&t.warnings.length>0&&s.jsxs(Ll,{children:[s.jsx(or,{className:"h-4 w-4"}),s.jsxs(Qm,{children:["Warnings (",t.warnings.length,")"]}),s.jsx(Fl,{children:s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[t.warnings.slice(0,5).map((w,_)=>s.jsx("li",{className:"text-sm",children:w.message},_)),t.warnings.length>5&&s.jsxs("li",{className:"text-sm",children:["...and ",t.warnings.length-5," more"]})]})})]}),(t==null?void 0:t.timesheets)&&t.timesheets.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-2",children:["Timesheets to Export (",t.timesheets.length,")"]}),s.jsx("div",{className:"border rounded-lg max-h-64 overflow-auto",children:s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Employee"}),s.jsx(oe,{children:"Date"}),s.jsx(oe,{children:"Hours"})]})}),s.jsxs(pr,{children:[t.timesheets.slice(0,10).map(w=>{var _;return s.jsxs(ze,{children:[s.jsx(te,{className:"font-medium",children:w.employee_name}),s.jsx(te,{children:de(new Date(w.date),"dd MMM yyyy")}),s.jsx(te,{children:((_=w.total_hours)==null?void 0:_.toFixed(2))||"-"})]},w.id)}),t.timesheets.length>10&&s.jsx(ze,{children:s.jsxs(te,{colSpan:3,className:"text-center text-muted-foreground",children:["...and ",t.timesheets.length-10," more timesheets"]})})]})]})})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs(I,{variant:"outline",onClick:()=>c("provider"),children:[s.jsx(eu,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs(I,{onClick:()=>c("confirm"),disabled:!(t!=null&&t.isValid)||t.timesheets.length===0,children:["Continue to Export",s.jsx(qN,{className:"h-4 w-4 ml-2"})]})]})]}),x=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Confirm Export"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Review the export details before generating"})]}),s.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Format"}),s.jsx("span",{className:"font-medium",children:Vy[u]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Pay Period"}),s.jsx("span",{className:"font-medium",children:e&&`${de(new Date(e.start_date),"dd MMM")} - ${de(new Date(e.end_date),"dd MMM yyyy")}`})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Timesheets"}),s.jsx("span",{className:"font-medium",children:(t==null?void 0:t.timesheets.length)||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Hours"}),s.jsx("span",{className:"font-medium",children:(t==null?void 0:t.timesheets.reduce((w,_)=>w+(_.total_hours||0),0).toFixed(2))||"0"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Employees"}),s.jsx("span",{className:"font-medium",children:new Set(t==null?void 0:t.timesheets.map(w=>w.employee_id)).size||0})]})]}),s.jsxs(Ll,{children:[s.jsx(or,{className:"h-4 w-4"}),s.jsx(Qm,{children:"Important"}),s.jsx(Fl,{children:"Exporting will lock these timesheets from further editing. Make sure all entries are correct before proceeding."})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs(I,{variant:"outline",onClick:()=>c("validation"),children:[s.jsx(eu,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs(I,{onClick:g,disabled:n,children:[n&&s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Generate Export",s.jsx(Od,{className:"h-4 w-4 ml-2"})]})]})]}),b=()=>s.jsxs("div",{className:"space-y-6 text-center py-8",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-green-100 flex items-center justify-center",children:s.jsx(hF,{className:"h-8 w-8 text-green-600"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Complete!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Your payroll export has been generated and timesheets have been locked."})]}),s.jsx("div",{className:"flex justify-center gap-4",children:s.jsx(I,{variant:"outline",onClick:()=>{c("provider"),h(null)},children:"Create Another Export"})})]});return e?s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(Od,{className:"h-5 w-5"}),"Export Wizard"]}),s.jsxs(Le,{children:["Exporting for: ",de(new Date(e.start_date),"dd MMM")," -"," ",de(new Date(e.end_date),"dd MMM yyyy")]})]}),s.jsxs(X,{children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-8",children:["provider","validation","confirm","complete"].map((w,_)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium ${l===w?"bg-primary text-primary-foreground":["provider","validation","confirm","complete"].indexOf(l)>_?"bg-green-100 text-green-700":"bg-muted text-muted-foreground"}`,children:_+1}),_<3&&s.jsx("div",{className:"w-8 h-0.5 bg-muted mx-1"})]},w))}),l==="provider"&&p(),l==="validation"&&v(),l==="confirm"&&x(),l==="complete"&&b()]})]}):s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(Od,{className:"h-5 w-5"}),"Export Wizard"]}),s.jsx(Le,{children:"Select a pay period to begin the export process"})]}),s.jsx(X,{children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Od,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No pay period selected"}),s.jsx("p",{className:"text-sm",children:"Select an open pay period from the list above"})]})})]})}function gfe({exports:e,onDownload:t,onVoid:r,isVoiding:n,isDownloading:a}){const[i,o]=y.useState(!1),[l,c]=y.useState(null),[u,d]=y.useState(""),f=async p=>{const v=await t(p);window.open(v,"_blank")},h=p=>{c(p),d(""),o(!0)},m=async()=>{!l||!u.trim()||(await r(l.id,u),o(!1),c(null),d(""))},g=p=>{switch(p){case"generated":return s.jsx(fe,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20",children:"Generated"});case"voided":return s.jsx(fe,{variant:"outline",className:"bg-destructive/10 text-destructive border-destructive/20",children:"Voided"})}};return s.jsxs(s.Fragment,{children:[s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(Xa,{className:"h-5 w-5"}),"Export History"]}),s.jsx(Le,{children:"View and download previous payroll exports"})]}),s.jsx(X,{children:e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Od,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No exports yet"}),s.jsx("p",{className:"text-sm",children:"Generate your first payroll export to see it here"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Date"}),s.jsx(oe,{children:"Pay Period"}),s.jsx(oe,{children:"Provider"}),s.jsx(oe,{children:"Summary"}),s.jsx(oe,{children:"Status"}),s.jsx(oe,{children:"Created By"}),s.jsx(oe,{className:"text-right",children:"Actions"})]})}),s.jsx(pr,{children:e.map(p=>s.jsxs(ze,{className:p.status==="voided"?"opacity-60":"",children:[s.jsx(te,{className:"font-medium",children:de(new Date(p.created_at),"dd MMM yyyy HH:mm")}),s.jsx(te,{children:p.pay_period&&s.jsxs("span",{className:"text-sm",children:[de(new Date(p.pay_period.start_date),"dd MMM")," -"," ",de(new Date(p.pay_period.end_date),"dd MMM")]})}),s.jsx(te,{children:Vy[p.provider]}),s.jsxs(te,{className:"text-sm text-muted-foreground",children:[p.totals_summary.linesCount," lines, ",p.totals_summary.totalHours.toFixed(1),"h,"," ",p.totals_summary.employeesCount," employees"]}),s.jsx(te,{children:g(p.status)}),s.jsx(te,{className:"text-sm text-muted-foreground",children:p.created_by_name||p.created_by_email}),s.jsx(te,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-1",children:[p.file_urls.length>0&&s.jsx(I,{size:"icon",variant:"ghost",onClick:()=>f(p.file_urls[0]),disabled:a,children:a?s.jsx(We,{className:"h-4 w-4 animate-spin"}):s.jsx(Es,{className:"h-4 w-4"})}),p.status==="generated"&&s.jsx(I,{size:"icon",variant:"ghost",className:"text-destructive",onClick:()=>h(p),children:s.jsx(An,{className:"h-4 w-4"})})]})})]},p.id))})]})})]}),s.jsx(Rt,{open:i,onOpenChange:o,children:s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Void Export"}),s.jsx(Ot,{children:"This will mark the export as voided. The file will remain but won't be considered valid. A reason is required for audit purposes."})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"void_reason",children:"Reason for Voiding"}),s.jsx(wt,{id:"void_reason",placeholder:"Enter the reason for voiding this export...",value:u,onChange:p=>d(p.target.value),rows:3})]})}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsxs(I,{variant:"destructive",onClick:m,disabled:n||!u.trim(),children:[n&&s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Void Export"]})]})]})})]})}function vfe(){const[e,t]=y.useState("export"),[r,n]=y.useState(null),{payPeriods:a,mappings:i,exports:o,isLoading:l,createPayPeriod:c,closePayPeriod:u,isCreatingPayPeriod:d,createMapping:f,updateMapping:h,deleteMapping:m,isCreatingMapping:g,validateExport:p,isValidating:v,validationResult:x,generateExport:b,isGenerating:w,voidExport:_,isVoiding:j,getDownloadUrl:N,isDownloading:S}=rfe();return l?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Export"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate payroll-ready CSV exports from approved timesheets"})]}),s.jsxs(bn,{value:e,onValueChange:t,className:"space-y-4",children:[s.jsxs(fn,{children:[s.jsxs(Ve,{value:"export",className:"flex items-center gap-2",children:[s.jsx(Od,{className:"h-4 w-4"}),"Export Wizard"]}),s.jsxs(Ve,{value:"periods",className:"flex items-center gap-2",children:[s.jsx(Vt,{className:"h-4 w-4"}),"Pay Periods"]}),s.jsxs(Ve,{value:"mappings",className:"flex items-center gap-2",children:[s.jsx(HN,{className:"h-4 w-4"}),"Mappings"]}),s.jsxs(Ve,{value:"history",className:"flex items-center gap-2",children:[s.jsx(Xa,{className:"h-4 w-4"}),"History"]})]}),s.jsxs(rt,{value:"export",className:"space-y-6",children:[s.jsx(zT,{payPeriods:a.filter(E=>E.status==="open"),onCreatePayPeriod:c,onClosePayPeriod:u,onSelectPayPeriod:n,selectedPayPeriodId:r==null?void 0:r.id,isCreating:d}),s.jsx(pfe,{selectedPayPeriod:r,validationResult:x||null,isValidating:v,isGenerating:w,onValidate:p,onGenerate:async(E,C,P)=>{await b({payPeriodId:E,provider:C,timesheets:P}),n(null)},onDownload:N})]}),s.jsx(rt,{value:"periods",children:s.jsx(zT,{payPeriods:a,onCreatePayPeriod:c,onClosePayPeriod:u,onSelectPayPeriod:E=>{E.status==="open"&&(n(E),t("export"))},selectedPayPeriodId:r==null?void 0:r.id,isCreating:d})}),s.jsx(rt,{value:"mappings",children:s.jsx(nfe,{mappings:i,onCreateMapping:f,onUpdateMapping:h,onDeleteMapping:m,isCreating:g})}),s.jsx(rt,{value:"history",children:s.jsx(gfe,{exports:o,onDownload:N,onVoid:_,isVoiding:j,isDownloading:S})})]})]})}async function yfe(e){try{const{data:t}=await $.from("profiles").select("user_id").ilike("display_name",`%${e.employeeName}%`).maybeSingle();if(!(t!=null&&t.user_id))return console.warn(`Could not find user_id for employee: ${e.employeeName}`),!1;const r=e.reviewType==="annual"?"Annual Review":e.reviewType==="probation"?"Probation Review":"Performance Review",{error:n}=await $.from("notifications").insert({user_id:t.user_id,title:"New Review Assigned",message:`${e.reviewerName} has assigned you a ${r}. Please complete your self-assessment.`,type:"review",category:"performance",link:"/portal/reviews",is_read:!1});if(n)throw n;return!0}catch(t){return console.error("Error creating review notification:",t.message),!1}}async function xfe(e){try{const{data:t}=await $.from("profiles").select("user_id").ilike("display_name",`%${e.employeeName}%`).maybeSingle();if(!(t!=null&&t.user_id))return!1;let r="Review Updated",n="Your review status has been updated.";switch(e.status){case"in_progress":r="Review In Progress",n="Your performance review is now in progress.";break;case"pending_approval":r="Review Pending Approval",n="Your review is pending final approval.";break;case"completed":r="Review Completed",n="Your performance review has been completed. View your feedback.";break}const{error:a}=await $.from("notifications").insert({user_id:t.user_id,title:r,message:n,type:"review",category:"performance",link:"/portal/reviews",is_read:!1});if(a)throw a;return!0}catch(t){return console.error("Error creating status notification:",t.message),!1}}async function bfe(e){try{const{data:t}=await $.from("profiles").select("user_id").ilike("display_name",`%${e.responderName}%`).maybeSingle();if(!(t!=null&&t.user_id))return!1;const{error:r}=await $.from("notifications").insert({user_id:t.user_id,title:"360 Feedback Requested",message:`You've been asked to provide feedback for ${e.employeeName}'s performance review.`,type:"feedback",category:"performance",link:"/portal/reviews",is_read:!1});if(r)throw r;return!0}catch(t){return console.error("Error creating feedback notification:",t.message),!1}}function Bk(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),{toast:a}=lr(),i=y.useCallback(async()=>{try{n(!0);const{data:u,error:d}=await $.from("supervisions").select("*").order("created_at",{ascending:!1});if(d)throw d;t(u||[])}catch(u){a({title:"Error fetching supervisions",description:u.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async u=>{try{const{data:d,error:f}=await $.from("supervisions").insert(u).select().single();if(f)throw f;return t(h=>[d,...h]),a({title:"Supervision relationship created"}),d}catch(d){return a({title:"Error creating supervision",description:d.message,variant:"destructive"}),null}},l=async(u,d)=>{try{const{data:f,error:h}=await $.from("supervisions").update(d).eq("id",u).select().single();if(h)throw h;return t(m=>m.map(g=>g.id===u?f:g)),a({title:"Supervision updated"}),f}catch(f){return a({title:"Error updating supervision",description:f.message,variant:"destructive"}),null}},c=async u=>{try{const{error:d}=await $.from("supervisions").delete().eq("id",u);if(d)throw d;return t(f=>f.filter(h=>h.id!==u)),a({title:"Supervision deleted"}),!0}catch(d){return a({title:"Error deleting supervision",description:d.message,variant:"destructive"}),!1}};return y.useEffect(()=>{i()},[i]),{supervisions:e,loading:r,fetchSupervisions:i,createSupervision:o,updateSupervision:l,deleteSupervision:c}}function wfe(e){const[t,r]=y.useState([]),[n,a]=y.useState(!0),{toast:i}=lr(),o=y.useCallback(async()=>{try{a(!0);let c=$.from("supervision_sessions").select("*").order("session_date",{ascending:!1});e&&(c=c.eq("supervision_id",e));const{data:u,error:d}=await c;if(d)throw d;r(u||[])}catch(c){i({title:"Error fetching sessions",description:c.message,variant:"destructive"})}finally{a(!1)}},[e,i]),l=async c=>{try{const{data:u,error:d}=await $.from("supervision_sessions").insert(c).select().single();if(d)throw d;return r(f=>[u,...f]),i({title:"Session recorded"}),u}catch(u){return i({title:"Error creating session",description:u.message,variant:"destructive"}),null}};return y.useEffect(()=>{o()},[o]),{sessions:t,loading:n,fetchSessions:o,createSession:l}}function K8(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),{toast:a}=lr(),i=y.useCallback(async()=>{try{n(!0);const{data:u,error:d}=await $.from("competencies").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(d)throw d;t(u||[])}catch(u){a({title:"Error fetching competencies",description:u.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async u=>{try{const{data:d,error:f}=await $.from("competencies").insert(u).select().single();if(f)throw f;return t(h=>[...h,d].sort((m,g)=>m.display_order-g.display_order)),a({title:"Competency created"}),d}catch(d){return a({title:"Error creating competency",description:d.message,variant:"destructive"}),null}},l=async(u,d)=>{try{const{data:f,error:h}=await $.from("competencies").update(d).eq("id",u).select().single();if(h)throw h;return t(m=>m.map(g=>g.id===u?f:g).sort((g,p)=>g.display_order-p.display_order)),a({title:"Competency updated"}),f}catch(f){return a({title:"Error updating competency",description:f.message,variant:"destructive"}),null}},c=async u=>{try{const{error:d}=await $.from("competencies").update({is_active:!1}).eq("id",u);if(d)throw d;return t(f=>f.filter(h=>h.id!==u)),a({title:"Competency removed"}),!0}catch(d){return a({title:"Error removing competency",description:d.message,variant:"destructive"}),!1}};return y.useEffect(()=>{i()},[i]),{competencies:e,loading:r,fetchCompetencies:i,createCompetency:o,updateCompetency:l,deleteCompetency:c}}function rw(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),{toast:a}=lr(),i=y.useCallback(async()=>{try{n(!0);const{data:u,error:d}=await $.from("performance_reviews").select("*").order("created_at",{ascending:!1});if(d)throw d;t(u||[])}catch(u){a({title:"Error fetching reviews",description:u.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async u=>{try{const{data:d,error:f}=await $.from("performance_reviews").insert(u).select().single();if(f)throw f;return t(h=>[d,...h]),a({title:"Review created"}),await yfe({employeeEmail:d.employee_email,employeeName:d.employee_name,reviewerName:d.reviewer_name,reviewType:d.review_type,reviewId:d.id}),d}catch(d){return a({title:"Error creating review",description:d.message,variant:"destructive"}),null}},l=async(u,d)=>{try{const{data:f,error:h}=await $.from("performance_reviews").update(d).eq("id",u).select().single();if(h)throw h;return t(m=>m.map(g=>g.id===u?f:g)),a({title:"Review updated"}),d.status&&await xfe({employeeEmail:f.employee_email,employeeName:f.employee_name,status:f.status,reviewId:f.id}),f}catch(f){return a({title:"Error updating review",description:f.message,variant:"destructive"}),null}},c=async u=>{try{const{error:d}=await $.from("performance_reviews").delete().eq("id",u);if(d)throw d;return t(f=>f.filter(h=>h.id!==u)),a({title:"Review deleted"}),!0}catch(d){return a({title:"Error deleting review",description:d.message,variant:"destructive"}),!1}};return y.useEffect(()=>{i()},[i]),{reviews:e,loading:r,fetchReviews:i,createReview:o,updateReview:l,deleteReview:c}}function G8(e){const[t,r]=y.useState([]),[n,a]=y.useState(!0),{toast:i}=lr(),o=y.useCallback(async()=>{if(!e){a(!1);return}try{a(!0);const{data:u,error:d}=await $.from("review_feedback").select("*").eq("review_id",e).order("created_at",{ascending:!1}).returns();if(d)throw d;const f=(u||[]).map(h=>({...h,status:h.status??"pending",is_anonymous:h.is_anonymous??!1}));r(f)}catch(u){i({title:"Error fetching feedback",description:u.message,variant:"destructive"})}finally{a(!1)}},[e,i]),l=async(u,d)=>{try{const{data:f,error:h}=await $.from("review_feedback").insert(u).select().returns().single();if(h)throw h;return r(m=>[{...f,status:f.status??"pending",is_anonymous:f.is_anonymous??!1},...m]),i({title:"Feedback request sent"}),d&&await bfe({responderEmail:f.responder_email,responderName:f.responder_name,employeeName:d,reviewId:f.review_id}),f}catch(f){return i({title:"Error requesting feedback",description:f.message,variant:"destructive"}),null}},c=async(u,d)=>{try{const{data:f,error:h}=await $.from("review_feedback").update({...d,status:"submitted",submitted_at:new Date().toISOString()}).eq("id",u).select().returns().single();if(h)throw h;return r(m=>m.map(g=>g.id===u?{...f,status:f.status??"pending",is_anonymous:f.is_anonymous??!1}:g)),i({title:"Feedback submitted"}),f}catch(f){return i({title:"Error submitting feedback",description:f.message,variant:"destructive"}),null}};return y.useEffect(()=>{o()},[o]),{feedback:t,loading:n,fetchFeedback:o,requestFeedback:l,submitFeedback:c}}const jfe=ks({employee_id:Je().min(1,"Please select an employee"),supervisor_id:Je().min(1,"Please select a supervisor"),start_date:Nu({required_error:"Start date is required"}),notes:Je().max(500).optional()});function _fe({open:e,onOpenChange:t}){const[r,n]=y.useState(!1),{createSupervision:a}=Bk(),[i,o]=y.useState(void 0),l=$,c=y.useCallback(async()=>{const{data:p,error:v}=await l.auth.getUser();if(v)throw v;const x=p.user;if(!x)return;const{data:b,error:w}=await l.rpc("get_user_organisation_id",{_user_id:x.id});if(w)throw w;return b},[l]);y.useEffect(()=>{(async()=>{const p=await c();o(p)})()},[c]);const{activeEmployees:u}=xa(i,{skipFallback:!0}),d=y.useMemo(()=>u.map(p=>({id:p.id,firstName:p.first_name,lastName:p.last_name,email:p.email,position:p.position||""})),[u]),f=as({resolver:Oi(jfe),defaultValues:{employee_id:"",supervisor_id:"",notes:""}}),h=async p=>{const v=d.find(b=>b.id===p.employee_id),x=d.find(b=>b.id===p.supervisor_id);if(!(!v||!x)){n(!0);try{await a({supervisor_name:`${x.firstName} ${x.lastName}`,supervisor_email:x.email,employee_name:`${v.firstName} ${v.lastName}`,employee_email:v.email,start_date:de(p.start_date,"yyyy-MM-dd"),end_date:null,is_active:!0,notes:p.notes||null}),f.reset(),t(!1)}finally{n(!1)}}},m=f.watch("employee_id"),g=f.watch("supervisor_id");return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-[500px]",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Create Supervision Assignment"}),s.jsx(Ot,{children:"Assign a supervisor to an employee for ongoing supervision sessions."})]}),s.jsx(lc,{...f,children:s.jsxs("form",{onSubmit:f.handleSubmit(h),className:"space-y-4",children:[s.jsx(pt,{control:f.control,name:"employee_id",render:({field:p})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Employee"}),s.jsxs(Ie,{onValueChange:p.onChange,value:p.value,children:[s.jsx(ht,{children:s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select an employee"})})}),s.jsx(Me,{children:d.filter(v=>v.id!==g).map(v=>s.jsxs(Y,{value:v.id,children:[v.firstName," ",v.lastName," - ",v.position]},v.id))})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:f.control,name:"supervisor_id",render:({field:p})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Supervisor"}),s.jsxs(Ie,{onValueChange:p.onChange,value:p.value,children:[s.jsx(ht,{children:s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select a supervisor"})})}),s.jsx(Me,{children:d.filter(v=>v.id!==m).map(v=>s.jsxs(Y,{value:v.id,children:[v.firstName," ",v.lastName," - ",v.position]},v.id))})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:f.control,name:"start_date",render:({field:p})=>s.jsxs(ft,{className:"flex flex-col",children:[s.jsx(vt,{children:"Start Date"}),s.jsxs(Di,{children:[s.jsx(Ri,{asChild:!0,children:s.jsx(ht,{children:s.jsxs(I,{variant:"outline",className:ae("w-full pl-3 text-left font-normal",!p.value&&"text-muted-foreground"),children:[p.value?de(p.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(Vt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(ei,{className:"w-auto p-0",align:"start",children:s.jsx(ri,{mode:"single",selected:p.value,onSelect:p.onChange,initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:f.control,name:"notes",render:({field:p})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Notes (Optional)"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Any additional notes about this supervision arrangement...",className:"resize-none",...p})}),s.jsx(_t,{})]})}),s.jsxs(ar,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:r,children:[r&&s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Assignment"]})]})]})})]})})}var nw="Switch",[Nfe,r3e]=Qr(nw),[Sfe,Cfe]=Nfe(nw),Y8=y.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,m]=y.useState(null),g=Ke(t,w=>m(w)),p=y.useRef(!1),v=h?d||!!h.closest("form"):!0,[x,b]=Hs({prop:a,defaultProp:i??!1,onChange:u,caller:nw});return s.jsxs(Sfe,{scope:r,checked:x,disabled:l,children:[s.jsx(Ee.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":J8(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onClick:pe(e.onClick,w=>{b(_=>!_),v&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})}),v&&s.jsx(Z8,{control:h,bubbles:!p.current,name:n,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});Y8.displayName=nw;var X8="SwitchThumb",Q8=y.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=Cfe(X8,r);return s.jsx(Ee.span,{"data-state":J8(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});Q8.displayName=X8;var Efe="SwitchBubbleInput",Z8=y.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=y.useRef(null),l=Ke(o,i),c=Qg(r),u=Ug(t);return y.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const g=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(g)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Z8.displayName=Efe;function J8(e){return e?"checked":"unchecked"}var ez=Y8,kfe=Q8;const kn=y.forwardRef(({className:e,...t},r)=>s.jsx(ez,{className:ae("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:s.jsx(kfe,{className:ae("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));kn.displayName=ez.displayName;const Pfe=ks({session_date:Nu({required_error:"Session date is required"}),duration_minutes:IU.number().min(1,"Duration must be at least 1 minute").optional(),location:Je().max(100).optional(),topics_discussed:Je().max(2e3).optional(),action_items:Je().max(2e3).optional(),follow_up_required:Lx().default(!1),next_session_date:Nu().optional(),notes:Je().max(2e3).optional()});function Afe({open:e,onOpenChange:t,supervisionId:r}){const[n,a]=y.useState(!1),{createSession:i}=wfe(r),o=as({resolver:Oi(Pfe),defaultValues:{follow_up_required:!1,location:"",topics_discussed:"",action_items:"",notes:""}}),l=async c=>{a(!0);try{await i({supervision_id:r,session_date:de(c.session_date,"yyyy-MM-dd"),duration_minutes:c.duration_minutes||null,location:c.location||null,topics_discussed:c.topics_discussed||null,action_items:c.action_items||null,follow_up_required:c.follow_up_required,next_session_date:c.next_session_date?de(c.next_session_date,"yyyy-MM-dd"):null,notes:c.notes||null,created_by:null}),o.reset(),t(!1)}finally{a(!1)}};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Log Supervision Session"}),s.jsx(Ot,{children:"Record details of a supervision meeting including topics discussed and action items."})]}),s.jsx(lc,{...o,children:s.jsxs("form",{onSubmit:o.handleSubmit(l),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(pt,{control:o.control,name:"session_date",render:({field:c})=>s.jsxs(ft,{className:"flex flex-col",children:[s.jsx(vt,{children:"Session Date"}),s.jsxs(Di,{children:[s.jsx(Ri,{asChild:!0,children:s.jsx(ht,{children:s.jsxs(I,{variant:"outline",className:ae("w-full pl-3 text-left font-normal",!c.value&&"text-muted-foreground"),children:[c.value?de(c.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(Vt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(ei,{className:"w-auto p-0",align:"start",children:s.jsx(ri,{mode:"single",selected:c.value,onSelect:c.onChange,initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"duration_minutes",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Duration (minutes)"}),s.jsx(ht,{children:s.jsx(ne,{type:"number",placeholder:"60",...c})}),s.jsx(_t,{})]})})]}),s.jsx(pt,{control:o.control,name:"location",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Location"}),s.jsx(ht,{children:s.jsx(ne,{placeholder:"Office, Video Call, etc.",...c})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"topics_discussed",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Topics Discussed"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Key topics covered during the session...",className:"resize-none min-h-[100px]",...c})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"action_items",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Action Items"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Tasks and follow-up actions...",className:"resize-none min-h-[80px]",...c})}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("span",{className:"text-sm font-medium",children:"Follow-up Required"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Mark if additional follow-up is needed before next session"})]}),s.jsx(pt,{control:o.control,name:"follow_up_required",render:({field:c})=>s.jsx(ft,{children:s.jsx(ht,{children:s.jsx(kn,{checked:c.value,onCheckedChange:c.onChange})})})})]}),s.jsx(pt,{control:o.control,name:"next_session_date",render:({field:c})=>s.jsxs(ft,{className:"flex flex-col",children:[s.jsx(vt,{children:"Next Session Date (Optional)"}),s.jsxs(Di,{children:[s.jsx(Ri,{asChild:!0,children:s.jsx(ht,{children:s.jsxs(I,{variant:"outline",className:ae("w-full pl-3 text-left font-normal",!c.value&&"text-muted-foreground"),children:[c.value?de(c.value,"PPP"):s.jsx("span",{children:"Schedule next session"}),s.jsx(Vt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(ei,{className:"w-auto p-0",align:"start",children:s.jsx(ri,{mode:"single",selected:c.value,onSelect:c.onChange,disabled:u=>u<new Date,initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"notes",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Additional Notes"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Any other observations or comments...",className:"resize-none",...c})}),s.jsx(_t,{})]})}),s.jsxs(ar,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:n,children:[n&&s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Log Session"]})]})]})})]})})}function Ofe({searchQuery:e}){const{supervisions:t,loading:r,deleteSupervision:n,updateSupervision:a}=Bk(),[i,o]=y.useState(!1),[l,c]=y.useState(!1),[u,d]=y.useState(null),f=t.filter(g=>g.employee_name.toLowerCase().includes(e.toLowerCase())||g.supervisor_name.toLowerCase().includes(e.toLowerCase())),h=g=>{d(g),c(!0)},m=async g=>{await a(g,{is_active:!1,end_date:new Date().toISOString().split("T")[0]})};return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(s.Fragment,{children:[s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ge,{className:"text-lg",children:"Supervision Assignments"}),s.jsx(Le,{children:"Manage supervisor-employee relationships and log supervision sessions"})]}),s.jsxs(I,{onClick:()=>o(!0),className:"gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"Add Supervision"]})]}),s.jsx(X,{children:f.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Ar,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No supervision assignments found"}),s.jsx("p",{className:"text-sm mt-1",children:"Create a new supervision assignment to get started"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Employee"}),s.jsx(oe,{children:"Supervisor"}),s.jsx(oe,{children:"Start Date"}),s.jsx(oe,{children:"Status"}),s.jsx(oe,{className:"text-right",children:"Actions"})]})}),s.jsx(pr,{children:f.map(g=>s.jsxs(ze,{children:[s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Or,{className:"h-8 w-8",children:s.jsx(Tr,{className:"text-xs",children:g.employee_name.split(" ").map(p=>p[0]).join("")})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:g.employee_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:g.employee_email})]})]})}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Or,{className:"h-8 w-8",children:s.jsx(Tr,{className:"text-xs bg-primary/10 text-primary",children:g.supervisor_name.split(" ").map(p=>p[0]).join("")})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:g.supervisor_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:g.supervisor_email})]})]})}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"}),de(new Date(g.start_date),"dd MMM yyyy")]})}),s.jsx(te,{children:s.jsx(fe,{variant:g.is_active?"default":"secondary",children:g.is_active?"Active":"Ended"})}),s.jsx(te,{className:"text-right",children:s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:s.jsx(si,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",className:"bg-popover",children:[s.jsxs(tt,{onClick:()=>h(g.id),children:[s.jsx(Ig,{className:"h-4 w-4 mr-2"}),"Log Session"]}),g.is_active&&s.jsx(tt,{onClick:()=>m(g.id),className:"text-destructive",children:"End Supervision"}),s.jsx(tt,{onClick:()=>n(g.id),className:"text-destructive",children:"Delete"})]})]})})]},g.id))})]})})]}),s.jsx(_fe,{open:i,onOpenChange:o}),u&&s.jsx(Afe,{open:l,onOpenChange:c,supervisionId:u})]})}const Tfe=ks({employee_id:Je().min(1,"Please select an employee"),reviewer_id:Je().min(1,"Please select a reviewer"),review_type:Vu(["performance","annual","probation"]),review_period_start:Nu({required_error:"Start date is required"}),review_period_end:Nu({required_error:"End date is required"})});function Dfe({open:e,onOpenChange:t}){const[r,n]=y.useState(!1),{createReview:a}=rw(),[i,o]=y.useState(void 0),l=$,c=y.useCallback(async()=>{const{data:p,error:v}=await l.auth.getUser();if(v)throw v;const x=p.user;if(!x)return;const{data:b,error:w}=await l.rpc("get_user_organisation_id",{_user_id:x.id});if(w)throw w;return b},[l]);y.useEffect(()=>{(async()=>{const p=await c();o(p)})()},[c]);const{activeEmployees:u}=xa(i,{skipFallback:!0}),d=y.useMemo(()=>u.map(p=>({id:p.id,firstName:p.first_name,lastName:p.last_name,email:p.email,position:p.position||"",department:p.department||""})),[u]),f=as({resolver:Oi(Tfe),defaultValues:{employee_id:"",reviewer_id:"",review_type:"performance"}}),h=f.watch("employee_id"),m=f.watch("reviewer_id"),g=async p=>{const v=d.find(b=>b.id===p.employee_id),x=d.find(b=>b.id===p.reviewer_id);if(!(!v||!x)){n(!0);try{await a({employee_name:`${v.firstName} ${v.lastName}`,employee_email:v.email,employee_position:v.position||null,employee_department:v.department||null,reviewer_name:`${x.firstName} ${x.lastName}`,reviewer_email:x.email,review_type:p.review_type,review_period_start:de(p.review_period_start,"yyyy-MM-dd"),review_period_end:de(p.review_period_end,"yyyy-MM-dd"),status:"draft",overall_rating:null,overall_feedback:null,strengths:null,areas_for_improvement:null,development_plan:null,employee_comments:null,completed_at:null}),f.reset(),t(!1)}finally{n(!1)}}};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Create Performance Review"}),s.jsx(Ot,{children:"Set up a new performance review for an employee with goals, competency ratings, and 360 feedback."})]}),s.jsx(lc,{...f,children:s.jsxs("form",{onSubmit:f.handleSubmit(g),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Employee Details"}),s.jsx(pt,{control:f.control,name:"employee_id",render:({field:p})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Select Employee"}),s.jsxs(Ie,{onValueChange:p.onChange,value:p.value,children:[s.jsx(ht,{children:s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select an employee to review"})})}),s.jsx(Me,{className:"bg-popover",children:d.filter(v=>v.id!==m).map(v=>s.jsxs(Y,{value:v.id,children:[v.firstName," ",v.lastName," - ",v.position]},v.id))})]}),s.jsx(_t,{})]})}),h&&s.jsx("div",{className:"text-sm text-muted-foreground bg-muted/50 p-3 rounded-md",children:(()=>{const p=d.find(v=>v.id===h);return p?s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",p.email]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Position:"})," ",p.position]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Department:"})," ",p.department]})]}):null})()})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Reviewer Details"}),s.jsx(pt,{control:f.control,name:"reviewer_id",render:({field:p})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Select Reviewer"}),s.jsxs(Ie,{onValueChange:p.onChange,value:p.value,children:[s.jsx(ht,{children:s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select a reviewer"})})}),s.jsx(Me,{className:"bg-popover",children:d.filter(v=>v.id!==h).map(v=>s.jsxs(Y,{value:v.id,children:[v.firstName," ",v.lastName," - ",v.position]},v.id))})]}),s.jsx(_t,{})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Review Settings"}),s.jsx(pt,{control:f.control,name:"review_type",render:({field:p})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Review Type"}),s.jsxs(Ie,{onValueChange:p.onChange,defaultValue:p.value,children:[s.jsx(ht,{children:s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select review type"})})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"performance",children:"Performance Review"}),s.jsx(Y,{value:"annual",children:"Annual Review"}),s.jsx(Y,{value:"probation",children:"Probation Review"})]})]}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(pt,{control:f.control,name:"review_period_start",render:({field:p})=>s.jsxs(ft,{className:"flex flex-col",children:[s.jsx(vt,{children:"Period Start"}),s.jsxs(Di,{children:[s.jsx(Ri,{asChild:!0,children:s.jsx(ht,{children:s.jsxs(I,{variant:"outline",className:ae("w-full pl-3 text-left font-normal",!p.value&&"text-muted-foreground"),children:[p.value?de(p.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(Vt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(ei,{className:"w-auto p-0",align:"start",children:s.jsx(ri,{mode:"single",selected:p.value,onSelect:p.onChange,initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:f.control,name:"review_period_end",render:({field:p})=>s.jsxs(ft,{className:"flex flex-col",children:[s.jsx(vt,{children:"Period End"}),s.jsxs(Di,{children:[s.jsx(Ri,{asChild:!0,children:s.jsx(ht,{children:s.jsxs(I,{variant:"outline",className:ae("w-full pl-3 text-left font-normal",!p.value&&"text-muted-foreground"),children:[p.value?de(p.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(Vt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(ei,{className:"w-auto p-0",align:"start",children:s.jsx(ri,{mode:"single",selected:p.value,onSelect:p.onChange,initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),s.jsx(_t,{})]})})]})]}),s.jsxs(ar,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:r,children:[r&&s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Review"]})]})]})})]})})}const Rfe=ks({responder_name:Je().min(1,"Name is required").max(100),responder_email:Je().email("Invalid email address"),feedback_type:Vu(["self","manager","peer","direct_report"]),relationship_to_employee:Je().max(100).optional(),is_anonymous:Lx().default(!1)});function Mfe({open:e,onOpenChange:t,reviewId:r}){const[n,a]=y.useState(!1),{requestFeedback:i}=G8(r),o=as({resolver:Oi(Rfe),defaultValues:{responder_name:"",responder_email:"",feedback_type:"peer",relationship_to_employee:"",is_anonymous:!1}}),l=async c=>{a(!0);try{await i({review_id:r,responder_name:c.responder_name,responder_email:c.responder_email,feedback_type:c.feedback_type,relationship_to_employee:c.relationship_to_employee||null,is_anonymous:c.is_anonymous,overall_rating:null,strengths:null,areas_for_improvement:null,additional_comments:null,submitted_at:null,status:"pending"}),o.reset(),t(!1)}finally{a(!1)}};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-[450px]",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Request 360 Feedback"}),s.jsx(Ot,{children:"Invite someone to provide feedback on the employee's performance."})]}),s.jsx(lc,{...o,children:s.jsxs("form",{onSubmit:o.handleSubmit(l),className:"space-y-4",children:[s.jsx(pt,{control:o.control,name:"responder_name",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Responder Name"}),s.jsx(ht,{children:s.jsx(ne,{placeholder:"John Smith",...c})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"responder_email",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Responder Email"}),s.jsx(ht,{children:s.jsx(ne,{placeholder:"john@example.com",type:"email",...c})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"feedback_type",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Feedback Type"}),s.jsxs(Ie,{onValueChange:c.onChange,defaultValue:c.value,children:[s.jsx(ht,{children:s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select type"})})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"self",children:"Self Assessment"}),s.jsx(Y,{value:"manager",children:"Manager"}),s.jsx(Y,{value:"peer",children:"Peer"}),s.jsx(Y,{value:"direct_report",children:"Direct Report"})]})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"relationship_to_employee",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Relationship (Optional)"}),s.jsx(ht,{children:s.jsx(ne,{placeholder:"e.g., Team Lead, Colleague",...c})}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("span",{className:"text-sm font-medium",children:"Anonymous Feedback"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Hide responder identity from the employee"})]}),s.jsx(pt,{control:o.control,name:"is_anonymous",render:({field:c})=>s.jsx(ft,{children:s.jsx(ht,{children:s.jsx(kn,{checked:c.value,onCheckedChange:c.onChange})})})})]}),s.jsxs(ar,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:n,children:[n&&s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Request"]})]})]})})]})})}const VT={draft:{label:"Draft",color:"bg-muted text-muted-foreground"},in_progress:{label:"In Progress",color:"bg-primary/10 text-primary"},pending_approval:{label:"Pending Approval",color:"bg-warning/10 text-warning"},completed:{label:"Completed",color:"bg-success/10 text-success"}};function $fe({open:e,onOpenChange:t,review:r}){const[n,a]=y.useState("overview"),[i,o]=y.useState(!1),[l,c]=y.useState(!1),[u,d]=y.useState(r.overall_feedback||""),[f,h]=y.useState(r.strengths||""),[m,g]=y.useState(r.areas_for_improvement||""),[p,v]=y.useState(r.development_plan||""),{updateReview:x}=rw(),{competencies:b}=K8(),{feedback:w}=G8(r.id),_=async()=>{c(!0);try{await x(r.id,{overall_feedback:u||null,strengths:f||null,areas_for_improvement:m||null,development_plan:p||null})}finally{c(!1)}},j=w.filter(S=>(S.status??"pending")==="pending").length,N=w.filter(S=>(S.status??"pending")==="submitted").length;return s.jsxs(s.Fragment,{children:[s.jsx(Do,{open:e,onOpenChange:t,children:s.jsxs(Li,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[s.jsx(Fi,{children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Or,{className:"h-12 w-12",children:s.jsx(Tr,{children:r.employee_name.split(" ").map(S=>S[0]).join("")})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(Ui,{className:"flex items-center gap-2",children:[r.employee_name,s.jsx(fe,{className:VT[r.status].color,children:VT[r.status].label})]}),s.jsxs(Ro,{children:[r.employee_position||"No position","  ",r.employee_department||"No department"]})]})]})}),s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsx(G,{children:s.jsx(X,{className:"pt-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Review Period"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"}),de(new Date(r.review_period_start),"MMM yyyy")," - ",de(new Date(r.review_period_end),"MMM yyyy")]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Reviewer"}),s.jsx("p",{className:"mt-1 font-medium",children:r.reviewer_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Type"}),s.jsxs("p",{className:"mt-1 font-medium capitalize",children:[r.review_type," Review"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Overall Rating"}),s.jsx("div",{className:"flex items-center gap-1 mt-1",children:r.overall_rating?s.jsxs(s.Fragment,{children:[s.jsx(Ha,{className:"h-4 w-4 fill-amber-400 text-amber-400"}),s.jsxs("span",{className:"font-medium",children:[r.overall_rating.toFixed(1)," / 5.0"]})]}):s.jsx("span",{className:"text-muted-foreground",children:"Not rated"})})]})]})})}),s.jsxs(bn,{value:n,onValueChange:a,children:[s.jsxs(fn,{className:"grid w-full grid-cols-3",children:[s.jsxs(Ve,{value:"overview",className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4"}),"Overview"]}),s.jsxs(Ve,{value:"competencies",className:"flex items-center gap-2",children:[s.jsx(Ks,{className:"h-4 w-4"}),"Competencies"]}),s.jsxs(Ve,{value:"feedback",className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4"}),"360 Feedback",j>0&&s.jsx(fe,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:j})]})]}),s.jsx(rt,{value:"overview",className:"mt-4 space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Overall Feedback"}),s.jsx(wt,{placeholder:"Provide overall feedback for this review period...",value:u,onChange:S=>d(S.target.value),className:"min-h-[100px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Strengths"}),s.jsx(wt,{placeholder:"Key strengths demonstrated...",value:f,onChange:S=>h(S.target.value),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Areas for Improvement"}),s.jsx(wt,{placeholder:"Areas that need improvement...",value:m,onChange:S=>g(S.target.value),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Development Plan"}),s.jsx(wt,{placeholder:"Outline the development plan for the next period...",value:p,onChange:S=>v(S.target.value),className:"min-h-[80px]"})]}),s.jsxs(I,{onClick:_,disabled:l,className:"w-full",children:[l&&s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Feedback"]})]})}),s.jsx(rt,{value:"competencies",className:"mt-4 space-y-4",children:s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-base",children:"Competency Framework"}),s.jsx(Le,{children:"Rate the employee on each competency area"})]}),s.jsx(X,{className:"space-y-4",children:b.map(S=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:S.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:S.description})]}),s.jsx(fe,{variant:"outline",children:S.category})]}),s.jsx("div",{className:"flex items-center gap-2",children:[1,2,3,4,5].map(E=>s.jsx(I,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:E},E))}),s.jsx(Et,{})]},S.id))})]})}),s.jsx(rt,{value:"feedback",className:"mt-4 space-y-4",children:s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ge,{className:"text-base",children:"360 Feedback Requests"}),s.jsxs(Le,{children:[N," of ",w.length," responses received"]})]}),s.jsxs(I,{size:"sm",onClick:()=>o(!0),className:"gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"Request Feedback"]})]}),s.jsx(X,{children:w.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ar,{className:"h-10 w-10 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No feedback requests yet"}),s.jsx("p",{className:"text-xs mt-1",children:"Request 360 feedback from peers, managers, or direct reports"})]}):s.jsx("div",{className:"space-y-3",children:w.map(S=>{const E=S.status??"pending";return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Or,{className:"h-8 w-8",children:s.jsx(Tr,{className:"text-xs",children:S.responder_name.split(" ").map(C=>C[0]).join("")})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:S.responder_name}),s.jsxs("p",{className:"text-xs text-muted-foreground capitalize",children:[S.feedback_type.replace("_"," "),"  ",S.relationship_to_employee||"N/A"]})]})]}),s.jsx(fe,{variant:E==="submitted"?"default":"secondary",children:E==="submitted"?"Received":"Pending"})]},S.id)})})})]})})]})]})]})}),s.jsx(Mfe,{open:i,onOpenChange:o,reviewId:r.id})]})}function Ife(){const[e,t]=y.useState(null),[r,n]=y.useState(!1),{toast:a}=lr(),i=y.useCallback(async l=>{try{n(!0);const{data:c,error:u}=await $.from("performance_reviews").select("*").eq("employee_email",l).order("review_period_end",{ascending:!1});if(u)throw u;const d=(c==null?void 0:c.map(C=>C.id))||[],[f,h,m,g]=await Promise.all([d.length>0?$.from("review_goals").select("*").in("review_id",d):Promise.resolve({data:[],error:null}),d.length>0?$.from("competency_ratings").select("*").in("review_id",d):Promise.resolve({data:[],error:null}),d.length>0?$.from("review_feedback").select("*").in("review_id",d).eq("status","submitted"):Promise.resolve({data:[],error:null}),$.from("competencies").select("*").eq("is_active",!0)]);if(f.error)throw f.error;if(h.error)throw h.error;if(m.error)throw m.error;if(g.error)throw g.error;const p=f.data||[],v=h.data||[],x=(m.data||[]).map(C=>({...C,status:C.status??"pending",is_anonymous:C.is_anonymous??!1})),b=g.data||[],w=v.map(C=>({...C,competency:b.find(P=>P.id===C.competency_id)})).filter(C=>C.competency),_=(c==null?void 0:c.filter(C=>C.overall_rating))||[],j=_.length>0?_.reduce((C,P)=>C+(P.overall_rating||0),0)/_.length:0,N=p.filter(C=>C.status==="completed").length,S=w.filter(C=>C.rating),E=S.length>0?S.reduce((C,P)=>C+(P.rating||0),0)/S.length:0;return t({reviews:c||[],goals:p,competencyRatings:w,feedback:x,summary:{totalReviews:(c==null?void 0:c.length)||0,averageRating:Number(j.toFixed(2)),completedGoals:N,totalGoals:p.length,averageCompetencyScore:Number(E.toFixed(2))}}),!0}catch(c){return a({title:"Error fetching performance report",description:c.message,variant:"destructive"}),!1}finally{n(!1)}},[a]),o=y.useCallback(()=>{t(null)},[]);return{data:e,loading:r,fetchEmployeeReport:i,clearData:o}}const Lfe={completed:"bg-success/10 text-success",in_progress:"bg-info/10 text-info",not_started:"bg-muted text-muted-foreground",deferred:"bg-warning/10 text-warning"},Ffe={draft:"bg-muted text-muted-foreground",in_progress:"bg-info/10 text-info",pending_approval:"bg-warning/10 text-warning",completed:"bg-success/10 text-success"};function qT({rating:e}){return s.jsxs("div",{className:"flex items-center gap-0.5",children:[[1,2,3,4,5].map(t=>s.jsx(Ha,{className:`h-4 w-4 ${t<=e?"fill-warning text-warning":"text-muted"}`},t)),s.jsx("span",{className:"ml-2 text-sm font-medium",children:e.toFixed(1)})]})}function Ufe({open:e,onOpenChange:t,employeeName:r,employeeEmail:n}){const{data:a,loading:i,fetchEmployeeReport:o,clearData:l}=Ife(),c=y.useRef(null);y.useEffect(()=>{e&&n?o(n):l()},[e,n,o,l]);const u=()=>{window.print()},d=(a==null?void 0:a.competencyRatings.reduce((f,h)=>{const m=h.competency.category||"General";return f[m]||(f[m]=[]),f[m].push(h),f},{}))||{};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto print:max-w-none print:max-h-none print:overflow-visible",children:[s.jsxs(Pt,{className:"print:hidden",children:[s.jsx(At,{children:"Performance Report"}),s.jsxs(Ot,{children:["Comprehensive performance summary for ",r]})]}),s.jsx("div",{className:"flex gap-2 print:hidden",children:s.jsxs(I,{onClick:u,className:"flex-1",children:[s.jsx(hG,{className:"h-4 w-4 mr-2"}),"Print Report"]})}),i?s.jsxs("div",{className:"space-y-4",children:[s.jsx($t,{className:"h-32"}),s.jsx($t,{className:"h-48"}),s.jsx($t,{className:"h-48"})]}):a?s.jsxs("div",{ref:c,className:"print-report space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 rounded-lg p-6 print:bg-none print:border print:border-border",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:r}),s.jsx("p",{className:"text-muted-foreground",children:n}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Report generated: ",de(new Date,"dd MMMM yyyy")]})]}),s.jsxs("div",{className:"text-right hidden print:block",children:[s.jsx("p",{className:"font-semibold",children:"Social Plus Support Work"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Performance Report"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-6",children:[s.jsxs("div",{className:"bg-background rounded-lg p-3 border",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Ks,{className:"h-4 w-4"}),"Total Reviews"]}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:a.summary.totalReviews})]}),s.jsxs("div",{className:"bg-background rounded-lg p-3 border",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Ha,{className:"h-4 w-4"}),"Avg Rating"]}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:a.summary.averageRating>0?a.summary.averageRating.toFixed(1):""})]}),s.jsxs("div",{className:"bg-background rounded-lg p-3 border",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(jt,{className:"h-4 w-4"}),"Goals Completed"]}),s.jsxs("p",{className:"text-2xl font-bold mt-1",children:[a.summary.completedGoals,"/",a.summary.totalGoals]})]}),s.jsxs("div",{className:"bg-background rounded-lg p-3 border",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Gs,{className:"h-4 w-4"}),"Competency Score"]}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:a.summary.averageCompetencyScore>0?a.summary.averageCompetencyScore.toFixed(1):""})]})]})]}),s.jsxs("section",{className:"print:break-inside-avoid",children:[s.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[s.jsx(Ks,{className:"h-5 w-5 text-primary"}),"Performance Reviews"]}),a.reviews.length>0?s.jsx("div",{className:"space-y-4",children:a.reviews.map(f=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fe,{variant:"outline",className:"capitalize",children:f.review_type}),s.jsx(fe,{className:Ffe[f.status],children:f.status.replace("_"," ")})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Period: ",de(new Date(f.review_period_start),"MMM yyyy")," -"," ",de(new Date(f.review_period_end),"MMM yyyy")]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Reviewer: ",f.reviewer_name]})]}),f.overall_rating&&s.jsx(qT,{rating:f.overall_rating})]}),(f.strengths||f.areas_for_improvement)&&s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 mt-4",children:[f.strengths&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-success mb-1",children:"Strengths"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.strengths})]}),f.areas_for_improvement&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-warning mb-1",children:"Areas for Improvement"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.areas_for_improvement})]})]}),f.overall_feedback&&s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Overall Feedback"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.overall_feedback})]})]},f.id))}):s.jsx("p",{className:"text-muted-foreground text-sm",children:"No performance reviews on record."})]}),s.jsx(Et,{className:"print:hidden"}),s.jsxs("section",{className:"print:break-inside-avoid",children:[s.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[s.jsx(Gs,{className:"h-5 w-5 text-primary"}),"Competency Scores"]}),Object.keys(d).length>0?s.jsx("div",{className:"space-y-6",children:Object.entries(d).map(([f,h])=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:f}),s.jsx("div",{className:"space-y-3",children:h.map(m=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("p",{className:"text-sm font-medium truncate",children:m.competency.name})}),s.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[s.jsx("div",{className:"w-24 bg-muted rounded-full h-2",children:s.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${(m.rating||0)/5*100}%`}})}),s.jsx("span",{className:"text-sm font-medium w-8 text-right",children:m.rating?m.rating.toFixed(1):""})]})]},m.id))})]},f))}):s.jsx("p",{className:"text-muted-foreground text-sm",children:"No competency ratings recorded."})]}),s.jsx(Et,{className:"print:hidden"}),s.jsxs("section",{className:"print:break-inside-avoid",children:[s.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[s.jsx(jt,{className:"h-5 w-5 text-primary"}),"Goals & Objectives"]}),a.goals.length>0?s.jsx("div",{className:"space-y-3",children:a.goals.map(f=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:f.title}),s.jsx(fe,{className:Lfe[f.status||"not_started"],children:(f.status||"not_started").replace("_"," ")})]}),f.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.description}),f.target_date&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-2 flex items-center gap-1",children:[s.jsx(xt,{className:"h-3 w-3"}),"Target: ",de(new Date(f.target_date),"dd MMM yyyy")]})]}),s.jsx("div",{className:"text-right shrink-0",children:s.jsxs("p",{className:"text-sm font-medium",children:[f.progress_percentage||0,"%"]})})]}),s.jsx(pa,{value:f.progress_percentage||0,className:"mt-3 h-2"})]},f.id))}):s.jsx("p",{className:"text-muted-foreground text-sm",children:"No goals assigned."})]}),a.feedback.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(Et,{className:"print:hidden"}),s.jsxs("section",{className:"print:break-inside-avoid",children:[s.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[s.jsx(Ar,{className:"h-5 w-5 text-primary"}),"360 Feedback Summary"]}),s.jsx("div",{className:"space-y-3",children:a.feedback.map(f=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fe,{variant:"outline",className:"capitalize",children:f.feedback_type.replace("_"," ")}),!f.is_anonymous&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:["from ",f.responder_name]})]}),f.submitted_at&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Submitted: ",de(new Date(f.submitted_at),"dd MMM yyyy")]})]}),f.overall_rating&&s.jsx(qT,{rating:f.overall_rating})]}),(f.strengths||f.areas_for_improvement)&&s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 mt-3",children:[f.strengths&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-success mb-1",children:"Strengths"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.strengths})]}),f.areas_for_improvement&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-warning mb-1",children:"Areas for Improvement"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.areas_for_improvement})]})]}),f.additional_comments&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Additional Comments"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.additional_comments})]})]},f.id))})]})]}),s.jsxs("div",{className:"hidden print:block mt-8 pt-4 border-t text-center text-sm text-muted-foreground",children:[s.jsx("p",{children:"This report was generated from Social Plus Support Work HRMS"}),s.jsxs("p",{children:["Generated on ",de(new Date,"dd MMMM yyyy")," at ",de(new Date,"HH:mm")]})]})]}):s.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No performance data available for this employee."})]})})}const WT={draft:{label:"Draft",variant:"secondary"},in_progress:{label:"In Progress",variant:"default"},pending_approval:{label:"Pending Approval",variant:"outline"},completed:{label:"Completed",variant:"default"}},Bfe={performance:"Performance",annual:"Annual",probation:"Probation"};function zfe({searchQuery:e}){const{reviews:t,loading:r,deleteReview:n,updateReview:a}=rw(),[i,o]=y.useState(!1),[l,c]=y.useState(null),[u,d]=y.useState(!1),[f,h]=y.useState(!1),[m,g]=y.useState(null),p=t.filter(b=>b.employee_name.toLowerCase().includes(e.toLowerCase())||b.reviewer_name.toLowerCase().includes(e.toLowerCase())),v=b=>{c(b),d(!0)},x=b=>{g({name:b.employee_name,email:b.employee_email}),h(!0)};return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(s.Fragment,{children:[s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ge,{className:"text-lg",children:"Performance Reviews"}),s.jsx(Le,{children:"Create and manage performance, annual, and probation reviews with 360 feedback"})]}),s.jsxs(I,{onClick:()=>o(!0),className:"gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"New Review"]})]}),s.jsx(X,{children:p.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(mu,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No performance reviews found"}),s.jsx("p",{className:"text-sm mt-1",children:"Create a new review to get started"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Employee"}),s.jsx(oe,{children:"Type"}),s.jsx(oe,{children:"Period"}),s.jsx(oe,{children:"Reviewer"}),s.jsx(oe,{children:"Rating"}),s.jsx(oe,{children:"Status"}),s.jsx(oe,{className:"text-right",children:"Actions"})]})}),s.jsx(pr,{children:p.map(b=>s.jsxs(ze,{children:[s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Or,{className:"h-8 w-8",children:s.jsx(Tr,{className:"text-xs",children:b.employee_name.split(" ").map(w=>w[0]).join("")})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:b.employee_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:b.employee_position||"No position"})]})]})}),s.jsx(te,{children:s.jsx(fe,{variant:"outline",children:Bfe[b.review_type]})}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{children:[de(new Date(b.review_period_start),"MMM yyyy")," - ",de(new Date(b.review_period_end),"MMM yyyy")]})]})}),s.jsx(te,{children:s.jsx("span",{className:"text-sm",children:b.reviewer_name})}),s.jsx(te,{children:b.overall_rating?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ha,{className:"h-4 w-4 fill-amber-400 text-amber-400"}),s.jsx("span",{className:"font-medium",children:b.overall_rating.toFixed(1)})]}):s.jsx("span",{className:"text-muted-foreground text-sm",children:""})}),s.jsx(te,{children:s.jsx(fe,{variant:WT[b.status].variant,className:b.status==="completed"?"bg-success/10 text-success":"",children:WT[b.status].label})}),s.jsx(te,{className:"text-right",children:s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:s.jsx(si,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",className:"bg-popover",children:[s.jsxs(tt,{onClick:()=>v(b),children:[s.jsx($i,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.jsxs(tt,{onClick:()=>x(b),children:[s.jsx(gt,{className:"h-4 w-4 mr-2"}),"View Full Report"]}),s.jsxs(tt,{onClick:()=>v(b),children:[s.jsx(Ar,{className:"h-4 w-4 mr-2"}),"Request 360 Feedback"]}),s.jsx(ca,{}),b.status==="draft"&&s.jsx(tt,{onClick:()=>a(b.id,{status:"in_progress"}),children:"Start Review"}),b.status==="in_progress"&&s.jsx(tt,{onClick:()=>a(b.id,{status:"pending_approval"}),children:"Submit for Approval"}),b.status==="pending_approval"&&s.jsx(tt,{onClick:()=>a(b.id,{status:"completed",completed_at:new Date().toISOString()}),children:"Mark Complete"}),s.jsx(ca,{}),s.jsx(tt,{onClick:()=>n(b.id),className:"text-destructive",children:"Delete"})]})]})})]},b.id))})]})})]}),s.jsx(Dfe,{open:i,onOpenChange:o}),l&&s.jsx($fe,{open:u,onOpenChange:d,review:l}),m&&s.jsx(Ufe,{open:f,onOpenChange:h,employeeName:m.name,employeeEmail:m.email})]})}const Vfe=ks({name:Je().min(1,"Name is required").max(100),description:Je().max(500).optional(),category:Je().min(1,"Category is required").max(50),display_order:IU.number().min(0).default(0)}),qfe=["Core Skills","Compliance","Professional","Growth","Leadership"];function Wfe({searchQuery:e}){const t=$,[r,n]=y.useState([]),[a,i]=y.useState(!0),[o,l]=y.useState(!1),[c,u]=y.useState(null),[d,f]=y.useState(!1),h=y.useCallback(async()=>{const{data:j,error:N}=await t.auth.getUser();if(N)throw N;const S=j.user;if(!S)throw new Error("Not authenticated");const{data:E,error:C}=await t.rpc("get_user_organisation_id",{_user_id:S.id});if(C)throw C;if(!E)throw new Error("Missing organisation_id for user");return E},[]),m=y.useCallback(async()=>{try{i(!0);const j=await h(),{data:N,error:S}=await t.from("competencies").select("*").eq("is_active",!0).eq("organisation_id",j).order("display_order",{ascending:!0});if(S)throw S;n(N||[])}finally{i(!1)}},[h]);y.useEffect(()=>{m()},[m]);const g=as({resolver:Oi(Vfe),defaultValues:{name:"",description:"",category:"Core Skills",display_order:0}}),p=r.filter(j=>{var N;return j.name.toLowerCase().includes(e.toLowerCase())||(((N=j.category)==null?void 0:N.toLowerCase())||"").includes(e.toLowerCase())}),v=j=>{u(j),g.reset({name:j.name,description:j.description||"",category:j.category||"Core Skills",display_order:j.display_order??0}),l(!0)},x=()=>{u(null),g.reset({name:"",description:"",category:"Core Skills",display_order:r.length+1}),l(!0)},b=async j=>{f(!0);try{const N=await h();if(c){const{data:S,error:E}=await t.from("competencies").update({name:j.name,description:j.description||null,category:j.category,display_order:j.display_order}).eq("id",c.id).select().single();if(E)throw E;n(C=>C.map(P=>P.id===c.id?S:P))}else{const{data:S,error:E}=await t.from("competencies").insert({organisation_id:N,name:j.name,description:j.description||null,category:j.category,display_order:j.display_order,is_active:!0}).select().single();if(E)throw E;n(C=>[...C,S].sort((P,A)=>(P.display_order||0)-(A.display_order||0)))}l(!1),g.reset()}finally{f(!1)}},w=p.reduce((j,N)=>{const S=N.category||"Other";return j[S]||(j[S]=[]),j[S].push(N),j},{}),_=async j=>{const{error:N}=await t.from("competencies").update({is_active:!1}).eq("id",j);N||n(S=>S.filter(E=>E.id!==j))};return a?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(s.Fragment,{children:[s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ge,{className:"text-lg",children:"Competency Framework"}),s.jsx(Le,{children:"Define the competencies used to evaluate employee performance"})]}),s.jsxs(I,{onClick:x,className:"gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"Add Competency"]})]}),s.jsx(X,{children:p.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Ks,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No competencies defined"}),s.jsx("p",{className:"text-sm mt-1",children:"Add competencies to use in performance reviews"})]}):s.jsx("div",{className:"space-y-6",children:Object.entries(w).map(([j,N])=>s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:j}),s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{className:"w-12",children:"#"}),s.jsx(oe,{children:"Competency"}),s.jsx(oe,{children:"Description"}),s.jsx(oe,{className:"text-right",children:"Actions"})]})}),s.jsx(pr,{children:N.map(S=>s.jsxs(ze,{children:[s.jsx(te,{className:"text-muted-foreground",children:S.display_order}),s.jsx(te,{className:"font-medium",children:S.name}),s.jsx(te,{className:"text-sm text-muted-foreground max-w-md truncate",children:S.description||""}),s.jsx(te,{className:"text-right",children:s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:s.jsx(si,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",className:"bg-popover",children:[s.jsxs(tt,{onClick:()=>v(S),children:[s.jsx(rl,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(tt,{onClick:()=>_(S.id),className:"text-destructive",children:[s.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})})]},S.id))})]})]},j))})})]}),s.jsx(Rt,{open:o,onOpenChange:l,children:s.jsxs(kt,{className:"sm:max-w-[450px]",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:c?"Edit Competency":"Add Competency"}),s.jsx(Ot,{children:c?"Update the competency details":"Add a new competency to the framework"})]}),s.jsx(lc,{...g,children:s.jsxs("form",{onSubmit:g.handleSubmit(b),className:"space-y-4",children:[s.jsx(pt,{control:g.control,name:"name",render:({field:j})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Name"}),s.jsx(ht,{children:s.jsx(ne,{placeholder:"e.g., Communication",...j})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:g.control,name:"description",render:({field:j})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Description"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Describe what this competency measures...",className:"resize-none",...j})}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(pt,{control:g.control,name:"category",render:({field:j})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Category"}),s.jsxs(Ie,{onValueChange:j.onChange,value:j.value,children:[s.jsx(ht,{children:s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select category"})})}),s.jsx(Me,{className:"bg-popover",children:qfe.map(N=>s.jsx(Y,{value:N,children:N},N))})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:g.control,name:"display_order",render:({field:j})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Display Order"}),s.jsx(ht,{children:s.jsx(ne,{type:"number",min:"0",...j})}),s.jsx(_t,{})]})})]}),s.jsxs(ar,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:d,children:[d&&s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),c?"Update":"Add"," Competency"]})]})]})})]})})]})}function Hfe(){const[e,t]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState([]),[c,u]=y.useState([]),[d,f]=y.useState(!0),{toast:h}=lr(),m=y.useCallback(async()=>{try{const{data:v,error:x}=await $.from("competencies").select("id, name, category").eq("is_active",!0);if(x)throw x;const{data:b,error:w}=await $.from("competency_ratings").select("competency_id, rating").not("rating","is",null);if(w)throw w;const _=new Map;b==null||b.forEach(N=>{const S=_.get(N.competency_id)||{sum:0,count:0};S.sum+=N.rating||0,S.count+=1,_.set(N.competency_id,S)});const j=(v||[]).map(N=>{const S=_.get(N.id)||{sum:0,count:0};return{competency_id:N.id,competency_name:N.name,category:N.category,average_rating:S.count>0?Number((S.sum/S.count).toFixed(2)):0,total_ratings:S.count}});t(j)}catch(v){h({title:"Error fetching competency scores",description:v.message,variant:"destructive"})}},[h]),g=y.useCallback(async()=>{try{const{data:v,error:x}=await $.from("performance_reviews").select("status, review_type, overall_rating, employee_department, created_at, completed_at");if(x)throw x;const b=new Map,w=new Map,_=new Map;v==null||v.forEach(S=>{if(b.set(S.status,(b.get(S.status)||0)+1),w.set(S.review_type,(w.get(S.review_type)||0)+1),S.employee_department&&S.overall_rating){const E=_.get(S.employee_department)||{sum:0,count:0};E.sum+=S.overall_rating,E.count+=1,_.set(S.employee_department,E)}}),n(Array.from(b.entries()).map(([S,E])=>({status:S,count:E}))),i(Array.from(w.entries()).map(([S,E])=>({review_type:S,count:E}))),u(Array.from(_.entries()).map(([S,E])=>({department:S,average_rating:Number((E.sum/E.count).toFixed(2)),review_count:E.count})));const j=new Date,N=[];for(let S=5;S>=0;S--){const E=new Date(j.getFullYear(),j.getMonth()-S,1),C=E.toLocaleDateString("en-AU",{month:"short",year:"2-digit"}),P=(v==null?void 0:v.filter(A=>{const k=new Date(A.created_at);return k.getMonth()===E.getMonth()&&k.getFullYear()===E.getFullYear()}))||[];N.push({month:C,completed:P.filter(A=>A.status==="completed").length,in_progress:P.filter(A=>A.status==="in_progress").length,pending:P.filter(A=>A.status==="pending_approval"||A.status==="draft").length})}l(N)}catch(v){h({title:"Error fetching review statistics",description:v.message,variant:"destructive"})}},[h]),p=y.useCallback(async()=>{f(!0),await Promise.all([m(),g()]),f(!1)},[m,g]);return y.useEffect(()=>{p()},[p]),{competencyScores:e,reviewStatusCounts:r,reviewTypeCounts:a,monthlyTrends:o,departmentPerformance:c,loading:d,refetch:p}}var Kfe=Array.isArray,Ps=Kfe,Gfe=typeof _v=="object"&&_v&&_v.Object===Object&&_v,tz=Gfe,Yfe=tz,Xfe=typeof self=="object"&&self&&self.Object===Object&&self,Qfe=Yfe||Xfe||Function("return this")(),zi=Qfe,Zfe=zi,Jfe=Zfe.Symbol,ov=Jfe,HT=ov,rz=Object.prototype,ehe=rz.hasOwnProperty,the=rz.toString,hm=HT?HT.toStringTag:void 0;function rhe(e){var t=ehe.call(e,hm),r=e[hm];try{e[hm]=void 0;var n=!0}catch{}var a=the.call(e);return n&&(t?e[hm]=r:delete e[hm]),a}var nhe=rhe,she=Object.prototype,ahe=she.toString;function ihe(e){return ahe.call(e)}var ohe=ihe,KT=ov,lhe=nhe,che=ohe,uhe="[object Null]",dhe="[object Undefined]",GT=KT?KT.toStringTag:void 0;function fhe(e){return e==null?e===void 0?dhe:uhe:GT&&GT in Object(e)?lhe(e):che(e)}var $o=fhe;function hhe(e){return e!=null&&typeof e=="object"}var Io=hhe,mhe=$o,phe=Io,ghe="[object Symbol]";function vhe(e){return typeof e=="symbol"||phe(e)&&mhe(e)==ghe}var Sh=vhe,yhe=Ps,xhe=Sh,bhe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,whe=/^\w*$/;function jhe(e,t){if(yhe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||xhe(e)?!0:whe.test(e)||!bhe.test(e)||t!=null&&e in Object(t)}var zk=jhe;function _he(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var cc=_he;const Ch=Gt(cc);var Nhe=$o,She=cc,Che="[object AsyncFunction]",Ehe="[object Function]",khe="[object GeneratorFunction]",Phe="[object Proxy]";function Ahe(e){if(!She(e))return!1;var t=Nhe(e);return t==Ehe||t==khe||t==Che||t==Phe}var Vk=Ahe;const Xe=Gt(Vk);var Ohe=zi,The=Ohe["__core-js_shared__"],Dhe=The,x_=Dhe,YT=function(){var e=/[^.]+$/.exec(x_&&x_.keys&&x_.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Rhe(e){return!!YT&&YT in e}var Mhe=Rhe,$he=Function.prototype,Ihe=$he.toString;function Lhe(e){if(e!=null){try{return Ihe.call(e)}catch{}try{return e+""}catch{}}return""}var nz=Lhe,Fhe=Vk,Uhe=Mhe,Bhe=cc,zhe=nz,Vhe=/[\\^$.*+?()[\]{}|]/g,qhe=/^\[object .+?Constructor\]$/,Whe=Function.prototype,Hhe=Object.prototype,Khe=Whe.toString,Ghe=Hhe.hasOwnProperty,Yhe=RegExp("^"+Khe.call(Ghe).replace(Vhe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Xhe(e){if(!Bhe(e)||Uhe(e))return!1;var t=Fhe(e)?Yhe:qhe;return t.test(zhe(e))}var Qhe=Xhe;function Zhe(e,t){return e==null?void 0:e[t]}var Jhe=Zhe,eme=Qhe,tme=Jhe;function rme(e,t){var r=tme(e,t);return eme(r)?r:void 0}var Wu=rme,nme=Wu,sme=nme(Object,"create"),sw=sme,XT=sw;function ame(){this.__data__=XT?XT(null):{},this.size=0}var ime=ame;function ome(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lme=ome,cme=sw,ume="__lodash_hash_undefined__",dme=Object.prototype,fme=dme.hasOwnProperty;function hme(e){var t=this.__data__;if(cme){var r=t[e];return r===ume?void 0:r}return fme.call(t,e)?t[e]:void 0}var mme=hme,pme=sw,gme=Object.prototype,vme=gme.hasOwnProperty;function yme(e){var t=this.__data__;return pme?t[e]!==void 0:vme.call(t,e)}var xme=yme,bme=sw,wme="__lodash_hash_undefined__";function jme(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=bme&&t===void 0?wme:t,this}var _me=jme,Nme=ime,Sme=lme,Cme=mme,Eme=xme,kme=_me;function Eh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Eh.prototype.clear=Nme;Eh.prototype.delete=Sme;Eh.prototype.get=Cme;Eh.prototype.has=Eme;Eh.prototype.set=kme;var Pme=Eh;function Ame(){this.__data__=[],this.size=0}var Ome=Ame;function Tme(e,t){return e===t||e!==e&&t!==t}var qk=Tme,Dme=qk;function Rme(e,t){for(var r=e.length;r--;)if(Dme(e[r][0],t))return r;return-1}var aw=Rme,Mme=aw,$me=Array.prototype,Ime=$me.splice;function Lme(e){var t=this.__data__,r=Mme(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Ime.call(t,r,1),--this.size,!0}var Fme=Lme,Ume=aw;function Bme(e){var t=this.__data__,r=Ume(t,e);return r<0?void 0:t[r][1]}var zme=Bme,Vme=aw;function qme(e){return Vme(this.__data__,e)>-1}var Wme=qme,Hme=aw;function Kme(e,t){var r=this.__data__,n=Hme(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Gme=Kme,Yme=Ome,Xme=Fme,Qme=zme,Zme=Wme,Jme=Gme;function kh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}kh.prototype.clear=Yme;kh.prototype.delete=Xme;kh.prototype.get=Qme;kh.prototype.has=Zme;kh.prototype.set=Jme;var iw=kh,epe=Wu,tpe=zi,rpe=epe(tpe,"Map"),Wk=rpe,QT=Pme,npe=iw,spe=Wk;function ape(){this.size=0,this.__data__={hash:new QT,map:new(spe||npe),string:new QT}}var ipe=ape;function ope(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var lpe=ope,cpe=lpe;function upe(e,t){var r=e.__data__;return cpe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var ow=upe,dpe=ow;function fpe(e){var t=dpe(this,e).delete(e);return this.size-=t?1:0,t}var hpe=fpe,mpe=ow;function ppe(e){return mpe(this,e).get(e)}var gpe=ppe,vpe=ow;function ype(e){return vpe(this,e).has(e)}var xpe=ype,bpe=ow;function wpe(e,t){var r=bpe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var jpe=wpe,_pe=ipe,Npe=hpe,Spe=gpe,Cpe=xpe,Epe=jpe;function Ph(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ph.prototype.clear=_pe;Ph.prototype.delete=Npe;Ph.prototype.get=Spe;Ph.prototype.has=Cpe;Ph.prototype.set=Epe;var Hk=Ph,sz=Hk,kpe="Expected a function";function Kk(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(kpe);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(Kk.Cache||sz),r}Kk.Cache=sz;var az=Kk;const Ppe=Gt(az);var Ape=az,Ope=500;function Tpe(e){var t=Ape(e,function(n){return r.size===Ope&&r.clear(),n}),r=t.cache;return t}var Dpe=Tpe,Rpe=Dpe,Mpe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$pe=/\\(\\)?/g,Ipe=Rpe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Mpe,function(r,n,a,i){t.push(a?i.replace($pe,"$1"):n||r)}),t}),Lpe=Ipe;function Fpe(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Gk=Fpe,ZT=ov,Upe=Gk,Bpe=Ps,zpe=Sh,Vpe=1/0,JT=ZT?ZT.prototype:void 0,eD=JT?JT.toString:void 0;function iz(e){if(typeof e=="string")return e;if(Bpe(e))return Upe(e,iz)+"";if(zpe(e))return eD?eD.call(e):"";var t=e+"";return t=="0"&&1/e==-Vpe?"-0":t}var qpe=iz,Wpe=qpe;function Hpe(e){return e==null?"":Wpe(e)}var oz=Hpe,Kpe=Ps,Gpe=zk,Ype=Lpe,Xpe=oz;function Qpe(e,t){return Kpe(e)?e:Gpe(e,t)?[e]:Ype(Xpe(e))}var lz=Qpe,Zpe=Sh,Jpe=1/0;function ege(e){if(typeof e=="string"||Zpe(e))return e;var t=e+"";return t=="0"&&1/e==-Jpe?"-0":t}var lw=ege,tge=lz,rge=lw;function nge(e,t){t=tge(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[rge(t[r++])];return r&&r==n?e:void 0}var Yk=nge,sge=Yk;function age(e,t,r){var n=e==null?void 0:sge(e,t);return n===void 0?r:n}var cz=age;const Vs=Gt(cz);function ige(e){return e==null}var oge=ige;const it=Gt(oge);var lge=$o,cge=Ps,uge=Io,dge="[object String]";function fge(e){return typeof e=="string"||!cge(e)&&uge(e)&&lge(e)==dge}var hge=fge;const ku=Gt(hge);var uz={exports:{}},tr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xk=Symbol.for("react.element"),Qk=Symbol.for("react.portal"),cw=Symbol.for("react.fragment"),uw=Symbol.for("react.strict_mode"),dw=Symbol.for("react.profiler"),fw=Symbol.for("react.provider"),hw=Symbol.for("react.context"),mge=Symbol.for("react.server_context"),mw=Symbol.for("react.forward_ref"),pw=Symbol.for("react.suspense"),gw=Symbol.for("react.suspense_list"),vw=Symbol.for("react.memo"),yw=Symbol.for("react.lazy"),pge=Symbol.for("react.offscreen"),dz;dz=Symbol.for("react.module.reference");function ja(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Xk:switch(e=e.type,e){case cw:case dw:case uw:case pw:case gw:return e;default:switch(e=e&&e.$$typeof,e){case mge:case hw:case mw:case yw:case vw:case fw:return e;default:return t}}case Qk:return t}}}tr.ContextConsumer=hw;tr.ContextProvider=fw;tr.Element=Xk;tr.ForwardRef=mw;tr.Fragment=cw;tr.Lazy=yw;tr.Memo=vw;tr.Portal=Qk;tr.Profiler=dw;tr.StrictMode=uw;tr.Suspense=pw;tr.SuspenseList=gw;tr.isAsyncMode=function(){return!1};tr.isConcurrentMode=function(){return!1};tr.isContextConsumer=function(e){return ja(e)===hw};tr.isContextProvider=function(e){return ja(e)===fw};tr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xk};tr.isForwardRef=function(e){return ja(e)===mw};tr.isFragment=function(e){return ja(e)===cw};tr.isLazy=function(e){return ja(e)===yw};tr.isMemo=function(e){return ja(e)===vw};tr.isPortal=function(e){return ja(e)===Qk};tr.isProfiler=function(e){return ja(e)===dw};tr.isStrictMode=function(e){return ja(e)===uw};tr.isSuspense=function(e){return ja(e)===pw};tr.isSuspenseList=function(e){return ja(e)===gw};tr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===cw||e===dw||e===uw||e===pw||e===gw||e===pge||typeof e=="object"&&e!==null&&(e.$$typeof===yw||e.$$typeof===vw||e.$$typeof===fw||e.$$typeof===hw||e.$$typeof===mw||e.$$typeof===dz||e.getModuleId!==void 0)};tr.typeOf=ja;uz.exports=tr;var gge=uz.exports,vge=$o,yge=Io,xge="[object Number]";function bge(e){return typeof e=="number"||yge(e)&&vge(e)==xge}var fz=bge;const wge=Gt(fz);var jge=fz;function _ge(e){return jge(e)&&e!=+e}var Nge=_ge;const lv=Gt(Nge);var es=function(t){return t===0?0:t>0?1:-1},Fc=function(t){return ku(t)&&t.indexOf("%")===t.length-1},je=function(t){return wge(t)&&!lv(t)},Sge=function(t){return it(t)},cn=function(t){return je(t)||ku(t)},Cge=0,Ah=function(t){var r=++Cge;return"".concat(t||"").concat(r)},ts=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!je(t)&&!ku(t))return n;var i;if(Fc(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return lv(i)&&(i=n),a&&i>r&&(i=r),i},dl=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Ege=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},En=function(t,r){return je(t)&&je(r)?function(n){return t+n*(r-t)}:function(){return r}};function Yx(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Vs(n,t))===r})}var kge=function(t,r){return je(t)&&je(r)?t-r:ku(t)&&ku(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Xd(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function W1(e){"@babel/helpers - typeof";return W1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W1(e)}var Pge=["viewBox","children"],Age=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],tD=["points","pathLength"],b_={svg:Pge,polygon:tD,polyline:tD},Zk=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Xx=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(y.isValidElement(t)&&(n=t.props),!Ch(n))return null;var a={};return Object.keys(n).forEach(function(i){Zk.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},Oge=function(t,r,n){return function(a){return t(r,n,a),null}},Pu=function(t,r,n){if(!Ch(t)||W1(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];Zk.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Oge(o,r,n))}),a},Tge=["children"],Dge=["children"];function rD(e,t){if(e==null)return{};var r=Rge(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Rge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function H1(e){"@babel/helpers - typeof";return H1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H1(e)}var nD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},mo=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},sD=null,w_=null,Jk=function e(t){if(t===sD&&Array.isArray(w_))return w_;var r=[];return y.Children.forEach(t,function(n){it(n)||(gge.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),w_=r,sD=t,r};function qs(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return mo(a)}):n=[mo(t)],Jk(e).forEach(function(a){var i=Vs(a,"type.displayName")||Vs(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function $s(e,t){var r=qs(e,t);return r&&r[0]}var aD=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!je(n)||n<=0||!je(a)||a<=0)},Mge=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],$ge=function(t){return t&&t.type&&ku(t.type)&&Mge.indexOf(t.type)>=0},Ige=function(t){return t&&H1(t)==="object"&&"clipDot"in t},Lge=function(t,r,n,a){var i,o=(i=b_==null?void 0:b_[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Xe(t)&&(a&&o.includes(r)||Age.includes(r))||n&&Zk.includes(r)},qe=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(y.isValidElement(t)&&(a=t.props),!Ch(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;Lge((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},K1=function e(t,r){if(t===r)return!0;var n=y.Children.count(t);if(n!==y.Children.count(r))return!1;if(n===0)return!0;if(n===1)return iD(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!iD(i,o))return!1}return!0},iD=function(t,r){if(it(t)&&it(r))return!0;if(!it(t)&&!it(r)){var n=t.props||{},a=n.children,i=rD(n,Tge),o=r.props||{},l=o.children,c=rD(o,Dge);return a&&l?Xd(i,c)&&K1(a,l):!a&&!l?Xd(i,c):!1}return!1},oD=function(t,r){var n=[],a={};return Jk(t).forEach(function(i,o){if($ge(i))n.push(i);else if(i){var l=mo(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,o);n.push(f),a[l]=!0}}}),n},Fge=function(t){var r=t&&t.type;return r&&nD[r]?nD[r]:null},Uge=function(t,r){return Jk(r).indexOf(t)},Bge=["children","width","height","viewBox","className","style","title","desc"];function G1(){return G1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G1.apply(this,arguments)}function zge(e,t){if(e==null)return{};var r=Vge(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Y1(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=zge(e,Bge),d=a||{width:r,height:n,x:0,y:0},f=st("recharts-surface",i);return O.createElement("svg",G1({},qe(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),O.createElement("title",null,l),O.createElement("desc",null,c),t)}var qge=["children","className"];function X1(){return X1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X1.apply(this,arguments)}function Wge(e,t){if(e==null)return{};var r=Hge(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Hge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Mt=O.forwardRef(function(e,t){var r=e.children,n=e.className,a=Wge(e,qge),i=st("recharts-layer",n);return O.createElement("g",X1({className:i},qe(a,!0),{ref:t}),r)}),Ka=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function Kge(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var Gge=Kge,Yge=Gge;function Xge(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:Yge(e,t,r)}var Qge=Xge,Zge="\\ud800-\\udfff",Jge="\\u0300-\\u036f",eve="\\ufe20-\\ufe2f",tve="\\u20d0-\\u20ff",rve=Jge+eve+tve,nve="\\ufe0e\\ufe0f",sve="\\u200d",ave=RegExp("["+sve+Zge+rve+nve+"]");function ive(e){return ave.test(e)}var hz=ive;function ove(e){return e.split("")}var lve=ove,mz="\\ud800-\\udfff",cve="\\u0300-\\u036f",uve="\\ufe20-\\ufe2f",dve="\\u20d0-\\u20ff",fve=cve+uve+dve,hve="\\ufe0e\\ufe0f",mve="["+mz+"]",Q1="["+fve+"]",Z1="\\ud83c[\\udffb-\\udfff]",pve="(?:"+Q1+"|"+Z1+")",pz="[^"+mz+"]",gz="(?:\\ud83c[\\udde6-\\uddff]){2}",vz="[\\ud800-\\udbff][\\udc00-\\udfff]",gve="\\u200d",yz=pve+"?",xz="["+hve+"]?",vve="(?:"+gve+"(?:"+[pz,gz,vz].join("|")+")"+xz+yz+")*",yve=xz+yz+vve,xve="(?:"+[pz+Q1+"?",Q1,gz,vz,mve].join("|")+")",bve=RegExp(Z1+"(?="+Z1+")|"+xve+yve,"g");function wve(e){return e.match(bve)||[]}var jve=wve,_ve=lve,Nve=hz,Sve=jve;function Cve(e){return Nve(e)?Sve(e):_ve(e)}var Eve=Cve,kve=Qge,Pve=hz,Ave=Eve,Ove=oz;function Tve(e){return function(t){t=Ove(t);var r=Pve(t)?Ave(t):void 0,n=r?r[0]:t.charAt(0),a=r?kve(r,1).join(""):t.slice(1);return n[e]()+a}}var Dve=Tve,Rve=Dve,Mve=Rve("toUpperCase"),$ve=Mve;const xw=Gt($ve);function dr(e){return function(){return e}}const bz=Math.cos,Qx=Math.sin,li=Math.sqrt,Zx=Math.PI,bw=2*Zx,J1=Math.PI,eS=2*J1,Sc=1e-6,Ive=eS-Sc;function wz(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Lve(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return wz;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Fve{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?wz:Lve(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Sc)if(!(Math.abs(f*c-u*d)>Sc)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=a-l,p=c*c+u*u,v=m*m+g*g,x=Math.sqrt(p),b=Math.sqrt(h),w=i*Math.tan((J1-Math.acos((p+h-v)/(2*x*b)))/2),_=w/b,j=w/x;Math.abs(_-1)>Sc&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Sc||Math.abs(this._y1-d)>Sc)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%eS+eS),h>Ive?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Sc&&this._append`A${n},${n},0,${+(h>=J1)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function eP(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Fve(t)}function tP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jz(e){this._context=e}jz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ww(e){return new jz(e)}function _z(e){return e[0]}function Nz(e){return e[1]}function Sz(e,t){var r=dr(!0),n=null,a=ww,i=null,o=eP(l);e=typeof e=="function"?e:e===void 0?_z:dr(e),t=typeof t=="function"?t:t===void 0?Nz:dr(t);function l(c){var u,d=(c=tP(c)).length,f,h=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:dr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:dr(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:dr(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function oy(e,t,r){var n=null,a=dr(!0),i=null,o=ww,l=null,c=eP(u);e=typeof e=="function"?e:e===void 0?_z:dr(+e),t=typeof t=="function"?t:dr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Nz:dr(+r);function u(f){var h,m,g,p=(f=tP(f)).length,v,x=!1,b,w=new Array(p),_=new Array(p);for(i==null&&(l=o(b=c())),h=0;h<=p;++h){if(!(h<p&&a(v=f[h],h,f))===x)if(x=!x)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(w[g],_[g]);l.lineEnd(),l.areaEnd()}x&&(w[h]=+e(v,h,f),_[h]=+t(v,h,f),l.point(n?+n(v,h,f):w[h],r?+r(v,h,f):_[h]))}if(b)return l=null,b+""||null}function d(){return Sz().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:dr(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:dr(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:dr(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:dr(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:dr(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:dr(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:dr(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class Cz{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Uve(e){return new Cz(e,!0)}function Bve(e){return new Cz(e,!1)}const rP={draw(e,t){const r=li(t/Zx);e.moveTo(r,0),e.arc(0,0,r,0,bw)}},zve={draw(e,t){const r=li(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Ez=li(1/3),Vve=Ez*2,qve={draw(e,t){const r=li(t/Vve),n=r*Ez;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Wve={draw(e,t){const r=li(t),n=-r/2;e.rect(n,n,r,r)}},Hve=.8908130915292852,kz=Qx(Zx/10)/Qx(7*Zx/10),Kve=Qx(bw/10)*kz,Gve=-bz(bw/10)*kz,Yve={draw(e,t){const r=li(t*Hve),n=Kve*r,a=Gve*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=bw*i/5,l=bz(o),c=Qx(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},j_=li(3),Xve={draw(e,t){const r=-li(t/(j_*3));e.moveTo(0,r*2),e.lineTo(-j_*r,-r),e.lineTo(j_*r,-r),e.closePath()}},ea=-.5,ta=li(3)/2,tS=1/li(12),Qve=(tS/2+1)*3,Zve={draw(e,t){const r=li(t/Qve),n=r/2,a=r*tS,i=n,o=r*tS+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ea*n-ta*a,ta*n+ea*a),e.lineTo(ea*i-ta*o,ta*i+ea*o),e.lineTo(ea*l-ta*c,ta*l+ea*c),e.lineTo(ea*n+ta*a,ea*a-ta*n),e.lineTo(ea*i+ta*o,ea*o-ta*i),e.lineTo(ea*l+ta*c,ea*c-ta*l),e.closePath()}};function Jve(e,t){let r=null,n=eP(a);e=typeof e=="function"?e:dr(e||rP),t=typeof t=="function"?t:dr(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:dr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:dr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Jx(){}function eb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Pz(e){this._context=e}Pz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:eb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:eb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eye(e){return new Pz(e)}function Az(e){this._context=e}Az.prototype={areaStart:Jx,areaEnd:Jx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:eb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tye(e){return new Az(e)}function Oz(e){this._context=e}Oz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:eb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rye(e){return new Oz(e)}function Tz(e){this._context=e}Tz.prototype={areaStart:Jx,areaEnd:Jx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function nye(e){return new Tz(e)}function lD(e){return e<0?-1:1}function cD(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(lD(i)+lD(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function uD(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function __(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function tb(e){this._context=e}tb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:__(this,this._t0,uD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,__(this,uD(this,r=cD(this,e,t)),r);break;default:__(this,this._t0,r=cD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Dz(e){this._context=new Rz(e)}(Dz.prototype=Object.create(tb.prototype)).point=function(e,t){tb.prototype.point.call(this,t,e)};function Rz(e){this._context=e}Rz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function sye(e){return new tb(e)}function aye(e){return new Dz(e)}function Mz(e){this._context=e}Mz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=dD(e),a=dD(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function dD(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function iye(e){return new Mz(e)}function jw(e,t){this._context=e,this._t=t}jw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function oye(e){return new jw(e,.5)}function lye(e){return new jw(e,0)}function cye(e){return new jw(e,1)}function Rf(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function rS(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function uye(e,t){return e[t]}function dye(e){const t=[];return t.key=e,t}function fye(){var e=dr([]),t=rS,r=Rf,n=uye;function a(i){var o=Array.from(e.apply(this,arguments),dye),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=tP(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:dr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:dr(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?rS:typeof i=="function"?i:dr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Rf,a):r},a}function hye(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Rf(e,t)}}function mye(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Rf(e,t)}}function pye(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var p=e[t[g]],v=p[n][1]||0,x=p[n-1][1]||0;m+=v-x}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Rf(e,t)}}function Vp(e){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vp(e)}var gye=["type","size","sizeType"];function nS(){return nS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nS.apply(this,arguments)}function fD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fD(Object(r),!0).forEach(function(n){vye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vye(e,t,r){return t=yye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yye(e){var t=xye(e,"string");return Vp(t)=="symbol"?t:t+""}function xye(e,t){if(Vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bye(e,t){if(e==null)return{};var r=wye(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wye(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var $z={symbolCircle:rP,symbolCross:zve,symbolDiamond:qve,symbolSquare:Wve,symbolStar:Yve,symbolTriangle:Xve,symbolWye:Zve},jye=Math.PI/180,_ye=function(t){var r="symbol".concat(xw(t));return $z[r]||rP},Nye=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*jye;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Sye=function(t,r){$z["symbol".concat(xw(t))]=r},nP=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=bye(t,gye),u=hD(hD({},c),{},{type:n,size:i,sizeType:l}),d=function(){var v=_ye(n),x=Jve().type(v).size(Nye(i,l,n));return x()},f=u.className,h=u.cx,m=u.cy,g=qe(u,!0);return h===+h&&m===+m&&i===+i?O.createElement("path",nS({},g,{className:st("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};nP.registerSymbol=Sye;function Mf(e){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}function sS(){return sS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sS.apply(this,arguments)}function mD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mD(Object(r),!0).forEach(function(n){qp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lz(n.key),n)}}function Pye(e,t,r){return t&&kye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Aye(e,t,r){return t=rb(t),Oye(e,Iz()?Reflect.construct(t,r||[],rb(e).constructor):t.apply(e,r))}function Oye(e,t){if(t&&(Mf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tye(e)}function Tye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Iz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Iz=function(){return!!e})()}function rb(e){return rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rb(e)}function Dye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aS(e,t)}function aS(e,t){return aS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},aS(e,t)}function qp(e,t,r){return t=Lz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lz(e){var t=Rye(e,"string");return Mf(t)=="symbol"?t:t+""}function Rye(e,t){if(Mf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ra=32,sP=function(e){function t(){return Eye(this,t),Aye(this,t,arguments)}return Dye(t,e),Pye(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=ra/2,o=ra/6,l=ra/3,c=n.inactive?a:n.color;if(n.type==="plainline")return O.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ra,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return O.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ra,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return O.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ra/8,"h").concat(ra,"v").concat(ra*3/4,"h").concat(-ra,"z"),className:"recharts-legend-icon"});if(O.isValidElement(n.legendIcon)){var u=Cye({},n);return delete u.legendIcon,O.cloneElement(n.legendIcon,u)}return O.createElement(nP,{fill:c,cx:i,cy:i,size:ra,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:ra,height:ra},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,g){var p=m.formatter||c,v=st(qp(qp({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=Xe(m.value)?null:m.value;Ka(!Xe(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return O.createElement("li",sS({className:v,style:f,key:"legend-item-".concat(g)},Pu(n.props,m,g)),O.createElement(Y1,{width:o,height:o,viewBox:d,style:h},n.renderIcon(m)),O.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},p?p(x,m,g):x))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return O.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(y.PureComponent);qp(sP,"displayName","Legend");qp(sP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Mye=iw;function $ye(){this.__data__=new Mye,this.size=0}var Iye=$ye;function Lye(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Fye=Lye;function Uye(e){return this.__data__.get(e)}var Bye=Uye;function zye(e){return this.__data__.has(e)}var Vye=zye,qye=iw,Wye=Wk,Hye=Hk,Kye=200;function Gye(e,t){var r=this.__data__;if(r instanceof qye){var n=r.__data__;if(!Wye||n.length<Kye-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Hye(n)}return r.set(e,t),this.size=r.size,this}var Yye=Gye,Xye=iw,Qye=Iye,Zye=Fye,Jye=Bye,exe=Vye,txe=Yye;function Oh(e){var t=this.__data__=new Xye(e);this.size=t.size}Oh.prototype.clear=Qye;Oh.prototype.delete=Zye;Oh.prototype.get=Jye;Oh.prototype.has=exe;Oh.prototype.set=txe;var Fz=Oh,rxe="__lodash_hash_undefined__";function nxe(e){return this.__data__.set(e,rxe),this}var sxe=nxe;function axe(e){return this.__data__.has(e)}var ixe=axe,oxe=Hk,lxe=sxe,cxe=ixe;function nb(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new oxe;++t<r;)this.add(e[t])}nb.prototype.add=nb.prototype.push=lxe;nb.prototype.has=cxe;var Uz=nb;function uxe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Bz=uxe;function dxe(e,t){return e.has(t)}var zz=dxe,fxe=Uz,hxe=Bz,mxe=zz,pxe=1,gxe=2;function vxe(e,t,r,n,a,i){var o=r&pxe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,m=r&gxe?new fxe:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var g=e[f],p=t[f];if(n)var v=o?n(p,g,f,t,e,i):n(g,p,f,e,t,i);if(v!==void 0){if(v)continue;h=!1;break}if(m){if(!hxe(t,function(x,b){if(!mxe(m,b)&&(g===x||a(g,x,r,n,i)))return m.push(b)})){h=!1;break}}else if(!(g===p||a(g,p,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var Vz=vxe,yxe=zi,xxe=yxe.Uint8Array,bxe=xxe;function wxe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var jxe=wxe;function _xe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var aP=_xe,pD=ov,gD=bxe,Nxe=qk,Sxe=Vz,Cxe=jxe,Exe=aP,kxe=1,Pxe=2,Axe="[object Boolean]",Oxe="[object Date]",Txe="[object Error]",Dxe="[object Map]",Rxe="[object Number]",Mxe="[object RegExp]",$xe="[object Set]",Ixe="[object String]",Lxe="[object Symbol]",Fxe="[object ArrayBuffer]",Uxe="[object DataView]",vD=pD?pD.prototype:void 0,N_=vD?vD.valueOf:void 0;function Bxe(e,t,r,n,a,i,o){switch(r){case Uxe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Fxe:return!(e.byteLength!=t.byteLength||!i(new gD(e),new gD(t)));case Axe:case Oxe:case Rxe:return Nxe(+e,+t);case Txe:return e.name==t.name&&e.message==t.message;case Mxe:case Ixe:return e==t+"";case Dxe:var l=Cxe;case $xe:var c=n&kxe;if(l||(l=Exe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=Pxe,o.set(e,t);var d=Sxe(l(e),l(t),n,a,i,o);return o.delete(e),d;case Lxe:if(N_)return N_.call(e)==N_.call(t)}return!1}var zxe=Bxe;function Vxe(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var qz=Vxe,qxe=qz,Wxe=Ps;function Hxe(e,t,r){var n=t(e);return Wxe(e)?n:qxe(n,r(e))}var Kxe=Hxe;function Gxe(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var Yxe=Gxe;function Xxe(){return[]}var Qxe=Xxe,Zxe=Yxe,Jxe=Qxe,ebe=Object.prototype,tbe=ebe.propertyIsEnumerable,yD=Object.getOwnPropertySymbols,rbe=yD?function(e){return e==null?[]:(e=Object(e),Zxe(yD(e),function(t){return tbe.call(e,t)}))}:Jxe,nbe=rbe;function sbe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var abe=sbe,ibe=$o,obe=Io,lbe="[object Arguments]";function cbe(e){return obe(e)&&ibe(e)==lbe}var ube=cbe,xD=ube,dbe=Io,Wz=Object.prototype,fbe=Wz.hasOwnProperty,hbe=Wz.propertyIsEnumerable,mbe=xD(function(){return arguments}())?xD:function(e){return dbe(e)&&fbe.call(e,"callee")&&!hbe.call(e,"callee")},iP=mbe,sb={exports:{}};function pbe(){return!1}var gbe=pbe;sb.exports;(function(e,t){var r=zi,n=gbe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(sb,sb.exports);var Hz=sb.exports,vbe=9007199254740991,ybe=/^(?:0|[1-9]\d*)$/;function xbe(e,t){var r=typeof e;return t=t??vbe,!!t&&(r=="number"||r!="symbol"&&ybe.test(e))&&e>-1&&e%1==0&&e<t}var oP=xbe,bbe=9007199254740991;function wbe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=bbe}var lP=wbe,jbe=$o,_be=lP,Nbe=Io,Sbe="[object Arguments]",Cbe="[object Array]",Ebe="[object Boolean]",kbe="[object Date]",Pbe="[object Error]",Abe="[object Function]",Obe="[object Map]",Tbe="[object Number]",Dbe="[object Object]",Rbe="[object RegExp]",Mbe="[object Set]",$be="[object String]",Ibe="[object WeakMap]",Lbe="[object ArrayBuffer]",Fbe="[object DataView]",Ube="[object Float32Array]",Bbe="[object Float64Array]",zbe="[object Int8Array]",Vbe="[object Int16Array]",qbe="[object Int32Array]",Wbe="[object Uint8Array]",Hbe="[object Uint8ClampedArray]",Kbe="[object Uint16Array]",Gbe="[object Uint32Array]",br={};br[Ube]=br[Bbe]=br[zbe]=br[Vbe]=br[qbe]=br[Wbe]=br[Hbe]=br[Kbe]=br[Gbe]=!0;br[Sbe]=br[Cbe]=br[Lbe]=br[Ebe]=br[Fbe]=br[kbe]=br[Pbe]=br[Abe]=br[Obe]=br[Tbe]=br[Dbe]=br[Rbe]=br[Mbe]=br[$be]=br[Ibe]=!1;function Ybe(e){return Nbe(e)&&_be(e.length)&&!!br[jbe(e)]}var Xbe=Ybe;function Qbe(e){return function(t){return e(t)}}var Kz=Qbe,ab={exports:{}};ab.exports;(function(e,t){var r=tz,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(ab,ab.exports);var Zbe=ab.exports,Jbe=Xbe,e0e=Kz,bD=Zbe,wD=bD&&bD.isTypedArray,t0e=wD?e0e(wD):Jbe,Gz=t0e,r0e=abe,n0e=iP,s0e=Ps,a0e=Hz,i0e=oP,o0e=Gz,l0e=Object.prototype,c0e=l0e.hasOwnProperty;function u0e(e,t){var r=s0e(e),n=!r&&n0e(e),a=!r&&!n&&a0e(e),i=!r&&!n&&!a&&o0e(e),o=r||n||a||i,l=o?r0e(e.length,String):[],c=l.length;for(var u in e)(t||c0e.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||i0e(u,c)))&&l.push(u);return l}var d0e=u0e,f0e=Object.prototype;function h0e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||f0e;return e===r}var m0e=h0e;function p0e(e,t){return function(r){return e(t(r))}}var Yz=p0e,g0e=Yz,v0e=g0e(Object.keys,Object),y0e=v0e,x0e=m0e,b0e=y0e,w0e=Object.prototype,j0e=w0e.hasOwnProperty;function _0e(e){if(!x0e(e))return b0e(e);var t=[];for(var r in Object(e))j0e.call(e,r)&&r!="constructor"&&t.push(r);return t}var N0e=_0e,S0e=Vk,C0e=lP;function E0e(e){return e!=null&&C0e(e.length)&&!S0e(e)}var cv=E0e,k0e=d0e,P0e=N0e,A0e=cv;function O0e(e){return A0e(e)?k0e(e):P0e(e)}var _w=O0e,T0e=Kxe,D0e=nbe,R0e=_w;function M0e(e){return T0e(e,R0e,D0e)}var $0e=M0e,jD=$0e,I0e=1,L0e=Object.prototype,F0e=L0e.hasOwnProperty;function U0e(e,t,r,n,a,i){var o=r&I0e,l=jD(e),c=l.length,u=jD(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:F0e.call(t,h)))return!1}var m=i.get(e),g=i.get(t);if(m&&g)return m==t&&g==e;var p=!0;i.set(e,t),i.set(t,e);for(var v=o;++f<c;){h=l[f];var x=e[h],b=t[h];if(n)var w=o?n(b,x,h,t,e,i):n(x,b,h,e,t,i);if(!(w===void 0?x===b||a(x,b,r,n,i):w)){p=!1;break}v||(v=h=="constructor")}if(p&&!v){var _=e.constructor,j=t.constructor;_!=j&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof j=="function"&&j instanceof j)&&(p=!1)}return i.delete(e),i.delete(t),p}var B0e=U0e,z0e=Wu,V0e=zi,q0e=z0e(V0e,"DataView"),W0e=q0e,H0e=Wu,K0e=zi,G0e=H0e(K0e,"Promise"),Y0e=G0e,X0e=Wu,Q0e=zi,Z0e=X0e(Q0e,"Set"),Xz=Z0e,J0e=Wu,ewe=zi,twe=J0e(ewe,"WeakMap"),rwe=twe,iS=W0e,oS=Wk,lS=Y0e,cS=Xz,uS=rwe,Qz=$o,Th=nz,_D="[object Map]",nwe="[object Object]",ND="[object Promise]",SD="[object Set]",CD="[object WeakMap]",ED="[object DataView]",swe=Th(iS),awe=Th(oS),iwe=Th(lS),owe=Th(cS),lwe=Th(uS),Cc=Qz;(iS&&Cc(new iS(new ArrayBuffer(1)))!=ED||oS&&Cc(new oS)!=_D||lS&&Cc(lS.resolve())!=ND||cS&&Cc(new cS)!=SD||uS&&Cc(new uS)!=CD)&&(Cc=function(e){var t=Qz(e),r=t==nwe?e.constructor:void 0,n=r?Th(r):"";if(n)switch(n){case swe:return ED;case awe:return _D;case iwe:return ND;case owe:return SD;case lwe:return CD}return t});var cwe=Cc,S_=Fz,uwe=Vz,dwe=zxe,fwe=B0e,kD=cwe,PD=Ps,AD=Hz,hwe=Gz,mwe=1,OD="[object Arguments]",TD="[object Array]",ly="[object Object]",pwe=Object.prototype,DD=pwe.hasOwnProperty;function gwe(e,t,r,n,a,i){var o=PD(e),l=PD(t),c=o?TD:kD(e),u=l?TD:kD(t);c=c==OD?ly:c,u=u==OD?ly:u;var d=c==ly,f=u==ly,h=c==u;if(h&&AD(e)){if(!AD(t))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new S_),o||hwe(e)?uwe(e,t,r,n,a,i):dwe(e,t,c,r,n,a,i);if(!(r&mwe)){var m=d&&DD.call(e,"__wrapped__"),g=f&&DD.call(t,"__wrapped__");if(m||g){var p=m?e.value():e,v=g?t.value():t;return i||(i=new S_),a(p,v,r,n,i)}}return h?(i||(i=new S_),fwe(e,t,r,n,a,i)):!1}var vwe=gwe,ywe=vwe,RD=Io;function Zz(e,t,r,n,a){return e===t?!0:e==null||t==null||!RD(e)&&!RD(t)?e!==e&&t!==t:ywe(e,t,r,n,Zz,a)}var cP=Zz,xwe=Fz,bwe=cP,wwe=1,jwe=2;function _we(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new xwe;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?bwe(d,u,wwe|jwe,n,f):h))return!1}}return!0}var Nwe=_we,Swe=cc;function Cwe(e){return e===e&&!Swe(e)}var Jz=Cwe,Ewe=Jz,kwe=_w;function Pwe(e){for(var t=kwe(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Ewe(a)]}return t}var Awe=Pwe;function Owe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var eV=Owe,Twe=Nwe,Dwe=Awe,Rwe=eV;function Mwe(e){var t=Dwe(e);return t.length==1&&t[0][2]?Rwe(t[0][0],t[0][1]):function(r){return r===e||Twe(r,e,t)}}var $we=Mwe;function Iwe(e,t){return e!=null&&t in Object(e)}var Lwe=Iwe,Fwe=lz,Uwe=iP,Bwe=Ps,zwe=oP,Vwe=lP,qwe=lw;function Wwe(e,t,r){t=Fwe(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=qwe(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&Vwe(a)&&zwe(o,a)&&(Bwe(e)||Uwe(e)))}var Hwe=Wwe,Kwe=Lwe,Gwe=Hwe;function Ywe(e,t){return e!=null&&Gwe(e,t,Kwe)}var Xwe=Ywe,Qwe=cP,Zwe=cz,Jwe=Xwe,eje=zk,tje=Jz,rje=eV,nje=lw,sje=1,aje=2;function ije(e,t){return eje(e)&&tje(t)?rje(nje(e),t):function(r){var n=Zwe(r,e);return n===void 0&&n===t?Jwe(r,e):Qwe(t,n,sje|aje)}}var oje=ije;function lje(e){return e}var Dh=lje;function cje(e){return function(t){return t==null?void 0:t[e]}}var uje=cje,dje=Yk;function fje(e){return function(t){return dje(t,e)}}var hje=fje,mje=uje,pje=hje,gje=zk,vje=lw;function yje(e){return gje(e)?mje(vje(e)):pje(e)}var xje=yje,bje=$we,wje=oje,jje=Dh,_je=Ps,Nje=xje;function Sje(e){return typeof e=="function"?e:e==null?jje:typeof e=="object"?_je(e)?wje(e[0],e[1]):bje(e):Nje(e)}var Vi=Sje;function Cje(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var tV=Cje;function Eje(e){return e!==e}var kje=Eje;function Pje(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var Aje=Pje,Oje=tV,Tje=kje,Dje=Aje;function Rje(e,t,r){return t===t?Dje(e,t,r):Oje(e,Tje,r)}var Mje=Rje,$je=Mje;function Ije(e,t){var r=e==null?0:e.length;return!!r&&$je(e,t,0)>-1}var Lje=Ije;function Fje(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var Uje=Fje;function Bje(){}var zje=Bje,C_=Xz,Vje=zje,qje=aP,Wje=1/0,Hje=C_&&1/qje(new C_([,-0]))[1]==Wje?function(e){return new C_(e)}:Vje,Kje=Hje,Gje=Uz,Yje=Lje,Xje=Uje,Qje=zz,Zje=Kje,Jje=aP,e_e=200;function t_e(e,t,r){var n=-1,a=Yje,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=Xje;else if(i>=e_e){var u=t?null:Zje(e);if(u)return Jje(u);o=!1,a=Qje,c=new Gje}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var r_e=t_e,n_e=Vi,s_e=r_e;function a_e(e,t){return e&&e.length?s_e(e,n_e(t)):[]}var i_e=a_e;const MD=Gt(i_e);function rV(e,t,r){return t===!0?MD(e,r):Xe(t)?MD(e,t):e}function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}var o_e=["ref"];function $D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$D(Object(r),!0).forEach(function(n){Nw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$D(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ID(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sV(n.key),n)}}function c_e(e,t,r){return t&&ID(e.prototype,t),r&&ID(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u_e(e,t,r){return t=ib(t),d_e(e,nV()?Reflect.construct(t,r||[],ib(e).constructor):t.apply(e,r))}function d_e(e,t){if(t&&($f(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f_e(e)}function f_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nV=function(){return!!e})()}function ib(e){return ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ib(e)}function h_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dS(e,t)}function dS(e,t){return dS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dS(e,t)}function Nw(e,t,r){return t=sV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sV(e){var t=m_e(e,"string");return $f(t)=="symbol"?t:t+""}function m_e(e,t){if($f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p_e(e,t){if(e==null)return{};var r=g_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function g_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function v_e(e){return e.value}function y_e(e,t){if(O.isValidElement(e))return O.cloneElement(e,t);if(typeof e=="function")return O.createElement(e,t);t.ref;var r=p_e(t,o_e);return O.createElement(sP,r)}var LD=1,ru=function(e){function t(){var r;l_e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=u_e(this,t,[].concat(a)),Nw(r,"lastBoundingBox",{width:-1,height:-1}),r}return h_e(t,e),c_e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>LD||Math.abs(a.height-this.lastBoundingBox.height)>LD)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Yi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Yi(Yi({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Yi(Yi({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return O.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},y_e(i,Yi(Yi({},this.props),{},{payload:rV(d,u,v_e)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Yi(Yi({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&je(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(y.PureComponent);Nw(ru,"displayName","Legend");Nw(ru,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var FD=ov,x_e=iP,b_e=Ps,UD=FD?FD.isConcatSpreadable:void 0;function w_e(e){return b_e(e)||x_e(e)||!!(UD&&e&&e[UD])}var j_e=w_e,__e=qz,N_e=j_e;function aV(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=N_e),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?aV(l,t-1,r,n,a):__e(a,l):n||(a[a.length]=l)}return a}var iV=aV;function S_e(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var C_e=S_e,E_e=C_e,k_e=E_e(),P_e=k_e,A_e=P_e,O_e=_w;function T_e(e,t){return e&&A_e(e,t,O_e)}var oV=T_e,D_e=cv;function R_e(e,t){return function(r,n){if(r==null)return r;if(!D_e(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var M_e=R_e,$_e=oV,I_e=M_e,L_e=I_e($_e),uP=L_e,F_e=uP,U_e=cv;function B_e(e,t){var r=-1,n=U_e(e)?Array(e.length):[];return F_e(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var lV=B_e;function z_e(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var V_e=z_e,BD=Sh;function q_e(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=BD(e),o=t!==void 0,l=t===null,c=t===t,u=BD(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var W_e=q_e,H_e=W_e;function K_e(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=H_e(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var G_e=K_e,E_=Gk,Y_e=Yk,X_e=Vi,Q_e=lV,Z_e=V_e,J_e=Kz,eNe=G_e,tNe=Dh,rNe=Ps;function nNe(e,t,r){t.length?t=E_(t,function(i){return rNe(i)?function(o){return Y_e(o,i.length===1?i[0]:i)}:i}):t=[tNe];var n=-1;t=E_(t,J_e(X_e));var a=Q_e(e,function(i,o,l){var c=E_(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return Z_e(a,function(i,o){return eNe(i,o,r)})}var sNe=nNe;function aNe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var iNe=aNe,oNe=iNe,zD=Math.max;function lNe(e,t,r){return t=zD(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=zD(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),oNe(e,this,l)}}var cNe=lNe;function uNe(e){return function(){return e}}var dNe=uNe,fNe=Wu,hNe=function(){try{var e=fNe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),cV=hNe,mNe=dNe,VD=cV,pNe=Dh,gNe=VD?function(e,t){return VD(e,"toString",{configurable:!0,enumerable:!1,value:mNe(t),writable:!0})}:pNe,vNe=gNe,yNe=800,xNe=16,bNe=Date.now;function wNe(e){var t=0,r=0;return function(){var n=bNe(),a=xNe-(n-r);if(r=n,a>0){if(++t>=yNe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var jNe=wNe,_Ne=vNe,NNe=jNe,SNe=NNe(_Ne),CNe=SNe,ENe=Dh,kNe=cNe,PNe=CNe;function ANe(e,t){return PNe(kNe(e,t,ENe),e+"")}var ONe=ANe,TNe=qk,DNe=cv,RNe=oP,MNe=cc;function $Ne(e,t,r){if(!MNe(r))return!1;var n=typeof t;return(n=="number"?DNe(r)&&RNe(t,r.length):n=="string"&&t in r)?TNe(r[t],e):!1}var Sw=$Ne,INe=iV,LNe=sNe,FNe=ONe,qD=Sw,UNe=FNe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&qD(e,t[0],t[1])?t=[]:r>2&&qD(t[0],t[1],t[2])&&(t=[t[0]]),LNe(e,INe(t,1),[])}),BNe=UNe;const dP=Gt(BNe);function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function fS(){return fS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fS.apply(this,arguments)}function zNe(e,t){return HNe(e)||WNe(e,t)||qNe(e,t)||VNe()}function VNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qNe(e,t){if(e){if(typeof e=="string")return WD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WD(e,t)}}function WD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function HNe(e){if(Array.isArray(e))return e}function HD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function k_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HD(Object(r),!0).forEach(function(n){KNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KNe(e,t,r){return t=GNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GNe(e){var t=YNe(e,"string");return Wp(t)=="symbol"?t:t+""}function YNe(e,t){if(Wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XNe(e){return Array.isArray(e)&&cn(e[0])&&cn(e[1])?e.join(" ~ "):e}var QNe=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,p=t.label,v=t.labelFormatter,x=t.accessibilityLayer,b=x===void 0?!1:x,w=function(){if(d&&d.length){var k={padding:0,margin:0},D=(h?dP(d,h):d).map(function(R,U){if(R.type==="none")return null;var B=k_({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},l),L=R.formatter||f||XNe,M=R.value,T=R.name,F=M,Z=T;if(L&&F!=null&&Z!=null){var W=L(M,T,R,U,d);if(Array.isArray(W)){var K=zNe(W,2);F=K[0],Z=K[1]}else F=W}return O.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:B},cn(Z)?O.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,cn(Z)?O.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,O.createElement("span",{className:"recharts-tooltip-item-value"},F),O.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return O.createElement("ul",{className:"recharts-tooltip-item-list",style:k},D)}return null},_=k_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=k_({margin:0},u),N=!it(p),S=N?p:"",E=st("recharts-default-tooltip",m),C=st("recharts-tooltip-label",g);N&&v&&d!==void 0&&d!==null&&(S=v(p,d));var P=b?{role:"status","aria-live":"assertive"}:{};return O.createElement("div",fS({className:E,style:_},P),O.createElement("p",{className:C,style:j},O.isValidElement(S)?S:"".concat(S)),w())};function Hp(e){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function cy(e,t,r){return t=ZNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZNe(e){var t=JNe(e,"string");return Hp(t)=="symbol"?t:t+""}function JNe(e,t){if(Hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mm="recharts-tooltip-wrapper",e1e={visibility:"hidden"};function t1e(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return st(mm,cy(cy(cy(cy({},"".concat(mm,"-right"),je(r)&&t&&je(t.x)&&r>=t.x),"".concat(mm,"-left"),je(r)&&t&&je(t.x)&&r<t.x),"".concat(mm,"-bottom"),je(n)&&t&&je(t.y)&&n>=t.y),"".concat(mm,"-top"),je(n)&&t&&je(t.y)&&n<t.y))}function KD(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&je(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return o[n]?d:f;if(o[n]){var h=d,m=c[n];return h<m?Math.max(f,c[n]):Math.max(d,c[n])}var g=f+l,p=c[n]+u;return g>p?Math.max(d,c[n]):Math.max(f,c[n])}function r1e(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function n1e(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=KD({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=KD({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=r1e({translateX:d,translateY:f,useTranslate3d:l})):u=e1e,{cssProperties:u,cssClasses:t1e({translateX:d,translateY:f,coordinate:r})}}function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}function GD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function YD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GD(Object(r),!0).forEach(function(n){mS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dV(n.key),n)}}function i1e(e,t,r){return t&&a1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o1e(e,t,r){return t=ob(t),l1e(e,uV()?Reflect.construct(t,r||[],ob(e).constructor):t.apply(e,r))}function l1e(e,t){if(t&&(If(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c1e(e)}function c1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uV=function(){return!!e})()}function ob(e){return ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ob(e)}function u1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hS(e,t)}function hS(e,t){return hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hS(e,t)}function mS(e,t,r){return t=dV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dV(e){var t=d1e(e,"string");return If(t)=="symbol"?t:t+""}function d1e(e,t){if(If(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(If(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XD=1,f1e=function(e){function t(){var r;s1e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=o1e(this,t,[].concat(a)),mS(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),mS(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return u1e(t,e),i1e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>XD||Math.abs(n.height-this.state.lastBoundingBox.height)>XD)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,p=a.reverseDirection,v=a.useTranslate3d,x=a.viewBox,b=a.wrapperStyle,w=n1e({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:x}),_=w.cssClasses,j=w.cssProperties,N=YD(YD({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return O.createElement("div",{tabIndex:-1,className:_,style:N,ref:function(E){n.wrapperNode=E}},u)}}])}(y.PureComponent),h1e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ga={isSsr:h1e(),get:function(t){return Ga[t]},set:function(t,r){if(typeof t=="string")Ga[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){Ga[a]=t[a]})}}};function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function QD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ZD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QD(Object(r),!0).forEach(function(n){fP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hV(n.key),n)}}function g1e(e,t,r){return t&&p1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function v1e(e,t,r){return t=lb(t),y1e(e,fV()?Reflect.construct(t,r||[],lb(e).constructor):t.apply(e,r))}function y1e(e,t){if(t&&(Lf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x1e(e)}function x1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fV=function(){return!!e})()}function lb(e){return lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lb(e)}function b1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pS(e,t)}function pS(e,t){return pS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pS(e,t)}function fP(e,t,r){return t=hV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hV(e){var t=w1e(e,"string");return Lf(t)=="symbol"?t:t+""}function w1e(e,t){if(Lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j1e(e){return e.dataKey}function _1e(e,t){return O.isValidElement(e)?O.cloneElement(e,t):typeof e=="function"?O.createElement(e,t):O.createElement(QNe,t)}var ps=function(e){function t(){return m1e(this,t),v1e(this,t,arguments)}return b1e(t,e),g1e(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,p=a.payloadUniqBy,v=a.position,x=a.reverseDirection,b=a.useTranslate3d,w=a.viewBox,_=a.wrapperStyle,j=g??[];f&&j.length&&(j=rV(g.filter(function(S){return S.value!=null&&(S.hide!==!0||n.props.includeHidden)}),p,j1e));var N=j.length>0;return O.createElement(f1e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:N,offset:m,position:v,reverseDirection:x,useTranslate3d:b,viewBox:w,wrapperStyle:_},_1e(u,ZD(ZD({},this.props),{},{payload:j})))}}])}(y.PureComponent);fP(ps,"displayName","Tooltip");fP(ps,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ga.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var N1e=zi,S1e=function(){return N1e.Date.now()},C1e=S1e,E1e=/\s/;function k1e(e){for(var t=e.length;t--&&E1e.test(e.charAt(t)););return t}var P1e=k1e,A1e=P1e,O1e=/^\s+/;function T1e(e){return e&&e.slice(0,A1e(e)+1).replace(O1e,"")}var D1e=T1e,R1e=D1e,JD=cc,M1e=Sh,eR=NaN,$1e=/^[-+]0x[0-9a-f]+$/i,I1e=/^0b[01]+$/i,L1e=/^0o[0-7]+$/i,F1e=parseInt;function U1e(e){if(typeof e=="number")return e;if(M1e(e))return eR;if(JD(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=JD(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=R1e(e);var r=I1e.test(e);return r||L1e.test(e)?F1e(e.slice(2),r?2:8):$1e.test(e)?eR:+e}var mV=U1e,B1e=cc,P_=C1e,tR=mV,z1e="Expected a function",V1e=Math.max,q1e=Math.min;function W1e(e,t,r){var n,a,i,o,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(z1e);t=tR(t)||0,B1e(r)&&(d=!!r.leading,f="maxWait"in r,i=f?V1e(tR(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(N){var S=n,E=a;return n=a=void 0,u=N,o=e.apply(E,S),o}function g(N){return u=N,l=setTimeout(x,t),d?m(N):o}function p(N){var S=N-c,E=N-u,C=t-S;return f?q1e(C,i-E):C}function v(N){var S=N-c,E=N-u;return c===void 0||S>=t||S<0||f&&E>=i}function x(){var N=P_();if(v(N))return b(N);l=setTimeout(x,p(N))}function b(N){return l=void 0,h&&n?m(N):(n=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function _(){return l===void 0?o:b(P_())}function j(){var N=P_(),S=v(N);if(n=arguments,a=this,c=N,S){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(x,t),m(c)}return l===void 0&&(l=setTimeout(x,t)),o}return j.cancel=w,j.flush=_,j}var H1e=W1e,K1e=H1e,G1e=cc,Y1e="Expected a function";function X1e(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(Y1e);return G1e(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),K1e(e,t,{leading:n,maxWait:t,trailing:a})}var Q1e=X1e;const pV=Gt(Q1e);function Kp(e){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function rR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rR(Object(r),!0).forEach(function(n){Z1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z1e(e,t,r){return t=J1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J1e(e){var t=eSe(e,"string");return Kp(t)=="symbol"?t:t+""}function eSe(e,t){if(Kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tSe(e,t){return aSe(e)||sSe(e,t)||nSe(e,t)||rSe()}function rSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nSe(e,t){if(e){if(typeof e=="string")return nR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nR(e,t)}}function nR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function aSe(e){if(Array.isArray(e))return e}var pm=y.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,p=g===void 0?0:g,v=e.id,x=e.className,b=e.onResize,w=e.style,_=w===void 0?{}:w,j=y.useRef(null),N=y.useRef();N.current=b,y.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var S=y.useState({containerWidth:a.width,containerHeight:a.height}),E=tSe(S,2),C=E[0],P=E[1],A=y.useCallback(function(D,R){P(function(U){var B=Math.round(D),L=Math.round(R);return U.containerWidth===B&&U.containerHeight===L?U:{containerWidth:B,containerHeight:L}})},[]);y.useEffect(function(){var D=function(T){var F,Z=T[0].contentRect,W=Z.width,K=Z.height;A(W,K),(F=N.current)===null||F===void 0||F.call(N,W,K)};p>0&&(D=pV(D,p,{trailing:!0,leading:!1}));var R=new ResizeObserver(D),U=j.current.getBoundingClientRect(),B=U.width,L=U.height;return A(B,L),R.observe(j.current),function(){R.disconnect()}},[A,p]);var k=y.useMemo(function(){var D=C.containerWidth,R=C.containerHeight;if(D<0||R<0)return null;Ka(Fc(o)||Fc(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Ka(!r||r>0,"The aspect(%s) must be greater than zero.",r);var U=Fc(o)?D:o,B=Fc(c)?R:c;r&&r>0&&(U?B=U/r:B&&(U=B*r),h&&B>h&&(B=h)),Ka(U>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,B,o,c,d,f,r);var L=!Array.isArray(m)&&mo(m.type).endsWith("Chart");return O.Children.map(m,function(M){return O.isValidElement(M)?y.cloneElement(M,uy({width:U,height:B},L?{style:uy({height:"100%",width:"100%",maxHeight:B,maxWidth:U},M.props.style)}:{})):M})},[r,m,c,h,f,d,C,o]);return O.createElement("div",{id:v?"".concat(v):void 0,className:st("recharts-responsive-container",x),style:uy(uy({},_),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:j},k)}),Cw=function(t){return null};Cw.displayName="Cell";function Gp(e){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gp(e)}function sR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sR(Object(r),!0).forEach(function(n){iSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iSe(e,t,r){return t=oSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oSe(e){var t=lSe(e,"string");return Gp(t)=="symbol"?t:t+""}function lSe(e,t){if(Gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ud={widthCache:{},cacheCount:0},cSe=2e3,uSe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},aR="recharts_measurement_span";function dSe(e){var t=gS({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Zm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ga.isSsr)return{width:0,height:0};var n=dSe(r),a=JSON.stringify({text:t,copyStyle:n});if(ud.widthCache[a])return ud.widthCache[a];try{var i=document.getElementById(aR);i||(i=document.createElement("span"),i.setAttribute("id",aR),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=gS(gS({},uSe),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return ud.widthCache[a]=c,++ud.cacheCount>cSe&&(ud.cacheCount=0,ud.widthCache={}),c}catch{return{width:0,height:0}}},fSe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Yp(e){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(e)}function cb(e,t){return gSe(e)||pSe(e,t)||mSe(e,t)||hSe()}function hSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mSe(e,t){if(e){if(typeof e=="string")return iR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iR(e,t)}}function iR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function gSe(e){if(Array.isArray(e))return e}function vSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xSe(n.key),n)}}function ySe(e,t,r){return t&&oR(e.prototype,t),r&&oR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xSe(e){var t=bSe(e,"string");return Yp(t)=="symbol"?t:t+""}function bSe(e,t){if(Yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wSe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,jSe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,gV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_Se=Object.keys(gV),Dd="NaN";function NSe(e,t){return e*gV[t]}var dy=function(){function e(t,r){vSe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!wSe.test(r)&&(this.num=NaN,this.unit=""),_Se.includes(r)&&(this.num=NSe(t,r),this.unit="px")}return ySe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=jSe.exec(r))!==null&&n!==void 0?n:[],i=cb(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function vV(e){if(e.includes(Dd))return Dd;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=lR.exec(t))!==null&&r!==void 0?r:[],a=cb(n,4),i=a[1],o=a[2],l=a[3],c=dy.parse(i??""),u=dy.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Dd;t=t.replace(lR,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=cR.exec(t))!==null&&f!==void 0?f:[],m=cb(h,4),g=m[1],p=m[2],v=m[3],x=dy.parse(g??""),b=dy.parse(v??""),w=p==="+"?x.add(b):x.subtract(b);if(w.isNaN())return Dd;t=t.replace(cR,w.toString())}return t}var uR=/\(([^()]*)\)/;function SSe(e){for(var t=e;t.includes("(");){var r=uR.exec(t),n=cb(r,2),a=n[1];t=t.replace(uR,vV(a))}return t}function CSe(e){var t=e.replace(/\s+/g,"");return t=SSe(t),t=vV(t),t}function ESe(e){try{return CSe(e)}catch{return Dd}}function A_(e){var t=ESe(e.slice(5,-1));return t===Dd?"":t}var kSe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],PSe=["dx","dy","angle","className","breakAll"];function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vS.apply(this,arguments)}function dR(e,t){if(e==null)return{};var r=ASe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ASe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fR(e,t){return RSe(e)||DSe(e,t)||TSe(e,t)||OSe()}function OSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TSe(e,t){if(e){if(typeof e=="string")return hR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hR(e,t)}}function hR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function RSe(e){if(Array.isArray(e))return e}var yV=/[ \f\n\r\t\v\u2028\u2029]+/,xV=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];it(r)||(n?i=r.toString().split(""):i=r.toString().split(yV));var o=i.map(function(c){return{word:c,width:Zm(c,a).width}}),l=n?0:Zm("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},MSe=function(t,r,n,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=je(o),f=l,h=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce(function(B,L){var M=L.word,T=L.width,F=B[B.length-1];if(F&&(a==null||i||F.width+T+n<Number(a)))F.words.push(M),F.width+=T+n;else{var Z={words:[M],width:T};B.push(Z)}return B},[])},m=h(r),g=function(U){return U.reduce(function(B,L){return B.width>L.width?B:L})};if(!d)return m;for(var p="",v=function(U){var B=f.slice(0,U),L=xV({breakAll:u,style:c,children:B+p}).wordsWithComputedWidth,M=h(L),T=M.length>o||g(M).width>Number(a);return[T,M]},x=0,b=f.length-1,w=0,_;x<=b&&w<=f.length-1;){var j=Math.floor((x+b)/2),N=j-1,S=v(N),E=fR(S,2),C=E[0],P=E[1],A=v(j),k=fR(A,1),D=k[0];if(!C&&!D&&(x=j+1),C&&D&&(b=j-1),!C&&D){_=P;break}w++}return _||m},mR=function(t){var r=it(t)?[]:t.toString().split(yV);return[{words:r}]},$Se=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Ga.isSsr){var c,u,d=xV({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return mR(a);return MSe({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return mR(a)},pR="#808080",Au=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,p=g===void 0?"end":g,v=t.fill,x=v===void 0?pR:v,b=dR(t,kSe),w=y.useMemo(function(){return $Se({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),_=b.dx,j=b.dy,N=b.angle,S=b.className,E=b.breakAll,C=dR(b,PSe);if(!cn(n)||!cn(i))return null;var P=n+(je(_)?_:0),A=i+(je(j)?j:0),k;switch(p){case"start":k=A_("calc(".concat(u,")"));break;case"middle":k=A_("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:k=A_("calc(".concat(w.length-1," * -").concat(l,")"));break}var D=[];if(f){var R=w[0].width,U=b.width;D.push("scale(".concat((je(U)?U/R:1)/R,")"))}return N&&D.push("rotate(".concat(N,", ").concat(P,", ").concat(A,")")),D.length&&(C.transform=D.join(" ")),O.createElement("text",vS({},qe(C,!0),{x:P,y:A,className:st("recharts-text",S),textAnchor:m,fill:x.includes("url")?pR:x}),w.map(function(B,L){var M=B.words.join(E?"":" ");return O.createElement("tspan",{x:P,dy:L===0?k:l,key:"".concat(M,"-").concat(L)},M)}))};function Ul(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ISe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hP(e){let t,r,n;e.length!==2?(t=Ul,r=(l,c)=>Ul(e(l),c),n=(l,c)=>e(l)-c):(t=e===Ul||e===ISe?e:LSe,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function LSe(){return 0}function bV(e){return e===null?NaN:+e}function*FSe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const USe=hP(Ul),uv=USe.right;hP(bV).center;class gR extends Map{constructor(t,r=VSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(vR(this,t))}has(t){return super.has(vR(this,t))}set(t,r){return super.set(BSe(this,t),r)}delete(t){return super.delete(zSe(this,t))}}function vR({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function BSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function zSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function VSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function qSe(e=Ul){if(e===Ul)return wV;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function wV(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const WSe=Math.sqrt(50),HSe=Math.sqrt(10),KSe=Math.sqrt(2);function ub(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=WSe?10:i>=HSe?5:i>=KSe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?ub(e,t,r*2):[l,c,u]}function yS(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?ub(t,e,r):ub(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function xS(e,t,r){return t=+t,e=+e,r=+r,ub(e,t,r)[2]}function bS(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?xS(t,e,r):xS(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function yR(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function xR(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function jV(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?wV:qSe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));jV(e,t,m,g,a)}const i=e[t];let o=r,l=n;for(gm(e,r,t),a(e[n],i)>0&&gm(e,r,n);o<l;){for(gm(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?gm(e,r,l):(++l,gm(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function gm(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function GSe(e,t,r){if(e=Float64Array.from(FSe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return xR(e);if(t>=1)return yR(e);var n,a=(n-1)*t,i=Math.floor(a),o=yR(jV(e,i).subarray(0,i+1)),l=xR(e.subarray(i+1));return o+(l-o)*(a-i)}}function YSe(e,t,r=bV){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function XSe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function _a(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Lo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const wS=Symbol("implicit");function mP(){var e=new gR,t=[],r=[],n=wS;function a(i){let o=e.get(i);if(o===void 0){if(n!==wS)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new gR;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return mP(t,r).unknown(n)},_a.apply(a,arguments),a}function Xp(){var e=mP().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,p=m?n:a;i=(p-g)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),g+=(p-g-i*(h-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=XSe(h).map(function(x){return g+i*x});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Xp(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},_a.apply(f(),arguments)}function _V(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return _V(t())},e}function Jm(){return _V(Xp.apply(null,arguments).paddingInner(1))}function pP(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function NV(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function dv(){}var Qp=.7,db=1/Qp,Qd="\\s*([+-]?\\d+)\\s*",Zp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",QSe=/^#([0-9a-f]{3,8})$/,ZSe=new RegExp(`^rgb\\(${Qd},${Qd},${Qd}\\)$`),JSe=new RegExp(`^rgb\\(${Ni},${Ni},${Ni}\\)$`),eCe=new RegExp(`^rgba\\(${Qd},${Qd},${Qd},${Zp}\\)$`),tCe=new RegExp(`^rgba\\(${Ni},${Ni},${Ni},${Zp}\\)$`),rCe=new RegExp(`^hsl\\(${Zp},${Ni},${Ni}\\)$`),nCe=new RegExp(`^hsla\\(${Zp},${Ni},${Ni},${Zp}\\)$`),bR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pP(dv,Jp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wR,formatHex:wR,formatHex8:sCe,formatHsl:aCe,formatRgb:jR,toString:jR});function wR(){return this.rgb().formatHex()}function sCe(){return this.rgb().formatHex8()}function aCe(){return SV(this).formatHsl()}function jR(){return this.rgb().formatRgb()}function Jp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=QSe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?_R(t):r===3?new xs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?fy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?fy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ZSe.exec(e))?new xs(t[1],t[2],t[3],1):(t=JSe.exec(e))?new xs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=eCe.exec(e))?fy(t[1],t[2],t[3],t[4]):(t=tCe.exec(e))?fy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=rCe.exec(e))?CR(t[1],t[2]/100,t[3]/100,1):(t=nCe.exec(e))?CR(t[1],t[2]/100,t[3]/100,t[4]):bR.hasOwnProperty(e)?_R(bR[e]):e==="transparent"?new xs(NaN,NaN,NaN,0):null}function _R(e){return new xs(e>>16&255,e>>8&255,e&255,1)}function fy(e,t,r,n){return n<=0&&(e=t=r=NaN),new xs(e,t,r,n)}function iCe(e){return e instanceof dv||(e=Jp(e)),e?(e=e.rgb(),new xs(e.r,e.g,e.b,e.opacity)):new xs}function jS(e,t,r,n){return arguments.length===1?iCe(e):new xs(e,t,r,n??1)}function xs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}pP(xs,jS,NV(dv,{brighter(e){return e=e==null?db:Math.pow(db,e),new xs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qp:Math.pow(Qp,e),new xs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xs(nu(this.r),nu(this.g),nu(this.b),fb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:NR,formatHex:NR,formatHex8:oCe,formatRgb:SR,toString:SR}));function NR(){return`#${Uc(this.r)}${Uc(this.g)}${Uc(this.b)}`}function oCe(){return`#${Uc(this.r)}${Uc(this.g)}${Uc(this.b)}${Uc((isNaN(this.opacity)?1:this.opacity)*255)}`}function SR(){const e=fb(this.opacity);return`${e===1?"rgb(":"rgba("}${nu(this.r)}, ${nu(this.g)}, ${nu(this.b)}${e===1?")":`, ${e})`}`}function fb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Uc(e){return e=nu(e),(e<16?"0":"")+e.toString(16)}function CR(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Va(e,t,r,n)}function SV(e){if(e instanceof Va)return new Va(e.h,e.s,e.l,e.opacity);if(e instanceof dv||(e=Jp(e)),!e)return new Va;if(e instanceof Va)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Va(o,l,c,e.opacity)}function lCe(e,t,r,n){return arguments.length===1?SV(e):new Va(e,t,r,n??1)}function Va(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}pP(Va,lCe,NV(dv,{brighter(e){return e=e==null?db:Math.pow(db,e),new Va(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qp:Math.pow(Qp,e),new Va(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new xs(O_(e>=240?e-240:e+120,a,n),O_(e,a,n),O_(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Va(ER(this.h),hy(this.s),hy(this.l),fb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fb(this.opacity);return`${e===1?"hsl(":"hsla("}${ER(this.h)}, ${hy(this.s)*100}%, ${hy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ER(e){return e=(e||0)%360,e<0?e+360:e}function hy(e){return Math.max(0,Math.min(1,e||0))}function O_(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const gP=e=>()=>e;function cCe(e,t){return function(r){return e+r*t}}function uCe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function dCe(e){return(e=+e)==1?CV:function(t,r){return r-t?uCe(t,r,e):gP(isNaN(t)?r:t)}}function CV(e,t){var r=t-e;return r?cCe(e,r):gP(isNaN(e)?t:e)}const kR=function e(t){var r=dCe(t);function n(a,i){var o=r((a=jS(a)).r,(i=jS(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=CV(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function fCe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function hCe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function mCe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Rh(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function pCe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function hb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function gCe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Rh(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var _S=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,T_=new RegExp(_S.source,"g");function vCe(e){return function(){return e}}function yCe(e){return function(t){return e(t)+""}}function xCe(e,t){var r=_S.lastIndex=T_.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=_S.exec(e))&&(a=T_.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:hb(n,a)})),r=T_.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?yCe(c[0].x):vCe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Rh(e,t){var r=typeof t,n;return t==null||r==="boolean"?gP(t):(r==="number"?hb:r==="string"?(n=Jp(t))?(t=n,kR):xCe:t instanceof Jp?kR:t instanceof Date?pCe:hCe(t)?fCe:Array.isArray(t)?mCe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?gCe:hb)(e,t)}function vP(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function bCe(e,t){t===void 0&&(t=e,e=Rh);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function wCe(e){return function(){return e}}function mb(e){return+e}var PR=[0,1];function rs(e){return e}function NS(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:wCe(isNaN(t)?NaN:.5)}function jCe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function _Ce(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=NS(a,n),i=r(o,i)):(n=NS(n,a),i=r(i,o)),function(l){return i(n(l))}}function NCe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=NS(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=uv(e,l,1,n)-1;return i[c](a[c](l))}}function fv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ew(){var e=PR,t=PR,r=Rh,n,a,i,o=rs,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==rs&&(o=jCe(e[0],e[h-1])),l=h>2?NCe:_Ce,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),hb)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,mb),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=vP,d()},f.clamp=function(h){return arguments.length?(o=h?!0:rs,d()):o!==rs},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function yP(){return Ew()(rs,rs)}function SCe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pb(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ff(e){return e=pb(Math.abs(e)),e?e[1]:NaN}function CCe(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function ECe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var kCe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function eg(e){if(!(t=kCe.exec(e)))throw new Error("invalid format: "+e);var t;return new xP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}eg.prototype=xP.prototype;function xP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}xP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function PCe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var EV;function ACe(e,t){var r=pb(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(EV=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+pb(e,Math.max(0,t+i-1))[0]}function AR(e,t){var r=pb(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const OR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:SCe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>AR(e*100,t),r:AR,s:ACe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function TR(e){return e}var DR=Array.prototype.map,RR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function OCe(e){var t=e.grouping===void 0||e.thousands===void 0?TR:CCe(DR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?TR:ECe(DR.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=eg(f);var h=f.fill,m=f.align,g=f.sign,p=f.symbol,v=f.zero,x=f.width,b=f.comma,w=f.precision,_=f.trim,j=f.type;j==="n"?(b=!0,j="g"):OR[j]||(w===void 0&&(w=12),_=!0,j="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var N=p==="$"?r:p==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",S=p==="$"?n:/[%p]/.test(j)?o:"",E=OR[j],C=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(A){var k=N,D=S,R,U,B;if(j==="c")D=E(A)+D,A="";else{A=+A;var L=A<0||1/A<0;if(A=isNaN(A)?c:E(Math.abs(A),w),_&&(A=PCe(A)),L&&+A==0&&g!=="+"&&(L=!1),k=(L?g==="("?g:l:g==="-"||g==="("?"":g)+k,D=(j==="s"?RR[8+EV/3]:"")+D+(L&&g==="("?")":""),C){for(R=-1,U=A.length;++R<U;)if(B=A.charCodeAt(R),48>B||B>57){D=(B===46?a+A.slice(R+1):A.slice(R))+D,A=A.slice(0,R);break}}}b&&!v&&(A=t(A,1/0));var M=k.length+A.length+D.length,T=M<x?new Array(x-M+1).join(h):"";switch(b&&v&&(A=t(T+A,T.length?x-D.length:1/0),T=""),m){case"<":A=k+A+D+T;break;case"=":A=k+T+A+D;break;case"^":A=T.slice(0,M=T.length>>1)+k+A+D+T.slice(M);break;default:A=T+k+A+D;break}return i(A)}return P.toString=function(){return f+""},P}function d(f,h){var m=u((f=eg(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Ff(h)/3)))*3,p=Math.pow(10,-g),v=RR[8+g/3];return function(x){return m(p*x)+v}}return{format:u,formatPrefix:d}}var my,bP,kV;TCe({thousands:",",grouping:[3],currency:["$",""]});function TCe(e){return my=OCe(e),bP=my.format,kV=my.formatPrefix,my}function DCe(e){return Math.max(0,-Ff(Math.abs(e)))}function RCe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ff(t)/3)))*3-Ff(Math.abs(e)))}function MCe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ff(t)-Ff(e))+1}function PV(e,t,r,n){var a=bS(e,t,r),i;switch(n=eg(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=RCe(a,o))&&(n.precision=i),kV(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=MCe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=DCe(a))&&(n.precision=i-(n.type==="%")*2);break}}return bP(n)}function uc(e){var t=e.domain;return e.ticks=function(r){var n=t();return yS(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return PV(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=xS(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function gb(){var e=yP();return e.copy=function(){return fv(e,gb())},_a.apply(e,arguments),uc(e)}function AV(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,mb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return AV(e).unknown(t)},e=arguments.length?Array.from(e,mb):[0,1],uc(r)}function OV(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function MR(e){return Math.log(e)}function $R(e){return Math.exp(e)}function $Ce(e){return-Math.log(-e)}function ICe(e){return-Math.exp(-e)}function LCe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function FCe(e){return e===10?LCe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function UCe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function IR(e){return(t,r)=>-e(-t,r)}function wP(e){const t=e(MR,$R),r=t.domain;let n=10,a,i;function o(){return a=UCe(n),i=FCe(n),r()[0]<0?(a=IR(a),i=IR(i),e($Ce,ICe)):e(MR,$R),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,p;const v=l==null?10:+l;let x=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(p=h<0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;x.push(p)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(p=h>0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;x.push(p)}x.length*2<v&&(x=yS(u,d,v))}else x=yS(h,m,Math.min(m-h,v)).map(i);return f?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=eg(c)).precision==null&&(c.trim=!0),c=bP(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(OV(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function TV(){const e=wP(Ew()).domain([1,10]);return e.copy=()=>fv(e,TV()).base(e.base()),_a.apply(e,arguments),e}function LR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function FR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function jP(e){var t=1,r=e(LR(t),FR(t));return r.constant=function(n){return arguments.length?e(LR(t=+n),FR(t)):t},uc(r)}function DV(){var e=jP(Ew());return e.copy=function(){return fv(e,DV()).constant(e.constant())},_a.apply(e,arguments)}function UR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function BCe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function zCe(e){return e<0?-e*e:e*e}function _P(e){var t=e(rs,rs),r=1;function n(){return r===1?e(rs,rs):r===.5?e(BCe,zCe):e(UR(r),UR(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},uc(t)}function NP(){var e=_P(Ew());return e.copy=function(){return fv(e,NP()).exponent(e.exponent())},_a.apply(e,arguments),e}function VCe(){return NP.apply(null,arguments).exponent(.5)}function BR(e){return Math.sign(e)*e*e}function qCe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function RV(){var e=yP(),t=[0,1],r=!1,n;function a(i){var o=qCe(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(BR(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,mb)).map(BR)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return RV(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},_a.apply(a,arguments),uc(a)}function MV(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=YSe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[uv(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Ul),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return MV().domain(e).range(t).unknown(n)},_a.apply(i,arguments)}function $V(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[uv(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return $V().domain([e,t]).range(a).unknown(i)},_a.apply(uc(o),arguments)}function IV(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[uv(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return IV().domain(e).range(t).unknown(r)},_a.apply(a,arguments)}const D_=new Date,R_=new Date;function hn(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>hn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(D_.setTime(+i),R_.setTime(+o),e(D_),e(R_),Math.floor(r(D_,R_))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const vb=hn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?hn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):vb);vb.range;const lo=1e3,da=lo*60,co=da*60,Co=co*24,SP=Co*7,zR=Co*30,M_=Co*365,Bc=hn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*lo)},(e,t)=>(t-e)/lo,e=>e.getUTCSeconds());Bc.range;const CP=hn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lo)},(e,t)=>{e.setTime(+e+t*da)},(e,t)=>(t-e)/da,e=>e.getMinutes());CP.range;const EP=hn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*da)},(e,t)=>(t-e)/da,e=>e.getUTCMinutes());EP.range;const kP=hn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lo-e.getMinutes()*da)},(e,t)=>{e.setTime(+e+t*co)},(e,t)=>(t-e)/co,e=>e.getHours());kP.range;const PP=hn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*co)},(e,t)=>(t-e)/co,e=>e.getUTCHours());PP.range;const hv=hn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*da)/Co,e=>e.getDate()-1);hv.range;const kw=hn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Co,e=>e.getUTCDate()-1);kw.range;const LV=hn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Co,e=>Math.floor(e/Co));LV.range;function Hu(e){return hn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*da)/SP)}const Pw=Hu(0),yb=Hu(1),WCe=Hu(2),HCe=Hu(3),Uf=Hu(4),KCe=Hu(5),GCe=Hu(6);Pw.range;yb.range;WCe.range;HCe.range;Uf.range;KCe.range;GCe.range;function Ku(e){return hn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/SP)}const Aw=Ku(0),xb=Ku(1),YCe=Ku(2),XCe=Ku(3),Bf=Ku(4),QCe=Ku(5),ZCe=Ku(6);Aw.range;xb.range;YCe.range;XCe.range;Bf.range;QCe.range;ZCe.range;const AP=hn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());AP.range;const OP=hn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());OP.range;const Eo=hn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Eo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:hn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Eo.range;const ko=hn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ko.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:hn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ko.range;function FV(e,t,r,n,a,i){const o=[[Bc,1,lo],[Bc,5,5*lo],[Bc,15,15*lo],[Bc,30,30*lo],[i,1,da],[i,5,5*da],[i,15,15*da],[i,30,30*da],[a,1,co],[a,3,3*co],[a,6,6*co],[a,12,12*co],[n,1,Co],[n,2,2*Co],[r,1,SP],[t,1,zR],[t,3,3*zR],[e,1,M_]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=hP(([,,v])=>v).right(o,h);if(m===o.length)return e.every(bS(u/M_,d/M_,f));if(m===0)return vb.every(Math.max(bS(u,d,f),1));const[g,p]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(p)}return[l,c]}const[JCe,eEe]=FV(ko,OP,Aw,LV,PP,EP),[tEe,rEe]=FV(Eo,AP,Pw,hv,kP,CP);function $_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function I_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function vm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function nEe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=ym(a),d=xm(a),f=ym(i),h=xm(i),m=ym(o),g=xm(o),p=ym(l),v=xm(l),x=ym(c),b=xm(c),w={a:L,A:M,b:T,B:F,c:null,d:GR,e:GR,f:CEe,g:$Ee,G:LEe,H:_Ee,I:NEe,j:SEe,L:UV,m:EEe,M:kEe,p:Z,q:W,Q:QR,s:ZR,S:PEe,u:AEe,U:OEe,V:TEe,w:DEe,W:REe,x:null,X:null,y:MEe,Y:IEe,Z:FEe,"%":XR},_={a:K,A:V,b:le,B:be,c:null,d:YR,e:YR,f:VEe,g:JEe,G:tke,H:UEe,I:BEe,j:zEe,L:zV,m:qEe,M:WEe,p:ce,q:Pe,Q:QR,s:ZR,S:HEe,u:KEe,U:GEe,V:YEe,w:XEe,W:QEe,x:null,X:null,y:ZEe,Y:eke,Z:rke,"%":XR},j={a:P,A,b:k,B:D,c:R,d:HR,e:HR,f:xEe,g:WR,G:qR,H:KR,I:KR,j:pEe,L:yEe,m:mEe,M:gEe,p:C,q:hEe,Q:wEe,s:jEe,S:vEe,u:lEe,U:cEe,V:uEe,w:oEe,W:dEe,x:U,X:B,y:WR,Y:qR,Z:fEe,"%":bEe};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),_.x=N(r,_),_.X=N(n,_),_.c=N(t,_);function N(ie,me){return function(_e){var se=[],ot=-1,He=0,Lt=ie.length,Tt,Wt,Yt;for(_e instanceof Date||(_e=new Date(+_e));++ot<Lt;)ie.charCodeAt(ot)===37&&(se.push(ie.slice(He,ot)),(Wt=VR[Tt=ie.charAt(++ot)])!=null?Tt=ie.charAt(++ot):Wt=Tt==="e"?" ":"0",(Yt=me[Tt])&&(Tt=Yt(_e,Wt)),se.push(Tt),He=ot+1);return se.push(ie.slice(He,ot)),se.join("")}}function S(ie,me){return function(_e){var se=vm(1900,void 0,1),ot=E(se,ie,_e+="",0),He,Lt;if(ot!=_e.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(me&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(He=I_(vm(se.y,0,1)),Lt=He.getUTCDay(),He=Lt>4||Lt===0?xb.ceil(He):xb(He),He=kw.offset(He,(se.V-1)*7),se.y=He.getUTCFullYear(),se.m=He.getUTCMonth(),se.d=He.getUTCDate()+(se.w+6)%7):(He=$_(vm(se.y,0,1)),Lt=He.getDay(),He=Lt>4||Lt===0?yb.ceil(He):yb(He),He=hv.offset(He,(se.V-1)*7),se.y=He.getFullYear(),se.m=He.getMonth(),se.d=He.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),Lt="Z"in se?I_(vm(se.y,0,1)).getUTCDay():$_(vm(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(Lt+5)%7:se.w+se.U*7-(Lt+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,I_(se)):$_(se)}}function E(ie,me,_e,se){for(var ot=0,He=me.length,Lt=_e.length,Tt,Wt;ot<He;){if(se>=Lt)return-1;if(Tt=me.charCodeAt(ot++),Tt===37){if(Tt=me.charAt(ot++),Wt=j[Tt in VR?me.charAt(ot++):Tt],!Wt||(se=Wt(ie,_e,se))<0)return-1}else if(Tt!=_e.charCodeAt(se++))return-1}return se}function C(ie,me,_e){var se=u.exec(me.slice(_e));return se?(ie.p=d.get(se[0].toLowerCase()),_e+se[0].length):-1}function P(ie,me,_e){var se=m.exec(me.slice(_e));return se?(ie.w=g.get(se[0].toLowerCase()),_e+se[0].length):-1}function A(ie,me,_e){var se=f.exec(me.slice(_e));return se?(ie.w=h.get(se[0].toLowerCase()),_e+se[0].length):-1}function k(ie,me,_e){var se=x.exec(me.slice(_e));return se?(ie.m=b.get(se[0].toLowerCase()),_e+se[0].length):-1}function D(ie,me,_e){var se=p.exec(me.slice(_e));return se?(ie.m=v.get(se[0].toLowerCase()),_e+se[0].length):-1}function R(ie,me,_e){return E(ie,t,me,_e)}function U(ie,me,_e){return E(ie,r,me,_e)}function B(ie,me,_e){return E(ie,n,me,_e)}function L(ie){return o[ie.getDay()]}function M(ie){return i[ie.getDay()]}function T(ie){return c[ie.getMonth()]}function F(ie){return l[ie.getMonth()]}function Z(ie){return a[+(ie.getHours()>=12)]}function W(ie){return 1+~~(ie.getMonth()/3)}function K(ie){return o[ie.getUTCDay()]}function V(ie){return i[ie.getUTCDay()]}function le(ie){return c[ie.getUTCMonth()]}function be(ie){return l[ie.getUTCMonth()]}function ce(ie){return a[+(ie.getUTCHours()>=12)]}function Pe(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var me=N(ie+="",w);return me.toString=function(){return ie},me},parse:function(ie){var me=S(ie+="",!1);return me.toString=function(){return ie},me},utcFormat:function(ie){var me=N(ie+="",_);return me.toString=function(){return ie},me},utcParse:function(ie){var me=S(ie+="",!0);return me.toString=function(){return ie},me}}}var VR={"-":"",_:" ",0:"0"},wn=/^\s*\d+/,sEe=/^%/,aEe=/[\\^$*+?|[\]().{}]/g;function qt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function iEe(e){return e.replace(aEe,"\\$&")}function ym(e){return new RegExp("^(?:"+e.map(iEe).join("|")+")","i")}function xm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function oEe(e,t,r){var n=wn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function lEe(e,t,r){var n=wn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function cEe(e,t,r){var n=wn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function uEe(e,t,r){var n=wn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function dEe(e,t,r){var n=wn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function qR(e,t,r){var n=wn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function WR(e,t,r){var n=wn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function fEe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function hEe(e,t,r){var n=wn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function mEe(e,t,r){var n=wn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function HR(e,t,r){var n=wn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function pEe(e,t,r){var n=wn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function KR(e,t,r){var n=wn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function gEe(e,t,r){var n=wn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function vEe(e,t,r){var n=wn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function yEe(e,t,r){var n=wn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function xEe(e,t,r){var n=wn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function bEe(e,t,r){var n=sEe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function wEe(e,t,r){var n=wn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function jEe(e,t,r){var n=wn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function GR(e,t){return qt(e.getDate(),t,2)}function _Ee(e,t){return qt(e.getHours(),t,2)}function NEe(e,t){return qt(e.getHours()%12||12,t,2)}function SEe(e,t){return qt(1+hv.count(Eo(e),e),t,3)}function UV(e,t){return qt(e.getMilliseconds(),t,3)}function CEe(e,t){return UV(e,t)+"000"}function EEe(e,t){return qt(e.getMonth()+1,t,2)}function kEe(e,t){return qt(e.getMinutes(),t,2)}function PEe(e,t){return qt(e.getSeconds(),t,2)}function AEe(e){var t=e.getDay();return t===0?7:t}function OEe(e,t){return qt(Pw.count(Eo(e)-1,e),t,2)}function BV(e){var t=e.getDay();return t>=4||t===0?Uf(e):Uf.ceil(e)}function TEe(e,t){return e=BV(e),qt(Uf.count(Eo(e),e)+(Eo(e).getDay()===4),t,2)}function DEe(e){return e.getDay()}function REe(e,t){return qt(yb.count(Eo(e)-1,e),t,2)}function MEe(e,t){return qt(e.getFullYear()%100,t,2)}function $Ee(e,t){return e=BV(e),qt(e.getFullYear()%100,t,2)}function IEe(e,t){return qt(e.getFullYear()%1e4,t,4)}function LEe(e,t){var r=e.getDay();return e=r>=4||r===0?Uf(e):Uf.ceil(e),qt(e.getFullYear()%1e4,t,4)}function FEe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+qt(t/60|0,"0",2)+qt(t%60,"0",2)}function YR(e,t){return qt(e.getUTCDate(),t,2)}function UEe(e,t){return qt(e.getUTCHours(),t,2)}function BEe(e,t){return qt(e.getUTCHours()%12||12,t,2)}function zEe(e,t){return qt(1+kw.count(ko(e),e),t,3)}function zV(e,t){return qt(e.getUTCMilliseconds(),t,3)}function VEe(e,t){return zV(e,t)+"000"}function qEe(e,t){return qt(e.getUTCMonth()+1,t,2)}function WEe(e,t){return qt(e.getUTCMinutes(),t,2)}function HEe(e,t){return qt(e.getUTCSeconds(),t,2)}function KEe(e){var t=e.getUTCDay();return t===0?7:t}function GEe(e,t){return qt(Aw.count(ko(e)-1,e),t,2)}function VV(e){var t=e.getUTCDay();return t>=4||t===0?Bf(e):Bf.ceil(e)}function YEe(e,t){return e=VV(e),qt(Bf.count(ko(e),e)+(ko(e).getUTCDay()===4),t,2)}function XEe(e){return e.getUTCDay()}function QEe(e,t){return qt(xb.count(ko(e)-1,e),t,2)}function ZEe(e,t){return qt(e.getUTCFullYear()%100,t,2)}function JEe(e,t){return e=VV(e),qt(e.getUTCFullYear()%100,t,2)}function eke(e,t){return qt(e.getUTCFullYear()%1e4,t,4)}function tke(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Bf(e):Bf.ceil(e),qt(e.getUTCFullYear()%1e4,t,4)}function rke(){return"+0000"}function XR(){return"%"}function QR(e){return+e}function ZR(e){return Math.floor(+e/1e3)}var dd,qV,WV;nke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nke(e){return dd=nEe(e),qV=dd.format,dd.parse,WV=dd.utcFormat,dd.utcParse,dd}function ske(e){return new Date(e)}function ake(e){return e instanceof Date?+e:+new Date(+e)}function TP(e,t,r,n,a,i,o,l,c,u){var d=yP(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),p=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),b=u("%b %d"),w=u("%B"),_=u("%Y");function j(N){return(c(N)<N?m:l(N)<N?g:o(N)<N?p:i(N)<N?v:n(N)<N?a(N)<N?x:b:r(N)<N?w:_)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?h(Array.from(N,ake)):h().map(ske)},d.ticks=function(N){var S=h();return e(S[0],S[S.length-1],N??10)},d.tickFormat=function(N,S){return S==null?j:u(S)},d.nice=function(N){var S=h();return(!N||typeof N.range!="function")&&(N=t(S[0],S[S.length-1],N??10)),N?h(OV(S,N)):d},d.copy=function(){return fv(d,TP(e,t,r,n,a,i,o,l,c,u))},d}function ike(){return _a.apply(TP(tEe,rEe,Eo,AP,Pw,hv,kP,CP,Bc,qV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function oke(){return _a.apply(TP(JCe,eEe,ko,OP,Aw,kw,PP,EP,Bc,WV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ow(){var e=0,t=1,r,n,a,i,o=rs,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(Rh),u.rangeRound=d(vP),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function dc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function HV(){var e=uc(Ow()(rs));return e.copy=function(){return dc(e,HV())},Lo.apply(e,arguments)}function KV(){var e=wP(Ow()).domain([1,10]);return e.copy=function(){return dc(e,KV()).base(e.base())},Lo.apply(e,arguments)}function GV(){var e=jP(Ow());return e.copy=function(){return dc(e,GV()).constant(e.constant())},Lo.apply(e,arguments)}function DP(){var e=_P(Ow());return e.copy=function(){return dc(e,DP()).exponent(e.exponent())},Lo.apply(e,arguments)}function lke(){return DP.apply(null,arguments).exponent(.5)}function YV(){var e=[],t=rs;function r(n){if(n!=null&&!isNaN(n=+n))return t((uv(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Ul),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>GSe(e,i/n))},r.copy=function(){return YV(t).domain(e)},Lo.apply(r,arguments)}function Tw(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=rs,d,f=!1,h;function m(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-i)*(n*p<n*i?l:c),u(f?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,r]=p,a=d(e=+e),i=d(t=+t),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(p){return arguments.length?(f=!!p,m):f},m.interpolator=function(p){return arguments.length?(u=p,m):u};function g(p){return function(v){var x,b,w;return arguments.length?([x,b,w]=v,u=bCe(p,[x,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(Rh),m.rangeRound=g(vP),m.unknown=function(p){return arguments.length?(h=p,m):h},function(p){return d=p,a=p(e),i=p(t),o=p(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function XV(){var e=uc(Tw()(rs));return e.copy=function(){return dc(e,XV())},Lo.apply(e,arguments)}function QV(){var e=wP(Tw()).domain([.1,1,10]);return e.copy=function(){return dc(e,QV()).base(e.base())},Lo.apply(e,arguments)}function ZV(){var e=jP(Tw());return e.copy=function(){return dc(e,ZV()).constant(e.constant())},Lo.apply(e,arguments)}function RP(){var e=_P(Tw());return e.copy=function(){return dc(e,RP()).exponent(e.exponent())},Lo.apply(e,arguments)}function cke(){return RP.apply(null,arguments).exponent(.5)}const JR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Xp,scaleDiverging:XV,scaleDivergingLog:QV,scaleDivergingPow:RP,scaleDivergingSqrt:cke,scaleDivergingSymlog:ZV,scaleIdentity:AV,scaleImplicit:wS,scaleLinear:gb,scaleLog:TV,scaleOrdinal:mP,scalePoint:Jm,scalePow:NP,scaleQuantile:MV,scaleQuantize:$V,scaleRadial:RV,scaleSequential:HV,scaleSequentialLog:KV,scaleSequentialPow:DP,scaleSequentialQuantile:YV,scaleSequentialSqrt:lke,scaleSequentialSymlog:GV,scaleSqrt:VCe,scaleSymlog:DV,scaleThreshold:IV,scaleTime:ike,scaleUtc:oke,tickFormat:PV},Symbol.toStringTag,{value:"Module"}));var uke=Sh;function dke(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!uke(o):r(o,l)))var l=o,c=i}return c}var Dw=dke;function fke(e,t){return e>t}var JV=fke,hke=Dw,mke=JV,pke=Dh;function gke(e){return e&&e.length?hke(e,pke,mke):void 0}var vke=gke;const Rw=Gt(vke);function yke(e,t){return e<t}var eq=yke,xke=Dw,bke=eq,wke=Dh;function jke(e){return e&&e.length?xke(e,wke,bke):void 0}var _ke=jke;const Mw=Gt(_ke);var Nke=Gk,Ske=Vi,Cke=lV,Eke=Ps;function kke(e,t){var r=Eke(e)?Nke:Cke;return r(e,Ske(t))}var Pke=kke,Ake=iV,Oke=Pke;function Tke(e,t){return Ake(Oke(e,t),1)}var Dke=Tke;const Rke=Gt(Dke);var Mke=cP;function $ke(e,t){return Mke(e,t)}var Ike=$ke;const Mh=Gt(Ike);var $h=1e9,Lke={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$P,Cr=!0,ya="[DecimalError] ",su=ya+"Invalid argument: ",MP=ya+"Exponent out of range: ",Ih=Math.floor,Ec=Math.pow,Fke=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Fs,pn=1e7,wr=7,tq=9007199254740991,bb=Ih(tq/wr),De={};De.absoluteValue=De.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};De.comparedTo=De.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};De.decimalPlaces=De.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*wr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};De.dividedBy=De.div=function(e){return po(this,new this.constructor(e))};De.dividedToIntegerBy=De.idiv=function(e){var t=this,r=t.constructor;return ir(po(t,new r(e),0,1),r.precision)};De.equals=De.eq=function(e){return!this.cmp(e)};De.exponent=function(){return Xr(this)};De.greaterThan=De.gt=function(e){return this.cmp(e)>0};De.greaterThanOrEqualTo=De.gte=function(e){return this.cmp(e)>=0};De.isInteger=De.isint=function(){return this.e>this.d.length-2};De.isNegative=De.isneg=function(){return this.s<0};De.isPositive=De.ispos=function(){return this.s>0};De.isZero=function(){return this.s===0};De.lessThan=De.lt=function(e){return this.cmp(e)<0};De.lessThanOrEqualTo=De.lte=function(e){return this.cmp(e)<1};De.logarithm=De.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Fs))throw Error(ya+"NaN");if(r.s<1)throw Error(ya+(r.s?"NaN":"-Infinity"));return r.eq(Fs)?new n(0):(Cr=!1,t=po(tg(r,i),tg(e,i),i),Cr=!0,ir(t,a))};De.minus=De.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sq(t,e):rq(t,(e.s=-e.s,e))};De.modulo=De.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ya+"NaN");return r.s?(Cr=!1,t=po(r,e,0,1).times(e),Cr=!0,r.minus(t)):ir(new n(r),a)};De.naturalExponential=De.exp=function(){return nq(this)};De.naturalLogarithm=De.ln=function(){return tg(this)};De.negated=De.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};De.plus=De.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?rq(t,e):sq(t,(e.s=-e.s,e))};De.precision=De.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(su+e);if(t=Xr(a)+1,n=a.d.length-1,r=n*wr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};De.squareRoot=De.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ya+"NaN")}for(e=Xr(l),Cr=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=xi(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Ih((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(po(l,i,o+2)).times(.5),xi(i.d).slice(0,o)===(t=xi(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(ir(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Cr=!0,ir(n,r)};De.times=De.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+m[n]*h[a-n-1]+t,i[a--]=l%pn|0,t=l/pn|0;i[a]=(i[a]+t)%pn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Cr?ir(e,f.precision):e};De.toDecimalPlaces=De.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Mi(e,0,$h),t===void 0?t=n.rounding:Mi(t,0,8),ir(r,e+Xr(r)+1,t))};De.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Ou(n,!0):(Mi(e,0,$h),t===void 0?t=a.rounding:Mi(t,0,8),n=ir(new a(n),e+1,t),r=Ou(n,!0,e+1)),r};De.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Ou(a):(Mi(e,0,$h),t===void 0?t=i.rounding:Mi(t,0,8),n=ir(new i(a),e+Xr(a)+1,t),r=Ou(n.abs(),!1,e+Xr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};De.toInteger=De.toint=function(){var e=this,t=e.constructor;return ir(new t(e),Xr(e)+1,t.rounding)};De.toNumber=function(){return+this};De.toPower=De.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Fs);if(l=new c(l),!l.s){if(e.s<1)throw Error(ya+"Infinity");return l}if(l.eq(Fs))return l;if(n=c.precision,e.eq(Fs))return ir(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=tq){for(a=new c(Fs),t=Math.ceil(n/wr+4),Cr=!1;r%2&&(a=a.times(l),tM(a.d,t)),r=Ih(r/2),r!==0;)l=l.times(l),tM(l.d,t);return Cr=!0,e.s<0?new c(Fs).div(a):ir(a,n)}}else if(i<0)throw Error(ya+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Cr=!1,a=e.times(tg(l,n+u)),Cr=!0,a=nq(a),a.s=i,a};De.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Xr(a),n=Ou(a,r<=i.toExpNeg||r>=i.toExpPos)):(Mi(e,1,$h),t===void 0?t=i.rounding:Mi(t,0,8),a=ir(new i(a),e,t),r=Xr(a),n=Ou(a,e<=r||r<=i.toExpNeg,e)),n};De.toSignificantDigits=De.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Mi(e,1,$h),t===void 0?t=n.rounding:Mi(t,0,8)),ir(new n(r),e,t)};De.toString=De.valueOf=De.val=De.toJSON=De[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Xr(e),r=e.constructor;return Ou(e,t<=r.toExpNeg||t>=r.toExpPos)};function rq(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Cr?ir(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/wr),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/pn|0,c[i]%=pn;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Cr?ir(t,f):t}function Mi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(su+e)}function xi(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=wr-n.length,r&&(i+=Jo(r)),i+=n;o=e[t],n=o+"",r=wr-n.length,r&&(i+=Jo(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var po=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%pn|0,o=i/pn|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*pn+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,h,m,g,p,v,x,b,w,_,j,N,S,E,C=n.constructor,P=n.s==a.s?1:-1,A=n.d,k=a.d;if(!n.s)return new C(n);if(!a.s)throw Error(ya+"Division by zero");for(c=n.e-a.e,S=k.length,j=A.length,m=new C(P),g=m.d=[],u=0;k[u]==(A[u]||0);)++u;if(k[u]>(A[u]||0)&&--c,i==null?b=i=C.precision:o?b=i+(Xr(n)-Xr(a))+1:b=i,b<0)return new C(0);if(b=b/wr+2|0,u=0,S==1)for(d=0,k=k[0],b++;(u<j||d)&&b--;u++)w=d*pn+(A[u]||0),g[u]=w/k|0,d=w%k|0;else{for(d=pn/(k[0]+1)|0,d>1&&(k=e(k,d),A=e(A,d),S=k.length,j=A.length),_=S,p=A.slice(0,S),v=p.length;v<S;)p[v++]=0;E=k.slice(),E.unshift(0),N=k[0],k[1]>=pn/2&&++N;do d=0,l=t(k,p,S,v),l<0?(x=p[0],S!=v&&(x=x*pn+(p[1]||0)),d=x/N|0,d>1?(d>=pn&&(d=pn-1),f=e(k,d),h=f.length,v=p.length,l=t(f,p,h,v),l==1&&(d--,r(f,S<h?E:k,h))):(d==0&&(l=d=1),f=k.slice()),h=f.length,h<v&&f.unshift(0),r(p,f,v),l==-1&&(v=p.length,l=t(k,p,S,v),l<1&&(d++,r(p,S<v?E:k,v))),v=p.length):l===0&&(d++,p=[0]),g[u++]=d,l&&p[0]?p[v++]=A[_]||0:(p=[A[_]],v=1);while((_++<j||p[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,ir(m,o?i+Xr(m)+1:i)}}();function nq(e,t){var r,n,a,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Xr(e)>16)throw Error(MP+Xr(e));if(!e.s)return new d(Fs);for(t==null?(Cr=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Ec(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(Fs),d.precision=l;;){if(a=ir(a.times(e),l),r=r.times(++c),o=i.plus(po(a,r,l)),xi(o.d).slice(0,l)===xi(i.d).slice(0,l)){for(;u--;)i=ir(i.times(i),l);return d.precision=f,t==null?(Cr=!0,ir(i,f)):i}i=o}}function Xr(e){for(var t=e.e*wr,r=e.d[0];r>=10;r/=10)t++;return t}function L_(e,t,r){if(t>e.LN10.sd())throw Cr=!0,r&&(e.precision=r),Error(ya+"LN10 precision limit exceeded");return ir(new e(e.LN10),t)}function Jo(e){for(var t="";e--;)t+="0";return t}function tg(e,t){var r,n,a,i,o,l,c,u,d,f=1,h=10,m=e,g=m.d,p=m.constructor,v=p.precision;if(m.s<1)throw Error(ya+(m.s?"NaN":"-Infinity"));if(m.eq(Fs))return new p(0);if(t==null?(Cr=!1,u=v):u=t,m.eq(10))return t==null&&(Cr=!0),L_(p,u);if(u+=h,p.precision=u,r=xi(g),n=r.charAt(0),i=Xr(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=xi(m.d),n=r.charAt(0),f++;i=Xr(m),n>1?(m=new p("0."+r),i++):m=new p(n+"."+r.slice(1))}else return c=L_(p,u+2,v).times(i+""),m=tg(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=v,t==null?(Cr=!0,ir(m,v)):m;for(l=o=m=po(m.minus(Fs),m.plus(Fs),u),d=ir(m.times(m),u),a=3;;){if(o=ir(o.times(d),u),c=l.plus(po(o,new p(a),u)),xi(c.d).slice(0,u)===xi(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(L_(p,u+2,v).times(i+""))),l=po(l,new p(f),u),p.precision=v,t==null?(Cr=!0,ir(l,v)):l;l=c,a+=2}}function eM(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Ih(r/wr),e.d=[],n=(r+1)%wr,r<0&&(n+=wr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=wr;n<a;)e.d.push(+t.slice(n,n+=wr));t=t.slice(n),n=wr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Cr&&(e.e>bb||e.e<-bb))throw Error(MP+r)}else e.s=0,e.e=0,e.d=[0];return e}function ir(e,t,r){var n,a,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=wr,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/wr),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=wr,a=n-wr+o}if(r!==void 0&&(i=Ec(10,o-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Ec(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Xr(e),f.length=1,t=t-i-1,f[0]=Ec(10,(wr-t%wr)%wr),e.e=Ih(-t/wr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Ec(10,wr-n),f[d]=a>0?(u/Ec(10,o-a)%Ec(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==pn&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=pn)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Cr&&(e.e>bb||e.e<-bb))throw Error(MP+Xr(e));return e}function sq(e,t){var r,n,a,i,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Cr?ir(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/wr),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=pn-1;--c[i],c[a]+=pn}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Cr?ir(t,m):t):new h(0)}function Ou(e,t,r){var n,a=Xr(e),i=xi(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Jo(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Jo(-a-1)+i,r&&(n=r-o)>0&&(i+=Jo(n))):a>=o?(i+=Jo(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Jo(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Jo(n))),e.s<0?"-"+i:i}function tM(e,t){if(e.length>t)return e.length=t,!0}function aq(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(su+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return eM(o,i.toString())}else if(typeof i!="string")throw Error(su+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Fke.test(i))eM(o,i);else throw Error(su+i)}if(a.prototype=De,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=aq,a.config=a.set=Uke,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function Uke(e){if(!e||typeof e!="object")throw Error(ya+"Object expected");var t,r,n,a=["precision",1,$h,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Ih(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(su+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(su+r+": "+n);return this}var $P=aq(Lke);Fs=new $P(1);const nr=$P;function Bke(e){return Wke(e)||qke(e)||Vke(e)||zke()}function zke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vke(e,t){if(e){if(typeof e=="string")return SS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SS(e,t)}}function qke(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Wke(e){if(Array.isArray(e))return SS(e)}function SS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Hke=function(t){return t},iq={"@@functional/placeholder":!0},oq=function(t){return t===iq},rM=function(t){return function r(){return arguments.length===0||arguments.length===1&&oq(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Kke=function e(t,r){return t===1?r:rM(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==iq}).length;return o>=t?r.apply(void 0,a):e(t-o,rM(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return oq(f)?c.shift():f});return r.apply(void 0,Bke(d).concat(c))}))})},$w=function(t){return Kke(t.length,t)},CS=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},Gke=$w(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Yke=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Hke;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},ES=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},lq=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function Xke(e){var t;return e===0?t=1:t=Math.floor(new nr(e).abs().log(10).toNumber())+1,t}function Qke(e,t,r){for(var n=new nr(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var Zke=$w(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),Jke=$w(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),ePe=$w(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Iw={rangeStep:Qke,getDigitCount:Xke,interpolateNumber:Zke,uninterpolateNumber:Jke,uninterpolateTruncation:ePe};function kS(e){return nPe(e)||rPe(e)||cq(e)||tPe()}function tPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rPe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function nPe(e){if(Array.isArray(e))return PS(e)}function rg(e,t){return iPe(e)||aPe(e,t)||cq(e,t)||sPe()}function sPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cq(e,t){if(e){if(typeof e=="string")return PS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PS(e,t)}}function PS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aPe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function iPe(e){if(Array.isArray(e))return e}function uq(e){var t=rg(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function dq(e,t,r){if(e.lte(0))return new nr(0);var n=Iw.getDigitCount(e.toNumber()),a=new nr(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new nr(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new nr(Math.ceil(c))}function oPe(e,t,r){var n=1,a=new nr(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new nr(10).pow(Iw.getDigitCount(e)-1),a=new nr(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new nr(Math.floor(e)))}else e===0?a=new nr(Math.floor((t-1)/2)):r||(a=new nr(Math.floor(e)));var o=Math.floor((t-1)/2),l=Yke(Gke(function(c){return a.add(new nr(c-o).mul(n)).toNumber()}),CS);return l(0,t)}function fq(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new nr(0),tickMin:new nr(0),tickMax:new nr(0)};var i=dq(new nr(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new nr(0):(o=new nr(e).add(t).div(2),o=o.sub(new nr(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new nr(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?fq(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new nr(l).mul(i)),tickMax:o.add(new nr(c).mul(i))})}function lPe(e){var t=rg(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=uq([r,n]),c=rg(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(kS(CS(0,a-1).map(function(){return 1/0}))):[].concat(kS(CS(0,a-1).map(function(){return-1/0})),[d]);return r>n?ES(f):f}if(u===d)return oPe(u,a,i);var h=fq(u,d,o,i),m=h.step,g=h.tickMin,p=h.tickMax,v=Iw.rangeStep(g,p.add(new nr(.1).mul(m)),m);return r>n?ES(v):v}function cPe(e,t){var r=rg(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=uq([n,a]),l=rg(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=dq(new nr(u).sub(c).div(d-1),i,0),h=[].concat(kS(Iw.rangeStep(new nr(c),new nr(u).sub(new nr(.99).mul(f)),f)),[u]);return n>a?ES(h):h}var uPe=lq(lPe),dPe=lq(cPe),fPe="Invariant failed";function Tu(e,t){throw new Error(fPe)}var hPe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}function wb(){return wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wb.apply(this,arguments)}function mPe(e,t){return yPe(e)||vPe(e,t)||gPe(e,t)||pPe()}function pPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gPe(e,t){if(e){if(typeof e=="string")return nM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nM(e,t)}}function nM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vPe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function yPe(e){if(Array.isArray(e))return e}function xPe(e,t){if(e==null)return{};var r=bPe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function wPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pq(n.key),n)}}function _Pe(e,t,r){return t&&jPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NPe(e,t,r){return t=jb(t),SPe(e,hq()?Reflect.construct(t,r||[],jb(e).constructor):t.apply(e,r))}function SPe(e,t){if(t&&(zf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CPe(e)}function CPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hq=function(){return!!e})()}function jb(e){return jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jb(e)}function EPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AS(e,t)}function AS(e,t){return AS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},AS(e,t)}function mq(e,t,r){return t=pq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pq(e){var t=kPe(e,"string");return zf(t)=="symbol"?t:t+""}function kPe(e,t){if(zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mv=function(e){function t(){return wPe(this,t),NPe(this,t,arguments)}return EPe(t,e),_Pe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=xPe(n,hPe),m=qe(h,!1);this.props.direction==="x"&&d.type!=="number"&&Tu();var g=c.map(function(p){var v=u(p,l),x=v.x,b=v.y,w=v.value,_=v.errorVal;if(!_)return null;var j=[],N,S;if(Array.isArray(_)){var E=mPe(_,2);N=E[0],S=E[1]}else N=S=_;if(i==="vertical"){var C=d.scale,P=b+a,A=P+o,k=P-o,D=C(w-N),R=C(w+S);j.push({x1:R,y1:A,x2:R,y2:k}),j.push({x1:D,y1:P,x2:R,y2:P}),j.push({x1:D,y1:A,x2:D,y2:k})}else if(i==="horizontal"){var U=f.scale,B=x+a,L=B-o,M=B+o,T=U(w-N),F=U(w+S);j.push({x1:L,y1:F,x2:M,y2:F}),j.push({x1:B,y1:T,x2:B,y2:F}),j.push({x1:L,y1:T,x2:M,y2:T})}return O.createElement(Mt,wb({className:"recharts-errorBar",key:"bar-".concat(j.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},m),j.map(function(Z){return O.createElement("line",wb({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return O.createElement(Mt,{className:"recharts-errorBars"},g)}}])}(O.Component);mq(mv,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});mq(mv,"displayName","ErrorBar");function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function sM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sM(Object(r),!0).forEach(function(n){PPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PPe(e,t,r){return t=APe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function APe(e){var t=OPe(e,"string");return ng(t)=="symbol"?t:t+""}function OPe(e,t){if(ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gq=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=$s(r,ru);if(!o)return null;var l=ru.defaultProps,c=l!==void 0?yc(yc({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,g=m.sectors||m.data||[];return d.concat(g.map(function(p){return{type:o.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?yc(yc({},h),f.props):{},g=m.dataKey,p=m.name,v=m.legendType,x=m.hide;return{inactive:x,dataKey:g,type:c.iconType||v||"square",color:IP(f),value:p||g,payload:m}}),yc(yc(yc({},c),ru.getWithHeight(o,a)),{},{payload:u,item:o})};function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}function aM(e){return MPe(e)||RPe(e)||DPe(e)||TPe()}function TPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DPe(e,t){if(e){if(typeof e=="string")return OS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OS(e,t)}}function RPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MPe(e){if(Array.isArray(e))return OS(e)}function OS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iM(Object(r),!0).forEach(function(n){Zd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zd(e,t,r){return t=$Pe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Pe(e){var t=IPe(e,"string");return sg(t)=="symbol"?t:t+""}function IPe(e,t){if(sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Br(e,t,r){return it(e)||it(t)?r:cn(t)?Vs(e,t,r):Xe(t)?t(e):r}function ep(e,t,r,n){var a=Rke(e,function(l){return Br(l,t)});if(r==="number"){var i=a.filter(function(l){return je(l)||parseFloat(l)});return i.length?[Mw(i),Rw(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!it(l)}):a;return o.map(function(l){return cn(l)||l instanceof Date?l:""})}var LPe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(es(f-d)!==es(h-f)){var g=[];if(es(h-f)===es(c[1]-c[0])){m=h;var p=f+c[1]-c[0];g[0]=Math.min(p,(p+d)/2),g[1]=Math.max(p,(p+d)/2)}else{m=d;var v=h+c[1]-c[0];g[0]=Math.min(f,(v+f)/2),g[1]=Math.max(f,(v+f)/2)}var x=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>x[0]&&t<=x[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var b=Math.min(d,h),w=Math.max(d,h);if(t>(b+f)/2&&t<=(w+f)/2){o=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}return o},IP=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Ir(Ir({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},FPe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var g=d[f[h]],p=g.items,v=g.cateAxisId,x=p.filter(function(S){return mo(S.type).indexOf("Bar")>=0});if(x&&x.length){var b=x[0].type.defaultProps,w=b!==void 0?Ir(Ir({},b),x[0].props):x[0].props,_=w.barSize,j=w[v];o[j]||(o[j]=[]);var N=it(_)?r:_;o[j].push({item:x[0],stackList:x.slice(1),barSize:it(N)?void 0:ts(N,n,0)})}}return o},UPe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=ts(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,g=o.reduce(function(_,j){return _+j.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var p=(a-g)/2>>0,v={offset:p-u,size:0};d=o.reduce(function(_,j){var N={item:j.item,position:{offset:v.offset+v.size+u,size:h?m:j.barSize}},S=[].concat(aM(_),[N]);return v=S[S.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(E){S.push({item:E,position:v})}),S},f)}else{var x=ts(n,a,0,!0);a-2*x-(c-1)*u<=0&&(u=0);var b=(a-2*x-(c-1)*u)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;d=o.reduce(function(_,j,N){var S=[].concat(aM(_),[{item:j.item,position:{offset:x+(b+u)*N+(b-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(E){S.push({item:E,position:S[S.length-1].position})}),S},f)}return d},BPe=function(t,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=gq({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,g=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&m!=="center"&&je(t[m]))return Ir(Ir({},t),{},Zd({},m,t[m]+(f||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&g!=="middle"&&je(t[g]))return Ir(Ir({},t),{},Zd({},g,t[g]+(h||0)))}return t},zPe=function(t,r,n){return it(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},vq=function(t,r,n,a,i){var o=r.props.children,l=qs(o,mv).filter(function(u){return zPe(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Br(d,n);if(it(f))return u;var h=Array.isArray(f)?[Mw(f),Rw(f)]:[f,f],m=c.reduce(function(g,p){var v=Br(d,p,0),x=h[0]-Math.abs(Array.isArray(v)?v[0]:v),b=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(x,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},VPe=function(t,r,n,a,i){var o=r.map(function(l){return vq(t,l,n,i,a)}).filter(function(l){return!it(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},yq=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&vq(t,c,u,a)||ep(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},xq=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},bq=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},uo=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?es(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!lv(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},F_=new WeakMap,py=function(t,r){if(typeof r!="function")return t;F_.has(t)||F_.set(t,new WeakMap);var n=F_.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},wq=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Xp(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:gb(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Jm(),realScaleType:"point"}:i==="category"?{scale:Xp(),realScaleType:"band"}:{scale:gb(),realScaleType:"linear"};if(ku(a)){var c="scale".concat(xw(a));return{scale:(JR[c]||Jm)(),realScaleType:JR[c]?c:"point"}}return Xe(a)?{scale:a}:{scale:Jm(),realScaleType:"point"}},oM=1e-4,jq=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-oM,o=Math.max(a[0],a[1])+oM,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},qPe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},WPe=function(t,r){if(!r||r.length!==2||!je(r[0])||!je(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!je(t[0])||t[0]<n)&&(i[0]=n),(!je(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},HPe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=lv(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},KPe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=lv(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},GPe={sign:HPe,expand:hye,none:Rf,silhouette:mye,wiggle:pye,positive:KPe},YPe=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=GPe[n],o=fye().keys(a).value(function(l,c){return+Br(l,c,0)}).order(rS).offset(i);return o(t)},XPe=function(t,r,n,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Ir(Ir({},h.type.defaultProps),h.props):h.props,p=g.stackId,v=g.hide;if(v)return f;var x=g[n],b=f[x]||{hasStack:!1,stackGroups:{}};if(cn(p)){var w=b.stackGroups[p]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[p]=w}else b.stackGroups[Ah("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Ir(Ir({},f),{},Zd({},x,b))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,v){var x=m.stackGroups[v];return Ir(Ir({},p),{},Zd({},v,{numericAxisId:n,cateAxisId:a,items:x.items,stackedData:YPe(t,x.items,i)}))},g)}return Ir(Ir({},f),{},Zd({},h,m))},d)},_q=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=uPe(u,i,l);return t.domain([Mw(d),Rw(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=dPe(f,i,l);return{niceTicks:h}}return null};function lM(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!it(a[t.dataKey])){var l=Yx(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Br(a,it(o)?t.dataKey:o);return it(c)?null:t.scale(c)}var cM=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=Br(o,r.dataKey,r.domain[l]);return it(c)?null:r.scale(c)-i/2+a},QPe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},ZPe=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Ir(Ir({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(cn(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},JPe=function(t){return t.reduce(function(r,n){return[Mw(n.concat([r[0]]).filter(je)),Rw(n.concat([r[1]]).filter(je))]},[1/0,-1/0])},Nq=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=JPe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},uM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,TS=function(t,r,n){if(Xe(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(je(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(uM.test(t[0])){var i=+uM.exec(t[0])[1];a[0]=r[0]-i}else Xe(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(je(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(dM.test(t[1])){var o=+dM.exec(t[1])[1];a[1]=r[1]+o}else Xe(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},_b=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=dP(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},fM=function(t,r,n){return!t||!t.length||Mh(t,Vs(n,"type.defaultProps.domain"))?r:t},Sq=function(t,r){var n=t.type.defaultProps?Ir(Ir({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Ir(Ir({},qe(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:IP(t),value:Br(r,a),type:c,payload:r,chartType:u,hide:d})};function ag(e){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ag(e)}function hM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hM(Object(r),!0).forEach(function(n){Cq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cq(e,t,r){return t=eAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eAe(e){var t=tAe(e,"string");return ag(t)=="symbol"?t:t+""}function tAe(e,t){if(ag(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rAe(e,t){return iAe(e)||aAe(e,t)||sAe(e,t)||nAe()}function nAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sAe(e,t){if(e){if(typeof e=="string")return mM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mM(e,t)}}function mM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aAe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function iAe(e){if(Array.isArray(e))return e}var Nb=Math.PI/180,oAe=function(t){return t*180/Math.PI},Kt=function(t,r,n,a){return{x:t+Math.cos(-Nb*a)*n,y:r+Math.sin(-Nb*a)*n}},Eq=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},kq=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=ts(t.cx,o,o/2),f=ts(t.cy,l,l/2),h=Eq(o,l,n),m=ts(t.innerRadius,h,0),g=ts(t.outerRadius,h,h*.8),p=Object.keys(r);return p.reduce(function(v,x){var b=r[x],w=b.domain,_=b.reversed,j;if(it(b.range))a==="angleAxis"?j=[c,u]:a==="radiusAxis"&&(j=[m,g]),_&&(j=[j[1],j[0]]);else{j=b.range;var N=j,S=rAe(N,2);c=S[0],u=S[1]}var E=wq(b,i),C=E.realScaleType,P=E.scale;P.domain(w).range(j),jq(P);var A=_q(P,Ji(Ji({},b),{},{realScaleType:C})),k=Ji(Ji(Ji({},b),A),{},{range:j,radius:g,realScaleType:C,scale:P,cx:d,cy:f,innerRadius:m,outerRadius:g,startAngle:c,endAngle:u});return Ji(Ji({},v),{},Cq({},x,k))},{})},lAe=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},cAe=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,l=lAe({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:oAe(u),angleInRadian:u}},uAe=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},dAe=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},pM=function(t,r){var n=t.x,a=t.y,i=cAe({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=uAe(r),f=d.startAngle,h=d.endAngle,m=l,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?Ji(Ji({},r),{},{radius:o,angle:dAe(m,r)}):null},Pq=function(t){return!y.isValidElement(t)&&!Xe(t)&&typeof t!="boolean"?t.className:""};function ig(e){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ig(e)}var fAe=["offset"];function hAe(e){return vAe(e)||gAe(e)||pAe(e)||mAe()}function mAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pAe(e,t){if(e){if(typeof e=="string")return DS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DS(e,t)}}function gAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vAe(e){if(Array.isArray(e))return DS(e)}function DS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yAe(e,t){if(e==null)return{};var r=xAe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function gM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function en(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gM(Object(r),!0).forEach(function(n){bAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bAe(e,t,r){return t=wAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wAe(e){var t=jAe(e,"string");return ig(t)=="symbol"?t:t+""}function jAe(e,t){if(ig(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function og(){return og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},og.apply(this,arguments)}var _Ae=function(t){var r=t.value,n=t.formatter,a=it(t.children)?r:t.children;return Xe(n)?n(a):a},NAe=function(t,r){var n=es(r-t),a=Math.min(Math.abs(r-t),360);return n*a},SAe=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,p=c.clockWise,v=(f+h)/2,x=NAe(m,g),b=x>=0?1:-1,w,_;a==="insideStart"?(w=m+b*o,_=p):a==="insideEnd"?(w=g-b*o,_=!p):a==="end"&&(w=g+b*o,_=p),_=x<=0?_:!_;var j=Kt(u,d,v,w),N=Kt(u,d,v,w+(_?1:-1)*359),S="M".concat(j.x,",").concat(j.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(_?0:1,`,
    `).concat(N.x,",").concat(N.y),E=it(t.id)?Ah("recharts-radial-line-"):t.id;return O.createElement("text",og({},n,{dominantBaseline:"central",className:st("recharts-radial-bar-label",l)}),O.createElement("defs",null,O.createElement("path",{id:E,d:S})),O.createElement("textPath",{xlinkHref:"#".concat(E)},r))},CAe=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var m=Kt(o,l,u+n,h),g=m.x,p=m.y;return{x:g,y:p,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,x=Kt(o,l,v,h),b=x.x,w=x.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},EAe=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",g=f>0?"start":"end",p=u>=0?1:-1,v=p*a,x=p>0?"end":"start",b=p>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return en(en({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return en(en({},_),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return en(en({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(i==="right"){var N={x:l+u+v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return en(en({},N),n?{width:Math.max(n.x+n.width-N.x,0),height:d}:{})}var S=n?{width:u,height:d}:{};return i==="insideLeft"?en({x:l+v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},S):i==="insideRight"?en({x:l+u-v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},S):i==="insideTop"?en({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},S):i==="insideBottom"?en({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},S):i==="insideTopLeft"?en({x:l+v,y:c+h,textAnchor:b,verticalAnchor:g},S):i==="insideTopRight"?en({x:l+u-v,y:c+h,textAnchor:x,verticalAnchor:g},S):i==="insideBottomLeft"?en({x:l+v,y:c+d-h,textAnchor:b,verticalAnchor:m},S):i==="insideBottomRight"?en({x:l+u-v,y:c+d-h,textAnchor:x,verticalAnchor:m},S):Ch(i)&&(je(i.x)||Fc(i.x))&&(je(i.y)||Fc(i.y))?en({x:l+ts(i.x,u),y:c+ts(i.y,d),textAnchor:"end",verticalAnchor:"end"},S):en({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},kAe=function(t){return"cx"in t&&je(t.cx)};function vn(e){var t=e.offset,r=t===void 0?5:t,n=yAe(e,fAe),a=en({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||it(l)&&it(c)&&!y.isValidElement(u)&&!Xe(u))return null;if(y.isValidElement(u))return y.cloneElement(u,a);var m;if(Xe(u)){if(m=y.createElement(u,a),y.isValidElement(m))return m}else m=_Ae(a);var g=kAe(i),p=qe(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return SAe(a,m,p);var v=g?CAe(a):EAe(a);return O.createElement(Au,og({className:st("recharts-label",f)},p,v,{breakAll:h}),m)}vn.displayName="Label";var Aq=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,g=t.left,p=t.width,v=t.height,x=t.clockWise,b=t.labelViewBox;if(b)return b;if(je(p)&&je(v)){if(je(f)&&je(h))return{x:f,y:h,width:p,height:v};if(je(m)&&je(g))return{x:m,y:g,width:p,height:v}}return je(f)&&je(h)?{x:f,y:h,width:0,height:0}:je(r)&&je(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:x}:t.viewBox?t.viewBox:{}},PAe=function(t,r){return t?t===!0?O.createElement(vn,{key:"label-implicit",viewBox:r}):cn(t)?O.createElement(vn,{key:"label-implicit",viewBox:r,value:t}):y.isValidElement(t)?t.type===vn?y.cloneElement(t,{key:"label-implicit",viewBox:r}):O.createElement(vn,{key:"label-implicit",content:t,viewBox:r}):Xe(t)?O.createElement(vn,{key:"label-implicit",content:t,viewBox:r}):Ch(t)?O.createElement(vn,og({viewBox:r},t,{key:"label-implicit"})):null:null},AAe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=Aq(t),o=qs(a,vn).map(function(c,u){return y.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=PAe(t.label,r||i);return[l].concat(hAe(o))};vn.parseViewBox=Aq;vn.renderCallByParent=AAe;function OAe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var TAe=OAe;const Oq=Gt(TAe);function lg(e){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lg(e)}var DAe=["valueAccessor"],RAe=["data","dataKey","clockWise","id","textBreakAll"];function MAe(e){return FAe(e)||LAe(e)||IAe(e)||$Ae()}function $Ae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IAe(e,t){if(e){if(typeof e=="string")return RS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RS(e,t)}}function LAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FAe(e){if(Array.isArray(e))return RS(e)}function RS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sb.apply(this,arguments)}function vM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vM(Object(r),!0).forEach(function(n){UAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UAe(e,t,r){return t=BAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BAe(e){var t=zAe(e,"string");return lg(t)=="symbol"?t:t+""}function zAe(e,t){if(lg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xM(e,t){if(e==null)return{};var r=VAe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function VAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var qAe=function(t){return Array.isArray(t.value)?Oq(t.value):t.value};function Si(e){var t=e.valueAccessor,r=t===void 0?qAe:t,n=xM(e,DAe),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=xM(n,RAe);return!a||!a.length?null:O.createElement(Mt,{className:"recharts-label-list"},a.map(function(d,f){var h=it(i)?r(d,f):Br(d&&d.payload,i),m=it(l)?{}:{id:"".concat(l,"-").concat(f)};return O.createElement(vn,Sb({},qe(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:vn.parseViewBox(it(o)?d:yM(yM({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Si.displayName="LabelList";function WAe(e,t){return e?e===!0?O.createElement(Si,{key:"labelList-implicit",data:t}):O.isValidElement(e)||Xe(e)?O.createElement(Si,{key:"labelList-implicit",data:t,content:e}):Ch(e)?O.createElement(Si,Sb({data:t},e,{key:"labelList-implicit"})):null:null}function HAe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=qs(n,Si).map(function(o,l){return y.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=WAe(e.label,t);return[i].concat(MAe(a))}Si.renderCallByParent=HAe;function cg(e){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cg(e)}function MS(){return MS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MS.apply(this,arguments)}function bM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bM(Object(r),!0).forEach(function(n){KAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KAe(e,t,r){return t=GAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GAe(e){var t=YAe(e,"string");return cg(t)=="symbol"?t:t+""}function YAe(e,t){if(cg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XAe=function(t,r){var n=es(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},gy=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/Nb,h=u?i:i+o*f,m=Kt(r,n,d,h),g=Kt(r,n,a,h),p=u?i-o*f:i,v=Kt(r,n,d*Math.cos(f*Nb),p);return{center:m,circleTangency:g,lineTangency:v,theta:f}},Tq=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=XAe(o,l),u=o+c,d=Kt(r,n,i,o),f=Kt(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=Kt(r,n,a,o),g=Kt(r,n,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},QAe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=es(d-u),h=gy({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,p=h.theta,v=gy({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),x=v.circleTangency,b=v.lineTangency,w=v.theta,_=c?Math.abs(u-d):Math.abs(u-d)-p-w;if(_<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Tq({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var N=gy({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=N.circleTangency,E=N.lineTangency,C=N.theta,P=gy({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=P.circleTangency,k=P.lineTangency,D=P.theta,R=c?Math.abs(u-d):Math.abs(u-d)-C-D;if(R<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(R>180),",").concat(+(f>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},ZAe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Dq=function(t){var r=wM(wM({},ZAe),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<i||d===f)return null;var m=st("recharts-sector",h),g=o-i,p=ts(l,g,0,!0),v;return p>0&&Math.abs(d-f)<360?v=QAe({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):v=Tq({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),O.createElement("path",MS({},qe(r,!0),{className:m,d:v,role:"img"}))};function ug(e){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ug(e)}function $S(){return $S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$S.apply(this,arguments)}function jM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _M(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jM(Object(r),!0).forEach(function(n){JAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JAe(e,t,r){return t=eOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eOe(e){var t=tOe(e,"string");return ug(t)=="symbol"?t:t+""}function tOe(e,t){if(ug(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NM={curveBasisClosed:tye,curveBasisOpen:rye,curveBasis:eye,curveBumpX:Uve,curveBumpY:Bve,curveLinearClosed:nye,curveLinear:ww,curveMonotoneX:sye,curveMonotoneY:aye,curveNatural:iye,curveStep:oye,curveStepAfter:cye,curveStepBefore:lye},vy=function(t){return t.x===+t.x&&t.y===+t.y},bm=function(t){return t.x},wm=function(t){return t.y},rOe=function(t,r){if(Xe(t))return t;var n="curve".concat(xw(t));return(n==="curveMonotone"||n==="curveBump")&&r?NM["".concat(n).concat(r==="vertical"?"Y":"X")]:NM[n]||ww},nOe=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=rOe(n,l),f=u?i.filter(function(p){return vy(p)}):i,h;if(Array.isArray(o)){var m=u?o.filter(function(p){return vy(p)}):o,g=f.map(function(p,v){return _M(_M({},p),{},{base:m[v]})});return l==="vertical"?h=oy().y(wm).x1(bm).x0(function(p){return p.base.x}):h=oy().x(bm).y1(wm).y0(function(p){return p.base.y}),h.defined(vy).curve(d),h(g)}return l==="vertical"&&je(o)?h=oy().y(wm).x1(bm).x0(o):je(o)?h=oy().x(bm).y1(wm).y0(o):h=Sz().x(bm).y(wm),h.defined(vy).curve(d),h(f)},Cb=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?nOe(t):a;return y.createElement("path",$S({},qe(t,!1),Xx(t),{className:st("recharts-curve",r),d:o,ref:i}))},Rq={exports:{}},sOe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",aOe=sOe,iOe=aOe;function Mq(){}function $q(){}$q.resetWarningCache=Mq;var oOe=function(){function e(n,a,i,o,l,c){if(c!==iOe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:$q,resetWarningCache:Mq};return r.PropTypes=r,r};Rq.exports=oOe();var lOe=Rq.exports;const Xt=Gt(lOe);var cOe=Object.getOwnPropertyNames,uOe=Object.getOwnPropertySymbols,dOe=Object.prototype.hasOwnProperty;function SM(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function yy(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function CM(e){return cOe(e).concat(uOe(e))}var fOe=Object.hasOwn||function(e,t){return dOe.call(e,t)};function Gu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var hOe="__v",mOe="__o",pOe="_owner",EM=Object.getOwnPropertyDescriptor,kM=Object.keys;function gOe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function vOe(e,t){return Gu(e.getTime(),t.getTime())}function yOe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function xOe(e,t){return e===t}function PM(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,m=l.value;if(r.equals(h[0],m[0],c,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var bOe=Gu;function wOe(e,t,r){var n=kM(e),a=n.length;if(kM(t).length!==a)return!1;for(;a-- >0;)if(!Iq(e,t,r,n[a]))return!1;return!0}function jm(e,t,r){var n=CM(e),a=n.length;if(CM(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!Iq(e,t,r,i)||(o=EM(e,i),l=EM(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function jOe(e,t){return Gu(e.valueOf(),t.valueOf())}function _Oe(e,t){return e.source===t.source&&e.flags===t.flags}function AM(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function NOe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function SOe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Iq(e,t,r,n){return(n===pOe||n===mOe||n===hOe)&&(e.$$typeof||t.$$typeof)?!0:fOe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var COe="[object Arguments]",EOe="[object Boolean]",kOe="[object Date]",POe="[object Error]",AOe="[object Map]",OOe="[object Number]",TOe="[object Object]",DOe="[object RegExp]",ROe="[object Set]",MOe="[object String]",$Oe="[object URL]",IOe=Array.isArray,OM=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,TM=Object.assign,LOe=Object.prototype.toString.call.bind(Object.prototype.toString);function FOe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,p,v){if(g===p)return!0;if(g==null||p==null)return!1;var x=typeof g;if(x!==typeof p)return!1;if(x!=="object")return x==="number"?o(g,p,v):x==="function"?a(g,p,v):!1;var b=g.constructor;if(b!==p.constructor)return!1;if(b===Object)return l(g,p,v);if(IOe(g))return t(g,p,v);if(OM!=null&&OM(g))return f(g,p,v);if(b===Date)return r(g,p,v);if(b===RegExp)return u(g,p,v);if(b===Map)return i(g,p,v);if(b===Set)return d(g,p,v);var w=LOe(g);return w===kOe?r(g,p,v):w===DOe?u(g,p,v):w===AOe?i(g,p,v):w===ROe?d(g,p,v):w===TOe?typeof g.then!="function"&&typeof p.then!="function"&&l(g,p,v):w===$Oe?h(g,p,v):w===POe?n(g,p,v):w===COe?l(g,p,v):w===EOe||w===OOe||w===MOe?c(g,p,v):!1}}function UOe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?jm:gOe,areDatesEqual:vOe,areErrorsEqual:yOe,areFunctionsEqual:xOe,areMapsEqual:n?SM(PM,jm):PM,areNumbersEqual:bOe,areObjectsEqual:n?jm:wOe,arePrimitiveWrappersEqual:jOe,areRegExpsEqual:_Oe,areSetsEqual:n?SM(AM,jm):AM,areTypedArraysEqual:n?jm:NOe,areUrlsEqual:SOe};if(r&&(a=TM({},a,r(a))),t){var i=yy(a.areArraysEqual),o=yy(a.areMapsEqual),l=yy(a.areObjectsEqual),c=yy(a.areSetsEqual);a=TM({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function BOe(e){return function(t,r,n,a,i,o,l){return e(t,r,l)}}function zOe(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(c,u,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var VOe=fc();fc({strict:!0});fc({circular:!0});fc({circular:!0,strict:!0});fc({createInternalComparator:function(){return Gu}});fc({strict:!0,createInternalComparator:function(){return Gu}});fc({circular:!0,createInternalComparator:function(){return Gu}});fc({circular:!0,createInternalComparator:function(){return Gu},strict:!0});function fc(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=UOe(e),c=FOe(l),u=n?n(c):BOe(c);return zOe({circular:r,comparator:c,createState:a,equals:u,strict:o})}function qOe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function DM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):qOe(a)};requestAnimationFrame(n)}function IS(e){"@babel/helpers - typeof";return IS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IS(e)}function WOe(e){return YOe(e)||GOe(e)||KOe(e)||HOe()}function HOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KOe(e,t){if(e){if(typeof e=="string")return RM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RM(e,t)}}function RM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YOe(e){if(Array.isArray(e))return e}function XOe(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=WOe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){DM(a.bind(null,u),c);return}a(c),DM(a.bind(null,u));return}IS(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function dg(e){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dg(e)}function MM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $M(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MM(Object(r),!0).forEach(function(n){Lq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lq(e,t,r){return t=QOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QOe(e){var t=ZOe(e,"string");return dg(t)==="symbol"?t:String(t)}function ZOe(e,t){if(dg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JOe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},e2e=function(t){return t},t2e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},tp=function(t,r){return Object.keys(r).reduce(function(n,a){return $M($M({},n),{},Lq({},a,t(a,r[a])))},{})},IM=function(t,r,n){return t.map(function(a){return"".concat(t2e(a)," ").concat(r,"ms ").concat(n)}).join(",")};function r2e(e,t){return a2e(e)||s2e(e,t)||Fq(e,t)||n2e()}function n2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s2e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function a2e(e){if(Array.isArray(e))return e}function i2e(e){return c2e(e)||l2e(e)||Fq(e)||o2e()}function o2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fq(e,t){if(e){if(typeof e=="string")return LS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LS(e,t)}}function l2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function c2e(e){if(Array.isArray(e))return LS(e)}function LS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Eb=1e-4,Uq=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},Bq=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},LM=function(t,r){return function(n){var a=Uq(t,r);return Bq(a,n)}},u2e=function(t,r){return function(n){var a=Uq(t,r),i=[].concat(i2e(a.map(function(o,l){return o*l}).slice(1)),[0]);return Bq(i,n)}},FM=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=r2e(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var f=LM(a,o),h=LM(i,l),m=u2e(a,o),g=function(x){return x>1?1:x<0?0:x},p=function(x){for(var b=x>1?1:x,w=b,_=0;_<8;++_){var j=f(w)-b,N=m(w);if(Math.abs(j-b)<Eb||N<Eb)return h(w);w=g(w-j/N)}return h(w)};return p.isStepper=!1,p},d2e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var m=-(d-f)*n,g=h*i,p=h+(m-g)*l/1e3,v=h*l/1e3+d;return Math.abs(v-f)<Eb&&Math.abs(p)<Eb?[f,0]:[v,p]};return c.isStepper=!0,c.dt=l,c},f2e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return FM(a);case"spring":return d2e();default:if(a.split("(")[0]==="cubic-bezier")return FM(a)}return typeof a=="function"?a:null};function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}function UM(e){return p2e(e)||m2e(e)||zq(e)||h2e()}function h2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function p2e(e){if(Array.isArray(e))return US(e)}function BM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BM(Object(r),!0).forEach(function(n){FS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FS(e,t,r){return t=g2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g2e(e){var t=v2e(e,"string");return fg(t)==="symbol"?t:String(t)}function v2e(e,t){if(fg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y2e(e,t){return w2e(e)||b2e(e,t)||zq(e,t)||x2e()}function x2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zq(e,t){if(e){if(typeof e=="string")return US(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return US(e,t)}}function US(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b2e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function w2e(e){if(Array.isArray(e))return e}var kb=function(t,r,n){return t+(r-t)*n},BS=function(t){var r=t.from,n=t.to;return r!==n},j2e=function e(t,r,n){var a=tp(function(i,o){if(BS(o)){var l=t(o.from,o.to,o.velocity),c=y2e(l,2),u=c[0],d=c[1];return Sn(Sn({},o),{},{from:u,velocity:d})}return o},r);return n<1?tp(function(i,o){return BS(o)?Sn(Sn({},o),{},{velocity:kb(o.velocity,a[i].velocity,n),from:kb(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const _2e=function(e,t,r,n,a){var i=JOe(e,t),o=i.reduce(function(v,x){return Sn(Sn({},v),{},FS({},x,[e[x],t[x]]))},{}),l=i.reduce(function(v,x){return Sn(Sn({},v),{},FS({},x,{from:e[x],velocity:0,to:t[x]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return tp(function(x,b){return b.from},l)},m=function(){return!Object.values(l).filter(BS).length},g=function(x){u||(u=x);var b=x-u,w=b/r.dt;l=j2e(r,l,w),a(Sn(Sn(Sn({},e),t),h())),u=x,m()||(c=requestAnimationFrame(f))},p=function(x){d||(d=x);var b=(x-d)/n,w=tp(function(j,N){return kb.apply(void 0,UM(N).concat([r(b)]))},o);if(a(Sn(Sn(Sn({},e),t),w)),b<1)c=requestAnimationFrame(f);else{var _=tp(function(j,N){return kb.apply(void 0,UM(N).concat([r(1)]))},o);a(Sn(Sn(Sn({},e),t),_))}};return f=r.isStepper?g:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}var N2e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function S2e(e,t){if(e==null)return{};var r=C2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C2e(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function U_(e){return A2e(e)||P2e(e)||k2e(e)||E2e()}function E2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k2e(e,t){if(e){if(typeof e=="string")return zS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zS(e,t)}}function P2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function A2e(e){if(Array.isArray(e))return zS(e)}function zS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zM(Object(r),!0).forEach(function(n){Mm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mm(e,t,r){return t=Vq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T2e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vq(n.key),n)}}function D2e(e,t,r){return t&&T2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vq(e){var t=R2e(e,"string");return Vf(t)==="symbol"?t:String(t)}function R2e(e,t){if(Vf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VS(e,t)}function VS(e,t){return VS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},VS(e,t)}function $2e(e){var t=I2e();return function(){var n=Pb(e),a;if(t){var i=Pb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return qS(this,a)}}function qS(e,t){if(t&&(Vf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WS(e)}function WS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pb(e){return Pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pb(e)}var ni=function(e){M2e(r,e);var t=$2e(r);function r(n,a){var i;O2e(this,r),i=t.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(WS(i)),i.changeStyle=i.changeStyle.bind(WS(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),qS(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},qS(i);i.state={style:c?Mm({},c,u):u}}else i.state={style:{}};return i}return D2e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!o){var m={style:c?Mm({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(VOe(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||u?f:a.to;if(this.state&&h){var v={style:c?Mm({},c,p):p};(c&&h[c]!==p||!c&&h!==p)&&this.setState(v)}this.runAnimation(Aa(Aa({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=_2e(o,l,f2e(u),c,this.changeStyle),g=function(){i.stopJSAnimation=m()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(p,v,x){if(x===0)return p;var b=v.duration,w=v.easing,_=w===void 0?"ease":w,j=v.style,N=v.properties,S=v.onAnimationEnd,E=x>0?o[x-1]:v,C=N||Object.keys(j);if(typeof _=="function"||_==="spring")return[].concat(U_(p),[i.runJSAnimation.bind(i,{from:E.style,to:j,duration:b,easing:_}),b]);var P=IM(C,b,_),A=Aa(Aa(Aa({},E.style),j),{},{transition:P});return[].concat(U_(p),[A,b,S]).filter(e2e)};return this.manager.start([c].concat(U_(o.reduce(m,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=XOe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var p=l?Mm({},l,c):c,v=IM(Object.keys(p),o,u);g.start([d,i,Aa(Aa({},p),{},{transition:v}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=S2e(a,N2e),u=y.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(m){var g=m.props,p=g.style,v=p===void 0?{}:p,x=g.className,b=y.cloneElement(m,Aa(Aa({},c),{},{style:Aa(Aa({},v),d),className:x}));return b};return u===1?f(y.Children.only(i)):O.createElement("div",null,y.Children.map(i,function(h){return f(h)}))}}]),r}(y.PureComponent);ni.displayName="Animate";ni.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ni.propTypes={from:Xt.oneOfType([Xt.object,Xt.string]),to:Xt.oneOfType([Xt.object,Xt.string]),attributeName:Xt.string,duration:Xt.number,begin:Xt.number,easing:Xt.oneOfType([Xt.string,Xt.func]),steps:Xt.arrayOf(Xt.shape({duration:Xt.number.isRequired,style:Xt.object.isRequired,easing:Xt.oneOfType([Xt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Xt.func]),properties:Xt.arrayOf("string"),onAnimationEnd:Xt.func})),children:Xt.oneOfType([Xt.node,Xt.func]),isActive:Xt.bool,canBegin:Xt.bool,onAnimationEnd:Xt.func,shouldReAnimate:Xt.bool,onAnimationStart:Xt.func,onAnimationReStart:Xt.func};function hg(e){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(e)}function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ab.apply(this,arguments)}function L2e(e,t){return z2e(e)||B2e(e,t)||U2e(e,t)||F2e()}function F2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U2e(e,t){if(e){if(typeof e=="string")return VM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VM(e,t)}}function VM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B2e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function z2e(e){if(Array.isArray(e))return e}function qM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qM(Object(r),!0).forEach(function(n){V2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V2e(e,t,r){return t=q2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q2e(e){var t=W2e(e,"string");return hg(t)=="symbol"?t:t+""}function W2e(e,t){if(hg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HM=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>o?o:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);d="M ".concat(t,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(r,`
            L `).concat(t+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*g,`
            L `).concat(t+n,",").concat(r+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n-c*g,",").concat(r+a,`
            L `).concat(t+c*g,",").concat(r+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*g," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},H2e=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},K2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},LP=function(t){var r=WM(WM({},K2e),t),n=y.useRef(),a=y.useState(-1),i=L2e(a,2),o=i[0],l=i[1];y.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,g=r.animationEasing,p=r.animationDuration,v=r.animationBegin,x=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=st("recharts-rectangle",m);return b?O.createElement(ni,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:p,animationEasing:g,isActive:b},function(_){var j=_.width,N=_.height,S=_.x,E=_.y;return O.createElement(ni,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,isActive:x,easing:g},O.createElement("path",Ab({},qe(r,!0),{className:w,d:HM(S,E,j,N,h),ref:n})))}):O.createElement("path",Ab({},qe(r,!0),{className:w,d:HM(c,u,d,f,h)}))},G2e=["points","className","baseLinePoints","connectNulls"];function Rd(){return Rd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rd.apply(this,arguments)}function Y2e(e,t){if(e==null)return{};var r=X2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function X2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function KM(e){return eTe(e)||J2e(e)||Z2e(e)||Q2e()}function Q2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z2e(e,t){if(e){if(typeof e=="string")return HS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HS(e,t)}}function J2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eTe(e){if(Array.isArray(e))return HS(e)}function HS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var GM=function(t){return t&&t.x===+t.x&&t.y===+t.y},tTe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){GM(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),GM(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},rp=function(t,r){var n=tTe(t);r&&(n=[n.reduce(function(i,o){return[].concat(KM(i),KM(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},rTe=function(t,r,n){var a=rp(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(rp(r.reverse(),n).slice(1))},qq=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,o=Y2e(t,G2e);if(!r||!r.length)return null;var l=st("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=rTe(r,a,i);return O.createElement("g",{className:l},O.createElement("path",Rd({},qe(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?O.createElement("path",Rd({},qe(o,!0),{fill:"none",d:rp(r,i)})):null,c?O.createElement("path",Rd({},qe(o,!0),{fill:"none",d:rp(a,i)})):null)}var d=rp(r,i);return O.createElement("path",Rd({},qe(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function KS(){return KS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KS.apply(this,arguments)}var pv=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=st("recharts-dot",i);return r===+r&&n===+n&&a===+a?y.createElement("circle",KS({},qe(t,!1),Xx(t),{className:o,cx:r,cy:n,r:a})):null};function mg(e){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(e)}var nTe=["x","y","top","left","width","height","className"];function GS(){return GS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GS.apply(this,arguments)}function YM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sTe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YM(Object(r),!0).forEach(function(n){aTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aTe(e,t,r){return t=iTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iTe(e){var t=oTe(e,"string");return mg(t)=="symbol"?t:t+""}function oTe(e,t){if(mg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lTe(e,t){if(e==null)return{};var r=cTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var uTe=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},dTe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,g=t.className,p=lTe(t,nTe),v=sTe({x:n,y:i,top:l,left:u,width:f,height:m},p);return!je(n)||!je(i)||!je(f)||!je(m)||!je(l)||!je(u)?null:O.createElement("path",GS({},qe(v,!0),{className:st("recharts-cross",g),d:uTe(n,i,f,m,l,u)}))},fTe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function pg(e){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pg(e)}function hTe(e,t){if(e==null)return{};var r=mTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Po(){return Po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Po.apply(this,arguments)}function XM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XM(Object(r),!0).forEach(function(n){pTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pTe(e,t,r){return t=gTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gTe(e){var t=vTe(e,"string");return pg(t)=="symbol"?t:t+""}function vTe(e,t){if(pg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yTe=function(t,r,n,a){var i="";return a.forEach(function(o,l){var c=Kt(r,n,t,o);l?i+="L ".concat(c.x,",").concat(c.y):i+="M ".concat(c.x,",").concat(c.y)}),i+="Z",i},xTe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.polarAngles,l=t.radialLines;if(!o||!o.length||!l)return null;var c=gg({stroke:"#ccc"},qe(t,!1));return O.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(u){var d=Kt(r,n,a,u),f=Kt(r,n,i,u);return O.createElement("line",Po({},c,{key:"line-".concat(u),x1:d.x,y1:d.y,x2:f.x,y2:f.y}))}))},bTe=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.index,o=gg(gg({stroke:"#ccc"},qe(t,!1)),{},{fill:"none"});return O.createElement("circle",Po({},o,{className:st("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},wTe=function(t){var r=t.radius,n=t.index,a=gg(gg({stroke:"#ccc"},qe(t,!1)),{},{fill:"none"});return O.createElement("path",Po({},a,{className:st("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(n),d:yTe(r,t.cx,t.cy,t.polarAngles)}))},jTe=function(t){var r=t.polarRadius,n=t.gridType;return!r||!r.length?null:O.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var o=i;return n==="circle"?O.createElement(bTe,Po({key:o},t,{radius:a,index:i})):O.createElement(wTe,Po({key:o},t,{radius:a,index:i}))}))},Wq=function(t){var r=t.cx,n=r===void 0?0:r,a=t.cy,i=a===void 0?0:a,o=t.innerRadius,l=o===void 0?0:o,c=t.outerRadius,u=c===void 0?0:c,d=t.gridType,f=d===void 0?"polygon":d,h=t.radialLines,m=h===void 0?!0:h,g=hTe(t,fTe);return u<=0?null:O.createElement("g",{className:"recharts-polar-grid"},O.createElement(xTe,Po({cx:n,cy:i,innerRadius:l,outerRadius:u,gridType:f,radialLines:m},g)),O.createElement(jTe,Po({cx:n,cy:i,innerRadius:l,outerRadius:u,gridType:f,radialLines:m},g)))};Wq.displayName="PolarGrid";var _Te=Dw,NTe=JV,STe=Vi;function CTe(e,t){return e&&e.length?_Te(e,STe(t),NTe):void 0}var ETe=CTe;const kTe=Gt(ETe);var PTe=Dw,ATe=Vi,OTe=eq;function TTe(e,t){return e&&e.length?PTe(e,ATe(t),OTe):void 0}var DTe=TTe;const RTe=Gt(DTe);var MTe=["cx","cy","angle","ticks","axisLine"],$Te=["ticks","tick","angle","tickFormatter","stroke"];function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function np(){return np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},np.apply(this,arguments)}function QM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QM(Object(r),!0).forEach(function(n){Lw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZM(e,t){if(e==null)return{};var r=ITe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ITe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function LTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kq(n.key),n)}}function FTe(e,t,r){return t&&JM(e.prototype,t),r&&JM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function UTe(e,t,r){return t=Ob(t),BTe(e,Hq()?Reflect.construct(t,r||[],Ob(e).constructor):t.apply(e,r))}function BTe(e,t){if(t&&(qf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zTe(e)}function zTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hq=function(){return!!e})()}function Ob(e){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ob(e)}function VTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YS(e,t)}function YS(e,t){return YS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},YS(e,t)}function Lw(e,t,r){return t=Kq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kq(e){var t=qTe(e,"string");return qf(t)=="symbol"?t:t+""}function qTe(e,t){if(qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lh=function(e){function t(){return LTe(this,t),UTe(this,t,arguments)}return VTe(t,e),FTe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Kt(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=kTe(l,function(d){return d.coordinate||0}),u=RTe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=ZM(n,MTe),d=l.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),f=Kt(a,i,d[0],o),h=Kt(a,i,d[1],o),m=xc(xc(xc({},qe(u,!1)),{},{fill:"none"},qe(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return O.createElement("line",np({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=ZM(a,$Te),f=this.getTickTextAnchor(),h=qe(d,!1),m=qe(o,!1),g=i.map(function(p,v){var x=n.getTickValueCoord(p),b=xc(xc(xc(xc({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:v},x),{},{payload:p});return O.createElement(Mt,np({className:st("recharts-polar-radius-axis-tick",Pq(o)),key:"tick-".concat(p.coordinate)},Pu(n.props,p,v)),t.renderTickItem(o,b,c?c(p.value,v):p.value))});return O.createElement(Mt,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:O.createElement(Mt,{className:st("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),vn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return O.isValidElement(n)?o=O.cloneElement(n,a):Xe(n)?o=n(a):o=O.createElement(Au,np({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(y.PureComponent);Lw(Lh,"displayName","PolarRadiusAxis");Lw(Lh,"axisType","radiusAxis");Lw(Lh,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function Oc(){return Oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oc.apply(this,arguments)}function e$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e$(Object(r),!0).forEach(function(n){Fw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yq(n.key),n)}}function HTe(e,t,r){return t&&t$(e.prototype,t),r&&t$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KTe(e,t,r){return t=Tb(t),GTe(e,Gq()?Reflect.construct(t,r||[],Tb(e).constructor):t.apply(e,r))}function GTe(e,t){if(t&&(Wf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YTe(e)}function YTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gq=function(){return!!e})()}function Tb(e){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tb(e)}function XTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XS(e,t)}function XS(e,t){return XS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},XS(e,t)}function Fw(e,t,r){return t=Yq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yq(e){var t=QTe(e,"string");return Wf(t)=="symbol"?t:t+""}function QTe(e,t){if(Wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZTe=Math.PI/180,r$=1e-5,Fh=function(e){function t(){return WTe(this,t),KTe(this,t,arguments)}return XTe(t,e),HTe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=Kt(i,o,l,n.coordinate),h=Kt(i,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*ZTe),o;return i>r$?o=a==="outer"?"start":"end":i<-r$?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=bc(bc({},qe(this.props,!1)),{},{fill:"none"},qe(l,!1));if(c==="circle")return O.createElement(pv,Oc({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,f=d.map(function(h){return Kt(a,i,o,h.coordinate)});return O.createElement(qq,Oc({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=qe(this.props,!1),f=qe(o,!1),h=bc(bc({},d),{},{fill:"none"},qe(l,!1)),m=i.map(function(g,p){var v=n.getTickLineCoord(g),x=n.getTickTextAnchor(g),b=bc(bc(bc({textAnchor:x},d),{},{stroke:"none",fill:u},f),{},{index:p,payload:g,x:v.x2,y:v.y2});return O.createElement(Mt,Oc({className:st("recharts-polar-angle-axis-tick",Pq(o)),key:"tick-".concat(g.coordinate)},Pu(n.props,g,p)),l&&O.createElement("line",Oc({className:"recharts-polar-angle-axis-tick-line"},h,v)),o&&t.renderTickItem(o,b,c?c(g.value,p):g.value))});return O.createElement(Mt,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:O.createElement(Mt,{className:st("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return O.isValidElement(n)?o=O.cloneElement(n,a):Xe(n)?o=n(a):o=O.createElement(Au,Oc({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(y.PureComponent);Fw(Fh,"displayName","PolarAngleAxis");Fw(Fh,"axisType","angleAxis");Fw(Fh,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var JTe=Yz,eDe=JTe(Object.getPrototypeOf,Object),tDe=eDe,rDe=$o,nDe=tDe,sDe=Io,aDe="[object Object]",iDe=Function.prototype,oDe=Object.prototype,Xq=iDe.toString,lDe=oDe.hasOwnProperty,cDe=Xq.call(Object);function uDe(e){if(!sDe(e)||rDe(e)!=aDe)return!1;var t=nDe(e);if(t===null)return!0;var r=lDe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Xq.call(r)==cDe}var dDe=uDe;const fDe=Gt(dDe);var hDe=$o,mDe=Io,pDe="[object Boolean]";function gDe(e){return e===!0||e===!1||mDe(e)&&hDe(e)==pDe}var vDe=gDe;const yDe=Gt(vDe);function vg(e){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vg(e)}function Db(){return Db=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Db.apply(this,arguments)}function xDe(e,t){return _De(e)||jDe(e,t)||wDe(e,t)||bDe()}function bDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wDe(e,t){if(e){if(typeof e=="string")return n$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n$(e,t)}}function n$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function _De(e){if(Array.isArray(e))return e}function s$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function a$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s$(Object(r),!0).forEach(function(n){NDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NDe(e,t,r){return t=SDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SDe(e){var t=CDe(e,"string");return vg(t)=="symbol"?t:t+""}function CDe(e,t){if(vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i$=function(t,r,n,a,i){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},EDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kDe=function(t){var r=a$(a$({},EDe),t),n=y.useRef(),a=y.useState(-1),i=xDe(a,2),o=i[0],l=i[1];y.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,g=r.animationEasing,p=r.animationDuration,v=r.animationBegin,x=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var b=st("recharts-trapezoid",m);return x?O.createElement(ni,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:p,animationEasing:g,isActive:x},function(w){var _=w.upperWidth,j=w.lowerWidth,N=w.height,S=w.x,E=w.y;return O.createElement(ni,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,easing:g},O.createElement("path",Db({},qe(r,!0),{className:b,d:i$(S,E,_,j,N),ref:n})))}):O.createElement("g",null,O.createElement("path",Db({},qe(r,!0),{className:b,d:i$(c,u,d,f,h)})))},PDe=["option","shapeType","propTransformer","activeClassName","isActive"];function yg(e){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yg(e)}function ADe(e,t){if(e==null)return{};var r=ODe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ODe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function o$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o$(Object(r),!0).forEach(function(n){TDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TDe(e,t,r){return t=DDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DDe(e){var t=RDe(e,"string");return yg(t)=="symbol"?t:t+""}function RDe(e,t){if(yg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MDe(e,t){return Rb(Rb({},t),e)}function $De(e,t){return e==="symbols"}function l$(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return O.createElement(LP,r);case"trapezoid":return O.createElement(kDe,r);case"sector":return O.createElement(Dq,r);case"symbols":if($De(t))return O.createElement(nP,r);break;default:return null}}function IDe(e){return y.isValidElement(e)?e.props:e}function Qq(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?MDe:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=ADe(e,PDe),u;if(y.isValidElement(t))u=y.cloneElement(t,Rb(Rb({},c),IDe(t)));else if(Xe(t))u=t(c);else if(fDe(t)&&!yDe(t)){var d=a(t,c);u=O.createElement(l$,{shapeType:r,elementProps:d})}else{var f=c;u=O.createElement(l$,{shapeType:r,elementProps:f})}return l?O.createElement(Mt,{className:o},u):u}function Uw(e,t){return t!=null&&"trapezoids"in e.props}function Bw(e,t){return t!=null&&"sectors"in e.props}function xg(e,t){return t!=null&&"points"in e.props}function LDe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function FDe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function UDe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function BDe(e,t){var r;return Uw(e,t)?r=LDe:Bw(e,t)?r=FDe:xg(e,t)&&(r=UDe),r}function zDe(e,t){var r;return Uw(e,t)?r="trapezoids":Bw(e,t)?r="sectors":xg(e,t)&&(r="points"),r}function VDe(e,t){if(Uw(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Bw(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return xg(e,t)?t.payload:{}}function qDe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=zDe(r,t),i=VDe(r,t),o=n.filter(function(c,u){var d=Mh(i,c),f=r.props[a].filter(function(g){var p=BDe(r,t);return p(g,t)}),h=r.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=n.indexOf(o[o.length-1]);return l}var qy;function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function Md(){return Md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Md.apply(this,arguments)}function c$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c$(Object(r),!0).forEach(function(n){oa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jq(n.key),n)}}function HDe(e,t,r){return t&&u$(e.prototype,t),r&&u$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KDe(e,t,r){return t=Mb(t),GDe(e,Zq()?Reflect.construct(t,r||[],Mb(e).constructor):t.apply(e,r))}function GDe(e,t){if(t&&(Hf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YDe(e)}function YDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zq=function(){return!!e})()}function Mb(e){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mb(e)}function XDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QS(e,t)}function QS(e,t){return QS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},QS(e,t)}function oa(e,t,r){return t=Jq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jq(e){var t=QDe(e,"string");return Hf(t)=="symbol"?t:t+""}function QDe(e,t){if(Hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fo=function(e){function t(r){var n;return WDe(this,t),n=KDe(this,t,[r]),oa(n,"pieRef",null),oa(n,"sectorRefs",[]),oa(n,"id",Ah("recharts-pie-")),oa(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Xe(a)&&a()}),oa(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Xe(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return XDe(t,e),HDe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=qe(this.props,!1),f=qe(o,!1),h=qe(l,!1),m=o&&o.offsetRadius||20,g=n.map(function(p,v){var x=(p.startAngle+p.endAngle)/2,b=Kt(p.cx,p.cy,p.outerRadius+m,x),w=ur(ur(ur(ur({},d),p),{},{stroke:"none"},f),{},{index:v,textAnchor:t.getTextAnchor(b.x,p.cx)},b),_=ur(ur(ur(ur({},d),p),{},{fill:"none",stroke:p.fill},h),{},{index:v,points:[Kt(p.cx,p.cy,p.outerRadius,x),b]}),j=c;return it(c)&&it(u)?j="value":it(c)&&(j=u),O.createElement(Mt,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(o,w,Br(p,j)))});return O.createElement(Mt,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,m=f?o:h,g=ur(ur({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return O.createElement(Mt,Md({ref:function(v){v&&!a.sectorRefs.includes(v)&&a.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Pu(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),O.createElement(Qq,Md({option:m,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return O.createElement(ni,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,v=[],x=i&&i[0],b=x.startAngle;return i.forEach(function(w,_){var j=h&&h[_],N=_>0?Vs(w,"paddingAngle",0):0;if(j){var S=En(j.endAngle-j.startAngle,w.endAngle-w.startAngle),E=ur(ur({},w),{},{startAngle:b+N,endAngle:b+S(p)+N});v.push(E),b=E.endAngle}else{var C=w.endAngle,P=w.startAngle,A=En(0,C-P),k=A(p),D=ur(ur({},w),{},{startAngle:b+N,endAngle:b+k+N});v.push(D),b=D.endAngle}}),O.createElement(Mt,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!Mh(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,m=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!o||!o.length||!je(u)||!je(d)||!je(f)||!je(h))return null;var p=st("recharts-pie",l);return O.createElement(Mt,{tabIndex:this.props.rootTabIndex,className:p,ref:function(x){n.pieRef=x}},this.renderSectors(),c&&this.renderLabels(o),vn.renderCallByParent(this.props,null,!1),(!m||g)&&Si.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(O.isValidElement(n))return O.cloneElement(n,a);if(Xe(n))return n(a);var o=st("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return O.createElement(Cb,Md({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(O.isValidElement(n))return O.cloneElement(n,a);var o=i;if(Xe(n)&&(o=n(a),O.isValidElement(o)))return o;var l=st("recharts-pie-label-text",typeof n!="boolean"&&!Xe(n)?n.className:"");return O.createElement(Au,Md({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(y.PureComponent);qy=Fo;oa(Fo,"displayName","Pie");oa(Fo,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ga.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});oa(Fo,"parseDeltaAngle",function(e,t){var r=es(t-e),n=Math.min(Math.abs(t-e),360);return r*n});oa(Fo,"getRealPieData",function(e){var t=e.data,r=e.children,n=qe(e,!1),a=qs(r,Cw);return t&&t.length?t.map(function(i,o){return ur(ur(ur({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return ur(ur({},n),i.props)}):[]});oa(Fo,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,o=Eq(a,i),l=n+ts(e.cx,a,a/2),c=r+ts(e.cy,i,i/2),u=ts(e.innerRadius,o,0),d=ts(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});oa(Fo,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?ur(ur({},t.type.defaultProps),t.props):t.props,a=qy.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),g=qy.parseCoordinateOfPie(n,r),p=qy.parseDeltaAngle(o,l),v=Math.abs(p),x=u;it(u)&&it(f)?(Ka(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):it(u)&&(Ka(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=f);var b=a.filter(function(E){return Br(E,x,0)!==0}).length,w=(v>=360?b:b-1)*c,_=v-b*m-w,j=a.reduce(function(E,C){var P=Br(C,x,0);return E+(je(P)?P:0)},0),N;if(j>0){var S;N=a.map(function(E,C){var P=Br(E,x,0),A=Br(E,d,C),k=(je(P)?P:0)/j,D;C?D=S.endAngle+es(p)*c*(P!==0?1:0):D=o;var R=D+es(p)*((P!==0?m:0)+k*_),U=(D+R)/2,B=(g.innerRadius+g.outerRadius)/2,L=[{name:A,value:P,payload:E,dataKey:x,type:h}],M=Kt(g.cx,g.cy,B,U);return S=ur(ur(ur({percent:k,cornerRadius:i,name:A,tooltipPayload:L,midAngle:U,middleRadius:B,tooltipPosition:M},E),g),{},{value:Br(E,x),startAngle:D,endAngle:R,payload:E,paddingAngle:es(p)*c}),S})}return ur(ur({},g),{},{sectors:N,data:a})});function ZDe(e){return e&&e.length?e[0]:void 0}var JDe=ZDe,eRe=JDe;const tRe=Gt(eRe);var rRe=["key"];function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function nRe(e,t){if(e==null)return{};var r=sRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$b.apply(this,arguments)}function d$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d$(Object(r),!0).forEach(function(n){so(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tW(n.key),n)}}function iRe(e,t,r){return t&&f$(e.prototype,t),r&&f$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oRe(e,t,r){return t=Ib(t),lRe(e,eW()?Reflect.construct(t,r||[],Ib(e).constructor):t.apply(e,r))}function lRe(e,t){if(t&&(Kf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cRe(e)}function cRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eW=function(){return!!e})()}function Ib(e){return Ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ib(e)}function uRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZS(e,t)}function ZS(e,t){return ZS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ZS(e,t)}function so(e,t,r){return t=tW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tW(e){var t=dRe(e,"string");return Kf(t)=="symbol"?t:t+""}function dRe(e,t){if(Kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gv=function(e){function t(){var r;aRe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=oRe(this,t,[].concat(a)),so(r,"state",{isAnimationFinished:!1}),so(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Xe(o)&&o()}),so(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Xe(o)&&o()}),so(r,"handleMouseEnter",function(o){var l=r.props.onMouseEnter;l&&l(r.props,o)}),so(r,"handleMouseLeave",function(o){var l=r.props.onMouseLeave;l&&l(r.props,o)}),r}return uRe(t,e),iRe(t,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,o=a.dataKey,l=qe(this.props,!1),c=qe(i,!0),u=n.map(function(d,f){var h=Gn(Gn(Gn({key:"dot-".concat(f),r:3},l),c),{},{dataKey:o,cx:d.x,cy:d.y,index:f,payload:d});return t.renderDotItem(i,h)});return O.createElement(Mt,{className:"recharts-radar-dots"},u)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,o=a.dot,l=a.isRange,c=a.baseLinePoints,u=a.connectNulls,d;return O.isValidElement(i)?d=O.cloneElement(i,Gn(Gn({},this.props),{},{points:n})):Xe(i)?d=i(Gn(Gn({},this.props),{},{points:n})):d=O.createElement(qq,$b({},qe(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:l?c:null,connectNulls:u})),O.createElement(Mt,{className:"recharts-radar-polygon"},d,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state.prevPoints;return O.createElement(ni,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"radar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,g=f&&f.length/i.length,p=i.map(function(v,x){var b=f&&f[Math.floor(x*g)];if(b){var w=En(b.x,v.x),_=En(b.y,v.y);return Gn(Gn({},v),{},{x:w(m),y:_(m)})}var j=En(v.cx,v.x),N=En(v.cy,v.y);return Gn(Gn({},v),{},{x:j(m),y:N(m)})});return n.renderPolygonStatically(p)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=n.isRange,l=this.state.prevPoints;return i&&a&&a.length&&!o&&(!l||!Mh(l,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,o=n.points,l=n.isAnimationActive;if(a||!o||!o.length)return null;var c=this.state.isAnimationFinished,u=st("recharts-radar",i);return O.createElement(Mt,{className:u},this.renderPolygon(),(!l||c)&&Si.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(O.isValidElement(n))i=O.cloneElement(n,a);else if(Xe(n))i=n(a);else{var o=a.key,l=nRe(a,rRe);i=O.createElement(pv,$b({},l,{key:o,className:st("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])}(y.PureComponent);so(gv,"displayName","Radar");so(gv,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Ga.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});so(gv,"getComposedData",function(e){var t=e.radiusAxis,r=e.angleAxis,n=e.displayedData,a=e.dataKey,i=e.bandSize,o=r.cx,l=r.cy,c=!1,u=[],d=r.type!=="number"?i??0:0;n.forEach(function(h,m){var g=Br(h,r.dataKey,m),p=Br(h,a),v=r.scale(g)+d,x=Array.isArray(p)?Oq(p):p,b=it(x)?void 0:t.scale(x);Array.isArray(p)&&p.length>=2&&(c=!0),u.push(Gn(Gn({},Kt(o,l,b,v)),{},{name:g,value:p,cx:o,cy:l,radius:b,angle:v,payload:h}))});var f=[];return c&&u.forEach(function(h){if(Array.isArray(h.value)){var m=tRe(h.value),g=it(m)?void 0:t.scale(m);f.push(Gn(Gn({},h),{},{radius:g},Kt(o,l,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}});var fRe=Math.ceil,hRe=Math.max;function mRe(e,t,r,n){for(var a=-1,i=hRe(fRe((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var pRe=mRe,gRe=mV,h$=1/0,vRe=17976931348623157e292;function yRe(e){if(!e)return e===0?e:0;if(e=gRe(e),e===h$||e===-h$){var t=e<0?-1:1;return t*vRe}return e===e?e:0}var rW=yRe,xRe=pRe,bRe=Sw,B_=rW;function wRe(e){return function(t,r,n){return n&&typeof n!="number"&&bRe(t,r,n)&&(r=n=void 0),t=B_(t),r===void 0?(r=t,t=0):r=B_(r),n=n===void 0?t<r?1:-1:B_(n),xRe(t,r,n,e)}}var jRe=wRe,_Re=jRe,NRe=_Re(),SRe=NRe;const Lb=Gt(SRe);function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function m$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function p$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m$(Object(r),!0).forEach(function(n){nW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nW(e,t,r){return t=CRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CRe(e){var t=ERe(e,"string");return bg(t)=="symbol"?t:t+""}function ERe(e,t){if(bg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kRe=["Webkit","Moz","O","ms"],PRe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=kRe.reduce(function(i,o){return p$(p$({},i),{},nW({},o+n,r))},{});return a[t]=r,a};function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fb.apply(this,arguments)}function g$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function z_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g$(Object(r),!0).forEach(function(n){Rs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ARe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aW(n.key),n)}}function ORe(e,t,r){return t&&v$(e.prototype,t),r&&v$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TRe(e,t,r){return t=Ub(t),DRe(e,sW()?Reflect.construct(t,r||[],Ub(e).constructor):t.apply(e,r))}function DRe(e,t){if(t&&(Gf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RRe(e)}function RRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sW=function(){return!!e})()}function Ub(e){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(e)}function MRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JS(e,t)}function JS(e,t){return JS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},JS(e,t)}function Rs(e,t,r){return t=aW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aW(e){var t=$Re(e,"string");return Gf(t)=="symbol"?t:t+""}function $Re(e,t){if(Gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IRe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Jm().domain(Lb(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},y$=function(t){return t.changedTouches&&!!t.changedTouches.length},Yf=function(e){function t(r){var n;return ARe(this,t),n=TRe(this,t,[r]),Rs(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Rs(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Rs(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Rs(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Rs(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Rs(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Rs(n,"handleSlideDragStart",function(a){var i=y$(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return MRe(t,e),ORe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,f),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=Br(i[n],l,n);return Xe(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,p=n.pageX-i;p>0?p=Math.min(p,u+d-f-l,u+d-f-o):p<0&&(p=Math.max(p,u-o,u-l));var v=this.getIndex({startX:o+p,endX:l+p});(v.startIndex!==h||v.endIndex!==m)&&g&&g(v),this.setState({startX:o+p,endX:l+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=y$(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,g=d.onChange,p=d.gap,v=d.data,x={startX:this.state.startX,endX:this.state.endX},b=n.pageX-i;b>0?b=Math.min(b,f+h-m-u):b<0&&(b=Math.max(b,f-u)),x[o]=u+b;var w=this.getIndex(x),_=w.startIndex,j=w.endIndex,N=function(){var E=v.length-1;return o==="startX"&&(l>c?_%p===0:j%p===0)||l<c&&j===E||o==="endX"&&(l>c?j%p===0:_%p===0)||l>c&&j===E};this.setState(Rs(Rs({},o,u+b),"brushMoveStartX",n.pageX),function(){g&&N()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Rs({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return O.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=y.Children.only(u);return f?O.cloneElement(f,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,p=c.startIndex,v=c.endIndex,x=Math.max(n,this.props.x),b=z_(z_({},qe(this.props,!1)),{},{x,y:u,width:d,height:f}),w=m||"Min value: ".concat((i=g[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[v])===null||o===void 0?void 0:o.name);return O.createElement(Mt,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return O.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,g={pointerEvents:"none",fill:u};return O.createElement(Mt,{className:"recharts-brush-texts"},O.createElement(Au,Fb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+l/2},g),this.getTextOfTick(a)),O.createElement(Au,Fb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,g=h.endX,p=h.isTextActive,v=h.isSlideMoving,x=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!je(l)||!je(c)||!je(u)||!je(d)||u<=0||d<=0)return null;var w=st("recharts-brush",i),_=O.Children.count(o)===1,j=PRe("userSelect","none");return O.createElement(Mt,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(p||v||x||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return O.createElement(O.Fragment,null,O.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),O.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),O.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return O.isValidElement(n)?i=O.cloneElement(n,a):Xe(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return z_({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?IRe({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(y.PureComponent);Rs(Yf,"displayName","Brush");Rs(Yf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var LRe=uP;function FRe(e,t){var r;return LRe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var URe=FRe,BRe=Bz,zRe=Vi,VRe=URe,qRe=Ps,WRe=Sw;function HRe(e,t,r){var n=qRe(e)?BRe:VRe;return r&&WRe(e,t,r)&&(t=void 0),n(e,zRe(t))}var KRe=HRe;const GRe=Gt(KRe);var Ci=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},x$=cV;function YRe(e,t,r){t=="__proto__"&&x$?x$(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var XRe=YRe,QRe=XRe,ZRe=oV,JRe=Vi;function eMe(e,t){var r={};return t=JRe(t),ZRe(e,function(n,a,i){QRe(r,a,t(n,a,i))}),r}var tMe=eMe;const rMe=Gt(tMe);function nMe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var sMe=nMe,aMe=uP;function iMe(e,t){var r=!0;return aMe(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var oMe=iMe,lMe=sMe,cMe=oMe,uMe=Vi,dMe=Ps,fMe=Sw;function hMe(e,t,r){var n=dMe(e)?lMe:cMe;return r&&fMe(e,t,r)&&(t=void 0),n(e,uMe(t))}var mMe=hMe;const iW=Gt(mMe);var pMe=["x","y"];function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function eC(){return eC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eC.apply(this,arguments)}function b$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _m(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b$(Object(r),!0).forEach(function(n){gMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gMe(e,t,r){return t=vMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vMe(e){var t=yMe(e,"string");return wg(t)=="symbol"?t:t+""}function yMe(e,t){if(wg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xMe(e,t){if(e==null)return{};var r=bMe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bMe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function wMe(e,t){var r=e.x,n=e.y,a=xMe(e,pMe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return _m(_m(_m(_m(_m({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function w$(e){return O.createElement(Qq,eC({shapeType:"rectangle",propTransformer:wMe,activeClassName:"recharts-active-bar"},e))}var jMe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=je(n)||Sge(n);return i?t(n,a):(i||Tu(),r)}},_Me=["value","background"],oW;function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function NMe(e,t){if(e==null)return{};var r=SMe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SMe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Bb(){return Bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bb.apply(this,arguments)}function j$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j$(Object(r),!0).forEach(function(n){Sl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cW(n.key),n)}}function EMe(e,t,r){return t&&_$(e.prototype,t),r&&_$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kMe(e,t,r){return t=zb(t),PMe(e,lW()?Reflect.construct(t,r||[],zb(e).constructor):t.apply(e,r))}function PMe(e,t){if(t&&(Xf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AMe(e)}function AMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lW=function(){return!!e})()}function zb(e){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(e)}function OMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tC(e,t)}function tC(e,t){return tC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tC(e,t)}function Sl(e,t,r){return t=cW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cW(e){var t=TMe(e,"string");return Xf(t)=="symbol"?t:t+""}function TMe(e,t){if(Xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ql=function(e){function t(){var r;CMe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=kMe(this,t,[].concat(a)),Sl(r,"state",{isAnimationFinished:!1}),Sl(r,"id",Ah("recharts-bar-")),Sl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Sl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return OMe(t,e),EMe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=qe(this.props,!1);return n&&n.map(function(f,h){var m=h===c,g=m?u:o,p=Hr(Hr(Hr({},d),f),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return O.createElement(Mt,Bb({className:"recharts-bar-rectangle"},Pu(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),O.createElement(w$,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return O.createElement(ni,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,p=i.map(function(v,x){var b=h&&h[x];if(b){var w=En(b.x,v.x),_=En(b.y,v.y),j=En(b.width,v.width),N=En(b.height,v.height);return Hr(Hr({},v),{},{x:w(g),y:_(g),width:j(g),height:N(g)})}if(o==="horizontal"){var S=En(0,v.height),E=S(g);return Hr(Hr({},v),{},{y:v.y+v.height-E,height:E})}var C=En(0,v.width),P=C(g);return Hr(Hr({},v),{},{width:P})});return O.createElement(Mt,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Mh(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=qe(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=NMe(u,_Me);if(!f)return null;var m=Hr(Hr(Hr(Hr(Hr({},h),{},{fill:"#eee"},f),c),Pu(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return O.createElement(w$,Bb({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=qs(d,mv);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(v,x){var b=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:b,errorVal:Br(v,x)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return O.createElement(Mt,g,f.map(function(p){return O.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,g=n.background,p=n.id;if(a||!i||!i.length)return null;var v=this.state.isAnimationFinished,x=st("recharts-bar",o),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,_=b||w,j=it(p)?this.id:p;return O.createElement(Mt,{className:x},b||w?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(j)},O.createElement("rect",{x:b?u:u-f/2,y:w?d:d-h/2,width:b?f:f*2,height:w?h:h*2}))):null,O.createElement(Mt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(j,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,j),(!m||v)&&Si.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(y.PureComponent);oW=Ql;Sl(Ql,"displayName","Bar");Sl(Ql,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ga.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Sl(Ql,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=qPe(n,r);if(!m)return null;var g=t.layout,p=r.type.defaultProps,v=p!==void 0?Hr(Hr({},p),r.props):r.props,x=v.dataKey,b=v.children,w=v.minPointSize,_=g==="horizontal"?o:i,j=u?_.scale.domain():null,N=QPe({numericAxis:_}),S=qs(b,Cw),E=f.map(function(C,P){var A,k,D,R,U,B;u?A=WPe(u[d+P],j):(A=Br(C,x),Array.isArray(A)||(A=[N,A]));var L=jMe(w,oW.defaultProps.minPointSize)(A[1],P);if(g==="horizontal"){var M,T=[o.scale(A[0]),o.scale(A[1])],F=T[0],Z=T[1];k=cM({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:C,index:P}),D=(M=Z??F)!==null&&M!==void 0?M:void 0,R=m.size;var W=F-Z;if(U=Number.isNaN(W)?0:W,B={x:k,y:o.y,width:R,height:o.height},Math.abs(L)>0&&Math.abs(U)<Math.abs(L)){var K=es(U||L)*(Math.abs(L)-Math.abs(U));D-=K,U+=K}}else{var V=[i.scale(A[0]),i.scale(A[1])],le=V[0],be=V[1];if(k=le,D=cM({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:C,index:P}),R=be-le,U=m.size,B={x:i.x,y:D,width:i.width,height:U},Math.abs(L)>0&&Math.abs(R)<Math.abs(L)){var ce=es(R||L)*(Math.abs(L)-Math.abs(R));R+=ce}}return Hr(Hr(Hr({},C),{},{x:k,y:D,width:R,height:U,value:u?A:A[1],payload:C,background:B},S&&S[P]&&S[P].props),{},{tooltipPayload:[Sq(r,C)],tooltipPosition:{x:k+R/2,y:D+U/2}})});return Hr({data:E,layout:g},h)});function jg(e){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(e)}function DMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uW(n.key),n)}}function RMe(e,t,r){return t&&N$(e.prototype,t),r&&N$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function S$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function La(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S$(Object(r),!0).forEach(function(n){zw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zw(e,t,r){return t=uW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uW(e){var t=MMe(e,"string");return jg(t)=="symbol"?t:t+""}function MMe(e,t){if(jg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dW=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!$s(u,Ql);return d.reduce(function(m,g){var p=r[g],v=p.orientation,x=p.domain,b=p.padding,w=b===void 0?{}:b,_=p.mirror,j=p.reversed,N="".concat(v).concat(_?"Mirror":""),S,E,C,P,A;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var k=x[1]-x[0],D=1/0,R=p.categoricalDomain.sort(kge);if(R.forEach(function(V,le){le>0&&(D=Math.min((V||0)-(R[le-1]||0),D))}),Number.isFinite(D)){var U=D/k,B=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(S=U*B/2),p.padding==="no-gap"){var L=ts(t.barCategoryGap,U*B),M=U*B/2;S=M-L-(M-L)/B*L}}}a==="xAxis"?E=[n.left+(w.left||0)+(S||0),n.left+n.width-(w.right||0)-(S||0)]:a==="yAxis"?E=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(S||0),n.top+n.height-(w.bottom||0)-(S||0)]:E=p.range,j&&(E=[E[1],E[0]]);var T=wq(p,i,h),F=T.scale,Z=T.realScaleType;F.domain(x).range(E),jq(F);var W=_q(F,La(La({},p),{},{realScaleType:Z}));a==="xAxis"?(A=v==="top"&&!_||v==="bottom"&&_,C=n.left,P=f[N]-A*p.height):a==="yAxis"&&(A=v==="left"&&!_||v==="right"&&_,C=f[N]-A*p.width,P=n.top);var K=La(La(La({},p),W),{},{realScaleType:Z,x:C,y:P,scale:F,width:a==="xAxis"?n.width:p.width,height:a==="yAxis"?n.height:p.height});return K.bandSize=_b(K,W),!p.hide&&a==="xAxis"?f[N]+=(A?-1:1)*K.height:p.hide||(f[N]+=(A?-1:1)*K.width),La(La({},m),{},zw({},g,K))},{})},fW=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},$Me=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return fW({x:r,y:n},{x:a,y:i})},hW=function(){function e(t){DMe(this,e),this.scale=t}return RMe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();zw(hW,"EPS",1e-4);var FP=function(t){var r=Object.keys(t).reduce(function(n,a){return La(La({},n),{},zw({},a,hW.create(t[a])))},{});return La(La({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return rMe(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return iW(a,function(i,o){return r[o].isInRange(i)})}})};function IMe(e){return(e%180+180)%180}var LMe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=IMe(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},FMe=Vi,UMe=cv,BMe=_w;function zMe(e){return function(t,r,n){var a=Object(t);if(!UMe(t)){var i=FMe(r);t=BMe(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var VMe=zMe,qMe=rW;function WMe(e){var t=qMe(e),r=t%1;return t===t?r?t-r:t:0}var HMe=WMe,KMe=tV,GMe=Vi,YMe=HMe,XMe=Math.max;function QMe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:YMe(r);return a<0&&(a=XMe(n+a,0)),KMe(e,GMe(t),a)}var ZMe=QMe,JMe=VMe,e$e=ZMe,t$e=JMe(e$e),r$e=t$e;const n$e=Gt(r$e);var s$e=Ppe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),UP=y.createContext(void 0),BP=y.createContext(void 0),mW=y.createContext(void 0),pW=y.createContext({}),gW=y.createContext(void 0),vW=y.createContext(0),yW=y.createContext(0),C$=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=s$e(i);return O.createElement(UP.Provider,{value:n},O.createElement(BP.Provider,{value:a},O.createElement(pW.Provider,{value:i},O.createElement(mW.Provider,{value:d},O.createElement(gW.Provider,{value:o},O.createElement(vW.Provider,{value:u},O.createElement(yW.Provider,{value:c},l)))))))},a$e=function(){return y.useContext(gW)},xW=function(t){var r=y.useContext(UP);r==null&&Tu();var n=r[t];return n==null&&Tu(),n},i$e=function(){var t=y.useContext(UP);return dl(t)},o$e=function(){var t=y.useContext(BP),r=n$e(t,function(n){return iW(n.domain,Number.isFinite)});return r||dl(t)},bW=function(t){var r=y.useContext(BP);r==null&&Tu();var n=r[t];return n==null&&Tu(),n},l$e=function(){var t=y.useContext(mW);return t},c$e=function(){return y.useContext(pW)},zP=function(){return y.useContext(yW)},VP=function(){return y.useContext(vW)};function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}function u$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d$e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jW(n.key),n)}}function f$e(e,t,r){return t&&d$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function h$e(e,t,r){return t=Vb(t),m$e(e,wW()?Reflect.construct(t,r||[],Vb(e).constructor):t.apply(e,r))}function m$e(e,t){if(t&&(Qf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p$e(e)}function p$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wW=function(){return!!e})()}function Vb(e){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vb(e)}function g$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rC(e,t)}function rC(e,t){return rC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rC(e,t)}function E$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function k$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E$(Object(r),!0).forEach(function(n){qP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qP(e,t,r){return t=jW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jW(e){var t=v$e(e,"string");return Qf(t)=="symbol"?t:t+""}function v$e(e,t){if(Qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y$e(e,t){return j$e(e)||w$e(e,t)||b$e(e,t)||x$e()}function x$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b$e(e,t){if(e){if(typeof e=="string")return P$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P$(e,t)}}function P$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w$e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function j$e(e){if(Array.isArray(e))return e}function nC(){return nC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nC.apply(this,arguments)}var _$e=function(t,r){var n;return O.isValidElement(t)?n=O.cloneElement(t,r):Xe(t)?n=t(r):n=O.createElement("line",nC({},r,{className:"recharts-reference-line-line"})),n},N$e=function(t,r,n,a,i,o,l,c,u){var d=i.x,f=i.y,h=i.width,m=i.height;if(n){var g=u.y,p=t.y.apply(g,{position:o});if(Ci(u,"discard")&&!t.y.isInRange(p))return null;var v=[{x:d+h,y:p},{x:d,y:p}];return c==="left"?v.reverse():v}if(r){var x=u.x,b=t.x.apply(x,{position:o});if(Ci(u,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:f+m},{x:b,y:f}];return l==="top"?w.reverse():w}if(a){var _=u.segment,j=_.map(function(N){return t.apply(N,{position:o})});return Ci(u,"discard")&&GRe(j,function(N){return!t.isInRange(N)})?null:j}return null};function S$e(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=a$e(),d=xW(a),f=bW(i),h=l$e();if(!u||!h)return null;Ka(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=FP({x:d.scale,y:f.scale}),g=cn(t),p=cn(r),v=n&&n.length===2,x=N$e(m,g,p,v,h,e.position,d.orientation,f.orientation,e);if(!x)return null;var b=y$e(x,2),w=b[0],_=w.x,j=w.y,N=b[1],S=N.x,E=N.y,C=Ci(e,"hidden")?"url(#".concat(u,")"):void 0,P=k$(k$({clipPath:C},qe(e,!0)),{},{x1:_,y1:j,x2:S,y2:E});return O.createElement(Mt,{className:st("recharts-reference-line",l)},_$e(o,P),vn.renderCallByParent(e,$Me({x1:_,y1:j,x2:S,y2:E})))}var WP=function(e){function t(){return u$e(this,t),h$e(this,t,arguments)}return g$e(t,e),f$e(t,[{key:"render",value:function(){return O.createElement(S$e,this.props)}}])}(O.Component);qP(WP,"displayName","ReferenceLine");qP(WP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function sC(){return sC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sC.apply(this,arguments)}function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function A$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function O$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A$(Object(r),!0).forEach(function(n){Vw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E$e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NW(n.key),n)}}function k$e(e,t,r){return t&&E$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function P$e(e,t,r){return t=qb(t),A$e(e,_W()?Reflect.construct(t,r||[],qb(e).constructor):t.apply(e,r))}function A$e(e,t){if(t&&(Zf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O$e(e)}function O$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_W=function(){return!!e})()}function qb(e){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qb(e)}function T$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aC(e,t)}function aC(e,t){return aC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},aC(e,t)}function Vw(e,t,r){return t=NW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NW(e){var t=D$e(e,"string");return Zf(t)=="symbol"?t:t+""}function D$e(e,t){if(Zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R$e=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=FP({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Ci(t,"discard")&&!o.isInRange(l)?null:l},qw=function(e){function t(){return C$e(this,t),P$e(this,t,arguments)}return T$e(t,e),k$e(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=cn(a),d=cn(i);if(Ka(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=R$e(this.props);if(!f)return null;var h=f.x,m=f.y,g=this.props,p=g.shape,v=g.className,x=Ci(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=O$(O$({clipPath:x},qe(this.props,!0)),{},{cx:h,cy:m});return O.createElement(Mt,{className:st("recharts-reference-dot",v)},t.renderDot(p,b),vn.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(O.Component);Vw(qw,"displayName","ReferenceDot");Vw(qw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Vw(qw,"renderDot",function(e,t){var r;return O.isValidElement(e)?r=O.cloneElement(e,t):Xe(e)?r=e(t):r=O.createElement(pv,sC({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function iC(){return iC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iC.apply(this,arguments)}function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}function T$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function D$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T$(Object(r),!0).forEach(function(n){Ww(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $$e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CW(n.key),n)}}function I$e(e,t,r){return t&&$$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function L$e(e,t,r){return t=Wb(t),F$e(e,SW()?Reflect.construct(t,r||[],Wb(e).constructor):t.apply(e,r))}function F$e(e,t){if(t&&(Jf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U$e(e)}function U$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SW=function(){return!!e})()}function Wb(e){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wb(e)}function B$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oC(e,t)}function oC(e,t){return oC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},oC(e,t)}function Ww(e,t,r){return t=CW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CW(e){var t=z$e(e,"string");return Jf(t)=="symbol"?t:t+""}function z$e(e,t){if(Jf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V$e=function(t,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=FP({x:d.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Ci(i,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:fW(m,g)},Hw=function(e){function t(){return M$e(this,t),L$e(this,t,arguments)}return B$e(t,e),I$e(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Ka(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=cn(a),h=cn(i),m=cn(o),g=cn(l),p=this.props.shape;if(!f&&!h&&!m&&!g&&!p)return null;var v=V$e(f,h,m,g,this.props);if(!v&&!p)return null;var x=Ci(this.props,"hidden")?"url(#".concat(d,")"):void 0;return O.createElement(Mt,{className:st("recharts-reference-area",c)},t.renderRect(p,D$(D$({clipPath:x},qe(this.props,!0)),v)),vn.renderCallByParent(this.props,v))}}])}(O.Component);Ww(Hw,"displayName","ReferenceArea");Ww(Hw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Ww(Hw,"renderRect",function(e,t){var r;return O.isValidElement(e)?r=O.cloneElement(e,t):Xe(e)?r=e(t):r=O.createElement(LP,iC({},t,{className:"recharts-reference-area-rect"})),r});function EW(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function q$e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return LMe(n,r)}function W$e(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function Hb(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function H$e(e,t){return EW(e,t+1)}function K$e(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:EW(n,u)};var p=c,v,x=function(){return v===void 0&&(v=r(g,p)),v},b=g.coordinate,w=c===0||Hb(e,b,x,d,l);w||(c=0,d=o,u+=1),w&&(d=b+e*(x()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function _g(e){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_g(e)}function R$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R$(Object(r),!0).forEach(function(n){G$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G$e(e,t,r){return t=Y$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y$e(e){var t=X$e(e,"string");return _g(t)=="symbol"?t:t+""}function X$e(e,t){if(_g(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q$e(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(h){var m=i[h],g,p=function(){return g===void 0&&(g=r(m,h)),g};if(h===o-1){var v=e*(m.coordinate+e*p()/2-c);i[h]=m=$n($n({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else i[h]=m=$n($n({},m),{},{tickCoord:m.coordinate});var x=Hb(e,m.tickCoord,p,l,c);x&&(c=m.tickCoord-e*(p()/2+a),i[h]=$n($n({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function Z$e(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=$n($n({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=Hb(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=$n($n({},d),{},{isShow:!0}))}for(var g=i?l-1:l,p=function(b){var w=o[b],_,j=function(){return _===void 0&&(_=r(w,b)),_};if(b===0){var N=e*(w.coordinate-e*j()/2-c);o[b]=w=$n($n({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[b]=w=$n($n({},w),{},{tickCoord:w.coordinate});var S=Hb(e,w.tickCoord,j,c,u);S&&(c=w.tickCoord+e*(j()/2+a),o[b]=$n($n({},w),{},{isShow:!0}))},v=0;v<g;v++)p(v);return o}function HP(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(je(c)||Ga.isSsr)return H$e(a,typeof c=="number"&&je(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=d&&m==="width"?Zm(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=function(w,_){var j=Xe(u)?u(w.value,_):w.value;return m==="width"?q$e(Zm(j,{fontSize:t,letterSpacing:r}),g,f):Zm(j,{fontSize:t,letterSpacing:r})[m]},v=a.length>=2?es(a[1].coordinate-a[0].coordinate):1,x=W$e(i,v,m);return c==="equidistantPreserveStart"?K$e(v,x,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Z$e(v,x,p,a,o,c==="preserveStartEnd"):h=Q$e(v,x,p,a,o),h.filter(function(b){return b.isShow}))}var J$e=["viewBox"],e4e=["viewBox"],t4e=["ticks"];function eh(e){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eh(e)}function $d(){return $d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$d.apply(this,arguments)}function M$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M$(Object(r),!0).forEach(function(n){KP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V_(e,t){if(e==null)return{};var r=r4e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function r4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function n4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PW(n.key),n)}}function s4e(e,t,r){return t&&$$(e.prototype,t),r&&$$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a4e(e,t,r){return t=Kb(t),i4e(e,kW()?Reflect.construct(t,r||[],Kb(e).constructor):t.apply(e,r))}function i4e(e,t){if(t&&(eh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o4e(e)}function o4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kW=function(){return!!e})()}function Kb(e){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kb(e)}function l4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lC(e,t)}function lC(e,t){return lC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lC(e,t)}function KP(e,t,r){return t=PW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PW(e){var t=c4e(e,"string");return eh(t)=="symbol"?t:t+""}function c4e(e,t){if(eh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(eh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uh=function(e){function t(r){var n;return n4e(this,t),n=a4e(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return l4e(t,e),s4e(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=V_(n,J$e),l=this.props,c=l.viewBox,u=V_(l,e4e);return!Xd(i,c)||!Xd(o,u)||!Xd(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,g,p,v,x,b,w=f?-1:1,_=n.tickSize||d,j=je(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=g=n.coordinate,v=o+ +!f*c,p=v-w*_,b=p-w*h,x=j;break;case"left":p=v=n.coordinate,g=i+ +!f*l,m=g-w*_,x=m-w*h,b=j;break;case"right":p=v=n.coordinate,g=i+ +f*l,m=g+w*_,x=m+w*h,b=j;break;default:m=g=n.coordinate,v=o+ +f*c,p=v+w*_,b=p+w*h,x=j;break}return{line:{x1:m,y1:p,x2:g,y2:v},tick:{x,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=Jr(Jr(Jr({},qe(this.props,!1)),qe(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=Jr(Jr({},f),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=Jr(Jr({},f),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return O.createElement("line",$d({},f,{className:st("recharts-cartesian-axis-line",Vs(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=HP(Jr(Jr({},this.props),{},{ticks:n}),a,i),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),v=qe(this.props,!1),x=qe(d,!1),b=Jr(Jr({},v),{},{fill:"none"},qe(c,!1)),w=m.map(function(_,j){var N=o.getTickLineCoord(_),S=N.line,E=N.tick,C=Jr(Jr(Jr(Jr({textAnchor:g,verticalAnchor:p},v),{},{stroke:"none",fill:u},x),E),{},{index:j,payload:_,visibleTicksCount:m.length,tickFormatter:f});return O.createElement(Mt,$d({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Pu(o.props,_,j)),c&&O.createElement("line",$d({},b,S,{className:st("recharts-cartesian-axis-tick-line",Vs(c,"className"))})),d&&t.renderTickItem(d,C,"".concat(Xe(f)?f(_.value,j):_.value).concat(h||"")))});return O.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=V_(f,t4e),g=h;return Xe(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:O.createElement(Mt,{className:st("recharts-cartesian-axis",u),ref:function(v){n.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),vn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=st(a.className,"recharts-cartesian-axis-tick-value");return O.isValidElement(n)?o=O.cloneElement(n,Jr(Jr({},a),{},{className:l})):Xe(n)?o=n(Jr(Jr({},a),{},{className:l})):o=O.createElement(Au,$d({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(y.Component);KP(Uh,"displayName","CartesianAxis");KP(Uh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var u4e=["x1","y1","x2","y2","key"],d4e=["offset"];function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function I$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I$(Object(r),!0).forEach(function(n){f4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f4e(e,t,r){return t=h4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h4e(e){var t=m4e(e,"string");return Du(t)=="symbol"?t:t+""}function m4e(e,t){if(Du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zc(){return zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zc.apply(this,arguments)}function L$(e,t){if(e==null)return{};var r=p4e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function p4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var g4e=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return O.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function AW(e,t){var r;if(O.isValidElement(e))r=O.cloneElement(e,t);else if(Xe(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=L$(t,u4e),u=qe(c,!1);u.offset;var d=L$(u,d4e);r=O.createElement("line",zc({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function v4e(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Ln(Ln({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return AW(a,u)});return O.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function y4e(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Ln(Ln({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return AW(a,u)});return O.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function x4e(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?a+o-h:d[m+1]-h;if(p<=0)return null;var v=m%t.length;return O.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:p,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function b4e(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?i+l-h:d[m+1]-h;if(p<=0)return null;var v=m%n.length;return O.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:p,height:c,stroke:"none",fill:n[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var w4e=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return bq(HP(Ln(Ln(Ln({},Uh.defaultProps),n),{},{ticks:uo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},j4e=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return bq(HP(Ln(Ln(Ln({},Uh.defaultProps),n),{},{ticks:uo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},fd={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Wy(e){var t,r,n,a,i,o,l=zP(),c=VP(),u=c$e(),d=Ln(Ln({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:fd.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:fd.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:fd.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:fd.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:fd.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:fd.verticalFill,x:je(e.x)?e.x:u.left,y:je(e.y)?e.y:u.top,width:je(e.width)?e.width:u.width,height:je(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,g=d.height,p=d.syncWithTicks,v=d.horizontalValues,x=d.verticalValues,b=i$e(),w=o$e();if(!je(m)||m<=0||!je(g)||g<=0||!je(f)||f!==+f||!je(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||w4e,j=d.horizontalCoordinatesGenerator||j4e,N=d.horizontalPoints,S=d.verticalPoints;if((!N||!N.length)&&Xe(j)){var E=v&&v.length,C=j({yAxis:w?Ln(Ln({},w),{},{ticks:E?v:w.ticks}):void 0,width:l,height:c,offset:u},E?!0:p);Ka(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Du(C),"]")),Array.isArray(C)&&(N=C)}if((!S||!S.length)&&Xe(_)){var P=x&&x.length,A=_({xAxis:b?Ln(Ln({},b),{},{ticks:P?x:b.ticks}):void 0,width:l,height:c,offset:u},P?!0:p);Ka(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Du(A),"]")),Array.isArray(A)&&(S=A)}return O.createElement("g",{className:"recharts-cartesian-grid"},O.createElement(g4e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),O.createElement(v4e,zc({},d,{offset:u,horizontalPoints:N,xAxis:b,yAxis:w})),O.createElement(y4e,zc({},d,{offset:u,verticalPoints:S,xAxis:b,yAxis:w})),O.createElement(x4e,zc({},d,{horizontalPoints:N})),O.createElement(b4e,zc({},d,{verticalPoints:S})))}Wy.displayName="CartesianGrid";var _4e=["type","layout","connectNulls","ref"],N4e=["key"];function th(e){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(e)}function F$(e,t){if(e==null)return{};var r=S4e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function S4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function sp(){return sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sp.apply(this,arguments)}function U$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ds(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U$(Object(r),!0).forEach(function(n){Fa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hd(e){return P4e(e)||k4e(e)||E4e(e)||C4e()}function C4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E4e(e,t){if(e){if(typeof e=="string")return cC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cC(e,t)}}function k4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function P4e(e){if(Array.isArray(e))return cC(e)}function cC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TW(n.key),n)}}function O4e(e,t,r){return t&&B$(e.prototype,t),r&&B$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function T4e(e,t,r){return t=Gb(t),D4e(e,OW()?Reflect.construct(t,r||[],Gb(e).constructor):t.apply(e,r))}function D4e(e,t){if(t&&(th(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R4e(e)}function R4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OW=function(){return!!e})()}function Gb(e){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gb(e)}function M4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uC(e,t)}function uC(e,t){return uC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uC(e,t)}function Fa(e,t,r){return t=TW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TW(e){var t=$4e(e,"string");return th(t)=="symbol"?t:t+""}function $4e(e,t){if(th(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var au=function(e){function t(){var r;A4e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=T4e(this,t,[].concat(a)),Fa(r,"state",{isAnimationFinished:!0,totalLength:0}),Fa(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Fa(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(x,b){return x+b});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,h=l-o,m=[],g=0,p=0;g<c.length;p+=c[g],++g)if(p+c[g]>f){m=[].concat(hd(c.slice(0,g)),[f-p]);break}var v=m.length%2===0?[0,h]:[h];return[].concat(hd(t.repeat(c,d)),hd(m),v).map(function(x){return"".concat(x,"px")}).join(", ")}),Fa(r,"id",Ah("recharts-line-")),Fa(r,"pathRef",function(o){r.mainCurve=o}),Fa(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Fa(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return M4e(t,e),O4e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=qs(d,mv);if(!f)return null;var h=function(p,v){return{x:p.x,y:p.y,value:p.value,errorVal:Br(p.payload,v)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return O.createElement(Mt,m,f.map(function(g){return O.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=qe(this.props,!1),h=qe(c,!0),m=u.map(function(p,v){var x=Ds(Ds(Ds({key:"dot-".concat(v),r:3},f),h),{},{index:v,cx:p.x,cy:p.y,value:p.value,dataKey:d,payload:p.payload,points:u});return t.renderDotItem(c,x)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return O.createElement(Mt,sp({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(n,a,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=F$(l,_4e),h=Ds(Ds(Ds({},qe(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:d});return O.createElement(Cb,sp({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,g=o.animateNewValues,p=o.width,v=o.height,x=this.state,b=x.prevPoints,w=x.totalLength;return O.createElement(ni,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var j=_.t;if(b){var N=b.length/l.length,S=l.map(function(k,D){var R=Math.floor(D*N);if(b[R]){var U=b[R],B=En(U.x,k.x),L=En(U.y,k.y);return Ds(Ds({},k),{},{x:B(j),y:L(j)})}if(g){var M=En(p*2,k.x),T=En(v/2,k.y);return Ds(Ds({},k),{},{x:M(j),y:T(j)})}return Ds(Ds({},k),{},{x:k.x,y:k.y})});return i.renderCurveStatically(S,n,a)}var E=En(0,w),C=E(j),P;if(c){var A="".concat(c).split(/[,\s]+/gim).map(function(k){return parseFloat(k)});P=i.getStrokeDasharray(C,w,A)}else P=i.generateSimpleStrokeDasharray(w,C);return i.renderCurveStatically(l,n,a,{strokeDasharray:P})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Mh(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,f=a.top,h=a.left,m=a.width,g=a.height,p=a.isAnimationActive,v=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,w=st("recharts-line",c),_=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,N=_||j,S=it(v)?this.id:v,E=(n=qe(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},C=E.r,P=C===void 0?3:C,A=E.strokeWidth,k=A===void 0?2:A,D=Ige(o)?o:{},R=D.clipDot,U=R===void 0?!0:R,B=P*2+k;return O.createElement(Mt,{className:w},_||j?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(S)},O.createElement("rect",{x:_?h:h-m/2,y:j?f:f-g/2,width:_?m:m*2,height:j?g:g*2})),!U&&O.createElement("clipPath",{id:"clipPath-dots-".concat(S)},O.createElement("rect",{x:h-B/2,y:f-B/2,width:m+B,height:g+B}))):null,!b&&this.renderCurve(N,S),this.renderErrorBar(N,S),(b||o)&&this.renderDots(N,U,S),(!p||x)&&Si.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(hd(n),[0]):n,o=[],l=0;l<a;++l)o=[].concat(hd(o),hd(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(O.isValidElement(n))i=O.cloneElement(n,a);else if(Xe(n))i=n(a);else{var o=a.key,l=F$(a,N4e),c=st("recharts-line-dot",typeof n!="boolean"?n.className:"");i=O.createElement(pv,sp({key:o},l,{className:c}))}return i}}])}(y.PureComponent);Fa(au,"displayName","Line");Fa(au,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ga.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Fa(au,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,m){var g=Br(h,o);return d==="horizontal"?{x:lM({axis:r,ticks:a,bandSize:l,entry:h,index:m}),y:it(g)?null:n.scale(g),value:g,payload:h}:{x:it(g)?null:r.scale(g),y:lM({axis:n,ticks:i,bandSize:l,entry:h,index:m}),value:g,payload:h}});return Ds({points:f,layout:d},u)});function rh(e){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(e)}function I4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L4e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MW(n.key),n)}}function F4e(e,t,r){return t&&L4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U4e(e,t,r){return t=Yb(t),B4e(e,DW()?Reflect.construct(t,r||[],Yb(e).constructor):t.apply(e,r))}function B4e(e,t){if(t&&(rh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z4e(e)}function z4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DW=function(){return!!e})()}function Yb(e){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yb(e)}function V4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dC(e,t)}function dC(e,t){return dC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dC(e,t)}function RW(e,t,r){return t=MW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MW(e){var t=q4e(e,"string");return rh(t)=="symbol"?t:t+""}function q4e(e,t){if(rh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fC(){return fC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fC.apply(this,arguments)}function W4e(e){var t=e.xAxisId,r=zP(),n=VP(),a=xW(t);return a==null?null:y.createElement(Uh,fC({},a,{className:st("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return uo(o,!0)}}))}var iu=function(e){function t(){return I4e(this,t),U4e(this,t,arguments)}return V4e(t,e),F4e(t,[{key:"render",value:function(){return y.createElement(W4e,this.props)}}])}(y.Component);RW(iu,"displayName","XAxis");RW(iu,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function nh(e){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nh(e)}function H4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K4e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LW(n.key),n)}}function G4e(e,t,r){return t&&K4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y4e(e,t,r){return t=Xb(t),X4e(e,$W()?Reflect.construct(t,r||[],Xb(e).constructor):t.apply(e,r))}function X4e(e,t){if(t&&(nh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q4e(e)}function Q4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($W=function(){return!!e})()}function Xb(e){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xb(e)}function Z4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hC(e,t)}function hC(e,t){return hC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hC(e,t)}function IW(e,t,r){return t=LW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LW(e){var t=J4e(e,"string");return nh(t)=="symbol"?t:t+""}function J4e(e,t){if(nh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mC(){return mC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mC.apply(this,arguments)}var eIe=function(t){var r=t.yAxisId,n=zP(),a=VP(),i=bW(r);return i==null?null:y.createElement(Uh,mC({},i,{className:st("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return uo(l,!0)}}))},ou=function(e){function t(){return H4e(this,t),Y4e(this,t,arguments)}return Z4e(t,e),G4e(t,[{key:"render",value:function(){return y.createElement(eIe,this.props)}}])}(y.Component);IW(ou,"displayName","YAxis");IW(ou,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function z$(e){return sIe(e)||nIe(e)||rIe(e)||tIe()}function tIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rIe(e,t){if(e){if(typeof e=="string")return pC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pC(e,t)}}function nIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sIe(e){if(Array.isArray(e))return pC(e)}function pC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gC=function(t,r,n,a,i){var o=qs(t,WP),l=qs(t,qw),c=[].concat(z$(o),z$(l)),u=qs(t,Hw),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(p,v){if(v.props[d]===n&&Ci(v.props,"extendDomain")&&je(v.props[f])){var x=v.props[f];return[Math.min(p[0],x),Math.max(p[1],x)]}return p},h)),u.length){var m="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(p,v){if(v.props[d]===n&&Ci(v.props,"extendDomain")&&je(v.props[m])&&je(v.props[g])){var x=v.props[m],b=v.props[g];return[Math.min(p[0],x,b),Math.max(p[1],x,b)]}return p},h)}return i&&i.length&&(h=i.reduce(function(p,v){return je(v)?[Math.min(p[0],v),Math.max(p[1],v)]:p},h)),h},FW={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var p=r?r+u:u;if(!this._events[p])return!1;var v=this._events[p],x=arguments.length,b,w;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(w=1,b=new Array(x-1);w<x;w++)b[w-1]=arguments[w];v.fn.apply(v.context,b)}else{var _=v.length,j;for(w=0;w<_;w++)switch(v[w].once&&this.removeListener(u,v[w].fn,void 0,!0),x){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,d);break;case 3:v[w].fn.call(v[w].context,d,f);break;case 4:v[w].fn.call(v[w].context,d,f,h);break;default:if(!b)for(j=1,b=new Array(x-1);j<x;j++)b[j-1]=arguments[j];v[w].fn.apply(v[w].context,b)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var p=0,v=[],x=g.length;p<x;p++)(g[p].fn!==d||h&&!g[p].once||f&&g[p].context!==f)&&v.push(g[p]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(FW);var aIe=FW.exports;const iIe=Gt(aIe);var q_=new iIe,W_="recharts.syncMouseEvents";function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function oIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UW(n.key),n)}}function cIe(e,t,r){return t&&lIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function H_(e,t,r){return t=UW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UW(e){var t=uIe(e,"string");return Ng(t)=="symbol"?t:t+""}function uIe(e,t){if(Ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dIe=function(){function e(){oIe(this,e),H_(this,"activeIndex",0),H_(this,"coordinateList",[]),H_(this,"layout","horizontal")}return cIe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function fIe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&je(n)&&je(a))return!0}return!1}function hIe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function BW(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=Kt(t,r,n,a),l=Kt(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function mIe(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=Kt(l,c,u,f),m=Kt(l,c,d,f);n=h.x,a=h.y,i=m.x,o=m.y}else return BW(t);return[{x:n,y:a},{x:i,y:o}]}function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function V$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V$(Object(r),!0).forEach(function(n){pIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pIe(e,t,r){return t=gIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gIe(e){var t=vIe(e,"string");return Sg(t)=="symbol"?t:t+""}function vIe(e,t){if(Sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yIe(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,p=Cb;if(h==="ScatterChart")g=o,p=dTe;else if(h==="BarChart")g=hIe(f,o,c,d),p=LP;else if(f==="radial"){var v=BW(o),x=v.cx,b=v.cy,w=v.radius,_=v.startAngle,j=v.endAngle;g={cx:x,cy:b,startAngle:_,endAngle:j,innerRadius:w,outerRadius:w},p=Dq}else g={points:mIe(f,o,c)},p=Cb;var N=xy(xy(xy(xy({stroke:"#ccc",pointerEvents:"none"},c),g),qe(m,!1)),{},{payload:l,payloadIndex:u,className:st("recharts-tooltip-cursor",m.className)});return y.isValidElement(m)?y.cloneElement(m,N):y.createElement(p,N)}var xIe=["item"],bIe=["children","className","width","height","style","compact","title","desc"];function sh(e){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(e)}function Id(){return Id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Id.apply(this,arguments)}function q$(e,t){return _Ie(e)||jIe(e,t)||VW(e,t)||wIe()}function wIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jIe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function _Ie(e){if(Array.isArray(e))return e}function W$(e,t){if(e==null)return{};var r=NIe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NIe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function SIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qW(n.key),n)}}function EIe(e,t,r){return t&&CIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kIe(e,t,r){return t=Qb(t),PIe(e,zW()?Reflect.construct(t,r||[],Qb(e).constructor):t.apply(e,r))}function PIe(e,t){if(t&&(sh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AIe(e)}function AIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zW=function(){return!!e})()}function Qb(e){return Qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qb(e)}function OIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vC(e,t)}function vC(e,t){return vC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},vC(e,t)}function ah(e){return RIe(e)||DIe(e)||VW(e)||TIe()}function TIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VW(e,t){if(e){if(typeof e=="string")return yC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yC(e,t)}}function DIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RIe(e){if(Array.isArray(e))return yC(e)}function yC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H$(Object(r),!0).forEach(function(n){Qe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qe(e,t,r){return t=qW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qW(e){var t=MIe(e,"string");return sh(t)=="symbol"?t:t+""}function MIe(e,t){if(sh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Ie={xAxis:["bottom","top"],yAxis:["left","right"]},IIe={width:"100%",height:"100%"},WW={x:0,y:0};function by(e){return e}var LIe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},FIe=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return ue(ue(ue({},a),Kt(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return ue(ue(ue({},a),Kt(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return WW},Kw=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(ah(l),ah(u)):l},[]);return o.length>0?o:t&&t.length&&je(a)&&je(i)?t.slice(a,i+1):[]};function HW(e){return e==="number"?[0,"auto"]:void 0}var xC=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,l=Kw(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;h=Yx(m,o.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(ah(c),[Sq(u,h)]):c},[])},K$=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=LIe(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=LPe(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=xC(t,r,d,f),m=FIe(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},UIe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=xq(d,i);return n.reduce(function(g,p){var v,x=p.type.defaultProps!==void 0?ue(ue({},p.type.defaultProps),p.props):p.props,b=x.type,w=x.dataKey,_=x.allowDataOverflow,j=x.allowDuplicatedCategory,N=x.scale,S=x.ticks,E=x.includeHidden,C=x[o];if(g[C])return g;var P=Kw(t.data,{graphicalItems:a.filter(function(W){var K,V=o in W.props?W.props[o]:(K=W.type.defaultProps)===null||K===void 0?void 0:K[o];return V===C}),dataStartIndex:c,dataEndIndex:u}),A=P.length,k,D,R;fIe(x.domain,_,b)&&(k=TS(x.domain,null,_),m&&(b==="number"||N!=="auto")&&(R=ep(P,w,"category")));var U=HW(b);if(!k||k.length===0){var B,L=(B=x.domain)!==null&&B!==void 0?B:U;if(w){if(k=ep(P,w,b),b==="category"&&m){var M=Ege(k);j&&M?(D=k,k=Lb(0,A)):j||(k=fM(L,k,p).reduce(function(W,K){return W.indexOf(K)>=0?W:[].concat(ah(W),[K])},[]))}else if(b==="category")j?k=k.filter(function(W){return W!==""&&!it(W)}):k=fM(L,k,p).reduce(function(W,K){return W.indexOf(K)>=0||K===""||it(K)?W:[].concat(ah(W),[K])},[]);else if(b==="number"){var T=VPe(P,a.filter(function(W){var K,V,le=o in W.props?W.props[o]:(K=W.type.defaultProps)===null||K===void 0?void 0:K[o],be="hide"in W.props?W.props.hide:(V=W.type.defaultProps)===null||V===void 0?void 0:V.hide;return le===C&&(E||!be)}),w,i,d);T&&(k=T)}m&&(b==="number"||N!=="auto")&&(R=ep(P,w,"category"))}else m?k=Lb(0,A):l&&l[C]&&l[C].hasStack&&b==="number"?k=h==="expand"?[0,1]:Nq(l[C].stackGroups,c,u):k=yq(P,a.filter(function(W){var K=o in W.props?W.props[o]:W.type.defaultProps[o],V="hide"in W.props?W.props.hide:W.type.defaultProps.hide;return K===C&&(E||!V)}),b,d,!0);if(b==="number")k=gC(f,k,C,i,S),L&&(k=TS(L,k,_));else if(b==="category"&&L){var F=L,Z=k.every(function(W){return F.indexOf(W)>=0});Z&&(k=F)}}return ue(ue({},g),{},Qe({},C,ue(ue({},x),{},{axisType:i,domain:k,categoricalDomain:R,duplicateDomain:D,originalDomain:(v=x.domain)!==null&&v!==void 0?v:U,isCategorical:m,layout:d})))},{})},BIe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=Kw(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=xq(d,i),p=-1;return n.reduce(function(v,x){var b=x.type.defaultProps!==void 0?ue(ue({},x.type.defaultProps),x.props):x.props,w=b[o],_=HW("number");if(!v[w]){p++;var j;return g?j=Lb(0,m):l&&l[w]&&l[w].hasStack?(j=Nq(l[w].stackGroups,c,u),j=gC(f,j,w,i)):(j=TS(_,yq(h,n.filter(function(N){var S,E,C=o in N.props?N.props[o]:(S=N.type.defaultProps)===null||S===void 0?void 0:S[o],P="hide"in N.props?N.props.hide:(E=N.type.defaultProps)===null||E===void 0?void 0:E.hide;return C===w&&!P}),"number",d),a.defaultProps.allowDataOverflow),j=gC(f,j,w,i)),ue(ue({},v),{},Qe({},w,ue(ue({axisType:i},a.defaultProps),{},{hide:!0,orientation:Vs($Ie,"".concat(i,".").concat(p%2),null),domain:j,originalDomain:_,isCategorical:g,layout:d})))}return v},{})},zIe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=qs(d,i),m={};return h&&h.length?m=UIe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=BIe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},VIe=function(t){var r=dl(t),n=uo(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:dP(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:_b(r,n)}},G$=function(t){var r=t.children,n=t.defaultShowTooltip,a=$s(r,Yf),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},qIe=function(t){return!t||!t.length?!1:t.some(function(r){var n=mo(r&&r.type);return n&&n.indexOf("Bar")>=0})},Y$=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},WIe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=$s(f,Yf),g=$s(f,ru),p=Object.keys(c).reduce(function(j,N){var S=c[N],E=S.orientation;return!S.mirror&&!S.hide?ue(ue({},j),{},Qe({},E,j[E]+S.width)):j},{left:h.left||0,right:h.right||0}),v=Object.keys(o).reduce(function(j,N){var S=o[N],E=S.orientation;return!S.mirror&&!S.hide?ue(ue({},j),{},Qe({},E,Vs(j,"".concat(E))+S.height)):j},{top:h.top||0,bottom:h.bottom||0}),x=ue(ue({},v),p),b=x.bottom;m&&(x.bottom+=m.props.height||Yf.defaultProps.height),g&&r&&(x=BPe(x,a,n,r));var w=u-x.left-x.right,_=d-x.top-x.bottom;return ue(ue({brushBottom:b},x),{},{width:Math.max(w,0),height:Math.max(_,0)})},HIe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Gw=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(x,b){var w=b.graphicalItems,_=b.stackGroups,j=b.offset,N=b.updateId,S=b.dataStartIndex,E=b.dataEndIndex,C=x.barSize,P=x.layout,A=x.barGap,k=x.barCategoryGap,D=x.maxBarSize,R=Y$(P),U=R.numericAxisName,B=R.cateAxisName,L=qIe(w),M=[];return w.forEach(function(T,F){var Z=Kw(x.data,{graphicalItems:[T],dataStartIndex:S,dataEndIndex:E}),W=T.type.defaultProps!==void 0?ue(ue({},T.type.defaultProps),T.props):T.props,K=W.dataKey,V=W.maxBarSize,le=W["".concat(U,"Id")],be=W["".concat(B,"Id")],ce={},Pe=c.reduce(function(Q,ee){var Ne=b["".concat(ee.axisType,"Map")],Se=W["".concat(ee.axisType,"Id")];Ne&&Ne[Se]||ee.axisType==="zAxis"||Tu();var ve=Ne[Se];return ue(ue({},Q),{},Qe(Qe({},ee.axisType,ve),"".concat(ee.axisType,"Ticks"),uo(ve)))},ce),ie=Pe[B],me=Pe["".concat(B,"Ticks")],_e=_&&_[le]&&_[le].hasStack&&ZPe(T,_[le].stackGroups),se=mo(T.type).indexOf("Bar")>=0,ot=_b(ie,me),He=[],Lt=L&&FPe({barSize:C,stackGroups:_,totalSize:HIe(Pe,B)});if(se){var Tt,Wt,Yt=it(V)?D:V,qr=(Tt=(Wt=_b(ie,me,!0))!==null&&Wt!==void 0?Wt:Yt)!==null&&Tt!==void 0?Tt:0;He=UPe({barGap:A,barCategoryGap:k,bandSize:qr!==ot?qr:ot,sizeList:Lt[be],maxBarSize:Yt}),qr!==ot&&(He=He.map(function(Q){return ue(ue({},Q),{},{position:ue(ue({},Q.position),{},{offset:Q.position.offset-qr/2})})}))}var z=T&&T.type&&T.type.getComposedData;z&&M.push({props:ue(ue({},z(ue(ue({},Pe),{},{displayedData:Z,props:x,dataKey:K,item:T,bandSize:ot,barPosition:He,offset:j,stackedData:_e,layout:P,dataStartIndex:S,dataEndIndex:E}))),{},Qe(Qe(Qe({key:T.key||"item-".concat(F)},U,Pe[U]),B,Pe[B]),"animationId",N)),childIndex:Uge(T,x.children),item:T})}),M},m=function(x,b){var w=x.props,_=x.dataStartIndex,j=x.dataEndIndex,N=x.updateId;if(!aD({props:w}))return null;var S=w.children,E=w.layout,C=w.stackOffset,P=w.data,A=w.reverseStackOrder,k=Y$(E),D=k.numericAxisName,R=k.cateAxisName,U=qs(S,n),B=XPe(P,U,"".concat(D,"Id"),"".concat(R,"Id"),C,A),L=c.reduce(function(W,K){var V="".concat(K.axisType,"Map");return ue(ue({},W),{},Qe({},V,zIe(w,ue(ue({},K),{},{graphicalItems:U,stackGroups:K.axisType===D&&B,dataStartIndex:_,dataEndIndex:j}))))},{}),M=WIe(ue(ue({},L),{},{props:w,graphicalItems:U}),b==null?void 0:b.legendBBox);Object.keys(L).forEach(function(W){L[W]=d(w,L[W],M,W.replace("Map",""),r)});var T=L["".concat(R,"Map")],F=VIe(T),Z=h(w,ue(ue({},L),{},{dataStartIndex:_,dataEndIndex:j,updateId:N,graphicalItems:U,stackGroups:B,offset:M}));return ue(ue({formattedGraphicalItems:Z,graphicalItems:U,offset:M,stackGroups:B},F),L)},g=function(v){function x(b){var w,_,j;return SIe(this,x),j=kIe(this,x,[b]),Qe(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Qe(j,"accessibilityManager",new dIe),Qe(j,"handleLegendBBoxUpdate",function(N){if(N){var S=j.state,E=S.dataStartIndex,C=S.dataEndIndex,P=S.updateId;j.setState(ue({legendBBox:N},m({props:j.props,dataStartIndex:E,dataEndIndex:C,updateId:P},ue(ue({},j.state),{},{legendBBox:N}))))}}),Qe(j,"handleReceiveSyncEvent",function(N,S,E){if(j.props.syncId===N){if(E===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(S)}}),Qe(j,"handleBrushChange",function(N){var S=N.startIndex,E=N.endIndex;if(S!==j.state.dataStartIndex||E!==j.state.dataEndIndex){var C=j.state.updateId;j.setState(function(){return ue({dataStartIndex:S,dataEndIndex:E},m({props:j.props,dataStartIndex:S,dataEndIndex:E,updateId:C},j.state))}),j.triggerSyncEvent({dataStartIndex:S,dataEndIndex:E})}}),Qe(j,"handleMouseEnter",function(N){var S=j.getMouseInfo(N);if(S){var E=ue(ue({},S),{},{isTooltipActive:!0});j.setState(E),j.triggerSyncEvent(E);var C=j.props.onMouseEnter;Xe(C)&&C(E,N)}}),Qe(j,"triggeredAfterMouseMove",function(N){var S=j.getMouseInfo(N),E=S?ue(ue({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(E),j.triggerSyncEvent(E);var C=j.props.onMouseMove;Xe(C)&&C(E,N)}),Qe(j,"handleItemMouseEnter",function(N){j.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),Qe(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),Qe(j,"handleMouseMove",function(N){N.persist(),j.throttleTriggeredAfterMouseMove(N)}),Qe(j,"handleMouseLeave",function(N){j.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};j.setState(S),j.triggerSyncEvent(S);var E=j.props.onMouseLeave;Xe(E)&&E(S,N)}),Qe(j,"handleOuterEvent",function(N){var S=Fge(N),E=Vs(j.props,"".concat(S));if(S&&Xe(E)){var C,P;/.*touch.*/i.test(S)?P=j.getMouseInfo(N.changedTouches[0]):P=j.getMouseInfo(N),E((C=P)!==null&&C!==void 0?C:{},N)}}),Qe(j,"handleClick",function(N){var S=j.getMouseInfo(N);if(S){var E=ue(ue({},S),{},{isTooltipActive:!0});j.setState(E),j.triggerSyncEvent(E);var C=j.props.onClick;Xe(C)&&C(E,N)}}),Qe(j,"handleMouseDown",function(N){var S=j.props.onMouseDown;if(Xe(S)){var E=j.getMouseInfo(N);S(E,N)}}),Qe(j,"handleMouseUp",function(N){var S=j.props.onMouseUp;if(Xe(S)){var E=j.getMouseInfo(N);S(E,N)}}),Qe(j,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),Qe(j,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.handleMouseDown(N.changedTouches[0])}),Qe(j,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.handleMouseUp(N.changedTouches[0])}),Qe(j,"handleDoubleClick",function(N){var S=j.props.onDoubleClick;if(Xe(S)){var E=j.getMouseInfo(N);S(E,N)}}),Qe(j,"handleContextMenu",function(N){var S=j.props.onContextMenu;if(Xe(S)){var E=j.getMouseInfo(N);S(E,N)}}),Qe(j,"triggerSyncEvent",function(N){j.props.syncId!==void 0&&q_.emit(W_,j.props.syncId,N,j.eventEmitterSymbol)}),Qe(j,"applySyncEvent",function(N){var S=j.props,E=S.layout,C=S.syncMethod,P=j.state.updateId,A=N.dataStartIndex,k=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)j.setState(ue({dataStartIndex:A,dataEndIndex:k},m({props:j.props,dataStartIndex:A,dataEndIndex:k,updateId:P},j.state)));else if(N.activeTooltipIndex!==void 0){var D=N.chartX,R=N.chartY,U=N.activeTooltipIndex,B=j.state,L=B.offset,M=B.tooltipTicks;if(!L)return;if(typeof C=="function")U=C(M,N);else if(C==="value"){U=-1;for(var T=0;T<M.length;T++)if(M[T].value===N.activeLabel){U=T;break}}var F=ue(ue({},L),{},{x:L.left,y:L.top}),Z=Math.min(D,F.x+F.width),W=Math.min(R,F.y+F.height),K=M[U]&&M[U].value,V=xC(j.state,j.props.data,U),le=M[U]?{x:E==="horizontal"?M[U].coordinate:Z,y:E==="horizontal"?W:M[U].coordinate}:WW;j.setState(ue(ue({},N),{},{activeLabel:K,activeCoordinate:le,activePayload:V,activeTooltipIndex:U}))}else j.setState(N)}),Qe(j,"renderCursor",function(N){var S,E=j.state,C=E.isTooltipActive,P=E.activeCoordinate,A=E.activePayload,k=E.offset,D=E.activeTooltipIndex,R=E.tooltipAxisBandSize,U=j.getTooltipEventType(),B=(S=N.props.active)!==null&&S!==void 0?S:C,L=j.props.layout,M=N.key||"_recharts-cursor";return O.createElement(yIe,{key:M,activeCoordinate:P,activePayload:A,activeTooltipIndex:D,chartName:r,element:N,isActive:B,layout:L,offset:k,tooltipAxisBandSize:R,tooltipEventType:U})}),Qe(j,"renderPolarAxis",function(N,S,E){var C=Vs(N,"type.axisType"),P=Vs(j.state,"".concat(C,"Map")),A=N.type.defaultProps,k=A!==void 0?ue(ue({},A),N.props):N.props,D=P&&P[k["".concat(C,"Id")]];return y.cloneElement(N,ue(ue({},D),{},{className:st(C,D.className),key:N.key||"".concat(S,"-").concat(E),ticks:uo(D,!0)}))}),Qe(j,"renderPolarGrid",function(N){var S=N.props,E=S.radialLines,C=S.polarAngles,P=S.polarRadius,A=j.state,k=A.radiusAxisMap,D=A.angleAxisMap,R=dl(k),U=dl(D),B=U.cx,L=U.cy,M=U.innerRadius,T=U.outerRadius;return y.cloneElement(N,{polarAngles:Array.isArray(C)?C:uo(U,!0).map(function(F){return F.coordinate}),polarRadius:Array.isArray(P)?P:uo(R,!0).map(function(F){return F.coordinate}),cx:B,cy:L,innerRadius:M,outerRadius:T,key:N.key||"polar-grid",radialLines:E})}),Qe(j,"renderLegend",function(){var N=j.state.formattedGraphicalItems,S=j.props,E=S.children,C=S.width,P=S.height,A=j.props.margin||{},k=C-(A.left||0)-(A.right||0),D=gq({children:E,formattedGraphicalItems:N,legendWidth:k,legendContent:u});if(!D)return null;var R=D.item,U=W$(D,xIe);return y.cloneElement(R,ue(ue({},U),{},{chartWidth:C,chartHeight:P,margin:A,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),Qe(j,"renderTooltip",function(){var N,S=j.props,E=S.children,C=S.accessibilityLayer,P=$s(E,ps);if(!P)return null;var A=j.state,k=A.isTooltipActive,D=A.activeCoordinate,R=A.activePayload,U=A.activeLabel,B=A.offset,L=(N=P.props.active)!==null&&N!==void 0?N:k;return y.cloneElement(P,{viewBox:ue(ue({},B),{},{x:B.left,y:B.top}),active:L,label:U,payload:L?R:[],coordinate:D,accessibilityLayer:C})}),Qe(j,"renderBrush",function(N){var S=j.props,E=S.margin,C=S.data,P=j.state,A=P.offset,k=P.dataStartIndex,D=P.dataEndIndex,R=P.updateId;return y.cloneElement(N,{key:N.key||"_recharts-brush",onChange:py(j.handleBrushChange,N.props.onChange),data:C,x:je(N.props.x)?N.props.x:A.left,y:je(N.props.y)?N.props.y:A.top+A.height+A.brushBottom-(E.bottom||0),width:je(N.props.width)?N.props.width:A.width,startIndex:k,endIndex:D,updateId:"brush-".concat(R)})}),Qe(j,"renderReferenceElement",function(N,S,E){if(!N)return null;var C=j,P=C.clipPathId,A=j.state,k=A.xAxisMap,D=A.yAxisMap,R=A.offset,U=N.type.defaultProps||{},B=N.props,L=B.xAxisId,M=L===void 0?U.xAxisId:L,T=B.yAxisId,F=T===void 0?U.yAxisId:T;return y.cloneElement(N,{key:N.key||"".concat(S,"-").concat(E),xAxis:k[M],yAxis:D[F],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:P})}),Qe(j,"renderActivePoints",function(N){var S=N.item,E=N.activePoint,C=N.basePoint,P=N.childIndex,A=N.isRange,k=[],D=S.props.key,R=S.item.type.defaultProps!==void 0?ue(ue({},S.item.type.defaultProps),S.item.props):S.item.props,U=R.activeDot,B=R.dataKey,L=ue(ue({index:P,dataKey:B,cx:E.x,cy:E.y,r:4,fill:IP(S.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},qe(U,!1)),Xx(U));return k.push(x.renderActiveDot(U,L,"".concat(D,"-activePoint-").concat(P))),C?k.push(x.renderActiveDot(U,ue(ue({},L),{},{cx:C.x,cy:C.y}),"".concat(D,"-basePoint-").concat(P))):A&&k.push(null),k}),Qe(j,"renderGraphicChild",function(N,S,E){var C=j.filterFormatItem(N,S,E);if(!C)return null;var P=j.getTooltipEventType(),A=j.state,k=A.isTooltipActive,D=A.tooltipAxis,R=A.activeTooltipIndex,U=A.activeLabel,B=j.props.children,L=$s(B,ps),M=C.props,T=M.points,F=M.isRange,Z=M.baseLine,W=C.item.type.defaultProps!==void 0?ue(ue({},C.item.type.defaultProps),C.item.props):C.item.props,K=W.activeDot,V=W.hide,le=W.activeBar,be=W.activeShape,ce=!!(!V&&k&&L&&(K||le||be)),Pe={};P!=="axis"&&L&&L.props.trigger==="click"?Pe={onClick:py(j.handleItemMouseEnter,N.props.onClick)}:P!=="axis"&&(Pe={onMouseLeave:py(j.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:py(j.handleItemMouseEnter,N.props.onMouseEnter)});var ie=y.cloneElement(N,ue(ue({},C.props),Pe));function me(ee){return typeof D.dataKey=="function"?D.dataKey(ee.payload):null}if(ce)if(R>=0){var _e,se;if(D.dataKey&&!D.allowDuplicatedCategory){var ot=typeof D.dataKey=="function"?me:"payload.".concat(D.dataKey.toString());_e=Yx(T,ot,U),se=F&&Z&&Yx(Z,ot,U)}else _e=T==null?void 0:T[R],se=F&&Z&&Z[R];if(be||le){var He=N.props.activeIndex!==void 0?N.props.activeIndex:R;return[y.cloneElement(N,ue(ue(ue({},C.props),Pe),{},{activeIndex:He})),null,null]}if(!it(_e))return[ie].concat(ah(j.renderActivePoints({item:C,activePoint:_e,basePoint:se,childIndex:R,isRange:F})))}else{var Lt,Tt=(Lt=j.getItemByXY(j.state.activeCoordinate))!==null&&Lt!==void 0?Lt:{graphicalItem:ie},Wt=Tt.graphicalItem,Yt=Wt.item,qr=Yt===void 0?N:Yt,z=Wt.childIndex,Q=ue(ue(ue({},C.props),Pe),{},{activeIndex:z});return[y.cloneElement(qr,Q),null,null]}return F?[ie,null,null]:[ie,null]}),Qe(j,"renderCustomized",function(N,S,E){return y.cloneElement(N,ue(ue({key:"recharts-customized-".concat(E)},j.props),j.state))}),Qe(j,"renderMap",{CartesianGrid:{handler:by,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:by},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:by},YAxis:{handler:by},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:Ah("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=pV(j.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),j.state={},j}return OIe(x,v),EIe(x,[{key:"componentDidMount",value:function(){var w,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,_=w.children,j=w.data,N=w.height,S=w.layout,E=$s(_,ps);if(E){var C=E.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,A=xC(this.state,j,C,P),k=this.state.tooltipTicks[C].coordinate,D=(this.state.offset.top+N)/2,R=S==="horizontal",U=R?{x:k,y:D}:{y:k,x:D},B=this.state.formattedGraphicalItems.find(function(M){var T=M.item;return T.type.name==="Scatter"});B&&(U=ue(ue({},U),B.props.points[C].tooltipPosition),A=B.props.points[C].tooltipPayload);var L={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:P,activePayload:A,activeCoordinate:U};this.setState(L),this.renderCursor(E),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,N;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(w){K1([$s(w.children,ps)],[$s(this.props.children,ps)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=$s(this.props.children,ps);if(w&&typeof w.props.shared=="boolean"){var _=w.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var _=this.container,j=_.getBoundingClientRect(),N=fSe(j),S={chartX:Math.round(w.pageX-N.left),chartY:Math.round(w.pageY-N.top)},E=j.width/_.offsetWidth||1,C=this.inRange(S.chartX,S.chartY,E);if(!C)return null;var P=this.state,A=P.xAxisMap,k=P.yAxisMap,D=this.getTooltipEventType(),R=K$(this.state,this.props.data,this.props.layout,C);if(D!=="axis"&&A&&k){var U=dl(A).scale,B=dl(k).scale,L=U&&U.invert?U.invert(S.chartX):null,M=B&&B.invert?B.invert(S.chartY):null;return ue(ue({},S),{},{xValue:L,yValue:M},R)}return R?ue(ue({},S),R):null}},{key:"inRange",value:function(w,_){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,S=w/j,E=_/j;if(N==="horizontal"||N==="vertical"){var C=this.state.offset,P=S>=C.left&&S<=C.left+C.width&&E>=C.top&&E<=C.top+C.height;return P?{x:S,y:E}:null}var A=this.state,k=A.angleAxisMap,D=A.radiusAxisMap;if(k&&D){var R=dl(k);return pM({x:S,y:E},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,_=this.getTooltipEventType(),j=$s(w,ps),N={};j&&_==="axis"&&(j.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=Xx(this.props,this.handleOuterEvent);return ue(ue({},S),N)}},{key:"addListener",value:function(){q_.on(W_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){q_.removeListener(W_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,_,j){for(var N=this.state.formattedGraphicalItems,S=0,E=N.length;S<E;S++){var C=N[S];if(C.item===w||C.props.key===w.key||_===mo(C.item.type)&&j===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,_=this.state.offset,j=_.left,N=_.top,S=_.height,E=_.width;return O.createElement("defs",null,O.createElement("clipPath",{id:w},O.createElement("rect",{x:j,y:N,height:S,width:E})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(_,j){var N=q$(j,2),S=N[0],E=N[1];return ue(ue({},_),{},Qe({},S,E.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(_,j){var N=q$(j,2),S=N[0],E=N[1];return ue(ue({},_),{},Qe({},S,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(w){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(w){var _=this.state,j=_.formattedGraphicalItems,N=_.activeItem;if(j&&j.length)for(var S=0,E=j.length;S<E;S++){var C=j[S],P=C.props,A=C.item,k=A.type.defaultProps!==void 0?ue(ue({},A.type.defaultProps),A.props):A.props,D=mo(A.type);if(D==="Bar"){var R=(P.data||[]).find(function(M){return H2e(w,M)});if(R)return{graphicalItem:C,payload:R}}else if(D==="RadialBar"){var U=(P.data||[]).find(function(M){return pM(w,M)});if(U)return{graphicalItem:C,payload:U}}else if(Uw(C,N)||Bw(C,N)||xg(C,N)){var B=qDe({graphicalItem:C,activeTooltipItem:N,itemData:k.data}),L=k.activeIndex===void 0?B:k.activeIndex;return{graphicalItem:ue(ue({},C),{},{childIndex:L}),payload:xg(C,N)?k.data[B]:C.props.data[B]}}}return null}},{key:"render",value:function(){var w=this;if(!aD(this))return null;var _=this.props,j=_.children,N=_.className,S=_.width,E=_.height,C=_.style,P=_.compact,A=_.title,k=_.desc,D=W$(_,bIe),R=qe(D,!1);if(P)return O.createElement(C$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},O.createElement(Y1,Id({},R,{width:S,height:E,title:A,desc:k}),this.renderClipPath(),oD(j,this.renderMap)));if(this.props.accessibilityLayer){var U,B;R.tabIndex=(U=this.props.tabIndex)!==null&&U!==void 0?U:0,R.role=(B=this.props.role)!==null&&B!==void 0?B:"application",R.onKeyDown=function(M){w.accessibilityManager.keyboardEvent(M)},R.onFocus=function(){w.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return O.createElement(C$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},O.createElement("div",Id({className:st("recharts-wrapper",N),style:ue({position:"relative",cursor:"default",width:S,height:E},C)},L,{ref:function(T){w.container=T}}),O.createElement(Y1,Id({},R,{width:S,height:E,title:A,desc:k,style:IIe}),this.renderClipPath(),oD(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(y.Component);Qe(g,"displayName",r),Qe(g,"defaultProps",ue({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Qe(g,"getDerivedStateFromProps",function(v,x){var b=v.dataKey,w=v.data,_=v.children,j=v.width,N=v.height,S=v.layout,E=v.stackOffset,C=v.margin,P=x.dataStartIndex,A=x.dataEndIndex;if(x.updateId===void 0){var k=G$(v);return ue(ue(ue({},k),{},{updateId:0},m(ue(ue({props:v},k),{},{updateId:0}),x)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:N,prevLayout:S,prevStackOffset:E,prevMargin:C,prevChildren:_})}if(b!==x.prevDataKey||w!==x.prevData||j!==x.prevWidth||N!==x.prevHeight||S!==x.prevLayout||E!==x.prevStackOffset||!Xd(C,x.prevMargin)){var D=G$(v),R={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},U=ue(ue({},K$(x,w,S)),{},{updateId:x.updateId+1}),B=ue(ue(ue({},D),R),U);return ue(ue(ue({},B),m(ue({props:v},B),x)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:N,prevLayout:S,prevStackOffset:E,prevMargin:C,prevChildren:_})}if(!K1(_,x.prevChildren)){var L,M,T,F,Z=$s(_,Yf),W=Z&&(L=(M=Z.props)===null||M===void 0?void 0:M.startIndex)!==null&&L!==void 0?L:P,K=Z&&(T=(F=Z.props)===null||F===void 0?void 0:F.endIndex)!==null&&T!==void 0?T:A,V=W!==P||K!==A,le=!it(w),be=le&&!V?x.updateId:x.updateId+1;return ue(ue({updateId:be},m(ue(ue({props:v},x),{},{updateId:be,dataStartIndex:W,dataEndIndex:K}),x)),{},{prevChildren:_,dataStartIndex:W,dataEndIndex:K})}return null}),Qe(g,"renderActiveDot",function(v,x,b){var w;return y.isValidElement(v)?w=y.cloneElement(v,x):Xe(v)?w=v(x):w=O.createElement(pv,x),O.createElement(Mt,{className:"recharts-active-dot",key:b},w)});var p=y.forwardRef(function(x,b){return O.createElement(g,Id({},x,{ref:b}))});return p.displayName=g.displayName,p},KIe=Gw({chartName:"LineChart",GraphicalChild:au,axisComponents:[{axisType:"xAxis",AxisComp:iu},{axisType:"yAxis",AxisComp:ou}],formatAxisMap:dW}),X$=Gw({chartName:"BarChart",GraphicalChild:Ql,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:iu},{axisType:"yAxis",AxisComp:ou}],formatAxisMap:dW}),GIe=Gw({chartName:"PieChart",GraphicalChild:Fo,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Fh},{axisType:"radiusAxis",AxisComp:Lh}],formatAxisMap:kq,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),YIe=Gw({chartName:"RadarChart",GraphicalChild:gv,axisComponents:[{axisType:"angleAxis",AxisComp:Fh},{axisType:"radiusAxis",AxisComp:Lh}],formatAxisMap:kq,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const XIe={draft:"hsl(var(--muted-foreground))",in_progress:"hsl(var(--info))",pending_approval:"hsl(var(--warning))",completed:"hsl(var(--success))"},Q$=["hsl(var(--primary))","hsl(var(--info))","hsl(var(--success))","hsl(var(--warning))"],QIe={draft:"Draft",in_progress:"In Progress",pending_approval:"Pending Approval",completed:"Completed"},ZIe={performance:"Performance",annual:"Annual",probation:"Probation"};function JIe(){var g;const{competencyScores:e,reviewStatusCounts:t,reviewTypeCounts:r,monthlyTrends:n,departmentPerformance:a,loading:i}=Hfe();if(i)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(p=>s.jsx($t,{className:"h-28"},p))}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map(p=>s.jsx($t,{className:"h-80"},p))})]});const o=t.reduce((p,v)=>p+v.count,0),l=((g=t.find(p=>p.status==="completed"))==null?void 0:g.count)||0,c=o>0?Math.round(l/o*100):0,u=e.length>0?(e.reduce((p,v)=>p+v.average_rating,0)/e.filter(p=>p.average_rating>0).length||0).toFixed(1):"0",d=e.reduce((p,v)=>p+v.total_ratings,0),f=e.filter(p=>p.average_rating>0).map(p=>({competency:p.competency_name.length>15?p.competency_name.substring(0,15)+"...":p.competency_name,fullName:p.competency_name,score:p.average_rating,fullMark:5})),h=t.map(p=>({name:QIe[p.status]||p.status,value:p.count,status:p.status})),m=r.map(p=>({name:ZIe[p.review_type]||p.review_type,count:p.count}));return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Ut,{title:"Total Reviews",value:o,description:"All time reviews",icon:Ks,variant:"default"}),s.jsx(Ut,{title:"Completion Rate",value:`${c}%`,description:`${l} of ${o} completed`,icon:jt,variant:"success"}),s.jsx(Ut,{title:"Avg Competency Score",value:u,description:"Out of 5.0",icon:Gs,variant:"info"}),s.jsx(Ut,{title:"Total Ratings",value:d,description:"Competency assessments",icon:Ar,variant:"default"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-lg",children:"Review Status Distribution"}),s.jsx(Le,{children:"Current status of all performance reviews"})]}),s.jsx(X,{children:h.length>0?s.jsx("div",{className:"h-64",children:s.jsx(pm,{width:"100%",height:"100%",children:s.jsxs(GIe,{children:[s.jsx(Fo,{data:h,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:p,percent:v})=>`${p} (${(v*100).toFixed(0)}%)`,children:h.map((p,v)=>s.jsx(Cw,{fill:XIe[p.status]||Q$[v%Q$.length]},`cell-${v}`))}),s.jsx(ps,{})]})})}):s.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No review data available"})})]}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-lg",children:"Monthly Review Trends"}),s.jsx(Le,{children:"Review activity over the last 6 months"})]}),s.jsx(X,{children:s.jsx("div",{className:"h-64",children:s.jsx(pm,{width:"100%",height:"100%",children:s.jsxs(KIe,{data:n,children:[s.jsx(Wy,{strokeDasharray:"3 3",className:"stroke-border"}),s.jsx(iu,{dataKey:"month",className:"text-xs fill-muted-foreground",tick:{fontSize:12}}),s.jsx(ou,{className:"text-xs fill-muted-foreground",tick:{fontSize:12},allowDecimals:!1}),s.jsx(ps,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),s.jsx(ru,{}),s.jsx(au,{type:"monotone",dataKey:"completed",stroke:"hsl(var(--success))",name:"Completed",strokeWidth:2,dot:{r:4}}),s.jsx(au,{type:"monotone",dataKey:"in_progress",stroke:"hsl(var(--info))",name:"In Progress",strokeWidth:2,dot:{r:4}}),s.jsx(au,{type:"monotone",dataKey:"pending",stroke:"hsl(var(--warning))",name:"Pending/Draft",strokeWidth:2,dot:{r:4}})]})})})})]}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-lg",children:"Team Competency Scores"}),s.jsx(Le,{children:"Average ratings across all competencies"})]}),s.jsx(X,{children:f.length>0?s.jsx("div",{className:"h-72",children:s.jsx(pm,{width:"100%",height:"100%",children:s.jsxs(YIe,{cx:"50%",cy:"50%",outerRadius:"70%",data:f,children:[s.jsx(Wq,{className:"stroke-border"}),s.jsx(Fh,{dataKey:"competency",className:"text-xs fill-muted-foreground",tick:{fontSize:10}}),s.jsx(Lh,{angle:30,domain:[0,5],className:"text-xs fill-muted-foreground",tick:{fontSize:10}}),s.jsx(gv,{name:"Score",dataKey:"score",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3,strokeWidth:2}),s.jsx(ps,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:(p,v,x)=>[`${p.toFixed(2)} / 5.0`,x.payload.fullName]})]})})}):s.jsx("div",{className:"h-72 flex items-center justify-center text-muted-foreground",children:"No competency ratings available yet"})})]}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-lg",children:"Reviews by Type"}),s.jsx(Le,{children:"Distribution of review types"})]}),s.jsx(X,{children:m.length>0?s.jsx("div",{className:"h-72",children:s.jsx(pm,{width:"100%",height:"100%",children:s.jsxs(X$,{data:m,layout:"vertical",children:[s.jsx(Wy,{strokeDasharray:"3 3",className:"stroke-border"}),s.jsx(iu,{type:"number",className:"text-xs fill-muted-foreground",allowDecimals:!1}),s.jsx(ou,{type:"category",dataKey:"name",className:"text-xs fill-muted-foreground",width:100}),s.jsx(ps,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),s.jsx(Ql,{dataKey:"count",fill:"hsl(var(--primary))",radius:[0,4,4,0],name:"Reviews"})]})})}):s.jsx("div",{className:"h-72 flex items-center justify-center text-muted-foreground",children:"No review data available"})})]})]}),a.length>0&&s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-lg",children:"Department Performance"}),s.jsx(Le,{children:"Average ratings by department"})]}),s.jsx(X,{children:s.jsx("div",{className:"h-64",children:s.jsx(pm,{width:"100%",height:"100%",children:s.jsxs(X$,{data:a,children:[s.jsx(Wy,{strokeDasharray:"3 3",className:"stroke-border"}),s.jsx(iu,{dataKey:"department",className:"text-xs fill-muted-foreground",tick:{fontSize:11}}),s.jsx(ou,{domain:[0,5],className:"text-xs fill-muted-foreground"}),s.jsx(ps,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:p=>[`${p.toFixed(2)} / 5.0`,"Avg Rating"]}),s.jsx(Ql,{dataKey:"average_rating",fill:"hsl(var(--info))",radius:[4,4,0,0],name:"Average Rating"})]})})})})]}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-lg",children:"Competency Breakdown"}),s.jsx(Le,{children:"Detailed scores for each competency"})]}),s.jsx(X,{children:e.length>0?s.jsx("div",{className:"space-y-3",children:e.map(p=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm truncate",children:p.competency_name}),p.category&&s.jsx("p",{className:"text-xs text-muted-foreground",children:p.category})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-32 bg-muted rounded-full h-2",children:s.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${p.average_rating/5*100}%`}})}),s.jsx("span",{className:"text-sm font-medium w-12 text-right",children:p.average_rating>0?p.average_rating.toFixed(1):""}),s.jsxs("span",{className:"text-xs text-muted-foreground w-16",children:["(",p.total_ratings," ratings)"]})]})]},p.competency_id))}):s.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No competency data available yet. Start creating performance reviews with competency ratings."})})]})]})}function eLe(){const[e,t]=y.useState("analytics"),[r,n]=y.useState(""),{supervisions:a,loading:i}=Bk(),{reviews:o,loading:l}=rw();K8();const c=a.filter(h=>h.is_active).length,u=o.filter(h=>h.status==="in_progress"||h.status==="pending_approval").length,d=o.filter(h=>h.status==="completed").length,f=o.filter(h=>h.overall_rating).length>0?(o.filter(h=>h.overall_rating).reduce((h,m)=>h+(m.overall_rating||0),0)/o.filter(h=>h.overall_rating).length).toFixed(1):"N/A";return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Performance Management"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage supervisions, performance reviews, and competency assessments"})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Ut,{title:"Active Supervisions",value:c,description:"Current assignments",icon:Ar,variant:"default"}),s.jsx(Ut,{title:"Pending Reviews",value:u,description:"Awaiting completion",icon:mu,variant:"info"}),s.jsx(Ut,{title:"Completed Reviews",value:d,description:"This year",icon:Ks,variant:"success"}),s.jsx(Ut,{title:"Average Rating",value:f,description:"Out of 5.0",icon:Ha,variant:"default"})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(un,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{placeholder:"Search supervisions, reviews, or competencies...",value:r,onChange:h=>n(h.target.value),className:"pl-10"})]})}),s.jsxs(bn,{value:e,onValueChange:t,className:"space-y-4",children:[s.jsxs(fn,{className:"grid w-full grid-cols-4 lg:w-auto lg:inline-grid",children:[s.jsxs(Ve,{value:"analytics",className:"flex items-center gap-2",children:[s.jsx(_E,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]}),s.jsxs(Ve,{value:"supervisions",className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Supervisions"})]}),s.jsxs(Ve,{value:"reviews",className:"flex items-center gap-2",children:[s.jsx(mu,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Reviews"})]}),s.jsxs(Ve,{value:"competencies",className:"flex items-center gap-2",children:[s.jsx(Ks,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Competencies"})]})]}),s.jsx(rt,{value:"analytics",children:s.jsx(JIe,{})}),s.jsx(rt,{value:"supervisions",children:s.jsx(Ofe,{searchQuery:r})}),s.jsx(rt,{value:"reviews",children:s.jsx(zfe,{searchQuery:r})}),s.jsx(rt,{value:"competencies",children:s.jsx(Wfe,{searchQuery:r})})]})]})}function tLe(e,t){const[r,n]=y.useState([]),[a,i]=y.useState([]),[o,l]=y.useState([]),[c,u]=y.useState(!0),d=(t==null?void 0:t.requireOrganisation)&&!e,f=async()=>{if(d){n([]);return}let S=$.from("departments").select("*").order("name");e&&(S=S.eq("organisation_id",e));const{data:E,error:C}=await S;if(C){J({title:"Error",description:"Failed to load departments",variant:"destructive"});return}n(E||[])},h=async()=>{if(d){i([]);return}let S=$.from("positions").select("*").order("name");e&&(S=S.eq("organisation_id",e));const{data:E,error:C}=await S;if(C){J({title:"Error",description:"Failed to load positions",variant:"destructive"});return}i(E||[])},m=async()=>{if(d){l([]);return}let S=$.from("award_classifications").select("*").order("name");e&&(S=S.eq("organisation_id",e));const{data:E,error:C}=await S;if(C){J({title:"Error",description:"Failed to load award classifications",variant:"destructive"});return}l(E||[])};return y.useEffect(()=>{(async()=>{if(u(!0),d){u(!1);return}await Promise.all([f(),h(),m()]),u(!1)})()},[e,d]),{departments:r,positions:a,awardClassifications:o,loading:c,addDepartment:async(S,E)=>{const{data:C,error:P}=await $.from("departments").insert({name:S,description:E||null,...e?{organisation_id:e}:{}}).select().single();return P?(P.code==="23505"?J({title:"Error",description:"A department with this name already exists",variant:"destructive"}):J({title:"Error",description:"Failed to add department",variant:"destructive"}),null):(n(A=>[...A,C].sort((k,D)=>k.name.localeCompare(D.name))),J({title:"Success",description:"Department added successfully"}),C)},updateDepartment:async(S,E,C)=>{const{data:P,error:A}=await $.from("departments").update({name:E,description:C||null}).eq("id",S).select().single();return A?(J({title:"Error",description:"Failed to update department",variant:"destructive"}),null):(n(k=>k.map(D=>D.id===S?P:D).sort((D,R)=>D.name.localeCompare(R.name))),J({title:"Success",description:"Department updated successfully"}),P)},deleteDepartment:async S=>{const{error:E}=await $.from("departments").delete().eq("id",S);return E?(J({title:"Error",description:"Failed to delete department",variant:"destructive"}),!1):(n(C=>C.filter(P=>P.id!==S)),J({title:"Success",description:"Department deleted successfully"}),!0)},addPosition:async(S,E,C)=>{const{data:P,error:A}=await $.from("positions").insert({name:S,department_id:E||null,description:C||null,...e?{organisation_id:e}:{}}).select().single();return A?(A.code==="23505"?J({title:"Error",description:"A position with this name already exists",variant:"destructive"}):J({title:"Error",description:"Failed to add position",variant:"destructive"}),null):(i(k=>[...k,P].sort((D,R)=>D.name.localeCompare(R.name))),J({title:"Success",description:"Position added successfully"}),P)},updatePosition:async(S,E,C,P)=>{const{data:A,error:k}=await $.from("positions").update({name:E,department_id:C||null,description:P||null}).eq("id",S).select().single();return k?(J({title:"Error",description:"Failed to update position",variant:"destructive"}),null):(i(D=>D.map(R=>R.id===S?A:R).sort((R,U)=>R.name.localeCompare(U.name))),J({title:"Success",description:"Position updated successfully"}),A)},deletePosition:async S=>{const{error:E}=await $.from("positions").delete().eq("id",S);return E?(J({title:"Error",description:"Failed to delete position",variant:"destructive"}),!1):(i(C=>C.filter(P=>P.id!==S)),J({title:"Success",description:"Position deleted successfully"}),!0)},addAwardClassification:async S=>{const{data:E,error:C}=await $.from("award_classifications").insert({name:S.name,description:S.description||null,base_hourly_rate:S.base_hourly_rate,saturday_multiplier:S.saturday_multiplier??1.5,sunday_multiplier:S.sunday_multiplier??2,public_holiday_multiplier:S.public_holiday_multiplier??2.5,evening_multiplier:S.evening_multiplier??1.15,night_multiplier:S.night_multiplier??1.25,overtime_multiplier:S.overtime_multiplier??1.5,...e?{organisation_id:e}:{}}).select().single();return C?(C.code==="23505"?J({title:"Error",description:"An award classification with this name already exists",variant:"destructive"}):J({title:"Error",description:"Failed to add award classification",variant:"destructive"}),null):(l(P=>[...P,E].sort((A,k)=>A.name.localeCompare(k.name))),J({title:"Success",description:"Award classification added successfully"}),E)},updateAwardClassification:async(S,E)=>{const{data:C,error:P}=await $.from("award_classifications").update({name:E.name,description:E.description||null,base_hourly_rate:E.base_hourly_rate,saturday_multiplier:E.saturday_multiplier,sunday_multiplier:E.sunday_multiplier,public_holiday_multiplier:E.public_holiday_multiplier,evening_multiplier:E.evening_multiplier,night_multiplier:E.night_multiplier,overtime_multiplier:E.overtime_multiplier}).eq("id",S).select().single();return P?(J({title:"Error",description:"Failed to update award classification",variant:"destructive"}),null):(l(A=>A.map(k=>k.id===S?C:k).sort((k,D)=>k.name.localeCompare(D.name))),J({title:"Success",description:"Award classification updated successfully"}),C)},deleteAwardClassification:async S=>{const{error:E}=await $.from("award_classifications").delete().eq("id",S);return E?(J({title:"Error",description:"Failed to delete award classification",variant:"destructive"}),!1):(l(C=>C.filter(P=>P.id!==S)),J({title:"Success",description:"Award classification deleted successfully"}),!0)},refetch:async()=>{await Promise.all([f(),h(),m()])}}}function rLe(){const{settings:e,loading:t,updateVisibility:r}=r5(),n=async a=>{await r(a.module_key,!a.is_visible)};return t?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-lg",children:"Navigation Visibility"}),s.jsx(Le,{children:"Control which modules appear in the sidebar navigation. Hidden modules are still accessible via direct URL."})]}),s.jsx(X,{children:e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(bF,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No sidebar settings configured"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Module"}),s.jsx(oe,{children:"Order"}),s.jsx(oe,{className:"text-right",children:"Visible"})]})}),s.jsx(pr,{children:e.map(a=>s.jsxs(ze,{children:[s.jsx(te,{className:"font-medium",children:a.module_label}),s.jsx(te,{className:"text-muted-foreground",children:a.display_order}),s.jsx(te,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsxs(H,{htmlFor:`toggle-${a.module_key}`,className:"sr-only",children:["Toggle ",a.module_label," visibility"]}),s.jsx(kn,{id:`toggle-${a.module_key}`,checked:a.is_visible,onCheckedChange:()=>n(a)})]})})]},a.id))})]})})]})}const nLe=ks({email:Je().min(1,"Email is required").email("Please enter a valid email address").max(255,"Email must be less than 255 characters").trim(),password:Je().min(6,"Password must be at least 6 characters").max(72,"Password must be less than 72 characters"),display_name:Je().min(2,"Display name must be at least 2 characters").max(50,"Display name must be less than 50 characters").trim(),role:Vu(["admin","manager","employee"],{errorMap:()=>({message:"Please select a valid role"})})}),Z$={email:"",password:"",display_name:"",role:"employee"};function sLe({open:e,onOpenChange:t,onUserCreated:r}){const[n,a]=y.useState(Z$),[i,o]=y.useState({}),[l,c]=y.useState(!1),[u,d]=y.useState(!1),f=()=>{const p=nLe.safeParse(n);if(!p.success){const v={};return p.error.errors.forEach(x=>{const b=x.path[0];v[b]||(v[b]=x.message)}),o(v),!1}return o({}),!0},h=async()=>{if(!f()){J({title:"Validation Error",description:"Please fix the errors in the form",variant:"destructive"});return}c(!0);try{const{data:p,error:v}=await $.functions.invoke("create-user",{body:{email:n.email.trim(),password:n.password,display_name:n.display_name.trim(),role:n.role}});if(v)throw new Error(v.message||"Failed to create user");if(p!=null&&p.error)throw new Error(p.error);J({title:"User Created",description:`${n.display_name} has been added with ${n.role} role.`}),a(Z$),o({}),t(!1),r==null||r()}catch(p){console.error("Failed to create user:",p),J({title:"Error",description:p instanceof Error?p.message:"Failed to create user",variant:"destructive"})}finally{c(!1)}},m=(p,v)=>{a({...n,[p]:v}),i[p]&&o({...i,[p]:void 0})},g=()=>{const p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let v="";for(let x=0;x<16;x++)v+=p.charAt(Math.floor(Math.random()*p.length));m("password",v),d(!0)};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"sm:max-w-md",children:[s.jsxs(Pt,{children:[s.jsxs(At,{className:"flex items-center gap-2",children:[s.jsx(gu,{className:"h-5 w-5 text-primary"}),"Create User Account"]}),s.jsx(Ot,{children:"Create a new user account with specific role permissions"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"display_name",children:"Display Name *"}),s.jsx(ne,{id:"display_name",value:n.display_name,onChange:p=>m("display_name",p.target.value),placeholder:"John Smith",className:i.display_name?"border-destructive":"",maxLength:50,disabled:l}),i.display_name&&s.jsx("p",{className:"text-xs text-destructive",children:i.display_name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"email",children:"Email Address *"}),s.jsx(ne,{id:"email",type:"email",value:n.email,onChange:p=>m("email",p.target.value),placeholder:"john@company.com",className:i.email?"border-destructive":"",maxLength:255,disabled:l}),i.email&&s.jsx("p",{className:"text-xs text-destructive",children:i.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(H,{htmlFor:"password",children:"Password *"}),s.jsx(I,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-0 text-xs text-primary hover:text-primary/80",onClick:g,disabled:l,children:"Generate Strong Password"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ne,{id:"password",type:u?"text":"password",value:n.password,onChange:p=>m("password",p.target.value),placeholder:"Minimum 6 characters",className:`pr-10 ${i.password?"border-destructive":""}`,maxLength:72,disabled:l}),s.jsx(I,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>d(!u),disabled:l,children:u?s.jsx(lG,{className:"h-4 w-4 text-muted-foreground"}):s.jsx($i,{className:"h-4 w-4 text-muted-foreground"})})]}),i.password&&s.jsx("p",{className:"text-xs text-destructive",children:i.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"role",children:"Role *"}),s.jsxs(Ie,{value:n.role,onValueChange:p=>m("role",p),disabled:l,children:[s.jsx(Re,{className:i.role?"border-destructive":"",children:s.jsx(Fe,{placeholder:"Select a role"})}),s.jsxs(Me,{className:"bg-popover",children:[s.jsx(Y,{value:"employee",children:"Employee"}),s.jsx(Y,{value:"manager",children:"Manager"}),s.jsx(Y,{value:"admin",children:"Administrator"})]})]}),i.role&&s.jsx("p",{className:"text-xs text-destructive",children:i.role}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.role==="admin"&&"Full access to all features and user management",n.role==="manager"&&"Can manage employees, contracts, and view reports",n.role==="employee"&&"Can view own contracts and profile information"]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(I,{variant:"outline",onClick:()=>t(!1),className:"flex-1",disabled:l,children:"Cancel"}),s.jsx(I,{className:"flex-1 gradient-primary",onClick:h,disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(gu,{className:"h-4 w-4 mr-2"}),"Create User"]})})]})]})]})})}function KW(e){const[t,r]=y.useState([]),[n,a]=y.useState(!0),i=y.useCallback(async()=>{a(!0);let u=$.from("organisations").select("*").order("created_at",{ascending:!0});e&&(u=u.eq("id",e));const{data:d,error:f}=await u;f?console.error("Error fetching organisations:",f):r(d||[]),a(!1)},[e]);return y.useEffect(()=>{i()},[i]),{organisations:t,loading:n,addOrganisation:async u=>{const{data:d,error:f}=await $.from("organisations").insert([u]).select().single();return f?(console.error("Error adding organisation:",f),{success:!1,error:f}):(r(h=>[...h,d]),{success:!0,data:d})},updateOrganisation:async(u,d)=>{const{data:f,error:h}=await $.from("organisations").update(d).eq("id",u).select().single();return h?(console.error("Error updating organisation:",h),{success:!1,error:h}):(r(m=>m.map(g=>g.id===u?f:g)),{success:!0,data:f})},deleteOrganisation:async u=>{const{error:d}=await $.from("organisations").delete().eq("id",u);return d?(console.error("Error deleting organisation:",d),{success:!1,error:d}):(r(f=>f.filter(h=>h.id!==u)),{success:!0})}}}const J$={admin:{label:"Admin",icon:bf,variant:"default"},manager:{label:"Manager",icon:ln,variant:"secondary"},employee:{label:"Employee",icon:Bn,variant:"outline"}};function aLe(){const{user:e}=nc(),{currentUserRole:t,isAdmin:r,isEmployee:n,isPlatformAdmin:a,loading:i}=_h(),{users:o,loading:l,updateUserRole:c,deleteUserRole:u,fetchUsersWithRoles:d}=cie(),[f,h]=y.useState(null),[m,g]=y.useState(!0),[p,v]=y.useState(null),{organisations:x,loading:b,addOrganisation:w,updateOrganisation:_,deleteOrganisation:j}=KW(a?void 0:f??void 0),[N,S]=y.useState(!1),[E,C]=y.useState(!1),[P,A]=y.useState(null),[k,D]=y.useState(null),[R,U]=y.useState(""),[B,L]=y.useState(""),[M,T]=y.useState("Australia/Sydney"),[F,Z]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!e){h(null),g(!1);return}g(!0);const{data:Zr,error:Wn}=await $.rpc("get_user_organisation_id",{_user_id:e.id});Wn?(console.error("Error fetching organisation id:",Wn),h(null)):h(Zr??null),g(!1)})()},[e]);const W=x.find(re=>re.id===p),K=a?p??void 0:f??void 0,V=a||t==="admin"||t==="manager",le=i||m||a&&!p,be=le?void 0:K,ce=!!be,Pe=tLe(be,{requireOrganisation:le||V}),{departments:ie,positions:me,awardClassifications:_e,addDepartment:se,updateDepartment:ot,deleteDepartment:He,addPosition:Lt,updatePosition:Tt,deletePosition:Wt,addAwardClassification:Yt,updateAwardClassification:qr,deleteAwardClassification:z}=Pe,Q=re=>{re?(A(re),U(re.legal_name),L(re.trading_name||""),T(re.timezone||"")):(A(null),U(""),L(""),T("Australia/Sydney")),S(!0)},ee=async()=>{if(!R.trim())return;if(Z(!0),!(P?await _(P.id,{legal_name:R.trim(),trading_name:B.trim()||null,timezone:M.trim()||null}):await w({legal_name:R.trim(),trading_name:B.trim()||null,timezone:M.trim()||null})).success){J({title:"Error",description:"Failed to save organisation",variant:"destructive"}),Z(!1);return}Z(!1),S(!1)},Ne=async()=>{k&&(await j(k.id),C(!1),D(null))},[Se,ve]=y.useState(!1),[ke,lt]=y.useState(!1),[St,jn]=y.useState(null),[zn,As]=y.useState(null),[ci,Na]=y.useState(""),[cs,Uo]=y.useState(""),[Zs,Yu]=y.useState(!1),[Xu,hc]=y.useState(!1),[vv,Vh]=y.useState(!1),[qi,Sa]=y.useState(null),[mc,at]=y.useState(null),[It,rr]=y.useState(""),[Vn,qn]=y.useState(""),[Js,Ca]=y.useState(""),[us,Ea]=y.useState(!1),[gH,yv]=y.useState(!1),[vH,Xw]=y.useState(!1),[Bo,yH]=y.useState(null),[Wi,YP]=y.useState(null),[Qw,XP]=y.useState("employee"),[QP,ZP]=y.useState(!1),[Zw,JP]=y.useState(!1),[xH,xv]=y.useState(!1),[bH,Jw]=y.useState(!1),[qh,eA]=y.useState(null),[Wh,tA]=y.useState(null),[bv,ej]=y.useState(""),[rA,tj]=y.useState(""),[wv,rj]=y.useState(""),[nA,nj]=y.useState("1.5"),[sA,sj]=y.useState("2.0"),[aA,aj]=y.useState("2.5"),[iA,ij]=y.useState("1.15"),[oA,oj]=y.useState("1.25"),[lA,lj]=y.useState("1.5"),[cA,uA]=y.useState(!1),[wH,dA]=y.useState(!1),[Hh,fA]=y.useState(""),[cj,jH]=y.useState("all"),Qu=o.filter(re=>{var pc;const Zr=Hh===""||((pc=re.display_name)==null?void 0:pc.toLowerCase().includes(Hh.toLowerCase()))||re.email.toLowerCase().includes(Hh.toLowerCase()),Wn=cj==="all"||re.role===cj;return Zr&&Wn}),hA=re=>{re?(jn(re),Na(re.name),Uo(re.description||"")):(jn(null),Na(""),Uo("")),ve(!0)},_H=async()=>{ci.trim()&&(Yu(!0),St?await ot(St.id,ci.trim(),cs.trim()):await se(ci.trim(),cs.trim()),Yu(!1),ve(!1))},NH=async()=>{zn&&(await He(zn.id),lt(!1),As(null))},mA=re=>{re?(Sa(re),rr(re.name),qn(re.department_id||""),Ca(re.description||"")):(Sa(null),rr(""),qn(""),Ca("")),hc(!0)},SH=async()=>{It.trim()&&(Ea(!0),qi?await Tt(qi.id,It.trim(),Vn||void 0,Js.trim()):await Lt(It.trim(),Vn||void 0,Js.trim()),Ea(!1),hc(!1))},CH=async()=>{mc&&(await Wt(mc.id),Vh(!1),at(null))},EH=re=>{yH(re),XP(re.role),yv(!0)},kH=async()=>{if(!Bo)return;ZP(!0),(await c(Bo.user_id,Qw)).success?J({title:"Role Updated",description:`Successfully updated role to ${J$[Qw].label}`}):J({title:"Error",description:vs("user role management"),variant:"destructive"}),ZP(!1),yv(!1)},PH=async()=>{if(!Wi)return;JP(!0),(await u(Wi.user_id)).success?J({title:"User Deleted",description:`Successfully removed ${Wi.display_name||"user"} from the system`}):J({title:"Error",description:vs("user management"),variant:"destructive"}),JP(!1),Xw(!1),YP(null)},pA=re=>{re?(eA(re),ej(re.name),tj(re.description||""),rj(re.base_hourly_rate.toString()),nj(re.saturday_multiplier.toString()),sj(re.sunday_multiplier.toString()),aj(re.public_holiday_multiplier.toString()),ij(re.evening_multiplier.toString()),oj(re.night_multiplier.toString()),lj(re.overtime_multiplier.toString())):(eA(null),ej(""),tj(""),rj(""),nj("1.5"),sj("2.0"),aj("2.5"),ij("1.15"),oj("1.25"),lj("1.5")),xv(!0)},AH=async()=>{if(!bv.trim()||!wv)return;const re={name:bv.trim(),description:rA.trim(),base_hourly_rate:parseFloat(wv),saturday_multiplier:parseFloat(nA),sunday_multiplier:parseFloat(sA),public_holiday_multiplier:parseFloat(aA),evening_multiplier:parseFloat(iA),night_multiplier:parseFloat(oA),overtime_multiplier:parseFloat(lA)};uA(!0),qh?await qr(qh.id,re):await Yt(re),uA(!1),xv(!1)},OH=async()=>{Wh&&(await z(Wh.id),Jw(!1),tA(null))},gA=re=>{if(!re)return null;const Zr=ie.find(Wn=>Wn.id===re);return(Zr==null?void 0:Zr.name)||null},TH=re=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(re);return Pe.loading||i||m?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})}):n&&!r&&!a?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Settings are managed by your administrator."})]}),s.jsx(G,{children:s.jsxs(X,{className:"py-10 text-center text-muted-foreground",children:[s.jsx(Bn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:vs("organisation settings")})]})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your organization's departments, positions, award classifications, user roles and organisation settings"}),a&&W&&s.jsxs("p",{className:"mt-2 text-sm text-muted-foreground",children:["Viewing organisation:"," ",s.jsx("span",{className:"font-medium text-foreground",children:W.legal_name})]})]}),a&&s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsx(ge,{className:"text-lg",children:"Organisations"}),s.jsx(Le,{children:"Select an organisation to manage its settings"})]}),s.jsxs(I,{onClick:()=>Q(),size:"sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Organisation"]})]}),s.jsx(X,{children:b?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(We,{className:"h-6 w-6 animate-spin text-primary"})}):x.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(My,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No organisations yet"}),s.jsx("p",{className:"text-sm",children:"Add your first organisation to get started"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Legal Name"}),s.jsx(oe,{children:"Trading Name"}),s.jsx(oe,{children:"Timezone"}),s.jsx(oe,{className:"w-[120px]",children:"Actions"})]})}),s.jsx(pr,{children:x.map(re=>s.jsxs(ze,{className:ae("cursor-pointer",p===re.id&&"bg-muted/50"),onClick:()=>v(re.id),children:[s.jsx(te,{className:"font-medium",children:re.legal_name}),s.jsx(te,{className:"text-muted-foreground",children:re.trading_name||""}),s.jsx(te,{className:"text-muted-foreground",children:re.timezone||""}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:Zr=>{Zr.stopPropagation(),Q(re)},children:s.jsx(rl,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:Zr=>{Zr.stopPropagation(),D(re),C(!0)},children:s.jsx(Zn,{className:"h-4 w-4 text-destructive"})})]})})]},re.id))})]})})]}),a&&!p?s.jsx(G,{children:s.jsxs(X,{className:"py-12 text-center text-muted-foreground",children:[s.jsx(Mc,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select an organisation to view settings."})]})}):s.jsxs(bn,{defaultValue:"departments",className:"space-y-4",children:[s.jsxs(fn,{className:"flex-wrap",children:[s.jsxs(Ve,{value:"departments",className:"flex items-center gap-2",children:[s.jsx(Mc,{className:"h-4 w-4"}),"Departments"]}),s.jsxs(Ve,{value:"positions",className:"flex items-center gap-2",children:[s.jsx(ho,{className:"h-4 w-4"}),"Positions"]}),s.jsxs(Ve,{value:"awards",className:"flex items-center gap-2",children:[s.jsx(Ad,{className:"h-4 w-4"}),"Award Classifications"]}),r&&s.jsxs(Ve,{value:"roles",className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-4 w-4"}),"User Roles"]}),r&&s.jsxs(Ve,{value:"navigation",className:"flex items-center gap-2",children:[s.jsx(bF,{className:"h-4 w-4"}),"Navigation"]})]}),s.jsx(rt,{value:"departments",children:s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsx(ge,{className:"text-lg",children:"Departments"}),s.jsx(Le,{children:"Manage the departments in your organization"})]}),s.jsxs(I,{onClick:()=>hA(),size:"sm",disabled:!ce,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Department"]})]}),s.jsx(X,{children:ce?ie.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Mc,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No departments yet"}),s.jsx("p",{className:"text-sm",children:"Add your first department to get started"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Name"}),s.jsx(oe,{children:"Description"}),s.jsx(oe,{children:"Positions"}),s.jsx(oe,{className:"w-[100px]",children:"Actions"})]})}),s.jsx(pr,{children:ie.map(re=>{const Zr=me.filter(Wn=>Wn.department_id===re.id).length;return s.jsxs(ze,{children:[s.jsx(te,{className:"font-medium",children:re.name}),s.jsx(te,{className:"text-muted-foreground",children:re.description||""}),s.jsx(te,{children:s.jsxs(fe,{variant:"secondary",children:[Zr," positions"]})}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>hA(re),children:s.jsx(rl,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{As(re),lt(!0)},children:s.jsx(Zn,{className:"h-4 w-4 text-destructive"})})]})})]},re.id)})})]}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Mc,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select an organisation to view departments"})]})})]})}),s.jsx(rt,{value:"positions",children:s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsx(ge,{className:"text-lg",children:"Positions"}),s.jsx(Le,{children:"Manage the job positions in your organization"})]}),s.jsxs(I,{onClick:()=>mA(),size:"sm",disabled:!ce,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Position"]})]}),s.jsx(X,{children:ce?me.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(ho,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No positions yet"}),s.jsx("p",{className:"text-sm",children:"Add your first position to get started"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Name"}),s.jsx(oe,{children:"Department"}),s.jsx(oe,{children:"Description"}),s.jsx(oe,{className:"w-[100px]",children:"Actions"})]})}),s.jsx(pr,{children:me.map(re=>s.jsxs(ze,{children:[s.jsx(te,{className:"font-medium",children:re.name}),s.jsx(te,{children:gA(re.department_id)?s.jsx(fe,{variant:"outline",children:gA(re.department_id)}):s.jsx("span",{className:"text-muted-foreground",children:""})}),s.jsx(te,{className:"text-muted-foreground",children:re.description||""}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>mA(re),children:s.jsx(rl,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{at(re),Vh(!0)},children:s.jsx(Zn,{className:"h-4 w-4 text-destructive"})})]})})]},re.id))})]}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(ho,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select an organisation to view positions"})]})})]})}),s.jsx(rt,{value:"awards",children:s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ad,{className:"h-5 w-5"}),"Award Classifications"]}),s.jsx(Le,{children:"Configure pay rates and penalty multipliers for different award levels"})]}),s.jsxs(I,{onClick:()=>pA(),size:"sm",disabled:!ce,children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Classification"]})]}),s.jsx(X,{children:ce?_e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ad,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No award classifications yet"}),s.jsx("p",{className:"text-sm",children:"Add your first award classification to configure pay rates"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Name"}),s.jsx(oe,{children:"Base Rate"}),s.jsx(oe,{children:"Sat"}),s.jsx(oe,{children:"Sun"}),s.jsx(oe,{children:"PH"}),s.jsx(oe,{children:"Eve"}),s.jsx(oe,{children:"Night"}),s.jsx(oe,{children:"OT"}),s.jsx(oe,{className:"w-[100px]",children:"Actions"})]})}),s.jsx(pr,{children:_e.map(re=>s.jsxs(ze,{children:[s.jsx(te,{className:"font-medium",children:s.jsxs("div",{children:[re.name,re.description&&s.jsx("p",{className:"text-xs text-muted-foreground",children:re.description})]})}),s.jsxs(te,{className:"font-mono",children:[TH(re.base_hourly_rate),"/hr"]}),s.jsxs(te,{className:"font-mono text-muted-foreground",children:["",re.saturday_multiplier]}),s.jsxs(te,{className:"font-mono text-muted-foreground",children:["",re.sunday_multiplier]}),s.jsxs(te,{className:"font-mono text-muted-foreground",children:["",re.public_holiday_multiplier]}),s.jsxs(te,{className:"font-mono text-muted-foreground",children:["",re.evening_multiplier]}),s.jsxs(te,{className:"font-mono text-muted-foreground",children:["",re.night_multiplier]}),s.jsxs(te,{className:"font-mono text-muted-foreground",children:["",re.overtime_multiplier]}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>pA(re),children:s.jsx(rl,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{tA(re),Jw(!0)},children:s.jsx(Zn,{className:"h-4 w-4 text-destructive"})})]})})]},re.id))})]})}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ad,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select an organisation to view award classifications"})]})})]})}),r&&s.jsx(rt,{value:"roles",children:s.jsxs(G,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(bf,{className:"h-5 w-5"}),"User Management"]}),s.jsx(Le,{children:"Create user accounts and manage roles. Open signup is disabled for security."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{const re=[["Name","Email","Role","Joined Date"].join(","),...Qu.map(pc=>[`"${(pc.display_name||"").replace(/"/g,'""')}"`,`"${pc.email.replace(/"/g,'""')}"`,pc.role,new Date(pc.created_at).toLocaleDateString()].join(","))].join(`
`),Zr=new Blob([re],{type:"text/csv;charset=utf-8;"}),Wn=document.createElement("a");Wn.href=URL.createObjectURL(Zr),Wn.download=`users_export_${new Date().toISOString().split("T")[0]}.csv`,Wn.click(),URL.revokeObjectURL(Wn.href),J({title:"Export Complete",description:`Exported ${Qu.length} users to CSV`})},disabled:Qu.length===0,children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),s.jsxs(I,{onClick:()=>dA(!0),size:"sm",children:[s.jsx(gu,{className:"h-4 w-4 mr-2"}),"Create User"]})]})]}),s.jsx(X,{children:l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(We,{className:"h-6 w-6 animate-spin text-primary"})}):o.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ar,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No users found"}),s.jsx("p",{className:"text-sm",children:"Users will appear here after they sign up"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(un,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{placeholder:"Search by name or email...",value:Hh,onChange:re=>fA(re.target.value),className:"pl-9 pr-9"}),Hh&&s.jsx(I,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>fA(""),children:s.jsx(Fn,{className:"h-4 w-4"})})]}),s.jsxs(Ie,{value:cj,onValueChange:re=>jH(re),children:[s.jsx(Re,{className:"w-full sm:w-[180px]",children:s.jsx(Fe,{placeholder:"Filter by role"})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"all",children:"All Roles"}),s.jsx(Y,{value:"admin",children:"Admin"}),s.jsx(Y,{value:"manager",children:"Manager"}),s.jsx(Y,{value:"employee",children:"Employee"})]})]})]}),Qu.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(un,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No users match your search"}),s.jsx("p",{className:"text-sm",children:"Try adjusting your search or filter criteria"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["Showing ",Qu.length," of ",o.length," ","users"]}),s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"User"}),s.jsx(oe,{children:"Role"}),s.jsx(oe,{children:"Joined"}),s.jsx(oe,{className:"w-[100px]",children:"Actions"})]})}),s.jsx(pr,{children:Qu.map(re=>{const Zr=J$[re.role],Wn=Zr.icon;return s.jsxs(ze,{children:[s.jsx(te,{className:"font-medium",children:re.display_name||re.email}),s.jsx(te,{children:s.jsxs(fe,{variant:Zr.variant,className:"flex items-center gap-1 w-fit",children:[s.jsx(Wn,{className:"h-3 w-3"}),Zr.label]})}),s.jsx(te,{className:"text-muted-foreground",children:new Date(re.created_at).toLocaleDateString()}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>EH(re),children:s.jsx(rl,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{YP(re),Xw(!0)},children:s.jsx(Zn,{className:"h-4 w-4 text-destructive"})})]})})]},re.id)})})]})]})]})})]})}),r&&s.jsx(rt,{value:"navigation",children:s.jsx(rLe,{})})]}),s.jsx(Rt,{open:N,onOpenChange:S,children:s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:P?"Edit Organisation":"Add Organisation"}),s.jsx(Ot,{children:P?"Update the organisation details below":"Enter the details for the new organisation"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"org-legal-name",children:"Legal Name *"}),s.jsx(ne,{id:"org-legal-name",value:R,onChange:re=>U(re.target.value),placeholder:"e.g., TeamStride Pty Ltd"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"org-trading-name",children:"Trading Name"}),s.jsx(ne,{id:"org-trading-name",value:B,onChange:re=>L(re.target.value),placeholder:"(optional)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"org-timezone",children:"Timezone"}),s.jsx(ne,{id:"org-timezone",value:M,onChange:re=>T(re.target.value),placeholder:"e.g., Australia/Sydney"})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),s.jsx(I,{onClick:ee,disabled:!R.trim()||F,children:F?s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):P?"Update":"Add"})]})]})}),s.jsx(Ac,{open:E,onOpenChange:C,children:s.jsxs(sl,{children:[s.jsxs(al,{children:[s.jsx(ol,{children:"Delete Organisation"}),s.jsxs(ll,{children:['Are you sure you want to delete "',k==null?void 0:k.legal_name,'"? This action cannot be undone.']})]}),s.jsxs(il,{children:[s.jsx(ul,{children:"Cancel"}),s.jsx(cl,{onClick:Ne,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),s.jsx(Rt,{open:Se,onOpenChange:ve,children:s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:St?"Edit Department":"Add Department"}),s.jsx(Ot,{children:St?"Update the department details below":"Enter the details for the new department"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"dept-name",children:"Name *"}),s.jsx(ne,{id:"dept-name",value:ci,onChange:re=>Na(re.target.value),placeholder:"e.g., Human Resources"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"dept-description",children:"Description"}),s.jsx(wt,{id:"dept-description",value:cs,onChange:re=>Uo(re.target.value),placeholder:"Brief description of the department...",rows:3})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>ve(!1),children:"Cancel"}),s.jsx(I,{onClick:_H,disabled:!ci.trim()||Zs,children:Zs?s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):St?"Update":"Add"})]})]})}),s.jsx(Ac,{open:ke,onOpenChange:lt,children:s.jsxs(sl,{children:[s.jsxs(al,{children:[s.jsx(ol,{children:"Delete Department"}),s.jsxs(ll,{children:['Are you sure you want to delete "',zn==null?void 0:zn.name,'"? This action cannot be undone. Positions linked to this department will have their department unset.']})]}),s.jsxs(il,{children:[s.jsx(ul,{children:"Cancel"}),s.jsx(cl,{onClick:NH,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),s.jsx(Rt,{open:Xu,onOpenChange:hc,children:s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:qi?"Edit Position":"Add Position"}),s.jsx(Ot,{children:qi?"Update the position details below":"Enter the details for the new position"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"pos-name",children:"Name *"}),s.jsx(ne,{id:"pos-name",value:It,onChange:re=>rr(re.target.value),placeholder:"e.g., Support Worker"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"pos-department",children:"Department"}),s.jsxs(Ie,{value:Vn||"none",onValueChange:re=>qn(re==="none"?"":re),children:[s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select a department (optional)"})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"none",children:"No department"}),ie.map(re=>s.jsx(Y,{value:re.id,children:re.name},re.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"pos-description",children:"Description"}),s.jsx(wt,{id:"pos-description",value:Js,onChange:re=>Ca(re.target.value),placeholder:"Brief description of the position...",rows:3})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>hc(!1),children:"Cancel"}),s.jsx(I,{onClick:SH,disabled:!It.trim()||us,children:us?s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):qi?"Update":"Add"})]})]})}),s.jsx(Ac,{open:vv,onOpenChange:Vh,children:s.jsxs(sl,{children:[s.jsxs(al,{children:[s.jsx(ol,{children:"Delete Position"}),s.jsxs(ll,{children:['Are you sure you want to delete "',mc==null?void 0:mc.name,'"? This action cannot be undone.']})]}),s.jsxs(il,{children:[s.jsx(ul,{children:"Cancel"}),s.jsx(cl,{onClick:CH,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),s.jsx(Rt,{open:gH,onOpenChange:yv,children:s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Edit User Role"}),s.jsxs(Ot,{children:["Change the role for ",(Bo==null?void 0:Bo.display_name)||(Bo==null?void 0:Bo.email)]})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Role"}),s.jsxs(Ie,{value:Qw,onValueChange:re=>XP(re),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"admin",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bf,{className:"h-4 w-4"}),"Admin - Full access to all features"]})}),s.jsx(Y,{value:"manager",children:s.jsxs("div",{className:"flex itemsers gap-2",children:[s.jsx(ln,{className:"h-4 w-4"}),"Manager - Manage employees and operations"]})}),s.jsx(Y,{value:"employee",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"h-4 w-4"}),"Employee - Basic access"]})})]})]})]})}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>yv(!1),children:"Cancel"}),s.jsx(I,{onClick:kH,disabled:QP,children:QP?s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Update Role"})]})]})}),s.jsx(Rt,{open:xH,onOpenChange:xv,children:s.jsxs(kt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:qh?"Edit Award Classification":"Add Award Classification"}),s.jsx(Ot,{children:qh?"Update the award classification details and pay rates":"Enter the details for the new award classification"})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"award-name",children:"Name *"}),s.jsx(ne,{id:"award-name",value:bv,onChange:re=>ej(re.target.value),placeholder:"e.g., Level 1 Support Worker"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"award-base-rate",children:"Base Hourly Rate (AUD) *"}),s.jsx(ne,{id:"award-base-rate",type:"number",step:"0.01",min:"0",value:wv,onChange:re=>rj(re.target.value),placeholder:"e.g., 28.50"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"award-description",children:"Description"}),s.jsx(wt,{id:"award-description",value:rA,onChange:re=>tj(re.target.value),placeholder:"Brief description of this award level...",rows:2})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(H,{className:"text-base font-semibold",children:"Penalty Rate Multipliers"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"These multipliers are applied to the base hourly rate for different work conditions"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"award-sat",children:"Saturday"}),s.jsx(ne,{id:"award-sat",type:"number",step:"0.01",min:"1",value:nA,onChange:re=>nj(re.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"award-sun",children:"Sunday"}),s.jsx(ne,{id:"award-sun",type:"number",step:"0.01",min:"1",value:sA,onChange:re=>sj(re.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"award-ph",children:"Public Holiday"}),s.jsx(ne,{id:"award-ph",type:"number",step:"0.01",min:"1",value:aA,onChange:re=>aj(re.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"award-eve",children:"Evening"}),s.jsx(ne,{id:"award-eve",type:"number",step:"0.01",min:"1",value:iA,onChange:re=>ij(re.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"award-night",children:"Night"}),s.jsx(ne,{id:"award-night",type:"number",step:"0.01",min:"1",value:oA,onChange:re=>oj(re.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"award-ot",children:"Overtime"}),s.jsx(ne,{id:"award-ot",type:"number",step:"0.01",min:"1",value:lA,onChange:re=>lj(re.target.value)})]})]})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>xv(!1),children:"Cancel"}),s.jsx(I,{onClick:AH,disabled:!bv.trim()||!wv||cA,children:cA?s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):qh?"Update":"Add"})]})]})}),s.jsx(Ac,{open:bH,onOpenChange:Jw,children:s.jsxs(sl,{children:[s.jsxs(al,{children:[s.jsx(ol,{children:"Delete Award Classification"}),s.jsxs(ll,{children:['Are you sure you want to delete "',Wh==null?void 0:Wh.name,'"? This action cannot be undone.']})]}),s.jsxs(il,{children:[s.jsx(ul,{children:"Cancel"}),s.jsx(cl,{onClick:OH,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),s.jsx(Ac,{open:vH,onOpenChange:Xw,children:s.jsxs(sl,{children:[s.jsxs(al,{children:[s.jsx(ol,{children:"Delete User"}),s.jsxs(ll,{children:['Are you sure you want to delete "',(Wi==null?void 0:Wi.display_name)||(Wi==null?void 0:Wi.email),'"? This will remove their role and access to the system. This action cannot be undone.']})]}),s.jsxs(il,{children:[s.jsx(ul,{disabled:Zw,children:"Cancel"}),s.jsx(cl,{onClick:PH,disabled:Zw,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:Zw?s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),s.jsx(sLe,{open:wH,onOpenChange:dA,onUserCreated:d})]})}const iLe=()=>{const e=Fu();return y.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),s.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})};class oLe{async getCurrentUser(){const{data:{user:t}}=await $.auth.getUser();if(!t)return null;const{data:r}=await $.from("profiles").select("display_name").eq("user_id",t.id).maybeSingle();return{id:t.id,email:t.email,name:(r==null?void 0:r.display_name)||t.email}}async getCases(t){let r=$.from("hr_cases").select(`
        *,
        employee:employees(id, first_name, last_name, email, position, department)
      `).order("created_at",{ascending:!1});t!=null&&t.status&&(r=r.eq("status",t.status)),t!=null&&t.case_type&&(r=r.eq("case_type",t.case_type)),t!=null&&t.severity&&(r=r.eq("severity",t.severity)),t!=null&&t.assigned_investigator_user_id&&(r=r.eq("assigned_investigator_user_id",t.assigned_investigator_user_id)),t!=null&&t.safeguarding_only&&(r=r.eq("safeguarding_flag",!0));const{data:n,error:a}=await r;if(a)throw console.error("[HRCasesService] Error fetching cases:",a),a;return n||[]}async getCaseById(t){const{data:r,error:n}=await $.from("hr_cases").select(`
        *,
        employee:employees(id, first_name, last_name, email, position, department)
      `).eq("id",t).maybeSingle();if(n)throw console.error("[HRCasesService] Error fetching case:",n),n;return r&&await _r.log({action:"document.upload",entityType:"setting",entityId:t,afterState:{action:"case_accessed"}}),r}async createCase(t){const r=await this.getCurrentUser(),n={organisation_id:t.organisation_id,employee_id:t.employee_id||null,case_number:"TEMP",case_type:t.case_type,reported_by:t.reported_by,reporter_name:t.reporter_name||null,reporter_contact:t.reporter_contact||null,date_reported:t.date_reported||new Date().toISOString().split("T")[0],summary:t.summary,detailed_description:t.detailed_description||null,severity:t.severity||"medium",safeguarding_flag:t.safeguarding_flag||!1,confidentiality_level:t.confidentiality_level||"standard",assigned_investigator_user_id:t.assigned_investigator_user_id||null,created_by_user_id:(r==null?void 0:r.id)||null},{data:a,error:i}=await $.from("hr_cases").insert(n).select(`
        *,
        employee:employees(id, first_name, last_name, email, position, department)
      `).single();if(i)throw console.error("[HRCasesService] Error creating case:",i),i;return await _r.log({action:"document.upload",entityType:"setting",entityId:a.id,organisationId:t.organisation_id,afterState:{action:"hr_case_created",case_number:a.case_number,case_type:t.case_type,severity:t.severity||"medium"}}),a}async updateCase(t,r){const{data:n}=await $.from("hr_cases").select("*").eq("id",t).single(),a={...r};r.status==="closed"&&(n==null?void 0:n.status)!=="closed"&&(a.closed_at=new Date().toISOString());const{data:i,error:o}=await $.from("hr_cases").update(a).eq("id",t).select(`
        *,
        employee:employees(id, first_name, last_name, email, position, department)
      `).single();if(o)throw console.error("[HRCasesService] Error updating case:",o),o;return await _r.log({action:"document.upload",entityType:"setting",entityId:t,beforeState:n?{...n,action:"hr_case_updated"}:void 0,afterState:{...i,action:"hr_case_updated"}}),i}async closeCase(t,r){const{data:n}=await $.from("hr_case_findings").select("id").eq("hr_case_id",t).limit(1);if(!n||n.length===0)throw new Error("Cannot close case without findings. Please record findings first.");return this.updateCase(t,{status:"closed",closure_notes:r})}async getTriage(t){const{data:r,error:n}=await $.from("hr_case_triage").select("*").eq("hr_case_id",t).maybeSingle();if(n)throw console.error("[HRCasesService] Error fetching triage:",n),n;return r}async createTriage(t){const r=await this.getCurrentUser(),{data:n,error:a}=await $.from("hr_case_triage").insert({...t,triaged_by_user_id:(r==null?void 0:r.id)||""}).select().single();if(a)throw console.error("[HRCasesService] Error creating triage:",a),a;return await $.from("hr_cases").update({status:"triaged"}).eq("id",t.hr_case_id),await _r.log({action:"document.upload",entityType:"setting",entityId:n.id,afterState:{action:"hr_case_triaged",hr_case_id:t.hr_case_id,escalation_required:t.escalation_required}}),n}async getNotes(t){const{data:r,error:n}=await $.from("hr_case_notes").select("*").eq("hr_case_id",t).order("created_at",{ascending:!1});if(n)throw console.error("[HRCasesService] Error fetching notes:",n),n;return r||[]}async createNote(t){const r=await this.getCurrentUser(),{data:n,error:a}=await $.from("hr_case_notes").insert({...t,created_by_user_id:(r==null?void 0:r.id)||"",created_by_name:r==null?void 0:r.name}).select().single();if(a)throw console.error("[HRCasesService] Error creating note:",a),a;return await _r.log({action:"document.upload",entityType:"setting",entityId:n.id,afterState:{action:"hr_case_note_added",hr_case_id:t.hr_case_id,visibility:t.visibility||"standard"}}),n}async getEvidence(t){const{data:r,error:n}=await $.from("hr_case_evidence").select("*").eq("hr_case_id",t).order("uploaded_at",{ascending:!1});if(n)throw console.error("[HRCasesService] Error fetching evidence:",n),n;return r||[]}async uploadEvidence(t,r,n,a="normal"){const i=await this.getCurrentUser(),o=`${t}/${Date.now()}_${r.name}`,{error:l}=await $.storage.from("hr-case-evidence").upload(o,r);if(l)throw console.error("[HRCasesService] Error uploading file:",l),l;const{data:c}=$.storage.from("hr-case-evidence").getPublicUrl(o),{data:u,error:d}=await $.from("hr_case_evidence").insert({hr_case_id:t,file_url:c.publicUrl,file_name:r.name,description:n,uploaded_by_user_id:(i==null?void 0:i.id)||"",uploaded_by_name:i==null?void 0:i.name,access_level:a}).select().single();if(d)throw console.error("[HRCasesService] Error creating evidence record:",d),d;return await _r.log({action:"document.upload",entityType:"document",entityId:u.id,afterState:{action:"hr_case_evidence_uploaded",hr_case_id:t,file_name:r.name,access_level:a}}),u}async getFindings(t){const{data:r,error:n}=await $.from("hr_case_findings").select("*").eq("hr_case_id",t).maybeSingle();if(n)throw console.error("[HRCasesService] Error fetching findings:",n),n;return r}async createFindings(t){const r=await this.getCurrentUser(),{data:n,error:a}=await $.from("hr_case_findings").insert({...t,decision_maker_user_id:(r==null?void 0:r.id)||"",decision_maker_name:r==null?void 0:r.name}).select().single();if(a)throw console.error("[HRCasesService] Error creating findings:",a),a;return await $.from("hr_cases").update({status:"decision_made"}).eq("id",t.hr_case_id),await _r.log({action:"document.upload",entityType:"setting",entityId:n.id,afterState:{action:"hr_case_findings_recorded",hr_case_id:t.hr_case_id,substantiated:t.substantiated}}),n}async getActions(t){const{data:r,error:n}=await $.from("hr_case_actions").select("*").eq("hr_case_id",t).order("created_at",{ascending:!1});if(n)throw console.error("[HRCasesService] Error fetching actions:",n),n;return r||[]}async createAction(t){const r=await this.getCurrentUser(),{data:n,error:a}=await $.from("hr_case_actions").insert({...t,created_by_user_id:(r==null?void 0:r.id)||"",created_by_name:r==null?void 0:r.name}).select().single();if(a)throw console.error("[HRCasesService] Error creating action:",a),a;return await _r.log({action:"document.upload",entityType:"setting",entityId:n.id,afterState:{action:"hr_case_action_created",hr_case_id:t.hr_case_id,action_type:t.action_type,effective_date:t.effective_date,expiry_date:t.expiry_date}}),n}async updateAction(t,r){const{data:n}=await $.from("hr_case_actions").select("*").eq("id",t).single(),{data:a,error:i}=await $.from("hr_case_actions").update(r).eq("id",t).select().single();if(i)throw console.error("[HRCasesService] Error updating action:",i),i;return await _r.log({action:"document.upload",entityType:"setting",entityId:t,beforeState:n?{...n,action:"hr_case_action_updated"}:void 0,afterState:{...a,action:"hr_case_action_updated"}}),a}async getStats(){const{data:t,error:r}=await $.from("hr_cases").select("status, case_type, severity, safeguarding_flag");if(r)throw console.error("[HRCasesService] Error fetching stats:",r),r;const{data:n}=await $.from("hr_case_actions").select("id").in("action_type",["verbal_warning","written_warning","final_warning"]).eq("status","active").gte("expiry_date",new Date().toISOString().split("T")[0]),a={total:(t==null?void 0:t.length)||0,byStatus:{new:0,triaged:0,investigating:0,awaiting_response:0,decision_made:0,closed:0},byType:{incident:0,misconduct:0,grievance:0,performance:0,complaint:0},bySeverity:{low:0,medium:0,high:0,critical:0},openCases:0,closedCases:0,safeguardingCases:0,activeWarnings:(n==null?void 0:n.length)||0};return t==null||t.forEach(i=>{a.byStatus[i.status]++,a.byType[i.case_type]++,a.bySeverity[i.severity]++,i.status==="closed"?a.closedCases++:a.openCases++,i.safeguarding_flag&&a.safeguardingCases++}),a}async getCaseAuditLog(t){const{data:r,error:n}=await $.from("audit_logs").select("*").eq("entity_id",t).order("created_at",{ascending:!1});if(n)throw console.error("[HRCasesService] Error fetching audit log:",n),n;return r||[]}}const mn=new oLe;function lLe(e){const[t,r]=y.useState([]),[n,a]=y.useState(null),[i,o]=y.useState(!0),{toast:l}=lr(),c=y.useCallback(async()=>{o(!0);try{const[h,m]=await Promise.all([mn.getCases(e),mn.getStats()]);r(h),a(m)}catch(h){console.error("Error fetching HR cases:",h),l({title:"Error",description:"Failed to load HR cases",variant:"destructive"})}finally{o(!1)}},[e,l]);return y.useEffect(()=>{c()},[c]),{cases:t,stats:n,loading:i,refetch:c,createCase:async h=>{try{const m=await mn.createCase(h);return l({title:"Case Created",description:`Case ${m.case_number} has been created`}),await c(),m}catch(m){return console.error("Error creating case:",m),l({title:"Error",description:"Failed to create case",variant:"destructive"}),null}},updateCase:async(h,m)=>{try{return await mn.updateCase(h,m),l({title:"Case Updated",description:"Case has been updated successfully"}),await c(),!0}catch(g){return console.error("Error updating case:",g),l({title:"Error",description:"Failed to update case",variant:"destructive"}),!1}},closeCase:async(h,m)=>{try{return await mn.closeCase(h,m),l({title:"Case Closed",description:"Case has been closed successfully"}),await c(),!0}catch(g){console.error("Error closing case:",g);const p=g instanceof Error?g.message:"Failed to close case";return l({title:"Error",description:p,variant:"destructive"}),!1}}}}function cLe(e){const[t,r]=y.useState(null),[n,a]=y.useState(null),[i,o]=y.useState([]),[l,c]=y.useState([]),[u,d]=y.useState(null),[f,h]=y.useState([]),[m,g]=y.useState([]),[p,v]=y.useState(!1),{toast:x}=lr(),b=y.useCallback(async()=>{if(e){v(!0);try{const[C,P,A,k,D,R,U]=await Promise.all([mn.getCaseById(e),mn.getTriage(e),mn.getNotes(e),mn.getEvidence(e),mn.getFindings(e),mn.getActions(e),mn.getCaseAuditLog(e)]);r(C),a(P),o(A),c(k),d(D),h(R),g(U)}catch(C){console.error("Error fetching case detail:",C),x({title:"Error",description:"Failed to load case details",variant:"destructive"})}finally{v(!1)}}},[e,x]);return y.useEffect(()=>{b()},[b]),{hrCase:t,triage:n,notes:i,evidence:l,findings:u,actions:f,auditLog:m,loading:p,refetch:b,createTriage:async C=>{if(!e)return!1;try{return await mn.createTriage({...C,hr_case_id:e}),x({title:"Triage Complete",description:"Case has been triaged successfully"}),await b(),!0}catch(P){return console.error("Error creating triage:",P),x({title:"Error",description:"Failed to save triage",variant:"destructive"}),!1}},addNote:async C=>{if(!e)return!1;try{return await mn.createNote({...C,hr_case_id:e}),x({title:"Note Added",description:"Note has been added to the case"}),await b(),!0}catch(P){return console.error("Error adding note:",P),x({title:"Error",description:"Failed to add note",variant:"destructive"}),!1}},uploadEvidence:async(C,P,A)=>{if(!e)return!1;try{return await mn.uploadEvidence(e,C,P,A),x({title:"Evidence Uploaded",description:"Evidence has been uploaded successfully"}),await b(),!0}catch(k){return console.error("Error uploading evidence:",k),x({title:"Error",description:"Failed to upload evidence",variant:"destructive"}),!1}},recordFindings:async C=>{if(!e)return!1;try{return await mn.createFindings({...C,hr_case_id:e}),x({title:"Findings Recorded",description:"Case findings have been recorded"}),await b(),!0}catch(P){return console.error("Error recording findings:",P),x({title:"Error",description:"Failed to record findings",variant:"destructive"}),!1}},addAction:async C=>{if(!e)return!1;try{return await mn.createAction({...C,hr_case_id:e}),x({title:"Action Added",description:"Disciplinary action has been recorded"}),await b(),!0}catch(P){return console.error("Error adding action:",P),x({title:"Error",description:"Failed to add action",variant:"destructive"}),!1}},updateAction:async(C,P)=>{try{return await mn.updateAction(C,P),x({title:"Action Updated",description:"Action has been updated"}),await b(),!0}catch(A){return console.error("Error updating action:",A),x({title:"Error",description:"Failed to update action",variant:"destructive"}),!1}}}}function e4(e){return{id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,phone:e.phone||"",avatar:e.avatar_url||void 0,employmentType:e.employment_type,position:e.position||"",department:e.department||"",startDate:e.start_date||"",status:e.status,complianceStatus:e.compliance_status,payRate:e.pay_rate||0,awardClassification:void 0,emergencyContact:e.emergency_contact_name?{name:e.emergency_contact_name,phone:e.emergency_contact_phone||"",relationship:e.emergency_contact_relationship||""}:void 0,documents:[],certifications:[]}}function uLe(){const{employees:e,activeEmployees:t,refetch:r,isLoading:n}=xa(),a=e.map(e4),i=t.map(e4);return{employees:a,activeEmployees:i,refetch:r,isLoading:n}}const dLe=[{value:"incident",label:"Incident"},{value:"misconduct",label:"Misconduct"},{value:"grievance",label:"Grievance"},{value:"performance",label:"Performance"},{value:"complaint",label:"Complaint"}],fLe=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}],hLe=[{value:"manager",label:"Manager"},{value:"employee",label:"Employee"},{value:"external",label:"External"},{value:"anonymous",label:"Anonymous"}];function mLe({open:e,onOpenChange:t,onSubmit:r,organisationId:n}){const[a,i]=y.useState(!1),{employees:o}=uLe(),{toast:l}=lr(),{register:c,handleSubmit:u,watch:d,setValue:f,reset:h,formState:{errors:m}}=as({defaultValues:{organisation_id:n,case_type:"incident",reported_by:"manager",severity:"medium",safeguarding_flag:!1,confidentiality_level:"standard"}}),g=d("reported_by"),p=d("safeguarding_flag"),v=async x=>{i(!0);try{await r(x),h(),t(!1)}catch(b){console.error("Error creating case:",b),l({title:"Error",description:"Failed to create case",variant:"destructive"})}finally{i(!1)}};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Create HR Case"}),s.jsx(Ot,{children:"Record a new incident, misconduct, grievance, or disciplinary matter."})]}),s.jsxs("form",{onSubmit:u(v),className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"case_type",children:"Case Type *"}),s.jsxs(Ie,{value:d("case_type"),onValueChange:x=>f("case_type",x),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsx(Me,{children:dLe.map(x=>s.jsx(Y,{value:x.value,children:x.label},x.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"severity",children:"Severity *"}),s.jsxs(Ie,{value:d("severity"),onValueChange:x=>f("severity",x),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsx(Me,{children:fLe.map(x=>s.jsx(Y,{value:x.value,children:x.label},x.value))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"employee_id",children:"Employee Involved"}),s.jsxs(Ie,{value:d("employee_id")||"__none__",onValueChange:x=>f("employee_id",x==="__none__"?void 0:x),children:[s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select employee (optional)"})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"__none__",children:"No specific employee"}),o.filter(x=>x.id&&x.id.trim()!=="").map(x=>s.jsxs(Y,{value:x.id,children:[x.firstName," ",x.lastName]},x.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"summary",children:"Summary *"}),s.jsx(ne,{id:"summary",...c("summary",{required:"Summary is required"}),placeholder:"Brief description of the case"}),m.summary&&s.jsx("p",{className:"text-sm text-destructive",children:m.summary.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"detailed_description",children:"Detailed Description"}),s.jsx(wt,{id:"detailed_description",...c("detailed_description"),placeholder:"Provide full details of the incident or matter...",rows:4})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"reported_by",children:"Reported By *"}),s.jsxs(Ie,{value:g,onValueChange:x=>f("reported_by",x),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsx(Me,{children:hLe.map(x=>s.jsx(Y,{value:x.value,children:x.label},x.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"date_reported",children:"Date Reported"}),s.jsx(ne,{id:"date_reported",type:"date",...c("date_reported"),defaultValue:new Date().toISOString().split("T")[0]})]})]}),g!=="anonymous"&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"reporter_name",children:"Reporter Name"}),s.jsx(ne,{id:"reporter_name",...c("reporter_name"),placeholder:"Name of reporter"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"reporter_contact",children:"Reporter Contact"}),s.jsx(ne,{id:"reporter_contact",...c("reporter_contact"),placeholder:"Phone or email"})]})]}),s.jsx("div",{className:"space-y-4 rounded-lg border border-destructive/20 bg-destructive/5 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(H,{htmlFor:"safeguarding_flag",className:"text-destructive font-medium",children:"Safeguarding Concern"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Flag if this case involves child safety or vulnerable persons"})]}),s.jsx(kn,{id:"safeguarding_flag",checked:p,onCheckedChange:x=>f("safeguarding_flag",x)})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"confidentiality_level",children:"Confidentiality Level"}),s.jsxs(Ie,{value:d("confidentiality_level"),onValueChange:x=>f("confidentiality_level",x),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"standard",children:"Standard"}),s.jsx(Y,{value:"restricted",children:"Restricted (Admin Only)"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:a,children:a?"Creating...":"Create Case"})]})]})]})})}const pLe={incident:"Incident",misconduct:"Misconduct",grievance:"Grievance",performance:"Performance",complaint:"Complaint"},gLe={low:"Low",medium:"Medium",high:"High",critical:"Critical"},vLe={new:"New",triaged:"Triaged",investigating:"Investigating",awaiting_response:"Awaiting Response",decision_made:"Decision Made",closed:"Closed"},yLe={manager:"Manager",employee:"Employee",external:"External",anonymous:"Anonymous"};function xLe({hrCase:e}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(G,{children:[s.jsx(he,{children:s.jsxs(ge,{className:"text-base flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4"}),"Case Details"]})}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Case Type"}),s.jsx("p",{className:"font-medium",children:pLe[e.case_type]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Date Reported"}),s.jsxs("p",{className:"font-medium flex items-center gap-1",children:[s.jsx(Vt,{className:"h-4 w-4"}),de(new Date(e.date_reported),"dd MMM yyyy")]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Reported By"}),s.jsx("p",{className:"font-medium",children:yLe[e.reported_by]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Created"}),s.jsxs("p",{className:"font-medium flex items-center gap-1",children:[s.jsx(xt,{className:"h-4 w-4"}),de(new Date(e.created_at),"dd MMM yyyy HH:mm")]})]})]}),(e.reporter_name||e.reporter_contact)&&s.jsxs(s.Fragment,{children:[s.jsx(Et,{}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.reporter_name&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Reporter Name"}),s.jsx("p",{className:"font-medium",children:e.reporter_name})]}),e.reporter_contact&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Reporter Contact"}),s.jsx("p",{className:"font-medium",children:e.reporter_contact})]})]})]})]})]}),e.employee&&s.jsxs(G,{children:[s.jsx(he,{children:s.jsxs(ge,{className:"text-base flex items-center gap-2",children:[s.jsx(Bn,{className:"h-4 w-4"}),"Employee Involved"]})}),s.jsx(X,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),s.jsxs("p",{className:"font-medium",children:[e.employee.first_name," ",e.employee.last_name]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),s.jsx("p",{className:"font-medium",children:e.employee.email})]}),e.employee.position&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Position"}),s.jsx("p",{className:"font-medium",children:e.employee.position})]}),e.employee.department&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Department"}),s.jsx("p",{className:"font-medium",children:e.employee.department})]})]})})]}),s.jsxs(G,{children:[s.jsx(he,{children:s.jsx(ge,{className:"text-base",children:"Summary"})}),s.jsx(X,{children:s.jsx("p",{className:"text-sm",children:e.summary})})]}),e.detailed_description&&s.jsxs(G,{children:[s.jsx(he,{children:s.jsx(ge,{className:"text-base",children:"Detailed Description"})}),s.jsx(X,{children:s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.detailed_description})})]}),e.status==="closed"&&s.jsxs(G,{className:"border-green-200 bg-green-50",children:[s.jsx(he,{children:s.jsx(ge,{className:"text-base text-green-800",children:"Case Closed"})}),s.jsxs(X,{className:"space-y-2",children:[e.closed_at&&s.jsxs("p",{className:"text-sm text-green-700",children:["Closed on ",de(new Date(e.closed_at),"dd MMM yyyy HH:mm")]}),e.closure_notes&&s.jsx("p",{className:"text-sm text-green-800",children:e.closure_notes})]})]})]})}function bLe({hrCase:e,triage:t,onCreateTriage:r}){const[n,a]=y.useState(!1),[i,o]=y.useState(!1),{register:l,handleSubmit:c,watch:u,setValue:d,reset:f}=as({defaultValues:{initial_risk_assessment:"",immediate_actions_taken:"",escalation_required:!1,escalated_to:""}}),h=u("escalation_required"),m=e.case_type==="misconduct"||e.severity==="high"||e.severity==="critical",g=async p=>{o(!0);try{await r(p)&&(a(!1),f())}finally{o(!1)}};return t?s.jsx("div",{className:"space-y-4",children:s.jsxs(G,{className:"border-green-200 bg-green-50",children:[s.jsx(he,{children:s.jsxs(ge,{className:"text-base flex items-center gap-2 text-green-800",children:[s.jsx(jt,{className:"h-4 w-4"}),"Triage Complete"]})}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Triaged At"}),s.jsx("p",{className:"text-sm font-medium",children:de(new Date(t.triaged_at),"dd MMM yyyy HH:mm")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Risk Assessment"}),s.jsx("p",{className:"text-sm",children:t.initial_risk_assessment})]}),t.immediate_actions_taken&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Immediate Actions Taken"}),s.jsx("p",{className:"text-sm",children:t.immediate_actions_taken})]}),t.escalation_required&&s.jsxs("div",{className:"rounded-lg border border-orange-200 bg-orange-50 p-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(or,{className:"h-4 w-4 text-orange-600"}),s.jsx("span",{className:"font-medium text-orange-800",children:"Escalation Required"})]}),t.escalated_to&&s.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["Escalated to: ",t.escalated_to]})]})]})]})}):n?s.jsxs(G,{children:[s.jsx(he,{children:s.jsx(ge,{className:"text-base",children:"Complete Triage"})}),s.jsx(X,{children:s.jsxs("form",{onSubmit:c(g),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"initial_risk_assessment",children:"Initial Risk Assessment *"}),s.jsx(wt,{id:"initial_risk_assessment",...l("initial_risk_assessment",{required:!0}),placeholder:"Assess the immediate risks and potential impacts...",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"immediate_actions_taken",children:"Immediate Actions Taken"}),s.jsx(wt,{id:"immediate_actions_taken",...l("immediate_actions_taken"),placeholder:"Document any immediate actions taken to address the situation...",rows:3})]}),s.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(H,{htmlFor:"escalation_required",children:"Escalation Required"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Does this case need to be escalated to external bodies or senior leadership?"})]}),s.jsx(kn,{id:"escalation_required",checked:h,onCheckedChange:p=>d("escalation_required",p)})]}),h&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"escalated_to",children:"Escalated To"}),s.jsx(ne,{id:"escalated_to",...l("escalated_to"),placeholder:"e.g., NDIS Quality & Safeguards Commission, Police, etc."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:i,children:i?"Saving...":"Complete Triage"})]})]})})]}):s.jsxs("div",{className:"space-y-4",children:[m&&s.jsx(G,{className:"border-amber-200 bg-amber-50",children:s.jsxs(X,{className:"flex items-center gap-3 py-4",children:[s.jsx(or,{className:"h-5 w-5 text-amber-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-amber-800",children:"Triage Required"}),s.jsx("p",{className:"text-sm text-amber-700",children:"This case requires triage due to its type or severity."})]}),s.jsx(I,{onClick:()=>a(!0),children:"Begin Triage"})]})}),!m&&s.jsx(G,{children:s.jsxs(X,{className:"flex items-center gap-3 py-4",children:[s.jsx(xt,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"No Triage Required"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This case does not require mandatory triage, but you can still complete one if needed."})]}),s.jsx(I,{variant:"outline",onClick:()=>a(!0),children:"Add Triage"})]})})]})}function wLe({notes:e,onAddNote:t}){const[r,n]=y.useState(!1),[a,i]=y.useState(!1),{register:o,handleSubmit:l,watch:c,setValue:u,reset:d}=as({defaultValues:{note_text:"",visibility:"standard"}}),f=async h=>{i(!0);try{await t(h)&&(n(!1),d())}finally{i(!1)}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium",children:"Case Notes"}),!r&&s.jsxs(I,{size:"sm",onClick:()=>n(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-1"}),"Add Note"]})]}),r&&s.jsxs(G,{children:[s.jsx(he,{children:s.jsx(ge,{className:"text-base",children:"Add Note"})}),s.jsx(X,{children:s.jsxs("form",{onSubmit:l(f),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"note_text",children:"Note *"}),s.jsx(wt,{id:"note_text",...o("note_text",{required:!0}),placeholder:"Enter your note...",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"visibility",children:"Visibility"}),s.jsxs(Ie,{value:c("visibility"),onValueChange:h=>u("visibility",h),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"standard",children:"Standard (All Case Viewers)"}),s.jsx(Y,{value:"restricted",children:"Restricted (Admin Only)"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:a,children:a?"Adding...":"Add Note"})]})]})})]}),e.length===0&&!r&&s.jsx(G,{children:s.jsxs(X,{className:"py-8 text-center text-muted-foreground",children:[s.jsx(Ig,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No notes added yet"})]})}),e.map(h=>s.jsx(G,{className:h.visibility==="restricted"?"border-red-200":"",children:s.jsx(X,{className:"py-4",children:s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Bn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium",children:h.created_by_name||"Unknown User"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:de(new Date(h.created_at),"dd MMM yyyy HH:mm")}),h.visibility==="restricted"&&s.jsxs(fe,{variant:"outline",className:"border-red-500 text-red-500",children:[s.jsx(pu,{className:"h-3 w-3 mr-1"}),"Restricted"]})]}),s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:h.note_text})]})})})},h.id))]})}function jLe({evidence:e,onUploadEvidence:t}){const[r,n]=y.useState(!1),[a,i]=y.useState(!1),[o,l]=y.useState(""),[c,u]=y.useState("normal"),[d,f]=y.useState(null),h=y.useRef(null),m=p=>{var x;const v=(x=p.target.files)==null?void 0:x[0];v&&f(v)},g=async()=>{if(d){i(!0);try{await t(d,o,c)&&(n(!1),f(null),l(""),u("normal"),h.current&&(h.current.value=""))}finally{i(!1)}}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium",children:"Evidence & Documents"}),!r&&s.jsxs(I,{size:"sm",onClick:()=>n(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-1"}),"Upload Evidence"]})]}),r&&s.jsxs(G,{children:[s.jsx(he,{children:s.jsx(ge,{className:"text-base",children:"Upload Evidence"})}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"file",children:"File *"}),s.jsx(ne,{id:"file",type:"file",ref:h,onChange:m}),d&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",d.name," (",(d.size/1024).toFixed(1)," KB)"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"description",children:"Description"}),s.jsx(wt,{id:"description",value:o,onChange:p=>l(p.target.value),placeholder:"Describe this evidence...",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"access_level",children:"Access Level"}),s.jsxs(Ie,{value:c,onValueChange:p=>u(p),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"normal",children:"Normal (All Case Viewers)"}),s.jsx(Y,{value:"restricted",children:"Restricted (Admin Only)"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>{n(!1),f(null),l("")},children:"Cancel"}),s.jsx(I,{onClick:g,disabled:!d||a,children:a?"Uploading...":"Upload"})]})]})]}),e.length===0&&!r&&s.jsx(G,{children:s.jsxs(X,{className:"py-8 text-center text-muted-foreground",children:[s.jsx(gt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No evidence uploaded yet"})]})}),e.map(p=>s.jsx(G,{className:p.access_level==="restricted"?"border-red-200":"",children:s.jsx(X,{className:"py-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:p.file_name}),p.access_level==="restricted"&&s.jsxs(fe,{variant:"outline",className:"border-red-500 text-red-500",children:[s.jsx(pu,{className:"h-3 w-3 mr-1"}),"Restricted"]})]}),p.description&&s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:p.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Bn,{className:"h-3 w-3"}),p.uploaded_by_name||"Unknown"]}),s.jsx("span",{children:de(new Date(p.uploaded_at),"dd MMM yyyy HH:mm")})]})]}),s.jsx(I,{variant:"outline",size:"sm",asChild:!0,children:s.jsxs("a",{href:p.file_url,target:"_blank",rel:"noopener noreferrer",children:[s.jsx(pF,{className:"h-4 w-4 mr-1"}),"View"]})})]})})},p.id))]})}const t4=[{value:"yes",label:"Substantiated",icon:jt},{value:"no",label:"Not Substantiated",icon:An},{value:"partially",label:"Partially Substantiated",icon:or}];function _Le({hrCase:e,findings:t,onRecordFindings:r}){var g;const[n,a]=y.useState(!1),[i,o]=y.useState(!1),{register:l,handleSubmit:c,watch:u,setValue:d,reset:f}=as({defaultValues:{findings_summary:"",substantiated:"no",contributing_factors:""}}),h=async p=>{o(!0);try{await r(p)&&(a(!1),f())}finally{o(!1)}},m=p=>{switch(p){case"yes":return"bg-red-500 text-white";case"no":return"bg-green-500 text-white";case"partially":return"bg-amber-500 text-black"}};return t?s.jsx("div",{className:"space-y-4",children:s.jsxs(G,{children:[s.jsx(he,{children:s.jsxs(ge,{className:"text-base flex items-center gap-2",children:[s.jsx(yx,{className:"h-4 w-4"}),"Case Findings"]})}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Outcome:"}),s.jsx(fe,{className:m(t.substantiated),children:(g=t4.find(p=>p.value===t.substantiated))==null?void 0:g.label})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Decision Date"}),s.jsx("p",{className:"text-sm font-medium",children:de(new Date(t.decision_date),"dd MMM yyyy")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Decision Maker"}),s.jsx("p",{className:"text-sm font-medium",children:t.decision_maker_name||"Unknown"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Findings Summary"}),s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.findings_summary})]}),t.contributing_factors&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Contributing Factors"}),s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.contributing_factors})]})]})]})}):n?s.jsxs(G,{children:[s.jsx(he,{children:s.jsx(ge,{className:"text-base",children:"Record Findings"})}),s.jsx(X,{children:s.jsxs("form",{onSubmit:c(h),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"substantiated",children:"Outcome *"}),s.jsxs(Ie,{value:u("substantiated"),onValueChange:p=>d("substantiated",p),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsx(Me,{children:t4.map(p=>s.jsx(Y,{value:p.value,children:p.label},p.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"findings_summary",children:"Findings Summary *"}),s.jsx(wt,{id:"findings_summary",...l("findings_summary",{required:!0}),placeholder:"Summarize the findings of the investigation...",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"contributing_factors",children:"Contributing Factors"}),s.jsx(wt,{id:"contributing_factors",...l("contributing_factors"),placeholder:"Identify any contributing factors or systemic issues...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:i,children:i?"Saving...":"Record Findings"})]})]})})]}):s.jsx("div",{className:"space-y-4",children:e.status==="closed"?s.jsx(G,{className:"border-amber-200 bg-amber-50",children:s.jsx(X,{className:"py-4",children:s.jsx("p",{className:"text-amber-800",children:"Case was closed without findings recorded. This is unusual for a closed case."})})}):s.jsx(G,{children:s.jsxs(X,{className:"flex items-center gap-3 py-6",children:[s.jsx(yx,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"No Findings Recorded"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Record findings once the investigation is complete."})]}),s.jsx(I,{onClick:()=>a(!0),children:"Record Findings"})]})})})}const r4=[{value:"verbal_warning",label:"Verbal Warning"},{value:"written_warning",label:"Written Warning"},{value:"final_warning",label:"Final Warning"},{value:"training",label:"Training Required"},{value:"supervision",label:"Increased Supervision"},{value:"termination",label:"Termination"},{value:"no_action",label:"No Action"},{value:"other",label:"Other"}],NLe=["verbal_warning","written_warning","final_warning"];function SLe({actions:e,onAddAction:t,onUpdateAction:r}){const[n,a]=y.useState(!1),[i,o]=y.useState(!1),{register:l,handleSubmit:c,watch:u,setValue:d,reset:f,formState:{errors:h}}=as({defaultValues:{action_type:"no_action",description:"",effective_date:new Date().toISOString().split("T")[0]}}),m=u("action_type"),g=NLe.includes(m),p=async w=>{o(!0);try{await t(w)&&(a(!1),f())}finally{o(!1)}},v=async(w,_)=>{await r(w,{status:_})},x=w=>{switch(w){case"termination":return"bg-red-500 text-white";case"final_warning":return"bg-orange-500 text-white";case"written_warning":return"bg-amber-500 text-black";case"verbal_warning":return"bg-yellow-400 text-black";case"training":return"bg-blue-500 text-white";case"supervision":return"bg-purple-500 text-white";case"no_action":return"bg-green-500 text-white";default:return"bg-muted"}},b=w=>{switch(w){case"planned":return s.jsx(xt,{className:"h-3 w-3"});case"active":return s.jsx(or,{className:"h-3 w-3"});case"completed":return s.jsx(jt,{className:"h-3 w-3"});case"withdrawn":return s.jsx(An,{className:"h-3 w-3"})}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium",children:"Disciplinary Actions"}),!n&&s.jsxs(I,{size:"sm",onClick:()=>a(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-1"}),"Add Action"]})]}),n&&s.jsxs(G,{children:[s.jsx(he,{children:s.jsx(ge,{className:"text-base",children:"Add Disciplinary Action"})}),s.jsx(X,{children:s.jsxs("form",{onSubmit:c(p),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"action_type",children:"Action Type *"}),s.jsxs(Ie,{value:m,onValueChange:w=>d("action_type",w),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsx(Me,{children:r4.map(w=>s.jsx(Y,{value:w.value,children:w.label},w.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"description",children:"Description *"}),s.jsx(wt,{id:"description",...l("description",{required:"Description is required"}),placeholder:"Describe the action and expectations...",rows:3}),h.description&&s.jsx("p",{className:"text-sm text-destructive",children:h.description.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"effective_date",children:"Effective Date *"}),s.jsx(ne,{id:"effective_date",type:"date",...l("effective_date",{required:!0})})]}),g&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"expiry_date",children:"Expiry Date *"}),s.jsx(ne,{id:"expiry_date",type:"date",...l("expiry_date",{required:g?"Warnings must have an expiry date":!1})}),h.expiry_date&&s.jsx("p",{className:"text-sm text-destructive",children:h.expiry_date.message})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"assigned_to_name",children:"Assigned To"}),s.jsx(ne,{id:"assigned_to_name",...l("assigned_to_name"),placeholder:"Name of person responsible for follow-up"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:i,children:i?"Adding...":"Add Action"})]})]})})]}),e.length===0&&!n&&s.jsx(G,{children:s.jsxs(X,{className:"py-8 text-center text-muted-foreground",children:[s.jsx(yF,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No actions recorded yet"})]})}),e.map(w=>{var _;return s.jsx(G,{children:s.jsx(X,{className:"py-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(fe,{className:x(w.action_type),children:(_=r4.find(j=>j.value===w.action_type))==null?void 0:_.label}),s.jsxs(fe,{variant:"outline",className:"flex items-center gap-1",children:[b(w.status),w.status.charAt(0).toUpperCase()+w.status.slice(1)]})]}),s.jsx("p",{className:"text-sm mb-2",children:w.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Effective: ",de(new Date(w.effective_date),"dd MMM yyyy")]}),w.expiry_date&&s.jsxs("span",{children:["Expires: ",de(new Date(w.expiry_date),"dd MMM yyyy")]}),w.assigned_to_name&&s.jsxs("span",{children:["Assigned to: ",w.assigned_to_name]})]})]}),w.status!=="completed"&&w.status!=="withdrawn"&&s.jsxs(Ie,{value:w.status,onValueChange:j=>v(w.id,j),children:[s.jsx(Re,{className:"w-32",children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"planned",children:"Planned"}),s.jsx(Y,{value:"active",children:"Active"}),s.jsx(Y,{value:"completed",children:"Completed"}),s.jsx(Y,{value:"withdrawn",children:"Withdrawn"})]})]})]})})},w.id)})]})}function CLe({auditLog:e}){const t=e;if(t.length===0)return s.jsx(G,{children:s.jsxs(X,{className:"py-8 text-center text-muted-foreground",children:[s.jsx(Xa,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No audit history available"})]})});const r=n=>{const a=n.split(".");return a.length===2?`${a[0].charAt(0).toUpperCase()+a[0].slice(1)} ${a[1].replace(/_/g," ")}`:n.replace(/_/g," ")};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(Xa,{className:"h-4 w-4"}),"Audit Trail"]}),s.jsx("div",{className:"space-y-2",children:t.map(n=>s.jsx(G,{children:s.jsx(X,{className:"py-3",children:s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(fe,{variant:"outline",children:r(n.action)}),s.jsx("span",{className:"text-xs text-muted-foreground",children:de(new Date(n.created_at),"dd MMM yyyy HH:mm:ss")})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(Bn,{className:"h-3 w-3"}),s.jsx("span",{children:n.user_name||n.user_email||"System"})]}),n.new_values&&Object.keys(n.new_values).length>0&&s.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:s.jsxs("details",{children:[s.jsx("summary",{className:"cursor-pointer hover:text-foreground",children:"View details"}),s.jsx("pre",{className:"mt-1 p-2 bg-muted rounded text-xs overflow-x-auto",children:JSON.stringify(n.new_values,null,2)})]})})]})})})},n.id))})]})}function ELe({caseId:e,open:t,onOpenChange:r,onUpdate:n}){const[a,i]=y.useState("overview"),{hrCase:o,triage:l,notes:c,evidence:u,findings:d,actions:f,auditLog:h,loading:m,createTriage:g,addNote:p,uploadEvidence:v,recordFindings:x,addAction:b,updateAction:w}=cLe(t?e:null);if(!o)return null;const _=N=>{switch(N){case"critical":return"bg-red-500 text-white";case"high":return"bg-orange-500 text-white";case"medium":return"bg-yellow-500 text-black";case"low":return"bg-green-500 text-white";default:return"bg-muted"}},j=N=>{switch(N){case"new":return"bg-blue-500 text-white";case"triaged":return"bg-purple-500 text-white";case"investigating":return"bg-amber-500 text-black";case"awaiting_response":return"bg-cyan-500 text-white";case"decision_made":return"bg-indigo-500 text-white";case"closed":return"bg-gray-500 text-white";default:return"bg-muted"}};return s.jsx(Do,{open:t,onOpenChange:r,children:s.jsxs(Li,{className:"w-full sm:max-w-3xl p-0 flex flex-col h-full",children:[s.jsxs(Fi,{className:"px-6 py-4 border-b",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ui,{className:"text-lg font-semibold",children:o.case_number}),o.confidentiality_level==="restricted"&&s.jsxs(fe,{variant:"outline",className:"border-red-500 text-red-500",children:[s.jsx(pu,{className:"h-3 w-3 mr-1"}),"Restricted"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:o.summary})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[o.safeguarding_flag&&s.jsxs(fe,{className:"bg-red-600 text-white",children:[s.jsx(ln,{className:"h-3 w-3 mr-1"}),"Safeguarding"]}),s.jsx(fe,{className:_(o.severity),children:gLe[o.severity]}),s.jsx(fe,{className:j(o.status),children:vLe[o.status]})]})]}),o.employee&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[s.jsx(Bn,{className:"h-4 w-4"}),s.jsxs("span",{children:[o.employee.first_name," ",o.employee.last_name,o.employee.position&&`  ${o.employee.position}`]})]})]}),s.jsxs(bn,{value:a,onValueChange:i,className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxs(fn,{className:"px-6 py-2 justify-start border-b rounded-none bg-transparent h-auto",children:[s.jsxs(Ve,{value:"overview",className:"gap-1.5",children:[s.jsx(gt,{className:"h-4 w-4"}),"Overview"]}),s.jsxs(Ve,{value:"triage",className:"gap-1.5",children:[s.jsx(or,{className:"h-4 w-4"}),"Triage"]}),s.jsxs(Ve,{value:"notes",className:"gap-1.5",children:[s.jsx(Ig,{className:"h-4 w-4"}),"Notes",c.length>0&&s.jsx(fe,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:c.length})]}),s.jsxs(Ve,{value:"evidence",className:"gap-1.5",children:[s.jsx(gt,{className:"h-4 w-4"}),"Evidence",u.length>0&&s.jsx(fe,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:u.length})]}),s.jsxs(Ve,{value:"findings",className:"gap-1.5",children:[s.jsx(yx,{className:"h-4 w-4"}),"Findings"]}),s.jsxs(Ve,{value:"actions",className:"gap-1.5",children:[s.jsx(yF,{className:"h-4 w-4"}),"Actions",f.length>0&&s.jsx(fe,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:f.length})]}),s.jsxs(Ve,{value:"audit",className:"gap-1.5",children:[s.jsx(Xa,{className:"h-4 w-4"}),"Audit"]})]}),s.jsx(qu,{className:"flex-1",children:s.jsxs("div",{className:"p-6",children:[s.jsx(rt,{value:"overview",className:"mt-0",children:s.jsx(xLe,{hrCase:o})}),s.jsx(rt,{value:"triage",className:"mt-0",children:s.jsx(bLe,{hrCase:o,triage:l,onCreateTriage:g})}),s.jsx(rt,{value:"notes",className:"mt-0",children:s.jsx(wLe,{notes:c,onAddNote:p})}),s.jsx(rt,{value:"evidence",className:"mt-0",children:s.jsx(jLe,{evidence:u,onUploadEvidence:v})}),s.jsx(rt,{value:"findings",className:"mt-0",children:s.jsx(_Le,{hrCase:o,findings:d,onRecordFindings:x})}),s.jsx(rt,{value:"actions",className:"mt-0",children:s.jsx(SLe,{actions:f,onAddAction:b,onUpdateAction:w})}),s.jsx(rt,{value:"audit",className:"mt-0",children:s.jsx(CLe,{auditLog:h})})]})})]})]})})}const kLe="00000000-0000-0000-0000-000000000000";function PLe(){const{isAdmin:e,isManager:t,loading:r}=_h(),[n,a]=y.useState(""),[i,o]=y.useState("all"),[l,c]=y.useState("all"),[u,d]=y.useState("all"),[f,h]=y.useState(!1),[m,g]=y.useState(null),p={...i!=="all"&&{status:i},...l!=="all"&&{case_type:l},...u!=="all"&&{severity:u}},{cases:v,stats:x,loading:b,refetch:w,createCase:_}=lLe(Object.keys(p).length>0?p:void 0),j=v.filter(C=>{var A,k,D,R;if(!n)return!0;const P=n.toLowerCase();return C.case_number.toLowerCase().includes(P)||C.summary.toLowerCase().includes(P)||((k=(A=C.employee)==null?void 0:A.first_name)==null?void 0:k.toLowerCase().includes(P))||((R=(D=C.employee)==null?void 0:D.last_name)==null?void 0:R.toLowerCase().includes(P))});if(r)return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx("div",{className:"text-muted-foreground",children:"Loading..."})});if(!e&&!t)return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx(G,{className:"max-w-md",children:s.jsxs(X,{className:"py-8 text-center",children:[s.jsx(pu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Access Restricted"}),s.jsx("p",{className:"text-muted-foreground",children:vs("HR Cases")})]})})});const N=C=>{switch(C){case"critical":return"destructive";case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"default"}},S=C=>{switch(C){case"closed":return"outline";case"new":return"default";default:return"secondary"}},E=()=>{const C=["Case Number","Type","Status","Severity","Employee","Summary","Date Reported","Created At"],P=j.map(U=>[U.case_number,U.case_type,U.status,U.severity,U.employee?`${U.employee.first_name} ${U.employee.last_name}`:"",U.summary,U.date_reported,U.created_at]),A=[C,...P].map(U=>U.map(B=>`"${B}"`).join(",")).join(`
`),k=new Blob([A],{type:"text/csv"}),D=URL.createObjectURL(k),R=document.createElement("a");R.href=D,R.download=`hr-cases-${de(new Date,"yyyy-MM-dd")}.csv`,R.click(),URL.revokeObjectURL(D)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"HR Cases"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage incidents, misconduct, grievances, and disciplinary matters"})]}),s.jsxs(I,{onClick:()=>h(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Case"]})]}),x&&s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[s.jsx(Ut,{title:"Total Cases",value:x.total,icon:gt}),s.jsx(Ut,{title:"Open Cases",value:x.openCases,icon:xt}),s.jsx(Ut,{title:"Closed Cases",value:x.closedCases,icon:jt}),s.jsx(Ut,{title:"Safeguarding",value:x.safeguardingCases,icon:ln,className:x.safeguardingCases>0?"border-destructive":""}),s.jsx(Ut,{title:"Active Warnings",value:x.activeWarnings,icon:or})]}),s.jsxs(G,{children:[s.jsx(he,{children:s.jsxs(ge,{className:"text-base flex items-center gap-2",children:[s.jsx(v0,{className:"h-4 w-4"}),"Filters"]})}),s.jsx(X,{children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsxs("div",{className:"relative",children:[s.jsx(un,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{placeholder:"Search cases...",value:n,onChange:C=>a(C.target.value),className:"pl-9"})]})}),s.jsxs(Ie,{value:i,onValueChange:C=>o(C),children:[s.jsx(Re,{className:"w-[150px]",children:s.jsx(Fe,{placeholder:"Status"})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"all",children:"All Statuses"}),s.jsx(Y,{value:"new",children:"New"}),s.jsx(Y,{value:"triaged",children:"Triaged"}),s.jsx(Y,{value:"investigating",children:"Investigating"}),s.jsx(Y,{value:"awaiting_response",children:"Awaiting Response"}),s.jsx(Y,{value:"decision_made",children:"Decision Made"}),s.jsx(Y,{value:"closed",children:"Closed"})]})]}),s.jsxs(Ie,{value:l,onValueChange:C=>c(C),children:[s.jsx(Re,{className:"w-[150px]",children:s.jsx(Fe,{placeholder:"Type"})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"all",children:"All Types"}),s.jsx(Y,{value:"incident",children:"Incident"}),s.jsx(Y,{value:"misconduct",children:"Misconduct"}),s.jsx(Y,{value:"grievance",children:"Grievance"}),s.jsx(Y,{value:"performance",children:"Performance"}),s.jsx(Y,{value:"complaint",children:"Complaint"})]})]}),s.jsxs(Ie,{value:u,onValueChange:C=>d(C),children:[s.jsx(Re,{className:"w-[150px]",children:s.jsx(Fe,{placeholder:"Severity"})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"all",children:"All Severities"}),s.jsx(Y,{value:"low",children:"Low"}),s.jsx(Y,{value:"medium",children:"Medium"}),s.jsx(Y,{value:"high",children:"High"}),s.jsx(Y,{value:"critical",children:"Critical"})]})]}),s.jsxs(I,{variant:"outline",onClick:E,children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})})]}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{className:"text-base",children:"Case Register"}),s.jsxs(Le,{children:[j.length," case",j.length!==1?"s":""," found"]})]}),s.jsx(X,{children:s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Case #"}),s.jsx(oe,{children:"Type"}),s.jsx(oe,{children:"Employee"}),s.jsx(oe,{children:"Summary"}),s.jsx(oe,{children:"Severity"}),s.jsx(oe,{children:"Status"}),s.jsx(oe,{children:"Reported"}),s.jsx(oe,{})]})}),s.jsx(pr,{children:b?s.jsx(ze,{children:s.jsx(te,{colSpan:8,className:"text-center py-8",children:"Loading..."})}):j.length===0?s.jsx(ze,{children:s.jsx(te,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No cases found"})}):j.map(C=>s.jsxs(ze,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>g(C.id),children:[s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:C.case_number}),C.safeguarding_flag&&s.jsx(ln,{className:"h-4 w-4 text-destructive"}),C.confidentiality_level==="restricted"&&s.jsx(pu,{className:"h-4 w-4 text-muted-foreground"})]})}),s.jsx(te,{children:s.jsx(fe,{variant:"outline",children:C.case_type.charAt(0).toUpperCase()+C.case_type.slice(1)})}),s.jsx(te,{children:C.employee?`${C.employee.first_name} ${C.employee.last_name}`:s.jsx("span",{className:"text-muted-foreground",children:""})}),s.jsx(te,{className:"max-w-[200px] truncate",children:C.summary}),s.jsx(te,{children:s.jsx(fe,{variant:N(C.severity),children:C.severity.charAt(0).toUpperCase()+C.severity.slice(1)})}),s.jsx(te,{children:s.jsx(fe,{variant:S(C.status),children:C.status.replace(/_/g," ").replace(/\b\w/g,P=>P.toUpperCase())})}),s.jsx(te,{className:"text-muted-foreground",children:de(new Date(C.date_reported),"dd MMM yyyy")}),s.jsx(te,{children:s.jsx(I,{variant:"ghost",size:"sm",onClick:P=>{P.stopPropagation(),g(C.id)},children:s.jsx(yx,{className:"h-4 w-4"})})})]},C.id))})]})})]}),s.jsx(mLe,{open:f,onOpenChange:h,onSubmit:_,organisationId:kLe}),s.jsx(ELe,{caseId:m,open:!!m,onOpenChange:C=>!C&&g(null),onUpdate:w})]})}function GW(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),{toast:a}=lr(),i=y.useCallback(async()=>{try{n(!0);const{data:u,error:d}=await $.from("document_types").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(d)throw d;t(u||[])}catch(u){a({title:"Error fetching document types",description:u.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async u=>{try{const{data:d,error:f}=await $.from("document_types").insert(u).select().single();if(f)throw f;return t(h=>[...h,d].sort((m,g)=>m.display_order-g.display_order)),a({title:"Document type created"}),d}catch(d){return a({title:"Error creating document type",description:d.message,variant:"destructive"}),null}},l=async(u,d)=>{try{const{data:f,error:h}=await $.from("document_types").update(d).eq("id",u).select().single();if(h)throw h;return t(m=>m.map(g=>g.id===u?f:g).sort((g,p)=>g.display_order-p.display_order)),a({title:"Document type updated"}),f}catch(f){return a({title:"Error updating document type",description:f.message,variant:"destructive"}),null}},c=async u=>{try{const{error:d}=await $.from("document_types").update({is_active:!1}).eq("id",u);if(d)throw d;return t(f=>f.filter(h=>h.id!==u)),a({title:"Document type removed"}),!0}catch(d){return a({title:"Error removing document type",description:d.message,variant:"destructive"}),!1}};return y.useEffect(()=>{i()},[i]),{documentTypes:e,loading:r,fetchDocumentTypes:i,createDocumentType:o,updateDocumentType:l,deleteDocumentType:c}}function YW(e){const[t,r]=y.useState([]),[n,a]=y.useState(!0),{toast:i}=lr(),o=y.useCallback(async()=>{try{a(!0);let f=$.from("employee_documents").select(`
          *,
          document_type:document_types(*)
        `).order("created_at",{ascending:!1});const{data:h,error:m}=await f;if(m)throw m;r(h||[])}catch(f){i({title:"Error fetching documents",description:f.message,variant:"destructive"})}finally{a(!1)}},[e,i]),l=async(f,h,m,g)=>{try{const{data:{user:p}}=await $.auth.getUser();if(!p)throw new Error("Not authenticated");const v=f.name.split(".").pop(),x=`${p.id}/${h}/${Date.now()}.${v}`,{error:b}=await $.storage.from("employee-documents").upload(x,f);if(b)throw b;const{data:{publicUrl:w}}=$.storage.from("employee-documents").getPublicUrl(x),{data:_,error:j}=await $.from("employee_documents").insert({user_id:p.id,document_type_id:h,file_url:w,file_name:f.name,issue_date:m||null,expiry_date:g||null,status:"pending"}).select("*, document_type:document_types(*)").single();if(j)throw j;return await $.from("document_versions").insert({document_id:_.id,version_number:1,file_url:w,file_name:f.name,uploaded_by:p.id}),r(N=>[_,...N]),i({title:"Document uploaded successfully"}),_}catch(p){return i({title:"Error uploading document",description:p.message,variant:"destructive"}),null}},c=async(f,h)=>{try{const{data:{user:m}}=await $.auth.getUser();if(!m)throw new Error("Not authenticated");const g=t.find(N=>N.id===f);if(!g)throw new Error("Document not found");const p=h.name.split(".").pop(),v=`${m.id}/${g.document_type_id}/${Date.now()}.${p}`,{error:x}=await $.storage.from("employee-documents").upload(v,h);if(x)throw x;const{data:{publicUrl:b}}=$.storage.from("employee-documents").getPublicUrl(v),w=g.current_version+1,{data:_,error:j}=await $.from("employee_documents").update({file_url:b,file_name:h.name,current_version:w,status:"pending"}).eq("id",f).select("*, document_type:document_types(*)").single();if(j)throw j;return await $.from("document_versions").insert({document_id:f,version_number:w,file_url:b,file_name:h.name,uploaded_by:m.id}),r(N=>N.map(S=>S.id===f?_:S)),i({title:"Document replaced successfully"}),_}catch(m){return i({title:"Error replacing document",description:m.message,variant:"destructive"}),null}},u=async f=>{try{const{error:h}=await $.from("employee_documents").delete().eq("id",f);if(h)throw h;return r(m=>m.filter(g=>g.id!==f)),i({title:"Document deleted"}),!0}catch(h){return i({title:"Error deleting document",description:h.message,variant:"destructive"}),!1}},d=async(f,h,m)=>{var g;try{const{data:{user:p}}=await $.auth.getUser();if(!p)throw new Error("Not authenticated");const{data:v,error:x}=await $.from("employee_documents").update({status:h}).eq("id",f).select("*, document_type:document_types(*)").single();if(x)throw x;return await $.from("document_reviews").insert({document_id:f,reviewer_id:p.id,reviewer_name:((g=p.user_metadata)==null?void 0:g.display_name)||p.email||"Unknown",reviewer_email:p.email||"",action:h,comments:m}),r(b=>b.map(w=>w.id===f?v:w)),i({title:`Document ${h}`}),v}catch(p){return i({title:"Error reviewing document",description:p.message,variant:"destructive"}),null}};return y.useEffect(()=>{o()},[o]),{documents:t,loading:n,fetchDocuments:o,uploadDocument:l,replaceDocument:c,deleteDocument:u,reviewDocument:d}}function XW(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),{toast:a}=lr(),i=y.useCallback(async()=>{try{n(!0);const{data:d,error:f}=await $.from("courses").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(f)throw f;t(d||[])}catch(d){a({title:"Error fetching courses",description:d.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async d=>{try{const{data:{user:f}}=await $.auth.getUser(),{data:h,error:m}=await $.from("courses").insert({...d,created_by:f==null?void 0:f.id}).select().single();if(m)throw m;return t(g=>[h,...g]),a({title:"Course created"}),h}catch(f){return a({title:"Error creating course",description:f.message,variant:"destructive"}),null}},l=async(d,f)=>{try{const{data:h,error:m}=await $.from("courses").update(f).eq("id",d).select().single();if(m)throw m;return t(g=>g.map(p=>p.id===d?h:p)),a({title:"Course updated"}),h}catch(h){return a({title:"Error updating course",description:h.message,variant:"destructive"}),null}},c=async d=>{try{const{error:f}=await $.from("courses").update({is_active:!1}).eq("id",d);if(f)throw f;return t(h=>h.filter(m=>m.id!==d)),a({title:"Course deleted"}),!0}catch(f){return a({title:"Error deleting course",description:f.message,variant:"destructive"}),!1}},u=async(d,f)=>l(d,{is_published:f});return y.useEffect(()=>{i()},[i]),{courses:e,loading:r,fetchCourses:i,createCourse:o,updateCourse:l,deleteCourse:c,publishCourse:u}}function ALe(e){const[t,r]=y.useState([]),[n,a]=y.useState(!0),{toast:i}=lr(),o=y.useCallback(async()=>{if(!e){a(!1);return}try{a(!0);const{data:d,error:f}=await $.from("course_modules").select("*").eq("course_id",e).order("display_order",{ascending:!0});if(f)throw f;r(d||[])}catch(d){i({title:"Error fetching modules",description:d.message,variant:"destructive"})}finally{a(!1)}},[e,i]),l=async d=>{try{const{data:f,error:h}=await $.from("course_modules").insert(d).select().single();if(h)throw h;return r(m=>[...m,f].sort((g,p)=>g.display_order-p.display_order)),i({title:"Module created"}),f}catch(f){return i({title:"Error creating module",description:f.message,variant:"destructive"}),null}},c=async(d,f)=>{try{const{data:h,error:m}=await $.from("course_modules").update(f).eq("id",d).select().single();if(m)throw m;return r(g=>g.map(p=>p.id===d?h:p).sort((p,v)=>p.display_order-v.display_order)),i({title:"Module updated"}),h}catch(h){return i({title:"Error updating module",description:h.message,variant:"destructive"}),null}},u=async d=>{try{const{error:f}=await $.from("course_modules").delete().eq("id",d);if(f)throw f;return r(h=>h.filter(m=>m.id!==d)),i({title:"Module deleted"}),!0}catch(f){return i({title:"Error deleting module",description:f.message,variant:"destructive"}),!1}};return y.useEffect(()=>{o()},[o]),{modules:t,loading:n,fetchModules:o,createModule:l,updateModule:c,deleteModule:u}}function OLe(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),{toast:a}=lr(),i=y.useCallback(async()=>{try{n(!0);const{data:c,error:u}=await $.from("course_assignments").select(`
          *,
          course:courses(*)
        `).order("created_at",{ascending:!1});if(u)throw u;t(c||[])}catch(c){a({title:"Error fetching assignments",description:c.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async c=>{var u;try{const{data:{user:d}}=await $.auth.getUser(),{data:f,error:h}=await $.from("course_assignments").insert({...c,assigned_by:d==null?void 0:d.id,assigned_by_name:((u=d==null?void 0:d.user_metadata)==null?void 0:u.display_name)||(d==null?void 0:d.email)}).select("*, course:courses(*)").single();if(h)throw h;return t(m=>[f,...m]),a({title:"Assignment created"}),f}catch(d){return a({title:"Error creating assignment",description:d.message,variant:"destructive"}),null}},l=async c=>{try{const{error:u}=await $.from("course_assignments").delete().eq("id",c);if(u)throw u;return t(d=>d.filter(f=>f.id!==c)),a({title:"Assignment deleted"}),!0}catch(u){return a({title:"Error deleting assignment",description:u.message,variant:"destructive"}),!1}};return y.useEffect(()=>{i()},[i]),{assignments:e,loading:r,fetchAssignments:i,createAssignment:o,deleteAssignment:l}}function QW(e){const[t,r]=y.useState([]),[n,a]=y.useState(!0),{toast:i}=lr(),o=y.useCallback(async()=>{try{a(!0);let u=e;if(!u){const{data:{user:h}}=await $.auth.getUser();u=h==null?void 0:h.id}if(!u){a(!1);return}const{data:d,error:f}=await $.from("user_course_assignments").select(`
          *,
          course:courses(*)
        `).eq("user_id",u).order("created_at",{ascending:!1});if(f)throw f;r(d||[])}catch(u){i({title:"Error fetching your training",description:u.message,variant:"destructive"})}finally{a(!1)}},[e,i]),l=async u=>{try{const{data:d,error:f}=await $.from("user_course_assignments").update({status:"in_progress",started_at:new Date().toISOString()}).eq("id",u).select("*, course:courses(*)").single();if(f)throw f;return r(h=>h.map(m=>m.id===u?d:m)),i({title:"Course started"}),d}catch(d){return i({title:"Error starting course",description:d.message,variant:"destructive"}),null}},c=async(u,d)=>{try{const f={progress_percentage:d};d>=100&&(f.status="completed",f.completed_at=new Date().toISOString());const{data:h,error:m}=await $.from("user_course_assignments").update(f).eq("id",u).select("*, course:courses(*)").single();if(m)throw m;return r(g=>g.map(p=>p.id===u?h:p)),h}catch(f){return i({title:"Error updating progress",description:f.message,variant:"destructive"}),null}};return y.useEffect(()=>{o()},[o]),{assignments:t,loading:n,fetchAssignments:o,startCourse:l,updateProgress:c}}function TLe(){const{documents:e,loading:t}=YW(),{documentTypes:r}=GW(),{assignments:n,loading:a}=QW(),[i,o]=y.useState("");y.useEffect(()=>{(async()=>{var A,k;const{data:{user:P}}=await $.auth.getUser();P&&o(((A=P.user_metadata)==null?void 0:A.display_name)||((k=P.email)==null?void 0:k.split("@")[0])||"User")})()},[]);const l=t||a,c=e.filter(C=>C.status==="approved").length,u=e.filter(C=>C.status==="pending").length,d=e.filter(C=>C.status==="expired"||C.expiry_date&&Gm(new Date(C.expiry_date))).length,f=e.filter(C=>{if(!C.expiry_date||C.status==="expired")return!1;const P=Ai(new Date(C.expiry_date),new Date);return P<=30&&P>0}),h=r.filter(C=>C.is_required),m=h.filter(C=>!e.some(P=>P.document_type_id===C.id&&(P.status==="approved"||P.status==="pending"))),g=n.filter(C=>C.status==="completed").length,p=n.filter(C=>C.status==="in_progress").length,v=n.filter(C=>C.status==="assigned").length,x=n.filter(C=>C.status==="completed"||!C.due_date?!1:Gm(new Date(C.due_date))),b=h.length,w=h.filter(C=>e.some(P=>P.document_type_id===C.id&&P.status==="approved"&&(!P.expiry_date||!Gm(new Date(P.expiry_date))))).length,_=b>0?Math.round(w/b*100):100,j=n.length,N=j>0?Math.round(g/j*100):100,S=Math.round((_+N)/2),E=[...m.map(C=>({type:"error",message:`Missing required document: ${C.name}`,link:"/portal/documents"})),...d>0?[{type:"error",message:`${d} document(s) have expired`,link:"/portal/documents"}]:[],...f.map(C=>{var P;return{type:"warning",message:`${((P=C.document_type)==null?void 0:P.name)||"Document"} expires ${de(new Date(C.expiry_date),"dd MMM yyyy")}`,link:"/portal/documents"}}),...x.map(C=>{var P;return{type:"error",message:`Overdue training: ${(P=C.course)==null?void 0:P.title}`,link:"/portal/training"}}),...u>0?[{type:"info",message:`${u} document(s) awaiting review`,link:"/portal/documents"}]:[]].slice(0,5);return l?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx($t,{className:"h-20 w-full"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(C=>s.jsx($t,{className:"h-28"},C))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx($t,{className:"h-64"}),s.jsx($t,{className:"h-64"})]})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",i]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Your self-service portal for documents and training"})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(fe,{variant:S>=80?"default":S>=50?"secondary":"destructive",className:S>=80?"bg-success/10 text-success":"",children:[S,"% Compliant"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Ut,{title:"Documents",value:c,description:`${u} pending review`,icon:Ei,variant:m.length>0||d>0?"warning":"success"}),s.jsx(Ut,{title:"Training Completed",value:g,description:`${v+p} remaining`,icon:_p,variant:x.length>0?"warning":"success"}),s.jsx(Ut,{title:"Expiring Soon",value:f.length,description:"Within 30 days",icon:xt,variant:f.length>0?"warning":"default"}),s.jsx(Ut,{title:"Action Required",value:m.length+x.length+d,description:"Items need attention",icon:or,variant:m.length+x.length+d>0?"warning":"success"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(G,{children:[s.jsx(he,{className:"flex flex-row items-center justify-between pb-2",children:s.jsxs("div",{children:[s.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(fF,{className:"h-5 w-5 text-primary"}),"Priority Alerts"]}),s.jsx(Le,{children:"Items requiring your attention"})]})}),s.jsx(X,{children:E.length>0?s.jsx("div",{className:"space-y-3",children:E.map((C,P)=>s.jsxs(yn,{to:C.link,className:"flex items-start gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors",children:[C.type==="error"?s.jsx(or,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}):C.type==="warning"?s.jsx(uG,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}):s.jsx(xt,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),s.jsx("span",{className:"text-sm flex-1",children:C.message}),s.jsx(qN,{className:"h-4 w-4 text-muted-foreground"})]},P))}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(jt,{className:"h-12 w-12 text-success mb-3"}),s.jsx("p",{className:"font-medium",children:"All caught up!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No urgent items require your attention"})]})})]}),s.jsxs(G,{children:[s.jsxs(he,{className:"pb-2",children:[s.jsx(ge,{className:"text-lg",children:"Compliance Overview"}),s.jsx(Le,{children:"Your current compliance status"})]}),s.jsxs(X,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Document Compliance"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[_,"%"]})]}),s.jsx(pa,{value:_,className:"h-2"}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[w," of ",b," required documents uploaded"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Training Compliance"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[N,"%"]})]}),s.jsx(pa,{value:N,className:"h-2"}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[g," of ",j," assigned training completed"]})]}),s.jsxs("div",{className:"pt-4 flex gap-2",children:[s.jsx(I,{asChild:!0,variant:"outline",className:"flex-1",children:s.jsxs(yn,{to:"/portal/documents",children:[s.jsx(Ei,{className:"h-4 w-4 mr-2"}),"My Documents"]})}),s.jsx(I,{asChild:!0,variant:"outline",className:"flex-1",children:s.jsxs(yn,{to:"/portal/training",children:[s.jsx(_p,{className:"h-4 w-4 mr-2"}),"My Training"]})})]})]})]})]}),n.filter(C=>C.status==="in_progress").length>0&&s.jsxs(G,{children:[s.jsxs(he,{className:"pb-2",children:[s.jsx(ge,{className:"text-lg",children:"Continue Training"}),s.jsx(Le,{children:"Pick up where you left off"})]}),s.jsx(X,{children:s.jsx("div",{className:"space-y-4",children:n.filter(C=>C.status==="in_progress").slice(0,3).map(C=>{var P;return s.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium truncate",children:(P=C.course)==null?void 0:P.title}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(pa,{value:C.progress_percentage,className:"h-1.5 flex-1"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[C.progress_percentage,"%"]})]})]}),s.jsx(I,{asChild:!0,size:"sm",children:s.jsx(yn,{to:`/portal/training/${C.id}`,children:"Resume"})})]},C.id)})})})]})]})}const DLe={pending:{label:"Pending Review",icon:xt,className:"bg-warning/10 text-warning"},approved:{label:"Approved",icon:jt,className:"bg-success/10 text-success"},rejected:{label:"Rejected",icon:An,className:"bg-destructive/10 text-destructive"},expired:{label:"Expired",icon:or,className:"bg-destructive/10 text-destructive"}};function RLe(){var M,T;const{documents:e,loading:t,uploadDocument:r,replaceDocument:n,deleteDocument:a}=YW(),{documentTypes:i,loading:o}=GW(),[l,c]=y.useState(!1),[u,d]=y.useState(""),[f,h]=y.useState(""),[m,g]=y.useState(""),[p,v]=y.useState(!1),[x,b]=y.useState(""),[w,_]=y.useState("all"),[j,N]=y.useState(null),S=y.useRef(null),E=y.useRef(null),C=async()=>{var W,K;const F=(K=(W=S.current)==null?void 0:W.files)==null?void 0:K[0];if(!F||!u)return;v(!0);const Z=await r(F,u,f||void 0,m||void 0);v(!1),Z&&(c(!1),d(""),h(""),g(""),S.current&&(S.current.value=""))},P=async F=>{var W;const Z=(W=F.target.files)==null?void 0:W[0];!Z||!j||(v(!0),await n(j,Z),v(!1),N(null),E.current&&(E.current.value=""))},A=async F=>{confirm("Are you sure you want to delete this document?")&&await a(F)},k=F=>F.status==="approved"&&F.expiry_date&&Gm(new Date(F.expiry_date))?"expired":F.status,D=F=>{if(!F.expiry_date)return null;const Z=Ai(new Date(F.expiry_date),new Date);return Z<0?{text:"Expired",className:"text-destructive"}:Z<=30?{text:`Expires in ${Z} days`,className:"text-warning"}:{text:de(new Date(F.expiry_date),"dd MMM yyyy"),className:"text-muted-foreground"}},R=e.filter(F=>{var V;const Z=F.file_name.toLowerCase().includes(x.toLowerCase())||((V=F.document_type)==null?void 0:V.name.toLowerCase().includes(x.toLowerCase())),W=k(F);return Z&&(w==="all"||W===w)}),U=i.filter(F=>F.is_required),B=e.map(F=>F.document_type_id),L=U.filter(F=>!B.includes(F.id));return t||o?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx($t,{className:"h-10 w-full max-w-md"}),s.jsx($t,{className:"h-96"})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Documents"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Upload and manage your compliance documents"})]}),s.jsxs(I,{onClick:()=>c(!0),className:"gap-2",children:[s.jsx(jo,{className:"h-4 w-4"}),"Upload Document"]})]}),L.length>0&&s.jsx(G,{className:"border-warning bg-warning/5",children:s.jsx(X,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(or,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Missing Required Documents"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Please upload the following: ",L.map(F=>F.name).join(", ")]})]})]})})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(un,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{placeholder:"Search documents...",value:x,onChange:F=>b(F.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:w,onValueChange:_,children:[s.jsxs(Re,{className:"w-[180px]",children:[s.jsx(v0,{className:"h-4 w-4 mr-2"}),s.jsx(Fe,{placeholder:"Filter by status"})]}),s.jsxs(Me,{children:[s.jsx(Y,{value:"all",children:"All Status"}),s.jsx(Y,{value:"pending",children:"Pending"}),s.jsx(Y,{value:"approved",children:"Approved"}),s.jsx(Y,{value:"rejected",children:"Rejected"}),s.jsx(Y,{value:"expired",children:"Expired"})]})]})]}),s.jsx(G,{children:s.jsx(X,{className:"p-0",children:R.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(gt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No documents found"}),s.jsx("p",{className:"text-sm mt-1",children:"Upload your first document to get started"})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Document"}),s.jsx(oe,{children:"Type"}),s.jsx(oe,{children:"Status"}),s.jsx(oe,{children:"Expiry"}),s.jsx(oe,{children:"Version"}),s.jsx(oe,{className:"text-right",children:"Actions"})]})}),s.jsx(pr,{children:R.map(F=>{var be;const Z=k(F),W=DLe[Z],K=D(F),V=F.status==="pending",le=F.status!=="approved"||Z==="expired";return s.jsxs(ze,{children:[s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ei,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium truncate max-w-[200px]",children:F.file_name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uploaded ",de(new Date(F.created_at),"dd MMM yyyy")]})]})]})}),s.jsx(te,{children:s.jsx(fe,{variant:"outline",children:((be=F.document_type)==null?void 0:be.name)||"Unknown"})}),s.jsx(te,{children:s.jsxs(fe,{className:W.className,children:[s.jsx(W.icon,{className:"h-3 w-3 mr-1"}),W.label]})}),s.jsx(te,{children:K?s.jsx("span",{className:`text-sm ${K.className}`,children:K.text}):s.jsx("span",{className:"text-sm text-muted-foreground",children:"No expiry"})}),s.jsx(te,{children:s.jsxs("span",{className:"text-sm",children:["v",F.current_version]})}),s.jsx(te,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-1",children:[s.jsx(I,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx("a",{href:F.file_url,target:"_blank",rel:"noopener noreferrer",children:s.jsx($i,{className:"h-4 w-4"})})}),s.jsx(I,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx("a",{href:F.file_url,download:F.file_name,children:s.jsx(Es,{className:"h-4 w-4"})})}),le&&s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{var ce;N(F.id),(ce=E.current)==null||ce.click()},children:s.jsx(jF,{className:"h-4 w-4"})}),V&&s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>A(F.id),children:s.jsx(Zn,{className:"h-4 w-4 text-destructive"})})]})})]},F.id)})})]})})}),s.jsx("input",{ref:E,type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:P}),s.jsx(Rt,{open:l,onOpenChange:c,children:s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Upload Document"}),s.jsx(Ot,{children:"Upload a new compliance document. Accepted formats: PDF, JPG, PNG, DOC, DOCX"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Document Type *"}),s.jsxs(Ie,{value:u,onValueChange:d,children:[s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select document type"})}),s.jsx(Me,{children:i.map(F=>s.jsxs(Y,{value:F.id,children:[F.name,F.is_required&&s.jsx("span",{className:"text-destructive ml-1",children:"*"})]},F.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Document File *"}),s.jsx(ne,{ref:S,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Issue Date"}),s.jsx(ne,{type:"date",value:f,onChange:F=>h(F.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Expiry Date"}),s.jsx(ne,{type:"date",value:m,onChange:F=>g(F.target.value)})]})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),s.jsx(I,{onClick:C,disabled:!u||!((T=(M=S.current)==null?void 0:M.files)!=null&&T[0])||p,children:p?"Uploading...":"Upload"})]})]})})]})}const MLe={assigned:{label:"Not Started",icon:jE,className:"bg-muted text-muted-foreground"},in_progress:{label:"In Progress",icon:Sp,className:"bg-info/10 text-info"},completed:{label:"Completed",icon:jt,className:"bg-success/10 text-success"},overdue:{label:"Overdue",icon:or,className:"bg-destructive/10 text-destructive"}};function $Le(){const{assignments:e,loading:t,startCourse:r}=QW(),[n,a]=y.useState(""),[i,o]=y.useState("all"),[l,c]=y.useState("all"),u=v=>v.status==="completed"?"completed":v.due_date&&Gm(new Date(v.due_date))?"overdue":v.status,d=v=>{if(!v.due_date||v.status==="completed")return null;const x=Ai(new Date(v.due_date),new Date);return x<0?{text:`${Math.abs(x)} days overdue`,className:"text-destructive"}:x===0?{text:"Due today",className:"text-warning"}:x<=7?{text:`Due in ${x} days`,className:"text-warning"}:{text:`Due ${de(new Date(v.due_date),"dd MMM yyyy")}`,className:"text-muted-foreground"}},f=e.filter(v=>{var j,N,S;const x=((j=v.course)==null?void 0:j.title.toLowerCase().includes(n.toLowerCase()))||((S=(N=v.course)==null?void 0:N.description)==null?void 0:S.toLowerCase().includes(n.toLowerCase())),b=u(v);return x&&(i==="all"||b===i)&&(l==="all"||l==="active"&&(b==="assigned"||b==="in_progress"||b==="overdue")||l==="completed"&&b==="completed")}),h=async v=>{await r(v.id)};if(t)return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx($t,{className:"h-10 w-full max-w-md"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(v=>s.jsx($t,{className:"h-48"},v))})]});const m=e.filter(v=>{const x=u(v);return x==="assigned"||x==="in_progress"||x==="overdue"}).length,g=e.filter(v=>v.status==="completed").length,p=e.filter(v=>u(v)==="overdue").length;return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Training"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete your assigned courses and track your progress"})]}),s.jsx("div",{className:"flex items-center gap-4 text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(fe,{variant:"outline",children:[m," Active"]}),s.jsxs(fe,{className:"bg-success/10 text-success",children:[g," Completed"]}),p>0&&s.jsxs(fe,{className:"bg-destructive/10 text-destructive",children:[p," Overdue"]})]})})]}),s.jsxs(bn,{value:l,onValueChange:c,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs(fn,{children:[s.jsx(Ve,{value:"all",children:"All"}),s.jsx(Ve,{value:"active",children:"Active"}),s.jsx(Ve,{value:"completed",children:"Completed"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(un,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{placeholder:"Search courses...",value:n,onChange:v=>a(v.target.value),className:"pl-10 w-[200px]"})]}),s.jsxs(Ie,{value:i,onValueChange:o,children:[s.jsxs(Re,{className:"w-[150px]",children:[s.jsx(v0,{className:"h-4 w-4 mr-2"}),s.jsx(Fe,{placeholder:"Status"})]}),s.jsxs(Me,{children:[s.jsx(Y,{value:"all",children:"All Status"}),s.jsx(Y,{value:"assigned",children:"Not Started"}),s.jsx(Y,{value:"in_progress",children:"In Progress"}),s.jsx(Y,{value:"completed",children:"Completed"}),s.jsx(Y,{value:"overdue",children:"Overdue"})]})]})]})]}),s.jsx(rt,{value:l,className:"mt-6",children:f.length===0?s.jsx(G,{children:s.jsxs(X,{className:"py-12 text-center",children:[s.jsx(_p,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),s.jsx("p",{className:"text-muted-foreground",children:"No training courses found"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:l==="completed"?"Complete some courses to see them here":"Check back later for new assignments"})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(v=>{const x=u(v),b=MLe[x],w=d(v),_=v.course;return s.jsxs(G,{className:"flex flex-col",children:[s.jsxs(he,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx(ge,{className:"text-base line-clamp-2",children:_==null?void 0:_.title}),s.jsxs(fe,{className:b.className,children:[s.jsx(b.icon,{className:"h-3 w-3 mr-1"}),b.label]})]}),(_==null?void 0:_.description)&&s.jsx(Le,{className:"line-clamp-2",children:_.description})]}),s.jsxs(X,{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1 text-sm",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[v.progress_percentage,"%"]})]}),s.jsx(pa,{value:v.progress_percentage,className:"h-2"})]}),s.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[(_==null?void 0:_.estimated_duration_minutes)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pG,{className:"h-4 w-4"}),s.jsxs("span",{children:[_.estimated_duration_minutes," min estimated"]})]}),w&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vt,{className:"h-4 w-4"}),s.jsx("span",{className:w.className,children:w.text})]}),v.completed_at&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jt,{className:"h-4 w-4 text-success"}),s.jsxs("span",{children:["Completed ",de(new Date(v.completed_at),"dd MMM yyyy")]})]})]}),s.jsx("div",{className:"mt-auto",children:x==="assigned"?s.jsxs(I,{className:"w-full",onClick:()=>h(v),children:[s.jsx(Sp,{className:"h-4 w-4 mr-2"}),"Start Course"]}):x==="in_progress"||x==="overdue"?s.jsx(I,{asChild:!0,className:"w-full",children:s.jsxs(yn,{to:`/portal/training/${v.id}`,children:[s.jsx(Sp,{className:"h-4 w-4 mr-2"}),"Continue"]})}):s.jsx(I,{variant:"outline",asChild:!0,className:"w-full",children:s.jsx(yn,{to:`/portal/training/${v.id}`,children:"View Certificate"})})})]})]},v.id)})})})]})]})}function ILe(){var A;const[e,t]=y.useState(!0),[r,n]=y.useState(!1),[a,i]=y.useState(null),[o,l]=y.useState(null),[c,u]=y.useState(!1),[d,f]=y.useState({}),[h,m]=y.useState(!1),[g,p]=y.useState(""),[v,x]=y.useState(""),[b,w]=y.useState("Australia/Sydney"),[_,j]=y.useState(!1),{addOrganisation:N}=KW(),{toast:S}=lr();y.useEffect(()=>{E()},[]);const E=async()=>{var k,D,R,U,B,L,M,T,F,Z,W,K;try{const{data:{user:V}}=await $.auth.getUser();if(!V)return;const{data:le}=await $.from("profiles").select("*").eq("user_id",V.id).maybeSingle(),be={email:V.email||"",display_name:(le==null?void 0:le.display_name)||((k=V.user_metadata)==null?void 0:k.display_name)||((D=V.email)==null?void 0:D.split("@")[0])||"",avatar_url:(le==null?void 0:le.avatar_url)||((R=V.user_metadata)==null?void 0:R.avatar_url),phone:(U=V.user_metadata)==null?void 0:U.phone,address:(B=V.user_metadata)==null?void 0:B.address,emergency_contact_name:(L=V.user_metadata)==null?void 0:L.emergency_contact_name,emergency_contact_phone:(M=V.user_metadata)==null?void 0:M.emergency_contact_phone,emergency_contact_relationship:(T=V.user_metadata)==null?void 0:T.emergency_contact_relationship,department:(F=V.user_metadata)==null?void 0:F.department,position:(Z=V.user_metadata)==null?void 0:Z.position,start_date:(W=V.user_metadata)==null?void 0:W.start_date,employee_id:(K=V.user_metadata)==null?void 0:K.employee_id},{data:ce,error:Pe}=await $.rpc("get_user_organisation_id",{_user_id:V.id});if(!Pe&&ce){const{data:ie}=await $.from("organisations").select("id, legal_name, trading_name, timezone, status, logo_url").eq("id",ce).maybeSingle();ie&&l(ie)}i(be),f(be)}catch(V){S({title:"Error loading profile",description:V.message,variant:"destructive"})}finally{t(!1)}},C=async()=>{try{n(!0);const{data:{user:k}}=await $.auth.getUser();if(!k)throw new Error("Not authenticated");await $.from("profiles").update({display_name:d.display_name}).eq("user_id",k.id),await $.auth.updateUser({data:{display_name:d.display_name,phone:d.phone,address:d.address,emergency_contact_name:d.emergency_contact_name,emergency_contact_phone:d.emergency_contact_phone,emergency_contact_relationship:d.emergency_contact_relationship}}),i({...a,...d}),u(!1),S({title:"Profile updated successfully"})}catch(k){S({title:"Error saving profile",description:k.message,variant:"destructive"})}finally{n(!1)}},P=async()=>{if(!g.trim()){S({title:"Missing organisation name",description:"Please enter a legal name to continue.",variant:"destructive"});return}j(!0);const k=await N({legal_name:g.trim(),trading_name:v.trim()||null,timezone:b.trim()||null});if(!k.success){S({title:"Error",description:"Failed to add organisation. Please try again.",variant:"destructive"}),j(!1);return}l({id:k.data.id,legal_name:k.data.legal_name,trading_name:k.data.trading_name??null,timezone:k.data.timezone??null,status:k.data.status??null,logo_url:k.data.logo_url??null}),m(!1),j(!1),S({title:"Organisation added"})};return e?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx($t,{className:"h-32 w-full"}),s.jsx($t,{className:"h-64 w-full"}),s.jsx($t,{className:"h-48 w-full"})]}):a?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Profile"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"View and manage your personal information"})]}),c?s.jsxs("div",{className:"flex gap-2",children:[s.jsx(I,{variant:"outline",onClick:()=>{f(a),u(!1)},children:"Cancel"}),s.jsxs(I,{onClick:C,disabled:r,children:[s.jsx(NF,{className:"h-4 w-4 mr-2"}),r?"Saving...":"Save Changes"]})]}):s.jsx(I,{onClick:()=>u(!0),children:"Edit Profile"})]}),s.jsx(G,{children:s.jsx(X,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs(Or,{className:"h-20 w-20",children:[s.jsx(qg,{src:a.avatar_url}),s.jsx(Tr,{className:"text-xl",children:((A=a.display_name)==null?void 0:A.split(" ").map(k=>k[0]).join(""))||"U"})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:a.display_name}),s.jsx("p",{className:"text-muted-foreground",children:a.email}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.position&&s.jsx(fe,{variant:"outline",children:a.position}),a.department&&s.jsx(fe,{variant:"secondary",children:a.department})]})]})]})})}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"h-5 w-5"}),"Personal Information"]}),s.jsx(Le,{children:"Your contact details and personal info"})]}),s.jsx(X,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Display Name"}),c?s.jsx(ne,{value:d.display_name||"",onChange:k=>f({...d,display_name:k.target.value})}):s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(Bn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.display_name})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Email"}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(Hl,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.email}),s.jsx(fe,{variant:"outline",className:"ml-auto text-xs",children:"Read-only"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Phone"}),c?s.jsx(ne,{value:d.phone||"",onChange:k=>f({...d,phone:k.target.value}),placeholder:"Enter phone number"}):s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(tu,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.phone||"Not provided"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Address"}),c?s.jsx(ne,{value:d.address||"",onChange:k=>f({...d,address:k.target.value}),placeholder:"Enter address"}):s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(fG,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.address||"Not provided"})]})]})]})})]}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"flex items-center gap-2",children:[s.jsx(hu,{className:"h-5 w-5"}),"Emergency Contact"]}),s.jsx(Le,{children:"Contact in case of emergency"})]}),s.jsx(X,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Contact Name"}),c?s.jsx(ne,{value:d.emergency_contact_name||"",onChange:k=>f({...d,emergency_contact_name:k.target.value}),placeholder:"Full name"}):s.jsx("div",{className:"p-2 bg-muted/50 rounded-md",children:a.emergency_contact_name||"Not provided"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Phone Number"}),c?s.jsx(ne,{value:d.emergency_contact_phone||"",onChange:k=>f({...d,emergency_contact_phone:k.target.value}),placeholder:"Phone number"}):s.jsx("div",{className:"p-2 bg-muted/50 rounded-md",children:a.emergency_contact_phone||"Not provided"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Relationship"}),c?s.jsx(ne,{value:d.emergency_contact_relationship||"",onChange:k=>f({...d,emergency_contact_relationship:k.target.value}),placeholder:"e.g., Spouse, Parent"}):s.jsx("div",{className:"p-2 bg-muted/50 rounded-md",children:a.emergency_contact_relationship||"Not provided"})]})]})})]}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"flex items-center gap-2",children:[s.jsx(My,{className:"h-5 w-5"}),"Organisation Information"]}),s.jsx(Le,{children:"Your organisation details (read-only)"})]}),s.jsx(X,{className:"space-y-4",children:o?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Legal Name"}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(My,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:o.legal_name})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Trading Name"}),s.jsx("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:s.jsx("span",{children:o.trading_name||"Not available"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Timezone"}),s.jsx("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:s.jsx("span",{children:o.timezone||"Not available"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Status"}),s.jsx("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:s.jsx("span",{className:"capitalize",children:o.status||"Not available"})})]})]}):h?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Legal Name"}),s.jsx(ne,{value:g,onChange:k=>p(k.target.value),placeholder:"Enter legal name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Trading Name"}),s.jsx(ne,{value:v,onChange:k=>x(k.target.value),placeholder:"Enter trading name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Timezone"}),s.jsx(ne,{value:b,onChange:k=>w(k.target.value),placeholder:"e.g., Australia/Sydney"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(I,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),s.jsx(I,{onClick:P,disabled:_,children:_?"Saving...":"Save Organisation"})]})]}):s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"No organisation is linked to your profile yet."}),s.jsx("div",{children:s.jsx(I,{onClick:()=>m(!0),children:"Add Organisation"})})]})})]}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"flex items-center gap-2",children:[s.jsx(ho,{className:"h-5 w-5"}),"Employment Information"]}),s.jsx(Le,{children:"Your role and employment details (read-only)"})]}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Employee ID"}),s.jsx("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:s.jsx("span",{children:a.employee_id||"Not assigned"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Position"}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(ho,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.position||"Not assigned"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Department"}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(My,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.department||"Not assigned"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Start Date"}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.start_date?de(new Date(a.start_date),"dd MMMM yyyy"):"Not provided"})]})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Employment details are managed by HR. Contact your manager to request changes."})]})]})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(hu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{children:"Unable to load profile"})]})}function LLe(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),{toast:a}=lr(),i=y.useCallback(async()=>{try{n(!0);const{data:{user:o}}=await $.auth.getUser();if(!(o!=null&&o.email)){n(!1);return}const{data:l,error:c}=await $.from("performance_reviews").select("*").eq("employee_email",o.email).order("created_at",{ascending:!1});if(c)throw c;t(l||[])}catch(o){a({title:"Error fetching reviews",description:o.message,variant:"destructive"})}finally{n(!1)}},[a]);return y.useEffect(()=>{i()},[i]),{reviews:e,loading:r,refetch:i}}function ZW(e){const[t,r]=y.useState(null),[n,a]=y.useState([]),[i,o]=y.useState([]),[l,c]=y.useState(null),[u,d]=y.useState(!0),{toast:f}=lr(),h=y.useCallback(async()=>{if(!e){d(!1);return}try{d(!0);const{data:{user:m}}=await $.auth.getUser();if(!(m!=null&&m.email)){d(!1);return}const{data:g,error:p}=await $.from("performance_reviews").select("*").eq("id",e).maybeSingle();if(p)throw p;if(r(g),!g){d(!1);return}const[v,x,b]=await Promise.all([$.from("review_goals").select("*").eq("review_id",e).order("created_at",{ascending:!0}),$.from("competency_ratings").select("*, competency:competencies(*)").eq("review_id",e),$.from("review_feedback").select("*").eq("review_id",e).eq("responder_email",m.email).eq("feedback_type","self").maybeSingle()]);if(v.error)throw v.error;if(x.error)throw x.error;if(b.error)throw b.error;a(v.data||[]),o(x.data||[]);const w=b.data?{...b.data,status:b.data.status??"pending",is_anonymous:b.data.is_anonymous??!1}:null;c(w)}catch(m){f({title:"Error fetching review details",description:m.message,variant:"destructive"})}finally{d(!1)}},[e,f]);return y.useEffect(()=>{h()},[h]),{review:t,goals:n,ratings:i,selfAssessment:l,loading:u,refetch:h}}function FLe(e){const{toast:t}=lr(),[r,n]=y.useState(!1);return{submitSelfAssessment:async i=>{var o;if(!e)return null;try{n(!0);const{data:{user:l}}=await $.auth.getUser();if(!(l!=null&&l.email))throw new Error("Not authenticated");const{data:c}=await $.from("review_feedback").select("id").eq("review_id",e).eq("responder_email",l.email).eq("feedback_type","self").maybeSingle();if(c){const{data:u,error:d}=await $.from("review_feedback").update({overall_rating:i.overall_rating,strengths:i.strengths,areas_for_improvement:i.areas_for_improvement,additional_comments:i.additional_comments,status:"submitted",submitted_at:new Date().toISOString()}).eq("id",c.id).select().single();if(d)throw d;return t({title:"Self-assessment updated successfully"}),u}else{const u=((o=l.user_metadata)==null?void 0:o.display_name)||l.email.split("@")[0],{data:d,error:f}=await $.from("review_feedback").insert({review_id:e,feedback_type:"self",responder_name:u,responder_email:l.email,relationship_to_employee:"Self",overall_rating:i.overall_rating,strengths:i.strengths,areas_for_improvement:i.areas_for_improvement,additional_comments:i.additional_comments,is_anonymous:!1,status:"submitted",submitted_at:new Date().toISOString()}).select().single();if(f)throw f;return t({title:"Self-assessment submitted successfully"}),{...d,status:(d==null?void 0:d.status)??"submitted",is_anonymous:(d==null?void 0:d.is_anonymous)??!1}}}catch(l){return t({title:"Error submitting self-assessment",description:l.message,variant:"destructive"}),null}finally{n(!1)}},submitting:r}}const n4={draft:{label:"Draft",color:"bg-muted text-muted-foreground"},in_progress:{label:"In Progress",color:"bg-info/10 text-info"},pending_approval:{label:"Pending Approval",color:"bg-warning/10 text-warning"},completed:{label:"Completed",color:"bg-success/10 text-success"}},s4={not_started:{label:"Not Started",color:"bg-muted"},in_progress:{label:"In Progress",color:"bg-info"},completed:{label:"Completed",color:"bg-success"},deferred:{label:"Deferred",color:"bg-warning"}};function ULe({review:e,open:t,onOpenChange:r,onStartSelfAssessment:n}){const{goals:a,ratings:i,selfAssessment:o,loading:l}=ZW(e.id),c=n4[e.status]||n4.draft;return s.jsx(Do,{open:t,onOpenChange:r,children:s.jsxs(Li,{className:"w-full sm:max-w-xl overflow-y-auto",children:[s.jsxs(Fi,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ui,{className:"capitalize",children:[e.review_type," Review"]}),s.jsx(fe,{className:c.color,children:c.label})]}),s.jsxs(Ro,{children:["Review period: ",de(new Date(e.review_period_start),"MMM d, yyyy")," - ",de(new Date(e.review_period_end),"MMM d, yyyy")]})]}),l?s.jsxs("div",{className:"space-y-4 mt-6",children:[s.jsx($t,{className:"h-24"}),s.jsx($t,{className:"h-32"}),s.jsx($t,{className:"h-32"})]}):s.jsxs("div",{className:"space-y-6 mt-6",children:[s.jsxs(G,{children:[s.jsx(he,{className:"pb-3",children:s.jsxs(ge,{className:"text-base flex items-center gap-2",children:[s.jsx(Bn,{className:"h-4 w-4"}),"Review Overview"]})}),s.jsxs(X,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Reviewer"}),s.jsx("p",{className:"font-medium",children:e.reviewer_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Position"}),s.jsx("p",{className:"font-medium",children:e.employee_position||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Department"}),s.jsx("p",{className:"font-medium",children:e.employee_department||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Created"}),s.jsx("p",{className:"font-medium",children:de(new Date(e.created_at),"MMM d, yyyy")})]})]}),e.overall_rating&&s.jsxs("div",{className:"flex items-center gap-3 pt-3 border-t",children:[s.jsxs("div",{className:"flex items-center gap-1 text-warning",children:[s.jsx(Ha,{className:"h-6 w-6 fill-current"}),s.jsx("span",{className:"text-2xl font-bold",children:e.overall_rating.toFixed(1)})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"/ 5.0 Overall Rating"})]})]})]}),s.jsxs(G,{children:[s.jsx(he,{className:"pb-3",children:s.jsxs(ge,{className:"text-base flex items-center gap-2",children:[s.jsx(Ig,{className:"h-4 w-4"}),"Self-Assessment"]})}),s.jsx(X,{children:o?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-success",children:[s.jsx(jt,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Submitted"}),o.submitted_at&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:["on ",de(new Date(o.submitted_at),"MMM d, yyyy")]})]}),o.overall_rating&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ha,{className:"h-4 w-4 text-warning fill-current"}),s.jsxs("span",{children:["Self-Rating: ",o.overall_rating.toFixed(1),"/5"]})]}),o.strengths&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Strengths"}),s.jsx("p",{className:"text-sm",children:o.strengths})]}),o.areas_for_improvement&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Areas for Improvement"}),s.jsx("p",{className:"text-sm",children:o.areas_for_improvement})]})]}):s.jsxs("div",{className:"flex flex-col items-center py-4 text-center",children:[s.jsx(hu,{className:"h-8 w-8 text-warning mb-2"}),s.jsx("p",{className:"font-medium",children:"Self-assessment not submitted"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Share your perspective on your performance"}),e.status!=="completed"&&n&&s.jsx(I,{onClick:n,children:"Start Self-Assessment"})]})})]}),a.length>0&&s.jsxs(G,{children:[s.jsx(he,{className:"pb-3",children:s.jsxs(ge,{className:"text-base flex items-center gap-2",children:[s.jsx(Ks,{className:"h-4 w-4"}),"Goals (",a.length,")"]})}),s.jsx(X,{className:"space-y-4",children:a.map(u=>{const d=s4[u.status]||s4.not_started;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:u.title}),u.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:u.description})]}),s.jsx(fe,{variant:"outline",className:"shrink-0",children:d.label})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pa,{value:u.progress_percentage,className:"h-2 flex-1"}),s.jsxs("span",{className:"text-xs text-muted-foreground w-10",children:[u.progress_percentage,"%"]})]}),u.target_date&&s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Vt,{className:"h-3 w-3"}),"Target: ",de(new Date(u.target_date),"MMM d, yyyy")]})]},u.id)})})]}),i.length>0&&s.jsxs(G,{children:[s.jsx(he,{className:"pb-3",children:s.jsxs(ge,{className:"text-base flex items-center gap-2",children:[s.jsx(Gs,{className:"h-4 w-4"}),"Competency Ratings"]})}),s.jsx(X,{className:"space-y-4",children:i.map(u=>{var d,f;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"font-medium",children:((d=u.competency)==null?void 0:d.name)||"Unknown Competency"}),u.rating&&s.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(h=>s.jsx(Ha,{className:`h-4 w-4 ${h<=u.rating?"text-warning fill-current":"text-muted"}`},h))})]}),((f=u.competency)==null?void 0:f.description)&&s.jsx("p",{className:"text-xs text-muted-foreground",children:u.competency.description}),u.comments&&s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:u.comments})]},u.id)})})]}),e.status==="completed"&&s.jsxs(G,{children:[s.jsx(he,{className:"pb-3",children:s.jsx(ge,{className:"text-base",children:"Manager Feedback"})}),s.jsxs(X,{className:"space-y-4",children:[e.overall_feedback&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Overall Feedback"}),s.jsx("p",{className:"text-sm",children:e.overall_feedback})]}),e.strengths&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Strengths"}),s.jsx("p",{className:"text-sm",children:e.strengths})]}),e.areas_for_improvement&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Areas for Improvement"}),s.jsx("p",{className:"text-sm",children:e.areas_for_improvement})]}),e.development_plan&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Development Plan"}),s.jsx("p",{className:"text-sm",children:e.development_plan})]})]})]}),e.employee_comments&&s.jsxs(G,{children:[s.jsx(he,{className:"pb-3",children:s.jsx(ge,{className:"text-base",children:"Your Comments"})}),s.jsx(X,{children:s.jsx("p",{className:"text-sm",children:e.employee_comments})})]})]})]})})}function BLe({review:e,open:t,onOpenChange:r}){const{selfAssessment:n,refetch:a}=ZW(e.id),{submitSelfAssessment:i,submitting:o}=FLe(e.id),[l,c]=y.useState(0),[u,d]=y.useState(0),[f,h]=y.useState(""),[m,g]=y.useState(""),[p,v]=y.useState("");y.useEffect(()=>{n?(c(n.overall_rating||0),h(n.strengths||""),g(n.areas_for_improvement||""),v(n.additional_comments||"")):(c(0),h(""),g(""),v(""))},[n,t]);const x=async()=>{if(l===0||!f.trim()||!m.trim())return;await i({overall_rating:l,strengths:f.trim(),areas_for_improvement:m.trim(),additional_comments:p.trim()||void 0})&&(a(),r(!1))},b=l>0&&f.trim().length>0&&m.trim().length>0;return s.jsx(Rt,{open:t,onOpenChange:r,children:s.jsxs(kt,{className:"sm:max-w-lg",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Self-Assessment"}),s.jsx(Ot,{children:"Reflect on your performance during this review period. Your input helps provide a complete picture of your achievements and growth areas."})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Overall Self-Rating *"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"How would you rate your overall performance?"}),s.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(w=>s.jsx("button",{type:"button",onClick:()=>c(w),onMouseEnter:()=>d(w),onMouseLeave:()=>d(0),className:"p-1 transition-transform hover:scale-110",children:s.jsx(Ha,{className:`h-8 w-8 transition-colors ${w<=(u||l)?"text-warning fill-current":"text-muted-foreground"}`})},w)),s.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:l>0?`${l}/5`:"Select a rating"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"strengths",children:"Key Strengths *"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"What do you consider your main achievements and strengths during this period?"}),s.jsx(wt,{id:"strengths",value:f,onChange:w=>h(w.target.value),placeholder:"Describe your key accomplishments and areas where you excelled...",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"improvements",children:"Areas for Improvement *"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"What areas would you like to develop or improve?"}),s.jsx(wt,{id:"improvements",value:m,onChange:w=>g(w.target.value),placeholder:"Describe areas where you'd like to grow or challenges you faced...",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"comments",children:"Additional Comments (Optional)"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Any other thoughts you'd like to share with your reviewer?"}),s.jsx(wt,{id:"comments",value:p,onChange:w=>v(w.target.value),placeholder:"Additional context, goals for next period, or feedback...",rows:3})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsxs(I,{onClick:x,disabled:!b||o,children:[o&&s.jsx(We,{className:"h-4 w-4 mr-2 animate-spin"}),n?"Update Assessment":"Submit Assessment"]})]})]})})}const a4={draft:{label:"Draft",variant:"secondary",icon:gt},in_progress:{label:"In Progress",variant:"default",icon:xt},pending_approval:{label:"Pending Approval",variant:"outline",icon:xt},completed:{label:"Completed",variant:"default",icon:jt}},zLe={performance:"Performance Review",annual:"Annual Review",probation:"Probation Review"};function VLe(){const{reviews:e,loading:t}=LLe(),[r,n]=y.useState(null),[a,i]=y.useState(!1),[o,l]=y.useState(!1),[c,u]=y.useState(null),d=e.filter(g=>g.status!=="completed"),f=e.filter(g=>g.status==="completed"),h=g=>{n(g),i(!0)},m=g=>{u(g),l(!0)};return t?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx($t,{className:"h-20 w-full"}),s.jsx("div",{className:"grid gap-4",children:[1,2,3].map(g=>s.jsx($t,{className:"h-32"},g))})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Performance Reviews"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"View your performance reviews and submit self-assessments"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsx(G,{children:s.jsxs(X,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:s.jsx(mu,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:e.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Reviews"})]})]})}),s.jsx(G,{children:s.jsxs(X,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-info/10",children:s.jsx(xt,{className:"h-5 w-5 text-info"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:d.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"})]})]})}),s.jsx(G,{children:s.jsxs(X,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-success/10",children:s.jsx(jt,{className:"h-5 w-5 text-success"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:f.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]})]})})]}),s.jsxs(bn,{defaultValue:"active",className:"space-y-4",children:[s.jsxs(fn,{children:[s.jsxs(Ve,{value:"active",className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-4 w-4"}),"Active (",d.length,")"]}),s.jsxs(Ve,{value:"completed",className:"flex items-center gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Completed (",f.length,")"]})]}),s.jsx(rt,{value:"active",className:"space-y-4",children:d.length===0?s.jsx(G,{children:s.jsxs(X,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(mu,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-semibold text-lg",children:"No Active Reviews"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"You don't have any performance reviews in progress"})]})}):d.map(g=>s.jsx(i4,{review:g,onViewDetails:h,onStartSelfAssessment:m},g.id))}),s.jsx(rt,{value:"completed",className:"space-y-4",children:f.length===0?s.jsx(G,{children:s.jsxs(X,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(jt,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-semibold text-lg",children:"No Completed Reviews"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Your completed performance reviews will appear here"})]})}):f.map(g=>s.jsx(i4,{review:g,onViewDetails:h,onStartSelfAssessment:m},g.id))})]}),r&&s.jsx(ULe,{review:r,open:a,onOpenChange:i,onStartSelfAssessment:()=>{i(!1),m(r)}}),c&&s.jsx(BLe,{review:c,open:o,onOpenChange:l})]})}function i4({review:e,onViewDetails:t,onStartSelfAssessment:r}){const n=a4[e.status]||a4.draft,a=n.icon;return s.jsx(G,{className:"hover:shadow-md transition-shadow",children:s.jsx(X,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold",children:zLe[e.review_type]||e.review_type}),s.jsxs(fe,{variant:n.variant,className:"flex items-center gap-1",children:[s.jsx(a,{className:"h-3 w-3"}),n.label]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[de(new Date(e.review_period_start),"MMM d, yyyy")," - ",de(new Date(e.review_period_end),"MMM d, yyyy")]})]}),e.overall_rating&&s.jsxs("div",{className:"flex items-center gap-1 text-warning",children:[s.jsx(Ha,{className:"h-5 w-5 fill-current"}),s.jsx("span",{className:"font-semibold",children:e.overall_rating.toFixed(1)})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Bn,{className:"h-4 w-4"}),s.jsxs("span",{children:["Reviewer: ",e.reviewer_name]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Vt,{className:"h-4 w-4"}),s.jsxs("span",{children:["Created: ",de(new Date(e.created_at),"MMM d, yyyy")]})]})]}),e.overall_feedback&&s.jsx("p",{className:"text-sm line-clamp-2",children:e.overall_feedback})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[e.status!=="completed"&&s.jsxs(I,{variant:"outline",onClick:()=>r(e),children:[s.jsx(Ig,{className:"h-4 w-4 mr-2"}),"Self-Assessment"]}),s.jsxs(I,{onClick:()=>t(e),children:["View Details",s.jsx(Oo,{className:"h-4 w-4 ml-2"})]})]})]})})})}function K_(e){return!e||!Array.isArray(e)?[]:e.map(t=>typeof t=="object"&&t!==null&&!Array.isArray(t)?{id:String(t.id||""),title:String(t.title||""),completed:!!t.completed,completed_at:t.completed_at?String(t.completed_at):void 0}:{id:"",title:"",completed:!1})}function o4(e){return e.map(t=>({id:t.id,title:t.title,completed:t.completed,completed_at:t.completed_at||null}))}function qLe(){const[e,t]=y.useState([]),[r,n]=y.useState(!0),{toast:a}=lr(),i=y.useCallback(async()=>{try{n(!0);const{data:{user:d}}=await $.auth.getUser();if(!d)return;const{data:f,error:h}=await $.from("employee_goals").select("*").eq("user_id",d.id).order("created_at",{ascending:!1});if(h)throw h;t((f||[]).map(m=>({...m,milestones:K_(m.milestones),status:m.status,priority:m.priority})))}catch(d){console.error("Error fetching goals:",d),a({title:"Error",description:"Failed to load goals",variant:"destructive"})}finally{n(!1)}},[a]);y.useEffect(()=>{i()},[i]);const o=async d=>{try{const{data:{user:f}}=await $.auth.getUser();if(!f)throw new Error("Not authenticated");const{data:h,error:m}=await $.from("employee_goals").insert({user_id:f.id,title:d.title,description:d.description||null,category:d.category||"professional",target_date:d.target_date||null,priority:d.priority||"medium",milestones:o4(d.milestones||[])}).select().single();if(m)throw m;const g={...h,milestones:K_(h.milestones),status:h.status,priority:h.priority};return t(p=>[g,...p]),a({title:"Goal Created",description:"Your development goal has been created successfully."}),g}catch(f){throw console.error("Error creating goal:",f),a({title:"Error",description:"Failed to create goal",variant:"destructive"}),f}},l=async(d,f)=>{try{const h={...f};f.milestones&&(h.milestones=o4(f.milestones));const{data:m,error:g}=await $.from("employee_goals").update(h).eq("id",d).select().single();if(g)throw g;const p={...m,milestones:K_(m.milestones),status:m.status,priority:m.priority};return t(v=>v.map(x=>x.id===d?p:x)),a({title:"Goal Updated",description:"Your goal has been updated successfully."}),p}catch(h){throw console.error("Error updating goal:",h),a({title:"Error",description:"Failed to update goal",variant:"destructive"}),h}};return{goals:e,loading:r,createGoal:o,updateGoal:l,deleteGoal:async d=>{try{const{error:f}=await $.from("employee_goals").delete().eq("id",d);if(f)throw f;t(h=>h.filter(m=>m.id!==d)),a({title:"Goal Deleted",description:"Your goal has been deleted."})}catch(f){throw console.error("Error deleting goal:",f),a({title:"Error",description:"Failed to delete goal",variant:"destructive"}),f}},toggleMilestone:async(d,f)=>{const h=e.find(v=>v.id===d);if(!h)return;const m=h.milestones.map(v=>v.id===f?{...v,completed:!v.completed,completed_at:v.completed?void 0:new Date().toISOString()}:v),g=m.filter(v=>v.completed).length,p=m.length>0?Math.round(g/m.length*100):h.progress_percentage;await l(d,{milestones:m,progress_percentage:p,status:p===100?"completed":p>0?"in_progress":"not_started"})},refetch:i}}function WLe({open:e,onOpenChange:t,onCreateGoal:r}){const[n,a]=y.useState(!1),[i,o]=y.useState(""),[l,c]=y.useState(""),[u,d]=y.useState("professional"),[f,h]=y.useState("medium"),[m,g]=y.useState(""),[p,v]=y.useState([]),[x,b]=y.useState(""),w=()=>{o(""),c(""),d("professional"),h("medium"),g(""),v([]),b("")},_=()=>{x.trim()&&(v(S=>[...S,{id:crypto.randomUUID(),title:x.trim(),completed:!1}]),b(""))},j=S=>{v(E=>E.filter(C=>C.id!==S))},N=async S=>{if(S.preventDefault(),!!i.trim()){a(!0);try{await r({title:i.trim(),description:l.trim()||void 0,category:u,priority:f,target_date:m||void 0,milestones:p}),w(),t(!1)}finally{a(!1)}}};return s.jsx(Rt,{open:e,onOpenChange:t,children:s.jsxs(kt,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Create Development Goal"}),s.jsx(Ot,{children:"Set a new personal or professional development goal to track your growth."})]}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"title",children:"Goal Title *"}),s.jsx(ne,{id:"title",value:i,onChange:S=>o(S.target.value),placeholder:"e.g., Complete AWS Certification",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"description",children:"Description"}),s.jsx(wt,{id:"description",value:l,onChange:S=>c(S.target.value),placeholder:"Describe your goal and why it's important...",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"category",children:"Category"}),s.jsxs(Ie,{value:u,onValueChange:d,children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"professional",children:"Professional Development"}),s.jsx(Y,{value:"technical",children:"Technical Skills"}),s.jsx(Y,{value:"leadership",children:"Leadership"}),s.jsx(Y,{value:"personal",children:"Personal Growth"}),s.jsx(Y,{value:"certification",children:"Certification"}),s.jsx(Y,{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"priority",children:"Priority"}),s.jsxs(Ie,{value:f,onValueChange:S=>h(S),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"low",children:"Low"}),s.jsx(Y,{value:"medium",children:"Medium"}),s.jsx(Y,{value:"high",children:"High"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"targetDate",children:"Target Date"}),s.jsx(ne,{id:"targetDate",type:"date",value:m,onChange:S=>g(S.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Milestones (Optional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{value:x,onChange:S=>b(S.target.value),placeholder:"Add a milestone...",onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),_())}}),s.jsx(I,{type:"button",variant:"outline",size:"icon",onClick:_,children:s.jsx(yt,{className:"h-4 w-4"})})]}),p.length>0&&s.jsx("div",{className:"space-y-2 mt-2",children:p.map((S,E)=>s.jsxs("div",{className:"flex items-center gap-2 bg-muted p-2 rounded-md",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:[E+1,"."]}),s.jsx("span",{className:"flex-1 text-sm",children:S.title}),s.jsx(I,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>j(S.id),children:s.jsx(Fn,{className:"h-3 w-3"})})]},S.id))})]}),s.jsxs(ar,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:n||!i.trim(),children:n?"Creating...":"Create Goal"})]})]})]})})}var JW=["PageUp","PageDown"],eH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],tH={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Bh="Slider",[bC,HLe,KLe]=Mg(Bh),[rH,n3e]=Qr(Bh,[KLe]),[GLe,Yw]=rH(Bh),nH=y.forwardRef((e,t)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:m=!1,form:g,...p}=e,v=y.useRef(new Set),x=y.useRef(0),w=o==="horizontal"?YLe:XLe,[_=[],j]=Hs({prop:d,defaultProp:u,onChange:A=>{var D;(D=[...v.current][x.current])==null||D.focus(),f(A)}}),N=y.useRef(_);function S(A){const k=tFe(_,A);P(A,k)}function E(A){P(A,x.current)}function C(){const A=N.current[x.current];_[x.current]!==A&&h(_)}function P(A,k,{commit:D}={commit:!1}){const R=aFe(i),U=iFe(Math.round((A-n)/i)*i+n,R),B=zp(U,[n,a]);j((L=[])=>{const M=JLe(L,B,k);if(sFe(M,c*i)){x.current=M.indexOf(B);const T=String(M)!==String(L);return T&&D&&h(M),T?M:L}else return L})}return s.jsx(GLe,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:x,thumbs:v.current,values:_,orientation:o,form:g,children:s.jsx(bC.Provider,{scope:e.__scopeSlider,children:s.jsx(bC.Slot,{scope:e.__scopeSlider,children:s.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...p,ref:t,onPointerDown:pe(p.onPointerDown,()=>{l||(N.current=_)}),min:n,max:a,inverted:m,onSlideStart:l?void 0:S,onSlideMove:l?void 0:E,onSlideEnd:l?void 0:C,onHomeKeyDown:()=>!l&&P(n,0,{commit:!0}),onEndKeyDown:()=>!l&&P(a,_.length-1,{commit:!0}),onStepKeyDown:({event:A,direction:k})=>{if(!l){const U=JW.includes(A.key)||A.shiftKey&&eH.includes(A.key)?10:1,B=x.current,L=_[B],M=i*U*k;P(L+M,B,{commit:!0})}}})})})})});nH.displayName=Bh;var[sH,aH]=rH(Bh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),YLe=y.forwardRef((e,t)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,[f,h]=y.useState(null),m=Ke(t,w=>h(w)),g=y.useRef(void 0),p=Uu(a),v=p==="ltr",x=v&&!i||!v&&i;function b(w){const _=g.current||f.getBoundingClientRect(),j=[0,_.width],S=GP(j,x?[r,n]:[n,r]);return g.current=_,S(w-_.left)}return s.jsx(sH,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:s.jsx(iH,{dir:p,"data-orientation":"horizontal",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const _=b(w.clientX);o==null||o(_)},onSlideMove:w=>{const _=b(w.clientX);l==null||l(_)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:w=>{const j=tH[x?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:j?-1:1})}})})}),XLe=y.forwardRef((e,t)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,d=y.useRef(null),f=Ke(t,d),h=y.useRef(void 0),m=!a;function g(p){const v=h.current||d.current.getBoundingClientRect(),x=[0,v.height],w=GP(x,m?[n,r]:[r,n]);return h.current=v,w(p-v.top)}return s.jsx(sH,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:s.jsx(iH,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const v=g(p.clientY);i==null||i(v)},onSlideMove:p=>{const v=g(p.clientY);o==null||o(v)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:p=>{const x=tH[m?"from-bottom":"from-top"].includes(p.key);c==null||c({event:p,direction:x?-1:1})}})})}),iH=y.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=e,d=Yw(Bh,r);return s.jsx(Ee.span,{...u,ref:t,onKeyDown:pe(e.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):JW.concat(eH).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:pe(e.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(h)?h.focus():n(f)}),onPointerMove:pe(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&a(f)}),onPointerUp:pe(e.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),i(f))})})}),oH="SliderTrack",lH=y.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=Yw(oH,r);return s.jsx(Ee.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:t})});lH.displayName=oH;var wC="SliderRange",cH=y.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=Yw(wC,r),i=aH(wC,r),o=y.useRef(null),l=Ke(t,o),c=a.values.length,u=a.values.map(h=>fH(h,a.min,a.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return s.jsx(Ee.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:f+"%"}})});cH.displayName=wC;var jC="SliderThumb",uH=y.forwardRef((e,t)=>{const r=HLe(e.__scopeSlider),[n,a]=y.useState(null),i=Ke(t,l=>a(l)),o=y.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(QLe,{...e,ref:i,index:o})}),QLe=y.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:a,...i}=e,o=Yw(jC,r),l=aH(jC,r),[c,u]=y.useState(null),d=Ke(t,b=>u(b)),f=c?o.form||!!c.closest("form"):!0,h=Ug(c),m=o.values[n],g=m===void 0?0:fH(m,o.min,o.max),p=eFe(n,o.values.length),v=h==null?void 0:h[l.size],x=v?rFe(v,g,l.direction):0;return y.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${x}px)`},children:[s.jsx(bC.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(Ee.span,{role:"slider","aria-label":e["aria-label"]||p,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:m===void 0?{display:"none"}:e.style,onFocus:pe(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),f&&s.jsx(dH,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},n)]})});uH.displayName=jC;var ZLe="RadioBubbleInput",dH=y.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const a=y.useRef(null),i=Ke(a,n),o=Qg(t);return y.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("input",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Ee.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});dH.displayName=ZLe;function JLe(e=[],t,r){const n=[...e];return n[r]=t,n.sort((a,i)=>a-i)}function fH(e,t,r){const i=100/(r-t)*(e-t);return zp(i,[0,100])}function eFe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function tFe(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),n=Math.min(...r);return r.indexOf(n)}function rFe(e,t,r){const n=e/2,i=GP([0,50],[0,n]);return(n-i(t)*r)*r}function nFe(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function sFe(e,t){if(t>0){const r=nFe(e);return Math.min(...r)>=t}return!0}function GP(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function aFe(e){return(String(e).split(".")[1]||"").length}function iFe(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var hH=nH,oFe=lH,lFe=cH,cFe=uH;const mH=y.forwardRef(({className:e,...t},r)=>s.jsxs(hH,{ref:r,className:ae("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(oFe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(lFe,{className:"absolute h-full bg-primary"})}),s.jsx(cFe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));mH.displayName=hH.displayName;const l4={not_started:{label:"Not Started",variant:"secondary",icon:xt},in_progress:{label:"In Progress",variant:"default",icon:Gs},completed:{label:"Completed",variant:"default",icon:jt},on_hold:{label:"On Hold",variant:"outline",icon:y0}},uFe={professional:"Professional Development",technical:"Technical Skills",leadership:"Leadership",personal:"Personal Growth",certification:"Certification",other:"Other"};function dFe({goal:e,open:t,onOpenChange:r,onUpdate:n,onDelete:a,onToggleMilestone:i}){const[o,l]=y.useState(e.notes||""),[c,u]=y.useState(e.status),[d,f]=y.useState(e.progress_percentage),[h,m]=y.useState(!1),g=l4[e.status]||l4.not_started,p=g.icon,v=async()=>{m(!0);try{await n(e.id,{notes:o})}finally{m(!1)}},x=async _=>{u(_),await n(e.id,{status:_,progress_percentage:_==="completed"?100:d})},b=async _=>{const j=_[0];f(j),await n(e.id,{progress_percentage:j,status:j===100?"completed":j>0?"in_progress":"not_started"})},w=async()=>{await a(e.id),r(!1)};return s.jsx(Do,{open:t,onOpenChange:r,children:s.jsxs(Li,{className:"w-full sm:max-w-lg overflow-y-auto",children:[s.jsxs(Fi,{children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ks,{className:"h-5 w-5 text-primary"}),s.jsx(Ui,{children:e.title})]})}),s.jsx(Ro,{children:uFe[e.category]||e.category})]}),s.jsxs("div",{className:"space-y-6 py-6",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs(fe,{variant:g.variant,className:"flex items-center gap-1",children:[s.jsx(p,{className:"h-3 w-3"}),g.label]}),s.jsxs(fe,{variant:"outline",className:"flex items-center gap-1",children:[s.jsx(gF,{className:"h-3 w-3"}),e.priority.charAt(0).toUpperCase()+e.priority.slice(1)," Priority"]})]}),e.description&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Description"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]}),e.target_date&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{children:["Target: ",de(new Date(e.target_date),"MMMM d, yyyy")]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Progress"}),s.jsxs("span",{className:"text-sm font-medium",children:[d,"%"]})]}),s.jsx(pa,{value:d,className:"h-3"}),s.jsx(mH,{value:[d],onValueChange:b,max:100,step:5,className:"mt-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Update Status"}),s.jsxs(Ie,{value:c,onValueChange:x,children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"not_started",children:"Not Started"}),s.jsx(Y,{value:"in_progress",children:"In Progress"}),s.jsx(Y,{value:"on_hold",children:"On Hold"}),s.jsx(Y,{value:"completed",children:"Completed"})]})]})]}),s.jsx(Et,{}),e.milestones.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Milestones"}),s.jsx("div",{className:"space-y-2",children:e.milestones.map(_=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[s.jsx(Ti,{checked:_.completed,onCheckedChange:()=>i(e.id,_.id)}),s.jsx("span",{className:`text-sm flex-1 ${_.completed?"line-through text-muted-foreground":""}`,children:_.title}),_.completed&&_.completed_at&&s.jsx("span",{className:"text-xs text-muted-foreground",children:de(new Date(_.completed_at),"MMM d")})]},_.id))})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"notes",children:"Notes"}),s.jsx(wt,{id:"notes",value:o,onChange:_=>l(_.target.value),placeholder:"Add notes about your progress, reflections, or next steps...",rows:4}),s.jsx(I,{variant:"outline",size:"sm",onClick:v,disabled:h||o===e.notes,children:h?"Saving...":"Save Notes"})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsxs("p",{children:["Created: ",de(new Date(e.created_at),"MMMM d, yyyy")]}),s.jsxs("p",{children:["Last Updated: ",de(new Date(e.updated_at),"MMMM d, yyyy")]})]}),s.jsxs(Ac,{children:[s.jsx(m8,{asChild:!0,children:s.jsxs(I,{variant:"destructive",className:"w-full",children:[s.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Delete Goal"]})}),s.jsxs(sl,{children:[s.jsxs(al,{children:[s.jsx(ol,{children:"Delete Goal?"}),s.jsx(ll,{children:"This action cannot be undone. This will permanently delete your goal and all associated milestones."})]}),s.jsxs(il,{children:[s.jsx(ul,{children:"Cancel"}),s.jsx(cl,{onClick:w,children:"Delete"})]})]})]})]})]})})}const c4={not_started:{label:"Not Started",variant:"secondary",icon:xt},in_progress:{label:"In Progress",variant:"default",icon:Gs},completed:{label:"Completed",variant:"default",icon:jt},on_hold:{label:"On Hold",variant:"outline",icon:y0}},u4={low:{label:"Low",color:"text-muted-foreground"},medium:{label:"Medium",color:"text-warning"},high:{label:"High",color:"text-destructive"}},fFe={professional:"Professional Development",technical:"Technical Skills",leadership:"Leadership",personal:"Personal Growth",certification:"Certification",other:"Other"};function hFe(){const{goals:e,loading:t,createGoal:r,updateGoal:n,deleteGoal:a,toggleMilestone:i}=qLe(),[o,l]=y.useState(!1),[c,u]=y.useState(null),[d,f]=y.useState(!1),h=e.filter(v=>v.status!=="completed"),m=e.filter(v=>v.status==="completed"),g={total:e.length,inProgress:e.filter(v=>v.status==="in_progress").length,completed:m.length,avgProgress:e.length>0?Math.round(e.reduce((v,x)=>v+x.progress_percentage,0)/e.length):0},p=v=>{u(v),f(!0)};return t?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx($t,{className:"h-20 w-full"}),s.jsx("div",{className:"grid gap-4",children:[1,2,3].map(v=>s.jsx($t,{className:"h-32"},v))})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Development Goals"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Set and track your personal development objectives"})]}),s.jsxs(I,{onClick:()=>l(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"New Goal"]})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[s.jsx(G,{children:s.jsxs(X,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:s.jsx(Ks,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.total}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Goals"})]})]})}),s.jsx(G,{children:s.jsxs(X,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-info/10",children:s.jsx(Gs,{className:"h-5 w-5 text-info"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.inProgress}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"})]})]})}),s.jsx(G,{children:s.jsxs(X,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-success/10",children:s.jsx(jt,{className:"h-5 w-5 text-success"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.completed}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]})]})}),s.jsx(G,{children:s.jsxs(X,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-warning/10",children:s.jsx(gF,{className:"h-5 w-5 text-warning"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:[g.avgProgress,"%"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Progress"})]})]})})]}),s.jsxs(bn,{defaultValue:"active",className:"space-y-4",children:[s.jsxs(fn,{children:[s.jsxs(Ve,{value:"active",className:"flex items-center gap-2",children:[s.jsx(Gs,{className:"h-4 w-4"}),"Active (",h.length,")"]}),s.jsxs(Ve,{value:"completed",className:"flex items-center gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Completed (",m.length,")"]})]}),s.jsx(rt,{value:"active",className:"space-y-4",children:h.length===0?s.jsx(G,{children:s.jsxs(X,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(Ks,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-semibold text-lg",children:"No Active Goals"}),s.jsx("p",{className:"text-muted-foreground mt-1 mb-4",children:"Start by creating your first development goal"}),s.jsxs(I,{onClick:()=>l(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create Goal"]})]})}):h.map(v=>s.jsx(d4,{goal:v,onViewDetails:p},v.id))}),s.jsx(rt,{value:"completed",className:"space-y-4",children:m.length===0?s.jsx(G,{children:s.jsxs(X,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(jt,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-semibold text-lg",children:"No Completed Goals"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Your completed goals will appear here"})]})}):m.map(v=>s.jsx(d4,{goal:v,onViewDetails:p},v.id))})]}),s.jsx(WLe,{open:o,onOpenChange:l,onCreateGoal:r}),c&&s.jsx(dFe,{goal:c,open:d,onOpenChange:f,onUpdate:n,onDelete:a,onToggleMilestone:i})]})}function d4({goal:e,onViewDetails:t}){const r=c4[e.status]||c4.not_started,n=u4[e.priority]||u4.medium,a=r.icon;return s.jsx(G,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t(e),children:s.jsx(X,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("h3",{className:"font-semibold",children:e.title}),s.jsxs(fe,{variant:r.variant,className:"flex items-center gap-1",children:[s.jsx(a,{className:"h-3 w-3"}),r.label]}),s.jsxs("span",{className:`text-xs font-medium ${n.color}`,children:[n.label," Priority"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:fFe[e.category]||e.category})]})}),e.description&&s.jsx("p",{className:"text-sm line-clamp-2",children:e.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[e.progress_percentage,"%"]})]}),s.jsx(pa,{value:e.progress_percentage,className:"h-2"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[e.target_date&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Vt,{className:"h-4 w-4"}),s.jsxs("span",{children:["Due: ",de(new Date(e.target_date),"MMM d, yyyy")]})]}),e.milestones.length>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(jt,{className:"h-4 w-4"}),s.jsxs("span",{children:[e.milestones.filter(i=>i.completed).length,"/",e.milestones.length," milestones"]})]})]})]})})})}function mFe(){const{courses:e,loading:t,createCourse:r,updateCourse:n,deleteCourse:a,publishCourse:i}=XW(),[o,l]=y.useState(!1),[c,u]=y.useState(null),[d,f]=y.useState(""),[h,m]=y.useState("all"),[g,p]=y.useState({title:"",description:"",estimated_duration_minutes:"",pass_mark:"80"}),v=async()=>{await r({title:g.title,description:g.description||null,thumbnail_url:null,estimated_duration_minutes:g.estimated_duration_minutes?parseInt(g.estimated_duration_minutes):null,pass_mark:parseInt(g.pass_mark)||80,is_published:!1,is_active:!0,created_by:null})&&(l(!1),p({title:"",description:"",estimated_duration_minutes:"",pass_mark:"80"}))},x=async()=>{c&&(await n(c.id,{title:g.title,description:g.description||null,estimated_duration_minutes:g.estimated_duration_minutes?parseInt(g.estimated_duration_minutes):null,pass_mark:parseInt(g.pass_mark)||80}),u(null),p({title:"",description:"",estimated_duration_minutes:"",pass_mark:"80"}))},b=async j=>{confirm("Are you sure you want to delete this course?")&&await a(j)},w=j=>{var N,S;u(j),p({title:j.title,description:j.description||"",estimated_duration_minutes:((N=j.estimated_duration_minutes)==null?void 0:N.toString())||"",pass_mark:((S=j.pass_mark)==null?void 0:S.toString())||"80"})},_=e.filter(j=>{const N=j.title.toLowerCase().includes(d.toLowerCase()),S=h==="all"||h==="published"&&j.is_published||h==="draft"&&!j.is_published;return N&&S});return t?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx($t,{className:"h-10 w-full max-w-md"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(j=>s.jsx($t,{className:"h-48"},j))})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Learning Management"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Create and manage training courses"})]}),s.jsxs(I,{onClick:()=>l(!0),className:"gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"Create Course"]})]}),s.jsxs(bn,{value:h,onValueChange:m,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs(fn,{children:[s.jsxs(Ve,{value:"all",children:["All Courses (",e.length,")"]}),s.jsxs(Ve,{value:"published",children:["Published (",e.filter(j=>j.is_published).length,")"]}),s.jsxs(Ve,{value:"draft",children:["Drafts (",e.filter(j=>!j.is_published).length,")"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(un,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{placeholder:"Search courses...",value:d,onChange:j=>f(j.target.value),className:"pl-10 w-[250px]"})]})]}),s.jsx(rt,{value:h,className:"mt-6",children:_.length===0?s.jsx(G,{children:s.jsxs(X,{className:"py-12 text-center",children:[s.jsx(_p,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),s.jsx("p",{className:"text-muted-foreground",children:"No courses found"}),s.jsxs(I,{className:"mt-4",onClick:()=>l(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create your first course"]})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(j=>s.jsxs(G,{className:"flex flex-col",children:[s.jsx(he,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(ge,{className:"text-base line-clamp-2",children:j.title}),j.description&&s.jsx(Le,{className:"line-clamp-2 mt-1",children:j.description})]}),s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:s.jsx(si,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",children:[s.jsx(tt,{asChild:!0,children:s.jsxs(yn,{to:`/lms/courses/${j.id}`,children:[s.jsx(jE,{className:"h-4 w-4 mr-2"}),"Edit Modules"]})}),s.jsxs(tt,{onClick:()=>w(j),children:[s.jsx(CE,{className:"h-4 w-4 mr-2"}),"Edit Details"]}),s.jsxs(tt,{onClick:()=>b(j.id),className:"text-destructive",children:[s.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}),s.jsxs(X,{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-4",children:[j.estimated_duration_minutes&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(xt,{className:"h-4 w-4"}),j.estimated_duration_minutes," min"]}),s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("span",{children:["Pass: ",j.pass_mark,"%"]})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-auto pt-4 border-t",children:[s.jsx(fe,{variant:j.is_published?"default":"secondary",className:j.is_published?"bg-success/10 text-success":"",children:j.is_published?"Published":"Draft"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kn,{checked:j.is_published,onCheckedChange:N=>i(j.id,N)}),s.jsx("span",{className:"text-sm text-muted-foreground",children:j.is_published?"Live":"Publish"})]})]})]})]},j.id))})})]}),s.jsx(Rt,{open:o||!!c,onOpenChange:j=>{j||(l(!1),u(null),p({title:"",description:"",estimated_duration_minutes:"",pass_mark:"80"}))},children:s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:c?"Edit Course":"Create New Course"}),s.jsx(Ot,{children:c?"Update course details":"Add a new training course to the LMS"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Course Title *"}),s.jsx(ne,{value:g.title,onChange:j=>p({...g,title:j.target.value}),placeholder:"e.g., NDIS Orientation Training"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Description"}),s.jsx(wt,{value:g.description,onChange:j=>p({...g,description:j.target.value}),placeholder:"Brief description of the course content...",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Estimated Duration (minutes)"}),s.jsx(ne,{type:"number",value:g.estimated_duration_minutes,onChange:j=>p({...g,estimated_duration_minutes:j.target.value}),placeholder:"60"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Quiz Pass Mark (%)"}),s.jsx(ne,{type:"number",value:g.pass_mark,onChange:j=>p({...g,pass_mark:j.target.value}),placeholder:"80",min:"0",max:"100"})]})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>{l(!1),u(null)},children:"Cancel"}),s.jsx(I,{onClick:c?x:v,disabled:!g.title,children:c?"Save Changes":"Create Course"})]})]})})]})}const pFe={video:CF,pdf:gt,policy:Ei,quiz:jp},gFe={video:"Video",pdf:"PDF/Document",policy:"Policy Acknowledgement",quiz:"Quiz"};function vFe(){const{courseId:e}=M3(),t=ii(),{modules:r,loading:n,createModule:a,updateModule:i,deleteModule:o}=ALe(e),[l,c]=y.useState(null),[u,d]=y.useState(!0),[f,h]=y.useState(!1),[m,g]=y.useState(null),[p,v]=y.useState({title:"",description:"",module_type:"video",content_url:"",content_text:"",duration_minutes:"",is_required:!0});y.useEffect(()=>{(async()=>{if(!e)return;const{data:S,error:E}=await $.from("courses").select("*").eq("id",e).single();if(E){console.error("Error fetching course:",E),t("/lms");return}c(S),d(!1)})()},[e,t]);const x=async()=>{if(!e)return;await a({course_id:e,title:p.title,description:p.description||null,module_type:p.module_type,content_url:p.content_url||null,content_text:p.content_text||null,is_required:p.is_required,display_order:r.length,duration_minutes:p.duration_minutes?parseInt(p.duration_minutes):null})&&(h(!1),j())},b=async()=>{m&&(await i(m.id,{title:p.title,description:p.description||null,module_type:p.module_type,content_url:p.content_url||null,content_text:p.content_text||null,is_required:p.is_required,duration_minutes:p.duration_minutes?parseInt(p.duration_minutes):null}),g(null),j())},w=async N=>{confirm("Are you sure you want to delete this module?")&&await o(N)},_=N=>{var S;g(N),v({title:N.title,description:N.description||"",module_type:N.module_type,content_url:N.content_url||"",content_text:N.content_text||"",duration_minutes:((S=N.duration_minutes)==null?void 0:S.toString())||"",is_required:N.is_required})},j=()=>{v({title:"",description:"",module_type:"video",content_url:"",content_text:"",duration_minutes:"",is_required:!0})};return u||n?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx($t,{className:"h-10 w-64"}),s.jsx($t,{className:"h-64"})]}):l?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(I,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(yn,{to:"/lms",children:s.jsx(eu,{className:"h-4 w-4"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold",children:l.title}),s.jsx("p",{className:"text-muted-foreground",children:"Course Builder - Add and arrange modules"})]}),s.jsxs(I,{onClick:()=>h(!0),className:"gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"Add Module"]})]}),s.jsx(G,{children:s.jsx(X,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(fe,{variant:l.is_published?"default":"secondary",children:l.is_published?"Published":"Draft"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.length," module",r.length!==1?"s":""]}),l.estimated_duration_minutes&&s.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(xt,{className:"h-4 w-4"}),l.estimated_duration_minutes," min total"]})]}),s.jsx(yn,{to:`/lms/courses/${e}/quiz`,children:s.jsxs(I,{variant:"outline",size:"sm",children:[s.jsx(jp,{className:"h-4 w-4 mr-2"}),"Manage Quiz Questions"]})})]})})}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{children:"Course Modules"}),s.jsx(Le,{children:"Drag to reorder modules. Learners will complete them in order."})]}),s.jsx(X,{children:r.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(gt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No modules yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add your first module to start building the course"}),s.jsxs(I,{className:"mt-4",onClick:()=>h(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Add Module"]})]}):s.jsx("div",{className:"space-y-2",children:r.map((N,S)=>{const E=pFe[N.module_type];return s.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsx("div",{className:"cursor-grab text-muted-foreground",children:s.jsx(dG,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(E,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium truncate",children:N.title}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(fe,{variant:"outline",className:"text-xs",children:gFe[N.module_type]}),N.duration_minutes&&s.jsxs("span",{children:[N.duration_minutes," min"]}),N.is_required&&s.jsx(fe,{variant:"secondary",className:"text-xs",children:"Required"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>_(N),children:s.jsx(CE,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>w(N.id),children:s.jsx(Zn,{className:"h-4 w-4 text-destructive"})})]})]},N.id)})})})]}),s.jsx(Rt,{open:f||!!m,onOpenChange:N=>{N||(h(!1),g(null),j())},children:s.jsxs(kt,{className:"max-w-lg",children:[s.jsxs(Pt,{children:[s.jsx(At,{children:m?"Edit Module":"Add Module"}),s.jsx(Ot,{children:m?"Update module details":"Add a new learning module to this course"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Module Type *"}),s.jsxs(Ie,{value:p.module_type,onValueChange:N=>v({...p,module_type:N}),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"video",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(CF,{className:"h-4 w-4"}),"Video"]})}),s.jsx(Y,{value:"pdf",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4"}),"PDF/Document"]})}),s.jsx(Y,{value:"policy",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ei,{className:"h-4 w-4"}),"Policy Acknowledgement"]})}),s.jsx(Y,{value:"quiz",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jp,{className:"h-4 w-4"}),"Quiz"]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Title *"}),s.jsx(ne,{value:p.title,onChange:N=>v({...p,title:N.target.value}),placeholder:"e.g., Introduction to NDIS"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Description"}),s.jsx(wt,{value:p.description,onChange:N=>v({...p,description:N.target.value}),placeholder:"Brief description...",rows:2})]}),(p.module_type==="video"||p.module_type==="pdf")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Content URL *"}),s.jsx(ne,{value:p.content_url,onChange:N=>v({...p,content_url:N.target.value}),placeholder:p.module_type==="video"?"https://youtube.com/...":"https://..."})]}),p.module_type==="policy"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Policy Text *"}),s.jsx(wt,{value:p.content_text,onChange:N=>v({...p,content_text:N.target.value}),placeholder:"Enter the policy text that learners must acknowledge...",rows:5})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Duration (minutes)"}),s.jsx(ne,{type:"number",value:p.duration_minutes,onChange:N=>v({...p,duration_minutes:N.target.value}),placeholder:"10"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Required"}),s.jsxs("div",{className:"flex items-center h-10",children:[s.jsx("input",{type:"checkbox",checked:p.is_required,onChange:N=>v({...p,is_required:N.target.checked}),className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 text-sm",children:"Must complete"})]})]})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>{h(!1),g(null),j()},children:"Cancel"}),s.jsx(I,{onClick:m?b:x,disabled:!p.title,children:m?"Save Changes":"Add Module"})]})]})})]}):s.jsx("div",{children:"Course not found"})}const yFe={individual:"Individual",team:"Team",role:"Role",department:"Department",location:"Location",all:"All Staff"},xFe={none:"One-time",monthly:"Monthly",quarterly:"Quarterly",biannual:"Every 6 months",annual:"Annually"};function bFe(){const{assignments:e,loading:t,createAssignment:r,deleteAssignment:n}=OLe(),{courses:a}=XW(),[i,o]=y.useState(!1),[l,c]=y.useState(""),[u,d]=y.useState({course_id:"",target_type:"all",target_value:"",due_date:"",recurrence:"none",is_mandatory:!0,auto_assign_on_hire:!1,notes:""}),f=async()=>{await r({course_id:u.course_id,target_type:u.target_type,target_value:u.target_type==="all"?null:u.target_value||null,due_date:u.due_date||null,recurrence:u.recurrence,is_mandatory:u.is_mandatory,auto_assign_on_hire:u.auto_assign_on_hire,notes:u.notes||null,assigned_by:null,assigned_by_name:null})&&(o(!1),d({course_id:"",target_type:"all",target_value:"",due_date:"",recurrence:"none",is_mandatory:!0,auto_assign_on_hire:!1,notes:""}))},h=async g=>{confirm("Are you sure you want to delete this assignment?")&&await n(g)},m=e.filter(g=>{var p;return(p=g.course)==null?void 0:p.title.toLowerCase().includes(l.toLowerCase())});return t?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx($t,{className:"h-10 w-full max-w-md"}),s.jsx($t,{className:"h-96"})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Training Assignments"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Assign courses to individuals, teams, or all staff"})]}),s.jsxs(I,{onClick:()=>o(!0),className:"gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"Create Assignment"]})]}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(un,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(ne,{placeholder:"Search assignments...",value:l,onChange:g=>c(g.target.value),className:"pl-10"})]}),s.jsx(G,{children:s.jsx(X,{className:"p-0",children:m.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Ar,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No assignments found"}),s.jsxs(I,{className:"mt-4",onClick:()=>o(!0),children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),"Create your first assignment"]})]}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Course"}),s.jsx(oe,{children:"Assigned To"}),s.jsx(oe,{children:"Due Date"}),s.jsx(oe,{children:"Recurrence"}),s.jsx(oe,{children:"Type"}),s.jsx(oe,{children:"Assigned By"}),s.jsx(oe,{className:"text-right",children:"Actions"})]})}),s.jsx(pr,{children:m.map(g=>{var p;return s.jsxs(ze,{children:[s.jsx(te,{className:"font-medium",children:((p=g.course)==null?void 0:p.title)||"Unknown Course"}),s.jsx(te,{children:s.jsxs(fe,{variant:"outline",children:[yFe[g.target_type],g.target_value&&`: ${g.target_value}`]})}),s.jsx(te,{children:g.due_date?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"}),de(new Date(g.due_date),"dd MMM yyyy")]}):s.jsx("span",{className:"text-muted-foreground",children:"No deadline"})}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jF,{className:"h-4 w-4 text-muted-foreground"}),xFe[g.recurrence]]})}),s.jsx(te,{children:s.jsx(fe,{variant:g.is_mandatory?"default":"secondary",children:g.is_mandatory?"Mandatory":"Optional"})}),s.jsx(te,{className:"text-muted-foreground",children:g.assigned_by_name||"System"}),s.jsx(te,{className:"text-right",children:s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>h(g.id),children:s.jsx(Zn,{className:"h-4 w-4 text-destructive"})})})]},g.id)})})]})})}),s.jsx(Rt,{open:i,onOpenChange:o,children:s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Create Assignment"}),s.jsx(Ot,{children:"Assign a course to staff members"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Course *"}),s.jsxs(Ie,{value:u.course_id,onValueChange:g=>d({...u,course_id:g}),children:[s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select a course"})}),s.jsx(Me,{children:a.filter(g=>g.is_published).map(g=>s.jsx(Y,{value:g.id,children:g.title},g.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Assign To *"}),s.jsxs(Ie,{value:u.target_type,onValueChange:g=>d({...u,target_type:g}),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"all",children:"All Staff"}),s.jsx(Y,{value:"role",children:"By Role"}),s.jsx(Y,{value:"department",children:"By Department"}),s.jsx(Y,{value:"location",children:"By Location"}),s.jsx(Y,{value:"individual",children:"Individual"})]})]})]}),u.target_type!=="all"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:u.target_type==="individual"?"User Email":u.target_type==="role"?"Role Name":u.target_type==="department"?"Department":"Location"}),s.jsx(ne,{value:u.target_value,onChange:g=>d({...u,target_value:g.target.value}),placeholder:u.target_type==="individual"?"user@example.com":"Enter value..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Due Date"}),s.jsx(ne,{type:"date",value:u.due_date,onChange:g=>d({...u,due_date:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Recurrence"}),s.jsxs(Ie,{value:u.recurrence,onValueChange:g=>d({...u,recurrence:g}),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"none",children:"One-time"}),s.jsx(Y,{value:"monthly",children:"Monthly"}),s.jsx(Y,{value:"quarterly",children:"Quarterly"}),s.jsx(Y,{value:"biannual",children:"Every 6 months"}),s.jsx(Y,{value:"annual",children:"Annually"})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:u.is_mandatory,onChange:g=>d({...u,is_mandatory:g.target.checked})}),s.jsx("span",{className:"text-sm",children:"Mandatory"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:u.auto_assign_on_hire,onChange:g=>d({...u,auto_assign_on_hire:g.target.checked})}),s.jsx("span",{className:"text-sm",children:"Auto-assign new hires"})]})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsx(I,{onClick:f,disabled:!u.course_id,children:"Create Assignment"})]})]})})]})}function wFe(){const e=ii(),[t,r]=y.useState(""),[n,a]=y.useState(""),[i,o]=y.useState(!1),l=async c=>{c.preventDefault(),o(!0);try{const{data:u,error:d}=await $.auth.signInWithPassword({email:t,password:n});if(d)throw d;const{data:f,error:h}=await $.from("platform_users").select("id, role, status").eq("user_id",u.user.id).eq("status","active").maybeSingle();if(h)throw h;if(!f)throw await $.auth.signOut(),new Error("You do not have platform admin access");await $.from("platform_users").update({last_login_at:new Date().toISOString()}).eq("id",f.id),J({title:"Welcome back",description:"You have been logged in to Platform Admin."}),e("/platform/orgs")}catch(u){J({title:"Login failed",description:u.message||"Invalid credentials or access denied",variant:"destructive"})}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:s.jsxs(G,{className:"w-full max-w-md border-slate-700 bg-slate-800/50 backdrop-blur",children:[s.jsxs(he,{className:"text-center space-y-4",children:[s.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(ln,{className:"h-8 w-8 text-primary"})}),s.jsxs("div",{children:[s.jsx(ge,{className:"text-2xl text-white",children:"Platform Admin"}),s.jsx(Le,{className:"text-slate-400",children:"Sign in to access the control plane"})]})]}),s.jsxs(X,{children:[s.jsxs("form",{onSubmit:l,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"email",className:"text-slate-200",children:"Email"}),s.jsx(ne,{id:"email",type:"email",placeholder:"admin@platform.com",value:t,onChange:c=>r(c.target.value),required:!0,className:"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{htmlFor:"password",className:"text-slate-200",children:"Password"}),s.jsx(ne,{id:"password",type:"password",placeholder:"",value:n,onChange:c=>a(c.target.value),required:!0,className:"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400"})]}),s.jsx(I,{type:"submit",className:"w-full",disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign in to Platform"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-sm text-slate-400",children:"This is a restricted area for platform administrators only."})})]})]})})}const f4=[{label:"Organisations",icon:Mc,href:"/platform/orgs"},{label:"Plans",icon:vx,href:"/platform/plans"},{label:"Platform Users",icon:Ar,href:"/platform/users"},{label:"Audit Logs",icon:gt,href:"/platform/audit"},{label:"Settings",icon:Lg,href:"/platform/settings"}];function Bl({children:e}){const[t,r]=y.useState(!1),[n,a]=y.useState(!1),i=Fu(),o=ii(),l=async()=>{await $.auth.signOut(),J({title:"Logged out",description:"You have been logged out of Platform Admin."}),o("/platform/login")},c=({item:u})=>{const d=i.pathname.startsWith(u.href),f=u.icon,h=s.jsxs(yn,{to:u.href,onClick:()=>a(!1),className:ae("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",d?"bg-primary text-primary-foreground":"text-slate-300 hover:text-white hover:bg-slate-700/50"),children:[s.jsx(f,{className:"h-5 w-5 flex-shrink-0"}),!t&&s.jsx("span",{className:"font-medium text-sm",children:u.label})]});return t?s.jsxs(f3,{delayDuration:0,children:[s.jsx(h3,{asChild:!0,children:h}),s.jsx(LE,{side:"right",className:"font-medium",children:u.label})]}):h};return s.jsxs("div",{className:"min-h-screen bg-slate-900",children:[s.jsx("div",{className:"bg-amber-500/10 border-b border-amber-500/20 px-4 py-2",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-400 text-sm font-medium",children:[s.jsx(ln,{className:"h-4 w-4"}),s.jsx("span",{children:"Platform Admin Control Plane"})]})}),s.jsxs("aside",{className:ae("fixed left-0 top-10 z-40 h-[calc(100vh-40px)] bg-slate-800 border-r border-slate-700 hidden md:flex flex-col transition-all duration-300",t?"w-16":"w-64"),children:[s.jsxs("div",{className:ae("flex items-center h-16 px-4 border-b border-slate-700",t?"justify-center":"gap-3"),children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary flex items-center justify-center flex-shrink-0",children:s.jsx(ln,{className:"h-4 w-4 text-primary-foreground"})}),!t&&s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-semibold text-white text-sm",children:"Social Plus"}),s.jsx("span",{className:"text-xs text-slate-400",children:"Platform Admin"})]})]}),s.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1",children:f4.map(u=>s.jsx(c,{item:u},u.href))}),s.jsx("div",{className:"px-3 py-4 border-t border-slate-700",children:s.jsxs(I,{variant:"ghost",onClick:l,className:ae("w-full text-slate-300 hover:text-white hover:bg-slate-700/50",t?"justify-center px-0":"justify-start"),children:[s.jsx(RO,{className:"h-5 w-5"}),!t&&s.jsx("span",{className:"ml-3",children:"Logout"})]})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>r(!t),className:"absolute -right-3 top-20 h-6 w-6 rounded-full border border-slate-600 bg-slate-800 text-slate-300 hover:bg-slate-700",children:t?s.jsx(Oo,{className:"h-3 w-3"}):s.jsx(SE,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"md:hidden flex items-center justify-between h-14 px-4 bg-slate-800 border-b border-slate-700",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>a(!n),className:"text-slate-300",children:s.jsx(wF,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ln,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"font-semibold text-white",children:"Platform Admin"})]}),s.jsx(I,{variant:"ghost",size:"icon",onClick:l,className:"text-slate-300",children:s.jsx(RO,{className:"h-5 w-5"})})]}),n&&s.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>a(!1),children:s.jsxs("div",{className:"w-64 h-full bg-slate-800 border-r border-slate-700",onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center gap-3 h-16 px-4 border-b border-slate-700",children:[s.jsx(ln,{className:"h-6 w-6 text-primary"}),s.jsx("span",{className:"font-semibold text-white",children:"Platform Admin"})]}),s.jsx("nav",{className:"px-3 py-4 space-y-1",children:f4.map(u=>s.jsx(c,{item:u},u.href))})]})}),s.jsx("main",{className:ae("min-h-[calc(100vh-40px)] transition-all duration-300 pt-14 md:pt-0",t?"md:ml-16":"md:ml-64"),children:s.jsx("div",{className:"p-4 md:p-6",children:e})})]})}function zh(){const[e,t]=y.useState(null),[r,n]=y.useState(!0),a=ii();y.useEffect(()=>{(async()=>{try{const{data:{session:d}}=await $.auth.getSession();if(!(d!=null&&d.user)){a("/platform/login");return}const{data:f,error:h}=await $.from("platform_users").select("*").eq("user_id",d.user.id).eq("status","active").maybeSingle();if(h||!f){a("/platform/login");return}t(f)}catch(d){console.error("Platform auth check failed:",d),a("/platform/login")}finally{n(!1)}})();const{data:{subscription:u}}=$.auth.onAuthStateChange(d=>{d==="SIGNED_OUT"&&(t(null),a("/platform/login"))});return()=>u.unsubscribe()},[a]);const i=(e==null?void 0:e.role)==="owner",o=(e==null?void 0:e.role)==="admin"||i,l=i||(e==null?void 0:e.role)==="admin";return{platformUser:e,loading:r,isOwner:i,isAdmin:o,canImpersonate:l}}function zl({children:e}){const{loading:t,platformUser:r}=zh();return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("p",{className:"text-slate-400",children:"Verifying platform access..."})]})}):r?s.jsx(s.Fragment,{children:e}):null}const jFe={trial:"bg-blue-500/10 text-blue-500 border-blue-500/20",active:"bg-green-500/10 text-green-500 border-green-500/20",suspended:"bg-red-500/10 text-red-500 border-red-500/20",readonly:"bg-amber-500/10 text-amber-500 border-amber-500/20"};function _Fe(){const[e,t]=y.useState(""),[r,n]=y.useState("all"),a=ai(),{data:i,isLoading:o}=sr({queryKey:["platform-organisations",e,r],queryFn:async()=>{let c=$.from("organisations").select(`
          *,
          organisation_subscriptions (
            id,
            status,
            trial_ends_at,
            plans (
              id,
              name
            )
          )
        `).order("created_at",{ascending:!1});e&&(c=c.or(`legal_name.ilike.%${e}%,trading_name.ilike.%${e}%`)),r!=="all"&&(c=c.eq("status",r));const{data:u,error:d}=await c;if(d)throw d;return u}}),l=Ht({mutationFn:async({id:c,status:u})=>{const{error:d}=await $.from("organisations").update({status:u}).eq("id",c);if(d)throw d},onSuccess:()=>{a.invalidateQueries({queryKey:["platform-organisations"]}),J({title:"Organisation status updated"})},onError:c=>{J({title:"Failed to update status",description:c.message,variant:"destructive"})}});return s.jsx(zl,{children:s.jsx(Bl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Organisations"}),s.jsx("p",{className:"text-slate-400 mt-1",children:"Manage tenant organisations"})]}),s.jsxs(I,{className:"gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"Add Organisation"]})]}),s.jsx(G,{className:"bg-slate-800 border-slate-700",children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(un,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),s.jsx(ne,{placeholder:"Search organisations...",value:e,onChange:c=>t(c.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-white"})]}),s.jsxs(Ie,{value:r,onValueChange:c=>n(c),children:[s.jsx(Re,{className:"w-[180px] bg-slate-700/50 border-slate-600 text-white",children:s.jsx(Fe,{placeholder:"Filter by status"})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"all",children:"All Statuses"}),s.jsx(Y,{value:"trial",children:"Trial"}),s.jsx(Y,{value:"active",children:"Active"}),s.jsx(Y,{value:"suspended",children:"Suspended"}),s.jsx(Y,{value:"readonly",children:"Read-only"})]})]})]})})}),s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsx(he,{children:s.jsxs(ge,{className:"text-white flex items-center gap-2",children:[s.jsx(Mc,{className:"h-5 w-5"}),"All Organisations"]})}),s.jsx(X,{children:o?s.jsx("div",{className:"text-center py-8 text-slate-400",children:"Loading organisations..."}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(oe,{className:"text-slate-300",children:"Organisation"}),s.jsx(oe,{className:"text-slate-300",children:"Plan"}),s.jsx(oe,{className:"text-slate-300",children:"Status"}),s.jsx(oe,{className:"text-slate-300",children:"Trial Ends"}),s.jsx(oe,{className:"text-slate-300",children:"Created"}),s.jsx(oe,{className:"text-slate-300 text-right",children:"Actions"})]})}),s.jsxs(pr,{children:[i==null?void 0:i.map(c=>{var f;const u=(f=c.organisation_subscriptions)==null?void 0:f[0],d=u==null?void 0:u.plans;return s.jsxs(ze,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(te,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:c.legal_name}),c.trading_name&&s.jsxs("p",{className:"text-sm text-slate-400",children:["t/a ",c.trading_name]})]})}),s.jsx(te,{className:"text-slate-300",children:(d==null?void 0:d.name)||"No plan"}),s.jsx(te,{children:s.jsx(fe,{variant:"outline",className:jFe[c.status],children:c.status})}),s.jsx(te,{className:"text-slate-300",children:u!=null&&u.trial_ends_at?de(new Date(u.trial_ends_at),"dd MMM yyyy"):"-"}),s.jsx(te,{className:"text-slate-300",children:de(new Date(c.created_at),"dd MMM yyyy")}),s.jsx(te,{className:"text-right",children:s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",className:"text-slate-300",children:s.jsx(si,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",children:[s.jsx(tt,{asChild:!0,children:s.jsxs(yn,{to:`/platform/orgs/${c.id}`,children:[s.jsx($i,{className:"mr-2 h-4 w-4"}),"View Details"]})}),c.status!=="suspended"&&s.jsxs(tt,{onClick:()=>l.mutate({id:c.id,status:"suspended"}),className:"text-red-400",children:[s.jsx(y0,{className:"mr-2 h-4 w-4"}),"Suspend"]}),c.status==="suspended"&&s.jsxs(tt,{onClick:()=>l.mutate({id:c.id,status:"active"}),className:"text-green-400",children:[s.jsx(Sp,{className:"mr-2 h-4 w-4"}),"Activate"]}),c.status!=="readonly"&&c.status!=="suspended"&&s.jsxs(tt,{onClick:()=>l.mutate({id:c.id,status:"readonly"}),className:"text-amber-400",children:[s.jsx(pu,{className:"mr-2 h-4 w-4"}),"Set Read-only"]})]})]})})]},c.id)}),(i==null?void 0:i.length)===0&&s.jsx(ze,{children:s.jsx(te,{colSpan:6,className:"text-center py-8 text-slate-400",children:"No organisations found"})})]})]})})]})]})})})}const NFe={trial:"bg-blue-500/10 text-blue-500 border-blue-500/20",active:"bg-green-500/10 text-green-500 border-green-500/20",suspended:"bg-red-500/10 text-red-500 border-red-500/20",readonly:"bg-amber-500/10 text-amber-500 border-amber-500/20"},SFe=[{key:"module_hr_core",label:"HR Core",type:"boolean"},{key:"module_onboarding",label:"Onboarding",type:"boolean"},{key:"module_compliance",label:"Compliance",type:"boolean"},{key:"module_docs",label:"Documents",type:"boolean"},{key:"module_leave",label:"Leave Management",type:"boolean"},{key:"module_payroll",label:"Payroll",type:"boolean"},{key:"module_reporting",label:"Reporting",type:"boolean"},{key:"module_lms",label:"LMS",type:"boolean"},{key:"limit_users",label:"User Limit",type:"number"},{key:"limit_employees",label:"Employee Limit",type:"number"},{key:"limit_storage_gb",label:"Storage (GB)",type:"number"},{key:"audit_export_enabled",label:"Audit Export",type:"boolean"}];function CFe(){var g,p,v,x,b,w,_,j;const{id:e}=M3(),t=ai(),{canImpersonate:r}=zh(),{data:n,isLoading:a}=sr({queryKey:["platform-organisation",e],queryFn:async()=>{const{data:N,error:S}=await $.from("organisations").select(`
          *,
          organisation_subscriptions (
            id,
            status,
            trial_ends_at,
            start_date,
            end_date,
            plans (
              id,
              name,
              description
            )
          )
        `).eq("id",e).single();if(S)throw S;return N},enabled:!!e}),{data:i}=sr({queryKey:["platform-plans"],queryFn:async()=>{const{data:N,error:S}=await $.from("plans").select("*").eq("status","active").order("name");if(S)throw S;return N}}),{data:o}=sr({queryKey:["platform-plan-entitlements",(v=(p=(g=n==null?void 0:n.organisation_subscriptions)==null?void 0:g[0])==null?void 0:p.plans)==null?void 0:v.id],queryFn:async()=>{var C,P,A;const N=(A=(P=(C=n==null?void 0:n.organisation_subscriptions)==null?void 0:C[0])==null?void 0:P.plans)==null?void 0:A.id;if(!N)return[];const{data:S,error:E}=await $.from("plan_entitlements").select("*").eq("plan_id",N);if(E)throw E;return S},enabled:!!((w=(b=(x=n==null?void 0:n.organisation_subscriptions)==null?void 0:x[0])==null?void 0:b.plans)!=null&&w.id)}),{data:l}=sr({queryKey:["platform-org-entitlements",e],queryFn:async()=>{const{data:N,error:S}=await $.from("organisation_entitlements").select("*").eq("organisation_id",e);if(S)throw S;return N},enabled:!!e}),{data:c}=sr({queryKey:["platform-audit-logs",e],queryFn:async()=>{const{data:N,error:S}=await $.from("platform_audit_logs").select("*").eq("organisation_id",e).order("created_at",{ascending:!1}).limit(20);if(S)throw S;return N},enabled:!!e}),u=Ht({mutationFn:async N=>{const{error:S}=await $.from("organisations").update({status:N}).eq("id",e);if(S)throw S},onSuccess:()=>{t.invalidateQueries({queryKey:["platform-organisation",e]}),J({title:"Status updated successfully"})},onError:N=>{J({title:"Failed to update status",description:N.message,variant:"destructive"})}}),d=Ht({mutationFn:async({key:N,value:S})=>{const E=l==null?void 0:l.find(C=>C.key===N);if(E){const{error:C}=await $.from("organisation_entitlements").update({value:S}).eq("id",E.id);if(C)throw C}else{const{error:C}=await $.from("organisation_entitlements").insert({organisation_id:e,key:N,value:S});if(C)throw C}},onSuccess:()=>{t.invalidateQueries({queryKey:["platform-org-entitlements",e]}),J({title:"Entitlement updated"})},onError:N=>{J({title:"Failed to update entitlement",description:N.message,variant:"destructive"})}}),f=N=>{const S=l==null?void 0:l.find(C=>C.key===N);if(S)return S.value;const E=o==null?void 0:o.find(C=>C.key===N);return(E==null?void 0:E.value)||"false"};if(a)return s.jsx(zl,{children:s.jsx(Bl,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(We,{className:"h-8 w-8 animate-spin text-primary"})})})});if(!n)return s.jsx(zl,{children:s.jsx(Bl,{children:s.jsx("div",{className:"text-center py-16",children:s.jsx("p",{className:"text-slate-400",children:"Organisation not found"})})})});const h=(_=n.organisation_subscriptions)==null?void 0:_[0],m=h==null?void 0:h.plans;return s.jsx(zl,{children:s.jsx(Bl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(I,{variant:"ghost",size:"icon",asChild:!0,className:"text-slate-300",children:s.jsx(yn,{to:"/platform/orgs",children:s.jsx(eu,{className:"h-5 w-5"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:n.legal_name}),s.jsx(fe,{variant:"outline",className:NFe[n.status],children:n.status})]}),n.trading_name&&s.jsxs("p",{className:"text-slate-400 mt-1",children:["t/a ",n.trading_name]})]})]}),s.jsxs(bn,{defaultValue:"overview",className:"space-y-6",children:[s.jsxs(fn,{className:"bg-slate-800 border border-slate-700",children:[s.jsx(Ve,{value:"overview",children:"Overview"}),s.jsx(Ve,{value:"subscription",children:"Subscription"}),s.jsx(Ve,{value:"entitlements",children:"Entitlements"}),s.jsx(Ve,{value:"audit",children:"Audit Log"}),s.jsx(Ve,{value:"support",children:"Support"})]}),s.jsxs(rt,{value:"overview",className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsx(he,{className:"pb-2",children:s.jsx(Le,{className:"text-slate-400",children:"Status"})}),s.jsx(X,{children:s.jsxs(Ie,{value:n.status,onValueChange:N=>u.mutate(N),children:[s.jsx(Re,{className:"bg-slate-700/50 border-slate-600 text-white",children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"trial",children:"Trial"}),s.jsx(Y,{value:"active",children:"Active"}),s.jsx(Y,{value:"suspended",children:"Suspended"}),s.jsx(Y,{value:"readonly",children:"Read-only"})]})]})})]}),s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsx(he,{className:"pb-2",children:s.jsx(Le,{className:"text-slate-400",children:"Current Plan"})}),s.jsx(X,{children:s.jsx("p",{className:"text-xl font-semibold text-white",children:(m==null?void 0:m.name)||"No plan"})})]}),s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsx(he,{className:"pb-2",children:s.jsx(Le,{className:"text-slate-400",children:"Trial Ends"})}),s.jsx(X,{children:s.jsx("p",{className:"text-xl font-semibold text-white",children:h!=null&&h.trial_ends_at?de(new Date(h.trial_ends_at),"dd MMM yyyy"):"N/A"})})]}),s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsx(he,{className:"pb-2",children:s.jsx(Le,{className:"text-slate-400",children:"Created"})}),s.jsx(X,{children:s.jsx("p",{className:"text-xl font-semibold text-white",children:de(new Date(n.created_at),"dd MMM yyyy")})})]})]}),s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsx(he,{children:s.jsx(ge,{className:"text-white",children:"Organisation Details"})}),s.jsx(X,{className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-400",children:"Legal Name"}),s.jsx("p",{className:"text-white",children:n.legal_name})]}),s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-400",children:"Trading Name"}),s.jsx("p",{className:"text-white",children:n.trading_name||"-"})]}),s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-400",children:"Timezone"}),s.jsx("p",{className:"text-white",children:n.timezone||"Australia/Sydney"})]}),s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-400",children:"Organisation ID"}),s.jsx("p",{className:"text-white font-mono text-sm",children:n.id})]})]})})]})]}),s.jsx(rt,{value:"subscription",className:"space-y-6",children:s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsx(he,{children:s.jsxs(ge,{className:"text-white flex items-center gap-2",children:[s.jsx(vx,{className:"h-5 w-5"}),"Subscription Management"]})}),s.jsx(X,{className:"space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-400",children:"Assigned Plan"}),s.jsxs(Ie,{value:m==null?void 0:m.id,onValueChange:N=>{J({title:"Plan change will be implemented"})},children:[s.jsx(Re,{className:"mt-2 bg-slate-700/50 border-slate-600 text-white",children:s.jsx(Fe,{placeholder:"Select a plan"})}),s.jsx(Me,{children:i==null?void 0:i.map(N=>s.jsx(Y,{value:N.id,children:N.name},N.id))})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-400",children:"Trial End Date"}),s.jsx(ne,{type:"date",value:((j=h==null?void 0:h.trial_ends_at)==null?void 0:j.split("T")[0])||"",className:"mt-2 bg-slate-700/50 border-slate-600 text-white",onChange:N=>{J({title:"Trial date change will be implemented"})}})]}),s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-400",children:"Subscription Status"}),s.jsx("p",{className:"mt-2 text-white capitalize",children:(h==null?void 0:h.status)||"None"})]})]})]})})]})}),s.jsx(rt,{value:"entitlements",className:"space-y-6",children:s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"text-white flex items-center gap-2",children:[s.jsx(Lg,{className:"h-5 w-5"}),"Feature Entitlements"]}),s.jsx(Le,{className:"text-slate-400",children:"Configure module access and limits. Overrides apply on top of the plan defaults."})]}),s.jsx(X,{children:s.jsx("div",{className:"space-y-6",children:SFe.map(N=>{const S=f(N.key),E=l==null?void 0:l.some(C=>C.key===N.key);return s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-700 last:border-0",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium",children:N.label}),s.jsx("p",{className:"text-sm text-slate-400",children:E?s.jsx("span",{className:"text-amber-400",children:"Override active"}):"Using plan default"})]}),s.jsx("div",{className:"flex items-center gap-4",children:N.type==="boolean"?s.jsx(kn,{checked:S==="true",onCheckedChange:C=>{d.mutate({key:N.key,value:C?"true":"false"})}}):s.jsx(ne,{type:"number",value:S,onChange:C=>{d.mutate({key:N.key,value:C.target.value})},className:"w-24 bg-slate-700/50 border-slate-600 text-white"})})]},N.key)})})})]})}),s.jsx(rt,{value:"audit",className:"space-y-6",children:s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsx(he,{children:s.jsxs(ge,{className:"text-white flex items-center gap-2",children:[s.jsx(gt,{className:"h-5 w-5"}),"Audit Log"]})}),s.jsx(X,{children:(c==null?void 0:c.length)===0?s.jsx("p",{className:"text-slate-400 text-center py-8",children:"No audit logs found"}):s.jsx("div",{className:"space-y-3",children:c==null?void 0:c.map(N=>s.jsx("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-slate-700/50",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-medium",children:N.action}),s.jsxs("p",{className:"text-sm text-slate-400",children:["Target: ",N.target_type," ",N.target_id&&`(${N.target_id})`]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:de(new Date(N.created_at),"dd MMM yyyy HH:mm:ss")})]})},N.id))})})]})}),s.jsx(rt,{value:"support",className:"space-y-6",children:s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"text-white flex items-center gap-2",children:[s.jsx(ln,{className:"h-5 w-5"}),"Support Impersonation"]}),s.jsx(Le,{className:"text-slate-400",children:"Start a support session to access this organisation's HRMS as an admin. All actions will be logged."})]}),s.jsx(X,{children:r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-400",children:"Reason for impersonation"}),s.jsx(ne,{placeholder:"e.g., Customer support ticket #12345",className:"mt-2 bg-slate-700/50 border-slate-600 text-white"})]}),s.jsxs(I,{className:"gap-2",children:[s.jsx(ln,{className:"h-4 w-4"}),"Start Support Session"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Session will automatically expire after 30 minutes."})]}):s.jsx("p",{className:"text-amber-400",children:"You do not have permission to start impersonation sessions."})})]})})]})]})})})}const EFe=[{key:"module_hr_core",label:"HR Core",type:"boolean"},{key:"module_onboarding",label:"Onboarding",type:"boolean"},{key:"module_compliance",label:"Compliance",type:"boolean"},{key:"module_docs",label:"Documents",type:"boolean"},{key:"module_leave",label:"Leave Management",type:"boolean"},{key:"module_payroll",label:"Payroll",type:"boolean"},{key:"module_reporting",label:"Reporting",type:"boolean"},{key:"module_lms",label:"LMS",type:"boolean"},{key:"limit_users",label:"User Limit",type:"number"},{key:"limit_employees",label:"Employee Limit",type:"number"},{key:"limit_storage_gb",label:"Storage (GB)",type:"number"},{key:"audit_export_enabled",label:"Audit Export",type:"boolean"}];function kFe(){const[e,t]=y.useState(null),[r,n]=y.useState(!1),[a,i]=y.useState(""),[o,l]=y.useState(""),c=ai(),{isOwner:u}=zh(),{data:d,isLoading:f}=sr({queryKey:["platform-plans-list"],queryFn:async()=>{const{data:x,error:b}=await $.from("plans").select(`
          *,
          plan_entitlements (*),
          organisation_subscriptions (count)
        `).order("name");if(b)throw b;return x}}),{data:h}=sr({queryKey:["platform-plan-entitlements",e],queryFn:async()=>{if(!e)return[];const{data:x,error:b}=await $.from("plan_entitlements").select("*").eq("plan_id",e);if(b)throw b;return x},enabled:!!e}),m=Ht({mutationFn:async()=>{const{data:x,error:b}=await $.from("plans").insert({name:a,description:o,status:"active"}).select().single();if(b)throw b;return x},onSuccess:()=>{c.invalidateQueries({queryKey:["platform-plans-list"]}),n(!1),i(""),l(""),J({title:"Plan created successfully"})},onError:x=>{J({title:"Failed to create plan",description:x.message,variant:"destructive"})}}),g=Ht({mutationFn:async({key:x,value:b})=>{if(!e)return;const w=h==null?void 0:h.find(_=>_.key===x);if(w){const{error:_}=await $.from("plan_entitlements").update({value:b}).eq("id",w.id);if(_)throw _}else{const{error:_}=await $.from("plan_entitlements").insert({plan_id:e,key:x,value:b});if(_)throw _}},onSuccess:()=>{c.invalidateQueries({queryKey:["platform-plan-entitlements",e]}),J({title:"Entitlement updated"})},onError:x=>{J({title:"Failed to update",description:x.message,variant:"destructive"})}}),p=x=>{const b=h==null?void 0:h.find(w=>w.key===x);return(b==null?void 0:b.value)||"false"},v=d==null?void 0:d.find(x=>x.id===e);return s.jsx(zl,{children:s.jsx(Bl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Plans"}),s.jsx("p",{className:"text-slate-400 mt-1",children:"Manage subscription plans and entitlements"})]}),u&&s.jsxs(Rt,{open:r,onOpenChange:n,children:[s.jsx(rv,{asChild:!0,children:s.jsxs(I,{className:"gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"Create Plan"]})}),s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Create New Plan"}),s.jsx(Ot,{children:"Add a new subscription plan. You can configure entitlements after creation."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Plan Name"}),s.jsx(ne,{value:a,onChange:x=>i(x.target.value),placeholder:"e.g., Enterprise Plus"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Description"}),s.jsx(ne,{value:o,onChange:x=>l(x.target.value),placeholder:"Plan description..."})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(I,{onClick:()=>m.mutate(),disabled:!a,children:"Create Plan"})]})]})]})]}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:f?s.jsx("div",{className:"col-span-full text-center py-8 text-slate-400",children:"Loading plans..."}):d==null?void 0:d.map(x=>{var w,_,j;const b=((_=(w=x.organisation_subscriptions)==null?void 0:w[0])==null?void 0:_.count)||0;return s.jsxs(G,{className:"bg-slate-800 border-slate-700 cursor-pointer hover:border-slate-600 transition-colors",onClick:()=>t(x.id),children:[s.jsx(he,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:s.jsx(vx,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx(ge,{className:"text-white",children:x.name}),s.jsxs(Le,{className:"text-slate-400",children:[b," organisation",b!==1?"s":""]})]})]}),s.jsx(fe,{variant:"outline",className:x.status==="active"?"border-green-500/20 text-green-500":"border-slate-500/20 text-slate-400",children:x.status})]})}),s.jsxs(X,{children:[s.jsx("p",{className:"text-sm text-slate-400 line-clamp-2",children:x.description||"No description"}),s.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-slate-500",children:[s.jsx(Lg,{className:"h-4 w-4"}),((j=x.plan_entitlements)==null?void 0:j.length)||0," entitlements configured"]})]})]},x.id)})}),s.jsx(Do,{open:!!e,onOpenChange:x=>!x&&t(null),children:s.jsxs(Li,{className:"w-full sm:max-w-lg bg-slate-800 border-slate-700",children:[s.jsxs(Fi,{children:[s.jsxs(Ui,{className:"text-white flex items-center gap-2",children:[s.jsx(vx,{className:"h-5 w-5"}),v==null?void 0:v.name," Entitlements"]}),s.jsx(Ro,{className:"text-slate-400",children:"Configure default entitlements for this plan. Changes affect all organisations on this plan."})]}),s.jsxs("div",{className:"mt-6 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20 text-amber-400 text-sm mb-4",children:[s.jsx(or,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{children:"Changes will affect all organisations using this plan"})]}),EFe.map(x=>{const b=p(x.key);return s.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-700 last:border-0",children:[s.jsx(H,{className:"text-white",children:x.label}),x.type==="boolean"?s.jsx(kn,{checked:b==="true",onCheckedChange:w=>{g.mutate({key:x.key,value:w?"true":"false"})},disabled:!u}):s.jsx(ne,{type:"number",value:b,onChange:w=>{g.mutate({key:x.key,value:w.target.value})},className:"w-24 bg-slate-700/50 border-slate-600 text-white",disabled:!u})]},x.key)})]})]})})]})})})}const h4={owner:"bg-purple-500/10 text-purple-400 border-purple-500/20",admin:"bg-blue-500/10 text-blue-400 border-blue-500/20",support:"bg-green-500/10 text-green-400 border-green-500/20",support_readonly:"bg-slate-500/10 text-slate-400 border-slate-500/20"};function PFe(){const[e,t]=y.useState(!1),[r,n]=y.useState(""),[a,i]=y.useState(""),[o,l]=y.useState("support_readonly"),c=ai(),{isOwner:u}=zh(),{data:d,isLoading:f}=sr({queryKey:["platform-users-list"],queryFn:async()=>{const{data:g,error:p}=await $.from("platform_users").select("*").order("created_at",{ascending:!1});if(p)throw p;return g}}),h=Ht({mutationFn:async({id:g,status:p})=>{const{error:v}=await $.from("platform_users").update({status:p}).eq("id",g);if(v)throw v},onSuccess:()=>{c.invalidateQueries({queryKey:["platform-users-list"]}),J({title:"User status updated"})},onError:g=>{J({title:"Failed to update user",description:g.message,variant:"destructive"})}}),m=Ht({mutationFn:async({id:g,role:p})=>{const{error:v}=await $.from("platform_users").update({role:p}).eq("id",g);if(v)throw v},onSuccess:()=>{c.invalidateQueries({queryKey:["platform-users-list"]}),J({title:"User role updated"})},onError:g=>{J({title:"Failed to update role",description:g.message,variant:"destructive"})}});return s.jsx(zl,{children:s.jsx(Bl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Platform Users"}),s.jsx("p",{className:"text-slate-400 mt-1",children:"Manage platform administrator access"})]}),u&&s.jsxs(Rt,{open:e,onOpenChange:t,children:[s.jsx(rv,{asChild:!0,children:s.jsxs(I,{className:"gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"Invite User"]})}),s.jsxs(kt,{children:[s.jsxs(Pt,{children:[s.jsx(At,{children:"Invite Platform User"}),s.jsx(Ot,{children:"Add a new platform administrator. They will need an existing auth account."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Name"}),s.jsx(ne,{value:a,onChange:g=>i(g.target.value),placeholder:"Full name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Email"}),s.jsx(ne,{type:"email",value:r,onChange:g=>n(g.target.value),placeholder:"admin@example.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Role"}),s.jsxs(Ie,{value:o,onValueChange:g=>l(g),children:[s.jsx(Re,{children:s.jsx(Fe,{})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"admin",children:"Admin"}),s.jsx(Y,{value:"support",children:"Support"}),s.jsx(Y,{value:"support_readonly",children:"Support (Read-only)"})]})]})]})]}),s.jsxs(ar,{children:[s.jsx(I,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{onClick:()=>{J({title:"User invitation will be implemented via edge function"}),t(!1)},disabled:!r||!a,children:"Send Invite"})]})]})]})]}),s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsx(he,{children:s.jsxs(ge,{className:"text-white flex items-center gap-2",children:[s.jsx(Ar,{className:"h-5 w-5"}),"All Platform Users"]})}),s.jsx(X,{children:f?s.jsx("div",{className:"text-center py-8 text-slate-400",children:"Loading users..."}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(oe,{className:"text-slate-300",children:"User"}),s.jsx(oe,{className:"text-slate-300",children:"Role"}),s.jsx(oe,{className:"text-slate-300",children:"Status"}),s.jsx(oe,{className:"text-slate-300",children:"Last Login"}),s.jsx(oe,{className:"text-slate-300 text-right",children:"Actions"})]})}),s.jsxs(pr,{children:[d==null?void 0:d.map(g=>s.jsxs(ze,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(te,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-600 flex items-center justify-center",children:s.jsx(ln,{className:"h-5 w-5 text-slate-300"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:g.name}),s.jsx("p",{className:"text-sm text-slate-400",children:g.email})]})]})}),s.jsx(te,{children:u&&g.role!=="owner"?s.jsxs(Ie,{value:g.role,onValueChange:p=>m.mutate({id:g.id,role:p}),children:[s.jsx(Re,{className:"w-36 bg-transparent border-0 text-white",children:s.jsx(fe,{variant:"outline",className:h4[g.role],children:g.role})}),s.jsxs(Me,{children:[s.jsx(Y,{value:"admin",children:"Admin"}),s.jsx(Y,{value:"support",children:"Support"}),s.jsx(Y,{value:"support_readonly",children:"Support (Read-only)"})]})]}):s.jsx(fe,{variant:"outline",className:h4[g.role],children:g.role})}),s.jsx(te,{children:s.jsx(fe,{variant:"outline",className:g.status==="active"?"border-green-500/20 text-green-400":"border-red-500/20 text-red-400",children:g.status})}),s.jsx(te,{className:"text-slate-300",children:g.last_login_at?de(new Date(g.last_login_at),"dd MMM yyyy HH:mm"):"Never"}),s.jsx(te,{className:"text-right",children:u&&g.role!=="owner"&&s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",className:"text-slate-300",children:s.jsx(si,{className:"h-4 w-4"})})}),s.jsx(ss,{align:"end",children:g.status==="active"?s.jsxs(tt,{onClick:()=>h.mutate({id:g.id,status:"disabled"}),className:"text-red-400",children:[s.jsx(xx,{className:"mr-2 h-4 w-4"}),"Disable User"]}):s.jsxs(tt,{onClick:()=>h.mutate({id:g.id,status:"active"}),className:"text-green-400",children:[s.jsx(SF,{className:"mr-2 h-4 w-4"}),"Enable User"]})})]})})]},g.id)),(d==null?void 0:d.length)===0&&s.jsx(ze,{children:s.jsx(te,{colSpan:5,className:"text-center py-8 text-slate-400",children:"No platform users found"})})]})]})})]})]})})})}function AFe(){const[e,t]=y.useState(""),[r,n]=y.useState("all"),[a,i]=y.useState(""),[o,l]=y.useState(""),{isOwner:c}=zh(),{data:u,isLoading:d}=sr({queryKey:["platform-audit-logs-all",e,r,a,o],queryFn:async()=>{let m=$.from("platform_audit_logs").select(`
          *,
          platform_users!platform_audit_logs_actor_platform_user_id_fkey (
            name,
            email
          ),
          organisations (
            legal_name
          )
        `).order("created_at",{ascending:!1}).limit(100);r!=="all"&&(m=m.ilike("action",`%${r}%`)),a&&(m=m.gte("created_at",a)),o&&(m=m.lte("created_at",`${o}T23:59:59`));const{data:g,error:p}=await m;if(p)throw p;return g}}),f=u==null?void 0:u.filter(m=>{var p,v,x,b,w,_;if(!e)return!0;const g=e.toLowerCase();return((p=m.action)==null?void 0:p.toLowerCase().includes(g))||((v=m.target_type)==null?void 0:v.toLowerCase().includes(g))||((b=(x=m.platform_users)==null?void 0:x.name)==null?void 0:b.toLowerCase().includes(g))||((_=(w=m.organisations)==null?void 0:w.legal_name)==null?void 0:_.toLowerCase().includes(g))}),h=()=>{if(!(f!=null&&f.length)){J({title:"No data to export",variant:"destructive"});return}const m=["Date","Actor","Action","Target Type","Target ID","Organisation"],g=f.map(w=>{var _,j;return[de(new Date(w.created_at),"yyyy-MM-dd HH:mm:ss"),((_=w.platform_users)==null?void 0:_.name)||"System",w.action,w.target_type||"",w.target_id||"",((j=w.organisations)==null?void 0:j.legal_name)||""]}),p=[m,...g].map(w=>w.join(",")).join(`
`),v=new Blob([p],{type:"text/csv"}),x=URL.createObjectURL(v),b=document.createElement("a");b.href=x,b.download=`audit-logs-${de(new Date,"yyyy-MM-dd")}.csv`,b.click(),URL.revokeObjectURL(x),J({title:"Audit logs exported"})};return s.jsx(zl,{children:s.jsx(Bl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Audit Logs"}),s.jsx("p",{className:"text-slate-400 mt-1",children:"View platform-wide audit trail"})]}),c&&s.jsxs(I,{onClick:h,variant:"outline",className:"gap-2",children:[s.jsx(Es,{className:"h-4 w-4"}),"Export CSV"]})]}),s.jsx(G,{className:"bg-slate-800 border-slate-700",children:s.jsx(X,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(un,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),s.jsx(ne,{placeholder:"Search logs...",value:e,onChange:m=>t(m.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-white"})]}),s.jsxs(Ie,{value:r,onValueChange:n,children:[s.jsxs(Re,{className:"w-[180px] bg-slate-700/50 border-slate-600 text-white",children:[s.jsx(v0,{className:"mr-2 h-4 w-4"}),s.jsx(Fe,{placeholder:"Filter action"})]}),s.jsxs(Me,{children:[s.jsx(Y,{value:"all",children:"All Actions"}),s.jsx(Y,{value:"create",children:"Create"}),s.jsx(Y,{value:"update",children:"Update"}),s.jsx(Y,{value:"delete",children:"Delete"}),s.jsx(Y,{value:"impersonate",children:"Impersonate"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ne,{type:"date",value:a,onChange:m=>i(m.target.value),className:"bg-slate-700/50 border-slate-600 text-white",placeholder:"From"}),s.jsx(ne,{type:"date",value:o,onChange:m=>l(m.target.value),className:"bg-slate-700/50 border-slate-600 text-white",placeholder:"To"})]})]})})}),s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsx(he,{children:s.jsxs(ge,{className:"text-white flex items-center gap-2",children:[s.jsx(gt,{className:"h-5 w-5"}),"Audit Trail"]})}),s.jsx(X,{children:d?s.jsx("div",{className:"text-center py-8 text-slate-400",children:"Loading audit logs..."}):s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(oe,{className:"text-slate-300",children:"Timestamp"}),s.jsx(oe,{className:"text-slate-300",children:"Actor"}),s.jsx(oe,{className:"text-slate-300",children:"Action"}),s.jsx(oe,{className:"text-slate-300",children:"Target"}),s.jsx(oe,{className:"text-slate-300",children:"Organisation"})]})}),s.jsxs(pr,{children:[f==null?void 0:f.map(m=>{var g,p,v;return s.jsxs(ze,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(te,{className:"text-slate-300 font-mono text-sm",children:de(new Date(m.created_at),"dd MMM yyyy HH:mm:ss")}),s.jsx(te,{children:s.jsxs("div",{children:[s.jsx("p",{className:"text-white",children:((g=m.platform_users)==null?void 0:g.name)||"System"}),s.jsx("p",{className:"text-xs text-slate-400",children:((p=m.platform_users)==null?void 0:p.email)||""})]})}),s.jsx(te,{children:s.jsx("span",{className:"px-2 py-1 rounded bg-slate-700 text-slate-200 text-sm",children:m.action})}),s.jsx(te,{className:"text-slate-300",children:m.target_type&&s.jsxs("span",{children:[m.target_type,m.target_id&&s.jsxs("span",{className:"text-slate-500 text-xs ml-1",children:["(",m.target_id.slice(0,8),"...)"]})]})}),s.jsx(te,{className:"text-slate-300",children:((v=m.organisations)==null?void 0:v.legal_name)||"-"})]},m.id)}),(f==null?void 0:f.length)===0&&s.jsx(ze,{children:s.jsx(te,{colSpan:5,className:"text-center py-8 text-slate-400",children:"No audit logs found"})})]})]})})]})]})})})}function OFe(){const{isOwner:e}=zh(),t=()=>{J({title:"Settings saved",description:"Platform settings have been updated."})};return s.jsx(zl,{children:s.jsx(Bl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Platform Settings"}),s.jsx("p",{className:"text-slate-400 mt-1",children:"Configure global platform settings"})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"text-white flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Trial Settings"]}),s.jsx(Le,{className:"text-slate-400",children:"Configure default trial period for new organisations"})]}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{className:"text-slate-200",children:"Default Trial Length (days)"}),s.jsx(ne,{type:"number",defaultValue:14,className:"bg-slate-700/50 border-slate-600 text-white",disabled:!e})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-200",children:"Auto-suspend on trial expiry"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Automatically suspend orgs when trial ends"})]}),s.jsx(kn,{defaultChecked:!0,disabled:!e})]})]})]}),s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"text-white flex items-center gap-2",children:[s.jsx(ln,{className:"h-5 w-5"}),"Security Settings"]}),s.jsx(Le,{className:"text-slate-400",children:"Configure platform security options"})]}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{className:"text-slate-200",children:"Session Timeout (minutes)"}),s.jsx(ne,{type:"number",defaultValue:60,className:"bg-slate-700/50 border-slate-600 text-white",disabled:!e})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{className:"text-slate-200",children:"Impersonation Session Max (minutes)"}),s.jsx(ne,{type:"number",defaultValue:30,className:"bg-slate-700/50 border-slate-600 text-white",disabled:!e})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-200",children:"Require MFA for platform users"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Enforce MFA for all platform admins"})]}),s.jsx(kn,{disabled:!e})]})]})]}),s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"text-white flex items-center gap-2",children:[s.jsx(iG,{className:"h-5 w-5"}),"Audit & Retention"]}),s.jsx(Le,{className:"text-slate-400",children:"Configure audit log retention policies"})]}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{className:"text-slate-200",children:"Audit Log Retention (days)"}),s.jsx(ne,{type:"number",defaultValue:365,className:"bg-slate-700/50 border-slate-600 text-white",disabled:!e})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-200",children:"Log all API access"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Record all API calls (increases storage)"})]}),s.jsx(kn,{disabled:!e})]})]})]}),s.jsxs(G,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"text-white flex items-center gap-2",children:[s.jsx(Lg,{className:"h-5 w-5"}),"Notifications"]}),s.jsx(Le,{className:"text-slate-400",children:"Configure platform notification preferences"})]}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-200",children:"Trial expiry alerts"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Notify when org trials are expiring"})]}),s.jsx(kn,{defaultChecked:!0,disabled:!e})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(H,{className:"text-slate-200",children:"Security event alerts"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Notify on suspicious activity"})]}),s.jsx(kn,{defaultChecked:!0,disabled:!e})]})]})]})]}),e&&s.jsx("div",{className:"flex justify-end",children:s.jsx(I,{onClick:t,size:"lg",children:"Save Settings"})})]})})})}class TFe{async getAuditPacks(t){const{data:r,error:n}=await $.from("audit_packs").select("*").eq("organisation_id",t).order("created_at",{ascending:!1});if(n)throw console.error("[AuditPackService] Failed to fetch audit packs:",n),n;return(r||[]).map(this.mapAuditPack)}async getAuditPack(t){const{data:r,error:n}=await $.from("audit_packs").select("*").eq("id",t).maybeSingle();if(n)throw console.error("[AuditPackService] Failed to fetch audit pack:",n),n;return r?this.mapAuditPack(r):null}async getPreview(t,r,n,a,i){const o={},l=a||"1900-01-01",c=i||"2100-12-31";switch(t){case"employee_compliance":if(n){const{count:b}=await $.from("employee_certifications").select("*",{count:"exact",head:!0}).eq("employee_id",n);o.certifications=b||0;const{count:w}=await $.from("compliance_overrides").select("*",{count:"exact",head:!0}).eq("employee_id",n);o.overrides=w||0;const{count:_}=await $.from("audit_logs").select("*",{count:"exact",head:!0}).eq("entity_id",n);o.auditLogs=_||0}break;case"organisation_compliance":const{count:u}=await $.from("employees").select("*",{count:"exact",head:!0}).eq("organisation_id",r);o.employees=u||0;const{count:d}=await $.from("employee_certifications").select("*",{count:"exact",head:!0}).eq("organisation_id",r);o.certifications=d||0;const{count:f}=await $.from("compliance_overrides").select("*",{count:"exact",head:!0}).eq("organisation_id",r).gte("created_at",l).lte("created_at",c);o.overrides=f||0;break;case"hr_incidents":let h=$.from("hr_cases").select("*",{count:"exact",head:!0}).eq("organisation_id",r).gte("created_at",l).lte("created_at",c);n&&(h=h.eq("employee_id",n));const{count:m}=await h;o.cases=m||0;break;case"payroll_verification":let g=$.from("timesheets").select("*",{count:"exact",head:!0}).eq("organisation_id",r).gte("date",l).lte("date",c);n&&(g=g.eq("employee_id",n));const{count:p}=await g;o.timesheets=p||0;const{count:v}=await $.from("pay_periods").select("*",{count:"exact",head:!0}).eq("organisation_id",r);o.payPeriods=v||0;const{count:x}=await $.from("payroll_exports").select("*",{count:"exact",head:!0}).eq("organisation_id",r).gte("created_at",l).lte("created_at",c);o.payrollExports=x||0;break}return{pack_type:t,scope:n?"Single Employee":"Organisation-wide",dateRange:a&&i?`${a} to ${i}`:"All time",estimatedRecords:o}}async createAuditPack(t,r){const{data:{user:n}}=await $.auth.getUser();if(!n)throw new Error("Not authenticated");const{data:a}=await $.from("profiles").select("display_name").eq("user_id",n.id).maybeSingle(),i={organisation_id:t,pack_type:r.pack_type,employee_id:r.employee_id||null,date_range_start:r.date_range_start||null,date_range_end:r.date_range_end||null,include_restricted_content:r.include_restricted_content||!1,include_attachments:r.include_attachments||!1,generated_by:n.id,generated_by_name:(a==null?void 0:a.display_name)||n.email,generated_by_email:n.email,status:"pending"},{data:o,error:l}=await $.from("audit_packs").insert(i).select().single();if(l)throw console.error("[AuditPackService] Failed to create audit pack:",l),l;return await _r.log({action:"document.upload",entityType:"document",entityId:o.id,organisationId:t,afterState:{pack_type:r.pack_type,employee_id:r.employee_id,date_range:`${r.date_range_start} - ${r.date_range_end}`,include_restricted:r.include_restricted_content,action:"audit_pack_requested"}}),this.mapAuditPack(o)}async generatePack(t){const{error:r}=await $.functions.invoke("generate-audit-pack",{body:{packId:t}});if(r)throw console.error("[AuditPackService] Failed to trigger pack generation:",r),r}async getDownloadUrl(t){const{data:r,error:n}=await $.storage.from("audit-packs").createSignedUrl(t,3600);if(n)throw console.error("[AuditPackService] Failed to get download URL:",n),n;return r.signedUrl}mapAuditPack(t){return{id:t.id,organisation_id:t.organisation_id,pack_type:t.pack_type,status:t.status,employee_id:t.employee_id,date_range_start:t.date_range_start,date_range_end:t.date_range_end,include_restricted_content:t.include_restricted_content,include_attachments:t.include_attachments,generated_by:t.generated_by,generated_by_name:t.generated_by_name,generated_by_email:t.generated_by_email,file_urls:t.file_urls||[],summary:t.summary||{},error_message:t.error_message,retention_days:t.retention_days,expires_at:t.expires_at,started_at:t.started_at,completed_at:t.completed_at,created_at:t.created_at,updated_at:t.updated_at}}}const Nm=new TFe;function pH(e){const t=ai(),{data:r}=sr({queryKey:["current-org-id"],queryFn:async()=>{const{data:g,error:p}=await $.auth.getUser();if(p)throw p;const v=g.user;if(!v)return null;const{data:x,error:b}=await $.rpc("get_user_organisation_id",{_user_id:v.id});if(b)throw b;return x},enabled:!e}),n=r,{data:a=[],isLoading:i,error:o,refetch:l}=sr({queryKey:["audit-packs",n],queryFn:async()=>n?Nm.getAuditPacks(n):[],enabled:!!n,refetchInterval:1e4}),c=Ht({mutationFn:async({packType:g,employeeId:p,dateRangeStart:v,dateRangeEnd:x})=>{if(!n)throw new Error("Organisation not found");return Nm.getPreview(g,n,p,v,x)}}),u=Ht({mutationFn:async g=>{if(!n)throw new Error("Organisation not found");const p=await Nm.createAuditPack(n,g);return await Nm.generatePack(p.id),p},onSuccess:()=>{t.invalidateQueries({queryKey:["audit-packs",n]}),J({title:"Audit Pack Requested",description:"Your audit pack is being generated. This may take a few moments."})},onError:g=>{console.error("[useAuditPacks] Create failed:",g),J({title:"Error",description:"Failed to create audit pack. Please try again.",variant:"destructive"})}}),d=Ht({mutationFn:async g=>Nm.getDownloadUrl(g),onError:g=>{console.error("[useAuditPacks] Download failed:",g),J({title:"Error",description:"Failed to get download link. Please try again.",variant:"destructive"})}}),f=a.filter(g=>g.status==="completed"),h=a.filter(g=>g.status==="pending"||g.status==="generating"),m=a.filter(g=>g.status==="failed");return{auditPacks:a,completedPacks:f,pendingPacks:h,failedPacks:m,organisationId:n,isLoading:i,error:o,getPreview:c.mutateAsync,createAuditPack:u.mutateAsync,getDownloadUrl:d.mutateAsync,refetch:l,isCreating:u.isPending,isPreviewing:c.isPending,isDownloading:d.isPending,preview:c.data}}const Hy={employee_compliance:"Employee Compliance Audit Pack",organisation_compliance:"Organisation Compliance Overview",hr_incidents:"HR Incidents & Disciplinary Pack",payroll_verification:"Payroll & Timesheet Verification"},DFe={employee_compliance:"Complete compliance history for a selected employee including certifications, overrides, and audit trail.",organisation_compliance:"Organisation-wide compliance snapshot including all employees, certifications, and enforcement events.",hr_incidents:"HR case register with findings, outcomes, disciplinary actions, and full audit trail.",payroll_verification:"Timesheet verification including approvals, edits, and pay rate history."};function RFe(){const[e,t]=y.useState("organisation_compliance"),[r,n]=y.useState(null),[a,i]=y.useState(),[o,l]=y.useState(),[c,u]=y.useState(!1),[d,f]=y.useState(!1),[h,m]=y.useState(!1),{employees:g,isLoading:p}=xa(),{getPreview:v,createAuditPack:x,isCreating:b,isPreviewing:w,preview:_}=pH(),j=e==="employee_compliance",N=["employee_compliance","hr_incidents","payroll_verification"].includes(e);y.useEffect(()=>{N||n(null)},[e,N]),y.useEffect(()=>{if(j&&!r)return;const C=setTimeout(()=>{v({packType:e,employeeId:N?r:null,dateRangeStart:a?de(a,"yyyy-MM-dd"):null,dateRangeEnd:o?de(o,"yyyy-MM-dd"):null}).catch(console.error)},500);return()=>clearTimeout(C)},[e,r,a,o,j,N,v]);const S=async()=>{j&&!r||c&&!h||await x({pack_type:e,employee_id:N?r:null,date_range_start:a?de(a,"yyyy-MM-dd"):null,date_range_end:o?de(o,"yyyy-MM-dd"):null,include_restricted_content:c,include_attachments:d})},E=(!j||r)&&(!c||h)&&!b;return s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"flex items-center gap-2",children:[s.jsx(xf,{className:"h-5 w-5"}),"Select Audit Pack Type"]}),s.jsx(Le,{children:"Choose the type of audit pack to generate"})]}),s.jsx(X,{className:"grid gap-4 sm:grid-cols-2",children:Object.keys(Hy).map(C=>s.jsxs("button",{onClick:()=>t(C),className:ae("p-4 rounded-lg border text-left transition-all",e===C?"border-primary bg-primary/5 ring-1 ring-primary":"border-border hover:border-primary/50 hover:bg-muted/50"),children:[s.jsx("div",{className:"font-medium",children:Hy[C]}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:DFe[C]})]},C))})]}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"h-5 w-5"}),"Define Scope"]}),s.jsx(Le,{children:"Set the employee and date range for the audit pack"})]}),s.jsxs(X,{className:"space-y-4",children:[N&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(H,{children:["Employee ",j&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(Ie,{value:r||"all",onValueChange:C=>n(C==="all"?null:C),disabled:p,children:[s.jsx(Re,{children:s.jsx(Fe,{placeholder:"Select employee..."})}),s.jsxs(Me,{children:[!j&&s.jsx(Y,{value:"all",children:"All Employees"}),g.map(C=>s.jsxs(Y,{value:C.id,children:[C.first_name," ",C.last_name]},C.id))]})]})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"Start Date"}),s.jsxs(Di,{children:[s.jsx(Ri,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:ae("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[s.jsx(Vt,{className:"mr-2 h-4 w-4"}),a?de(a,"PPP"):"All time"]})}),s.jsx(ei,{className:"w-auto p-0",align:"start",children:s.jsx(ri,{mode:"single",selected:a,onSelect:i,initialFocus:!0})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(H,{children:"End Date"}),s.jsxs(Di,{children:[s.jsx(Ri,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:ae("w-full justify-start text-left font-normal",!o&&"text-muted-foreground"),children:[s.jsx(Vt,{className:"mr-2 h-4 w-4"}),o?de(o,"PPP"):"All time"]})}),s.jsx(ei,{className:"w-auto p-0",align:"start",children:s.jsx(ri,{mode:"single",selected:o,onSelect:l,initialFocus:!0})})]})]})]})]})]}),s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"flex items-center gap-2",children:[s.jsx(bf,{className:"h-5 w-5"}),"Options"]}),s.jsx(Le,{children:"Configure what to include in the audit pack"})]}),s.jsxs(X,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(H,{children:"Include Attachments"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Include uploaded documents and evidence files"})]}),s.jsx(kn,{checked:d,onCheckedChange:f})]}),s.jsx(Et,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(H,{className:"flex items-center gap-2",children:["Include Restricted Content",s.jsx(fe,{variant:"destructive",className:"text-xs",children:"Sensitive"})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Include confidential HR notes and restricted evidence"})]}),s.jsx(kn,{checked:c,onCheckedChange:C=>{u(C),C||m(!1)}})]}),c&&s.jsxs(Ll,{variant:"destructive",children:[s.jsx(or,{className:"h-4 w-4"}),s.jsxs(Fl,{className:"space-y-2",children:[s.jsx("p",{children:"Restricted content may contain sensitive personal information and confidential investigation details."}),s.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[s.jsx(kn,{checked:h,onCheckedChange:m}),s.jsx("span",{className:"text-sm",children:"I confirm I have authority to access restricted content"})]})]})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsxs(ge,{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-5 w-5"}),"Pack Preview"]}),s.jsx(Le,{children:"Estimated contents of the audit pack"})]}),s.jsx(X,{className:"space-y-4",children:w?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(We,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):_?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Pack Type"}),s.jsx("span",{className:"font-medium",children:Hy[_.pack_type]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Scope"}),s.jsx("span",{className:"font-medium",children:_.scope})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date Range"}),s.jsx("span",{className:"font-medium",children:_.dateRange})]})]}),s.jsx(Et,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm font-medium",children:"Estimated Records"}),Object.entries(_.estimatedRecords).map(([C,P])=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground capitalize",children:C.replace(/([A-Z])/g," $1").trim()}),s.jsx(fe,{variant:"secondary",children:P})]},C))]})]}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(WN,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:j&&!r?"Select an employee to see preview":"Loading preview..."})]})})]}),s.jsx(I,{className:"w-full",size:"lg",onClick:S,disabled:!E,children:b?s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xf,{className:"mr-2 h-4 w-4"}),"Generate Audit Pack"]})}),s.jsxs(Ll,{children:[s.jsx(WN,{className:"h-4 w-4"}),s.jsx(Fl,{children:"Audit packs are retained for 90 days and all generation actions are logged for compliance purposes."})]})]})]})}const MFe={pending:{label:"Pending",variant:"secondary",icon:xt},generating:{label:"Generating",variant:"default",icon:We},completed:{label:"Completed",variant:"default",icon:jt},failed:{label:"Failed",variant:"destructive",icon:An},expired:{label:"Expired",variant:"outline",icon:or}};function $Fe(){const{auditPacks:e,isLoading:t,getDownloadUrl:r,isDownloading:n}=pH(),[a,i]=y.useState(null),o=async(l,c)=>{i(l);try{const u=await r(c);window.open(u,"_blank")}finally{i(null)}};return t?s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{children:"Export History"}),s.jsx(Le,{children:"Previously generated audit packs"})]}),s.jsx(X,{children:s.jsx("div",{className:"space-y-3",children:[1,2,3].map(l=>s.jsx($t,{className:"h-16 w-full"},l))})})]}):e.length===0?s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{children:"Export History"}),s.jsx(Le,{children:"Previously generated audit packs"})]}),s.jsx(X,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(xf,{className:"h-12 w-12 mx-auto text-muted-foreground opacity-50"}),s.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No audit packs yet"}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Generate your first audit pack using the builder tab"})]})})]}):s.jsxs(G,{children:[s.jsxs(he,{children:[s.jsx(ge,{children:"Export History"}),s.jsxs(Le,{children:[e.length," audit pack",e.length!==1?"s":""," generated"]})]}),s.jsx(X,{children:s.jsxs(hr,{children:[s.jsx(mr,{children:s.jsxs(ze,{children:[s.jsx(oe,{children:"Pack Type"}),s.jsx(oe,{children:"Scope"}),s.jsx(oe,{children:"Generated By"}),s.jsx(oe,{children:"Status"}),s.jsx(oe,{children:"Created"}),s.jsx(oe,{children:"Expires"}),s.jsx(oe,{className:"w-[80px]"})]})}),s.jsx(pr,{children:e.map(l=>{const c=MFe[l.status],u=c.icon,d=l.status==="generating"||l.status==="pending";return s.jsxs(ze,{children:[s.jsxs(te,{children:[s.jsx("div",{className:"font-medium",children:Hy[l.pack_type]}),l.include_restricted_content&&s.jsx(fe,{variant:"destructive",className:"text-xs mt-1",children:"Includes Restricted"})]}),s.jsxs(te,{children:[s.jsx("div",{className:"text-sm",children:l.employee_id?"Single Employee":"Organisation-wide"}),l.date_range_start&&l.date_range_end&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:[de(new Date(l.date_range_start),"MMM d, yyyy")," - "," ",de(new Date(l.date_range_end),"MMM d, yyyy")]})]}),s.jsxs(te,{children:[s.jsx("div",{className:"text-sm",children:l.generated_by_name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:l.generated_by_email})]}),s.jsxs(te,{children:[s.jsxs(fe,{variant:c.variant,className:"flex items-center gap-1 w-fit",children:[s.jsx(u,{className:`h-3 w-3 ${d?"animate-spin":""}`}),c.label]}),l.status==="failed"&&l.error_message&&s.jsx("div",{className:"text-xs text-destructive mt-1 max-w-[200px] truncate",children:l.error_message})]}),s.jsxs(te,{children:[s.jsx("div",{className:"text-sm",children:de(new Date(l.created_at),"MMM d, yyyy")}),s.jsx("div",{className:"text-xs text-muted-foreground",children:de(new Date(l.created_at),"HH:mm")})]}),s.jsx(te,{children:l.expires_at?s.jsx("div",{className:"text-sm text-muted-foreground",children:ok(new Date(l.expires_at),{addSuffix:!0})}):s.jsx("span",{className:"text-muted-foreground",children:""})}),s.jsx(te,{children:l.status==="completed"&&l.file_urls.length>0?s.jsxs(Ns,{children:[s.jsx(Ss,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:a===l.id?s.jsx(We,{className:"h-4 w-4 animate-spin"}):s.jsx(si,{className:"h-4 w-4"})})}),s.jsx(ss,{align:"end",children:l.file_urls.map((f,h)=>{const m=f.split("/").pop()||`File ${h+1}`;return s.jsxs(tt,{onClick:()=>o(l.id,f),children:[s.jsx(Es,{className:"mr-2 h-4 w-4"}),m]},f)})})]}):s.jsx("span",{className:"text-muted-foreground",children:""})})]},l.id)})})]})})]})}function IFe(){const[e,t]=y.useState("builder");return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Audit & Exports"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate regulator-ready audit packs for compliance verification"})]}),s.jsxs(bn,{value:e,onValueChange:t,className:"space-y-4",children:[s.jsxs(fn,{children:[s.jsxs(Ve,{value:"builder",className:"flex items-center gap-2",children:[s.jsx(xf,{className:"h-4 w-4"}),"Audit Pack Builder"]}),s.jsxs(Ve,{value:"history",className:"flex items-center gap-2",children:[s.jsx(Xa,{className:"h-4 w-4"}),"Export History"]})]}),s.jsx(rt,{value:"builder",children:s.jsx(RFe,{})}),s.jsx(rt,{value:"history",children:s.jsx($Fe,{})})]})]})}const LFe=new TQ,yr=({children:e})=>s.jsx(Gae,{children:s.jsx(OU,{children:e})}),FFe=()=>s.jsx(IQ,{client:LFe,children:s.jsxs(gQ,{children:[s.jsx(ZG,{}),s.jsx(AY,{}),s.jsx(qZ,{basename:"/teamstride-care",children:s.jsxs(IZ,{children:[s.jsx(Ct,{path:"/",element:s.jsx(fie,{})}),s.jsx(Ct,{path:"/auth",element:s.jsx(goe,{})}),s.jsx(Ct,{path:"/employees",element:s.jsx(yr,{children:s.jsx(Tue,{})})}),s.jsx(Ct,{path:"/employees/deactivated",element:s.jsx(yr,{children:s.jsx(Gue,{})})}),s.jsx(Ct,{path:"/compliance",element:s.jsx(yr,{children:s.jsx(ede,{})})}),s.jsx(Ct,{path:"/leave",element:s.jsx(yr,{children:s.jsx(ude,{})})}),s.jsx(Ct,{path:"/timesheets",element:s.jsx(yr,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Timesheets"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Coming soon..."})]})})}),s.jsx(Ct,{path:"/recruitment",element:s.jsx(yr,{children:s.jsx(bde,{})})}),s.jsx(Ct,{path:"/documents",element:s.jsx(yr,{children:s.jsx(Wde,{})})}),s.jsx(Ct,{path:"/contracts",element:s.jsx(yr,{children:s.jsx(Rde,{})})}),s.jsx(Ct,{path:"/performance",element:s.jsx(yr,{children:s.jsx(eLe,{})})}),s.jsx(Ct,{path:"/payroll",element:s.jsx(yr,{children:s.jsx(efe,{})})}),s.jsx(Ct,{path:"/payroll-export",element:s.jsx(yr,{children:s.jsx(vfe,{})})}),s.jsx(Ct,{path:"/reports",element:s.jsx(yr,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Reports"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Coming soon..."})]})})}),s.jsx(Ct,{path:"/hr-cases",element:s.jsx(yr,{children:s.jsx(PLe,{})})}),s.jsx(Ct,{path:"/audit-exports",element:s.jsx(yr,{children:s.jsx(IFe,{})})}),s.jsx(Ct,{path:"/settings",element:s.jsx(yr,{children:s.jsx(aLe,{})})}),s.jsx(Ct,{path:"/help",element:s.jsx(yr,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Help Center"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Coming soon..."})]})})}),s.jsx(Ct,{path:"/portal",element:s.jsx(yr,{children:s.jsx(TLe,{})})}),s.jsx(Ct,{path:"/portal/documents",element:s.jsx(yr,{children:s.jsx(RLe,{})})}),s.jsx(Ct,{path:"/portal/training",element:s.jsx(yr,{children:s.jsx($Le,{})})}),s.jsx(Ct,{path:"/portal/profile",element:s.jsx(yr,{children:s.jsx(ILe,{})})}),s.jsx(Ct,{path:"/portal/reviews",element:s.jsx(yr,{children:s.jsx(VLe,{})})}),s.jsx(Ct,{path:"/portal/goals",element:s.jsx(yr,{children:s.jsx(hFe,{})})}),s.jsx(Ct,{path:"/lms",element:s.jsx(yr,{children:s.jsx(mFe,{})})}),s.jsx(Ct,{path:"/lms/course/:courseId",element:s.jsx(yr,{children:s.jsx(vFe,{})})}),s.jsx(Ct,{path:"/lms/assignments",element:s.jsx(yr,{children:s.jsx(bFe,{})})}),s.jsx(Ct,{path:"/platform/login",element:s.jsx(wFe,{})}),s.jsx(Ct,{path:"/platform/orgs",element:s.jsx(_Fe,{})}),s.jsx(Ct,{path:"/platform/orgs/:id",element:s.jsx(CFe,{})}),s.jsx(Ct,{path:"/platform/plans",element:s.jsx(kFe,{})}),s.jsx(Ct,{path:"/platform/users",element:s.jsx(PFe,{})}),s.jsx(Ct,{path:"/platform/audit",element:s.jsx(AFe,{})}),s.jsx(Ct,{path:"/platform/settings",element:s.jsx(OFe,{})}),s.jsx(Ct,{path:"*",element:s.jsx(iLe,{})})]})})]})});IL(document.getElementById("root")).render(s.jsx(FFe,{}));
