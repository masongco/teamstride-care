var ZP=e=>{throw TypeError(e)};var Zw=(e,t,r)=>t.has(e)||ZP("Cannot "+r);var V=(e,t,r)=>(Zw(e,t,"read from private field"),r?r.call(e):t.get(e)),He=(e,t,r)=>t.has(e)?ZP("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ke=(e,t,r,n)=>(Zw(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),mt=(e,t,r)=>(Zw(e,t,"access private method"),r);var gv=(e,t,r,n)=>({set _(a){ke(e,t,a,r)},get _(){return V(e,t,n)}});function AH(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var vv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o$={exports:{}},Kb={},l$={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg=Symbol.for("react.element"),OH=Symbol.for("react.portal"),TH=Symbol.for("react.fragment"),DH=Symbol.for("react.strict_mode"),RH=Symbol.for("react.profiler"),MH=Symbol.for("react.provider"),$H=Symbol.for("react.context"),IH=Symbol.for("react.forward_ref"),LH=Symbol.for("react.suspense"),FH=Symbol.for("react.memo"),UH=Symbol.for("react.lazy"),JP=Symbol.iterator;function BH(e){return e===null||typeof e!="object"?null:(e=JP&&e[JP]||e["@@iterator"],typeof e=="function"?e:null)}var c$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u$=Object.assign,d$={};function ih(e,t,r){this.props=e,this.context=t,this.refs=d$,this.updater=r||c$}ih.prototype.isReactComponent={};ih.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ih.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function f$(){}f$.prototype=ih.prototype;function fC(e,t,r){this.props=e,this.context=t,this.refs=d$,this.updater=r||c$}var hC=fC.prototype=new f$;hC.constructor=fC;u$(hC,ih.prototype);hC.isPureReactComponent=!0;var eA=Array.isArray,h$=Object.prototype.hasOwnProperty,mC={current:null},m$={key:!0,ref:!0,__self:!0,__source:!0};function p$(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)h$.call(t,n)&&!m$.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Pg,type:e,key:i,ref:o,props:a,_owner:mC.current}}function zH(e,t){return{$$typeof:Pg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pC(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pg}function VH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var tA=/\/+/g;function Jw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?VH(""+e.key):t.toString(36)}function my(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Pg:case OH:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Jw(o,0):n,eA(a)?(r="",e!=null&&(r=e.replace(tA,"$&/")+"/"),my(a,t,r,"",function(u){return u})):a!=null&&(pC(a)&&(a=zH(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(tA,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",eA(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Jw(i,l);o+=my(i,t,r,c,a)}else if(c=BH(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Jw(i,l++),o+=my(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function yv(e,t,r){if(e==null)return e;var n=[],a=0;return my(e,n,"","",function(i){return t.call(r,i,a++)}),n}function qH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var is={current:null},py={transition:null},WH={ReactCurrentDispatcher:is,ReactCurrentBatchConfig:py,ReactCurrentOwner:mC};function g$(){throw Error("act(...) is not supported in production builds of React.")}St.Children={map:yv,forEach:function(e,t,r){yv(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return yv(e,function(){t++}),t},toArray:function(e){return yv(e,function(t){return t})||[]},only:function(e){if(!pC(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};St.Component=ih;St.Fragment=TH;St.Profiler=RH;St.PureComponent=fC;St.StrictMode=DH;St.Suspense=LH;St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WH;St.act=g$;St.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=u$({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=mC.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)h$.call(t,c)&&!m$.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Pg,type:e.type,key:a,ref:i,props:n,_owner:o}};St.createContext=function(e){return e={$$typeof:$H,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:MH,_context:e},e.Consumer=e};St.createElement=p$;St.createFactory=function(e){var t=p$.bind(null,e);return t.type=e,t};St.createRef=function(){return{current:null}};St.forwardRef=function(e){return{$$typeof:IH,render:e}};St.isValidElement=pC;St.lazy=function(e){return{$$typeof:UH,_payload:{_status:-1,_result:e},_init:qH}};St.memo=function(e,t){return{$$typeof:FH,type:e,compare:t===void 0?null:t}};St.startTransition=function(e){var t=py.transition;py.transition={};try{e()}finally{py.transition=t}};St.unstable_act=g$;St.useCallback=function(e,t){return is.current.useCallback(e,t)};St.useContext=function(e){return is.current.useContext(e)};St.useDebugValue=function(){};St.useDeferredValue=function(e){return is.current.useDeferredValue(e)};St.useEffect=function(e,t){return is.current.useEffect(e,t)};St.useId=function(){return is.current.useId()};St.useImperativeHandle=function(e,t,r){return is.current.useImperativeHandle(e,t,r)};St.useInsertionEffect=function(e,t){return is.current.useInsertionEffect(e,t)};St.useLayoutEffect=function(e,t){return is.current.useLayoutEffect(e,t)};St.useMemo=function(e,t){return is.current.useMemo(e,t)};St.useReducer=function(e,t,r){return is.current.useReducer(e,t,r)};St.useRef=function(e){return is.current.useRef(e)};St.useState=function(e){return is.current.useState(e)};St.useSyncExternalStore=function(e,t,r){return is.current.useSyncExternalStore(e,t,r)};St.useTransition=function(){return is.current.useTransition()};St.version="18.3.1";l$.exports=St;var x=l$.exports;const O=Kt(x),gC=AH({__proto__:null,default:O},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HH=x,KH=Symbol.for("react.element"),GH=Symbol.for("react.fragment"),YH=Object.prototype.hasOwnProperty,XH=HH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QH={key:!0,ref:!0,__self:!0,__source:!0};function v$(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)YH.call(t,n)&&!QH.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:KH,type:e,key:i,ref:o,props:a,_owner:XH.current}}Kb.Fragment=GH;Kb.jsx=v$;Kb.jsxs=v$;o$.exports=Kb;var s=o$.exports,y$={exports:{}},ea={},x$={exports:{}},b$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,T){var U=D.length;D.push(T);e:for(;0<U;){var X=U-1>>>1,H=D[X];if(0<a(H,T))D[X]=T,D[U]=H,U=X;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var T=D[0],U=D.pop();if(U!==T){D[0]=U;e:for(var X=0,H=D.length,ae=H>>>1;X<ae;){var he=2*(X+1)-1,Pe=D[he],Ae=he+1,ue=D[Ae];if(0>a(Pe,U))Ae<H&&0>a(ue,Pe)?(D[X]=ue,D[Ae]=U,X=Ae):(D[X]=Pe,D[he]=U,X=he);else if(Ae<H&&0>a(ue,U))D[X]=ue,D[Ae]=U,X=Ae;else break e}}return T}function a(D,T){var U=D.sortIndex-T.sortIndex;return U!==0?U:D.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var T=r(u);T!==null;){if(T.callback===null)n(u);else if(T.startTime<=D)n(u),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(u)}}function _(D){if(p=!1,w(D),!g)if(r(c)!==null)g=!0,F(j);else{var T=r(u);T!==null&&L(_,T.startTime-D)}}function j(D,T){g=!1,p&&(p=!1,b(k),k=-1),m=!0;var U=h;try{for(w(T),f=r(c);f!==null&&(!(f.expirationTime>T)||D&&!A());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var H=X(f.expirationTime<=T);T=e.unstable_now(),typeof H=="function"?f.callback=H:f===r(c)&&n(c),w(T)}else n(c);f=r(c)}if(f!==null)var ae=!0;else{var he=r(u);he!==null&&L(_,he.startTime-T),ae=!1}return ae}finally{f=null,h=U,m=!1}}var N=!1,S=null,k=-1,C=5,P=-1;function A(){return!(e.unstable_now()-P<C)}function E(){if(S!==null){var D=e.unstable_now();P=D;var T=!0;try{T=S(!0,D)}finally{T?R():(N=!1,S=null)}}else N=!1}var R;if(typeof y=="function")R=function(){y(E)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,B=$.port2;$.port1.onmessage=E,R=function(){B.postMessage(null)}}else R=function(){v(E,0)};function F(D){S=D,N||(N=!0,R())}function L(D,T){k=v(function(){D(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,F(j))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var T=3;break;default:T=h}var U=h;h=T;try{return D()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,T){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=h;h=D;try{return T()}finally{h=U}},e.unstable_scheduleCallback=function(D,T,U){var X=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?X+U:X):U=X,D){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=U+H,D={id:d++,callback:T,priorityLevel:D,startTime:U,expirationTime:H,sortIndex:-1},U>X?(D.sortIndex=U,t(u,D),r(c)===null&&D===r(u)&&(p?(b(k),k=-1):p=!0,L(_,U-X))):(D.sortIndex=H,t(c,D),g||m||(g=!0,F(j))),D},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(D){var T=h;return function(){var U=h;h=T;try{return D.apply(this,arguments)}finally{h=U}}}})(b$);x$.exports=b$;var ZH=x$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JH=x,Xs=ZH;function pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w$=new Set,ap={};function Tu(e,t){ff(e,t),ff(e+"Capture",t)}function ff(e,t){for(ap[e]=t,e=0;e<t.length;e++)w$.add(t[e])}var go=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$_=Object.prototype.hasOwnProperty,e9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rA={},nA={};function t9(e){return $_.call(nA,e)?!0:$_.call(rA,e)?!1:e9.test(e)?nA[e]=!0:(rA[e]=!0,!1)}function r9(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function n9(e,t,r,n){if(t===null||typeof t>"u"||r9(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function os(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Dn[e]=new os(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Dn[t]=new os(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Dn[e]=new os(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Dn[e]=new os(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Dn[e]=new os(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Dn[e]=new os(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Dn[e]=new os(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Dn[e]=new os(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Dn[e]=new os(e,5,!1,e.toLowerCase(),null,!1,!1)});var vC=/[\-:]([a-z])/g;function yC(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vC,yC);Dn[t]=new os(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vC,yC);Dn[t]=new os(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vC,yC);Dn[t]=new os(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Dn[e]=new os(e,1,!1,e.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new os("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Dn[e]=new os(e,1,!1,e.toLowerCase(),null,!0,!0)});function xC(e,t,r,n){var a=Dn.hasOwnProperty(t)?Dn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(n9(t,r,a,n)&&(r=null),n||a===null?t9(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Eo=JH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xv=Symbol.for("react.element"),gd=Symbol.for("react.portal"),vd=Symbol.for("react.fragment"),bC=Symbol.for("react.strict_mode"),I_=Symbol.for("react.profiler"),j$=Symbol.for("react.provider"),_$=Symbol.for("react.context"),wC=Symbol.for("react.forward_ref"),L_=Symbol.for("react.suspense"),F_=Symbol.for("react.suspense_list"),jC=Symbol.for("react.memo"),Wo=Symbol.for("react.lazy"),N$=Symbol.for("react.offscreen"),sA=Symbol.iterator;function Hh(e){return e===null||typeof e!="object"?null:(e=sA&&e[sA]||e["@@iterator"],typeof e=="function"?e:null)}var Dr=Object.assign,ej;function _m(e){if(ej===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ej=t&&t[1]||""}return`
`+ej+e}var tj=!1;function rj(e,t){if(!e||tj)return"";tj=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{tj=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?_m(e):""}function s9(e){switch(e.tag){case 5:return _m(e.type);case 16:return _m("Lazy");case 13:return _m("Suspense");case 19:return _m("SuspenseList");case 0:case 2:case 15:return e=rj(e.type,!1),e;case 11:return e=rj(e.type.render,!1),e;case 1:return e=rj(e.type,!0),e;default:return""}}function U_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vd:return"Fragment";case gd:return"Portal";case I_:return"Profiler";case bC:return"StrictMode";case L_:return"Suspense";case F_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _$:return(e.displayName||"Context")+".Consumer";case j$:return(e._context.displayName||"Context")+".Provider";case wC:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jC:return t=e.displayName||null,t!==null?t:U_(e.type)||"Memo";case Wo:t=e._payload,e=e._init;try{return U_(e(t))}catch{}}return null}function a9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U_(t);case 8:return t===bC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ol(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function S$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function i9(e){var t=S$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bv(e){e._valueTracker||(e._valueTracker=i9(e))}function C$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=S$(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Uy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function B_(e,t){var r=t.checked;return Dr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function aA(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ol(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function k$(e,t){t=t.checked,t!=null&&xC(e,"checked",t,!1)}function z_(e,t){k$(e,t);var r=Ol(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?V_(e,t.type,r):t.hasOwnProperty("defaultValue")&&V_(e,t.type,Ol(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function iA(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function V_(e,t,r){(t!=="number"||Uy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Nm=Array.isArray;function $d(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ol(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function q_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(pe(91));return Dr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oA(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(pe(92));if(Nm(r)){if(1<r.length)throw Error(pe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ol(r)}}function E$(e,t){var r=Ol(t.value),n=Ol(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function lA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function P$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function W_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?P$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wv,A$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wv=wv||document.createElement("div"),wv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ip(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Mm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o9=["Webkit","ms","Moz","O"];Object.keys(Mm).forEach(function(e){o9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Mm[t]=Mm[e]})});function O$(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Mm.hasOwnProperty(e)&&Mm[e]?(""+t).trim():t+"px"}function T$(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=O$(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var l9=Dr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function H_(e,t){if(t){if(l9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(pe(62))}}function K_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var G_=null;function _C(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Y_=null,Id=null,Ld=null;function cA(e){if(e=Tg(e)){if(typeof Y_!="function")throw Error(pe(280));var t=e.stateNode;t&&(t=Zb(t),Y_(e.stateNode,e.type,t))}}function D$(e){Id?Ld?Ld.push(e):Ld=[e]:Id=e}function R$(){if(Id){var e=Id,t=Ld;if(Ld=Id=null,cA(e),t)for(e=0;e<t.length;e++)cA(t[e])}}function M$(e,t){return e(t)}function $$(){}var nj=!1;function I$(e,t,r){if(nj)return e(t,r);nj=!0;try{return M$(e,t,r)}finally{nj=!1,(Id!==null||Ld!==null)&&($$(),R$())}}function op(e,t){var r=e.stateNode;if(r===null)return null;var n=Zb(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(pe(231,t,typeof r));return r}var X_=!1;if(go)try{var Kh={};Object.defineProperty(Kh,"passive",{get:function(){X_=!0}}),window.addEventListener("test",Kh,Kh),window.removeEventListener("test",Kh,Kh)}catch{X_=!1}function c9(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var $m=!1,By=null,zy=!1,Q_=null,u9={onError:function(e){$m=!0,By=e}};function d9(e,t,r,n,a,i,o,l,c){$m=!1,By=null,c9.apply(u9,arguments)}function f9(e,t,r,n,a,i,o,l,c){if(d9.apply(this,arguments),$m){if($m){var u=By;$m=!1,By=null}else throw Error(pe(198));zy||(zy=!0,Q_=u)}}function Du(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function L$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function uA(e){if(Du(e)!==e)throw Error(pe(188))}function h9(e){var t=e.alternate;if(!t){if(t=Du(e),t===null)throw Error(pe(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return uA(a),e;if(i===n)return uA(a),t;i=i.sibling}throw Error(pe(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(pe(189))}}if(r.alternate!==n)throw Error(pe(190))}if(r.tag!==3)throw Error(pe(188));return r.stateNode.current===r?e:t}function F$(e){return e=h9(e),e!==null?U$(e):null}function U$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=U$(e);if(t!==null)return t;e=e.sibling}return null}var B$=Xs.unstable_scheduleCallback,dA=Xs.unstable_cancelCallback,m9=Xs.unstable_shouldYield,p9=Xs.unstable_requestPaint,qr=Xs.unstable_now,g9=Xs.unstable_getCurrentPriorityLevel,NC=Xs.unstable_ImmediatePriority,z$=Xs.unstable_UserBlockingPriority,Vy=Xs.unstable_NormalPriority,v9=Xs.unstable_LowPriority,V$=Xs.unstable_IdlePriority,Gb=null,_i=null;function y9(e){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(Gb,e,void 0,(e.current.flags&128)===128)}catch{}}var Wa=Math.clz32?Math.clz32:w9,x9=Math.log,b9=Math.LN2;function w9(e){return e>>>=0,e===0?32:31-(x9(e)/b9|0)|0}var jv=64,_v=4194304;function Sm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qy(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Sm(l):(i&=o,i!==0&&(n=Sm(i)))}else o=r&~a,o!==0?n=Sm(o):i!==0&&(n=Sm(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Wa(t),a=1<<r,n|=e[r],t&=~a;return n}function j9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _9(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Wa(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=j9(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Z_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function q$(){var e=jv;return jv<<=1,!(jv&4194240)&&(jv=64),e}function sj(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ag(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wa(t),e[t]=r}function N9(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Wa(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function SC(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Wa(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Jt=0;function W$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var H$,CC,K$,G$,Y$,J_=!1,Nv=[],ml=null,pl=null,gl=null,lp=new Map,cp=new Map,Xo=[],S9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fA(e,t){switch(e){case"focusin":case"focusout":ml=null;break;case"dragenter":case"dragleave":pl=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":lp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cp.delete(t.pointerId)}}function Gh(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Tg(t),t!==null&&CC(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function C9(e,t,r,n,a){switch(t){case"focusin":return ml=Gh(ml,e,t,r,n,a),!0;case"dragenter":return pl=Gh(pl,e,t,r,n,a),!0;case"mouseover":return gl=Gh(gl,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return lp.set(i,Gh(lp.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,cp.set(i,Gh(cp.get(i)||null,e,t,r,n,a)),!0}return!1}function X$(e){var t=jc(e.target);if(t!==null){var r=Du(t);if(r!==null){if(t=r.tag,t===13){if(t=L$(r),t!==null){e.blockedOn=t,Y$(e.priority,function(){K$(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=eN(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);G_=n,r.target.dispatchEvent(n),G_=null}else return t=Tg(r),t!==null&&CC(t),e.blockedOn=r,!1;t.shift()}return!0}function hA(e,t,r){gy(e)&&r.delete(t)}function k9(){J_=!1,ml!==null&&gy(ml)&&(ml=null),pl!==null&&gy(pl)&&(pl=null),gl!==null&&gy(gl)&&(gl=null),lp.forEach(hA),cp.forEach(hA)}function Yh(e,t){e.blockedOn===t&&(e.blockedOn=null,J_||(J_=!0,Xs.unstable_scheduleCallback(Xs.unstable_NormalPriority,k9)))}function up(e){function t(a){return Yh(a,e)}if(0<Nv.length){Yh(Nv[0],e);for(var r=1;r<Nv.length;r++){var n=Nv[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ml!==null&&Yh(ml,e),pl!==null&&Yh(pl,e),gl!==null&&Yh(gl,e),lp.forEach(t),cp.forEach(t),r=0;r<Xo.length;r++)n=Xo[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Xo.length&&(r=Xo[0],r.blockedOn===null);)X$(r),r.blockedOn===null&&Xo.shift()}var Fd=Eo.ReactCurrentBatchConfig,Wy=!0;function E9(e,t,r,n){var a=Jt,i=Fd.transition;Fd.transition=null;try{Jt=1,kC(e,t,r,n)}finally{Jt=a,Fd.transition=i}}function P9(e,t,r,n){var a=Jt,i=Fd.transition;Fd.transition=null;try{Jt=4,kC(e,t,r,n)}finally{Jt=a,Fd.transition=i}}function kC(e,t,r,n){if(Wy){var a=eN(e,t,r,n);if(a===null)mj(e,t,n,Hy,r),fA(e,n);else if(C9(a,e,t,r,n))n.stopPropagation();else if(fA(e,n),t&4&&-1<S9.indexOf(e)){for(;a!==null;){var i=Tg(a);if(i!==null&&H$(i),i=eN(e,t,r,n),i===null&&mj(e,t,n,Hy,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else mj(e,t,n,null,r)}}var Hy=null;function eN(e,t,r,n){if(Hy=null,e=_C(n),e=jc(e),e!==null)if(t=Du(e),t===null)e=null;else if(r=t.tag,r===13){if(e=L$(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hy=e,null}function Q$(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(g9()){case NC:return 1;case z$:return 4;case Vy:case v9:return 16;case V$:return 536870912;default:return 16}default:return 16}}var ul=null,EC=null,vy=null;function Z$(){if(vy)return vy;var e,t=EC,r=t.length,n,a="value"in ul?ul.value:ul.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return vy=a.slice(e,1<n?1-n:void 0)}function yy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Sv(){return!0}function mA(){return!1}function ta(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sv:mA,this.isPropagationStopped=mA,this}return Dr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Sv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Sv)},persist:function(){},isPersistent:Sv}),t}var oh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PC=ta(oh),Og=Dr({},oh,{view:0,detail:0}),A9=ta(Og),aj,ij,Xh,Yb=Dr({},Og,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:AC,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xh&&(Xh&&e.type==="mousemove"?(aj=e.screenX-Xh.screenX,ij=e.screenY-Xh.screenY):ij=aj=0,Xh=e),aj)},movementY:function(e){return"movementY"in e?e.movementY:ij}}),pA=ta(Yb),O9=Dr({},Yb,{dataTransfer:0}),T9=ta(O9),D9=Dr({},Og,{relatedTarget:0}),oj=ta(D9),R9=Dr({},oh,{animationName:0,elapsedTime:0,pseudoElement:0}),M9=ta(R9),$9=Dr({},oh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),I9=ta($9),L9=Dr({},oh,{data:0}),gA=ta(L9),F9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=B9[e])?!!t[e]:!1}function AC(){return z9}var V9=Dr({},Og,{key:function(e){if(e.key){var t=F9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?U9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:AC,charCode:function(e){return e.type==="keypress"?yy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),q9=ta(V9),W9=Dr({},Yb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vA=ta(W9),H9=Dr({},Og,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:AC}),K9=ta(H9),G9=Dr({},oh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y9=ta(G9),X9=Dr({},Yb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Q9=ta(X9),Z9=[9,13,27,32],OC=go&&"CompositionEvent"in window,Im=null;go&&"documentMode"in document&&(Im=document.documentMode);var J9=go&&"TextEvent"in window&&!Im,J$=go&&(!OC||Im&&8<Im&&11>=Im),yA=" ",xA=!1;function eI(e,t){switch(e){case"keyup":return Z9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tI(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yd=!1;function e7(e,t){switch(e){case"compositionend":return tI(t);case"keypress":return t.which!==32?null:(xA=!0,yA);case"textInput":return e=t.data,e===yA&&xA?null:e;default:return null}}function t7(e,t){if(yd)return e==="compositionend"||!OC&&eI(e,t)?(e=Z$(),vy=EC=ul=null,yd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return J$&&t.locale!=="ko"?null:t.data;default:return null}}var r7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!r7[e.type]:t==="textarea"}function rI(e,t,r,n){D$(n),t=Ky(t,"onChange"),0<t.length&&(r=new PC("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Lm=null,dp=null;function n7(e){hI(e,0)}function Xb(e){var t=wd(e);if(C$(t))return e}function s7(e,t){if(e==="change")return t}var nI=!1;if(go){var lj;if(go){var cj="oninput"in document;if(!cj){var wA=document.createElement("div");wA.setAttribute("oninput","return;"),cj=typeof wA.oninput=="function"}lj=cj}else lj=!1;nI=lj&&(!document.documentMode||9<document.documentMode)}function jA(){Lm&&(Lm.detachEvent("onpropertychange",sI),dp=Lm=null)}function sI(e){if(e.propertyName==="value"&&Xb(dp)){var t=[];rI(t,dp,e,_C(e)),I$(n7,t)}}function a7(e,t,r){e==="focusin"?(jA(),Lm=t,dp=r,Lm.attachEvent("onpropertychange",sI)):e==="focusout"&&jA()}function i7(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xb(dp)}function o7(e,t){if(e==="click")return Xb(t)}function l7(e,t){if(e==="input"||e==="change")return Xb(t)}function c7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ya=typeof Object.is=="function"?Object.is:c7;function fp(e,t){if(Ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!$_.call(t,a)||!Ya(e[a],t[a]))return!1}return!0}function _A(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function NA(e,t){var r=_A(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_A(r)}}function aI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function iI(){for(var e=window,t=Uy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Uy(e.document)}return t}function TC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function u7(e){var t=iI(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&aI(r.ownerDocument.documentElement,r)){if(n!==null&&TC(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=NA(r,i);var o=NA(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var d7=go&&"documentMode"in document&&11>=document.documentMode,xd=null,tN=null,Fm=null,rN=!1;function SA(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rN||xd==null||xd!==Uy(n)||(n=xd,"selectionStart"in n&&TC(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fm&&fp(Fm,n)||(Fm=n,n=Ky(tN,"onSelect"),0<n.length&&(t=new PC("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=xd)))}function Cv(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var bd={animationend:Cv("Animation","AnimationEnd"),animationiteration:Cv("Animation","AnimationIteration"),animationstart:Cv("Animation","AnimationStart"),transitionend:Cv("Transition","TransitionEnd")},uj={},oI={};go&&(oI=document.createElement("div").style,"AnimationEvent"in window||(delete bd.animationend.animation,delete bd.animationiteration.animation,delete bd.animationstart.animation),"TransitionEvent"in window||delete bd.transitionend.transition);function Qb(e){if(uj[e])return uj[e];if(!bd[e])return e;var t=bd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in oI)return uj[e]=t[r];return e}var lI=Qb("animationend"),cI=Qb("animationiteration"),uI=Qb("animationstart"),dI=Qb("transitionend"),fI=new Map,CA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bl(e,t){fI.set(e,t),Tu(t,[e])}for(var dj=0;dj<CA.length;dj++){var fj=CA[dj],f7=fj.toLowerCase(),h7=fj[0].toUpperCase()+fj.slice(1);Bl(f7,"on"+h7)}Bl(lI,"onAnimationEnd");Bl(cI,"onAnimationIteration");Bl(uI,"onAnimationStart");Bl("dblclick","onDoubleClick");Bl("focusin","onFocus");Bl("focusout","onBlur");Bl(dI,"onTransitionEnd");ff("onMouseEnter",["mouseout","mouseover"]);ff("onMouseLeave",["mouseout","mouseover"]);ff("onPointerEnter",["pointerout","pointerover"]);ff("onPointerLeave",["pointerout","pointerover"]);Tu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m7=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cm));function kA(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,f9(n,t,void 0,e),e.currentTarget=null}function hI(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;kA(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;kA(a,l,u),i=c}}}if(zy)throw e=Q_,zy=!1,Q_=null,e}function gr(e,t){var r=t[oN];r===void 0&&(r=t[oN]=new Set);var n=e+"__bubble";r.has(n)||(mI(t,e,2,!1),r.add(n))}function hj(e,t,r){var n=0;t&&(n|=4),mI(r,e,n,t)}var kv="_reactListening"+Math.random().toString(36).slice(2);function hp(e){if(!e[kv]){e[kv]=!0,w$.forEach(function(r){r!=="selectionchange"&&(m7.has(r)||hj(r,!1,e),hj(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[kv]||(t[kv]=!0,hj("selectionchange",!1,t))}}function mI(e,t,r,n){switch(Q$(t)){case 1:var a=E9;break;case 4:a=P9;break;default:a=kC}r=a.bind(null,t,r,e),a=void 0,!X_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function mj(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=jc(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}I$(function(){var u=i,d=_C(r),f=[];e:{var h=fI.get(e);if(h!==void 0){var m=PC,g=e;switch(e){case"keypress":if(yy(r)===0)break e;case"keydown":case"keyup":m=q9;break;case"focusin":g="focus",m=oj;break;case"focusout":g="blur",m=oj;break;case"beforeblur":case"afterblur":m=oj;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=pA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=T9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=K9;break;case lI:case cI:case uI:m=M9;break;case dI:m=Y9;break;case"scroll":m=A9;break;case"wheel":m=Q9;break;case"copy":case"cut":case"paste":m=I9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=vA}var p=(t&4)!==0,v=!p&&e==="scroll",b=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,w;y!==null;){w=y;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,b!==null&&(_=op(y,b),_!=null&&p.push(mp(y,_,w)))),v)break;y=y.return}0<p.length&&(h=new m(h,g,null,r,d),f.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==G_&&(g=r.relatedTarget||r.fromElement)&&(jc(g)||g[vo]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?jc(g):null,g!==null&&(v=Du(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=pA,_="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=vA,_="onPointerLeave",b="onPointerEnter",y="pointer"),v=m==null?h:wd(m),w=g==null?h:wd(g),h=new p(_,y+"leave",m,r,d),h.target=v,h.relatedTarget=w,_=null,jc(d)===u&&(p=new p(b,y+"enter",g,r,d),p.target=w,p.relatedTarget=v,_=p),v=_,m&&g)t:{for(p=m,b=g,y=0,w=p;w;w=Xu(w))y++;for(w=0,_=b;_;_=Xu(_))w++;for(;0<y-w;)p=Xu(p),y--;for(;0<w-y;)b=Xu(b),w--;for(;y--;){if(p===b||b!==null&&p===b.alternate)break t;p=Xu(p),b=Xu(b)}p=null}else p=null;m!==null&&EA(f,h,m,p,!1),g!==null&&v!==null&&EA(f,v,g,p,!0)}}e:{if(h=u?wd(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=s7;else if(bA(h))if(nI)j=l7;else{j=i7;var N=a7}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=o7);if(j&&(j=j(e,u))){rI(f,j,r,d);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&V_(h,"number",h.value)}switch(N=u?wd(u):window,e){case"focusin":(bA(N)||N.contentEditable==="true")&&(xd=N,tN=u,Fm=null);break;case"focusout":Fm=tN=xd=null;break;case"mousedown":rN=!0;break;case"contextmenu":case"mouseup":case"dragend":rN=!1,SA(f,r,d);break;case"selectionchange":if(d7)break;case"keydown":case"keyup":SA(f,r,d)}var S;if(OC)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else yd?eI(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(J$&&r.locale!=="ko"&&(yd||k!=="onCompositionStart"?k==="onCompositionEnd"&&yd&&(S=Z$()):(ul=d,EC="value"in ul?ul.value:ul.textContent,yd=!0)),N=Ky(u,k),0<N.length&&(k=new gA(k,e,null,r,d),f.push({event:k,listeners:N}),S?k.data=S:(S=tI(r),S!==null&&(k.data=S)))),(S=J9?e7(e,r):t7(e,r))&&(u=Ky(u,"onBeforeInput"),0<u.length&&(d=new gA("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=S))}hI(f,t)})}function mp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ky(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=op(e,r),i!=null&&n.unshift(mp(e,i,a)),i=op(e,t),i!=null&&n.push(mp(e,i,a))),e=e.return}return n}function Xu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function EA(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=op(r,i),c!=null&&o.unshift(mp(r,c,l))):a||(c=op(r,i),c!=null&&o.push(mp(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var p7=/\r\n?/g,g7=/\u0000|\uFFFD/g;function PA(e){return(typeof e=="string"?e:""+e).replace(p7,`
`).replace(g7,"")}function Ev(e,t,r){if(t=PA(t),PA(e)!==t&&r)throw Error(pe(425))}function Gy(){}var nN=null,sN=null;function aN(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var iN=typeof setTimeout=="function"?setTimeout:void 0,v7=typeof clearTimeout=="function"?clearTimeout:void 0,AA=typeof Promise=="function"?Promise:void 0,y7=typeof queueMicrotask=="function"?queueMicrotask:typeof AA<"u"?function(e){return AA.resolve(null).then(e).catch(x7)}:iN;function x7(e){setTimeout(function(){throw e})}function pj(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),up(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);up(t)}function vl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function OA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var lh=Math.random().toString(36).slice(2),yi="__reactFiber$"+lh,pp="__reactProps$"+lh,vo="__reactContainer$"+lh,oN="__reactEvents$"+lh,b7="__reactListeners$"+lh,w7="__reactHandles$"+lh;function jc(e){var t=e[yi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[vo]||r[yi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=OA(e);e!==null;){if(r=e[yi])return r;e=OA(e)}return t}e=r,r=e.parentNode}return null}function Tg(e){return e=e[yi]||e[vo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pe(33))}function Zb(e){return e[pp]||null}var lN=[],jd=-1;function zl(e){return{current:e}}function xr(e){0>jd||(e.current=lN[jd],lN[jd]=null,jd--)}function dr(e,t){jd++,lN[jd]=e.current,e.current=t}var Tl={},Vn=zl(Tl),js=zl(!1),su=Tl;function hf(e,t){var r=e.type.contextTypes;if(!r)return Tl;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function _s(e){return e=e.childContextTypes,e!=null}function Yy(){xr(js),xr(Vn)}function TA(e,t,r){if(Vn.current!==Tl)throw Error(pe(168));dr(Vn,t),dr(js,r)}function pI(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(pe(108,a9(e)||"Unknown",a));return Dr({},r,n)}function Xy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tl,su=Vn.current,dr(Vn,e),dr(js,js.current),!0}function DA(e,t,r){var n=e.stateNode;if(!n)throw Error(pe(169));r?(e=pI(e,t,su),n.__reactInternalMemoizedMergedChildContext=e,xr(js),xr(Vn),dr(Vn,e)):xr(js),dr(js,r)}var eo=null,Jb=!1,gj=!1;function gI(e){eo===null?eo=[e]:eo.push(e)}function j7(e){Jb=!0,gI(e)}function Vl(){if(!gj&&eo!==null){gj=!0;var e=0,t=Jt;try{var r=eo;for(Jt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}eo=null,Jb=!1}catch(a){throw eo!==null&&(eo=eo.slice(e+1)),B$(NC,Vl),a}finally{Jt=t,gj=!1}}return null}var _d=[],Nd=0,Qy=null,Zy=0,ua=[],da=0,au=null,ao=1,io="";function fc(e,t){_d[Nd++]=Zy,_d[Nd++]=Qy,Qy=e,Zy=t}function vI(e,t,r){ua[da++]=ao,ua[da++]=io,ua[da++]=au,au=e;var n=ao;e=io;var a=32-Wa(n)-1;n&=~(1<<a),r+=1;var i=32-Wa(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ao=1<<32-Wa(t)+a|r<<a|n,io=i+e}else ao=1<<i|r<<a|n,io=e}function DC(e){e.return!==null&&(fc(e,1),vI(e,1,0))}function RC(e){for(;e===Qy;)Qy=_d[--Nd],_d[Nd]=null,Zy=_d[--Nd],_d[Nd]=null;for(;e===au;)au=ua[--da],ua[da]=null,io=ua[--da],ua[da]=null,ao=ua[--da],ua[da]=null}var qs=null,Vs=null,Cr=!1,Ba=null;function yI(e,t){var r=ha(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function RA(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qs=e,Vs=vl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qs=e,Vs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=au!==null?{id:ao,overflow:io}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ha(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,qs=e,Vs=null,!0):!1;default:return!1}}function cN(e){return(e.mode&1)!==0&&(e.flags&128)===0}function uN(e){if(Cr){var t=Vs;if(t){var r=t;if(!RA(e,t)){if(cN(e))throw Error(pe(418));t=vl(r.nextSibling);var n=qs;t&&RA(e,t)?yI(n,r):(e.flags=e.flags&-4097|2,Cr=!1,qs=e)}}else{if(cN(e))throw Error(pe(418));e.flags=e.flags&-4097|2,Cr=!1,qs=e}}}function MA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qs=e}function Pv(e){if(e!==qs)return!1;if(!Cr)return MA(e),Cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!aN(e.type,e.memoizedProps)),t&&(t=Vs)){if(cN(e))throw xI(),Error(pe(418));for(;t;)yI(e,t),t=vl(t.nextSibling)}if(MA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Vs=vl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Vs=null}}else Vs=qs?vl(e.stateNode.nextSibling):null;return!0}function xI(){for(var e=Vs;e;)e=vl(e.nextSibling)}function mf(){Vs=qs=null,Cr=!1}function MC(e){Ba===null?Ba=[e]:Ba.push(e)}var _7=Eo.ReactCurrentBatchConfig;function Qh(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pe(309));var n=r.stateNode}if(!n)throw Error(pe(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(pe(284));if(!r._owner)throw Error(pe(290,e))}return e}function Av(e,t){throw e=Object.prototype.toString.call(t),Error(pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $A(e){var t=e._init;return t(e._payload)}function bI(e){function t(b,y){if(e){var w=b.deletions;w===null?(b.deletions=[y],b.flags|=16):w.push(y)}}function r(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function n(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function a(b,y){return b=wl(b,y),b.index=0,b.sibling=null,b}function i(b,y,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<y?(b.flags|=2,y):w):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,y,w,_){return y===null||y.tag!==6?(y=_j(w,b.mode,_),y.return=b,y):(y=a(y,w),y.return=b,y)}function c(b,y,w,_){var j=w.type;return j===vd?d(b,y,w.props.children,_,w.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Wo&&$A(j)===y.type)?(_=a(y,w.props),_.ref=Qh(b,y,w),_.return=b,_):(_=Sy(w.type,w.key,w.props,null,b.mode,_),_.ref=Qh(b,y,w),_.return=b,_)}function u(b,y,w,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Nj(w,b.mode,_),y.return=b,y):(y=a(y,w.children||[]),y.return=b,y)}function d(b,y,w,_,j){return y===null||y.tag!==7?(y=Xc(w,b.mode,_,j),y.return=b,y):(y=a(y,w),y.return=b,y)}function f(b,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=_j(""+y,b.mode,w),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case xv:return w=Sy(y.type,y.key,y.props,null,b.mode,w),w.ref=Qh(b,null,y),w.return=b,w;case gd:return y=Nj(y,b.mode,w),y.return=b,y;case Wo:var _=y._init;return f(b,_(y._payload),w)}if(Nm(y)||Hh(y))return y=Xc(y,b.mode,w,null),y.return=b,y;Av(b,y)}return null}function h(b,y,w,_){var j=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(b,y,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xv:return w.key===j?c(b,y,w,_):null;case gd:return w.key===j?u(b,y,w,_):null;case Wo:return j=w._init,h(b,y,j(w._payload),_)}if(Nm(w)||Hh(w))return j!==null?null:d(b,y,w,_,null);Av(b,w)}return null}function m(b,y,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return b=b.get(w)||null,l(y,b,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case xv:return b=b.get(_.key===null?w:_.key)||null,c(y,b,_,j);case gd:return b=b.get(_.key===null?w:_.key)||null,u(y,b,_,j);case Wo:var N=_._init;return m(b,y,w,N(_._payload),j)}if(Nm(_)||Hh(_))return b=b.get(w)||null,d(y,b,_,j,null);Av(y,_)}return null}function g(b,y,w,_){for(var j=null,N=null,S=y,k=y=0,C=null;S!==null&&k<w.length;k++){S.index>k?(C=S,S=null):C=S.sibling;var P=h(b,S,w[k],_);if(P===null){S===null&&(S=C);break}e&&S&&P.alternate===null&&t(b,S),y=i(P,y,k),N===null?j=P:N.sibling=P,N=P,S=C}if(k===w.length)return r(b,S),Cr&&fc(b,k),j;if(S===null){for(;k<w.length;k++)S=f(b,w[k],_),S!==null&&(y=i(S,y,k),N===null?j=S:N.sibling=S,N=S);return Cr&&fc(b,k),j}for(S=n(b,S);k<w.length;k++)C=m(S,b,k,w[k],_),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?k:C.key),y=i(C,y,k),N===null?j=C:N.sibling=C,N=C);return e&&S.forEach(function(A){return t(b,A)}),Cr&&fc(b,k),j}function p(b,y,w,_){var j=Hh(w);if(typeof j!="function")throw Error(pe(150));if(w=j.call(w),w==null)throw Error(pe(151));for(var N=j=null,S=y,k=y=0,C=null,P=w.next();S!==null&&!P.done;k++,P=w.next()){S.index>k?(C=S,S=null):C=S.sibling;var A=h(b,S,P.value,_);if(A===null){S===null&&(S=C);break}e&&S&&A.alternate===null&&t(b,S),y=i(A,y,k),N===null?j=A:N.sibling=A,N=A,S=C}if(P.done)return r(b,S),Cr&&fc(b,k),j;if(S===null){for(;!P.done;k++,P=w.next())P=f(b,P.value,_),P!==null&&(y=i(P,y,k),N===null?j=P:N.sibling=P,N=P);return Cr&&fc(b,k),j}for(S=n(b,S);!P.done;k++,P=w.next())P=m(S,b,k,P.value,_),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?k:P.key),y=i(P,y,k),N===null?j=P:N.sibling=P,N=P);return e&&S.forEach(function(E){return t(b,E)}),Cr&&fc(b,k),j}function v(b,y,w,_){if(typeof w=="object"&&w!==null&&w.type===vd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case xv:e:{for(var j=w.key,N=y;N!==null;){if(N.key===j){if(j=w.type,j===vd){if(N.tag===7){r(b,N.sibling),y=a(N,w.props.children),y.return=b,b=y;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Wo&&$A(j)===N.type){r(b,N.sibling),y=a(N,w.props),y.ref=Qh(b,N,w),y.return=b,b=y;break e}r(b,N);break}else t(b,N);N=N.sibling}w.type===vd?(y=Xc(w.props.children,b.mode,_,w.key),y.return=b,b=y):(_=Sy(w.type,w.key,w.props,null,b.mode,_),_.ref=Qh(b,y,w),_.return=b,b=_)}return o(b);case gd:e:{for(N=w.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(b,y.sibling),y=a(y,w.children||[]),y.return=b,b=y;break e}else{r(b,y);break}else t(b,y);y=y.sibling}y=Nj(w,b.mode,_),y.return=b,b=y}return o(b);case Wo:return N=w._init,v(b,y,N(w._payload),_)}if(Nm(w))return g(b,y,w,_);if(Hh(w))return p(b,y,w,_);Av(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(b,y.sibling),y=a(y,w),y.return=b,b=y):(r(b,y),y=_j(w,b.mode,_),y.return=b,b=y),o(b)):r(b,y)}return v}var pf=bI(!0),wI=bI(!1),Jy=zl(null),ex=null,Sd=null,$C=null;function IC(){$C=Sd=ex=null}function LC(e){var t=Jy.current;xr(Jy),e._currentValue=t}function dN(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ud(e,t){ex=e,$C=Sd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xs=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if($C!==e)if(e={context:e,memoizedValue:t,next:null},Sd===null){if(ex===null)throw Error(pe(308));Sd=e,ex.dependencies={lanes:0,firstContext:e}}else Sd=Sd.next=e;return t}var _c=null;function FC(e){_c===null?_c=[e]:_c.push(e)}function jI(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,FC(t)):(r.next=a.next,a.next=r),t.interleaved=r,yo(e,n)}function yo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ho=!1;function UC(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _I(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yl(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,It&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,yo(e,r)}return a=n.interleaved,a===null?(t.next=t,FC(n)):(t.next=a.next,a.next=t),n.interleaved=t,yo(e,r)}function xy(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,SC(e,r)}}function IA(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function tx(e,t,r,n){var a=e.updateQueue;Ho=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(h=t,m=r,p.tag){case 1:if(g=p.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=Dr({},f,h);break e;case 2:Ho=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);ou|=o,e.lanes=o,e.memoizedState=f}}function LA(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(pe(191,a));a.call(n)}}}var Dg={},Ni=zl(Dg),gp=zl(Dg),vp=zl(Dg);function Nc(e){if(e===Dg)throw Error(pe(174));return e}function BC(e,t){switch(dr(vp,t),dr(gp,e),dr(Ni,Dg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:W_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=W_(t,e)}xr(Ni),dr(Ni,t)}function gf(){xr(Ni),xr(gp),xr(vp)}function NI(e){Nc(vp.current);var t=Nc(Ni.current),r=W_(t,e.type);t!==r&&(dr(gp,e),dr(Ni,r))}function zC(e){gp.current===e&&(xr(Ni),xr(gp))}var Or=zl(0);function rx(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vj=[];function VC(){for(var e=0;e<vj.length;e++)vj[e]._workInProgressVersionPrimary=null;vj.length=0}var by=Eo.ReactCurrentDispatcher,yj=Eo.ReactCurrentBatchConfig,iu=0,Tr=null,on=null,bn=null,nx=!1,Um=!1,yp=0,N7=0;function Mn(){throw Error(pe(321))}function qC(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ya(e[r],t[r]))return!1;return!0}function WC(e,t,r,n,a,i){if(iu=i,Tr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,by.current=e===null||e.memoizedState===null?E7:P7,e=r(n,a),Um){i=0;do{if(Um=!1,yp=0,25<=i)throw Error(pe(301));i+=1,bn=on=null,t.updateQueue=null,by.current=A7,e=r(n,a)}while(Um)}if(by.current=sx,t=on!==null&&on.next!==null,iu=0,bn=on=Tr=null,nx=!1,t)throw Error(pe(300));return e}function HC(){var e=yp!==0;return yp=0,e}function mi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Tr.memoizedState=bn=e:bn=bn.next=e,bn}function ba(){if(on===null){var e=Tr.alternate;e=e!==null?e.memoizedState:null}else e=on.next;var t=bn===null?Tr.memoizedState:bn.next;if(t!==null)bn=t,on=e;else{if(e===null)throw Error(pe(310));on=e,e={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},bn===null?Tr.memoizedState=bn=e:bn=bn.next=e}return bn}function xp(e,t){return typeof t=="function"?t(e):t}function xj(e){var t=ba(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=on,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((iu&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Tr.lanes|=d,ou|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Ya(n,t.memoizedState)||(xs=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Tr.lanes|=i,ou|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function bj(e){var t=ba(),r=t.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ya(i,t.memoizedState)||(xs=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function SI(){}function CI(e,t){var r=Tr,n=ba(),a=t(),i=!Ya(n.memoizedState,a);if(i&&(n.memoizedState=a,xs=!0),n=n.queue,KC(PI.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||bn!==null&&bn.memoizedState.tag&1){if(r.flags|=2048,bp(9,EI.bind(null,r,n,a,t),void 0,null),jn===null)throw Error(pe(349));iu&30||kI(r,t,a)}return a}function kI(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Tr.updateQueue,t===null?(t={lastEffect:null,stores:null},Tr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function EI(e,t,r,n){t.value=r,t.getSnapshot=n,AI(t)&&OI(e)}function PI(e,t,r){return r(function(){AI(t)&&OI(e)})}function AI(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ya(e,r)}catch{return!0}}function OI(e){var t=yo(e,1);t!==null&&Ha(t,e,1,-1)}function FA(e){var t=mi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xp,lastRenderedState:e},t.queue=e,e=e.dispatch=k7.bind(null,Tr,e),[t.memoizedState,e]}function bp(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Tr.updateQueue,t===null?(t={lastEffect:null,stores:null},Tr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function TI(){return ba().memoizedState}function wy(e,t,r,n){var a=mi();Tr.flags|=e,a.memoizedState=bp(1|t,r,void 0,n===void 0?null:n)}function e0(e,t,r,n){var a=ba();n=n===void 0?null:n;var i=void 0;if(on!==null){var o=on.memoizedState;if(i=o.destroy,n!==null&&qC(n,o.deps)){a.memoizedState=bp(t,r,i,n);return}}Tr.flags|=e,a.memoizedState=bp(1|t,r,i,n)}function UA(e,t){return wy(8390656,8,e,t)}function KC(e,t){return e0(2048,8,e,t)}function DI(e,t){return e0(4,2,e,t)}function RI(e,t){return e0(4,4,e,t)}function MI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $I(e,t,r){return r=r!=null?r.concat([e]):null,e0(4,4,MI.bind(null,t,e),r)}function GC(){}function II(e,t){var r=ba();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&qC(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function LI(e,t){var r=ba();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&qC(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function FI(e,t,r){return iu&21?(Ya(r,t)||(r=q$(),Tr.lanes|=r,ou|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=r)}function S7(e,t){var r=Jt;Jt=r!==0&&4>r?r:4,e(!0);var n=yj.transition;yj.transition={};try{e(!1),t()}finally{Jt=r,yj.transition=n}}function UI(){return ba().memoizedState}function C7(e,t,r){var n=bl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},BI(e))zI(t,r);else if(r=jI(e,t,r,n),r!==null){var a=rs();Ha(r,e,n,a),VI(r,t,n)}}function k7(e,t,r){var n=bl(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(BI(e))zI(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Ya(l,o)){var c=t.interleaved;c===null?(a.next=a,FC(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=jI(e,t,a,n),r!==null&&(a=rs(),Ha(r,e,n,a),VI(r,t,n))}}function BI(e){var t=e.alternate;return e===Tr||t!==null&&t===Tr}function zI(e,t){Um=nx=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function VI(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,SC(e,r)}}var sx={readContext:xa,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},E7={readContext:xa,useCallback:function(e,t){return mi().memoizedState=[e,t===void 0?null:t],e},useContext:xa,useEffect:UA,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,wy(4194308,4,MI.bind(null,t,e),r)},useLayoutEffect:function(e,t){return wy(4194308,4,e,t)},useInsertionEffect:function(e,t){return wy(4,2,e,t)},useMemo:function(e,t){var r=mi();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=mi();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=C7.bind(null,Tr,e),[n.memoizedState,e]},useRef:function(e){var t=mi();return e={current:e},t.memoizedState=e},useState:FA,useDebugValue:GC,useDeferredValue:function(e){return mi().memoizedState=e},useTransition:function(){var e=FA(!1),t=e[0];return e=S7.bind(null,e[1]),mi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Tr,a=mi();if(Cr){if(r===void 0)throw Error(pe(407));r=r()}else{if(r=t(),jn===null)throw Error(pe(349));iu&30||kI(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,UA(PI.bind(null,n,i,e),[e]),n.flags|=2048,bp(9,EI.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=mi(),t=jn.identifierPrefix;if(Cr){var r=io,n=ao;r=(n&~(1<<32-Wa(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=yp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=N7++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},P7={readContext:xa,useCallback:II,useContext:xa,useEffect:KC,useImperativeHandle:$I,useInsertionEffect:DI,useLayoutEffect:RI,useMemo:LI,useReducer:xj,useRef:TI,useState:function(){return xj(xp)},useDebugValue:GC,useDeferredValue:function(e){var t=ba();return FI(t,on.memoizedState,e)},useTransition:function(){var e=xj(xp)[0],t=ba().memoizedState;return[e,t]},useMutableSource:SI,useSyncExternalStore:CI,useId:UI,unstable_isNewReconciler:!1},A7={readContext:xa,useCallback:II,useContext:xa,useEffect:KC,useImperativeHandle:$I,useInsertionEffect:DI,useLayoutEffect:RI,useMemo:LI,useReducer:bj,useRef:TI,useState:function(){return bj(xp)},useDebugValue:GC,useDeferredValue:function(e){var t=ba();return on===null?t.memoizedState=e:FI(t,on.memoizedState,e)},useTransition:function(){var e=bj(xp)[0],t=ba().memoizedState;return[e,t]},useMutableSource:SI,useSyncExternalStore:CI,useId:UI,unstable_isNewReconciler:!1};function Ra(e,t){if(e&&e.defaultProps){t=Dr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function fN(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Dr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var t0={isMounted:function(e){return(e=e._reactInternals)?Du(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=rs(),a=bl(e),i=fo(n,a);i.payload=t,r!=null&&(i.callback=r),t=yl(e,i,a),t!==null&&(Ha(t,e,a,n),xy(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=rs(),a=bl(e),i=fo(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=yl(e,i,a),t!==null&&(Ha(t,e,a,n),xy(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=rs(),n=bl(e),a=fo(r,n);a.tag=2,t!=null&&(a.callback=t),t=yl(e,a,n),t!==null&&(Ha(t,e,n,r),xy(t,e,n))}};function BA(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!fp(r,n)||!fp(a,i):!0}function qI(e,t,r){var n=!1,a=Tl,i=t.contextType;return typeof i=="object"&&i!==null?i=xa(i):(a=_s(t)?su:Vn.current,n=t.contextTypes,i=(n=n!=null)?hf(e,a):Tl),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=t0,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function zA(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&t0.enqueueReplaceState(t,t.state,null)}function hN(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},UC(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=xa(i):(i=_s(t)?su:Vn.current,a.context=hf(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(fN(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&t0.enqueueReplaceState(a,a.state,null),tx(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function vf(e,t){try{var r="",n=t;do r+=s9(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function wj(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function mN(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var O7=typeof WeakMap=="function"?WeakMap:Map;function WI(e,t,r){r=fo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ix||(ix=!0,NN=n),mN(e,t)},r}function HI(e,t,r){r=fo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){mN(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){mN(e,t),typeof n!="function"&&(xl===null?xl=new Set([this]):xl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function VA(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new O7;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=W7.bind(null,e,t,r),t.then(e,e))}function qA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function WA(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=fo(-1,1),t.tag=2,yl(r,t,1))),r.lanes|=1),e)}var T7=Eo.ReactCurrentOwner,xs=!1;function Yn(e,t,r,n){t.child=e===null?wI(t,null,r,n):pf(t,e.child,r,n)}function HA(e,t,r,n,a){r=r.render;var i=t.ref;return Ud(t,a),n=WC(e,t,r,n,i,a),r=HC(),e!==null&&!xs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,xo(e,t,a)):(Cr&&r&&DC(t),t.flags|=1,Yn(e,t,n,a),t.child)}function KA(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!rk(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,KI(e,t,i,n,a)):(e=Sy(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:fp,r(o,n)&&e.ref===t.ref)return xo(e,t,a)}return t.flags|=1,e=wl(i,n),e.ref=t.ref,e.return=t,t.child=e}function KI(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(fp(i,n)&&e.ref===t.ref)if(xs=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(xs=!0);else return t.lanes=e.lanes,xo(e,t,a)}return pN(e,t,r,n,a)}function GI(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},dr(kd,Ls),Ls|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,dr(kd,Ls),Ls|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,dr(kd,Ls),Ls|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,dr(kd,Ls),Ls|=n;return Yn(e,t,a,r),t.child}function YI(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function pN(e,t,r,n,a){var i=_s(r)?su:Vn.current;return i=hf(t,i),Ud(t,a),r=WC(e,t,r,n,i,a),n=HC(),e!==null&&!xs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,xo(e,t,a)):(Cr&&n&&DC(t),t.flags|=1,Yn(e,t,r,a),t.child)}function GA(e,t,r,n,a){if(_s(r)){var i=!0;Xy(t)}else i=!1;if(Ud(t,a),t.stateNode===null)jy(e,t),qI(t,r,n),hN(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=xa(u):(u=_s(r)?su:Vn.current,u=hf(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&zA(t,o,n,u),Ho=!1;var h=t.memoizedState;o.state=h,tx(t,n,o,a),c=t.memoizedState,l!==n||h!==c||js.current||Ho?(typeof d=="function"&&(fN(t,r,d,n),c=t.memoizedState),(l=Ho||BA(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,_I(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ra(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=xa(c):(c=_s(r)?su:Vn.current,c=hf(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&zA(t,o,n,c),Ho=!1,h=t.memoizedState,o.state=h,tx(t,n,o,a);var g=t.memoizedState;l!==f||h!==g||js.current||Ho?(typeof m=="function"&&(fN(t,r,m,n),g=t.memoizedState),(u=Ho||BA(t,r,u,n,h,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return gN(e,t,r,n,i,a)}function gN(e,t,r,n,a,i){YI(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&DA(t,r,!1),xo(e,t,i);n=t.stateNode,T7.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=pf(t,e.child,null,i),t.child=pf(t,null,l,i)):Yn(e,t,l,i),t.memoizedState=n.state,a&&DA(t,r,!0),t.child}function XI(e){var t=e.stateNode;t.pendingContext?TA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&TA(e,t.context,!1),BC(e,t.containerInfo)}function YA(e,t,r,n,a){return mf(),MC(a),t.flags|=256,Yn(e,t,r,n),t.child}var vN={dehydrated:null,treeContext:null,retryLane:0};function yN(e){return{baseLanes:e,cachePool:null,transitions:null}}function QI(e,t,r){var n=t.pendingProps,a=Or.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),dr(Or,a&1),e===null)return uN(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=s0(o,n,0,null),e=Xc(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=yN(r),t.memoizedState=vN,e):YC(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return D7(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=wl(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=wl(l,i):(i=Xc(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?yN(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=vN,n}return i=e.child,e=i.sibling,n=wl(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function YC(e,t){return t=s0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ov(e,t,r,n){return n!==null&&MC(n),pf(t,e.child,null,r),e=YC(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function D7(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=wj(Error(pe(422))),Ov(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=s0({mode:"visible",children:n.children},a,0,null),i=Xc(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&pf(t,e.child,null,o),t.child.memoizedState=yN(o),t.memoizedState=vN,i);if(!(t.mode&1))return Ov(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(pe(419)),n=wj(i,n,void 0),Ov(e,t,o,n)}if(l=(o&e.childLanes)!==0,xs||l){if(n=jn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,yo(e,a),Ha(n,e,a,-1))}return tk(),n=wj(Error(pe(421))),Ov(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=H7.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Vs=vl(a.nextSibling),qs=t,Cr=!0,Ba=null,e!==null&&(ua[da++]=ao,ua[da++]=io,ua[da++]=au,ao=e.id,io=e.overflow,au=t),t=YC(t,n.children),t.flags|=4096,t)}function XA(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),dN(e.return,t,r)}function jj(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function ZI(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Yn(e,t,n.children,r),n=Or.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&XA(e,r,t);else if(e.tag===19)XA(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(dr(Or,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&rx(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),jj(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&rx(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}jj(t,!0,r,null,i);break;case"together":jj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ou|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(pe(153));if(t.child!==null){for(e=t.child,r=wl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function R7(e,t,r){switch(t.tag){case 3:XI(t),mf();break;case 5:NI(t);break;case 1:_s(t.type)&&Xy(t);break;case 4:BC(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;dr(Jy,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(dr(Or,Or.current&1),t.flags|=128,null):r&t.child.childLanes?QI(e,t,r):(dr(Or,Or.current&1),e=xo(e,t,r),e!==null?e.sibling:null);dr(Or,Or.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ZI(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),dr(Or,Or.current),n)break;return null;case 22:case 23:return t.lanes=0,GI(e,t,r)}return xo(e,t,r)}var JI,xN,eL,tL;JI=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xN=function(){};eL=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Nc(Ni.current);var i=null;switch(r){case"input":a=B_(e,a),n=B_(e,n),i=[];break;case"select":a=Dr({},a,{value:void 0}),n=Dr({},n,{value:void 0}),i=[];break;case"textarea":a=q_(e,a),n=q_(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Gy)}H_(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ap.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ap.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&gr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};tL=function(e,t,r,n){r!==n&&(t.flags|=4)};function Zh(e,t){if(!Cr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $n(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function M7(e,t,r){var n=t.pendingProps;switch(RC(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(t),null;case 1:return _s(t.type)&&Yy(),$n(t),null;case 3:return n=t.stateNode,gf(),xr(js),xr(Vn),VC(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Pv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ba!==null&&(kN(Ba),Ba=null))),xN(e,t),$n(t),null;case 5:zC(t);var a=Nc(vp.current);if(r=t.type,e!==null&&t.stateNode!=null)eL(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(pe(166));return $n(t),null}if(e=Nc(Ni.current),Pv(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[yi]=t,n[pp]=i,e=(t.mode&1)!==0,r){case"dialog":gr("cancel",n),gr("close",n);break;case"iframe":case"object":case"embed":gr("load",n);break;case"video":case"audio":for(a=0;a<Cm.length;a++)gr(Cm[a],n);break;case"source":gr("error",n);break;case"img":case"image":case"link":gr("error",n),gr("load",n);break;case"details":gr("toggle",n);break;case"input":aA(n,i),gr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},gr("invalid",n);break;case"textarea":oA(n,i),gr("invalid",n)}H_(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ev(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ev(n.textContent,l,e),a=["children",""+l]):ap.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&gr("scroll",n)}switch(r){case"input":bv(n),iA(n,i,!0);break;case"textarea":bv(n),lA(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Gy)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=P$(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[yi]=t,e[pp]=n,JI(e,t,!1,!1),t.stateNode=e;e:{switch(o=K_(r,n),r){case"dialog":gr("cancel",e),gr("close",e),a=n;break;case"iframe":case"object":case"embed":gr("load",e),a=n;break;case"video":case"audio":for(a=0;a<Cm.length;a++)gr(Cm[a],e);a=n;break;case"source":gr("error",e),a=n;break;case"img":case"image":case"link":gr("error",e),gr("load",e),a=n;break;case"details":gr("toggle",e),a=n;break;case"input":aA(e,n),a=B_(e,n),gr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Dr({},n,{value:void 0}),gr("invalid",e);break;case"textarea":oA(e,n),a=q_(e,n),gr("invalid",e);break;default:a=n}H_(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?T$(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&A$(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ip(e,c):typeof c=="number"&&ip(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ap.hasOwnProperty(i)?c!=null&&i==="onScroll"&&gr("scroll",e):c!=null&&xC(e,i,c,o))}switch(r){case"input":bv(e),iA(e,n,!1);break;case"textarea":bv(e),lA(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ol(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?$d(e,!!n.multiple,i,!1):n.defaultValue!=null&&$d(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Gy)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $n(t),null;case 6:if(e&&t.stateNode!=null)tL(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(pe(166));if(r=Nc(vp.current),Nc(Ni.current),Pv(t)){if(n=t.stateNode,r=t.memoizedProps,n[yi]=t,(i=n.nodeValue!==r)&&(e=qs,e!==null))switch(e.tag){case 3:Ev(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ev(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[yi]=t,t.stateNode=n}return $n(t),null;case 13:if(xr(Or),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Cr&&Vs!==null&&t.mode&1&&!(t.flags&128))xI(),mf(),t.flags|=98560,i=!1;else if(i=Pv(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(pe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(pe(317));i[yi]=t}else mf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$n(t),i=!1}else Ba!==null&&(kN(Ba),Ba=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Or.current&1?un===0&&(un=3):tk())),t.updateQueue!==null&&(t.flags|=4),$n(t),null);case 4:return gf(),xN(e,t),e===null&&hp(t.stateNode.containerInfo),$n(t),null;case 10:return LC(t.type._context),$n(t),null;case 17:return _s(t.type)&&Yy(),$n(t),null;case 19:if(xr(Or),i=t.memoizedState,i===null)return $n(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Zh(i,!1);else{if(un!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=rx(e),o!==null){for(t.flags|=128,Zh(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return dr(Or,Or.current&1|2),t.child}e=e.sibling}i.tail!==null&&qr()>yf&&(t.flags|=128,n=!0,Zh(i,!1),t.lanes=4194304)}else{if(!n)if(e=rx(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Zh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Cr)return $n(t),null}else 2*qr()-i.renderingStartTime>yf&&r!==1073741824&&(t.flags|=128,n=!0,Zh(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=qr(),t.sibling=null,r=Or.current,dr(Or,n?r&1|2:r&1),t):($n(t),null);case 22:case 23:return ek(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ls&1073741824&&($n(t),t.subtreeFlags&6&&(t.flags|=8192)):$n(t),null;case 24:return null;case 25:return null}throw Error(pe(156,t.tag))}function $7(e,t){switch(RC(t),t.tag){case 1:return _s(t.type)&&Yy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gf(),xr(js),xr(Vn),VC(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zC(t),null;case 13:if(xr(Or),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(pe(340));mf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xr(Or),null;case 4:return gf(),null;case 10:return LC(t.type._context),null;case 22:case 23:return ek(),null;case 24:return null;default:return null}}var Tv=!1,Fn=!1,I7=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Cd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Lr(e,t,n)}else r.current=null}function bN(e,t,r){try{r()}catch(n){Lr(e,t,n)}}var QA=!1;function L7(e,t){if(nN=Wy,e=iI(),TC(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===i&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(sN={focusedElem:e,selectionRange:r},Wy=!1,Oe=t;Oe!==null;)if(t=Oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Oe=e;else for(;Oe!==null;){t=Oe;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,v=g.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?p:Ra(t.type,p),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(_){Lr(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Oe=e;break}Oe=t.return}return g=QA,QA=!1,g}function Bm(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&bN(t,r,i)}a=a.next}while(a!==n)}}function r0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function wN(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function rL(e){var t=e.alternate;t!==null&&(e.alternate=null,rL(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yi],delete t[pp],delete t[oN],delete t[b7],delete t[w7])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nL(e){return e.tag===5||e.tag===3||e.tag===4}function ZA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nL(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jN(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Gy));else if(n!==4&&(e=e.child,e!==null))for(jN(e,t,r),e=e.sibling;e!==null;)jN(e,t,r),e=e.sibling}function _N(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(_N(e,t,r),e=e.sibling;e!==null;)_N(e,t,r),e=e.sibling}var En=null,Ia=!1;function Lo(e,t,r){for(r=r.child;r!==null;)sL(e,t,r),r=r.sibling}function sL(e,t,r){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(Gb,r)}catch{}switch(r.tag){case 5:Fn||Cd(r,t);case 6:var n=En,a=Ia;En=null,Lo(e,t,r),En=n,Ia=a,En!==null&&(Ia?(e=En,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):En.removeChild(r.stateNode));break;case 18:En!==null&&(Ia?(e=En,r=r.stateNode,e.nodeType===8?pj(e.parentNode,r):e.nodeType===1&&pj(e,r),up(e)):pj(En,r.stateNode));break;case 4:n=En,a=Ia,En=r.stateNode.containerInfo,Ia=!0,Lo(e,t,r),En=n,Ia=a;break;case 0:case 11:case 14:case 15:if(!Fn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&bN(r,t,o),a=a.next}while(a!==n)}Lo(e,t,r);break;case 1:if(!Fn&&(Cd(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Lr(r,t,l)}Lo(e,t,r);break;case 21:Lo(e,t,r);break;case 22:r.mode&1?(Fn=(n=Fn)||r.memoizedState!==null,Lo(e,t,r),Fn=n):Lo(e,t,r);break;default:Lo(e,t,r)}}function JA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new I7),t.forEach(function(n){var a=K7.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Pa(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:En=l.stateNode,Ia=!1;break e;case 3:En=l.stateNode.containerInfo,Ia=!0;break e;case 4:En=l.stateNode.containerInfo,Ia=!0;break e}l=l.return}if(En===null)throw Error(pe(160));sL(i,o,a),En=null,Ia=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Lr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aL(t,e),t=t.sibling}function aL(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pa(t,e),hi(e),n&4){try{Bm(3,e,e.return),r0(3,e)}catch(p){Lr(e,e.return,p)}try{Bm(5,e,e.return)}catch(p){Lr(e,e.return,p)}}break;case 1:Pa(t,e),hi(e),n&512&&r!==null&&Cd(r,r.return);break;case 5:if(Pa(t,e),hi(e),n&512&&r!==null&&Cd(r,r.return),e.flags&32){var a=e.stateNode;try{ip(a,"")}catch(p){Lr(e,e.return,p)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&k$(a,i),K_(l,o);var u=K_(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?T$(a,f):d==="dangerouslySetInnerHTML"?A$(a,f):d==="children"?ip(a,f):xC(a,d,f,u)}switch(l){case"input":z_(a,i);break;case"textarea":E$(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?$d(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?$d(a,!!i.multiple,i.defaultValue,!0):$d(a,!!i.multiple,i.multiple?[]:"",!1))}a[pp]=i}catch(p){Lr(e,e.return,p)}}break;case 6:if(Pa(t,e),hi(e),n&4){if(e.stateNode===null)throw Error(pe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){Lr(e,e.return,p)}}break;case 3:if(Pa(t,e),hi(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{up(t.containerInfo)}catch(p){Lr(e,e.return,p)}break;case 4:Pa(t,e),hi(e);break;case 13:Pa(t,e),hi(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(ZC=qr())),n&4&&JA(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Fn=(u=Fn)||d,Pa(t,e),Fn=u):Pa(t,e),hi(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Oe=e,d=e.child;d!==null;){for(f=Oe=d;Oe!==null;){switch(h=Oe,m=h.child,h.tag){case 0:case 11:case 14:case 15:Bm(4,h,h.return);break;case 1:Cd(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Lr(n,r,p)}}break;case 5:Cd(h,h.return);break;case 22:if(h.memoizedState!==null){t2(f);continue}}m!==null?(m.return=h,Oe=m):t2(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=O$("display",o))}catch(p){Lr(e,e.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Lr(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Pa(t,e),hi(e),n&4&&JA(e);break;case 21:break;default:Pa(t,e),hi(e)}}function hi(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(nL(r)){var n=r;break e}r=r.return}throw Error(pe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ip(a,""),n.flags&=-33);var i=ZA(e);_N(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=ZA(e);jN(e,l,o);break;default:throw Error(pe(161))}}catch(c){Lr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function F7(e,t,r){Oe=e,iL(e)}function iL(e,t,r){for(var n=(e.mode&1)!==0;Oe!==null;){var a=Oe,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Tv;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Fn;l=Tv;var u=Fn;if(Tv=o,(Fn=c)&&!u)for(Oe=a;Oe!==null;)o=Oe,c=o.child,o.tag===22&&o.memoizedState!==null?r2(a):c!==null?(c.return=o,Oe=c):r2(a);for(;i!==null;)Oe=i,iL(i),i=i.sibling;Oe=a,Tv=l,Fn=u}e2(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Oe=i):e2(e)}}function e2(e){for(;Oe!==null;){var t=Oe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fn||r0(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Fn)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ra(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&LA(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}LA(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&up(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}Fn||t.flags&512&&wN(t)}catch(h){Lr(t,t.return,h)}}if(t===e){Oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,Oe=r;break}Oe=t.return}}function t2(e){for(;Oe!==null;){var t=Oe;if(t===e){Oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Oe=r;break}Oe=t.return}}function r2(e){for(;Oe!==null;){var t=Oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{r0(4,t)}catch(c){Lr(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Lr(t,a,c)}}var i=t.return;try{wN(t)}catch(c){Lr(t,i,c)}break;case 5:var o=t.return;try{wN(t)}catch(c){Lr(t,o,c)}}}catch(c){Lr(t,t.return,c)}if(t===e){Oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Oe=l;break}Oe=t.return}}var U7=Math.ceil,ax=Eo.ReactCurrentDispatcher,XC=Eo.ReactCurrentOwner,va=Eo.ReactCurrentBatchConfig,It=0,jn=null,Qr=null,Tn=0,Ls=0,kd=zl(0),un=0,wp=null,ou=0,n0=0,QC=0,zm=null,ys=null,ZC=0,yf=1/0,Qi=null,ix=!1,NN=null,xl=null,Dv=!1,dl=null,ox=0,Vm=0,SN=null,_y=-1,Ny=0;function rs(){return It&6?qr():_y!==-1?_y:_y=qr()}function bl(e){return e.mode&1?It&2&&Tn!==0?Tn&-Tn:_7.transition!==null?(Ny===0&&(Ny=q$()),Ny):(e=Jt,e!==0||(e=window.event,e=e===void 0?16:Q$(e.type)),e):1}function Ha(e,t,r,n){if(50<Vm)throw Vm=0,SN=null,Error(pe(185));Ag(e,r,n),(!(It&2)||e!==jn)&&(e===jn&&(!(It&2)&&(n0|=r),un===4&&Qo(e,Tn)),Ns(e,n),r===1&&It===0&&!(t.mode&1)&&(yf=qr()+500,Jb&&Vl()))}function Ns(e,t){var r=e.callbackNode;_9(e,t);var n=qy(e,e===jn?Tn:0);if(n===0)r!==null&&dA(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&dA(r),t===1)e.tag===0?j7(n2.bind(null,e)):gI(n2.bind(null,e)),y7(function(){!(It&6)&&Vl()}),r=null;else{switch(W$(n)){case 1:r=NC;break;case 4:r=z$;break;case 16:r=Vy;break;case 536870912:r=V$;break;default:r=Vy}r=mL(r,oL.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function oL(e,t){if(_y=-1,Ny=0,It&6)throw Error(pe(327));var r=e.callbackNode;if(Bd()&&e.callbackNode!==r)return null;var n=qy(e,e===jn?Tn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=lx(e,n);else{t=n;var a=It;It|=2;var i=cL();(jn!==e||Tn!==t)&&(Qi=null,yf=qr()+500,Yc(e,t));do try{V7();break}catch(l){lL(e,l)}while(!0);IC(),ax.current=i,It=a,Qr!==null?t=0:(jn=null,Tn=0,t=un)}if(t!==0){if(t===2&&(a=Z_(e),a!==0&&(n=a,t=CN(e,a))),t===1)throw r=wp,Yc(e,0),Qo(e,n),Ns(e,qr()),r;if(t===6)Qo(e,n);else{if(a=e.current.alternate,!(n&30)&&!B7(a)&&(t=lx(e,n),t===2&&(i=Z_(e),i!==0&&(n=i,t=CN(e,i))),t===1))throw r=wp,Yc(e,0),Qo(e,n),Ns(e,qr()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(pe(345));case 2:hc(e,ys,Qi);break;case 3:if(Qo(e,n),(n&130023424)===n&&(t=ZC+500-qr(),10<t)){if(qy(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){rs(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=iN(hc.bind(null,e,ys,Qi),t);break}hc(e,ys,Qi);break;case 4:if(Qo(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Wa(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=qr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*U7(n/1960))-n,10<n){e.timeoutHandle=iN(hc.bind(null,e,ys,Qi),n);break}hc(e,ys,Qi);break;case 5:hc(e,ys,Qi);break;default:throw Error(pe(329))}}}return Ns(e,qr()),e.callbackNode===r?oL.bind(null,e):null}function CN(e,t){var r=zm;return e.current.memoizedState.isDehydrated&&(Yc(e,t).flags|=256),e=lx(e,t),e!==2&&(t=ys,ys=r,t!==null&&kN(t)),e}function kN(e){ys===null?ys=e:ys.push.apply(ys,e)}function B7(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ya(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qo(e,t){for(t&=~QC,t&=~n0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Wa(t),n=1<<r;e[r]=-1,t&=~n}}function n2(e){if(It&6)throw Error(pe(327));Bd();var t=qy(e,0);if(!(t&1))return Ns(e,qr()),null;var r=lx(e,t);if(e.tag!==0&&r===2){var n=Z_(e);n!==0&&(t=n,r=CN(e,n))}if(r===1)throw r=wp,Yc(e,0),Qo(e,t),Ns(e,qr()),r;if(r===6)throw Error(pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hc(e,ys,Qi),Ns(e,qr()),null}function JC(e,t){var r=It;It|=1;try{return e(t)}finally{It=r,It===0&&(yf=qr()+500,Jb&&Vl())}}function lu(e){dl!==null&&dl.tag===0&&!(It&6)&&Bd();var t=It;It|=1;var r=va.transition,n=Jt;try{if(va.transition=null,Jt=1,e)return e()}finally{Jt=n,va.transition=r,It=t,!(It&6)&&Vl()}}function ek(){Ls=kd.current,xr(kd)}function Yc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,v7(r)),Qr!==null)for(r=Qr.return;r!==null;){var n=r;switch(RC(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Yy();break;case 3:gf(),xr(js),xr(Vn),VC();break;case 5:zC(n);break;case 4:gf();break;case 13:xr(Or);break;case 19:xr(Or);break;case 10:LC(n.type._context);break;case 22:case 23:ek()}r=r.return}if(jn=e,Qr=e=wl(e.current,null),Tn=Ls=t,un=0,wp=null,QC=n0=ou=0,ys=zm=null,_c!==null){for(t=0;t<_c.length;t++)if(r=_c[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}_c=null}return e}function lL(e,t){do{var r=Qr;try{if(IC(),by.current=sx,nx){for(var n=Tr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}nx=!1}if(iu=0,bn=on=Tr=null,Um=!1,yp=0,XC.current=null,r===null||r.return===null){un=1,wp=t,Qr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Tn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=qA(o);if(m!==null){m.flags&=-257,WA(m,o,l,i,t),m.mode&1&&VA(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){VA(i,u,t),tk();break e}c=Error(pe(426))}}else if(Cr&&l.mode&1){var v=qA(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),WA(v,o,l,i,t),MC(vf(c,l));break e}}i=c=vf(c,l),un!==4&&(un=2),zm===null?zm=[i]:zm.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=WI(i,c,t);IA(i,b);break e;case 1:l=c;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(xl===null||!xl.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=HI(i,l,t);IA(i,_);break e}}i=i.return}while(i!==null)}dL(r)}catch(j){t=j,Qr===r&&r!==null&&(Qr=r=r.return);continue}break}while(!0)}function cL(){var e=ax.current;return ax.current=sx,e===null?sx:e}function tk(){(un===0||un===3||un===2)&&(un=4),jn===null||!(ou&268435455)&&!(n0&268435455)||Qo(jn,Tn)}function lx(e,t){var r=It;It|=2;var n=cL();(jn!==e||Tn!==t)&&(Qi=null,Yc(e,t));do try{z7();break}catch(a){lL(e,a)}while(!0);if(IC(),It=r,ax.current=n,Qr!==null)throw Error(pe(261));return jn=null,Tn=0,un}function z7(){for(;Qr!==null;)uL(Qr)}function V7(){for(;Qr!==null&&!m9();)uL(Qr)}function uL(e){var t=hL(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,t===null?dL(e):Qr=t,XC.current=null}function dL(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=$7(r,t),r!==null){r.flags&=32767,Qr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{un=6,Qr=null;return}}else if(r=M7(r,t,Ls),r!==null){Qr=r;return}if(t=t.sibling,t!==null){Qr=t;return}Qr=t=e}while(t!==null);un===0&&(un=5)}function hc(e,t,r){var n=Jt,a=va.transition;try{va.transition=null,Jt=1,q7(e,t,r,n)}finally{va.transition=a,Jt=n}return null}function q7(e,t,r,n){do Bd();while(dl!==null);if(It&6)throw Error(pe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(pe(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(N9(e,i),e===jn&&(Qr=jn=null,Tn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Dv||(Dv=!0,mL(Vy,function(){return Bd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=va.transition,va.transition=null;var o=Jt;Jt=1;var l=It;It|=4,XC.current=null,L7(e,r),aL(r,e),u7(sN),Wy=!!nN,sN=nN=null,e.current=r,F7(r),p9(),It=l,Jt=o,va.transition=i}else e.current=r;if(Dv&&(Dv=!1,dl=e,ox=a),i=e.pendingLanes,i===0&&(xl=null),y9(r.stateNode),Ns(e,qr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(ix)throw ix=!1,e=NN,NN=null,e;return ox&1&&e.tag!==0&&Bd(),i=e.pendingLanes,i&1?e===SN?Vm++:(Vm=0,SN=e):Vm=0,Vl(),null}function Bd(){if(dl!==null){var e=W$(ox),t=va.transition,r=Jt;try{if(va.transition=null,Jt=16>e?16:e,dl===null)var n=!1;else{if(e=dl,dl=null,ox=0,It&6)throw Error(pe(331));var a=It;for(It|=4,Oe=e.current;Oe!==null;){var i=Oe,o=i.child;if(Oe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Oe=u;Oe!==null;){var d=Oe;switch(d.tag){case 0:case 11:case 15:Bm(8,d,i)}var f=d.child;if(f!==null)f.return=d,Oe=f;else for(;Oe!==null;){d=Oe;var h=d.sibling,m=d.return;if(rL(d),d===u){Oe=null;break}if(h!==null){h.return=m,Oe=h;break}Oe=m}}}var g=i.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}Oe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Oe=o;else e:for(;Oe!==null;){if(i=Oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bm(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Oe=b;break e}Oe=i.return}}var y=e.current;for(Oe=y;Oe!==null;){o=Oe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Oe=w;else e:for(o=y;Oe!==null;){if(l=Oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:r0(9,l)}}catch(j){Lr(l,l.return,j)}if(l===o){Oe=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Oe=_;break e}Oe=l.return}}if(It=a,Vl(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(Gb,e)}catch{}n=!0}return n}finally{Jt=r,va.transition=t}}return!1}function s2(e,t,r){t=vf(r,t),t=WI(e,t,1),e=yl(e,t,1),t=rs(),e!==null&&(Ag(e,1,t),Ns(e,t))}function Lr(e,t,r){if(e.tag===3)s2(e,e,r);else for(;t!==null;){if(t.tag===3){s2(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xl===null||!xl.has(n))){e=vf(r,e),e=HI(t,e,1),t=yl(t,e,1),e=rs(),t!==null&&(Ag(t,1,e),Ns(t,e));break}}t=t.return}}function W7(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=rs(),e.pingedLanes|=e.suspendedLanes&r,jn===e&&(Tn&r)===r&&(un===4||un===3&&(Tn&130023424)===Tn&&500>qr()-ZC?Yc(e,0):QC|=r),Ns(e,t)}function fL(e,t){t===0&&(e.mode&1?(t=_v,_v<<=1,!(_v&130023424)&&(_v=4194304)):t=1);var r=rs();e=yo(e,t),e!==null&&(Ag(e,t,r),Ns(e,r))}function H7(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),fL(e,r)}function K7(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(pe(314))}n!==null&&n.delete(t),fL(e,r)}var hL;hL=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||js.current)xs=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return xs=!1,R7(e,t,r);xs=!!(e.flags&131072)}else xs=!1,Cr&&t.flags&1048576&&vI(t,Zy,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;jy(e,t),e=t.pendingProps;var a=hf(t,Vn.current);Ud(t,r),a=WC(null,t,n,e,a,r);var i=HC();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_s(n)?(i=!0,Xy(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,UC(t),a.updater=t0,t.stateNode=a,a._reactInternals=t,hN(t,n,e,r),t=gN(null,t,n,!0,i,r)):(t.tag=0,Cr&&i&&DC(t),Yn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(jy(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Y7(n),e=Ra(n,e),a){case 0:t=pN(null,t,n,e,r);break e;case 1:t=GA(null,t,n,e,r);break e;case 11:t=HA(null,t,n,e,r);break e;case 14:t=KA(null,t,n,Ra(n.type,e),r);break e}throw Error(pe(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ra(n,a),pN(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ra(n,a),GA(e,t,n,a,r);case 3:e:{if(XI(t),e===null)throw Error(pe(387));n=t.pendingProps,i=t.memoizedState,a=i.element,_I(e,t),tx(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=vf(Error(pe(423)),t),t=YA(e,t,n,r,a);break e}else if(n!==a){a=vf(Error(pe(424)),t),t=YA(e,t,n,r,a);break e}else for(Vs=vl(t.stateNode.containerInfo.firstChild),qs=t,Cr=!0,Ba=null,r=wI(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(mf(),n===a){t=xo(e,t,r);break e}Yn(e,t,n,r)}t=t.child}return t;case 5:return NI(t),e===null&&uN(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,aN(n,a)?o=null:i!==null&&aN(n,i)&&(t.flags|=32),YI(e,t),Yn(e,t,o,r),t.child;case 6:return e===null&&uN(t),null;case 13:return QI(e,t,r);case 4:return BC(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=pf(t,null,n,r):Yn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ra(n,a),HA(e,t,n,a,r);case 7:return Yn(e,t,t.pendingProps,r),t.child;case 8:return Yn(e,t,t.pendingProps.children,r),t.child;case 12:return Yn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,dr(Jy,n._currentValue),n._currentValue=o,i!==null)if(Ya(i.value,o)){if(i.children===a.children&&!js.current){t=xo(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=fo(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),dN(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(pe(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),dN(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Yn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ud(t,r),a=xa(a),n=n(a),t.flags|=1,Yn(e,t,n,r),t.child;case 14:return n=t.type,a=Ra(n,t.pendingProps),a=Ra(n.type,a),KA(e,t,n,a,r);case 15:return KI(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ra(n,a),jy(e,t),t.tag=1,_s(n)?(e=!0,Xy(t)):e=!1,Ud(t,r),qI(t,n,a),hN(t,n,a,r),gN(null,t,n,!0,e,r);case 19:return ZI(e,t,r);case 22:return GI(e,t,r)}throw Error(pe(156,t.tag))};function mL(e,t){return B$(e,t)}function G7(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(e,t,r,n){return new G7(e,t,r,n)}function rk(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Y7(e){if(typeof e=="function")return rk(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wC)return 11;if(e===jC)return 14}return 2}function wl(e,t){var r=e.alternate;return r===null?(r=ha(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Sy(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")rk(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case vd:return Xc(r.children,a,i,t);case bC:o=8,a|=8;break;case I_:return e=ha(12,r,t,a|2),e.elementType=I_,e.lanes=i,e;case L_:return e=ha(13,r,t,a),e.elementType=L_,e.lanes=i,e;case F_:return e=ha(19,r,t,a),e.elementType=F_,e.lanes=i,e;case N$:return s0(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case j$:o=10;break e;case _$:o=9;break e;case wC:o=11;break e;case jC:o=14;break e;case Wo:o=16,n=null;break e}throw Error(pe(130,e==null?e:typeof e,""))}return t=ha(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Xc(e,t,r,n){return e=ha(7,e,n,t),e.lanes=r,e}function s0(e,t,r,n){return e=ha(22,e,n,t),e.elementType=N$,e.lanes=r,e.stateNode={isHidden:!1},e}function _j(e,t,r){return e=ha(6,e,null,t),e.lanes=r,e}function Nj(e,t,r){return t=ha(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function X7(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sj(0),this.expirationTimes=sj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sj(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function nk(e,t,r,n,a,i,o,l,c){return e=new X7(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ha(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},UC(i),e}function Q7(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gd,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function pL(e){if(!e)return Tl;e=e._reactInternals;e:{if(Du(e)!==e||e.tag!==1)throw Error(pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_s(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(pe(171))}if(e.tag===1){var r=e.type;if(_s(r))return pI(e,r,t)}return t}function gL(e,t,r,n,a,i,o,l,c){return e=nk(r,n,!0,e,a,i,o,l,c),e.context=pL(null),r=e.current,n=rs(),a=bl(r),i=fo(n,a),i.callback=t??null,yl(r,i,a),e.current.lanes=a,Ag(e,a,n),Ns(e,n),e}function a0(e,t,r,n){var a=t.current,i=rs(),o=bl(a);return r=pL(r),t.context===null?t.context=r:t.pendingContext=r,t=fo(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=yl(a,t,o),e!==null&&(Ha(e,a,o,i),xy(e,a,o)),o}function cx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function a2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function sk(e,t){a2(e,t),(e=e.alternate)&&a2(e,t)}function Z7(){return null}var vL=typeof reportError=="function"?reportError:function(e){console.error(e)};function ak(e){this._internalRoot=e}i0.prototype.render=ak.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(pe(409));a0(e,t,null,null)};i0.prototype.unmount=ak.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lu(function(){a0(null,e,null,null)}),t[vo]=null}};function i0(e){this._internalRoot=e}i0.prototype.unstable_scheduleHydration=function(e){if(e){var t=G$();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Xo.length&&t!==0&&t<Xo[r].priority;r++);Xo.splice(r,0,e),r===0&&X$(e)}};function ik(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function i2(){}function J7(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=cx(o);i.call(u)}}var o=gL(t,n,e,0,null,!1,!1,"",i2);return e._reactRootContainer=o,e[vo]=o.current,hp(e.nodeType===8?e.parentNode:e),lu(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=cx(c);l.call(u)}}var c=nk(e,0,!1,null,null,!1,!1,"",i2);return e._reactRootContainer=c,e[vo]=c.current,hp(e.nodeType===8?e.parentNode:e),lu(function(){a0(t,c,r,n)}),c}function l0(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=cx(o);l.call(c)}}a0(t,o,e,a)}else o=J7(r,t,e,a,n);return cx(o)}H$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Sm(t.pendingLanes);r!==0&&(SC(t,r|1),Ns(t,qr()),!(It&6)&&(yf=qr()+500,Vl()))}break;case 13:lu(function(){var n=yo(e,1);if(n!==null){var a=rs();Ha(n,e,1,a)}}),sk(e,1)}};CC=function(e){if(e.tag===13){var t=yo(e,134217728);if(t!==null){var r=rs();Ha(t,e,134217728,r)}sk(e,134217728)}};K$=function(e){if(e.tag===13){var t=bl(e),r=yo(e,t);if(r!==null){var n=rs();Ha(r,e,t,n)}sk(e,t)}};G$=function(){return Jt};Y$=function(e,t){var r=Jt;try{return Jt=e,t()}finally{Jt=r}};Y_=function(e,t,r){switch(t){case"input":if(z_(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Zb(n);if(!a)throw Error(pe(90));C$(n),z_(n,a)}}}break;case"textarea":E$(e,r);break;case"select":t=r.value,t!=null&&$d(e,!!r.multiple,t,!1)}};M$=JC;$$=lu;var eK={usingClientEntryPoint:!1,Events:[Tg,wd,Zb,D$,R$,JC]},Jh={findFiberByHostInstance:jc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tK={bundleType:Jh.bundleType,version:Jh.version,rendererPackageName:Jh.rendererPackageName,rendererConfig:Jh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Eo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=F$(e),e===null?null:e.stateNode},findFiberByHostInstance:Jh.findFiberByHostInstance||Z7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rv.isDisabled&&Rv.supportsFiber)try{Gb=Rv.inject(tK),_i=Rv}catch{}}ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eK;ea.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ik(t))throw Error(pe(200));return Q7(e,t,null,r)};ea.createRoot=function(e,t){if(!ik(e))throw Error(pe(299));var r=!1,n="",a=vL;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=nk(e,1,!1,null,null,r,!1,n,a),e[vo]=t.current,hp(e.nodeType===8?e.parentNode:e),new ak(t)};ea.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(pe(188)):(e=Object.keys(e).join(","),Error(pe(268,e)));return e=F$(t),e=e===null?null:e.stateNode,e};ea.flushSync=function(e){return lu(e)};ea.hydrate=function(e,t,r){if(!o0(t))throw Error(pe(200));return l0(null,e,t,!0,r)};ea.hydrateRoot=function(e,t,r){if(!ik(e))throw Error(pe(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=vL;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=gL(t,null,e,1,r??null,a,!1,i,o),e[vo]=t.current,hp(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new i0(t)};ea.render=function(e,t,r){if(!o0(t))throw Error(pe(200));return l0(null,e,t,!1,r)};ea.unmountComponentAtNode=function(e){if(!o0(e))throw Error(pe(40));return e._reactRootContainer?(lu(function(){l0(null,null,e,!1,function(){e._reactRootContainer=null,e[vo]=null})}),!0):!1};ea.unstable_batchedUpdates=JC;ea.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!o0(r))throw Error(pe(200));if(e==null||e._reactInternals===void 0)throw Error(pe(38));return l0(e,t,r,!1,n)};ea.version="18.3.1-next-f1338f8080-20240426";function yL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yL)}catch(e){console.error(e)}}yL(),y$.exports=ea;var Ru=y$.exports;const xL=Kt(Ru);var bL,o2=Ru;bL=o2.createRoot,o2.hydrateRoot;const rK=1,nK=1e6;let Sj=0;function sK(){return Sj=(Sj+1)%Number.MAX_SAFE_INTEGER,Sj.toString()}const Cj=new Map,l2=e=>{if(Cj.has(e))return;const t=setTimeout(()=>{Cj.delete(e),qm({type:"REMOVE_TOAST",toastId:e})},nK);Cj.set(e,t)},aK=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,rK)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?l2(r):e.toasts.forEach(n=>{l2(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Cy=[];let ky={toasts:[]};function qm(e){ky=aK(ky,e),Cy.forEach(t=>{t(ky)})}function oe({...e}){const t=sK(),r=a=>qm({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>qm({type:"DISMISS_TOAST",toastId:t});return qm({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function or(){const[e,t]=x.useState(ky);return x.useEffect(()=>(Cy.push(t),()=>{const r=Cy.indexOf(t);r>-1&&Cy.splice(r,1)}),[e]),{...e,toast:oe,dismiss:r=>qm({type:"DISMISS_TOAST",toastId:r})}}function fe(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function c2(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function c0(...e){return t=>{let r=!1;const n=e.map(a=>{const i=c2(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():c2(e[a],null)}}}}function We(...e){return x.useCallback(c0(...e),e)}function iK(e,t){const r=x.createContext(t),n=i=>{const{children:o,...l}=i,c=x.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=x.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function zr(e,t=[]){let r=[];function n(i,o){const l=x.createContext(o),c=r.length;r=[...r,o];const u=f=>{var b;const{scope:h,children:m,...g}=f,p=((b=h==null?void 0:h[e])==null?void 0:b[c])||l,v=x.useMemo(()=>g,Object.values(g));return s.jsx(p.Provider,{value:v,children:m})};u.displayName=i+"Provider";function d(f,h){var p;const m=((p=h==null?void 0:h[e])==null?void 0:p[c])||l,g=x.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,oK(a,...t)]}function oK(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Dl(e){const t=lK(e),r=x.forwardRef((n,a)=>{const{children:i,...o}=n,l=x.Children.toArray(i),c=l.find(cK);if(c){const u=c.props.children,d=l.map(f=>f===c?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...o,ref:a,children:x.isValidElement(u)?x.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var wL=Dl("Slot");function lK(e){const t=x.forwardRef((r,n)=>{const{children:a,...i}=r;if(x.isValidElement(a)){const o=dK(a),l=uK(i,a.props);return a.type!==x.Fragment&&(l.ref=n?c0(n,o):o),x.cloneElement(a,l)}return x.Children.count(a)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var jL=Symbol("radix.slottable");function _L(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=jL,t}function cK(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===jL}function uK(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function dK(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function ch(e){const t=e+"CollectionProvider",[r,n]=zr(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:b}=p,y=O.useRef(null),w=O.useRef(new Map).current;return s.jsx(a,{scope:v,itemMap:w,collectionRef:y,children:b})};o.displayName=t;const l=e+"CollectionSlot",c=Dl(l),u=O.forwardRef((p,v)=>{const{scope:b,children:y}=p,w=i(l,b),_=We(v,w.collectionRef);return s.jsx(c,{ref:_,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=Dl(d),m=O.forwardRef((p,v)=>{const{scope:b,children:y,...w}=p,_=O.useRef(null),j=We(v,_),N=i(d,b);return O.useEffect(()=>(N.itemMap.set(_,{ref:_,...w}),()=>void N.itemMap.delete(_))),s.jsx(h,{[f]:"",ref:j,children:y})});m.displayName=d;function g(p){const v=i(e+"CollectionConsumer",p);return O.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((N,S)=>w.indexOf(N.ref.current)-w.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,n]}var fK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ne=fK.reduce((e,t)=>{const r=Dl(`Primitive.${t}`),n=x.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function ok(e,t){e&&Ru.flushSync(()=>e.dispatchEvent(t))}function Ur(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function hK(e,t=globalThis==null?void 0:globalThis.document){const r=Ur(e);x.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var mK="DismissableLayer",EN="dismissableLayer.update",pK="dismissableLayer.pointerDownOutside",gK="dismissableLayer.focusOutside",u2,NL=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mu=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=x.useContext(NL),[d,f]=x.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=x.useState({}),g=We(t,S=>f(S)),p=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(v),y=d?p.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=y>=b,j=yK(S=>{const k=S.target,C=[...u.branches].some(P=>P.contains(k));!_||C||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},h),N=xK(S=>{const k=S.target;[...u.branches].some(P=>P.contains(k))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},h);return hK(S=>{y===u.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},h),x.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(u2=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),d2(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=u2)}},[d,h,r,u]),x.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),d2())},[d,u]),x.useEffect(()=>{const S=()=>m({});return document.addEventListener(EN,S),()=>document.removeEventListener(EN,S)},[]),s.jsx(Ne.div,{...c,ref:g,style:{pointerEvents:w?_?"auto":"none":void 0,...e.style},onFocusCapture:fe(e.onFocusCapture,N.onFocusCapture),onBlurCapture:fe(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:fe(e.onPointerDownCapture,j.onPointerDownCapture)})});Mu.displayName=mK;var vK="DismissableLayerBranch",SL=x.forwardRef((e,t)=>{const r=x.useContext(NL),n=x.useRef(null),a=We(t,n);return x.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Ne.div,{...e,ref:a})});SL.displayName=vK;function yK(e,t=globalThis==null?void 0:globalThis.document){const r=Ur(e),n=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){CL(pK,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function xK(e,t=globalThis==null?void 0:globalThis.document){const r=Ur(e),n=x.useRef(!1);return x.useEffect(()=>{const a=i=>{i.target&&!n.current&&CL(gK,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function d2(){const e=new CustomEvent(EN);document.dispatchEvent(e)}function CL(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?ok(a,i):a.dispatchEvent(i)}var bK=Mu,wK=SL,Br=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},jK="Portal",uh=x.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=x.useState(!1);Br(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?xL.createPortal(s.jsx(Ne.div,{...n,ref:t}),o):null});uh.displayName=jK;function _K(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var en=e=>{const{present:t,children:r}=e,n=NK(t),a=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),i=We(n.ref,SK(a));return typeof r=="function"||n.isPresent?x.cloneElement(a,{ref:i}):null};en.displayName="Presence";function NK(e){const[t,r]=x.useState(),n=x.useRef(null),a=x.useRef(e),i=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=_K(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=Mv(n.current);i.current=l==="mounted"?u:"none"},[l]),Br(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=Mv(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Br(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const p=Mv(n.current).includes(m.animationName);if(m.target===t&&p&&(c("ANIMATION_END"),!a.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=m=>{m.target===t&&(i.current=Mv(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Mv(e){return(e==null?void 0:e.animationName)||"none"}function SK(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var CK=gC[" useInsertionEffect ".trim().toString()]||Br;function qn({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=kK({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=x.useRef(e!==void 0);x.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=x.useCallback(d=>{var f;if(l){const h=EK(d)?d(e):d;h!==e&&((f=o.current)==null||f.call(o,h))}else i(d)},[l,e,i,o]);return[c,u]}function kK({defaultProp:e,onChange:t}){const[r,n]=x.useState(e),a=x.useRef(r),i=x.useRef(t);return CK(()=>{i.current=t},[t]),x.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function EK(e){return typeof e=="function"}var kL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),PK="VisuallyHidden",u0=x.forwardRef((e,t)=>s.jsx(Ne.span,{...e,ref:t,style:{...kL,...e.style}}));u0.displayName=PK;var AK=u0,lk="ToastProvider",[ck,OK,TK]=ch("Toast"),[EL,t3e]=zr("Toast",[TK]),[DK,d0]=EL(lk),PL=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=x.useState(null),[u,d]=x.useState(0),f=x.useRef(!1),h=x.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${lk}\`. Expected non-empty \`string\`.`),s.jsx(ck.Provider,{scope:t,children:s.jsx(DK,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:x.useCallback(()=>d(m=>m+1),[]),onToastRemove:x.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};PL.displayName=lk;var AL="ToastViewport",RK=["F8"],PN="toast.viewportPause",AN="toast.viewportResume",OL=x.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=RK,label:a="Notifications ({hotkey})",...i}=e,o=d0(AL,r),l=OK(r),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=x.useRef(null),h=We(t,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;x.useEffect(()=>{const v=b=>{var w;n.length!==0&&n.every(_=>b[_]||b.code===_)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),x.useEffect(()=>{const v=c.current,b=f.current;if(g&&v&&b){const y=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(PN);b.dispatchEvent(N),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(AN);b.dispatchEvent(N),o.isClosePausedRef.current=!1}},_=N=>{!v.contains(N.relatedTarget)&&w()},j=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",y),v.addEventListener("focusout",_),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",j),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",j),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const p=x.useCallback(({tabbingDirection:v})=>{const y=l().map(w=>{const _=w.ref.current,j=[_,...KK(_)];return v==="forwards"?j:j.reverse()});return(v==="forwards"?y.reverse():y).flat()},[l]);return x.useEffect(()=>{const v=f.current;if(v){const b=y=>{var j,N,S;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const k=document.activeElement,C=y.shiftKey;if(y.target===v&&C){(j=u.current)==null||j.focus();return}const E=p({tabbingDirection:C?"backwards":"forwards"}),R=E.findIndex($=>$===k);kj(E.slice(R+1))?y.preventDefault():C?(N=u.current)==null||N.focus():(S=d.current)==null||S.focus()}};return v.addEventListener("keydown",b),()=>v.removeEventListener("keydown",b)}},[l,p]),s.jsxs(wK,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&s.jsx(ON,{ref:u,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});kj(v)}}),s.jsx(ck.Slot,{scope:r,children:s.jsx(Ne.ol,{tabIndex:-1,...i,ref:h})}),g&&s.jsx(ON,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});kj(v)}})]})});OL.displayName=AL;var TL="ToastFocusProxy",ON=x.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=d0(TL,r);return s.jsx(u0,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});ON.displayName=TL;var Rg="Toast",MK="toast.swipeStart",$K="toast.swipeMove",IK="toast.swipeCancel",LK="toast.swipeEnd",DL=x.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=qn({prop:n,defaultProp:a??!0,onChange:i,caller:Rg});return s.jsx(en,{present:r||l,children:s.jsx(BK,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Ur(e.onPause),onResume:Ur(e.onResume),onSwipeStart:fe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:fe(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:fe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:fe(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});DL.displayName=Rg;var[FK,UK]=EL(Rg,{onClose(){}}),BK=x.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...g}=e,p=d0(Rg,r),[v,b]=x.useState(null),y=We(t,$=>b($)),w=x.useRef(null),_=x.useRef(null),j=a||p.duration,N=x.useRef(0),S=x.useRef(j),k=x.useRef(0),{onToastAdd:C,onToastRemove:P}=p,A=Ur(()=>{var B;(v==null?void 0:v.contains(document.activeElement))&&((B=p.viewport)==null||B.focus()),o()}),E=x.useCallback($=>{!$||$===1/0||(window.clearTimeout(k.current),N.current=new Date().getTime(),k.current=window.setTimeout(A,$))},[A]);x.useEffect(()=>{const $=p.viewport;if($){const B=()=>{E(S.current),u==null||u()},F=()=>{const L=new Date().getTime()-N.current;S.current=S.current-L,window.clearTimeout(k.current),c==null||c()};return $.addEventListener(PN,F),$.addEventListener(AN,B),()=>{$.removeEventListener(PN,F),$.removeEventListener(AN,B)}}},[p.viewport,j,c,u,E]),x.useEffect(()=>{i&&!p.isClosePausedRef.current&&E(j)},[i,j,p.isClosePausedRef,E]),x.useEffect(()=>(C(),()=>P()),[C,P]);const R=x.useMemo(()=>v?UL(v):null,[v]);return p.viewport?s.jsxs(s.Fragment,{children:[R&&s.jsx(zK,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),s.jsx(FK,{scope:r,onClose:A,children:Ru.createPortal(s.jsx(ck.ItemSlot,{scope:r,children:s.jsx(bK,{asChild:!0,onEscapeKeyDown:fe(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||A(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Ne.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:fe(e.onKeyDown,$=>{$.key==="Escape"&&(l==null||l($.nativeEvent),$.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:fe(e.onPointerDown,$=>{$.button===0&&(w.current={x:$.clientX,y:$.clientY})}),onPointerMove:fe(e.onPointerMove,$=>{if(!w.current)return;const B=$.clientX-w.current.x,F=$.clientY-w.current.y,L=!!_.current,D=["left","right"].includes(p.swipeDirection),T=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,U=D?T(0,B):0,X=D?0:T(0,F),H=$.pointerType==="touch"?10:2,ae={x:U,y:X},he={originalEvent:$,delta:ae};L?(_.current=ae,$v($K,f,he,{discrete:!1})):f2(ae,p.swipeDirection,H)?(_.current=ae,$v(MK,d,he,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(B)>H||Math.abs(F)>H)&&(w.current=null)}),onPointerUp:fe(e.onPointerUp,$=>{const B=_.current,F=$.target;if(F.hasPointerCapture($.pointerId)&&F.releasePointerCapture($.pointerId),_.current=null,w.current=null,B){const L=$.currentTarget,D={originalEvent:$,delta:B};f2(B,p.swipeDirection,p.swipeThreshold)?$v(LK,m,D,{discrete:!0}):$v(IK,h,D,{discrete:!0}),L.addEventListener("click",T=>T.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),zK=e=>{const{__scopeToast:t,children:r,...n}=e,a=d0(Rg,t),[i,o]=x.useState(!1),[l,c]=x.useState(!1);return WK(()=>o(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(uh,{asChild:!0,children:s.jsx(u0,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},VK="ToastTitle",RL=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ne.div,{...n,ref:t})});RL.displayName=VK;var qK="ToastDescription",ML=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Ne.div,{...n,ref:t})});ML.displayName=qK;var $L="ToastAction",IL=x.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(FL,{altText:r,asChild:!0,children:s.jsx(uk,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${$L}\`. Expected non-empty \`string\`.`),null)});IL.displayName=$L;var LL="ToastClose",uk=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=UK(LL,r);return s.jsx(FL,{asChild:!0,children:s.jsx(Ne.button,{type:"button",...n,ref:t,onClick:fe(e.onClick,a.onClose)})})});uk.displayName=LL;var FL=x.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Ne.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function UL(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),HK(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...UL(n))}}),t}function $v(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?ok(a,i):a.dispatchEvent(i)}var f2=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function WK(e=()=>{}){const t=Ur(e);Br(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function HK(e){return e.nodeType===e.ELEMENT_NODE}function KK(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function kj(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var GK=PL,BL=OL,zL=DL,VL=RL,qL=ML,WL=IL,HL=uk;function KL(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=KL(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function at(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=KL(e))&&(n&&(n+=" "),n+=t);return n}const h2=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,m2=at,dh=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return m2(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const h=h2(d)||h2(f);return a[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(g=>{let[p,v]=g;return Array.isArray(v)?v.includes({...i,...l}[p]):{...i,...l}[p]===v})?[...u,f,h]:u},[]);return m2(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),GL=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QK=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>x.createElement("svg",{ref:c,...XK,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:GL("lucide",a),...l},[...o.map(([u,d])=>x.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(e,t)=>{const r=x.forwardRef(({className:n,...a},i)=>x.createElement(QK,{ref:i,iconNode:t,className:GL(`lucide-${YK(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=ge("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=ge("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=ge("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=ge("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=ge("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=ge("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=ge("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=ge("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=ge("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rG=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=ge("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=ge("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nG=ge("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=ge("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=ge("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=ge("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=ge("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=ge("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=ge("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sG=ge("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=ge("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=ge("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=ge("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iG=ge("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=ge("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=ge("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=ge("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=ge("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oG=ge("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=ge("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lG=ge("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=ge("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=ge("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=ge("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=ge("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=ge("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cG=ge("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=ge("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=ge("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=ge("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=ge("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=ge("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=ge("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=ge("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=ge("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=ge("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=ge("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=ge("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=ge("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=ge("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uG=ge("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=ge("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=ge("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=ge("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dG=ge("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=ge("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=ge("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=ge("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=ge("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=ge("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fG=ge("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hG=ge("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=ge("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=ge("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=ge("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=ge("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=ge("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),pk="-",mG=e=>{const t=gG(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(pk);return l[0]===""&&l.length!==1&&l.shift(),uF(l,t)||pG(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},uF=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?uF(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(pk);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},g2=/^\[(.+)\]$/,pG=e=>{if(g2.test(e)){const t=g2.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},gG=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return yG(Object.entries(e.classGroups),r).forEach(([i,o])=>{MN(o,n,i,t)}),n},MN=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:v2(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(vG(a)){MN(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{MN(o,v2(t,i),r,n)})})},v2=(e,t)=>{let r=e;return t.split(pk).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},vG=e=>e.isThemeGetter,yG=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,xG=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},dF="!",bG=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let v=0;v<l.length;v++){let b=l[v];if(u===0){if(b===a&&(n||l.slice(v,v+i)===t)){c.push(l.slice(d,v)),d=v+i;continue}if(b==="/"){f=v;continue}}b==="["?u++:b==="]"&&u--}const h=c.length===0?l:l.substring(d),m=h.startsWith(dF),g=m?h.substring(1):h,p=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:o}):o},wG=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},jG=e=>({cache:xG(e.cacheSize),parseClassName:bG(e),...mG(e)}),_G=/\s+/,NG=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(_G);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(u);let g=!!m,p=n(g?h.substring(0,m):h);if(!p){if(!g){l=u+(l.length>0?" "+l:l);continue}if(p=n(h),!p){l=u+(l.length>0?" "+l:l);continue}g=!1}const v=wG(d).join(":"),b=f?v+dF:v,y=b+p;if(i.includes(y))continue;i.push(y);const w=a(p,g);for(let _=0;_<w.length;++_){const j=w[_];i.push(b+j)}l=u+(l.length>0?" "+l:l)}return l};function SG(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=fF(t))&&(n&&(n+=" "),n+=r);return n}const fF=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=fF(e[n]))&&(r&&(r+=" "),r+=t);return r};function CG(e,...t){let r,n,a,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=jG(u),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=NG(c,r);return a(c,d),d}return function(){return i(SG.apply(null,arguments))}}const mr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},hF=/^\[(?:([a-z-]+):)?(.+)\]$/i,kG=/^\d+\/\d+$/,EG=new Set(["px","full","screen"]),PG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,OG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,TG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hi=e=>qd(e)||EG.has(e)||kG.test(e),Fo=e=>ph(e,"length",BG),qd=e=>!!e&&!Number.isNaN(Number(e)),Ej=e=>ph(e,"number",qd),em=e=>!!e&&Number.isInteger(Number(e)),RG=e=>e.endsWith("%")&&qd(e.slice(0,-1)),dt=e=>hF.test(e),Uo=e=>PG.test(e),MG=new Set(["length","size","percentage"]),$G=e=>ph(e,MG,mF),IG=e=>ph(e,"position",mF),LG=new Set(["image","url"]),FG=e=>ph(e,LG,VG),UG=e=>ph(e,"",zG),tm=()=>!0,ph=(e,t,r)=>{const n=hF.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},BG=e=>AG.test(e)&&!OG.test(e),mF=()=>!1,zG=e=>TG.test(e),VG=e=>DG.test(e),qG=()=>{const e=mr("colors"),t=mr("spacing"),r=mr("blur"),n=mr("brightness"),a=mr("borderColor"),i=mr("borderRadius"),o=mr("borderSpacing"),l=mr("borderWidth"),c=mr("contrast"),u=mr("grayscale"),d=mr("hueRotate"),f=mr("invert"),h=mr("gap"),m=mr("gradientColorStops"),g=mr("gradientColorStopPositions"),p=mr("inset"),v=mr("margin"),b=mr("opacity"),y=mr("padding"),w=mr("saturate"),_=mr("scale"),j=mr("sepia"),N=mr("skew"),S=mr("space"),k=mr("translate"),C=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",dt,t],E=()=>[dt,t],R=()=>["",Hi,Fo],$=()=>["auto",qd,dt],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],T=()=>["","0",dt],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[qd,dt];return{cacheSize:500,separator:":",theme:{colors:[tm],spacing:[Hi,Fo],blur:["none","",Uo,dt],brightness:X(),borderColor:[e],borderRadius:["none","","full",Uo,dt],borderSpacing:E(),borderWidth:R(),contrast:X(),grayscale:T(),hueRotate:X(),invert:T(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[RG,Fo],inset:A(),margin:A(),opacity:X(),padding:E(),saturate:X(),scale:X(),sepia:T(),skew:X(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",dt]}],container:["container"],columns:[{columns:[Uo]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),dt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",em,dt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",dt]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",em,dt]}],"grid-cols":[{"grid-cols":[tm]}],"col-start-end":[{col:["auto",{span:["full",em,dt]},dt]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[tm]}],"row-start-end":[{row:["auto",{span:[em,dt]},dt]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",dt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",dt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",dt,t]}],"min-w":[{"min-w":[dt,t,"min","max","fit"]}],"max-w":[{"max-w":[dt,t,"none","full","min","max","fit","prose",{screen:[Uo]},Uo]}],h:[{h:[dt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[dt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[dt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[dt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Uo,Fo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ej]}],"font-family":[{font:[tm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",dt]}],"line-clamp":[{"line-clamp":["none",qd,Ej]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hi,dt]}],"list-image":[{"list-image":["none",dt]}],"list-style-type":[{list:["none","disc","decimal",dt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hi,Fo]}],"underline-offset":[{"underline-offset":["auto",Hi,dt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",dt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",dt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),IG]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$G]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},FG]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:F()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[Hi,dt]}],"outline-w":[{outline:[Hi,Fo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Hi,Fo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Uo,UG]}],"shadow-color":[{shadow:[tm]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Uo,dt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",dt]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",dt]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",dt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[em,dt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",dt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",dt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",dt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Hi,Fo,Ej]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},WG=CG(qG);function Q(...e){return WG(at(e))}const HG=GK,pF=x.forwardRef(({className:e,...t},r)=>s.jsx(BL,{ref:r,className:Q("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));pF.displayName=BL.displayName;const KG=dh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),gF=x.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(zL,{ref:n,className:Q(KG({variant:t}),e),...r}));gF.displayName=zL.displayName;const GG=x.forwardRef(({className:e,...t},r)=>s.jsx(WL,{ref:r,className:Q("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));GG.displayName=WL.displayName;const vF=x.forwardRef(({className:e,...t},r)=>s.jsx(HL,{ref:r,className:Q("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Bn,{className:"h-4 w-4"})}));vF.displayName=HL.displayName;const yF=x.forwardRef(({className:e,...t},r)=>s.jsx(VL,{ref:r,className:Q("text-sm font-semibold",e),...t}));yF.displayName=VL.displayName;const xF=x.forwardRef(({className:e,...t},r)=>s.jsx(qL,{ref:r,className:Q("text-sm opacity-90",e),...t}));xF.displayName=qL.displayName;function YG(){const{toasts:e}=or();return s.jsxs(HG,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(gF,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(yF,{children:r}),n&&s.jsx(xF,{children:n})]}),a,s.jsx(vF,{})]},t)}),s.jsx(pF,{})]})}var y2=["light","dark"],XG="(prefers-color-scheme: dark)",QG=x.createContext(void 0),ZG={setTheme:e=>{},themes:[]},JG=()=>{var e;return(e=x.useContext(QG))!=null?e:ZG};x.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=a?y2.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,p=!1,v=!0)=>{let b=o?o[g]:g,y=p?g+"|| ''":`'${b}'`,w="";return a&&v&&!p&&y2.includes(g)&&(w+=`d.style.colorScheme = '${g}';`),r==="class"?p||b?w+=`c.add(${y})`:w+="null":b&&(w+=`d[s](n,${y})`),w},m=e?`!function(){${d}${h(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${XG}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(i,!1,!1)};}${f}}catch(t){}}();`;return x.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var eY=e=>{switch(e){case"success":return nY;case"info":return aY;case"warning":return sY;case"error":return iY;default:return null}},tY=Array(12).fill(0),rY=({visible:e,className:t})=>O.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},O.createElement("div",{className:"sonner-spinner"},tY.map((r,n)=>O.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),nY=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),sY=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),aY=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),iY=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),oY=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},O.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),O.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),lY=()=>{let[e,t]=O.useState(document.hidden);return O.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},$N=1,cY=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:$N++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],O.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(dY(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||$N++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},gs=new cY,uY=(e,t)=>{let r=(t==null?void 0:t.id)||$N++;return gs.addToast({title:e,...t,id:r}),r},dY=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",fY=uY,hY=()=>gs.toasts,mY=()=>gs.getActiveToasts();Object.assign(fY,{success:gs.success,info:gs.info,warning:gs.warning,error:gs.error,custom:gs.custom,message:gs.message,promise:gs.promise,dismiss:gs.dismiss,loading:gs.loading},{getHistory:hY,getToasts:mY});function pY(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}pY(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Iv(e){return e.label!==void 0}var gY=3,vY="32px",yY="16px",x2=4e3,xY=356,bY=14,wY=20,jY=200;function Aa(...e){return e.filter(Boolean).join(" ")}function _Y(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var NY=e=>{var t,r,n,a,i,o,l,c,u,d,f;let{invert:h,toast:m,unstyled:g,interacting:p,setHeights:v,visibleToasts:b,heights:y,index:w,toasts:_,expanded:j,removeToast:N,defaultRichColors:S,closeButton:k,style:C,cancelButtonStyle:P,actionButtonStyle:A,className:E="",descriptionClassName:R="",duration:$,position:B,gap:F,loadingIcon:L,expandByDefault:D,classNames:T,icons:U,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:H}=e,[ae,he]=O.useState(null),[Pe,Ae]=O.useState(null),[ue,ze]=O.useState(!1),[ie,be]=O.useState(!1),[_e,ee]=O.useState(!1),[ot,Ge]=O.useState(!1),[Et,Ut]=O.useState(!1),[tr,_r]=O.useState(0),[gn,z]=O.useState(0),G=O.useRef(m.duration||$||x2),te=O.useRef(null),we=O.useRef(null),je=w===0,ve=w+1<=b,Ce=m.type,gt=m.dismissible!==!1,Gt=m.className||"",tn=m.descriptionClassName||"",Ca=O.useMemo(()=>y.findIndex(nt=>nt.toastId===m.id)||0,[y,m.id]),cs=O.useMemo(()=>{var nt;return(nt=m.closeButton)!=null?nt:k},[m.closeButton,k]),di=O.useMemo(()=>m.duration||$||x2,[m.duration,$]),fi=O.useRef(0),Rn=O.useRef(0),rc=O.useRef(0),us=O.useRef(null),[nc,sc]=B.split("-"),Ku=O.useMemo(()=>y.reduce((nt,qt,rr)=>rr>=Ca?nt:nt+qt.height,0),[y,Ca]),ac=lY(),qh=m.invert||h,Gu=Ce==="loading";Rn.current=O.useMemo(()=>Ca*F+Ku,[Ca,Ku]),O.useEffect(()=>{G.current=di},[di]),O.useEffect(()=>{ze(!0)},[]),O.useEffect(()=>{let nt=we.current;if(nt){let qt=nt.getBoundingClientRect().height;return z(qt),v(rr=>[{toastId:m.id,height:qt,position:m.position},...rr]),()=>v(rr=>rr.filter(ds=>ds.toastId!==m.id))}},[v,m.id]),O.useLayoutEffect(()=>{if(!ue)return;let nt=we.current,qt=nt.style.height;nt.style.height="auto";let rr=nt.getBoundingClientRect().height;nt.style.height=qt,z(rr),v(ds=>ds.find(Wn=>Wn.toastId===m.id)?ds.map(Wn=>Wn.toastId===m.id?{...Wn,height:rr}:Wn):[{toastId:m.id,height:rr,position:m.position},...ds])},[ue,m.title,m.description,v,m.id]);let ra=O.useCallback(()=>{be(!0),_r(Rn.current),v(nt=>nt.filter(qt=>qt.toastId!==m.id)),setTimeout(()=>{N(m)},jY)},[m,N,v,Rn]);O.useEffect(()=>{if(m.promise&&Ce==="loading"||m.duration===1/0||m.type==="loading")return;let nt;return j||p||H&&ac?(()=>{if(rc.current<fi.current){let qt=new Date().getTime()-fi.current;G.current=G.current-qt}rc.current=new Date().getTime()})():G.current!==1/0&&(fi.current=new Date().getTime(),nt=setTimeout(()=>{var qt;(qt=m.onAutoClose)==null||qt.call(m,m),ra()},G.current)),()=>clearTimeout(nt)},[j,p,m,Ce,H,ac,ra]),O.useEffect(()=>{m.delete&&ra()},[ra,m.delete]);function pv(){var nt,qt,rr;return U!=null&&U.loading?O.createElement("div",{className:Aa(T==null?void 0:T.loader,(nt=m==null?void 0:m.classNames)==null?void 0:nt.loader,"sonner-loader"),"data-visible":Ce==="loading"},U.loading):L?O.createElement("div",{className:Aa(T==null?void 0:T.loader,(qt=m==null?void 0:m.classNames)==null?void 0:qt.loader,"sonner-loader"),"data-visible":Ce==="loading"},L):O.createElement(rY,{className:Aa(T==null?void 0:T.loader,(rr=m==null?void 0:m.classNames)==null?void 0:rr.loader),visible:Ce==="loading"})}return O.createElement("li",{tabIndex:0,ref:we,className:Aa(E,Gt,T==null?void 0:T.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,T==null?void 0:T.default,T==null?void 0:T[Ce],(r=m==null?void 0:m.classNames)==null?void 0:r[Ce]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:S,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":ue,"data-promise":!!m.promise,"data-swiped":Et,"data-removed":ie,"data-visible":ve,"data-y-position":nc,"data-x-position":sc,"data-index":w,"data-front":je,"data-swiping":_e,"data-dismissible":gt,"data-type":Ce,"data-invert":qh,"data-swipe-out":ot,"data-swipe-direction":Pe,"data-expanded":!!(j||D&&ue),style:{"--index":w,"--toasts-before":w,"--z-index":_.length-w,"--offset":`${ie?tr:Rn.current}px`,"--initial-height":D?"auto":`${gn}px`,...C,...m.style},onDragEnd:()=>{ee(!1),he(null),us.current=null},onPointerDown:nt=>{Gu||!gt||(te.current=new Date,_r(Rn.current),nt.target.setPointerCapture(nt.pointerId),nt.target.tagName!=="BUTTON"&&(ee(!0),us.current={x:nt.clientX,y:nt.clientY}))},onPointerUp:()=>{var nt,qt,rr,ds;if(ot||!gt)return;us.current=null;let Wn=Number(((nt=we.current)==null?void 0:nt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ka=Number(((qt=we.current)==null?void 0:qt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ea=new Date().getTime()-((rr=te.current)==null?void 0:rr.getTime()),fs=ae==="x"?Wn:ka,na=Math.abs(fs)/Ea;if(Math.abs(fs)>=wY||na>.11){_r(Rn.current),(ds=m.onDismiss)==null||ds.call(m,m),Ae(ae==="x"?Wn>0?"right":"left":ka>0?"down":"up"),ra(),Ge(!0),Ut(!1);return}ee(!1),he(null)},onPointerMove:nt=>{var qt,rr,ds,Wn;if(!us.current||!gt||((qt=window.getSelection())==null?void 0:qt.toString().length)>0)return;let ka=nt.clientY-us.current.y,Ea=nt.clientX-us.current.x,fs=(rr=e.swipeDirections)!=null?rr:_Y(B);!ae&&(Math.abs(Ea)>1||Math.abs(ka)>1)&&he(Math.abs(Ea)>Math.abs(ka)?"x":"y");let na={x:0,y:0};ae==="y"?(fs.includes("top")||fs.includes("bottom"))&&(fs.includes("top")&&ka<0||fs.includes("bottom")&&ka>0)&&(na.y=ka):ae==="x"&&(fs.includes("left")||fs.includes("right"))&&(fs.includes("left")&&Ea<0||fs.includes("right")&&Ea>0)&&(na.x=Ea),(Math.abs(na.x)>0||Math.abs(na.y)>0)&&Ut(!0),(ds=we.current)==null||ds.style.setProperty("--swipe-amount-x",`${na.x}px`),(Wn=we.current)==null||Wn.style.setProperty("--swipe-amount-y",`${na.y}px`)}},cs&&!m.jsx?O.createElement("button",{"aria-label":X,"data-disabled":Gu,"data-close-button":!0,onClick:Gu||!gt?()=>{}:()=>{var nt;ra(),(nt=m.onDismiss)==null||nt.call(m,m)},className:Aa(T==null?void 0:T.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(i=U==null?void 0:U.close)!=null?i:oY):null,m.jsx||x.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:O.createElement(O.Fragment,null,Ce||m.icon||m.promise?O.createElement("div",{"data-icon":"",className:Aa(T==null?void 0:T.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||pv():null,m.type!=="loading"?m.icon||(U==null?void 0:U[Ce])||eY(Ce):null):null,O.createElement("div",{"data-content":"",className:Aa(T==null?void 0:T.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},O.createElement("div",{"data-title":"",className:Aa(T==null?void 0:T.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?O.createElement("div",{"data-description":"",className:Aa(R,tn,T==null?void 0:T.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),x.isValidElement(m.cancel)?m.cancel:m.cancel&&Iv(m.cancel)?O.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:nt=>{var qt,rr;Iv(m.cancel)&&gt&&((rr=(qt=m.cancel).onClick)==null||rr.call(qt,nt),ra())},className:Aa(T==null?void 0:T.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,x.isValidElement(m.action)?m.action:m.action&&Iv(m.action)?O.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||A,onClick:nt=>{var qt,rr;Iv(m.action)&&((rr=(qt=m.action).onClick)==null||rr.call(qt,nt),!nt.defaultPrevented&&ra())},className:Aa(T==null?void 0:T.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function b2(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function SY(e,t){let r={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?yY:vY;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var CY=x.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:h,style:m,visibleToasts:g=gY,toastOptions:p,dir:v=b2(),gap:b=bY,loadingIcon:y,icons:w,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:j}=e,[N,S]=O.useState([]),k=O.useMemo(()=>Array.from(new Set([n].concat(N.filter(H=>H.position).map(H=>H.position)))),[N,n]),[C,P]=O.useState([]),[A,E]=O.useState(!1),[R,$]=O.useState(!1),[B,F]=O.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=O.useRef(null),D=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=O.useRef(null),U=O.useRef(!1),X=O.useCallback(H=>{S(ae=>{var he;return(he=ae.find(Pe=>Pe.id===H.id))!=null&&he.delete||gs.dismiss(H.id),ae.filter(({id:Pe})=>Pe!==H.id)})},[]);return O.useEffect(()=>gs.subscribe(H=>{if(H.dismiss){S(ae=>ae.map(he=>he.id===H.id?{...he,delete:!0}:he));return}setTimeout(()=>{xL.flushSync(()=>{S(ae=>{let he=ae.findIndex(Pe=>Pe.id===H.id);return he!==-1?[...ae.slice(0,he),{...ae[he],...H},...ae.slice(he+1)]:[H,...ae]})})})}),[]),O.useEffect(()=>{if(d!=="system"){F(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:ae})=>{F(ae?"dark":"light")})}catch{H.addListener(({matches:he})=>{try{F(he?"dark":"light")}catch(Pe){console.error(Pe)}})}},[d]),O.useEffect(()=>{N.length<=1&&E(!1)},[N]),O.useEffect(()=>{let H=ae=>{var he,Pe;a.every(Ae=>ae[Ae]||ae.code===Ae)&&(E(!0),(he=L.current)==null||he.focus()),ae.code==="Escape"&&(document.activeElement===L.current||(Pe=L.current)!=null&&Pe.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[a]),O.useEffect(()=>{if(L.current)return()=>{T.current&&(T.current.focus({preventScroll:!0}),T.current=null,U.current=!1)}},[L.current]),O.createElement("section",{ref:t,"aria-label":`${_} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((H,ae)=>{var he;let[Pe,Ae]=H.split("-");return N.length?O.createElement("ol",{key:H,dir:v==="auto"?b2():v,tabIndex:-1,ref:L,className:l,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":Pe,"data-lifted":A&&N.length>1&&!i,"data-x-position":Ae,style:{"--front-toast-height":`${((he=C[0])==null?void 0:he.height)||0}px`,"--width":`${xY}px`,"--gap":`${b}px`,...m,...SY(c,u)},onBlur:ue=>{U.current&&!ue.currentTarget.contains(ue.relatedTarget)&&(U.current=!1,T.current&&(T.current.focus({preventScroll:!0}),T.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||U.current||(U.current=!0,T.current=ue.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{R||E(!1)},onDragEnd:()=>E(!1),onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},N.filter(ue=>!ue.position&&ae===0||ue.position===H).map((ue,ze)=>{var ie,be;return O.createElement(NY,{key:ue.id,icons:w,index:ze,toast:ue,defaultRichColors:f,duration:(ie=p==null?void 0:p.duration)!=null?ie:h,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:r,visibleToasts:g,closeButton:(be=p==null?void 0:p.closeButton)!=null?be:o,interacting:R,position:H,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:X,toasts:N.filter(_e=>_e.position==ue.position),heights:C.filter(_e=>_e.position==ue.position),setHeights:P,expandByDefault:i,gap:b,loadingIcon:y,expanded:A,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const kY=({...e})=>{const{theme:t="system"}=JG();return s.jsx(CY,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var EY=gC[" useId ".trim().toString()]||(()=>{}),PY=0;function Ss(e){const[t,r]=x.useState(EY());return Br(()=>{r(n=>n??String(PY++))},[e]),t?`radix-${t}`:""}const AY=["top","right","bottom","left"],$l=Math.min,Bs=Math.max,mx=Math.round,Lv=Math.floor,Si=e=>({x:e,y:e}),OY={left:"right",right:"left",bottom:"top",top:"bottom"},TY={start:"end",end:"start"};function IN(e,t,r){return Bs(e,$l(t,r))}function wo(e,t){return typeof e=="function"?e(t):e}function jo(e){return e.split("-")[0]}function gh(e){return e.split("-")[1]}function gk(e){return e==="x"?"y":"x"}function vk(e){return e==="y"?"height":"width"}const DY=new Set(["top","bottom"]);function bi(e){return DY.has(jo(e))?"y":"x"}function yk(e){return gk(bi(e))}function RY(e,t,r){r===void 0&&(r=!1);const n=gh(e),a=yk(e),i=vk(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=px(o)),[o,px(o)]}function MY(e){const t=px(e);return[LN(e),t,LN(t)]}function LN(e){return e.replace(/start|end/g,t=>TY[t])}const w2=["left","right"],j2=["right","left"],$Y=["top","bottom"],IY=["bottom","top"];function LY(e,t,r){switch(e){case"top":case"bottom":return r?t?j2:w2:t?w2:j2;case"left":case"right":return t?$Y:IY;default:return[]}}function FY(e,t,r,n){const a=gh(e);let i=LY(jo(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(LN)))),i}function px(e){return e.replace(/left|right|bottom|top/g,t=>OY[t])}function UY(e){return{top:0,right:0,bottom:0,left:0,...e}}function bF(e){return typeof e!="number"?UY(e):{top:e,right:e,bottom:e,left:e}}function gx(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function _2(e,t,r){let{reference:n,floating:a}=e;const i=bi(t),o=yk(t),l=vk(o),c=jo(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-a.width,y:f};break;default:m={x:n.x,y:n.y}}switch(gh(t)){case"start":m[o]-=h*(r&&u?-1:1);break;case"end":m[o]+=h*(r&&u?-1:1);break}return m}const BY=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=_2(u,n,c),h=n,m={},g=0;for(let p=0;p<l.length;p++){const{name:v,fn:b}=l[p],{x:y,y:w,data:_,reset:j}=await b({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=y??d,f=w??f,m={...m,[v]:{...m[v],..._}},j&&g<=50&&(g++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:d,y:f}=_2(u,h,c)),p=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function Sp(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=wo(t,e),g=bF(m),v=l[h?f==="floating"?"reference":"floating":f],b=gx(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=gx(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(b.top-j.top+g.top)/_.y,bottom:(j.bottom-b.bottom+g.bottom)/_.y,left:(b.left-j.left+g.left)/_.x,right:(j.right-b.right+g.right)/_.x}}const zY=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=wo(e,t)||{};if(u==null)return{};const f=bF(d),h={x:r,y:n},m=yk(a),g=vk(m),p=await o.getDimensions(u),v=m==="y",b=v?"top":"left",y=v?"bottom":"right",w=v?"clientHeight":"clientWidth",_=i.reference[g]+i.reference[m]-h[m]-i.floating[g],j=h[m]-i.reference[m],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=N?N[w]:0;(!S||!await(o.isElement==null?void 0:o.isElement(N)))&&(S=l.floating[w]||i.floating[g]);const k=_/2-j/2,C=S/2-p[g]/2-1,P=$l(f[b],C),A=$l(f[y],C),E=P,R=S-p[g]-A,$=S/2-p[g]/2+k,B=IN(E,$,R),F=!c.arrow&&gh(a)!=null&&$!==B&&i.reference[g]/2-($<E?P:A)-p[g]/2<0,L=F?$<E?$-E:$-R:0;return{[m]:h[m]+L,data:{[m]:B,centerOffset:$-B-L,...F&&{alignmentOffset:L}},reset:F}}}),VY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...v}=wo(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const b=jo(a),y=bi(l),w=jo(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=h||(w||!p?[px(l)]:MY(l)),N=g!=="none";!h&&N&&j.push(...FY(l,p,g,_));const S=[l,...j],k=await Sp(t,v),C=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&C.push(k[b]),f){const $=RY(a,o,_);C.push(k[$[0]],k[$[1]])}if(P=[...P,{placement:a,overflows:C}],!C.every($=>$<=0)){var A,E;const $=(((A=i.flip)==null?void 0:A.index)||0)+1,B=S[$];if(B&&(!(f==="alignment"?y!==bi(B):!1)||P.every(D=>D.overflows[0]>0&&bi(D.placement)===y)))return{data:{index:$,overflows:P},reset:{placement:B}};let F=(E=P.filter(L=>L.overflows[0]<=0).sort((L,D)=>L.overflows[1]-D.overflows[1])[0])==null?void 0:E.placement;if(!F)switch(m){case"bestFit":{var R;const L=(R=P.filter(D=>{if(N){const T=bi(D.placement);return T===y||T==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(T=>T>0).reduce((T,U)=>T+U,0)]).sort((D,T)=>D[1]-T[1])[0])==null?void 0:R[0];L&&(F=L);break}case"initialPlacement":F=l;break}if(a!==F)return{reset:{placement:F}}}return{}}}};function N2(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function S2(e){return AY.some(t=>e[t]>=0)}const qY=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=wo(e,t);switch(n){case"referenceHidden":{const i=await Sp(t,{...a,elementContext:"reference"}),o=N2(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:S2(o)}}}case"escaped":{const i=await Sp(t,{...a,altBoundary:!0}),o=N2(i,r.floating);return{data:{escapedOffsets:o,escaped:S2(o)}}}default:return{}}}}},wF=new Set(["left","top"]);async function WY(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=jo(r),l=gh(r),c=bi(r)==="y",u=wF.has(o)?-1:1,d=i&&c?-1:1,f=wo(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const HY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await WY(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},KY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:b,y}=v;return{x:b,y}}},...c}=wo(e,t),u={x:r,y:n},d=await Sp(t,c),f=bi(jo(a)),h=gk(f);let m=u[h],g=u[f];if(i){const v=h==="y"?"top":"left",b=h==="y"?"bottom":"right",y=m+d[v],w=m-d[b];m=IN(y,m,w)}if(o){const v=f==="y"?"top":"left",b=f==="y"?"bottom":"right",y=g+d[v],w=g-d[b];g=IN(y,g,w)}const p=l.fn({...t,[h]:m,[f]:g});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[h]:i,[f]:o}}}}}},GY=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=wo(e,t),d={x:r,y:n},f=bi(a),h=gk(f);let m=d[h],g=d[f];const p=wo(l,t),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const w=h==="y"?"height":"width",_=i.reference[h]-i.floating[w]+v.mainAxis,j=i.reference[h]+i.reference[w]-v.mainAxis;m<_?m=_:m>j&&(m=j)}if(u){var b,y;const w=h==="y"?"width":"height",_=wF.has(jo(a)),j=i.reference[f]-i.floating[w]+(_&&((b=o.offset)==null?void 0:b[f])||0)+(_?0:v.crossAxis),N=i.reference[f]+i.reference[w]+(_?0:((y=o.offset)==null?void 0:y[f])||0)-(_?v.crossAxis:0);g<j?g=j:g>N&&(g=N)}return{[h]:m,[f]:g}}}},YY=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=wo(e,t),d=await Sp(t,u),f=jo(a),h=gh(a),m=bi(a)==="y",{width:g,height:p}=i.floating;let v,b;f==="top"||f==="bottom"?(v=f,b=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,v=h==="end"?"top":"bottom");const y=p-d.top-d.bottom,w=g-d.left-d.right,_=$l(p-d[v],y),j=$l(g-d[b],w),N=!t.middlewareData.shift;let S=_,k=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(S=y),N&&!h){const P=Bs(d.left,0),A=Bs(d.right,0),E=Bs(d.top,0),R=Bs(d.bottom,0);m?k=g-2*(P!==0||A!==0?P+A:Bs(d.left,d.right)):S=p-2*(E!==0||R!==0?E+R:Bs(d.top,d.bottom))}await c({...t,availableWidth:k,availableHeight:S});const C=await o.getDimensions(l.floating);return g!==C.width||p!==C.height?{reset:{rects:!0}}:{}}}};function g0(){return typeof window<"u"}function vh(e){return jF(e)?(e.nodeName||"").toLowerCase():"#document"}function Hs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Fi(e){var t;return(t=(jF(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function jF(e){return g0()?e instanceof Node||e instanceof Hs(e).Node:!1}function Qa(e){return g0()?e instanceof Element||e instanceof Hs(e).Element:!1}function Oi(e){return g0()?e instanceof HTMLElement||e instanceof Hs(e).HTMLElement:!1}function C2(e){return!g0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Hs(e).ShadowRoot}const XY=new Set(["inline","contents"]);function $g(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Za(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!XY.has(a)}const QY=new Set(["table","td","th"]);function ZY(e){return QY.has(vh(e))}const JY=[":popover-open",":modal"];function v0(e){return JY.some(t=>{try{return e.matches(t)}catch{return!1}})}const eX=["transform","translate","scale","rotate","perspective"],tX=["transform","translate","scale","rotate","perspective","filter"],rX=["paint","layout","strict","content"];function xk(e){const t=bk(),r=Qa(e)?Za(e):e;return eX.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||tX.some(n=>(r.willChange||"").includes(n))||rX.some(n=>(r.contain||"").includes(n))}function nX(e){let t=Il(e);for(;Oi(t)&&!wf(t);){if(xk(t))return t;if(v0(t))return null;t=Il(t)}return null}function bk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const sX=new Set(["html","body","#document"]);function wf(e){return sX.has(vh(e))}function Za(e){return Hs(e).getComputedStyle(e)}function y0(e){return Qa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Il(e){if(vh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||C2(e)&&e.host||Fi(e);return C2(t)?t.host:t}function _F(e){const t=Il(e);return wf(t)?e.ownerDocument?e.ownerDocument.body:e.body:Oi(t)&&$g(t)?t:_F(t)}function Cp(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=_F(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=Hs(a);if(i){const l=FN(o);return t.concat(o,o.visualViewport||[],$g(a)?a:[],l&&r?Cp(l):[])}return t.concat(a,Cp(a,[],r))}function FN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function NF(e){const t=Za(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Oi(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=mx(r)!==i||mx(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function wk(e){return Qa(e)?e:e.contextElement}function Wd(e){const t=wk(e);if(!Oi(t))return Si(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=NF(t);let o=(i?mx(r.width):r.width)/n,l=(i?mx(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const aX=Si(0);function SF(e){const t=Hs(e);return!bk()||!t.visualViewport?aX:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function iX(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Hs(e)?!1:t}function pu(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=wk(e);let o=Si(1);t&&(n?Qa(n)&&(o=Wd(n)):o=Wd(e));const l=iX(i,r,n)?SF(i):Si(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const h=Hs(i),m=n&&Qa(n)?Hs(n):n;let g=h,p=FN(g);for(;p&&n&&m!==g;){const v=Wd(p),b=p.getBoundingClientRect(),y=Za(p),w=b.left+(p.clientLeft+parseFloat(y.paddingLeft))*v.x,_=b.top+(p.clientTop+parseFloat(y.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,f*=v.y,c+=w,u+=_,g=Hs(p),p=FN(g)}}return gx({width:d,height:f,x:c,y:u})}function jk(e,t){const r=y0(e).scrollLeft;return t?t.left+r:pu(Fi(e)).left+r}function CF(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:jk(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function oX(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Fi(n),l=t?v0(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Si(1);const d=Si(0),f=Oi(n);if((f||!f&&!i)&&((vh(n)!=="body"||$g(o))&&(c=y0(n)),Oi(n))){const m=pu(n);u=Wd(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=o&&!f&&!i?CF(o,c,!0):Si(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function lX(e){return Array.from(e.getClientRects())}function cX(e){const t=Fi(e),r=y0(e),n=e.ownerDocument.body,a=Bs(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Bs(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+jk(e);const l=-r.scrollTop;return Za(n).direction==="rtl"&&(o+=Bs(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function uX(e,t){const r=Hs(e),n=Fi(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=bk();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const dX=new Set(["absolute","fixed"]);function fX(e,t){const r=pu(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=Oi(e)?Wd(e):Si(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function k2(e,t,r){let n;if(t==="viewport")n=uX(e,r);else if(t==="document")n=cX(Fi(e));else if(Qa(t))n=fX(t,r);else{const a=SF(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return gx(n)}function kF(e,t){const r=Il(e);return r===t||!Qa(r)||wf(r)?!1:Za(r).position==="fixed"||kF(r,t)}function hX(e,t){const r=t.get(e);if(r)return r;let n=Cp(e,[],!1).filter(l=>Qa(l)&&vh(l)!=="body"),a=null;const i=Za(e).position==="fixed";let o=i?Il(e):e;for(;Qa(o)&&!wf(o);){const l=Za(o),c=xk(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&dX.has(a.position)||$g(o)&&!c&&kF(e,o))?n=n.filter(d=>d!==o):a=l,o=Il(o)}return t.set(e,n),n}function mX(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?v0(t)?[]:hX(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=k2(t,d,a);return u.top=Bs(f.top,u.top),u.right=$l(f.right,u.right),u.bottom=$l(f.bottom,u.bottom),u.left=Bs(f.left,u.left),u},k2(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function pX(e){const{width:t,height:r}=NF(e);return{width:t,height:r}}function gX(e,t,r){const n=Oi(t),a=Fi(t),i=r==="fixed",o=pu(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Si(0);function u(){c.x=jk(a)}if(n||!n&&!i)if((vh(t)!=="body"||$g(a))&&(l=y0(t)),n){const m=pu(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?CF(a,l):Si(0),f=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function Pj(e){return Za(e).position==="static"}function E2(e,t){if(!Oi(e)||Za(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Fi(e)===r&&(r=r.ownerDocument.body),r}function EF(e,t){const r=Hs(e);if(v0(e))return r;if(!Oi(e)){let a=Il(e);for(;a&&!wf(a);){if(Qa(a)&&!Pj(a))return a;a=Il(a)}return r}let n=E2(e,t);for(;n&&ZY(n)&&Pj(n);)n=E2(n,t);return n&&wf(n)&&Pj(n)&&!xk(n)?r:n||nX(e)||r}const vX=async function(e){const t=this.getOffsetParent||EF,r=this.getDimensions,n=await r(e.floating);return{reference:gX(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function yX(e){return Za(e).direction==="rtl"}const xX={convertOffsetParentRelativeRectToViewportRelativeRect:oX,getDocumentElement:Fi,getClippingRect:mX,getOffsetParent:EF,getElementRects:vX,getClientRects:lX,getDimensions:pX,getScale:Wd,isElement:Qa,isRTL:yX};function PF(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function bX(e,t){let r=null,n;const a=Fi(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=Lv(f),p=Lv(a.clientWidth-(d+h)),v=Lv(a.clientHeight-(f+m)),b=Lv(d),w={rootMargin:-g+"px "+-p+"px "+-v+"px "+-b+"px",threshold:Bs(0,$l(1,c))||1};let _=!0;function j(N){const S=N[0].intersectionRatio;if(S!==c){if(!_)return o();S?o(!1,S):n=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!PF(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function wX(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=wk(e),d=a||i?[...u?Cp(u):[],...Cp(t)]:[];d.forEach(b=>{a&&b.addEventListener("scroll",r,{passive:!0}),i&&b.addEventListener("resize",r)});const f=u&&l?bX(u,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(b=>{let[y]=b;y&&y.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let g,p=c?pu(e):null;c&&v();function v(){const b=pu(e);p&&!PF(p,b)&&r(),p=b,g=requestAnimationFrame(v)}return r(),()=>{var b;d.forEach(y=>{a&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),f==null||f(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const jX=HY,_X=KY,NX=VY,SX=YY,CX=qY,P2=zY,kX=GY,EX=(e,t,r)=>{const n=new Map,a={platform:xX,...r},i={...a.platform,_c:n};return BY(e,t,{...a,platform:i})};var PX=typeof document<"u",AX=function(){},Ey=PX?x.useLayoutEffect:AX;function vx(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!vx(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!vx(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function AF(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function A2(e,t){const r=AF(e);return Math.round(t*r)/r}function Aj(e){const t=x.useRef(e);return Ey(()=>{t.current=e}),t}function OX(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=x.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=x.useState(n);vx(h,n)||m(n);const[g,p]=x.useState(null),[v,b]=x.useState(null),y=x.useCallback(D=>{D!==N.current&&(N.current=D,p(D))},[]),w=x.useCallback(D=>{D!==S.current&&(S.current=D,b(D))},[]),_=i||g,j=o||v,N=x.useRef(null),S=x.useRef(null),k=x.useRef(d),C=c!=null,P=Aj(c),A=Aj(a),E=Aj(u),R=x.useCallback(()=>{if(!N.current||!S.current)return;const D={placement:t,strategy:r,middleware:h};A.current&&(D.platform=A.current),EX(N.current,S.current,D).then(T=>{const U={...T,isPositioned:E.current!==!1};$.current&&!vx(k.current,U)&&(k.current=U,Ru.flushSync(()=>{f(U)}))})},[h,t,r,A,E]);Ey(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[u]);const $=x.useRef(!1);Ey(()=>($.current=!0,()=>{$.current=!1}),[]),Ey(()=>{if(_&&(N.current=_),j&&(S.current=j),_&&j){if(P.current)return P.current(_,j,R);R()}},[_,j,R,P,C]);const B=x.useMemo(()=>({reference:N,floating:S,setReference:y,setFloating:w}),[y,w]),F=x.useMemo(()=>({reference:_,floating:j}),[_,j]),L=x.useMemo(()=>{const D={position:r,left:0,top:0};if(!F.floating)return D;const T=A2(F.floating,d.x),U=A2(F.floating,d.y);return l?{...D,transform:"translate("+T+"px, "+U+"px)",...AF(F.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:T,top:U}},[r,l,F.floating,d.x,d.y]);return x.useMemo(()=>({...d,update:R,refs:B,elements:F,floatingStyles:L}),[d,R,B,F,L])}const TX=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?P2({element:n.current,padding:a}).fn(r):{}:n?P2({element:n,padding:a}).fn(r):{}}}},DX=(e,t)=>({...jX(e),options:[e,t]}),RX=(e,t)=>({..._X(e),options:[e,t]}),MX=(e,t)=>({...kX(e),options:[e,t]}),$X=(e,t)=>({...NX(e),options:[e,t]}),IX=(e,t)=>({...SX(e),options:[e,t]}),LX=(e,t)=>({...CX(e),options:[e,t]}),FX=(e,t)=>({...TX(e),options:[e,t]});var UX="Arrow",OF=x.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Ne.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});OF.displayName=UX;var BX=OF;function Ig(e){const[t,r]=x.useState(void 0);return Br(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var _k="Popper",[TF,ql]=zr(_k),[zX,DF]=TF(_k),RF=e=>{const{__scopePopper:t,children:r}=e,[n,a]=x.useState(null);return s.jsx(zX,{scope:t,anchor:n,onAnchorChange:a,children:r})};RF.displayName=_k;var MF="PopperAnchor",$F=x.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=DF(MF,r),o=x.useRef(null),l=We(t,o);return x.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(Ne.div,{...a,ref:l})});$F.displayName=MF;var Nk="PopperContent",[VX,qX]=TF(Nk),IF=x.forwardRef((e,t)=>{var ue,ze,ie,be,_e,ee;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...p}=e,v=DF(Nk,r),[b,y]=x.useState(null),w=We(t,ot=>y(ot)),[_,j]=x.useState(null),N=Ig(_),S=(N==null?void 0:N.width)??0,k=(N==null?void 0:N.height)??0,C=n+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},A=Array.isArray(u)?u:[u],E=A.length>0,R={padding:P,boundary:A.filter(HX),altBoundary:E},{refs:$,floatingStyles:B,placement:F,isPositioned:L,middlewareData:D}=OX({strategy:"fixed",placement:C,whileElementsMounted:(...ot)=>wX(...ot,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[DX({mainAxis:a+k,alignmentAxis:o}),c&&RX({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?MX():void 0,...R}),c&&$X({...R}),IX({...R,apply:({elements:ot,rects:Ge,availableWidth:Et,availableHeight:Ut})=>{const{width:tr,height:_r}=Ge.reference,gn=ot.floating.style;gn.setProperty("--radix-popper-available-width",`${Et}px`),gn.setProperty("--radix-popper-available-height",`${Ut}px`),gn.setProperty("--radix-popper-anchor-width",`${tr}px`),gn.setProperty("--radix-popper-anchor-height",`${_r}px`)}}),_&&FX({element:_,padding:l}),KX({arrowWidth:S,arrowHeight:k}),h&&LX({strategy:"referenceHidden",...R})]}),[T,U]=UF(F),X=Ur(g);Br(()=>{L&&(X==null||X())},[L,X]);const H=(ue=D.arrow)==null?void 0:ue.x,ae=(ze=D.arrow)==null?void 0:ze.y,he=((ie=D.arrow)==null?void 0:ie.centerOffset)!==0,[Pe,Ae]=x.useState();return Br(()=>{b&&Ae(window.getComputedStyle(b).zIndex)},[b]),s.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:L?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[(be=D.transformOrigin)==null?void 0:be.x,(_e=D.transformOrigin)==null?void 0:_e.y].join(" "),...((ee=D.hide)==null?void 0:ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(VX,{scope:r,placedSide:T,onArrowChange:j,arrowX:H,arrowY:ae,shouldHideArrow:he,children:s.jsx(Ne.div,{"data-side":T,"data-align":U,...p,ref:w,style:{...p.style,animation:L?void 0:"none"}})})})});IF.displayName=Nk;var LF="PopperArrow",WX={top:"bottom",right:"left",bottom:"top",left:"right"},FF=x.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=qX(LF,n),o=WX[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(BX,{...a,ref:r,style:{...a.style,display:"block"}})})});FF.displayName=LF;function HX(e){return e!==null}var KX=e=>({name:"transformOrigin",options:e,fn(t){var v,b,y;const{placement:r,rects:n,middlewareData:a}=t,o=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=UF(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((b=a.arrow)==null?void 0:b.x)??0)+l/2,m=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let g="",p="";return u==="bottom"?(g=o?f:`${h}px`,p=`${-c}px`):u==="top"?(g=o?f:`${h}px`,p=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,p=o?f:`${m}px`):u==="left"&&(g=`${n.floating.width+c}px`,p=o?f:`${m}px`),{data:{x:g,y:p}}}});function UF(e){const[t,r="center"]=e.split("-");return[t,r]}var x0=RF,Lg=$F,b0=IF,w0=FF,[j0,r3e]=zr("Tooltip",[ql]),_0=ql(),BF="TooltipProvider",GX=700,UN="tooltip.open",[YX,Sk]=j0(BF),zF=e=>{const{__scopeTooltip:t,delayDuration:r=GX,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=x.useRef(!0),l=x.useRef(!1),c=x.useRef(0);return x.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(YX,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:x.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:x.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};zF.displayName=BF;var kp="Tooltip",[XX,N0]=j0(kp),VF=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=Sk(kp,e.__scopeTooltip),u=_0(t),[d,f]=x.useState(null),h=Ss(),m=x.useRef(0),g=o??c.disableHoverableContent,p=l??c.delayDuration,v=x.useRef(!1),[b,y]=qn({prop:n,defaultProp:a??!1,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(UN))):c.onClose(),i==null||i(S)},caller:kp}),w=x.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),_=x.useCallback(()=>{window.clearTimeout(m.current),m.current=0,v.current=!1,y(!0)},[y]),j=x.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y(!1)},[y]),N=x.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{v.current=!0,y(!0),m.current=0},p)},[p,y]);return x.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),s.jsx(x0,{...u,children:s.jsx(XX,{scope:t,contentId:h,open:b,stateAttribute:w,trigger:d,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{c.isOpenDelayedRef.current?N():_()},[c.isOpenDelayedRef,N,_]),onTriggerLeave:x.useCallback(()=>{g?j():(window.clearTimeout(m.current),m.current=0)},[j,g]),onOpen:_,onClose:j,disableHoverableContent:g,children:r})})};VF.displayName=kp;var BN="TooltipTrigger",qF=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=N0(BN,r),i=Sk(BN,r),o=_0(r),l=x.useRef(null),c=We(t,l,a.onTriggerChange),u=x.useRef(!1),d=x.useRef(!1),f=x.useCallback(()=>u.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(Lg,{asChild:!0,...o,children:s.jsx(Ne.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:fe(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:fe(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:fe(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:fe(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:fe(e.onBlur,a.onClose),onClick:fe(e.onClick,a.onClose)})})});qF.displayName=BN;var QX="TooltipPortal",[n3e,ZX]=j0(QX,{forceMount:void 0}),jf="TooltipContent",WF=x.forwardRef((e,t)=>{const r=ZX(jf,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=N0(jf,e.__scopeTooltip);return s.jsx(en,{present:n||o.open,children:o.disableHoverableContent?s.jsx(HF,{side:a,...i,ref:t}):s.jsx(JX,{side:a,...i,ref:t})})}),JX=x.forwardRef((e,t)=>{const r=N0(jf,e.__scopeTooltip),n=Sk(jf,e.__scopeTooltip),a=x.useRef(null),i=We(t,a),[o,l]=x.useState(null),{trigger:c,onClose:u}=r,d=a.current,{onPointerInTransitChange:f}=n,h=x.useCallback(()=>{l(null),f(!1)},[f]),m=x.useCallback((g,p)=>{const v=g.currentTarget,b={x:g.clientX,y:g.clientY},y=sQ(b,v.getBoundingClientRect()),w=aQ(b,y),_=iQ(p.getBoundingClientRect()),j=lQ([...w,..._]);l(j),f(!0)},[f]);return x.useEffect(()=>()=>h(),[h]),x.useEffect(()=>{if(c&&d){const g=v=>m(v,d),p=v=>m(v,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",p)}}},[c,d,m,h]),x.useEffect(()=>{if(o){const g=p=>{const v=p.target,b={x:p.clientX,y:p.clientY},y=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),w=!oQ(b,o);y?h():w&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,o,u,h]),s.jsx(HF,{...e,ref:i})}),[eQ,tQ]=j0(kp,{isInside:!1}),rQ=_L("TooltipContent"),HF=x.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=N0(jf,r),u=_0(r),{onClose:d}=c;return x.useEffect(()=>(document.addEventListener(UN,d),()=>document.removeEventListener(UN,d)),[d]),x.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),s.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:s.jsxs(b0,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(rQ,{children:n}),s.jsx(eQ,{scope:r,isInside:!0,children:s.jsx(AK,{id:c.contentId,role:"tooltip",children:a||n})})]})})});WF.displayName=jf;var KF="TooltipArrow",nQ=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=_0(r);return tQ(KF,r).isInside?null:s.jsx(w0,{...a,...n,ref:t})});nQ.displayName=KF;function sQ(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function aQ(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function iQ(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function oQ(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function lQ(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),cQ(t)}function cQ(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var uQ=zF,dQ=VF,fQ=qF,GF=WF;const hQ=uQ,YF=dQ,XF=fQ,Ck=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(GF,{ref:n,sideOffset:t,className:Q("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Ck.displayName=GF.displayName;var yh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gu=typeof window>"u"||"Deno"in globalThis;function Xn(){}function mQ(e,t){return typeof e=="function"?e(t):e}function zN(e){return typeof e=="number"&&e>=0&&e!==1/0}function QF(e,t){return Math.max(e+(t||0)-Date.now(),0)}function jl(e,t){return typeof e=="function"?e(t):e}function ca(e,t){return typeof e=="function"?e(t):e}function O2(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==kk(o,t.options))return!1}else if(!Ep(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function T2(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(vu(t.options.mutationKey)!==vu(i))return!1}else if(!Ep(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function kk(e,t){return((t==null?void 0:t.queryKeyHashFn)||vu)(e)}function vu(e){return JSON.stringify(e,(t,r)=>VN(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Ep(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Ep(e[r],t[r])):!1}function ZF(e,t){if(e===t)return e;const r=D2(e)&&D2(t);if(r||VN(e)&&VN(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const f=r?d:i[d];(!r&&c.has(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,u++):(l[f]=ZF(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function yx(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function D2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function VN(e){if(!R2(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!R2(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function R2(e){return Object.prototype.toString.call(e)==="[object Object]"}function pQ(e){return new Promise(t=>{setTimeout(t,e)})}function qN(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?ZF(e,t):t}function gQ(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function vQ(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Ek=Symbol();function JF(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ek?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function e3(e,t){return typeof e=="function"?e(...t):!!e}var Uc,el,Jd,Q4,yQ=(Q4=class extends yh{constructor(){super();He(this,Uc);He(this,el);He(this,Jd);ke(this,Jd,t=>{if(!gu&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){V(this,el)||this.setEventListener(V(this,Jd))}onUnsubscribe(){var t;this.hasListeners()||((t=V(this,el))==null||t.call(this),ke(this,el,void 0))}setEventListener(t){var r;ke(this,Jd,t),(r=V(this,el))==null||r.call(this),ke(this,el,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){V(this,Uc)!==t&&(ke(this,Uc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof V(this,Uc)=="boolean"?V(this,Uc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Uc=new WeakMap,el=new WeakMap,Jd=new WeakMap,Q4),Pk=new yQ,ef,tl,tf,Z4,xQ=(Z4=class extends yh{constructor(){super();He(this,ef,!0);He(this,tl);He(this,tf);ke(this,tf,t=>{if(!gu&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){V(this,tl)||this.setEventListener(V(this,tf))}onUnsubscribe(){var t;this.hasListeners()||((t=V(this,tl))==null||t.call(this),ke(this,tl,void 0))}setEventListener(t){var r;ke(this,tf,t),(r=V(this,tl))==null||r.call(this),ke(this,tl,t(this.setOnline.bind(this)))}setOnline(t){V(this,ef)!==t&&(ke(this,ef,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return V(this,ef)}},ef=new WeakMap,tl=new WeakMap,tf=new WeakMap,Z4),xx=new xQ;function WN(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function bQ(e){return Math.min(1e3*2**e,3e4)}function t3(e){return(e??"online")==="online"?xx.isOnline():!0}var r3=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Oj(e){return e instanceof r3}function n3(e){let t=!1,r=0,n=!1,a;const i=WN(),o=p=>{var v;n||(h(new r3(p)),(v=e.abort)==null||v.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>Pk.isFocused()&&(e.networkMode==="always"||xx.isOnline())&&e.canRun(),d=()=>t3(e.networkMode)&&e.canRun(),f=p=>{var v;n||(n=!0,(v=e.onSuccess)==null||v.call(e,p),a==null||a(),i.resolve(p))},h=p=>{var v;n||(n=!0,(v=e.onError)==null||v.call(e,p),a==null||a(),i.reject(p))},m=()=>new Promise(p=>{var v;a=b=>{(n||u())&&p(b)},(v=e.onPause)==null||v.call(e)}).then(()=>{var p;a=void 0,n||(p=e.onContinue)==null||p.call(e)}),g=()=>{if(n)return;let p;const v=r===0?e.initialPromise:void 0;try{p=v??e.fn()}catch(b){p=Promise.reject(b)}Promise.resolve(p).then(f).catch(b=>{var N;if(n)return;const y=e.retry??(gu?0:3),w=e.retryDelay??bQ,_=typeof w=="function"?w(r,b):w,j=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,b);if(t||!j){h(b);return}r++,(N=e.onFail)==null||N.call(e,r,b),pQ(_).then(()=>u()?void 0:m()).then(()=>{t?h(b):g()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():m().then(g),i)}}var wQ=e=>setTimeout(e,0);function jQ(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=wQ;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var cn=jQ(),Bc,J4,s3=(J4=class{constructor(){He(this,Bc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zN(this.gcTime)&&ke(this,Bc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(gu?1/0:5*60*1e3))}clearGcTimeout(){V(this,Bc)&&(clearTimeout(V(this,Bc)),ke(this,Bc,void 0))}},Bc=new WeakMap,J4),rf,zc,la,Vc,In,Sg,qc,Ma,Xi,e$,_Q=(e$=class extends s3{constructor(t){super();He(this,Ma);He(this,rf);He(this,zc);He(this,la);He(this,Vc);He(this,In);He(this,Sg);He(this,qc);ke(this,qc,!1),ke(this,Sg,t.defaultOptions),this.setOptions(t.options),this.observers=[],ke(this,Vc,t.client),ke(this,la,V(this,Vc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ke(this,rf,NQ(this.options)),this.state=t.state??V(this,rf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=V(this,In))==null?void 0:t.promise}setOptions(t){this.options={...V(this,Sg),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&V(this,la).remove(this)}setData(t,r){const n=qN(this.state.data,t,this.options);return mt(this,Ma,Xi).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){mt(this,Ma,Xi).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=V(this,In))==null?void 0:n.promise;return(a=V(this,In))==null||a.cancel(t),r?r.then(Xn).catch(Xn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,rf))}isActive(){return this.observers.some(t=>ca(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ek||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>jl(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!QF(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=V(this,In))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=V(this,In))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),V(this,la).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(V(this,In)&&(V(this,qc)?V(this,In).cancel({revert:!0}):V(this,In).cancelRetry()),this.scheduleGc()),V(this,la).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||mt(this,Ma,Xi).call(this,{type:"invalidate"})}fetch(t,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(V(this,In))return V(this,In).continueRetry(),V(this,In).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(ke(this,qc,!0),n.signal)})},i=()=>{const h=JF(this.options,r),g=(()=>{const p={client:V(this,Vc),queryKey:this.queryKey,meta:this.meta};return a(p),p})();return ke(this,qc,!1),this.options.persister?this.options.persister(h,g,this):h(g)},l=(()=>{const h={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:V(this,Vc),state:this.state,fetchFn:i};return a(h),h})();(u=this.options.behavior)==null||u.onFetch(l,this),ke(this,zc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&mt(this,Ma,Xi).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=h=>{var m,g,p,v;Oj(h)&&h.silent||mt(this,Ma,Xi).call(this,{type:"error",error:h}),Oj(h)||((g=(m=V(this,la).config).onError)==null||g.call(m,h,this),(v=(p=V(this,la).config).onSettled)==null||v.call(p,this.state.data,h,this)),this.scheduleGc()};return ke(this,In,n3({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var m,g,p,v;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(b){c(b);return}(g=(m=V(this,la).config).onSuccess)==null||g.call(m,h,this),(v=(p=V(this,la).config).onSettled)==null||v.call(p,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,m)=>{mt(this,Ma,Xi).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{mt(this,Ma,Xi).call(this,{type:"pause"})},onContinue:()=>{mt(this,Ma,Xi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),V(this,In).start()}},rf=new WeakMap,zc=new WeakMap,la=new WeakMap,Vc=new WeakMap,In=new WeakMap,Sg=new WeakMap,qc=new WeakMap,Ma=new WeakSet,Xi=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...a3(n.data,this.options),fetchMeta:t.meta??null};case"success":return ke(this,zc,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Oj(a)&&a.revert&&V(this,zc)?{...V(this,zc),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),cn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),V(this,la).notify({query:this,type:"updated",action:t})})},e$);function a3(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:t3(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function NQ(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var pi,t$,SQ=(t$=class extends yh{constructor(t={}){super();He(this,pi);this.config=t,ke(this,pi,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??kk(a,r);let o=this.get(i);return o||(o=new _Q({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){V(this,pi).has(t.queryHash)||(V(this,pi).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=V(this,pi).get(t.queryHash);r&&(t.destroy(),r===t&&V(this,pi).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){cn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return V(this,pi).get(t)}getAll(){return[...V(this,pi).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>O2(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>O2(t,n)):r}notify(t){cn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){cn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){cn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},pi=new WeakMap,t$),gi,Hn,Wc,vi,Vo,r$,CQ=(r$=class extends s3{constructor(t){super();He(this,vi);He(this,gi);He(this,Hn);He(this,Wc);this.mutationId=t.mutationId,ke(this,Hn,t.mutationCache),ke(this,gi,[]),this.state=t.state||i3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){V(this,gi).includes(t)||(V(this,gi).push(t),this.clearGcTimeout(),V(this,Hn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ke(this,gi,V(this,gi).filter(r=>r!==t)),this.scheduleGc(),V(this,Hn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){V(this,gi).length||(this.state.status==="pending"?this.scheduleGc():V(this,Hn).remove(this))}continue(){var t;return((t=V(this,Wc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,u,d,f,h,m,g,p,v,b,y,w,_,j,N,S,k;const r=()=>{mt(this,vi,Vo).call(this,{type:"continue"})};ke(this,Wc,n3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,P)=>{mt(this,vi,Vo).call(this,{type:"failed",failureCount:C,error:P})},onPause:()=>{mt(this,vi,Vo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,Hn).canRun(this)}));const n=this.state.status==="pending",a=!V(this,Wc).canStart();try{if(n)r();else{mt(this,vi,Vo).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=V(this,Hn).config).onMutate)==null?void 0:o.call(i,t,this));const P=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));P!==this.state.context&&mt(this,vi,Vo).call(this,{type:"pending",context:P,variables:t,isPaused:a})}const C=await V(this,Wc).start();return await((d=(u=V(this,Hn).config).onSuccess)==null?void 0:d.call(u,C,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,C,t,this.state.context)),await((g=(m=V(this,Hn).config).onSettled)==null?void 0:g.call(m,C,null,this.state.variables,this.state.context,this)),await((v=(p=this.options).onSettled)==null?void 0:v.call(p,C,null,t,this.state.context)),mt(this,vi,Vo).call(this,{type:"success",data:C}),C}catch(C){try{throw await((y=(b=V(this,Hn).config).onError)==null?void 0:y.call(b,C,t,this.state.context,this)),await((_=(w=this.options).onError)==null?void 0:_.call(w,C,t,this.state.context)),await((N=(j=V(this,Hn).config).onSettled)==null?void 0:N.call(j,void 0,C,this.state.variables,this.state.context,this)),await((k=(S=this.options).onSettled)==null?void 0:k.call(S,void 0,C,t,this.state.context)),C}finally{mt(this,vi,Vo).call(this,{type:"error",error:C})}}finally{V(this,Hn).runNext(this)}}},gi=new WeakMap,Hn=new WeakMap,Wc=new WeakMap,vi=new WeakSet,Vo=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),cn.batch(()=>{V(this,gi).forEach(n=>{n.onMutationUpdate(t)}),V(this,Hn).notify({mutation:this,type:"updated",action:t})})},r$);function i3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var to,$a,Cg,n$,kQ=(n$=class extends yh{constructor(t={}){super();He(this,to);He(this,$a);He(this,Cg);this.config=t,ke(this,to,new Set),ke(this,$a,new Map),ke(this,Cg,0)}build(t,r,n){const a=new CQ({mutationCache:this,mutationId:++gv(this,Cg)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){V(this,to).add(t);const r=Fv(t);if(typeof r=="string"){const n=V(this,$a).get(r);n?n.push(t):V(this,$a).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(V(this,to).delete(t)){const r=Fv(t);if(typeof r=="string"){const n=V(this,$a).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&V(this,$a).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Fv(t);if(typeof r=="string"){const n=V(this,$a).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Fv(t);if(typeof r=="string"){const a=(n=V(this,$a).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){cn.batch(()=>{V(this,to).forEach(t=>{this.notify({type:"removed",mutation:t})}),V(this,to).clear(),V(this,$a).clear()})}getAll(){return Array.from(V(this,to))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>T2(r,n))}findAll(t={}){return this.getAll().filter(r=>T2(t,r))}notify(t){cn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return cn.batch(()=>Promise.all(t.map(r=>r.continue().catch(Xn))))}},to=new WeakMap,$a=new WeakMap,Cg=new WeakMap,n$);function Fv(e){var t;return(t=e.options.scope)==null?void 0:t.id}function M2(e){return{onFetch:(t,r)=>{var d,f,h,m,g;const n=t.options,a=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},b=JF(t.options,t.fetchOptions),y=async(w,_,j)=>{if(p)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const S=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:_,direction:j?"backward":"forward",meta:t.options.meta};return v(A),A})(),k=await b(S),{maxPages:C}=t.options,P=j?vQ:gQ;return{pages:P(w.pages,k,C),pageParams:P(w.pageParams,_,C)}};if(a&&i.length){const w=a==="backward",_=w?EQ:$2,j={pages:i,pageParams:o},N=_(n,j);l=await y(j,N,w)}else{const w=e??i.length;do{const _=c===0?o[0]??n.initialPageParam:$2(n,l);if(c>0&&_==null)break;l=await y(l,_),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var p,v;return(v=(p=t.options).persister)==null?void 0:v.call(p,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function $2(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function EQ(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Rr,rl,nl,nf,sf,sl,af,of,s$,PQ=(s$=class{constructor(e={}){He(this,Rr);He(this,rl);He(this,nl);He(this,nf);He(this,sf);He(this,sl);He(this,af);He(this,of);ke(this,Rr,e.queryCache||new SQ),ke(this,rl,e.mutationCache||new kQ),ke(this,nl,e.defaultOptions||{}),ke(this,nf,new Map),ke(this,sf,new Map),ke(this,sl,0)}mount(){gv(this,sl)._++,V(this,sl)===1&&(ke(this,af,Pk.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,Rr).onFocus())})),ke(this,of,xx.subscribe(async e=>{e&&(await this.resumePausedMutations(),V(this,Rr).onOnline())})))}unmount(){var e,t;gv(this,sl)._--,V(this,sl)===0&&((e=V(this,af))==null||e.call(this),ke(this,af,void 0),(t=V(this,of))==null||t.call(this),ke(this,of,void 0))}isFetching(e){return V(this,Rr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return V(this,rl).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=V(this,Rr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=V(this,Rr).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(jl(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return V(this,Rr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=V(this,Rr).get(n.queryHash),i=a==null?void 0:a.state.data,o=mQ(t,i);if(o!==void 0)return V(this,Rr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return cn.batch(()=>V(this,Rr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=V(this,Rr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=V(this,Rr);cn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=V(this,Rr);return cn.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=cn.batch(()=>V(this,Rr).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Xn).catch(Xn)}invalidateQueries(e,t={}){return cn.batch(()=>(V(this,Rr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=cn.batch(()=>V(this,Rr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Xn)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Xn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=V(this,Rr).build(this,t);return r.isStaleByTime(jl(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Xn).catch(Xn)}fetchInfiniteQuery(e){return e.behavior=M2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Xn).catch(Xn)}ensureInfiniteQueryData(e){return e.behavior=M2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xx.isOnline()?V(this,rl).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,Rr)}getMutationCache(){return V(this,rl)}getDefaultOptions(){return V(this,nl)}setDefaultOptions(e){ke(this,nl,e)}setQueryDefaults(e,t){V(this,nf).set(vu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...V(this,nf).values()],r={};return t.forEach(n=>{Ep(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){V(this,sf).set(vu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...V(this,sf).values()],r={};return t.forEach(n=>{Ep(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...V(this,nl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=kk(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ek&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...V(this,nl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){V(this,Rr).clear(),V(this,rl).clear()}},Rr=new WeakMap,rl=new WeakMap,nl=new WeakMap,nf=new WeakMap,sf=new WeakMap,sl=new WeakMap,af=new WeakMap,of=new WeakMap,s$),hs,Pt,kg,Kn,Hc,lf,al,il,Eg,cf,uf,Kc,Gc,ol,df,Xt,km,HN,KN,GN,YN,XN,QN,ZN,o3,a$,AQ=(a$=class extends yh{constructor(t,r){super();He(this,Xt);He(this,hs);He(this,Pt);He(this,kg);He(this,Kn);He(this,Hc);He(this,lf);He(this,al);He(this,il);He(this,Eg);He(this,cf);He(this,uf);He(this,Kc);He(this,Gc);He(this,ol);He(this,df,new Set);this.options=r,ke(this,hs,t),ke(this,il,null),ke(this,al,WN()),this.options.experimental_prefetchInRender||V(this,al).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(V(this,Pt).addObserver(this),I2(V(this,Pt),this.options)?mt(this,Xt,km).call(this):this.updateResult(),mt(this,Xt,YN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return JN(V(this,Pt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return JN(V(this,Pt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,mt(this,Xt,XN).call(this),mt(this,Xt,QN).call(this),V(this,Pt).removeObserver(this)}setOptions(t){const r=this.options,n=V(this,Pt);if(this.options=V(this,hs).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ca(this.options.enabled,V(this,Pt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");mt(this,Xt,ZN).call(this),V(this,Pt).setOptions(this.options),r._defaulted&&!yx(this.options,r)&&V(this,hs).getQueryCache().notify({type:"observerOptionsUpdated",query:V(this,Pt),observer:this});const a=this.hasListeners();a&&L2(V(this,Pt),n,this.options,r)&&mt(this,Xt,km).call(this),this.updateResult(),a&&(V(this,Pt)!==n||ca(this.options.enabled,V(this,Pt))!==ca(r.enabled,V(this,Pt))||jl(this.options.staleTime,V(this,Pt))!==jl(r.staleTime,V(this,Pt)))&&mt(this,Xt,HN).call(this);const i=mt(this,Xt,KN).call(this);a&&(V(this,Pt)!==n||ca(this.options.enabled,V(this,Pt))!==ca(r.enabled,V(this,Pt))||i!==V(this,ol))&&mt(this,Xt,GN).call(this,i)}getOptimisticResult(t){const r=V(this,hs).getQueryCache().build(V(this,hs),t),n=this.createResult(r,t);return TQ(this,n)&&(ke(this,Kn,n),ke(this,lf,this.options),ke(this,Hc,V(this,Pt).state)),n}getCurrentResult(){return V(this,Kn)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),Reflect.get(n,a))})}trackProp(t){V(this,df).add(t)}getCurrentQuery(){return V(this,Pt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=V(this,hs).defaultQueryOptions(t),n=V(this,hs).getQueryCache().build(V(this,hs),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return mt(this,Xt,km).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),V(this,Kn)))}createResult(t,r){var C;const n=V(this,Pt),a=this.options,i=V(this,Kn),o=V(this,Hc),l=V(this,lf),u=t!==n?t.state:V(this,kg),{state:d}=t;let f={...d},h=!1,m;if(r._optimisticResults){const P=this.hasListeners(),A=!P&&I2(t,r),E=P&&L2(t,n,r,a);(A||E)&&(f={...f,...a3(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:p,status:v}=f;m=f.data;let b=!1;if(r.placeholderData!==void 0&&m===void 0&&v==="pending"){let P;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(P=i.data,b=!0):P=typeof r.placeholderData=="function"?r.placeholderData((C=V(this,uf))==null?void 0:C.state.data,V(this,uf)):r.placeholderData,P!==void 0&&(v="success",m=qN(i==null?void 0:i.data,P,r),h=!0)}if(r.select&&m!==void 0&&!b)if(i&&m===(o==null?void 0:o.data)&&r.select===V(this,Eg))m=V(this,cf);else try{ke(this,Eg,r.select),m=r.select(m),m=qN(i==null?void 0:i.data,m,r),ke(this,cf,m),ke(this,il,null)}catch(P){ke(this,il,P)}V(this,il)&&(g=V(this,il),m=V(this,cf),p=Date.now(),v="error");const y=f.fetchStatus==="fetching",w=v==="pending",_=v==="error",j=w&&y,N=m!==void 0,k={status:v,fetchStatus:f.fetchStatus,isPending:w,isSuccess:v==="success",isError:_,isInitialLoading:j,isLoading:j,data:m,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:p,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:_&&!N,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&N,isStale:Ak(t,r),refetch:this.refetch,promise:V(this,al),isEnabled:ca(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=R=>{k.status==="error"?R.reject(k.error):k.data!==void 0&&R.resolve(k.data)},A=()=>{const R=ke(this,al,k.promise=WN());P(R)},E=V(this,al);switch(E.status){case"pending":t.queryHash===n.queryHash&&P(E);break;case"fulfilled":(k.status==="error"||k.data!==E.value)&&A();break;case"rejected":(k.status!=="error"||k.error!==E.reason)&&A();break}}return k}updateResult(){const t=V(this,Kn),r=this.createResult(V(this,Pt),this.options);if(ke(this,Hc,V(this,Pt).state),ke(this,lf,this.options),V(this,Hc).data!==void 0&&ke(this,uf,V(this,Pt)),yx(r,t))return;ke(this,Kn,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!V(this,df).size)return!0;const o=new Set(i??V(this,df));return this.options.throwOnError&&o.add("error"),Object.keys(V(this,Kn)).some(l=>{const c=l;return V(this,Kn)[c]!==t[c]&&o.has(c)})};mt(this,Xt,o3).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&mt(this,Xt,YN).call(this)}},hs=new WeakMap,Pt=new WeakMap,kg=new WeakMap,Kn=new WeakMap,Hc=new WeakMap,lf=new WeakMap,al=new WeakMap,il=new WeakMap,Eg=new WeakMap,cf=new WeakMap,uf=new WeakMap,Kc=new WeakMap,Gc=new WeakMap,ol=new WeakMap,df=new WeakMap,Xt=new WeakSet,km=function(t){mt(this,Xt,ZN).call(this);let r=V(this,Pt).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Xn)),r},HN=function(){mt(this,Xt,XN).call(this);const t=jl(this.options.staleTime,V(this,Pt));if(gu||V(this,Kn).isStale||!zN(t))return;const n=QF(V(this,Kn).dataUpdatedAt,t)+1;ke(this,Kc,setTimeout(()=>{V(this,Kn).isStale||this.updateResult()},n))},KN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(V(this,Pt)):this.options.refetchInterval)??!1},GN=function(t){mt(this,Xt,QN).call(this),ke(this,ol,t),!(gu||ca(this.options.enabled,V(this,Pt))===!1||!zN(V(this,ol))||V(this,ol)===0)&&ke(this,Gc,setInterval(()=>{(this.options.refetchIntervalInBackground||Pk.isFocused())&&mt(this,Xt,km).call(this)},V(this,ol)))},YN=function(){mt(this,Xt,HN).call(this),mt(this,Xt,GN).call(this,mt(this,Xt,KN).call(this))},XN=function(){V(this,Kc)&&(clearTimeout(V(this,Kc)),ke(this,Kc,void 0))},QN=function(){V(this,Gc)&&(clearInterval(V(this,Gc)),ke(this,Gc,void 0))},ZN=function(){const t=V(this,hs).getQueryCache().build(V(this,hs),this.options);if(t===V(this,Pt))return;const r=V(this,Pt);ke(this,Pt,t),ke(this,kg,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},o3=function(t){cn.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(V(this,Kn))}),V(this,hs).getQueryCache().notify({query:V(this,Pt),type:"observerResultsUpdated"})})},a$);function OQ(e,t){return ca(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function I2(e,t){return OQ(e,t)||e.state.data!==void 0&&JN(e,t,t.refetchOnMount)}function JN(e,t,r){if(ca(t.enabled,e)!==!1&&jl(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Ak(e,t)}return!1}function L2(e,t,r,n){return(e!==t||ca(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Ak(e,r)}function Ak(e,t){return ca(t.enabled,e)!==!1&&e.isStaleByTime(jl(t.staleTime,e))}function TQ(e,t){return!yx(e.getCurrentResult(),t)}var ll,cl,ms,ro,po,Py,e1,i$,DQ=(i$=class extends yh{constructor(r,n){super();He(this,po);He(this,ll);He(this,cl);He(this,ms);He(this,ro);ke(this,ll,r),this.setOptions(n),this.bindMethods(),mt(this,po,Py).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=V(this,ll).defaultMutationOptions(r),yx(this.options,n)||V(this,ll).getMutationCache().notify({type:"observerOptionsUpdated",mutation:V(this,ms),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&vu(n.mutationKey)!==vu(this.options.mutationKey)?this.reset():((a=V(this,ms))==null?void 0:a.state.status)==="pending"&&V(this,ms).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=V(this,ms))==null||r.removeObserver(this)}onMutationUpdate(r){mt(this,po,Py).call(this),mt(this,po,e1).call(this,r)}getCurrentResult(){return V(this,cl)}reset(){var r;(r=V(this,ms))==null||r.removeObserver(this),ke(this,ms,void 0),mt(this,po,Py).call(this),mt(this,po,e1).call(this)}mutate(r,n){var a;return ke(this,ro,n),(a=V(this,ms))==null||a.removeObserver(this),ke(this,ms,V(this,ll).getMutationCache().build(V(this,ll),this.options)),V(this,ms).addObserver(this),V(this,ms).execute(r)}},ll=new WeakMap,cl=new WeakMap,ms=new WeakMap,ro=new WeakMap,po=new WeakSet,Py=function(){var n;const r=((n=V(this,ms))==null?void 0:n.state)??i3();ke(this,cl,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},e1=function(r){cn.batch(()=>{var n,a,i,o,l,c,u,d;if(V(this,ro)&&this.hasListeners()){const f=V(this,cl).variables,h=V(this,cl).context;(r==null?void 0:r.type)==="success"?((a=(n=V(this,ro)).onSuccess)==null||a.call(n,r.data,f,h),(o=(i=V(this,ro)).onSettled)==null||o.call(i,r.data,null,f,h)):(r==null?void 0:r.type)==="error"&&((c=(l=V(this,ro)).onError)==null||c.call(l,r.error,f,h),(d=(u=V(this,ro)).onSettled)==null||d.call(u,void 0,r.error,f,h))}this.listeners.forEach(f=>{f(V(this,cl))})})},i$),l3=x.createContext(void 0),ii=e=>{const t=x.useContext(l3);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},RQ=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(l3.Provider,{value:e,children:t})),c3=x.createContext(!1),MQ=()=>x.useContext(c3);c3.Provider;function $Q(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var IQ=x.createContext($Q()),LQ=()=>x.useContext(IQ),FQ=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},UQ=e=>{x.useEffect(()=>{e.clearReset()},[e])},BQ=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||e3(r,[e.error,n])),zQ=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},VQ=(e,t)=>e.isLoading&&e.isFetching&&!t,qQ=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,F2=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function WQ(e,t,r){var f,h,m,g,p;const n=MQ(),a=LQ(),i=ii(),o=i.defaultQueryOptions(e);(h=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,o),o._optimisticResults=n?"isRestoring":"optimistic",zQ(o),FQ(o,a),UQ(a);const l=!i.getQueryCache().get(o.queryHash),[c]=x.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),d=!n&&e.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(v=>{const b=d?c.subscribe(cn.batchCalls(v)):Xn;return c.updateResult(),b},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),x.useEffect(()=>{c.setOptions(o)},[o,c]),qQ(o,u))throw F2(o,c,a);if(BQ({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,u),o.experimental_prefetchInRender&&!gu&&VQ(u,n)){const v=l?F2(o,c,a):(p=i.getQueryCache().get(o.queryHash))==null?void 0:p.promise;v==null||v.catch(Xn).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function sr(e,t){return WQ(e,AQ)}function Wt(e,t){const r=ii(),[n]=x.useState(()=>new DQ(r,e));x.useEffect(()=>{n.setOptions(e)},[n,e]);const a=x.useSyncExternalStore(x.useCallback(o=>n.subscribe(cn.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=x.useCallback((o,l)=>{n.mutate(o,l).catch(Xn)},[n]);if(a.error&&e3(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pp(){return Pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pp.apply(this,arguments)}var fl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fl||(fl={}));const U2="popstate";function HQ(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return t1("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:bx(a)}return GQ(t,r,null,e)}function Zr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function u3(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function KQ(){return Math.random().toString(36).substr(2,8)}function B2(e,t){return{usr:e.state,key:e.key,idx:t}}function t1(e,t,r,n){return r===void 0&&(r=null),Pp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?xh(t):t,{state:r,key:t&&t.key||n||KQ()})}function bx(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function xh(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function GQ(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=fl.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Pp({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=fl.Pop;let v=d(),b=v==null?null:v-u;u=v,c&&c({action:l,location:p.location,delta:b})}function h(v,b){l=fl.Push;let y=t1(p.location,v,b);u=d()+1;let w=B2(y,u),_=p.createHref(y);try{o.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(_)}i&&c&&c({action:l,location:p.location,delta:1})}function m(v,b){l=fl.Replace;let y=t1(p.location,v,b);u=d();let w=B2(y,u),_=p.createHref(y);o.replaceState(w,"",_),i&&c&&c({action:l,location:p.location,delta:0})}function g(v){let b=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof v=="string"?v:bx(v);return y=y.replace(/ $/,"%20"),Zr(b,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,b)}let p={get action(){return l},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(U2,f),c=v,()=>{a.removeEventListener(U2,f),c=null}},createHref(v){return t(a,v)},createURL:g,encodeLocation(v){let b=g(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:m,go(v){return o.go(v)}};return p}var z2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(z2||(z2={}));function YQ(e,t,r){return r===void 0&&(r="/"),XQ(e,t,r,!1)}function XQ(e,t,r,n){let a=typeof t=="string"?xh(t):t,i=Ok(a.pathname||"/",r);if(i==null)return null;let o=d3(e);QQ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=lZ(i);l=iZ(o[c],u,n)}return l}function d3(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Zr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=_l([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Zr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),d3(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:sZ(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of f3(i.path))a(i,o,c)}),t}function f3(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=f3(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function QQ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:aZ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ZQ=/^:[\w-]+$/,JQ=3,eZ=2,tZ=1,rZ=10,nZ=-2,V2=e=>e==="*";function sZ(e,t){let r=e.split("/"),n=r.length;return r.some(V2)&&(n+=nZ),t&&(n+=eZ),r.filter(a=>!V2(a)).reduce((a,i)=>a+(ZQ.test(i)?JQ:i===""?tZ:rZ),n)}function aZ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function iZ(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=q2({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=q2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:_l([i,f.pathname]),pathnameBase:fZ(_l([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=_l([i,f.pathnameBase]))}return o}function q2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=oZ(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let p=l[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=l[f];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function oZ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),u3(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function lZ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return u3(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ok(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function cZ(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?xh(e):e;return{pathname:r?r.startsWith("/")?r:uZ(r,t):t,search:hZ(n),hash:mZ(a)}}function uZ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Tj(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dZ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function h3(e,t){let r=dZ(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function m3(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=xh(e):(a=Pp({},e),Zr(!a.pathname||!a.pathname.includes("?"),Tj("?","pathname","search",a)),Zr(!a.pathname||!a.pathname.includes("#"),Tj("#","pathname","hash",a)),Zr(!a.search||!a.search.includes("#"),Tj("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=cZ(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const _l=e=>e.join("/").replace(/\/\/+/g,"/"),fZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),hZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,mZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function pZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const p3=["post","put","patch","delete"];new Set(p3);const gZ=["get",...p3];new Set(gZ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ap.apply(this,arguments)}const Tk=x.createContext(null),vZ=x.createContext(null),$u=x.createContext(null),S0=x.createContext(null),Wl=x.createContext({outlet:null,matches:[],isDataRoute:!1}),g3=x.createContext(null);function yZ(e,t){let{relative:r}=t===void 0?{}:t;Fg()||Zr(!1);let{basename:n,navigator:a}=x.useContext($u),{hash:i,pathname:o,search:l}=x3(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:_l([n,o])),a.createHref({pathname:c,search:l,hash:i})}function Fg(){return x.useContext(S0)!=null}function Iu(){return Fg()||Zr(!1),x.useContext(S0).location}function v3(e){x.useContext($u).static||x.useLayoutEffect(e)}function oi(){let{isDataRoute:e}=x.useContext(Wl);return e?OZ():xZ()}function xZ(){Fg()||Zr(!1);let e=x.useContext(Tk),{basename:t,future:r,navigator:n}=x.useContext($u),{matches:a}=x.useContext(Wl),{pathname:i}=Iu(),o=JSON.stringify(h3(a,r.v7_relativeSplatPath)),l=x.useRef(!1);return v3(()=>{l.current=!0}),x.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=m3(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:_l([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function y3(){let{matches:e}=x.useContext(Wl),t=e[e.length-1];return t?t.params:{}}function x3(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=x.useContext($u),{matches:a}=x.useContext(Wl),{pathname:i}=Iu(),o=JSON.stringify(h3(a,n.v7_relativeSplatPath));return x.useMemo(()=>m3(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function bZ(e,t){return wZ(e,t)}function wZ(e,t,r,n){Fg()||Zr(!1);let{navigator:a}=x.useContext($u),{matches:i}=x.useContext(Wl),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Iu(),d;if(t){var f;let v=typeof t=="string"?xh(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||Zr(!1),d=v}else d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=YQ(e,{pathname:m}),p=CZ(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:_l([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:_l([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n);return t&&p?x.createElement(S0.Provider,{value:{location:Ap({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fl.Pop}},p):p}function jZ(){let e=AZ(),t=pZ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:a},r):null,null)}const _Z=x.createElement(jZ,null);class NZ extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?x.createElement(Wl.Provider,{value:this.props.routeContext},x.createElement(g3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SZ(e){let{routeContext:t,match:r,children:n}=e,a=x.useContext(Tk);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(Wl.Provider,{value:t},n)}function CZ(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Zr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,g=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,g=!1,p=null,v=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,p=f.route.errorElement||_Z,c&&(u<0&&h===0?(g=!0,v=null):u===h&&(g=!0,v=f.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,h+1)),y=()=>{let w;return m?w=p:g?w=v:f.route.Component?w=x.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,x.createElement(SZ,{match:f,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?x.createElement(NZ,{location:r.location,revalidation:r.revalidation,component:p,error:m,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}var b3=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(b3||{}),wx=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(wx||{});function kZ(e){let t=x.useContext(Tk);return t||Zr(!1),t}function EZ(e){let t=x.useContext(vZ);return t||Zr(!1),t}function PZ(e){let t=x.useContext(Wl);return t||Zr(!1),t}function w3(e){let t=PZ(),r=t.matches[t.matches.length-1];return r.route.id||Zr(!1),r.route.id}function AZ(){var e;let t=x.useContext(g3),r=EZ(wx.UseRouteError),n=w3(wx.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function OZ(){let{router:e}=kZ(b3.UseNavigateStable),t=w3(wx.UseNavigateStable),r=x.useRef(!1);return v3(()=>{r.current=!0}),x.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Ap({fromRouteId:t},i)))},[e,t])}function TZ(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ct(e){Zr(!1)}function DZ(e){let{basename:t="/",children:r=null,location:n,navigationType:a=fl.Pop,navigator:i,static:o=!1,future:l}=e;Fg()&&Zr(!1);let c=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:c,navigator:i,static:o,future:Ap({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=xh(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:g="default"}=n,p=x.useMemo(()=>{let v=Ok(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:m,key:g},navigationType:a}},[c,d,f,h,m,g,a]);return p==null?null:x.createElement($u.Provider,{value:u},x.createElement(S0.Provider,{children:r,value:p}))}function RZ(e){let{children:t,location:r}=e;return bZ(r1(t),r)}new Promise(()=>{});function r1(e,t){t===void 0&&(t=[]);let r=[];return x.Children.forEach(e,(n,a)=>{if(!x.isValidElement(n))return;let i=[...t,a];if(n.type===x.Fragment){r.push.apply(r,r1(n.props.children,i));return}n.type!==Ct&&Zr(!1),!n.props.index||!n.props.children||Zr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=r1(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n1.apply(this,arguments)}function MZ(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function $Z(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function IZ(e,t){return e.button===0&&(!t||t==="_self")&&!$Z(e)}const LZ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],FZ="6";try{window.__reactRouterVersion=FZ}catch{}const UZ="startTransition",W2=gC[UZ];function BZ(e){let{basename:t,children:r,future:n,window:a}=e,i=x.useRef();i.current==null&&(i.current=HQ({window:a,v5Compat:!0}));let o=i.current,[l,c]=x.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=x.useCallback(f=>{u&&W2?W2(()=>c(f)):c(f)},[c,u]);return x.useLayoutEffect(()=>o.listen(d),[o,d]),x.useEffect(()=>TZ(n),[n]),x.createElement(DZ,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const zZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,On=x.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=MZ(t,LZ),{basename:m}=x.useContext($u),g,p=!1;if(typeof u=="string"&&VZ.test(u)&&(g=u,zZ))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=Ok(_.pathname,m);_.origin===w.origin&&j!=null?u=j+_.search+_.hash:p=!0}catch{}let v=yZ(u,{relative:a}),b=qZ(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function y(w){n&&n(w),w.defaultPrevented||b(w)}return x.createElement("a",n1({},h,{href:g||v,onClick:p||i?n:y,ref:r,target:c}))});var H2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(H2||(H2={}));var K2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(K2||(K2={}));function qZ(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=oi(),u=Iu(),d=x3(e,{relative:o});return x.useCallback(f=>{if(IZ(f,r)){f.preventDefault();let h=n!==void 0?n:bx(u)===bx(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,a,r,e,i,o,l])}const Op=dh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),I=x.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?wL:"button";return s.jsx(o,{className:Q(Op({variant:t,size:r,className:e})),ref:i,...a})});I.displayName="Button";var WZ="Separator",G2="horizontal",HZ=["horizontal","vertical"],j3=x.forwardRef((e,t)=>{const{decorative:r,orientation:n=G2,...a}=e,i=KZ(n)?n:G2,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(Ne.div,{"data-orientation":i,...l,...a,ref:t})});j3.displayName=WZ;function KZ(e){return HZ.includes(e)}var _3=j3;const Nt=x.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(_3,{ref:a,decorative:r,orientation:t,className:Q("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Nt.displayName=_3.displayName;var xi=function(){return xi=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},xi.apply(this,arguments)};function bh(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function GZ(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function YZ(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}const XZ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Dk extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class QZ extends Dk{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Y2 extends Dk{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class X2 extends Dk{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var s1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(s1||(s1={}));class ZZ{constructor(t,{headers:r={},customFetch:n,region:a=s1.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=XZ(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return GZ(this,arguments,void 0,function*(r,n={}){var a;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=n;let h={},{region:m}=n;m||(m=this.region);const g=new URL(`${this.url}/${r}`);m&&m!=="any"&&(h["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let p;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",p=u):typeof u=="string"?(h["Content-Type"]="text/plain",p=u):typeof FormData<"u"&&u instanceof FormData?p=u:(h["Content-Type"]="application/json",p=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?p=JSON.stringify(u):p=u;let v=d;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),d?(v=o.signal,d.addEventListener("abort",()=>o.abort())):v=o.signal);const b=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:p,signal:v}).catch(j=>{throw new QZ(j)}),y=b.headers.get("x-relay-error");if(y&&y==="true")throw new Y2(b);if(!b.ok)throw new X2(b);let w=((a=b.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield b.json():w==="application/octet-stream"||w==="application/pdf"?_=yield b.blob():w==="text/event-stream"?_=b:w==="multipart/form-data"?_=yield b.formData():_=yield b.text(),{data:_,error:null,response:b}}catch(l){return{data:null,error:l,response:l instanceof X2||l instanceof Y2?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var JZ=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},eJ=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var f,h;if(r.method!=="HEAD"){var m;const b=await i.text();b===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=b:l=JSON.parse(b))}const p=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),v=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");p&&v&&v.length>1&&(c=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var g;const p=await i.text();try{o=JSON.parse(p),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,d="OK")}catch{i.status===404&&p===""?(u=204,d="No Content"):o={message:p}}if(o&&r.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new JZ(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,d,f,h;const g=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",p=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"Error"}: ${g}`,p&&(l+=` (${p})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var m;l=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},tJ=class extends eJ{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Q2=new RegExp("[,()]");var fd=class extends tJ{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Q2.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Q2.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},rJ=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new fd({method:a,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new fd({method:a,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),a||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);l.searchParams.set("columns",d.join(","))}}return new fd({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:a,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new fd({method:n,url:a,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new fd({method:r,url:n,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},nJ=class N3{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new rJ(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new N3(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),f=n&&Object.values(r).some(d);f?(l="POST",u=r):n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,g])=>g!==void 0).map(([m,g])=>[m,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([m,g])=>{c.searchParams.append(m,g)})):(l="POST",u=r);const h=new Headers(this.headers);return f?h.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&h.set("Prefer",`count=${i}`),new fd({method:l,url:c,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class sJ{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const aJ="2.93.1",iJ=`realtime-js/${aJ}`,oJ="1.0.0",S3="2.0.0",Z2=S3,a1=1e4,lJ=1e3,cJ=100;var Ko;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ko||(Ko={}));var sn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(sn||(sn={}));var La;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(La||(La={}));var i1;(function(e){e.websocket="websocket"})(i1||(i1={}));var xc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(xc||(xc={}));class uJ{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+f.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let g=new DataView(m),p=0;g.setUint8(p++,this.KINDS.userBroadcastPush),g.setUint8(p++,c.length),g.setUint8(p++,l.length),g.setUint8(p++,o.length),g.setUint8(p++,u.length),g.setUint8(p++,f.length),g.setUint8(p++,r),Array.from(c,b=>g.setUint8(p++,b.charCodeAt(0))),Array.from(l,b=>g.setUint8(p++,b.charCodeAt(0))),Array.from(o,b=>g.setUint8(p++,b.charCodeAt(0))),Array.from(u,b=>g.setUint8(p++,b.charCodeAt(0))),Array.from(f,b=>g.setUint8(p++,b.charCodeAt(0)));var v=new Uint8Array(m.byteLength+n.byteLength);return v.set(new Uint8Array(m),0),v.set(new Uint8Array(n),m.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,o,l,c]=n;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+o));c=c+o;const h=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,g={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class C3{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var lr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(lr||(lr={}));const J2=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=dJ(o,e,t,a),i),{}):{}},dJ=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?k3(i,o):o1(o)},k3=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return pJ(t,r)}switch(e){case lr.bool:return fJ(t);case lr.float4:case lr.float8:case lr.int2:case lr.int4:case lr.int8:case lr.numeric:case lr.oid:return hJ(t);case lr.json:case lr.jsonb:return mJ(t);case lr.timestamp:return gJ(t);case lr.abstime:case lr.date:case lr.daterange:case lr.int4range:case lr.int8range:case lr.money:case lr.reltime:case lr.text:case lr.time:case lr.timestamptz:case lr.timetz:case lr.tsrange:case lr.tstzrange:return o1(t);default:return o1(t)}},o1=e=>e,fJ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},hJ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},mJ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},pJ=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>k3(t,l))}return e},gJ=e=>typeof e=="string"?e.replace(" ","T"):e,E3=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Dj{constructor(t,r,n={},a=a1){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var eO;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(eO||(eO={}));class Wm{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wm.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Wm.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Wm.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(v=>v.presence_ref),m=f.map(v=>v.presence_ref),g=d.filter(v=>m.indexOf(v.presence_ref)<0),p=f.filter(v=>h.indexOf(v.presence_ref)<0);g.length>0&&(l[u]=g),p.length>0&&(c[u]=p)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tO;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(tO||(tO={}));var Hm;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Hm||(Hm={}));var Zi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zi||(Zi={}));class Pd{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=sn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Dj(this,La.join,this.params,this.timeout),this.rejoinTimer=new C3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=sn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=sn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=sn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=sn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=sn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(La.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Wm(this),this.broadcastEndpointURL=E3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==sn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Hm.PRESENCE]&&this.bindings[Hm.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Zi.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Zi.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(Zi.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,v=(g=p==null?void 0:p.length)!==null&&g!==void 0?g:0,b=[];for(let y=0;y<v;y++){const w=p[y],{filter:{event:_,schema:j,table:N,filter:S}}=w,k=m&&m[y];if(k&&k.event===_&&Pd.isFilterValueEqual(k.schema,j)&&Pd.isFilterValueEqual(k.table,N)&&Pd.isFilterValueEqual(k.filter,S))b.push(Object.assign(Object.assign({},w),{id:k.id}));else{this.unsubscribe(),this.state=sn.errored,t==null||t(Zi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Zi.SUBSCRIBED);return}}).receive("error",m=>{this.state=sn.errored,t==null||t(Zi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Zi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===sn.joined&&t===Hm.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=sn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(La.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Dj(this,La.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=sn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Dj(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>cJ){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=La;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,p,v;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(p=m.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var g,p,v,b,y,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((p=r.ids)===null||p===void 0?void 0:p.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(y=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:p,table:v,commit_timestamp:b,type:y,errors:w}=g;h=Object.assign(Object.assign({},{schema:p,table:v,commit_timestamp:b,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(h,n)})}_isClosed(){return this.state===sn.closed}_isJoined(){return this.state===sn.joined}_isJoining(){return this.state===sn.joining}_isLeaving(){return this.state===sn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Pd.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(La.close,{},t)}_onError(t){this._on(La.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=sn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=J2(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=J2(t.columns,t.old_record)),r}}const Rj=()=>{},Uv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vJ=[1e3,2e3,5e3,1e4],yJ=1e4,xJ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bJ{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=a1,this.transport=null,this.heartbeatIntervalMs=Uv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Rj,this.ref=0,this.reconnectTimer=null,this.vsn=Z2,this.logger=Rj,this.conn=null,this.sendBuffer=[],this.serializer=new uJ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${i1.websocket}`,this.httpEndpoint=E3(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sJ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ko.connecting:return xc.Connecting;case Ko.open:return xc.Open;case Ko.closing:return xc.Closing;default:return xc.Closed}}isConnected(){return this.connectionState()===xc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Pd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(lJ,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Uv.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ko.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ko.open||this.conn.readyState===Ko.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(La.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([xJ],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:iJ};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(La.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new C3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Uv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,u,d,f,h,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:a1,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Uv.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Rj,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Z2,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>vJ[g-1]||yJ,this.vsn){case oJ:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,p)=>p(JSON.stringify(g)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(g,p)=>p(JSON.parse(g));break;case S3:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Tp=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function wJ(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function jJ(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function _J(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:o}){const l=wJ(e.baseUrl,n,a),c=await jJ(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),h=f&&d?JSON.parse(d):d;if(!u.ok){const m=f?h:void 0,g=m==null?void 0:m.error;throw new Tp((g==null?void 0:g.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:m})}return{status:u.status,headers:u.headers,data:h}}}}function Bv(e){return e.join("")}var NJ=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Bv(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bv(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bv(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bv(e.namespace)}`}),!0}catch(t){if(t instanceof Tp&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Tp&&r.status===409)return;throw r}}};function Qu(e){return e.join("")}var SJ=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Tp&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Tp&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},CJ=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=_J({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new NJ(this.client,t),this.tableOps=new SJ(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},C0=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function k0(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var zv=class extends C0{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},P3=class extends C0{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const kJ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),EJ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},l1=e=>{if(Array.isArray(e))return e.map(r=>l1(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=l1(n)}),t},PJ=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function AJ(e,t){if(Dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OJ(e){var t=AJ(e,"string");return Dp(t)=="symbol"?t:t+""}function TJ(e,t,r){return(t=OJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(r),!0).forEach(function(n){TJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const nO=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},DJ=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e,i=a.status||500;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";t(new zv(nO(o),i,l,n))}).catch(()=>{if(n==="vectors"){const o=i+"";t(new zv(a.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";t(new zv(a.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";t(new zv(a.statusText||`HTTP ${i} error`,i,o,n))}}else t(new P3(nO(e),e,n))},RJ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?Je(Je({},a),r):(EJ(n)?(a.headers=Je({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Je(Je({},a),r))};async function rm(e,t,r,n,a,i,o){return new Promise((l,c)=>{e(r,RJ(t,n,a,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(o==="vectors"){const d=u.headers.get("content-type");if(!d||!d.includes("application/json"))return{}}return u.json()}).then(u=>l(u)).catch(u=>DJ(u,c,n,o))})}function MJ(e="storage"){return{get:async(t,r,n,a)=>rm(t,"GET",r,n,a,void 0,e),post:async(t,r,n,a,i)=>rm(t,"POST",r,a,i,n,e),put:async(t,r,n,a,i)=>rm(t,"PUT",r,a,i,n,e),head:async(t,r,n,a)=>rm(t,"HEAD",r,Je(Je({},n),{},{noResolveJson:!0}),a,void 0,e),remove:async(t,r,n,a,i)=>rm(t,"DELETE",r,a,i,n,e)}}const $J=MJ("storage"),{get:Rp,post:Sr,put:c1,head:IJ,remove:Rk}=$J;var wh=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=kJ(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(k0(r))return{data:null,error:r};throw r}}},LJ=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(k0(t))return{data:null,error:t};throw t}}};let A3;A3=Symbol.toStringTag;var FJ=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[A3]="BlobDownloadBuilder",this.promise=null}asStream(){return new LJ(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(k0(t))return{data:null,error:t};throw t}}};const UJ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var BJ=class extends wh{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var a=this;return a.handleOperation(async()=>{let i;const o=Je(Je({},sO),n);let l=Je(Je({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=Je(Je({},l),n.headers));const u=a._removeEmptyFolders(t),d=a._getFinalPath(u),f=await(e=="PUT"?c1:Sr)(a.fetch,`${a.url}/object/${d}`,i,Je({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:f.Id,fullPath:f.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),a.handleOperation(async()=>{let c;const u=Je({upsert:sO.upsert},n),d=Je(Je({},a.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{path:i,fullPath:(await c1(a.fetch,l.toString(),c,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const a=Je({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await Sr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new C0("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await Sr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await Sr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let a=n._getFinalPath(e),i=await Sr(n.fetch,`${n.url}/object/sign/${a}`,Je({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const a=await Sr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a.map(o=>Je(Je({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Rp(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new FJ(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>l1(await Rp(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await IJ(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(k0(n)&&n instanceof P3){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Rk(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const a=Je(Je(Je({},UJ),t),{},{prefix:e||""});return await Sr(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=Je({},e);return await Sr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const zJ="2.93.1",Ug={"X-Client-Info":`storage-js/${zJ}`};var VJ=class extends wh{constructor(e,t={},r,n){const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const i=a.href.replace(/\/$/,""),o=Je(Je({},Ug),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Rp(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Rp(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await Sr(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await c1(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Rk(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},qJ=class extends wh{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Je(Je({},Ug),t);super(n,a,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await Rp(t.fetch,a,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Rk(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!PJ(e))throw new C0("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new CJ({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},WJ=class extends wh{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Je(Je({},Ug),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await Sr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await Sr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},HJ=class extends wh{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Je(Je({},Ug),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},KJ=class extends wh{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=Je(Je({},Ug),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Sr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},GJ=class extends KJ{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new YJ(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},YJ=class extends WJ{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Je(Je({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Je(Je({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new XJ(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},XJ=class extends HJ{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Je(Je({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Je(Je({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Je(Je({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Je(Je({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Je(Je({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},QJ=class extends VJ{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new BJ(this.url,this.headers,e,this.fetch)}get vectors(){return new GJ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qJ(this.url+"/iceberg",this.headers,this.fetch)}};const O3="2.93.1",hd=30*1e3,u1=3,Mj=u1*hd,ZJ="http://localhost:9999",JJ="supabase.auth.token",eee={"X-Client-Info":`gotrue-js/${O3}`},d1="X-Supabase-Api-Version",T3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tee=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ree=10*60*1e3;class Mp extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Fe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class nee extends Mp{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function see(e){return Fe(e)&&e.name==="AuthApiError"}class bc extends Mp{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ao extends Mp{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Ms extends Ao{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $j(e){return Fe(e)&&e.name==="AuthSessionMissingError"}class Zu extends Ao{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vv extends Ao{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class qv extends Ao{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aee(e){return Fe(e)&&e.name==="AuthImplicitGrantRedirectError"}class aO extends Ao{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class iee extends Ao{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class f1 extends Ao{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ij(e){return Fe(e)&&e.name==="AuthRetryableFetchError"}class iO extends Ao{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class h1 extends Ao{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const jx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oO=` 	
\r=`.split(""),oee=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<oO.length;t+=1)e[oO[t].charCodeAt(0)]=-2;for(let t=0;t<jx.length;t+=1)e[jx[t].charCodeAt(0)]=t;return e})();function lO(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(jx[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(jx[n]),t.queuedBits-=6}}function D3(e,t,r){const n=oee[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function cO(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{uee(o,n,r)};for(let o=0;o<e.length;o+=1)D3(e.charCodeAt(o),a,i);return t.join("")}function lee(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function cee(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}lee(n,t)}}function uee(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Hd(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)D3(e.charCodeAt(a),r,n);return new Uint8Array(t)}function dee(e){const t=[];return cee(e,r=>t.push(r)),new Uint8Array(t)}function Cc(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>lO(a,r,n)),lO(null,r,n),t.join("")}function fee(e){return Math.round(Date.now()/1e3)+e}function hee(){return Symbol("auth-callback")}const Cn=()=>typeof window<"u"&&typeof document<"u",oc={tested:!1,writable:!1},R3=()=>{if(!Cn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oc.tested)return oc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),oc.tested=!0,oc.writable=!0}catch{oc.tested=!0,oc.writable=!1}return oc.writable};function mee(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const M3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),pee=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",md=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},lc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Sn=async(e,t)=>{await e.removeItem(t)};class E0{constructor(){this.promise=new E0.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}E0.promiseConstructor=Promise;function Wv(e){const t=e.split(".");if(t.length!==3)throw new h1("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!tee.test(t[n]))throw new h1("JWT not in base64url format");return{header:JSON.parse(cO(t[0])),payload:JSON.parse(cO(t[1])),signature:Hd(t[2]),raw:{header:t[0],payload:t[1]}}}async function gee(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function vee(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function yee(e){return("0"+e.toString(16)).substr(-2)}function xee(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,yee).join("")}async function bee(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function wee(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await bee(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ju(e,t,r=!1){const n=xee();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await md(e,`${t}-code-verifier`,a);const i=await wee(n);return[i,n===i?"plain":"s256"]}const jee=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _ee(e){const t=e.headers.get(d1);if(!t||!t.match(jee))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Nee(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function See(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Cee=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ed(e){if(!Cee.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lj(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kee(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function uO(e){return JSON.parse(JSON.stringify(e))}const mc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Eee=[502,503,504];async function dO(e){var t;if(!pee(e))throw new f1(mc(e),0);if(Eee.includes(e.status))throw new f1(mc(e),e.status);let r;try{r=await e.json()}catch(i){throw new bc(mc(i),i)}let n;const a=_ee(e);if(a&&a.getTime()>=T3["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new iO(mc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ms}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new iO(mc(r),e.status,r.weak_password.reasons);throw new nee(mc(r),e.status||500,n)}const Pee=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Qe(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[d1]||(i[d1]=T3["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Aee(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Aee(e,t,r,n,a,i){const o=Pee(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new f1(mc(c),0)}if(l.ok||await dO(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await dO(c)}}function Ta(e){var t;let r=null;Dee(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=fee(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function fO(e){const t=Ta(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Zo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Oee(e){return{data:e,error:null}}function Tee(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=bh(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function hO(e){return e}function Dee(e){return e.access_token&&e.refresh_token&&e.expires_in}const Fj=["global","local","others"];class Ree{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=M3(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Fj[0]){if(Fj.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fj.join(", ")}`);try{return await Qe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Zo})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=bh(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Tee,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Fe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Qe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Zo})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:hO});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Fe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ed(t);try{return await Qe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Zo})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ed(t);try{return await Qe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Zo})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ed(t);try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Zo})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ed(t.userId);try{const{data:r,error:n}=await Qe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ed(t.userId),ed(t.id);try{return{data:await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:hO});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=p}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Fe(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Qe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}}function mO(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const td={debug:!!(globalThis&&R3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Mee extends $3{}async function $ee(e,t,r){td.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),td.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){td.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{td.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw td.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Mee(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(td.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Iee(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function I3(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Lee(e){return parseInt(e,16)}function Fee(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Uee(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=I3(e.address),g=d?`${d}://${n}`:n,p=e.statement?`${e.statement}
`:"",v=`${g} wants you to sign in with your Ethereum account:
${m}

${p}`;let b=`URI: ${f}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(b+=`
Expiration Time: ${a.toISOString()}`),l&&(b+=`
Not Before: ${l.toISOString()}`),c&&(b+=`
Request ID: ${c}`),u){let y=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);y+=`
- ${w}`}b+=y}return`${v}
${b}`}class Xr extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class _x extends Xr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Bee({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Xr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Xr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Xr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Xr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Xr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Xr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Xr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Xr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(L3(o)){if(i.rp.id!==o)return new Xr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Xr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Xr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Xr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Xr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function zee({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Xr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Xr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(L3(n)){if(r.rpId!==n)return new Xr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Xr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Xr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Xr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Vee{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const qee=new Vee;function Wee(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=bh(e,["challenge","user","excludeCredentials"]),i=Hd(t).buffer,o=Object.assign(Object.assign({},r),{id:Hd(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Hd(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Hee(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=bh(e,["challenge","allowCredentials"]),a=Hd(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Hd(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Kee(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Cc(new Uint8Array(e.response.attestationObject)),clientDataJSON:Cc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Gee(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Cc(new Uint8Array(a.authenticatorData)),clientDataJSON:Cc(new Uint8Array(a.clientDataJSON)),signature:Cc(new Uint8Array(a.signature)),userHandle:a.userHandle?Cc(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function L3(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function pO(){var e,t;return!!(Cn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Yee(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new _x("Browser returned unexpected credential type",t)}:{data:null,error:new _x("Empty credential response",t)}}catch(t){return{data:null,error:Bee({error:t,options:e})}}}async function Xee(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new _x("Browser returned unexpected credential type",t)}:{data:null,error:new _x("Empty credential response",t)}}catch(t){return{data:null,error:zee({error:t,options:e})}}}const Qee={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Zee={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Nx(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Nx(l,o):n[i]=Nx(o)}else n[i]=o}return n}function Jee(e,t){return Nx(Qee,e,t||{})}function ete(e,t){return Nx(Zee,e,t||{})}class tte{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??qee.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Jee(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await Yee({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=ete(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await Xee(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(o){return Fe(o)?{data:null,error:o}:{data:null,error:new bc("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Mp("rpId is required for WebAuthn authentication")};try{if(!pO())return{data:null,error:new bc("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return Fe(o)?{data:null,error:o}:{data:null,error:new bc("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Mp("rpId is required for WebAuthn registration")};try{if(!pO())return{data:null,error:new bc("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Fe(o)?{data:null,error:o}:{data:null,error:new bc("Unexpected error in register",o)}}}}Iee();const rte={url:ZJ,storageKey:JJ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eee,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function gO(e,t,r){return await r()}const rd={};class $p{get jwks(){var t,r;return(r=(t=rd[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){rd[this.storageKey]=Object.assign(Object.assign({},rd[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=rd[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){rd[this.storageKey]=Object.assign(Object.assign({},rd[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},rte),t);if(this.storageKey=i.storageKey,this.instanceID=(r=$p.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,$p.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Cn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Ree({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=M3(i.fetch),this.lock=i.lock||gO,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Cn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=$ee:this.lock=gO,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new tte(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:R3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mO(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=mO(this.memoryStorage)),Cn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${O3}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Cn()&&(r=mee(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Cn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),aee(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Fe(r)?this._returnResult({error:r}):this._returnResult({error:new bc("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ta}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(Fe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await Ju(this.storage,this.storageKey)),i=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:Ta})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Ta})}else throw new Vv("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Sn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Sn(this.storage,`${this.storageKey}-code-verifier`),Fe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fO})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fO})}else throw new Vv("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Zu;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Fe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,c,u,d,f,h;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:p,wallet:v,statement:b,options:y}=t;let w;if(Cn())if(typeof v=="object")w=v;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")w=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const _=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=I3(j[0]);let S=(n=y==null?void 0:y.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const C=await w.request({method:"eth_chainId"});S=Lee(C)}const k={domain:_.host,address:N,statement:b,uri:_.href,version:"1",chainId:S,nonce:(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=Uee(k),g=await w.request({method:"personal_sign",params:[Fee(m),N]})}try{const{data:p,error:v}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Ta});if(v)throw v;if(!p||!p.session||!p.user){const b=new Zu;return this._returnResult({data:{user:null,session:null},error:b})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:v})}catch(p){if(Fe(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(t){var r,n,a,i,o,l,c,u,d,f,h,m;let g,p;if("message"in t)g=t.message,p=t.signature;else{const{chain:v,wallet:b,statement:y,options:w}=t;let _;if(Cn())if(typeof b=="object")_=b;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),p=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=N}}try{const{data:v,error:b}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Cc(p)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ta});if(b)throw b;if(!v||!v.session||!v.user){const y=new Zu;return this._returnResult({data:{user:null,session:null},error:y})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(Fe(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await lc(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new iee;const{data:i,error:o}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ta});if(await Sn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Zu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Sn(this.storage,`${this.storageKey}-code-verifier`),Fe(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ta}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Zu;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(Fe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ju(this.storage,this.storageKey));const{error:f}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Vv("You must provide either an email or phone number.")}catch(l){if(await Sn(this.storage,`${this.storageKey}-code-verifier`),Fe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ta});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(Fe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Ju(this.storage,this.storageKey));const u=await Qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:Oee});return!((i=u.data)===null||i===void 0)&&i.url&&Cn()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Sn(this.storage,`${this.storageKey}-code-verifier`),Fe(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ms;const{error:a}=await Qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Fe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Qe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await Qe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Vv("You must provide either an email or phone number and a type")}catch(r){if(Fe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await lc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Mj:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await lc(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Lj()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=kee(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Zo}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ms}:await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Zo})})}catch(r){if(Fe(r))return $j(r)&&(await this._removeSession(),await Sn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Ms;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ju(this.storage,this.storageKey));const{data:u,error:d}=await Qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Zo});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Sn(this.storage,`${this.storageKey}-code-verifier`),Fe(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ms;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Wv(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Fe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ms;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Fe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Cn())throw new qv("No browser detected.");if(t.error||t.error_description||t.error_code)throw new qv(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new aO("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qv("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new aO("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new qv("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=hd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:p,error:v}=await this._getUser(i);if(v)throw v;const b={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:t.type},error:null})}catch(n){if(Fe(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await lc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i&&!$j(i))return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(see(l)&&(l.status===404||l.status===401||l.status===403)||$j(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Sn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=hee(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ju(this.storage,this.storageKey,!0));try{return await Qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Sn(this.storage,`${this.storageKey}-code-verifier`),Fe(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Qe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Cn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Fe(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,f=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ta}),{data:h,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Zu}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(a){if(await Sn(this.storage,`${this.storageKey}-code-verifier`),Fe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Qe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await vee(async a=>(a>0&&await gee(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ta})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Ij(i)&&Date.now()+o-n<hd})}catch(n){if(this._debug(r,"error",n),Fe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Cn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await lc(this.storage,this.storageKey);if(a&&this.userStorage){let o=await lc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await md(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Lj()}else if(a&&!a.user&&!a.user){const o=await lc(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Sn(this.storage,this.storageKey+"-user"),await md(this.storage,this.storageKey,a)):a.user=Lj()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Mj;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Mj}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Ij(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ms;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new E0;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ms;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Fe(i)){const o={data:null,error:i};return Ij(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Sn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await md(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=uO(a);await md(this.storage,this.storageKey,i)}else{const a=uO(r);await md(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Sn(this.storage,this.storageKey),await Sn(this.storage,this.storageKey+"-code-verifier"),await Sn(this.storage,this.storageKey+"-user"),this.userStorage&&await Sn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Cn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),hd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/hd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${hd}ms, refresh threshold is ${u1} ticks`),a<=u1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof $3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Cn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ju(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Qe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Qe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Kee(t.webauthn.credential_response):Gee(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Qe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Qe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Wee(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Hee(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,a,i;if(t)try{const{payload:m}=Wv(t);let g=null;m.aal&&(g=m.aal);let p=g;const{data:{user:v},error:b}=await this.getUser(t);if(b)return this._returnResult({data:null,error:b});((n=(r=v==null?void 0:v.factors)===null||r===void 0?void 0:r.filter(_=>_.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(p="aal2");const w=m.amr||[];return{data:{currentLevel:g,nextLevel:p,currentAuthenticationMethods:w},error:null}}catch(m){if(Fe(m))return this._returnResult({data:null,error:m});throw m}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Wv(o.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((i=(a=o.user.factors)===null||a===void 0?void 0:a.filter(m=>m.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const h=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Qe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ms})})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ms});const o=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Cn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Fe(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ms});const o=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Cn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Fe(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Qe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ms})})}catch(t){if(Fe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await Qe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ms})})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+ree>a)return n;const{data:i,error:o}=await Qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Wv(n);r!=null&&r.allowExpired||Nee(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=See(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,dee(`${l}.${c}`)))throw new h1("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(Fe(n))return this._returnResult({data:null,error:n});throw n}}}$p.nextInstanceID={};const nte=$p,ste="2.93.1";let Em="";typeof Deno<"u"?Em="deno":typeof document<"u"?Em="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Em="react-native":Em="node";function ate(){const e=globalThis.process;if(e&&e.platform){const t=e.platform;if(t==="darwin")return"macOS";if(t==="win32")return"Windows";if(t==="linux")return"Linux";if(t==="android")return"Android"}if(typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platform){const t=navigator.userAgentData.platform;if(t==="macOS")return"macOS";if(t==="Windows")return"Windows";if(t==="Linux")return"Linux";if(t==="Android")return"Android";if(t==="iOS")return"iOS"}return null}function ite(){const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node&&typeof window>"u")try{const r=globalThis.require;if(r)return r("os").release()}catch{return null}}if(typeof Deno<"u"&&Deno.osRelease)try{return Deno.osRelease()}catch{return null}return typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}function ote(){if(typeof Deno<"u")return"deno";if(typeof Bun<"u")return"bun";const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return"node"}return null}function lte(){if(typeof Deno<"u"&&Deno.version)return Deno.version.deno;if(typeof Bun<"u"&&Bun.version)return Bun.version;const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return t.node}return null}function cte(){const e={"X-Client-Info":`supabase-js-${Em}/${ste}`},t=ate();t&&(e["X-Supabase-Client-Platform"]=t);const r=ite();r&&(e["X-Supabase-Client-Platform-Version"]=r);const n=ote();n&&(e["X-Supabase-Client-Runtime"]=n);const a=lte();return a&&(e["X-Supabase-Client-Runtime-Version"]=a),e}const ute=cte(),dte={headers:ute},fte={schema:"public"},hte={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mte={};function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function pte(e,t){if(Ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gte(e){var t=pte(e,"string");return Ip(t)=="symbol"?t:t+""}function vte(e,t,r){return(t=gte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vO(Object(r),!0).forEach(function(n){vte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const yte=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),xte=()=>Headers,bte=(e,t,r)=>{const n=yte(r),a=xte();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,$r($r({},o),{},{headers:u}))}};function wte(e){return e.endsWith("/")?e:e+"/"}function jte(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:$r($r({},c),a),auth:$r($r({},u),i),realtime:$r($r({},d),o),storage:{},global:$r($r($r({},f),l),{},{headers:$r($r({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function _te(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(wte(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Nte=class extends nte{constructor(e){super(e)}},Ste=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=_te(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:fte,realtime:mte,auth:$r($r({},hte),{},{storageKey:o}),global:dte},c=jte(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=bte(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient($r({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new nJ(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new QJ(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new ZZ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Nte({url:this.authUrl.href,headers:$r($r({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new bJ(this.realtimeUrl.href,$r($r({},e),{},{params:$r($r({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Cte=(e,t,r)=>new Ste(e,t,r);function kte(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}kte()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ete="https://zrqhgzmsbesstxticbbk.supabase.co",Pte="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpycWhnem1zYmVzc3R4dGljYmJrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk0ODE5MDMsImV4cCI6MjA4NTA1NzkwM30.p1QAaYye6ZF3xXRrlK_f_j4LK1g9NN1AvYEQlrWlEiM",M=Cte(Ete,Pte,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});function F3(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),a=async()=>{const{data:u,error:d}=await M.from("sidebar_settings").select("*").order("display_order");if(d){console.error("Failed to load sidebar settings:",d);return}t(u||[])};return x.useEffect(()=>{(async()=>{n(!0),await a(),n(!1)})()},[]),{settings:e,loading:r,updateVisibility:async(u,d)=>{const{error:f}=await M.from("sidebar_settings").update({is_visible:d}).eq("module_key",u);return f?(oe({title:"Error",description:"Failed to update sidebar visibility. You may not have admin permissions.",variant:"destructive"}),!1):(t(h=>h.map(m=>m.module_key===u?{...m,is_visible:d}:m)),oe({title:"Success",description:`${u} visibility updated`}),!0)},updateOrder:async(u,d)=>{const{error:f}=await M.from("sidebar_settings").update({display_order:d}).eq("module_key",u);return f?(oe({title:"Error",description:"Failed to update display order",variant:"destructive"}),!1):(await a(),!0)},isModuleVisible:u=>{const d=e.find(f=>f.module_key===u);return(d==null?void 0:d.is_visible)??!0},getVisibleModules:()=>e.filter(u=>u.is_visible).sort((u,d)=>u.display_order-d.display_order).map(u=>u.module_key),refetch:a}}const Ate=[{label:"Dashboard",icon:tF,href:"/",moduleKey:"dashboard"},{label:"Employees",icon:Er,href:"/employees",moduleKey:"employees"},{label:"Compliance",icon:hu,href:"/compliance",moduleKey:"compliance",badge:3},{label:"Recruitment",icon:mu,href:"/recruitment",moduleKey:"recruitment"},{label:"Documents",icon:ut,href:"/documents",moduleKey:"documents"},{label:"Contracts",icon:XL,href:"/contracts",moduleKey:"contracts"},{label:"Performance",icon:Qs,href:"/performance",moduleKey:"performance"},{label:"HR Cases",icon:ir,href:"/hr-cases",moduleKey:"hr-cases"},{label:"LMS Admin",icon:dk,href:"/lms",moduleKey:"lms"},{label:"Payroll",icon:zd,href:"/payroll",moduleKey:"payroll"},{label:"Payroll Export",icon:xf,href:"/payroll-export",moduleKey:"payroll-export"},{label:"Audit & Exports",icon:xf,href:"/audit-exports",moduleKey:"audit-exports"},{label:"Reports",icon:fk,href:"/reports",moduleKey:"reports"}],Ote=[{label:"My Portal",icon:tF,href:"/portal",moduleKey:"portal"},{label:"My Documents",icon:JL,href:"/portal/documents",moduleKey:"portal-documents"},{label:"My Training",icon:bf,href:"/portal/training",moduleKey:"portal-training"},{label:"My Reviews",icon:Ws,href:"/portal/reviews",moduleKey:"portal-reviews"},{label:"My Goals",icon:Qs,href:"/portal/goals",moduleKey:"portal-goals"},{label:"My Profile",icon:ns,href:"/portal/profile",moduleKey:"portal-profile"}],Tte=[{label:"Settings",icon:mh,href:"/settings",moduleKey:"settings"},{label:"Help",icon:jp,href:"/help",moduleKey:"help"}];function yO(){const[e,t]=x.useState(!1),r=Iu(),{settings:n,loading:a,isModuleVisible:i}=F3(),l=[...Ate.filter(u=>a||n.length===0?!0:i(u.moduleKey))].sort((u,d)=>{const f=n.find(m=>m.module_key===u.moduleKey),h=n.find(m=>m.module_key===d.moduleKey);return((f==null?void 0:f.display_order)??99)-((h==null?void 0:h.display_order)??99)}),c=({item:u})=>{const d=r.pathname===u.href,f=u.icon,h=s.jsxs(On,{to:u.href,className:Q("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group relative",d?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:text-sidebar-foreground hover:bg-sidebar-accent/50"),children:[s.jsx(f,{className:Q("h-5 w-5 flex-shrink-0",d&&"text-sidebar-primary")}),!e&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-medium text-sm",children:u.label}),u.badge&&s.jsx("span",{className:"ml-auto bg-accent text-accent-foreground text-xs font-semibold px-2 py-0.5 rounded-full",children:u.badge})]}),e&&u.badge&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-accent text-accent-foreground text-xs font-semibold w-5 h-5 flex items-center justify-center rounded-full",children:u.badge})]});return e?s.jsxs(YF,{delayDuration:0,children:[s.jsx(XF,{asChild:!0,children:h}),s.jsxs(Ck,{side:"right",className:"font-medium",children:[u.label,u.badge&&s.jsxs("span",{className:"ml-2 text-accent",children:["(",u.badge,")"]})]})]}):h};return s.jsxs("aside",{className:Q("fixed left-0 top-0 z-40 h-screen bg-sidebar flex flex-col transition-all duration-300",e?"w-16":"w-64"),children:[s.jsxs("div",{className:Q("flex items-center h-16 px-4 border-b border-sidebar-border",e?"justify-center":"gap-3"),children:[s.jsx("div",{className:"w-8 h-8 rounded-lg gradient-hero flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"S+"})}),!e&&s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-semibold text-sidebar-foreground text-sm",children:"Social Plus"}),s.jsx("span",{className:"text-xs text-sidebar-foreground/60",children:"Support Work"})]})]}),s.jsxs("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:[l.map(u=>s.jsx(c,{item:u},u.href)),!e&&s.jsx("div",{className:"pt-4 pb-2",children:s.jsx("span",{className:"px-3 text-xs font-semibold text-sidebar-foreground/50 uppercase tracking-wider",children:"Self-Service"})}),e&&s.jsx(Nt,{className:"my-2"}),Ote.map(u=>s.jsx(c,{item:u},u.href))]}),s.jsx("div",{className:"px-3 py-4 border-t border-sidebar-border space-y-1",children:Tte.map(u=>s.jsx(c,{item:u},u.href))}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>t(!e),className:"absolute -right-3 top-20 h-6 w-6 rounded-full border border-sidebar-border bg-sidebar text-sidebar-foreground hover:bg-sidebar-accent",children:e?s.jsx(Po,{className:"h-3 w-3"}):s.jsx(hk,{className:"h-3 w-3"})})]})}const J=x.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Q("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));J.displayName="Input";var U3={exports:{}},B3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f=x;function Dte(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rte=typeof Object.is=="function"?Object.is:Dte,Mte=_f.useState,$te=_f.useEffect,Ite=_f.useLayoutEffect,Lte=_f.useDebugValue;function Fte(e,t){var r=t(),n=Mte({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return Ite(function(){a.value=r,a.getSnapshot=t,Uj(a)&&i({inst:a})},[e,r,t]),$te(function(){return Uj(a)&&i({inst:a}),e(function(){Uj(a)&&i({inst:a})})},[e]),Lte(r),r}function Uj(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Rte(e,r)}catch{return!0}}function Ute(e,t){return t()}var Bte=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ute:Fte;B3.useSyncExternalStore=_f.useSyncExternalStore!==void 0?_f.useSyncExternalStore:Bte;U3.exports=B3;var zte=U3.exports;function Vte(){return zte.useSyncExternalStore(qte,()=>!0,()=>!1)}function qte(){return()=>{}}var Mk="Avatar",[Wte,a3e]=zr(Mk),[Hte,z3]=Wte(Mk),V3=x.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,i]=x.useState("idle");return s.jsx(Hte,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(Ne.span,{...n,ref:t})})});V3.displayName=Mk;var q3="AvatarImage",W3=x.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=z3(q3,r),l=Kte(n,i),c=Ur(u=>{a(u),o.onImageLoadingStatusChange(u)});return Br(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Ne.img,{...i,ref:t,src:n}):null});W3.displayName=q3;var H3="AvatarFallback",K3=x.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=z3(H3,r),[o,l]=x.useState(n===void 0);return x.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(Ne.span,{...a,ref:t}):null});K3.displayName=H3;function xO(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Kte(e,{referrerPolicy:t,crossOrigin:r}){const n=Vte(),a=x.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=x.useState(()=>xO(i,e));return Br(()=>{l(xO(i,e))},[i,e]),Br(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,t]),o}var G3=V3,Y3=W3,X3=K3;const Pr=x.forwardRef(({className:e,...t},r)=>s.jsx(G3,{ref:r,className:Q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Pr.displayName=G3.displayName;const Bg=x.forwardRef(({className:e,...t},r)=>s.jsx(Y3,{ref:r,className:Q("aspect-square h-full w-full",e),...t}));Bg.displayName=Y3.displayName;const Ar=x.forwardRef(({className:e,...t},r)=>s.jsx(X3,{ref:r,className:Q("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Ar.displayName=X3.displayName;var Gte=x.createContext(void 0);function Hl(e){const t=x.useContext(Gte);return e||t||"ltr"}var Bj=0;function P0(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??bO()),document.body.insertAdjacentElement("beforeend",e[1]??bO()),Bj++,()=>{Bj===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Bj--}},[])}function bO(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var zj="focusScope.autoFocusOnMount",Vj="focusScope.autoFocusOnUnmount",wO={bubbles:!1,cancelable:!0},Yte="FocusScope",zg=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=x.useState(null),u=Ur(a),d=Ur(i),f=x.useRef(null),h=We(t,p=>c(p)),m=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let p=function(w){if(m.paused||!l)return;const _=w.target;l.contains(_)?f.current=_:qo(f.current,{select:!0})},v=function(w){if(m.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||qo(f.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&qo(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const y=new MutationObserver(b);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),y.disconnect()}}},[n,l,m.paused]),x.useEffect(()=>{if(l){_O.add(m);const p=document.activeElement;if(!l.contains(p)){const b=new CustomEvent(zj,wO);l.addEventListener(zj,u),l.dispatchEvent(b),b.defaultPrevented||(Xte(tre(Q3(l)),{select:!0}),document.activeElement===p&&qo(l))}return()=>{l.removeEventListener(zj,u),setTimeout(()=>{const b=new CustomEvent(Vj,wO);l.addEventListener(Vj,d),l.dispatchEvent(b),b.defaultPrevented||qo(p??document.body,{select:!0}),l.removeEventListener(Vj,d),_O.remove(m)},0)}}},[l,u,d,m]);const g=x.useCallback(p=>{if(!r&&!n||m.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,b=document.activeElement;if(v&&b){const y=p.currentTarget,[w,_]=Qte(y);w&&_?!p.shiftKey&&b===_?(p.preventDefault(),r&&qo(w,{select:!0})):p.shiftKey&&b===w&&(p.preventDefault(),r&&qo(_,{select:!0})):b===y&&p.preventDefault()}},[r,n,m.paused]);return s.jsx(Ne.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});zg.displayName=Yte;function Xte(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(qo(n,{select:t}),document.activeElement!==r)return}function Qte(e){const t=Q3(e),r=jO(t,e),n=jO(t.reverse(),e);return[r,n]}function Q3(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function jO(e,t){for(const r of e)if(!Zte(r,{upTo:t}))return r}function Zte(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Jte(e){return e instanceof HTMLInputElement&&"select"in e}function qo(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Jte(e)&&t&&e.select()}}var _O=ere();function ere(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=NO(e,t),e.unshift(t)},remove(t){var r;e=NO(e,t),(r=e[0])==null||r.resume()}}}function NO(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function tre(e){return e.filter(t=>t.tagName!=="A")}var qj="rovingFocusGroup.onEntryFocus",rre={bubbles:!1,cancelable:!0},Vg="RovingFocusGroup",[m1,Z3,nre]=ch(Vg),[sre,jh]=zr(Vg,[nre]),[are,ire]=sre(Vg),J3=x.forwardRef((e,t)=>s.jsx(m1.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(m1.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(ore,{...e,ref:t})})}));J3.displayName=Vg;var ore=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=x.useRef(null),m=We(t,h),g=Hl(i),[p,v]=qn({prop:o,defaultProp:l??null,onChange:c,caller:Vg}),[b,y]=x.useState(!1),w=Ur(u),_=Z3(r),j=x.useRef(!1),[N,S]=x.useState(0);return x.useEffect(()=>{const k=h.current;if(k)return k.addEventListener(qj,w),()=>k.removeEventListener(qj,w)},[w]),s.jsx(are,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:p,onItemFocus:x.useCallback(k=>v(k),[v]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>S(k=>k+1),[]),onFocusableItemRemove:x.useCallback(()=>S(k=>k-1),[]),children:s.jsx(Ne.div,{tabIndex:b||N===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:fe(e.onMouseDown,()=>{j.current=!0}),onFocus:fe(e.onFocus,k=>{const C=!j.current;if(k.target===k.currentTarget&&C&&!b){const P=new CustomEvent(qj,rre);if(k.currentTarget.dispatchEvent(P),!P.defaultPrevented){const A=_().filter(F=>F.focusable),E=A.find(F=>F.active),R=A.find(F=>F.id===p),B=[E,R,...A].filter(Boolean).map(F=>F.ref.current);r5(B,d)}}j.current=!1}),onBlur:fe(e.onBlur,()=>y(!1))})})}),e5="RovingFocusGroupItem",t5=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Ss(),u=i||c,d=ire(e5,r),f=d.currentTabStopId===u,h=Z3(r),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:p}=d;return x.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),s.jsx(m1.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(Ne.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:fe(e.onMouseDown,v=>{n?d.onItemFocus(u):v.preventDefault()}),onFocus:fe(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:fe(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const b=ure(v,d.orientation,d.dir);if(b!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=h().filter(_=>_.focusable).map(_=>_.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const _=w.indexOf(v.currentTarget);w=d.loop?dre(w,_+1):w.slice(_+1)}setTimeout(()=>r5(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:p!=null}):o})})});t5.displayName=e5;var lre={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function cre(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ure(e,t,r){const n=cre(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return lre[n]}function r5(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function dre(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var $k=J3,Ik=t5,fre=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},nd=new WeakMap,Hv=new WeakMap,Kv={},Wj=0,n5=function(e){return e&&(e.host||n5(e.parentNode))},hre=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=n5(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},mre=function(e,t,r,n){var a=hre(t,Array.isArray(e)?e:[e]);Kv[r]||(Kv[r]=new WeakMap);var i=Kv[r],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var m=h.getAttribute(n),g=m!==null&&m!=="false",p=(nd.get(h)||0)+1,v=(i.get(h)||0)+1;nd.set(h,p),i.set(h,v),o.push(h),p===1&&g&&Hv.set(h,!0),v===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return d(t),l.clear(),Wj++,function(){o.forEach(function(f){var h=nd.get(f)-1,m=i.get(f)-1;nd.set(f,h),i.set(f,m),h||(Hv.has(f)||f.removeAttribute(n),Hv.delete(f)),m||f.removeAttribute(r)}),Wj--,Wj||(nd=new WeakMap,nd=new WeakMap,Hv=new WeakMap,Kv={})}},A0=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=fre(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),mre(n,a,r,"aria-hidden")):function(){return null}},Ay="right-scroll-bar-position",Oy="width-before-scroll-bar",pre="with-scroll-bars-hidden",gre="--removed-body-scroll-bar-size";function Hj(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function vre(e,t){var r=x.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var yre=typeof window<"u"?x.useLayoutEffect:x.useEffect,SO=new WeakMap;function xre(e,t){var r=vre(null,function(n){return e.forEach(function(a){return Hj(a,n)})});return yre(function(){var n=SO.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||Hj(l,null)}),i.forEach(function(l){a.has(l)||Hj(l,o)})}SO.set(r,e)},[e]),r}function bre(e){return e}function wre(e,t){t===void 0&&(t=bre);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function jre(e){e===void 0&&(e={});var t=wre(null);return t.options=xi({async:!0,ssr:!1},e),t}var s5=function(e){var t=e.sideCar,r=bh(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return x.createElement(n,xi({},r))};s5.isSideCarExport=!0;function _re(e,t){return e.useMedium(t),s5}var a5=jre(),Kj=function(){},O0=x.forwardRef(function(e,t){var r=x.useRef(null),n=x.useState({onScrollCapture:Kj,onWheelCapture:Kj,onTouchMoveCapture:Kj}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,p=e.inert,v=e.allowPinchZoom,b=e.as,y=b===void 0?"div":b,w=e.gapMode,_=bh(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,N=xre([r,t]),S=xi(xi({},_),a);return x.createElement(x.Fragment,null,d&&x.createElement(j,{sideCar:a5,removeScrollBar:u,shards:f,noRelative:m,noIsolation:g,inert:p,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:w}),o?x.cloneElement(x.Children.only(l),xi(xi({},S),{ref:N})):x.createElement(y,xi({},S,{className:c,ref:N}),l))});O0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};O0.classNames={fullWidth:Oy,zeroRight:Ay};var Nre=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Sre(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Nre();return t&&e.setAttribute("nonce",t),e}function Cre(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function kre(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ere=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Sre())&&(Cre(t,r),kre(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Pre=function(){var e=Ere();return function(t,r){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},i5=function(){var e=Pre(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},Are={left:0,top:0,right:0,gap:0},Gj=function(e){return parseInt(e||"",10)||0},Ore=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Gj(r),Gj(n),Gj(a)]},Tre=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Are;var t=Ore(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Dre=i5(),Kd="data-scroll-locked",Rre=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(pre,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Kd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ay,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Oy,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ay," .").concat(Ay,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Oy," .").concat(Oy,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Kd,`] {
    `).concat(gre,": ").concat(l,`px;
  }
`)},CO=function(){var e=parseInt(document.body.getAttribute(Kd)||"0",10);return isFinite(e)?e:0},Mre=function(){x.useEffect(function(){return document.body.setAttribute(Kd,(CO()+1).toString()),function(){var e=CO()-1;e<=0?document.body.removeAttribute(Kd):document.body.setAttribute(Kd,e.toString())}},[])},$re=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;Mre();var i=x.useMemo(function(){return Tre(a)},[a]);return x.createElement(Dre,{styles:Rre(i,!t,a,r?"":"!important")})},p1=!1;if(typeof window<"u")try{var Gv=Object.defineProperty({},"passive",{get:function(){return p1=!0,!0}});window.addEventListener("test",Gv,Gv),window.removeEventListener("test",Gv,Gv)}catch{p1=!1}var sd=p1?{passive:!1}:!1,Ire=function(e){return e.tagName==="TEXTAREA"},o5=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Ire(e)&&r[t]==="visible")},Lre=function(e){return o5(e,"overflowY")},Fre=function(e){return o5(e,"overflowX")},kO=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=l5(e,n);if(a){var i=c5(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Ure=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Bre=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},l5=function(e,t){return e==="v"?Lre(t):Fre(t)},c5=function(e,t){return e==="v"?Ure(t):Bre(t)},zre=function(e,t){return e==="h"&&t==="rtl"?-1:1},Vre=function(e,t,r,n,a){var i=zre(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{if(!l)break;var m=c5(e,l),g=m[0],p=m[1],v=m[2],b=p-v-i*g;(g||b)&&l5(e,l)&&(f+=b,h+=g);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!a)||!d&&(Math.abs(h)<1||!a))&&(u=!0),u},Yv=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},EO=function(e){return[e.deltaX,e.deltaY]},PO=function(e){return e&&"current"in e?e.current:e},qre=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Wre=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Hre=0,ad=[];function Kre(e){var t=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),a=x.useState(Hre++)[0],i=x.useState(i5)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var p=YZ([e.lockRef.current],(e.shards||[]).map(PO),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var b=Yv(p),y=r.current,w="deltaX"in p?p.deltaX:y[0]-b[0],_="deltaY"in p?p.deltaY:y[1]-b[1],j,N=p.target,S=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in p&&S==="h"&&N.type==="range")return!1;var k=kO(S,N);if(!k)return!0;if(k?j=S:(j=S==="v"?"h":"v",k=kO(S,N)),!k)return!1;if(!n.current&&"changedTouches"in p&&(w||_)&&(n.current=j),!j)return!0;var C=n.current||j;return Vre(C,v,p,C==="h"?w:_,!0)},[]),c=x.useCallback(function(p){var v=p;if(!(!ad.length||ad[ad.length-1]!==i)){var b="deltaY"in v?EO(v):Yv(v),y=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&qre(j.delta,b)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(PO).filter(Boolean).filter(function(j){return j.contains(v.target)}),_=w.length>0?l(v,w[0]):!o.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),u=x.useCallback(function(p,v,b,y){var w={name:p,delta:v,target:b,should:y,shadowParent:Gre(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(_){return _!==w})},1)},[]),d=x.useCallback(function(p){r.current=Yv(p),n.current=void 0},[]),f=x.useCallback(function(p){u(p.type,EO(p),p.target,l(p,e.lockRef.current))},[]),h=x.useCallback(function(p){u(p.type,Yv(p),p.target,l(p,e.lockRef.current))},[]);x.useEffect(function(){return ad.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,sd),document.addEventListener("touchmove",c,sd),document.addEventListener("touchstart",d,sd),function(){ad=ad.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,sd),document.removeEventListener("touchmove",c,sd),document.removeEventListener("touchstart",d,sd)}},[]);var m=e.removeScrollBar,g=e.inert;return x.createElement(x.Fragment,null,g?x.createElement(i,{styles:Wre(a)}):null,m?x.createElement($re,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Gre(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Yre=_re(a5,Kre);var qg=x.forwardRef(function(e,t){return x.createElement(O0,xi({},e,{ref:t,sideCar:Yre}))});qg.classNames=O0.classNames;var g1=["Enter"," "],Xre=["ArrowDown","PageUp","Home"],u5=["ArrowUp","PageDown","End"],Qre=[...Xre,...u5],Zre={ltr:[...g1,"ArrowRight"],rtl:[...g1,"ArrowLeft"]},Jre={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wg="Menu",[Lp,ene,tne]=ch(Wg),[Lu,d5]=zr(Wg,[tne,ql,jh]),T0=ql(),f5=jh(),[rne,Fu]=Lu(Wg),[nne,Hg]=Lu(Wg),h5=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=T0(t),[c,u]=x.useState(null),d=x.useRef(!1),f=Ur(i),h=Hl(a);return x.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),s.jsx(x0,{...l,children:s.jsx(rne,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:s.jsx(nne,{scope:t,onClose:x.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:n})})})};h5.displayName=Wg;var sne="MenuAnchor",Lk=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=T0(r);return s.jsx(Lg,{...a,...n,ref:t})});Lk.displayName=sne;var Fk="MenuPortal",[ane,m5]=Lu(Fk,{forceMount:void 0}),p5=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=Fu(Fk,t);return s.jsx(ane,{scope:t,forceMount:r,children:s.jsx(en,{present:r||i.open,children:s.jsx(uh,{asChild:!0,container:a,children:n})})})};p5.displayName=Fk;var ya="MenuContent",[ine,Uk]=Lu(ya),g5=x.forwardRef((e,t)=>{const r=m5(ya,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Fu(ya,e.__scopeMenu),o=Hg(ya,e.__scopeMenu);return s.jsx(Lp.Provider,{scope:e.__scopeMenu,children:s.jsx(en,{present:n||i.open,children:s.jsx(Lp.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(one,{...a,ref:t}):s.jsx(lne,{...a,ref:t})})})})}),one=x.forwardRef((e,t)=>{const r=Fu(ya,e.__scopeMenu),n=x.useRef(null),a=We(t,n);return x.useEffect(()=>{const i=n.current;if(i)return A0(i)},[]),s.jsx(Bk,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:fe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),lne=x.forwardRef((e,t)=>{const r=Fu(ya,e.__scopeMenu);return s.jsx(Bk,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),cne=Dl("MenuContent.ScrollLock"),Bk=x.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...p}=e,v=Fu(ya,r),b=Hg(ya,r),y=T0(r),w=f5(r),_=ene(r),[j,N]=x.useState(null),S=x.useRef(null),k=We(t,S,v.onContentChange),C=x.useRef(0),P=x.useRef(""),A=x.useRef(0),E=x.useRef(null),R=x.useRef("right"),$=x.useRef(0),B=g?qg:x.Fragment,F=g?{as:cne,allowPinchZoom:!0}:void 0,L=T=>{var ue,ze;const U=P.current+T,X=_().filter(ie=>!ie.disabled),H=document.activeElement,ae=(ue=X.find(ie=>ie.ref.current===H))==null?void 0:ue.textValue,he=X.map(ie=>ie.textValue),Pe=wne(he,U,ae),Ae=(ze=X.find(ie=>ie.textValue===Pe))==null?void 0:ze.ref.current;(function ie(be){P.current=be,window.clearTimeout(C.current),be!==""&&(C.current=window.setTimeout(()=>ie(""),1e3))})(U),Ae&&setTimeout(()=>Ae.focus())};x.useEffect(()=>()=>window.clearTimeout(C.current),[]),P0();const D=x.useCallback(T=>{var X,H;return R.current===((X=E.current)==null?void 0:X.side)&&_ne(T,(H=E.current)==null?void 0:H.area)},[]);return s.jsx(ine,{scope:r,searchRef:P,onItemEnter:x.useCallback(T=>{D(T)&&T.preventDefault()},[D]),onItemLeave:x.useCallback(T=>{var U;D(T)||((U=S.current)==null||U.focus(),N(null))},[D]),onTriggerLeave:x.useCallback(T=>{D(T)&&T.preventDefault()},[D]),pointerGraceTimerRef:A,onPointerGraceIntentChange:x.useCallback(T=>{E.current=T},[]),children:s.jsx(B,{...F,children:s.jsx(zg,{asChild:!0,trapped:a,onMountAutoFocus:fe(i,T=>{var U;T.preventDefault(),(U=S.current)==null||U.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:s.jsx($k,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:N,onEntryFocus:fe(c,T=>{b.isUsingKeyboardRef.current||T.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(b0,{role:"menu","aria-orientation":"vertical","data-state":T5(v.open),"data-radix-menu-content":"",dir:b.dir,...y,...p,ref:k,style:{outline:"none",...p.style},onKeyDown:fe(p.onKeyDown,T=>{const X=T.target.closest("[data-radix-menu-content]")===T.currentTarget,H=T.ctrlKey||T.altKey||T.metaKey,ae=T.key.length===1;X&&(T.key==="Tab"&&T.preventDefault(),!H&&ae&&L(T.key));const he=S.current;if(T.target!==he||!Qre.includes(T.key))return;T.preventDefault();const Ae=_().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);u5.includes(T.key)&&Ae.reverse(),xne(Ae)}),onBlur:fe(e.onBlur,T=>{T.currentTarget.contains(T.target)||(window.clearTimeout(C.current),P.current="")}),onPointerMove:fe(e.onPointerMove,Fp(T=>{const U=T.target,X=$.current!==T.clientX;if(T.currentTarget.contains(U)&&X){const H=T.clientX>$.current?"right":"left";R.current=H,$.current=T.clientX}}))})})})})})})});g5.displayName=ya;var une="MenuGroup",zk=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ne.div,{role:"group",...n,ref:t})});zk.displayName=une;var dne="MenuLabel",v5=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ne.div,{...n,ref:t})});v5.displayName=dne;var Sx="MenuItem",AO="menu.itemSelect",D0=x.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=x.useRef(null),o=Hg(Sx,e.__scopeMenu),l=Uk(Sx,e.__scopeMenu),c=We(t,i),u=x.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const h=new CustomEvent(AO,{bubbles:!0,cancelable:!0});f.addEventListener(AO,m=>n==null?void 0:n(m),{once:!0}),ok(f,h),h.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(y5,{...a,ref:c,disabled:r,onClick:fe(e.onClick,d),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),u.current=!0},onPointerUp:fe(e.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:fe(e.onKeyDown,f=>{const h=l.searchRef.current!=="";r||h&&f.key===" "||g1.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});D0.displayName=Sx;var y5=x.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=Uk(Sx,r),l=f5(r),c=x.useRef(null),u=We(t,c),[d,f]=x.useState(!1),[h,m]=x.useState("");return x.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[i.children]),s.jsx(Lp.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:s.jsx(Ik,{asChild:!0,...l,focusable:!n,children:s.jsx(Ne.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:fe(e.onPointerMove,Fp(g=>{n?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:fe(e.onPointerLeave,Fp(g=>o.onItemLeave(g))),onFocus:fe(e.onFocus,()=>f(!0)),onBlur:fe(e.onBlur,()=>f(!1))})})})}),fne="MenuCheckboxItem",x5=x.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(N5,{scope:e.__scopeMenu,checked:r,children:s.jsx(D0,{role:"menuitemcheckbox","aria-checked":Cx(r)?"mixed":r,...a,ref:t,"data-state":qk(r),onSelect:fe(a.onSelect,()=>n==null?void 0:n(Cx(r)?!0:!r),{checkForDefaultPrevented:!1})})})});x5.displayName=fne;var b5="MenuRadioGroup",[hne,mne]=Lu(b5,{value:void 0,onValueChange:()=>{}}),w5=x.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=Ur(n);return s.jsx(hne,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(zk,{...a,ref:t})})});w5.displayName=b5;var j5="MenuRadioItem",_5=x.forwardRef((e,t)=>{const{value:r,...n}=e,a=mne(j5,e.__scopeMenu),i=r===a.value;return s.jsx(N5,{scope:e.__scopeMenu,checked:i,children:s.jsx(D0,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":qk(i),onSelect:fe(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});_5.displayName=j5;var Vk="MenuItemIndicator",[N5,pne]=Lu(Vk,{checked:!1}),S5=x.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=pne(Vk,r);return s.jsx(en,{present:n||Cx(i.checked)||i.checked===!0,children:s.jsx(Ne.span,{...a,ref:t,"data-state":qk(i.checked)})})});S5.displayName=Vk;var gne="MenuSeparator",C5=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Ne.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});C5.displayName=gne;var vne="MenuArrow",k5=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=T0(r);return s.jsx(w0,{...a,...n,ref:t})});k5.displayName=vne;var yne="MenuSub",[i3e,E5]=Lu(yne),Pm="MenuSubTrigger",P5=x.forwardRef((e,t)=>{const r=Fu(Pm,e.__scopeMenu),n=Hg(Pm,e.__scopeMenu),a=E5(Pm,e.__scopeMenu),i=Uk(Pm,e.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>d,[d]),x.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(Lk,{asChild:!0,...u,children:s.jsx(y5,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":T5(r.open),...e,ref:c0(t,a.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:fe(e.onPointerMove,Fp(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:fe(e.onPointerLeave,Fp(f=>{var m,g;d();const h=(m=r.content)==null?void 0:m.getBoundingClientRect();if(h){const p=(g=r.content)==null?void 0:g.dataset.side,v=p==="right",b=v?-5:5,y=h[v?"left":"right"],w=h[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x:y,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:y,y:h.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:fe(e.onKeyDown,f=>{var m;const h=i.searchRef.current!=="";e.disabled||h&&f.key===" "||Zre[n.dir].includes(f.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),f.preventDefault())})})})});P5.displayName=Pm;var A5="MenuSubContent",O5=x.forwardRef((e,t)=>{const r=m5(ya,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Fu(ya,e.__scopeMenu),o=Hg(ya,e.__scopeMenu),l=E5(A5,e.__scopeMenu),c=x.useRef(null),u=We(t,c);return s.jsx(Lp.Provider,{scope:e.__scopeMenu,children:s.jsx(en,{present:n||i.open,children:s.jsx(Lp.Slot,{scope:e.__scopeMenu,children:s.jsx(Bk,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:fe(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:fe(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:fe(e.onKeyDown,d=>{var m;const f=d.currentTarget.contains(d.target),h=Jre[o.dir].includes(d.key);f&&h&&(i.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});O5.displayName=A5;function T5(e){return e?"open":"closed"}function Cx(e){return e==="indeterminate"}function qk(e){return Cx(e)?"indeterminate":e?"checked":"unchecked"}function xne(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function bne(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function wne(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=bne(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function jne(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function _ne(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return jne(r,t)}function Fp(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Nne=h5,Sne=Lk,Cne=p5,kne=g5,Ene=zk,Pne=v5,Ane=D0,One=x5,Tne=w5,Dne=_5,Rne=S5,Mne=C5,$ne=k5,Ine=P5,Lne=O5,R0="DropdownMenu",[Fne,o3e]=zr(R0,[d5]),ls=d5(),[Une,D5]=Fne(R0),R5=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=ls(t),u=x.useRef(null),[d,f]=qn({prop:a,defaultProp:i??!1,onChange:o,caller:R0});return s.jsx(Une,{scope:t,triggerId:Ss(),triggerRef:u,contentId:Ss(),open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(h=>!h),[f]),modal:l,children:s.jsx(Nne,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};R5.displayName=R0;var M5="DropdownMenuTrigger",$5=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=D5(M5,r),o=ls(r);return s.jsx(Sne,{asChild:!0,...o,children:s.jsx(Ne.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:c0(t,i.triggerRef),onPointerDown:fe(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:fe(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});$5.displayName=M5;var Bne="DropdownMenuPortal",I5=e=>{const{__scopeDropdownMenu:t,...r}=e,n=ls(t);return s.jsx(Cne,{...n,...r})};I5.displayName=Bne;var L5="DropdownMenuContent",F5=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=D5(L5,r),i=ls(r),o=x.useRef(!1);return s.jsx(kne,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:fe(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:fe(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});F5.displayName=L5;var zne="DropdownMenuGroup",Vne=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Ene,{...a,...n,ref:t})});Vne.displayName=zne;var qne="DropdownMenuLabel",U5=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Pne,{...a,...n,ref:t})});U5.displayName=qne;var Wne="DropdownMenuItem",B5=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Ane,{...a,...n,ref:t})});B5.displayName=Wne;var Hne="DropdownMenuCheckboxItem",z5=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(One,{...a,...n,ref:t})});z5.displayName=Hne;var Kne="DropdownMenuRadioGroup",Gne=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Tne,{...a,...n,ref:t})});Gne.displayName=Kne;var Yne="DropdownMenuRadioItem",V5=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Dne,{...a,...n,ref:t})});V5.displayName=Yne;var Xne="DropdownMenuItemIndicator",q5=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Rne,{...a,...n,ref:t})});q5.displayName=Xne;var Qne="DropdownMenuSeparator",W5=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Mne,{...a,...n,ref:t})});W5.displayName=Qne;var Zne="DropdownMenuArrow",Jne=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx($ne,{...a,...n,ref:t})});Jne.displayName=Zne;var ese="DropdownMenuSubTrigger",H5=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Ine,{...a,...n,ref:t})});H5.displayName=ese;var tse="DropdownMenuSubContent",K5=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ls(r);return s.jsx(Lne,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});K5.displayName=tse;var rse=R5,nse=$5,sse=I5,G5=F5,Y5=U5,X5=B5,Q5=z5,Z5=V5,J5=q5,eU=W5,tU=H5,rU=K5;const ks=rse,Es=nse,ase=x.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(tU,{ref:a,className:Q("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(Po,{className:"ml-auto h-4 w-4"})]}));ase.displayName=tU.displayName;const ise=x.forwardRef(({className:e,...t},r)=>s.jsx(rU,{ref:r,className:Q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));ise.displayName=rU.displayName;const ss=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(sse,{children:s.jsx(G5,{ref:n,sideOffset:t,className:Q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));ss.displayName=G5.displayName;const st=x.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(X5,{ref:n,className:Q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));st.displayName=X5.displayName;const ose=x.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(Q5,{ref:a,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(J5,{children:s.jsx(fh,{className:"h-4 w-4"})})}),t]}));ose.displayName=Q5.displayName;const lse=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Z5,{ref:n,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(J5,{children:s.jsx(h0,{className:"h-2 w-2 fill-current"})})}),t]}));lse.displayName=Z5.displayName;const v1=x.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(Y5,{ref:n,className:Q("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));v1.displayName=Y5.displayName;const ma=x.forwardRef(({className:e,...t},r)=>s.jsx(eU,{ref:r,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));ma.displayName=eU.displayName;const cse=dh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ce({className:e,variant:t,...r}){return s.jsx("div",{className:Q(cse({variant:t}),e),...r})}function Kg(){const[e,t]=x.useState(null),[r,n]=x.useState(null),[a,i]=x.useState(!0);return x.useEffect(()=>{const{data:{subscription:u}}=M.auth.onAuthStateChange((d,f)=>{n(f),t((f==null?void 0:f.user)??null),i(!1)});return M.auth.getSession().then(({data:{session:d}})=>{n(d),t((d==null?void 0:d.user)??null),i(!1)}),()=>u.unsubscribe()},[]),{user:e,session:r,loading:a,signUp:async(u,d,f)=>{const h=`${window.location.origin}/`,{data:m,error:g}=await M.auth.signUp({email:u,password:d,options:{emailRedirectTo:h,data:{display_name:f}}});return{data:m,error:g}},signIn:async(u,d)=>{const{data:f,error:h}=await M.auth.signInWithPassword({email:u,password:d});return{data:f,error:h}},signOut:async()=>{const{error:u}=await M.auth.signOut();return{error:u}}}}function use(){const[e,t]=x.useState([]),[r,n]=x.useState(0),[a,i]=x.useState(!0),{toast:o}=or(),l=x.useCallback(async()=>{try{i(!0);const{data:{user:d}}=await M.auth.getUser();if(!d){i(!1);return}const{data:f,error:h}=await M.from("notifications").select("*").eq("user_id",d.id).order("created_at",{ascending:!1}).limit(50);if(h)throw h;const m=f||[];t(m),n(m.filter(g=>!g.is_read).length)}catch(d){console.error("Error fetching notifications:",d.message)}finally{i(!1)}},[]),c=async d=>{try{const{error:f}=await M.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",d);if(f)throw f;t(h=>h.map(m=>m.id===d?{...m,is_read:!0,read_at:new Date().toISOString()}:m)),n(h=>Math.max(0,h-1))}catch(f){console.error("Error marking notification as read:",f.message)}},u=async()=>{try{const{data:{user:d}}=await M.auth.getUser();if(!d)return;const{error:f}=await M.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("user_id",d.id).eq("is_read",!1);if(f)throw f;t(h=>h.map(m=>({...m,is_read:!0,read_at:new Date().toISOString()}))),n(0),o({title:"All notifications marked as read"})}catch(d){o({title:"Error marking notifications as read",description:d.message,variant:"destructive"})}};return x.useEffect(()=>{l();const d=async()=>{const{data:{user:h}}=await M.auth.getUser();return h?M.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${h.id}`},g=>{const p=g.new;t(v=>[p,...v]),n(v=>v+1),o({title:p.title,description:p.message})}).subscribe():null};let f=null;return d().then(h=>{f=h}),()=>{f&&M.removeChannel(f)}},[l,o]),{notifications:e,unreadCount:r,loading:a,fetchNotifications:l,markAsRead:c,markAllAsRead:u}}function Ke(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ps(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ln(e,t){const r=Ke(e);return isNaN(t)?Ps(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Ja(e,t){const r=Ke(e);if(isNaN(t))return Ps(e,NaN);if(!t)return r;const n=r.getDate(),a=Ps(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function dse(e){const t=Ke(e).getDay();return t===0||t===6}const Wk=6048e5,fse=864e5,nU=6e4,sU=36e5,Xv=43200,OO=1440;let hse={};function _h(){return hse}function Ti(e,t){var l,c,u,d;const r=_h(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Ke(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function yu(e){return Ti(e,{weekStartsOn:1})}function aU(e){const t=Ke(e),r=t.getFullYear(),n=Ps(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=yu(n),i=Ps(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=yu(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Nf(e){const t=Ke(e);return t.setHours(0,0,0,0),t}function Sf(e){const t=Ke(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function pa(e,t){const r=Nf(e),n=Nf(t),a=+r-Sf(r),i=+n-Sf(n);return Math.round((a-i)/fse)}function mse(e){const t=aU(e),r=Ps(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),yu(r)}function y1(e,t){const r=t*7;return ln(e,r)}function pse(e,t){return Ja(e,t*12)}function gse(e){let t;return e.forEach(function(r){const n=Ke(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function vse(e){let t;return e.forEach(r=>{const n=Ke(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function Ty(e,t){const r=Ke(e),n=Ke(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function yse(e){return Ps(e,Date.now())}function Zn(e,t){const r=Nf(e),n=Nf(t);return+r==+n}function Hk(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function x1(e){if(!Hk(e)&&typeof e!="number")return!1;const t=Ke(e);return!isNaN(Number(t))}function xse(e,t){const r=Ke(e);let n=Ke(t);if(!x1(r)||!x1(n))return NaN;const a=pa(r,n),i=a<0?-1:1,o=Math.trunc(a/7);let l=o*5;for(n=ln(n,o*7);!Zn(r,n);)l+=dse(n)?0:i,n=ln(n,i);return l===0?0:l}function Cf(e,t){const r=Ke(e),n=Ke(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function bse(e,t,r){const n=Ti(e,r),a=Ti(t,r),i=+n-Sf(n),o=+a-Sf(a);return Math.round((i-o)/Wk)}function ei(e,t){const r=Ke(e),n=Ke(t),a=TO(r,n),i=Math.abs(pa(r,n));r.setDate(r.getDate()-a*i);const o=+(TO(r,n)===-a),l=a*(i-o);return l===0?0:l}function TO(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function wse(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function jse(e,t){return+Ke(e)-+Ke(t)}function _se(e){const t=Ke(e);return t.setHours(23,59,59,999),t}function M0(e){const t=Ke(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Nse(e){const t=Ke(e);return+_se(t)==+M0(t)}function Sse(e,t){const r=Ke(e),n=Ke(t),a=Ty(r,n),i=Math.abs(Cf(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);let l=Ty(r,n)===-a;Nse(Ke(e))&&i===1&&Ty(e,n)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function Cse(e,t,r){const n=jse(e,t)/1e3;return wse(r==null?void 0:r.roundingMethod)(n)}function Cs(e){const t=Ke(e);return t.setDate(1),t.setHours(0,0,0,0),t}function iU(e){const t=Ke(e),r=Ps(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Kk(e,t){var l,c,u,d;const r=_h(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Ke(e),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function oU(e){return Kk(e,{weekStartsOn:1})}const kse={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ese=(e,t,r)=>{let n;const a=kse[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Yj(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Pse={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ase={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ose={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tse={date:Yj({formats:Pse,defaultWidth:"full"}),time:Yj({formats:Ase,defaultWidth:"full"}),dateTime:Yj({formats:Ose,defaultWidth:"full"})},Dse={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Rse=(e,t,r,n)=>Dse[e];function nm(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Mse={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$se={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ise={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Lse={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Fse={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Use={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Bse=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},zse={ordinalNumber:Bse,era:nm({values:Mse,defaultWidth:"wide"}),quarter:nm({values:$se,defaultWidth:"wide",argumentCallback:e=>e-1}),month:nm({values:Ise,defaultWidth:"wide"}),day:nm({values:Lse,defaultWidth:"wide"}),dayPeriod:nm({values:Fse,defaultWidth:"wide",formattingValues:Use,defaultFormattingWidth:"wide"})};function sm(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?qse(l,f=>f.test(o)):Vse(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function Vse(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function qse(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Wse(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const Hse=/^(\d+)(th|st|nd|rd)?/i,Kse=/\d+/i,Gse={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Yse={any:[/^b/i,/^(a|c)/i]},Xse={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qse={any:[/1/i,/2/i,/3/i,/4/i]},Zse={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Jse={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sae={ordinalNumber:Wse({matchPattern:Hse,parsePattern:Kse,valueCallback:e=>parseInt(e,10)}),era:sm({matchPatterns:Gse,defaultMatchWidth:"wide",parsePatterns:Yse,defaultParseWidth:"any"}),quarter:sm({matchPatterns:Xse,defaultMatchWidth:"wide",parsePatterns:Qse,defaultParseWidth:"any",valueCallback:e=>e+1}),month:sm({matchPatterns:Zse,defaultMatchWidth:"wide",parsePatterns:Jse,defaultParseWidth:"any"}),day:sm({matchPatterns:eae,defaultMatchWidth:"wide",parsePatterns:tae,defaultParseWidth:"any"}),dayPeriod:sm({matchPatterns:rae,defaultMatchWidth:"any",parsePatterns:nae,defaultParseWidth:"any"})},Gk={code:"en-US",formatDistance:Ese,formatLong:Tse,formatRelative:Rse,localize:zse,match:sae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aae(e){const t=Ke(e);return pa(t,iU(t))+1}function lU(e){const t=Ke(e),r=+yu(t)-+mse(t);return Math.round(r/Wk)+1}function cU(e,t){var d,f,h,m;const r=Ke(e),n=r.getFullYear(),a=_h(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Ps(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Ti(o,t),c=Ps(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=Ti(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function iae(e,t){var l,c,u,d;const r=_h(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=cU(e,t),i=Ps(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Ti(i,t)}function uU(e,t){const r=Ke(e),n=+Ti(r,t)-+iae(r,t);return Math.round(n/Wk)+1}function Zt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Bo={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Zt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Zt(r+1,2)},d(e,t){return Zt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Zt(e.getHours()%12||12,t.length)},H(e,t){return Zt(e.getHours(),t.length)},m(e,t){return Zt(e.getMinutes(),t.length)},s(e,t){return Zt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Zt(a,t.length)}},id={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},DO={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Bo.y(e,t)},Y:function(e,t,r,n){const a=cU(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Zt(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Zt(i,t.length)},R:function(e,t){const r=aU(e);return Zt(r,t.length)},u:function(e,t){const r=e.getFullYear();return Zt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Zt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Zt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Bo.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Zt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=uU(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Zt(a,t.length)},I:function(e,t,r){const n=lU(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Zt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Bo.d(e,t)},D:function(e,t,r){const n=aae(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Zt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Zt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Zt(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Zt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=id.noon:n===0?a=id.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=id.evening:n>=12?a=id.afternoon:n>=4?a=id.morning:a=id.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Bo.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Bo.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Zt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Zt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Bo.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Bo.s(e,t)},S:function(e,t){return Bo.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return MO(n);case"XXXX":case"XX":return pc(n);case"XXXXX":case"XXX":default:return pc(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return MO(n);case"xxxx":case"xx":return pc(n);case"xxxxx":case"xxx":default:return pc(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+RO(n,":");case"OOOO":default:return"GMT"+pc(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+RO(n,":");case"zzzz":default:return"GMT"+pc(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Zt(n,t.length)},T:function(e,t,r){const n=e.getTime();return Zt(n,t.length)}};function RO(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+Zt(i,2)}function MO(e,t){return e%60===0?(e>0?"-":"+")+Zt(Math.abs(e)/60,2):pc(e,t)}function pc(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Zt(Math.trunc(n/60),2),i=Zt(n%60,2);return r+a+t+i}const $O=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},dU=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},oae=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return $O(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",$O(n,t)).replace("{{time}}",dU(a,t))},lae={p:dU,P:oae},cae=/^D+$/,uae=/^Y+$/,dae=["D","DD","YY","YYYY"];function fae(e){return cae.test(e)}function hae(e){return uae.test(e)}function mae(e,t,r){const n=pae(e,t,r);if(console.warn(n),dae.includes(e))throw new RangeError(n)}function pae(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yae=/^'([^]*?)'?$/,xae=/''/g,bae=/[a-zA-Z]/;function ne(e,t,r){var d,f,h,m,g,p,v,b;const n=_h(),a=(r==null?void 0:r.locale)??n.locale??Gk,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((p=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((b=(v=n.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??0,l=Ke(e);if(!x1(l))throw new RangeError("Invalid time value");let c=t.match(vae).map(y=>{const w=y[0];if(w==="p"||w==="P"){const _=lae[w];return _(y,a.formatLong)}return y}).join("").match(gae).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const w=y[0];if(w==="'")return{isToken:!1,value:wae(y)};if(DO[w])return{isToken:!0,value:y};if(w.match(bae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const w=y.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&hae(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&fae(w))&&mae(w,t,String(e));const _=DO[w[0]];return _(l,w,a.localize,u)}).join("")}function wae(e){const t=e.match(yae);return t?t[1].replace(xae,"'"):e}function jae(e,t,r){const n=_h(),a=(r==null?void 0:r.locale)??n.locale??Gk,i=2520,o=Ty(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=Ke(t),u=Ke(e)):(c=Ke(e),u=Ke(t));const d=Cse(u,c),f=(Sf(u)-Sf(c))/1e3,h=Math.round((d-f)/60);let m;if(h<2)return r!=null&&r.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,l):d<10?a.formatDistance("lessThanXSeconds",10,l):d<20?a.formatDistance("lessThanXSeconds",20,l):d<40?a.formatDistance("halfAMinute",0,l):d<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):h===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",h,l);if(h<45)return a.formatDistance("xMinutes",h,l);if(h<90)return a.formatDistance("aboutXHours",1,l);if(h<OO){const g=Math.round(h/60);return a.formatDistance("aboutXHours",g,l)}else{if(h<i)return a.formatDistance("xDays",1,l);if(h<Xv){const g=Math.round(h/OO);return a.formatDistance("xDays",g,l)}else if(h<Xv*2)return m=Math.round(h/Xv),a.formatDistance("aboutXMonths",m,l)}if(m=Sse(u,c),m<12){const g=Math.round(h/Xv);return a.formatDistance("xMonths",g,l)}else{const g=m%12,p=Math.trunc(m/12);return g<3?a.formatDistance("aboutXYears",p,l):g<9?a.formatDistance("overXYears",p,l):a.formatDistance("almostXYears",p+1,l)}}function fU(e,t){return jae(e,yse(e),t)}function _ae(e){const t=Ke(e),r=t.getFullYear(),n=t.getMonth(),a=Ps(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function Nae(e){return Math.trunc(+Ke(e)/1e3)}function Sae(e){const t=Ke(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function Cae(e,t){return bse(Sae(e),Cs(e),t)+1}function b1(e,t){const r=Ke(e),n=Ke(t);return r.getTime()>n.getTime()}function hU(e,t){const r=Ke(e),n=Ke(t);return+r<+n}function Km(e){return+Ke(e)<Date.now()}function Yk(e,t){const r=Ke(e),n=Ke(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function kae(e,t){const r=Ke(e),n=Ke(t);return r.getFullYear()===n.getFullYear()}function Xj(e,t){return ln(e,-t)}function Hr(e,t){const n=Oae(e);let a;if(n.date){const c=Tae(n.date,2);a=Dae(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,l;if(n.time&&(o=Rae(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=Mae(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(i+o+l)}const Qv={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Eae=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Pae=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Aae=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Oae(e){const t={},r=e.split(Qv.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Qv.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Qv.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=Qv.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function Tae(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function Dae(e,t){if(t===null)return new Date(NaN);const r=e.match(Eae);if(!r)return new Date(NaN);const n=!!r[4],a=am(r[1]),i=am(r[2])-1,o=am(r[3]),l=am(r[4]),c=am(r[5])-1;if(n)return Uae(t,l,c)?$ae(t,l,c):new Date(NaN);{const u=new Date(0);return!Lae(t,i,o)||!Fae(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}}function am(e){return e?parseInt(e):1}function Rae(e){const t=e.match(Pae);if(!t)return NaN;const r=Qj(t[1]),n=Qj(t[2]),a=Qj(t[3]);return Bae(r,n,a)?r*sU+n*nU+a*1e3:NaN}function Qj(e){return e&&parseFloat(e.replace(",","."))||0}function Mae(e){if(e==="Z")return 0;const t=e.match(Aae);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return zae(n,a)?r*(n*sU+a*nU):NaN}function $ae(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const Iae=[31,null,31,30,31,30,31,31,30,31,30,31];function mU(e){return e%400===0||e%4===0&&e%100!==0}function Lae(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Iae[t]||(mU(e)?29:28))}function Fae(e,t){return t>=1&&t<=(mU(e)?366:365)}function Uae(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Bae(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function zae(e,t){return t>=0&&t<=59}function Zj(e,t){const r=Ke(e),n=r.getFullYear(),a=r.getDate(),i=Ps(e,0);i.setFullYear(n,t,15),i.setHours(0,0,0,0);const o=_ae(i);return r.setMonth(t,Math.min(a,o)),r}function IO(e,t){const r=Ke(e);return isNaN(+r)?Ps(e,NaN):(r.setFullYear(t),r)}function Vae({onMenuClick:e}){var f;const t=oi(),{user:r,signOut:n}=Kg(),{notifications:a,unreadCount:i,markAsRead:o,markAllAsRead:l}=use(),c=async()=>{const{error:h}=await n();if(h){oe({title:"Error",description:"Failed to log out. Please try again.",variant:"destructive"});return}oe({title:"Logged out",description:"You have been successfully logged out."}),t("/auth")},u=((f=r==null?void 0:r.user_metadata)==null?void 0:f.display_name)||(r==null?void 0:r.email)||"User",d=u.split(" ").map(h=>h[0]).join("").toUpperCase().slice(0,2);return s.jsx("header",{className:"sticky top-0 z-30 h-16 border-b border-border bg-card/80 backdrop-blur-sm",children:s.jsxs("div",{className:"flex items-center justify-between h-full px-4 md:px-6",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.jsx(I,{variant:"ghost",size:"icon",className:"md:hidden",onClick:e,children:s.jsx(sF,{className:"h-5 w-5"})}),s.jsxs("div",{className:"relative hidden sm:block max-w-md flex-1",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{type:"search",placeholder:"Search employees, documents...",className:"pl-10 bg-muted/50 border-0 focus-visible:ring-1 focus-visible:ring-primary"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsxs(I,{variant:"ghost",size:"icon",className:"relative",children:[s.jsx(YL,{className:"h-5 w-5"}),i>0&&s.jsx(ce,{className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs bg-destructive border-0",children:i>9?"9+":i})]})}),s.jsxs(ss,{align:"end",className:"w-80 max-h-96 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between px-2",children:[s.jsx(v1,{children:"Notifications"}),i>0&&s.jsxs(I,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:h=>{h.preventDefault(),l()},children:[s.jsx(tG,{className:"h-3 w-3 mr-1"}),"Mark all read"]})]}),s.jsx(ma,{}),a.length===0?s.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No notifications yet"}):a.slice(0,10).map(h=>s.jsxs(st,{className:`flex flex-col items-start gap-1 cursor-pointer ${h.is_read?"":"bg-muted/50"}`,onClick:()=>{h.is_read||o(h.id),h.link&&t(h.link)},children:[s.jsxs("div",{className:"flex items-start justify-between w-full gap-2",children:[s.jsx("span",{className:"font-medium text-sm",children:h.title}),!h.is_read&&s.jsx("span",{className:"h-2 w-2 rounded-full bg-primary flex-shrink-0 mt-1.5"})]}),s.jsx("span",{className:"text-xs text-muted-foreground line-clamp-2",children:h.message}),s.jsx("span",{className:"text-xs text-muted-foreground/70",children:fU(new Date(h.created_at),{addSuffix:!0})})]},h.id)),a.length>10&&s.jsxs(s.Fragment,{children:[s.jsx(ma,{}),s.jsx(st,{className:"text-center justify-center text-primary cursor-pointer",children:"View all notifications"})]})]})]}),s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsx(I,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:s.jsxs(Pr,{className:"h-9 w-9",children:[s.jsx(Bg,{src:"/avatars/admin.jpg",alt:u}),s.jsx(Ar,{className:"bg-primary text-primary-foreground text-sm",children:d})]})})}),s.jsxs(ss,{align:"end",className:"w-56",children:[s.jsx(v1,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:u}),s.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:(r==null?void 0:r.email)||"No email"})]})}),s.jsx(ma,{}),s.jsx(st,{children:"My Profile"}),s.jsx(st,{children:"Account Settings"}),s.jsx(ma,{}),s.jsx(st,{className:"text-destructive",onClick:c,children:"Log out"})]})]})]})]})})}function pU({children:e}){const[t,r]=x.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"hidden md:block",children:s.jsx(yO,{})}),t&&s.jsx("div",{className:"fixed inset-0 z-40 bg-foreground/20 backdrop-blur-sm md:hidden",onClick:()=>r(!1),children:s.jsx("div",{onClick:n=>n.stopPropagation(),children:s.jsx(yO,{})})}),s.jsxs("div",{className:Q("md:ml-64 min-h-screen flex flex-col transition-all duration-300"),children:[s.jsx(Vae,{onMenuClick:()=>r(!t)}),s.jsx("main",{className:"flex-1 p-4 md:p-6",children:e})]})]})}function qae({children:e}){const{user:t,loading:r}=Kg(),n=oi();return x.useEffect(()=>{!r&&!t&&n("/auth")},[t,r,n]),r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):t?s.jsx(s.Fragment,{children:e}):null}const Wae={default:"bg-primary/10 text-primary",success:"bg-success/10 text-success",warning:"bg-warning/10 text-warning",danger:"bg-destructive/10 text-destructive",info:"bg-info/10 text-info"};function Lt({title:e,value:t,description:r,icon:n,trend:a,variant:i="default",className:o}){return s.jsx("div",{className:Q("metric-card bg-card rounded-xl border border-border p-5 card-interactive",o),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("h3",{className:"text-3xl font-bold tracking-tight",children:t}),a&&s.jsxs("span",{className:Q("text-xs font-medium",a.positive?"text-success":"text-destructive"),children:[a.positive?"+":"",a.value,"%"]})]}),r&&s.jsx("p",{className:"text-xs text-muted-foreground",children:r})]}),s.jsx("div",{className:Q("p-3 rounded-lg",Wae[i]),children:s.jsx(n,{className:"h-5 w-5"})})]})})}const K=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Q("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));K.displayName="Card";const de=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Q("flex flex-col space-y-1.5 p-6",e),...t}));de.displayName="CardHeader";const me=x.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:Q("text-2xl font-semibold leading-none tracking-tight",e),...t}));me.displayName="CardTitle";const Be=x.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:Q("text-sm text-muted-foreground",e),...t}));Be.displayName="CardDescription";const Y=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Q("p-6 pt-0",e),...t}));Y.displayName="CardContent";const Hae=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Q("flex items-center p-6 pt-0",e),...t}));Hae.displayName="CardFooter";class Kae{async getCurrentUser(){const{data:{user:t}}=await M.auth.getUser();if(!t)return null;const{data:r}=await M.from("profiles").select("display_name").eq("user_id",t.id).maybeSingle();return{id:t.id,email:t.email,name:(r==null?void 0:r.display_name)||t.email}}async log(t){try{const r=await this.getCurrentUser(),n={action:t.action,entity_type:t.entityType,entity_id:t.entityId,organisation_id:t.organisationId||null,user_id:(r==null?void 0:r.id)||null,user_email:(r==null?void 0:r.email)||null,user_name:(r==null?void 0:r.name)||null,old_values:t.beforeState?JSON.parse(JSON.stringify(t.beforeState)):null,new_values:t.afterState?JSON.parse(JSON.stringify(t.afterState)):null},{error:a}=await M.from("audit_logs").insert(n);return a?(console.error("[AuditService] Failed to write audit log:",a),!1):!0}catch(r){return console.error("[AuditService] Unexpected error writing audit log:",r),!1}}async logEmployeeAction(t,r,n,a,i){return this.log({action:`employee.${t}`,entityType:"employee",entityId:r,organisationId:n,beforeState:a,afterState:i})}async logCertificationAction(t,r,n,a,i){return this.log({action:`certification.${t}`,entityType:"certification",entityId:r,organisationId:n,beforeState:a,afterState:i})}async logTimesheetAction(t,r,n,a,i){return this.log({action:`timesheet.${t}`,entityType:"timesheet",entityId:r,organisationId:n,beforeState:a,afterState:i})}async logLeaveAction(t,r,n,a,i){return this.log({action:`leave.${t}`,entityType:"leave_request",entityId:r,organisationId:n,beforeState:a,afterState:i})}}const Nr=new Kae,Zv="hrms_employees";function Kl(e){const t=ii(),[r,n]=x.useState("idle"),{data:a}=sr({queryKey:["default-organisation"],queryFn:async()=>{const{data:y,error:w}=await M.from("organisations").select("id").limit(1).maybeSingle();if(w)throw w;return y},enabled:!e}),i=a==null?void 0:a.id,{data:o=[],isLoading:l,error:c,refetch:u}=sr({queryKey:["employees",i],queryFn:async()=>{if(!i)return[];const{data:y,error:w}=await M.from("employees").select("*").eq("organisation_id",i).order("last_name",{ascending:!0});if(w)throw console.error("[useSupabaseEmployees] Failed to fetch employees:",w),w;return y||[]},enabled:!!i}),{data:d=[]}=sr({queryKey:["employee-certifications",i],queryFn:async()=>{if(!i)return[];const{data:y,error:w}=await M.from("employee_certifications").select("*").eq("organisation_id",i).order("expiry_date",{ascending:!0});if(w)throw console.error("[useSupabaseEmployees] Failed to fetch certifications:",w),w;return y||[]},enabled:!!i}),f=Wt({mutationFn:async y=>{const{data:w,error:_}=await M.from("employees").insert(y).select().single();if(_)throw _;return w},onSuccess:async y=>{t.invalidateQueries({queryKey:["employees",i]}),await Nr.logEmployeeAction("create",y.id,i,void 0,y),oe({title:"Employee Added",description:`${y.first_name} ${y.last_name} has been added to the system.`})},onError:y=>{console.error("[useSupabaseEmployees] Create failed:",y),oe({title:"Error",description:"Failed to add employee. Please try again.",variant:"destructive"})}}),h=Wt({mutationFn:async({id:y,updates:w})=>{const{data:_}=await M.from("employees").select("*").eq("id",y).single(),{data:j,error:N}=await M.from("employees").update(w).eq("id",y).select().single();if(N)throw N;return{employee:j,beforeState:_}},onSuccess:async({employee:y,beforeState:w})=>{t.invalidateQueries({queryKey:["employees",i]}),await Nr.logEmployeeAction("update",y.id,i,w,y),oe({title:"Employee Updated",description:`${y.first_name} ${y.last_name}'s profile has been updated.`})},onError:y=>{console.error("[useSupabaseEmployees] Update failed:",y),oe({title:"Error",description:"Failed to update employee. Please try again.",variant:"destructive"})}}),m=Wt({mutationFn:async({id:y,status:w})=>{const{data:_}=await M.from("employees").select("*").eq("id",y).single(),{data:j,error:N}=await M.from("employees").update({status:w}).eq("id",y).select().single();if(N)throw N;return{employee:j,beforeState:_}},onSuccess:async({employee:y,beforeState:w})=>{t.invalidateQueries({queryKey:["employees",i]}),await Nr.logEmployeeAction("status_change",y.id,i,{status:w==null?void 0:w.status},{status:y.status});const _=y.status==="inactive"?"deactivated":"reactivated";oe({title:`Employee ${_.charAt(0).toUpperCase()+_.slice(1)}`,description:`${y.first_name} ${y.last_name} has been ${_}.`})},onError:y=>{console.error("[useSupabaseEmployees] Status change failed:",y),oe({title:"Error",description:"Failed to change employee status. Please try again.",variant:"destructive"})}}),g=Wt({mutationFn:async y=>{const{data:w,error:_}=await M.from("employee_certifications").insert(y).select().single();if(_)throw _;return w},onSuccess:async y=>{t.invalidateQueries({queryKey:["employee-certifications",i]}),await Nr.logCertificationAction("create",y.id,i,void 0,y),oe({title:"Certification Added",description:`${y.name} has been added.`})},onError:y=>{console.error("[useSupabaseEmployees] Add certification failed:",y),oe({title:"Error",description:"Failed to add certification. Please try again.",variant:"destructive"})}}),p=x.useCallback(async()=>{if(i)try{const y=localStorage.getItem(Zv);if(!y){n("complete");return}const w=JSON.parse(y);if(!Array.isArray(w)||w.length===0){n("complete"),localStorage.removeItem(Zv);return}const{count:_}=await M.from("employees").select("*",{count:"exact",head:!0}).eq("organisation_id",i);if(_&&_>0){localStorage.removeItem(Zv),n("complete"),console.log("[Migration] Employees already in database, clearing localStorage");return}n("migrating"),console.log(`[Migration] Migrating ${w.length} employees from localStorage`);const j=w.map(S=>{var k,C,P;return{organisation_id:i,first_name:S.firstName||"Unknown",last_name:S.lastName||"Unknown",email:S.email||`unknown-${Date.now()}@temp.local`,phone:S.phone||null,avatar_url:S.avatar||null,employment_type:S.employmentType||"casual",position:S.position||null,department:S.department||null,start_date:S.startDate||null,status:S.status||"active",compliance_status:S.complianceStatus||"pending",pay_rate:S.payRate||null,award_classification_id:null,emergency_contact_name:((k=S.emergencyContact)==null?void 0:k.name)||null,emergency_contact_phone:((C=S.emergencyContact)==null?void 0:C.phone)||null,emergency_contact_relationship:((P=S.emergencyContact)==null?void 0:P.relationship)||null}}),{error:N}=await M.from("employees").insert(j);if(N){console.error("[Migration] Failed to migrate employees:",N),n("error");return}localStorage.removeItem(Zv),n("complete"),u(),oe({title:"Data Migration Complete",description:`${w.length} employees have been migrated to the database.`}),console.log("[Migration] Successfully migrated employees to Supabase")}catch(y){console.error("[Migration] Unexpected error:",y),n("error")}},[i,u]);x.useEffect(()=>{i&&r==="idle"&&p()},[i,r,p]);const v=x.useCallback(y=>d.filter(w=>w.employee_id===y),[d]),b=o.filter(y=>y.status==="active");return{employees:o,activeEmployees:b,certifications:d,getCertificationsForEmployee:v,organisationId:i,isLoading:l,error:c,migrationStatus:r,createEmployee:f.mutateAsync,updateEmployee:(y,w)=>h.mutateAsync({id:y,updates:w}),changeStatus:(y,w)=>m.mutateAsync({id:y,status:w}),addCertification:g.mutateAsync,refetch:u,isCreating:f.isPending,isUpdating:h.isPending,isChangingStatus:m.isPending}}function Gae(){const{employees:e,certifications:t,getCertificationsForEmployee:r,isLoading:n}=Kl(),a=x.useMemo(()=>e.filter(i=>i.status==="active").flatMap(i=>r(i.id).filter(l=>l.status==="expired"||l.status==="expiring").map(l=>({employeeId:i.id,employeeName:`${i.first_name} ${i.last_name}`,certification:l.name,expiryDate:l.expiry_date||"",status:l.status,daysUntilExpiry:l.expiry_date?ei(Hr(l.expiry_date),new Date):0}))).sort((i,o)=>i.status==="expired"&&o.status!=="expired"?-1:i.status!=="expired"&&o.status==="expired"?1:i.daysUntilExpiry-o.daysUntilExpiry),[e,r]);return n?s.jsxs(K,{className:"h-full",children:[s.jsx(de,{className:"flex flex-row items-center justify-between pb-2",children:s.jsx(me,{className:"text-lg font-semibold",children:"Compliance Alerts"})}),s.jsx(Y,{className:"flex items-center justify-center py-8",children:s.jsx(et,{className:"h-6 w-6 animate-spin text-muted-foreground"})})]}):s.jsxs(K,{className:"h-full",children:[s.jsxs(de,{className:"flex flex-row items-center justify-between pb-2",children:[s.jsx(me,{className:"text-lg font-semibold",children:"Compliance Alerts"}),s.jsxs(I,{variant:"ghost",size:"sm",className:"text-primary",children:["View All",s.jsx(Po,{className:"ml-1 h-4 w-4"})]})]}),s.jsx(Y,{className:"space-y-3",children:a.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(xt,{className:"h-10 w-10 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"text-sm",children:"All certifications are up to date!"})]}):a.slice(0,5).map((i,o)=>s.jsxs("div",{className:Q("flex items-start gap-3 p-3 rounded-lg border transition-colors hover:bg-muted/50",i.status==="expired"?"border-destructive/30 bg-destructive/5":"border-warning/30 bg-warning/5"),children:[s.jsx("div",{className:Q("p-2 rounded-full flex-shrink-0",i.status==="expired"?"bg-destructive/10":"bg-warning/10"),children:i.status==="expired"?s.jsx(zn,{className:"h-4 w-4 text-destructive"}):s.jsx(ir,{className:"h-4 w-4 text-warning"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:i.employeeName}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:i.certification}),s.jsx("p",{className:Q("text-xs font-medium mt-1",i.status==="expired"?"text-destructive":"text-warning"),children:i.status==="expired"?`Expired ${Math.abs(i.daysUntilExpiry)} days ago`:`Expires in ${i.daysUntilExpiry} days`})]}),s.jsx(I,{variant:"ghost",size:"sm",className:"flex-shrink-0",children:"Resolve"})]},`${i.employeeId}-${i.certification}-${o}`))})]})}const Yae={hire:mu,leave:zt,document:Ai,timesheet:xt,compliance:yt},Xae={hire:"bg-success/10 text-success",leave:"bg-info/10 text-info",document:"bg-primary/10 text-primary",timesheet:"bg-warning/10 text-warning",compliance:"bg-success/10 text-success"},Qae=[{id:"1",type:"hire",title:"New Employee Onboarded",description:"Alex Nguyen joined as Specialist Support",time:"2 hours ago",user:{name:"Alex Nguyen",initials:"AN"}},{id:"2",type:"leave",title:"Leave Request Approved",description:"Emma Thompson - Personal leave approved",time:"3 hours ago",user:{name:"Emma Thompson",initials:"ET"}},{id:"3",type:"compliance",title:"Certificate Uploaded",description:"Sarah Mitchell uploaded First Aid Certificate",time:"5 hours ago",user:{name:"Sarah Mitchell",initials:"SM"}},{id:"4",type:"timesheet",title:"Timesheet Submitted",description:"Michael Chen submitted weekly timesheet",time:"6 hours ago",user:{name:"Michael Chen",initials:"MC"}},{id:"5",type:"document",title:"Contract Signed",description:"David Williams signed employment contract",time:"1 day ago",user:{name:"David Williams",initials:"DW"}}];function Zae(){return s.jsxs(K,{className:"h-full",children:[s.jsx(de,{className:"pb-3",children:s.jsx(me,{className:"text-lg font-semibold",children:"Recent Activity"})}),s.jsx(Y,{children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-5 top-0 bottom-0 w-px bg-border"}),s.jsx("div",{className:"space-y-4",children:Qae.map(e=>{const t=Yae[e.type];return s.jsxs("div",{className:"relative flex gap-4 pl-2",children:[s.jsx("div",{className:Q("relative z-10 flex h-8 w-8 items-center justify-center rounded-full border-2 border-background",Xae[e.type]),children:s.jsx(t,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex-1 min-w-0 pb-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:e.title}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:e.description})]}),e.user&&s.jsx(Pr,{className:"h-6 w-6 flex-shrink-0",children:s.jsx(Ar,{className:"text-[10px] bg-muted",children:e.user.initials})})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1.5",children:e.time})]})]},e.id)})})]})})]})}const Jae={compliant:{label:"Compliant",className:"status-compliant",icon:yt},expiring:{label:"Expiring Soon",className:"status-expiring",icon:ir},expired:{label:"Expired",className:"status-expired",icon:zn},pending:{label:"Pending",className:"status-pending",icon:xt},approved:{label:"Approved",className:"status-compliant",icon:yt},rejected:{label:"Rejected",className:"status-expired",icon:zn},cancelled:{label:"Cancelled",className:"bg-muted text-muted-foreground border-muted",icon:zn},active:{label:"Active",className:"status-compliant",icon:yt},inactive:{label:"Inactive",className:"bg-muted text-muted-foreground border-muted",icon:jp},onboarding:{label:"Onboarding",className:"status-pending",icon:xt},offboarding:{label:"Offboarding",className:"status-expiring",icon:ir}};function Nh({status:e,showIcon:t=!0,size:r="md",className:n}){const a=Jae[e],i=a.icon;return s.jsxs("span",{className:Q("inline-flex items-center gap-1.5 rounded-full border font-medium",r==="sm"?"px-2 py-0.5 text-xs":"px-2.5 py-1 text-xs",a.className,n),children:[t&&s.jsx(i,{className:Q(r==="sm"?"h-3 w-3":"h-3.5 w-3.5")}),a.label]})}class eie{async getLeaveTypes(t){const{data:r,error:n}=await M.from("leave_types").select("*").eq("organisation_id",t).eq("is_active",!0).order("display_order");if(n)throw console.error("[LeaveService] Failed to fetch leave types:",n),n;return r||[]}async getEmployeeBalances(t){const{data:r,error:n}=await M.from("leave_balances").select(`
        *,
        leave_type:leave_types(*)
      `).eq("employee_id",t);if(n)throw console.error("[LeaveService] Failed to fetch employee balances:",n),n;return r||[]}async getOrganisationBalances(t){const{data:r,error:n}=await M.from("leave_balances").select(`
        *,
        leave_type:leave_types(*)
      `).eq("organisation_id",t);if(n)throw console.error("[LeaveService] Failed to fetch organisation balances:",n),n;return r||[]}async getLeaveRequests(t,r){let n=M.from("leave_requests").select(`
        *,
        employee:employees(id, first_name, last_name, email, employment_type, department),
        leave_type:leave_types(*)
      `).eq("organisation_id",t).order("created_at",{ascending:!1});r!=null&&r.status&&(n=n.eq("status",r.status)),r!=null&&r.employeeId&&(n=n.eq("employee_id",r.employeeId)),r!=null&&r.startDate&&(n=n.gte("start_date",r.startDate)),r!=null&&r.endDate&&(n=n.lte("end_date",r.endDate));const{data:a,error:i}=await n;if(i)throw console.error("[LeaveService] Failed to fetch leave requests:",i),i;return a||[]}async createLeaveRequest(t,r,n,a,i,o,l){var h;const{data:c}=await M.from("leave_types").select("name").eq("id",n).single(),u=((h=c==null?void 0:c.name)==null?void 0:h.toLowerCase().replace(/[^a-z]/g,"_"))||"other",{data:d,error:f}=await M.from("leave_requests").insert({organisation_id:t,employee_id:r,leave_type_id:n,type:u,start_date:a,end_date:i,hours:o,reason:l,status:"pending"}).select().single();if(f)throw console.error("[LeaveService] Failed to create leave request:",f),f;return await Nr.logLeaveAction("create",d.id,t,void 0,{employee_id:r,leave_type_id:n,start_date:a,end_date:i,hours:o}),d}async processLeaveDecision(t,r){const{data:n,error:a}=await M.from("leave_requests").select("*").eq("id",t.request_id).single();if(a||!n)throw new Error("Leave request not found");const i={...n},{data:{user:o}}=await M.auth.getUser(),{data:l}=await M.from("profiles").select("display_name").eq("user_id",o==null?void 0:o.id).maybeSingle(),c=new Date().toISOString();if(t.action==="approve"){if(!t.override_insufficient_balance&&n.leave_type_id){const{data:f}=await M.rpc("check_leave_balance",{_employee_id:n.employee_id,_leave_type_id:n.leave_type_id,_hours_requested:n.hours});if(!f)throw new Error("Insufficient leave balance. Use override to approve anyway.")}const{data:u,error:d}=await M.from("leave_requests").update({status:"approved",approved_by:(l==null?void 0:l.display_name)||(o==null?void 0:o.email),approved_at:c,decided_by_user_id:o==null?void 0:o.id,decided_at:c,balance_deducted:!!n.leave_type_id,override_reason:t.override_insufficient_balance?t.reason:null}).eq("id",t.request_id).select().single();if(d)throw d;return n.leave_type_id&&await M.rpc("deduct_leave_balance",{_employee_id:n.employee_id,_leave_type_id:n.leave_type_id,_hours:n.hours}),await Nr.logLeaveAction("approve",t.request_id,r,i,{status:"approved",approved_by:l==null?void 0:l.display_name,override_reason:t.override_insufficient_balance?t.reason:null}),u}else if(t.action==="reject"){const{data:u,error:d}=await M.from("leave_requests").update({status:"rejected",decided_by_user_id:o==null?void 0:o.id,decided_at:c}).eq("id",t.request_id).select().single();if(d)throw d;return await Nr.logLeaveAction("reject",t.request_id,r,i,{status:"rejected",reason:t.reason}),u}else if(t.action==="cancel"){n.status==="approved"&&n.balance_deducted&&n.leave_type_id&&await M.rpc("restore_leave_balance",{_employee_id:n.employee_id,_leave_type_id:n.leave_type_id,_hours:n.hours});const{data:u,error:d}=await M.from("leave_requests").update({status:"cancelled",cancelled_at:c,cancellation_reason:t.reason,balance_deducted:!1}).eq("id",t.request_id).select().single();if(d)throw d;return await Nr.logLeaveAction("update",t.request_id,r,i,{status:"cancelled",cancellation_reason:t.reason}),u}throw new Error("Invalid action")}async createAdjustment(t,r){const{data:{user:n}}=await M.auth.getUser(),{data:a}=await M.from("profiles").select("display_name").eq("user_id",n==null?void 0:n.id).maybeSingle(),{data:i}=await M.from("leave_balances").select("balance_hours").eq("employee_id",t.employee_id).eq("leave_type_id",t.leave_type_id).maybeSingle(),o={balance_hours:(i==null?void 0:i.balance_hours)||0},{data:l,error:c}=await M.from("leave_adjustments").insert({organisation_id:r,employee_id:t.employee_id,leave_type_id:t.leave_type_id,adjustment_hours:t.adjustment_hours,reason:t.reason,adjusted_by_user_id:n==null?void 0:n.id,adjusted_by_name:(a==null?void 0:a.display_name)||(n==null?void 0:n.email),adjusted_by_email:n==null?void 0:n.email}).select().single();if(c)throw console.error("[LeaveService] Failed to create adjustment:",c),c;i?await M.from("leave_balances").update({balance_hours:i.balance_hours+t.adjustment_hours}).eq("employee_id",t.employee_id).eq("leave_type_id",t.leave_type_id):await M.from("leave_balances").insert({organisation_id:r,employee_id:t.employee_id,leave_type_id:t.leave_type_id,balance_hours:t.adjustment_hours});const u={balance_hours:((i==null?void 0:i.balance_hours)||0)+t.adjustment_hours};return await Nr.log({action:"admin.override",entityType:"leave_request",entityId:l.id,organisationId:r,beforeState:o,afterState:{...u,adjustment_hours:t.adjustment_hours,reason:t.reason}}),l}async getAdjustments(t,r){let n=M.from("leave_adjustments").select(`
        *,
        leave_type:leave_types(id, name),
        employee:employees(id, first_name, last_name)
      `).eq("organisation_id",t).order("created_at",{ascending:!1});r&&(n=n.eq("employee_id",r));const{data:a,error:i}=await n;if(i)throw console.error("[LeaveService] Failed to fetch adjustments:",i),i;return a||[]}async runAccruals(t){const{data:r,error:n}=await M.rpc("run_leave_accruals",{_organisation_id:t});if(n)throw console.error("[LeaveService] Failed to run accruals:",n),n;return r}async initializeEmployeeBalances(t,r,n){const{data:a}=await M.from("leave_types").select("*").eq("organisation_id",t).eq("is_active",!0).contains("applicable_employment_types",[n]);if(!a||a.length===0)return;const i=a.map(o=>({organisation_id:t,employee_id:r,leave_type_id:o.id,balance_hours:0}));await M.from("leave_balances").upsert(i,{onConflict:"employee_id,leave_type_id"})}}const zo=new eie;function Uu(e){const t=ii(),{toast:r}=or(),{data:n}=sr({queryKey:["organisation"],queryFn:async()=>{const{data:N}=await M.from("organisations").select("id").limit(1).single();return N},enabled:!e}),a=n==null?void 0:n.id,{data:i=[],isLoading:o}=sr({queryKey:["leaveTypes",a],queryFn:()=>zo.getLeaveTypes(a),enabled:!!a}),{data:l=[],isLoading:c,refetch:u}=sr({queryKey:["leaveRequests",a],queryFn:()=>zo.getLeaveRequests(a),enabled:!!a}),{data:d=[],isLoading:f,refetch:h}=sr({queryKey:["leaveBalances",a],queryFn:()=>zo.getOrganisationBalances(a),enabled:!!a}),{data:m=[],isLoading:g}=sr({queryKey:["leaveAdjustments",a],queryFn:()=>zo.getAdjustments(a),enabled:!!a}),p=Wt({mutationFn:async N=>{if(!a)throw new Error("No organisation ID");return zo.createLeaveRequest(a,N.employeeId,N.leaveTypeId,N.startDate,N.endDate,N.hours,N.reason)},onSuccess:()=>{t.invalidateQueries({queryKey:["leaveRequests"]}),r({title:"Leave request submitted",description:"Your request is pending approval."})},onError:N=>{r({title:"Failed to submit request",description:N.message,variant:"destructive"})}}),v=Wt({mutationFn:async N=>{if(!a)throw new Error("No organisation ID");return zo.processLeaveDecision(N,a)},onSuccess:N=>{t.invalidateQueries({queryKey:["leaveRequests"]}),t.invalidateQueries({queryKey:["leaveBalances"]}),r({title:`Leave request ${{approved:"approved",rejected:"rejected",cancelled:"cancelled"}[N.status]}`,description:N.status==="approved"?"Balance has been deducted.":N.status==="cancelled"?"Balance has been restored.":void 0})},onError:N=>{r({title:"Failed to process request",description:N.message,variant:"destructive"})}}),b=Wt({mutationFn:async N=>{if(!a)throw new Error("No organisation ID");return zo.createAdjustment(N,a)},onSuccess:()=>{t.invalidateQueries({queryKey:["leaveBalances"]}),t.invalidateQueries({queryKey:["leaveAdjustments"]}),r({title:"Balance adjusted",description:"The adjustment has been recorded."})},onError:N=>{r({title:"Failed to adjust balance",description:N.message,variant:"destructive"})}}),y=Wt({mutationFn:async()=>{if(!a)throw new Error("No organisation ID");return zo.runAccruals(a)},onSuccess:N=>{t.invalidateQueries({queryKey:["leaveBalances"]}),r({title:"Accruals processed",description:`${N} balance(s) updated.`})},onError:N=>{r({title:"Accrual failed",description:N.message,variant:"destructive"})}}),w={pending:l.filter(N=>N.status==="pending").length,approved:l.filter(N=>N.status==="approved").length,rejected:l.filter(N=>N.status==="rejected").length,cancelled:l.filter(N=>N.status==="cancelled").length};return{leaveTypes:i,leaveRequests:l,leaveBalances:d,adjustments:m,stats:w,organisationId:a,isLoading:o||c||f,leaveTypesLoading:o,requestsLoading:c,balancesLoading:f,adjustmentsLoading:g,getEmployeeBalances:N=>d.filter(S=>S.employee_id===N),getRequestsByStatus:N=>N==="all"?l:l.filter(S=>S.status===N),createRequest:p.mutate,processDecision:v.mutate,createAdjustment:b.mutate,runAccruals:y.mutate,isCreatingRequest:p.isPending,isProcessingDecision:v.isPending,isCreatingAdjustment:b.isPending,isRunningAccruals:y.isPending,refetchRequests:u,refetchBalances:h}}function Ot({className:e,...t}){return s.jsx("div",{className:Q("animate-pulse rounded-md bg-muted",e),...t})}function tie(){const e=oi(),{leaveRequests:t,processDecision:r,isProcessingDecision:n,isLoading:a}=Uu(),i=t.filter(c=>c.status==="pending").slice(0,5),o=c=>{r({request_id:c,action:"approve"})},l=c=>{r({request_id:c,action:"reject"})};return a?s.jsxs(K,{className:"h-full",children:[s.jsx(de,{className:"flex flex-row items-center justify-between pb-2",children:s.jsx(me,{className:"text-lg font-semibold",children:"Leave Requests"})}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-4",children:[1,2,3].map(c=>s.jsx(Ot,{className:"h-20 w-full"},c))})})]}):s.jsxs(K,{className:"h-full",children:[s.jsxs(de,{className:"flex flex-row items-center justify-between pb-2",children:[s.jsx(me,{className:"text-lg font-semibold",children:"Leave Requests"}),s.jsxs(I,{variant:"ghost",size:"sm",className:"text-primary",onClick:()=>e("/leave"),children:["View All",s.jsx(Po,{className:"ml-1 h-4 w-4"})]})]}),s.jsx(Y,{children:i.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(zt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No pending leave requests"})]}):s.jsx("div",{className:"space-y-4",children:i.map(c=>{var d;const u=c.employee;return u?s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border bg-card hover:bg-muted/30 transition-colors",children:[s.jsx(Pr,{className:"h-10 w-10 flex-shrink-0",children:s.jsxs(Ar,{className:"bg-primary/10 text-primary text-sm",children:[u.first_name[0],u.last_name[0]]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("p",{className:"text-sm font-medium",children:[u.first_name," ",u.last_name]}),s.jsx(Nh,{status:c.status,size:"sm",showIcon:!1})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:((d=c.leave_type)==null?void 0:d.name)||c.type}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[ne(Hr(c.start_date),"MMM d")," -"," ",ne(Hr(c.end_date),"MMM d, yyyy"),s.jsx("span",{className:"mx-1.5",children:""}),c.hours," hours"]}),c.reason&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1 italic",children:['"',c.reason,'"']})]}),s.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[s.jsx(I,{size:"icon",variant:"ghost",className:"h-8 w-8 text-success hover:text-success hover:bg-success/10",onClick:()=>o(c.id),disabled:n,children:s.jsx(fh,{className:"h-4 w-4"})}),s.jsx(I,{size:"icon",variant:"ghost",className:"h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>l(c.id),disabled:n,children:s.jsx(Bn,{className:"h-4 w-4"})})]})]},c.id):null})})})]})}const rie=[{label:"Add Employee",icon:mu,description:"Onboard a new team member",variant:"primary",path:"/employees"},{label:"Submit Timesheet",icon:xt,description:"Log hours for approval",variant:"secondary",path:"/payroll"},{label:"Request Leave",icon:zt,description:"Submit a leave request",variant:"secondary",path:"/leave"},{label:"Upload Document",icon:Ml,description:"Add compliance documents",variant:"secondary",path:"/documents"},{label:"Send Invite",icon:bo,description:"Invite staff to portal",variant:"secondary",path:"/settings"},{label:"Generate Report",icon:ut,description:"Create HR reports",variant:"secondary",path:"/audit-exports"}];function nie(){const e=oi(),t=r=>{e(r)};return s.jsxs(K,{children:[s.jsx(de,{className:"pb-3",children:s.jsx(me,{className:"text-lg font-semibold",children:"Quick Actions"})}),s.jsx(Y,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:rie.map(r=>s.jsxs(I,{variant:r.variant==="primary"?"default":"outline",className:Q("h-auto flex-col gap-2 py-4 px-3",r.variant==="primary"?"gradient-primary hover:opacity-90":"hover:bg-muted/50"),onClick:()=>t(r.path),children:[s.jsx(r.icon,{className:"h-5 w-5"}),s.jsx("span",{className:"text-xs font-medium",children:r.label})]},r.label))})})]})}const yn=e=>{const t=new Date;return t.setDate(t.getDate()+e),t.toISOString().split("T")[0]},Mr=e=>{const t=new Date;return t.setDate(t.getDate()-e),t.toISOString().split("T")[0]},Am=[{id:"1",firstName:"Sarah",lastName:"Mitchell",email:"sarah.mitchell@socialplus.com.au",phone:"0412 345 678",employmentType:"part_time",position:"Senior Support Worker",department:"Community Support",startDate:"2022-03-15",status:"active",complianceStatus:"compliant",payRate:42.5,awardClassification:"Level 3.1",emergencyContact:{name:"James Mitchell",phone:"0423 456 789",relationship:"Spouse"},documents:[],certifications:[{id:"c1",name:"NDIS Worker Screening",type:"ndis_screening",issueDate:Mr(180),expiryDate:yn(185),status:"compliant"},{id:"c2",name:"First Aid Certificate",type:"first_aid",issueDate:Mr(365),expiryDate:yn(730),status:"compliant"},{id:"c3",name:"Police Check",type:"police_check",issueDate:Mr(200),expiryDate:yn(165),status:"compliant"}]},{id:"2",firstName:"Michael",lastName:"Chen",email:"michael.chen@socialplus.com.au",phone:"0423 456 789",employmentType:"casual",position:"Support Worker",department:"Disability Services",startDate:"2023-08-01",status:"active",complianceStatus:"expiring",payRate:38.75,awardClassification:"Level 2.2",documents:[],certifications:[{id:"c4",name:"NDIS Worker Screening",type:"ndis_screening",issueDate:Mr(350),expiryDate:yn(15),status:"expiring"},{id:"c5",name:"CPR Certificate",type:"cpr",issueDate:Mr(300),expiryDate:yn(65),status:"compliant"}]},{id:"3",firstName:"Emma",lastName:"Thompson",email:"emma.thompson@socialplus.com.au",phone:"0434 567 890",employmentType:"full_time",position:"Team Coordinator",department:"Operations",startDate:"2021-01-10",status:"active",complianceStatus:"compliant",payRate:55,awardClassification:"Level 4.1",documents:[],certifications:[{id:"c6",name:"NDIS Worker Screening",type:"ndis_screening",issueDate:Mr(100),expiryDate:yn(265),status:"compliant"},{id:"c7",name:"First Aid Certificate",type:"first_aid",issueDate:Mr(200),expiryDate:yn(530),status:"compliant"},{id:"c8",name:"Mental Health First Aid",type:"training",issueDate:Mr(50),expiryDate:yn(680),status:"compliant"}]},{id:"4",firstName:"David",lastName:"Williams",email:"david.williams@socialplus.com.au",phone:"0445 678 901",employmentType:"casual",position:"Support Worker",department:"Community Support",startDate:"2024-01-15",status:"active",complianceStatus:"expired",payRate:36.5,awardClassification:"Level 1.3",documents:[],certifications:[{id:"c9",name:"Police Check",type:"police_check",issueDate:Mr(400),expiryDate:Mr(35),status:"expired"},{id:"c10",name:"NDIS Worker Screening",type:"ndis_screening",issueDate:Mr(90),expiryDate:yn(275),status:"compliant"}]},{id:"5",firstName:"Jessica",lastName:"Brown",email:"jessica.brown@socialplus.com.au",phone:"0456 789 012",employmentType:"part_time",position:"Senior Support Worker",department:"Disability Services",startDate:"2022-06-20",status:"active",complianceStatus:"compliant",payRate:44,awardClassification:"Level 3.2",documents:[],certifications:[{id:"c11",name:"NDIS Worker Screening",type:"ndis_screening",issueDate:Mr(150),expiryDate:yn(215),status:"compliant"},{id:"c12",name:"First Aid Certificate",type:"first_aid",issueDate:Mr(100),expiryDate:yn(630),status:"compliant"},{id:"c13",name:"Manual Handling",type:"training",issueDate:Mr(60),expiryDate:yn(305),status:"compliant"}]},{id:"6",firstName:"Alex",lastName:"Nguyen",email:"alex.nguyen@socialplus.com.au",phone:"0467 890 123",employmentType:"contractor",position:"Specialist Support",department:"Allied Health",startDate:"2023-11-01",status:"active",complianceStatus:"pending",payRate:65,documents:[],certifications:[{id:"c14",name:"NDIS Worker Screening",type:"ndis_screening",issueDate:"",expiryDate:"",status:"pending"}]}],sie=[{id:"l1",employeeId:"1",type:"annual",startDate:yn(14),endDate:yn(21),hours:56,reason:"Family vacation",status:"pending",createdAt:Mr(2)},{id:"l2",employeeId:"3",type:"personal",startDate:yn(3),endDate:yn(3),hours:8,reason:"Medical appointment",status:"approved",approvedBy:"HR Manager",createdAt:Mr(5)},{id:"l3",employeeId:"5",type:"annual",startDate:yn(30),endDate:yn(35),hours:40,status:"pending",createdAt:Mr(1)}];Mr(0),Mr(0),Mr(0),Mr(1),Mr(1);const im=Am.filter(e=>e.status==="active"),om={totalEmployees:im.length,activeToday:4,pendingLeaveRequests:sie.filter(e=>e.status==="pending").length,complianceAlerts:im.filter(e=>e.complianceStatus==="expired"||e.complianceStatus==="expiring").length,expiringCertifications:im.flatMap(e=>e.certifications.filter(t=>t.status==="expiring")),upcomingBirthdays:im.filter(e=>Am.indexOf(e)===0||Am.indexOf(e)===4),recentHires:im.filter(e=>Am.indexOf(e)===5||Am.indexOf(e)===3)};function aie(){return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Welcome back, Admin"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Here's what's happening at Social Plus Support Work today."})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:new Date().toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Lt,{title:"Total Employees",value:om.totalEmployees,description:"Active team members",icon:Er,trend:{value:12,positive:!0},variant:"default"}),s.jsx(Lt,{title:"Active Today",value:om.activeToday,description:"Currently on shift",icon:xt,variant:"success"}),s.jsx(Lt,{title:"Pending Leave",value:om.pendingLeaveRequests,description:"Awaiting approval",icon:zt,variant:"info"}),s.jsx(Lt,{title:"Compliance Alerts",value:om.complianceAlerts,description:"Require attention",icon:ir,variant:om.complianceAlerts>0?"warning":"success"})]}),s.jsx(nie,{}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsx(Gae,{})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx(tie,{})}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx(Zae,{})})]}),s.jsx("div",{className:"bg-card rounded-xl border border-border p-5",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-success/10",children:s.jsx(hu,{className:"h-5 w-5 text-success"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Team Compliance Overview"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"4 of 6 employees fully compliant"})]})]}),s.jsxs("div",{className:"flex-1 max-w-md",children:[s.jsx("div",{className:"compliance-bar",children:s.jsx("div",{className:"compliance-bar-fill bg-success",style:{width:"67%"}})}),s.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[s.jsx("span",{children:"67% Compliant"}),s.jsx("span",{children:"2 need attention"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Zs,{className:"h-4 w-4 text-success"}),s.jsx("span",{className:"text-success font-medium",children:"+5%"}),s.jsx("span",{className:"text-muted-foreground",children:"vs last month"})]})]})})]})}const iie=()=>{const{user:e,loading:t}=Kg(),r=oi();return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):e?s.jsx(pU,{children:s.jsx(aie,{})}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b border-border",children:s.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-primary",children:"SocialPlus HR"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(I,{variant:"ghost",onClick:()=>r("/auth"),children:"Log in"}),s.jsx(I,{onClick:()=>r("/auth"),children:"Get Started"})]})]})}),s.jsxs("section",{className:"container mx-auto px-4 py-20 text-center",children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Human Resource Management",s.jsx("br",{}),s.jsx("span",{className:"text-primary",children:"Made Simple"})]}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto mb-8",children:"Streamline your HR operations with our comprehensive HRMS solution. Manage employees, track compliance, handle contracts, and more."}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx(I,{size:"lg",onClick:()=>r("/auth"),children:"Start Free Trial"}),s.jsx(I,{size:"lg",variant:"outline",children:"Learn More"})]})]}),s.jsxs("section",{className:"container mx-auto px-4 py-20",children:[s.jsx("h3",{className:"text-2xl font-bold text-center mb-12",children:"Everything you need to manage your workforce"}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"p-6 rounded-lg border border-border bg-card",children:[s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg w-fit mb-4",children:s.jsx(Er,{className:"h-6 w-6 text-primary"})}),s.jsx("h4",{className:"font-semibold mb-2",children:"Employee Management"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Centralize employee data, track onboarding, and manage your entire workforce."})]}),s.jsxs("div",{className:"p-6 rounded-lg border border-border bg-card",children:[s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg w-fit mb-4",children:s.jsx(dn,{className:"h-6 w-6 text-primary"})}),s.jsx("h4",{className:"font-semibold mb-2",children:"Compliance Tracking"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay compliant with automated document tracking and expiry alerts."})]}),s.jsxs("div",{className:"p-6 rounded-lg border border-border bg-card",children:[s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg w-fit mb-4",children:s.jsx(ut,{className:"h-6 w-6 text-primary"})}),s.jsx("h4",{className:"font-semibold mb-2",children:"Digital Contracts"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Create, send, and sign employment contracts with e-signature support."})]}),s.jsxs("div",{className:"p-6 rounded-lg border border-border bg-card",children:[s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg w-fit mb-4",children:s.jsx(xt,{className:"h-6 w-6 text-primary"})}),s.jsx("h4",{className:"font-semibold mb-2",children:"Time & Attendance"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Track hours, manage leave requests, and process payroll seamlessly."})]})]})]}),s.jsx("section",{className:"container mx-auto px-4 py-20",children:s.jsxs("div",{className:"bg-primary rounded-2xl p-12 text-center",children:[s.jsx("h3",{className:"text-3xl font-bold text-primary-foreground mb-4",children:"Ready to get started?"}),s.jsx("p",{className:"text-primary-foreground/80 mb-8 max-w-xl mx-auto",children:"Join thousands of organizations already using SocialPlus HR to manage their workforce effectively."}),s.jsx(I,{size:"lg",variant:"secondary",onClick:()=>r("/auth"),children:"Create Your Account"})]})}),s.jsx("footer",{className:"border-t border-border py-8",children:s.jsx("div",{className:"container mx-auto px-4 text-center text-sm text-muted-foreground",children:" 2024 SocialPlus. All rights reserved."})})]})};var Bt;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Bt||(Bt={}));var LO;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(LO||(LO={}));const Ie=Bt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Go=e=>{switch(typeof e){case"undefined":return Ie.undefined;case"string":return Ie.string;case"number":return Number.isNaN(e)?Ie.nan:Ie.number;case"boolean":return Ie.boolean;case"function":return Ie.function;case"bigint":return Ie.bigint;case"symbol":return Ie.symbol;case"object":return Array.isArray(e)?Ie.array:e===null?Ie.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ie.promise:typeof Map<"u"&&e instanceof Map?Ie.map:typeof Set<"u"&&e instanceof Set?Ie.set:typeof Date<"u"&&e instanceof Date?Ie.date:Ie.object;default:return Ie.unknown}},ye=Bt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class _o extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return a(this),n}static assert(t){if(!(t instanceof _o))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Bt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}_o.create=e=>new _o(e);const w1=(e,t)=>{let r;switch(e.code){case ye.invalid_type:e.received===Ie.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case ye.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Bt.jsonStringifyReplacer)}`;break;case ye.unrecognized_keys:r=`Unrecognized key(s) in object: ${Bt.joinValues(e.keys,", ")}`;break;case ye.invalid_union:r="Invalid input";break;case ye.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Bt.joinValues(e.options)}`;break;case ye.invalid_enum_value:r=`Invalid enum value. Expected ${Bt.joinValues(e.options)}, received '${e.received}'`;break;case ye.invalid_arguments:r="Invalid function arguments";break;case ye.invalid_return_type:r="Invalid function return type";break;case ye.invalid_date:r="Invalid date";break;case ye.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Bt.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case ye.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case ye.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case ye.custom:r="Invalid input";break;case ye.invalid_intersection_types:r="Intersection results could not be merged";break;case ye.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ye.not_finite:r="Number must be finite";break;default:r=t.defaultError,Bt.assertNever(e)}return{message:r}};let oie=w1;function lie(){return oie}const cie=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function Ee(e,t){const r=lie(),n=cie({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===w1?void 0:w1].filter(a=>!!a)});e.common.issues.push(n)}class Js{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return lt;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return Js.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return lt;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const lt=Object.freeze({status:"aborted"}),Om=e=>({status:"dirty",value:e}),ja=e=>({status:"valid",value:e}),FO=e=>e.status==="aborted",UO=e=>e.status==="dirty",kf=e=>e.status==="valid",kx=e=>typeof Promise<"u"&&e instanceof Promise;var Le;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Le||(Le={}));class Ll{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const BO=(e,t)=>{if(kf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new _o(e.common.issues);return this._error=r,this._error}}};function bt(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class Ft{get description(){return this._def.description}_getType(t){return Go(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Go(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Js,ctx:{common:t.parent.common,data:t.data,parsedType:Go(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(kx(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Go(t)},a=this._parseSync({data:t,path:n.path,parent:n});return BO(n,a)}"~validate"(t){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Go(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return kf(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>kf(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Go(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(kx(a)?a:Promise.resolve(a));return BO(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:ye.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Af({schema:this,typeName:ct.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Nl.create(this,this._def)}nullable(){return Of.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ci.create(this)}promise(){return Ox.create(this,this._def)}or(t){return Px.create([this,t],this._def)}and(t){return Ax.create(this,t,this._def)}transform(t){return new Af({...bt(this._def),schema:this,typeName:ct.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new N1({...bt(this._def),innerType:this,defaultValue:r,typeName:ct.ZodDefault})}brand(){return new Tie({typeName:ct.ZodBranded,type:this,...bt(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new S1({...bt(this._def),innerType:this,catchValue:r,typeName:ct.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Xk.create(this,t)}readonly(){return C1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const uie=/^c[^\s-]{8,}$/i,die=/^[0-9a-z]+$/,fie=/^[0-9A-HJKMNP-TV-Z]{26}$/i,hie=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mie=/^[a-z0-9_-]{21}$/i,pie=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gie=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vie=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,yie="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Jj;const xie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,bie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,wie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,_ie=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Nie=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,gU="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Sie=new RegExp(`^${gU}$`);function vU(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function Cie(e){return new RegExp(`^${vU(e)}$`)}function kie(e){let t=`${gU}T${vU(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Eie(e,t){return!!((t==="v4"||!t)&&xie.test(e)||(t==="v6"||!t)&&wie.test(e))}function Pie(e,t){if(!pie.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function Aie(e,t){return!!((t==="v4"||!t)&&bie.test(e)||(t==="v6"||!t)&&jie.test(e))}class oo extends Ft{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ie.string){const i=this._getOrReturnCtx(t);return Ee(i,{code:ye.invalid_type,expected:Ie.string,received:i.parsedType}),lt}const n=new Js;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Ee(a,{code:ye.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Ee(a,{code:ye.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?Ee(a,{code:ye.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Ee(a,{code:ye.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")vie.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"email",code:ye.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Jj||(Jj=new RegExp(yie,"u")),Jj.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"emoji",code:ye.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")hie.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"uuid",code:ye.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")mie.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"nanoid",code:ye.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")uie.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"cuid",code:ye.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")die.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"cuid2",code:ye.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")fie.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"ulid",code:ye.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Ee(a,{validation:"url",code:ye.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"regex",code:ye.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Ee(a,{code:ye.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Ee(a,{code:ye.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Ee(a,{code:ye.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?kie(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{code:ye.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Sie.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{code:ye.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?Cie(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{code:ye.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?gie.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"duration",code:ye.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Eie(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"ip",code:ye.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?Pie(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"jwt",code:ye.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?Aie(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"cidr",code:ye.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?_ie.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"base64",code:ye.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?Nie.test(t.data)||(a=this._getOrReturnCtx(t,a),Ee(a,{validation:"base64url",code:ye.invalid_string,message:i.message}),n.dirty()):Bt.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:ye.invalid_string,...Le.errToObj(n)})}_addCheck(t){return new oo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Le.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Le.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Le.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Le.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Le.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Le.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Le.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Le.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Le.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Le.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Le.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Le.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Le.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Le.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Le.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Le.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Le.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Le.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Le.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Le.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Le.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Le.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Le.errToObj(r)})}nonempty(t){return this.min(1,Le.errToObj(t))}trim(){return new oo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new oo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new oo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}oo.create=e=>new oo({checks:[],typeName:ct.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...bt(e)});function Oie(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class xu extends Ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ie.number){const i=this._getOrReturnCtx(t);return Ee(i,{code:ye.invalid_type,expected:Ie.number,received:i.parsedType}),lt}let n;const a=new Js;for(const i of this._def.checks)i.kind==="int"?Bt.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Ee(n,{code:ye.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Ee(n,{code:ye.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Ee(n,{code:ye.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?Oie(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),Ee(n,{code:ye.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Ee(n,{code:ye.not_finite,message:i.message}),a.dirty()):Bt.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Le.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Le.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Le.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Le.toString(r))}setLimit(t,r,n,a){return new xu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Le.toString(a)}]})}_addCheck(t){return new xu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Le.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Le.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Le.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Le.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Le.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Le.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Le.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Le.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Le.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Bt.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}xu.create=e=>new xu({checks:[],typeName:ct.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...bt(e)});class bu extends Ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ie.bigint)return this._getInvalidInput(t);let n;const a=new Js;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Ee(n,{code:ye.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Ee(n,{code:ye.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Ee(n,{code:ye.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Bt.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Ee(r,{code:ye.invalid_type,expected:Ie.bigint,received:r.parsedType}),lt}gte(t,r){return this.setLimit("min",t,!0,Le.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Le.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Le.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Le.toString(r))}setLimit(t,r,n,a){return new bu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Le.toString(a)}]})}_addCheck(t){return new bu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Le.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Le.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Le.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Le.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Le.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}bu.create=e=>new bu({checks:[],typeName:ct.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...bt(e)});class Ex extends Ft{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ie.boolean){const n=this._getOrReturnCtx(t);return Ee(n,{code:ye.invalid_type,expected:Ie.boolean,received:n.parsedType}),lt}return ja(t.data)}}Ex.create=e=>new Ex({typeName:ct.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...bt(e)});class Ef extends Ft{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ie.date){const i=this._getOrReturnCtx(t);return Ee(i,{code:ye.invalid_type,expected:Ie.date,received:i.parsedType}),lt}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Ee(i,{code:ye.invalid_date}),lt}const n=new Js;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Ee(a,{code:ye.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Ee(a,{code:ye.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Bt.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Ef({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Le.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Le.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Ef.create=e=>new Ef({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ct.ZodDate,...bt(e)});class zO extends Ft{_parse(t){if(this._getType(t)!==Ie.symbol){const n=this._getOrReturnCtx(t);return Ee(n,{code:ye.invalid_type,expected:Ie.symbol,received:n.parsedType}),lt}return ja(t.data)}}zO.create=e=>new zO({typeName:ct.ZodSymbol,...bt(e)});class VO extends Ft{_parse(t){if(this._getType(t)!==Ie.undefined){const n=this._getOrReturnCtx(t);return Ee(n,{code:ye.invalid_type,expected:Ie.undefined,received:n.parsedType}),lt}return ja(t.data)}}VO.create=e=>new VO({typeName:ct.ZodUndefined,...bt(e)});class qO extends Ft{_parse(t){if(this._getType(t)!==Ie.null){const n=this._getOrReturnCtx(t);return Ee(n,{code:ye.invalid_type,expected:Ie.null,received:n.parsedType}),lt}return ja(t.data)}}qO.create=e=>new qO({typeName:ct.ZodNull,...bt(e)});class WO extends Ft{constructor(){super(...arguments),this._any=!0}_parse(t){return ja(t.data)}}WO.create=e=>new WO({typeName:ct.ZodAny,...bt(e)});class HO extends Ft{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ja(t.data)}}HO.create=e=>new HO({typeName:ct.ZodUnknown,...bt(e)});class Fl extends Ft{_parse(t){const r=this._getOrReturnCtx(t);return Ee(r,{code:ye.invalid_type,expected:Ie.never,received:r.parsedType}),lt}}Fl.create=e=>new Fl({typeName:ct.ZodNever,...bt(e)});class KO extends Ft{_parse(t){if(this._getType(t)!==Ie.undefined){const n=this._getOrReturnCtx(t);return Ee(n,{code:ye.invalid_type,expected:Ie.void,received:n.parsedType}),lt}return ja(t.data)}}KO.create=e=>new KO({typeName:ct.ZodVoid,...bt(e)});class Ci extends Ft{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==Ie.array)return Ee(r,{code:ye.invalid_type,expected:Ie.array,received:r.parsedType}),lt;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(Ee(r,{code:o?ye.too_big:ye.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(Ee(r,{code:ye.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(Ee(r,{code:ye.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new Ll(r,o,r.path,l)))).then(o=>Js.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new Ll(r,o,r.path,l)));return Js.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new Ci({...this._def,minLength:{value:t,message:Le.toString(r)}})}max(t,r){return new Ci({...this._def,maxLength:{value:t,message:Le.toString(r)}})}length(t,r){return new Ci({...this._def,exactLength:{value:t,message:Le.toString(r)}})}nonempty(t){return this.min(1,t)}}Ci.create=(e,t)=>new Ci({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ct.ZodArray,...bt(t)});function pd(e){if(e instanceof Ir){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Nl.create(pd(n))}return new Ir({...e._def,shape:()=>t})}else return e instanceof Ci?new Ci({...e._def,type:pd(e.element)}):e instanceof Nl?Nl.create(pd(e.unwrap())):e instanceof Of?Of.create(pd(e.unwrap())):e instanceof wu?wu.create(e.items.map(t=>pd(t))):e}class Ir extends Ft{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Bt.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Ie.object){const u=this._getOrReturnCtx(t);return Ee(u,{code:ye.invalid_type,expected:Ie.object,received:u.parsedType}),lt}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Fl&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=i[u],f=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Ll(a,f,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Fl){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")l.length>0&&(Ee(a,{code:ye.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Ll(a,f,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>Js.mergeObjectSync(n,u)):Js.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return Le.errToObj,new Ir({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:Le.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Ir({...this._def,unknownKeys:"strip"})}passthrough(){return new Ir({...this._def,unknownKeys:"passthrough"})}extend(t){return new Ir({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Ir({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ct.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Ir({...this._def,catchall:t})}pick(t){const r={};for(const n of Bt.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Ir({...this._def,shape:()=>r})}omit(t){const r={};for(const n of Bt.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new Ir({...this._def,shape:()=>r})}deepPartial(){return pd(this)}partial(t){const r={};for(const n of Bt.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new Ir({...this._def,shape:()=>r})}required(t){const r={};for(const n of Bt.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Nl;)i=i._def.innerType;r[n]=i}return new Ir({...this._def,shape:()=>r})}keyof(){return yU(Bt.objectKeys(this.shape))}}Ir.create=(e,t)=>new Ir({shape:()=>e,unknownKeys:"strip",catchall:Fl.create(),typeName:ct.ZodObject,...bt(t)});Ir.strictCreate=(e,t)=>new Ir({shape:()=>e,unknownKeys:"strict",catchall:Fl.create(),typeName:ct.ZodObject,...bt(t)});Ir.lazycreate=(e,t)=>new Ir({shape:e,unknownKeys:"strip",catchall:Fl.create(),typeName:ct.ZodObject,...bt(t)});class Px extends Ft{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new _o(l.ctx.common.issues));return Ee(r,{code:ye.invalid_union,unionErrors:o}),lt}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new _o(c));return Ee(r,{code:ye.invalid_union,unionErrors:l}),lt}}get options(){return this._def.options}}Px.create=(e,t)=>new Px({options:e,typeName:ct.ZodUnion,...bt(t)});function j1(e,t){const r=Go(e),n=Go(t);if(e===t)return{valid:!0,data:e};if(r===Ie.object&&n===Ie.object){const a=Bt.objectKeys(t),i=Bt.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=j1(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===Ie.array&&n===Ie.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=j1(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===Ie.date&&n===Ie.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ax extends Ft{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(FO(i)||FO(o))return lt;const l=j1(i.value,o.value);return l.valid?((UO(i)||UO(o))&&r.dirty(),{status:r.value,value:l.data}):(Ee(n,{code:ye.invalid_intersection_types}),lt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ax.create=(e,t,r)=>new Ax({left:e,right:t,typeName:ct.ZodIntersection,...bt(r)});class wu extends Ft{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ie.array)return Ee(n,{code:ye.invalid_type,expected:Ie.array,received:n.parsedType}),lt;if(n.data.length<this._def.items.length)return Ee(n,{code:ye.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),lt;!this._def.rest&&n.data.length>this._def.items.length&&(Ee(n,{code:ye.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ll(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Js.mergeArray(r,o)):Js.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new wu({...this._def,rest:t})}}wu.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wu({items:e,typeName:ct.ZodTuple,rest:null,...bt(t)})};class GO extends Ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ie.map)return Ee(n,{code:ye.invalid_type,expected:Ie.map,received:n.parsedType}),lt;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:a._parse(new Ll(n,l,n.path,[u,"key"])),value:i._parse(new Ll(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return lt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return lt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}GO.create=(e,t,r)=>new GO({valueType:t,keyType:e,typeName:ct.ZodMap,...bt(r)});class Up extends Ft{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ie.set)return Ee(n,{code:ye.invalid_type,expected:Ie.set,received:n.parsedType}),lt;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(Ee(n,{code:ye.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(Ee(n,{code:ye.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return lt;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>i._parse(new Ll(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new Up({...this._def,minSize:{value:t,message:Le.toString(r)}})}max(t,r){return new Up({...this._def,maxSize:{value:t,message:Le.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Up.create=(e,t)=>new Up({valueType:e,minSize:null,maxSize:null,typeName:ct.ZodSet,...bt(t)});class YO extends Ft{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}YO.create=(e,t)=>new YO({getter:e,typeName:ct.ZodLazy,...bt(t)});class _1 extends Ft{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Ee(r,{received:r.data,code:ye.invalid_literal,expected:this._def.value}),lt}return{status:"valid",value:t.data}}get value(){return this._def.value}}_1.create=(e,t)=>new _1({value:e,typeName:ct.ZodLiteral,...bt(t)});function yU(e,t){return new Pf({values:e,typeName:ct.ZodEnum,...bt(t)})}class Pf extends Ft{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Ee(r,{expected:Bt.joinValues(n),received:r.parsedType,code:ye.invalid_type}),lt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Ee(r,{received:r.data,code:ye.invalid_enum_value,options:n}),lt}return ja(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Pf.create(t,{...this._def,...r})}exclude(t,r=this._def){return Pf.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Pf.create=yU;class XO extends Ft{_parse(t){const r=Bt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Ie.string&&n.parsedType!==Ie.number){const a=Bt.objectValues(r);return Ee(n,{expected:Bt.joinValues(a),received:n.parsedType,code:ye.invalid_type}),lt}if(this._cache||(this._cache=new Set(Bt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=Bt.objectValues(r);return Ee(n,{received:n.data,code:ye.invalid_enum_value,options:a}),lt}return ja(t.data)}get enum(){return this._def.values}}XO.create=(e,t)=>new XO({values:e,typeName:ct.ZodNativeEnum,...bt(t)});class Ox extends Ft{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Ie.promise&&r.common.async===!1)return Ee(r,{code:ye.invalid_type,expected:Ie.promise,received:r.parsedType}),lt;const n=r.parsedType===Ie.promise?r.data:Promise.resolve(r.data);return ja(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Ox.create=(e,t)=>new Ox({type:e,typeName:ct.ZodPromise,...bt(t)});class Af extends Ft{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ct.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Ee(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return lt;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?lt:c.status==="dirty"||r.value==="dirty"?Om(c.value):c});{if(r.value==="aborted")return lt;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?lt:l.status==="dirty"||r.value==="dirty"?Om(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?lt:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?lt:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!kf(o))return lt;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>kf(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):lt);Bt.assertNever(a)}}Af.create=(e,t,r)=>new Af({schema:e,typeName:ct.ZodEffects,effect:t,...bt(r)});Af.createWithPreprocess=(e,t,r)=>new Af({schema:t,effect:{type:"preprocess",transform:e},typeName:ct.ZodEffects,...bt(r)});class Nl extends Ft{_parse(t){return this._getType(t)===Ie.undefined?ja(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Nl.create=(e,t)=>new Nl({innerType:e,typeName:ct.ZodOptional,...bt(t)});class Of extends Ft{_parse(t){return this._getType(t)===Ie.null?ja(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Of.create=(e,t)=>new Of({innerType:e,typeName:ct.ZodNullable,...bt(t)});class N1 extends Ft{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Ie.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}N1.create=(e,t)=>new N1({innerType:e,typeName:ct.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...bt(t)});class S1 extends Ft{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return kx(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new _o(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new _o(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}S1.create=(e,t)=>new S1({innerType:e,typeName:ct.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...bt(t)});class QO extends Ft{_parse(t){if(this._getType(t)!==Ie.nan){const n=this._getOrReturnCtx(t);return Ee(n,{code:ye.invalid_type,expected:Ie.nan,received:n.parsedType}),lt}return{status:"valid",value:t.data}}}QO.create=e=>new QO({typeName:ct.ZodNaN,...bt(e)});class Tie extends Ft{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Xk extends Ft{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?lt:i.status==="dirty"?(r.dirty(),Om(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?lt:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new Xk({in:t,out:r,typeName:ct.ZodPipeline})}}class C1 extends Ft{_parse(t){const r=this._def.innerType._parse(t),n=a=>(kf(a)&&(a.value=Object.freeze(a.value)),a);return kx(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}C1.create=(e,t)=>new C1({innerType:e,typeName:ct.ZodReadonly,...bt(t)});Ir.lazycreate;var ct;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ct||(ct={}));const Ze=oo.create,xU=xu.create;bu.create;const Tx=Ex.create,ju=Ef.create;Fl.create;Ci.create;const Os=Ir.create;Ir.strictCreate;Px.create;Ax.create;wu.create;const kc=_1.create,Bu=Pf.create;Ox.create;Nl.create;Of.create;const bU={string:e=>oo.create({...e,coerce:!0}),number:e=>xu.create({...e,coerce:!0}),boolean:e=>Ex.create({...e,coerce:!0}),bigint:e=>bu.create({...e,coerce:!0}),date:e=>Ef.create({...e,coerce:!0})};var Gg=e=>e.type==="checkbox",Ec=e=>e instanceof Date,Qn=e=>e==null;const wU=e=>typeof e=="object";var Kr=e=>!Qn(e)&&!Array.isArray(e)&&wU(e)&&!Ec(e),jU=e=>Kr(e)&&e.target?Gg(e.target)?e.target.checked:e.target.value:e,Die=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,_U=(e,t)=>e.has(Die(t)),Rie=e=>{const t=e.constructor&&e.constructor.prototype;return Kr(t)&&t.hasOwnProperty("isPrototypeOf")},Qk=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function an(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Qk&&(e instanceof Blob||n))&&(r||Kr(e)))if(t=r?[]:{},!r&&!Rie(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=an(e[a]));else return e;return t}var $0=e=>/^\w*$/.test(e),Vr=e=>e===void 0,Zk=e=>Array.isArray(e)?e.filter(Boolean):[],Jk=e=>Zk(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Se=(e,t,r)=>{if(!t||!Kr(e))return r;const n=($0(t)?[t]:Jk(t)).reduce((a,i)=>Qn(a)?a:a[i],e);return Vr(n)||n===e?Vr(e[t])?r:e[t]:n},Us=e=>typeof e=="boolean",Qt=(e,t,r)=>{let n=-1;const a=$0(t)?[t]:Jk(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=Kr(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Dx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},za={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ki={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},eE=O.createContext(null);eE.displayName="HookFormContext";const I0=()=>O.useContext(eE),Mie=e=>{const{children:t,...r}=e;return O.createElement(eE.Provider,{value:r},t)};var NU=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==za.all&&(t._proxyFormState[o]=!n||za.all),r&&(r[o]=!0),e[o]}});return a};const tE=typeof window<"u"?O.useLayoutEffect:O.useEffect;function $ie(e){const t=I0(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[o,l]=O.useState(r._formState),c=O.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return tE(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:u=>{!n&&l({...r._formState,...u})}}),[a,n,i]),O.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),O.useMemo(()=>NU(o,r,c.current,!1),[o,r])}var wi=e=>typeof e=="string",SU=(e,t,r,n,a)=>wi(e)?(n&&t.watch.add(e),Se(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Se(r,i))):(n&&(t.watchAll=!0),r),k1=e=>Qn(e)||!wU(e);function no(e,t,r=new WeakSet){if(k1(e)||k1(t))return e===t;if(Ec(e)&&Ec(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=t[i];if(Ec(o)&&Ec(l)||Kr(o)&&Kr(l)||Array.isArray(o)&&Array.isArray(l)?!no(o,l,r):o!==l)return!1}}return!0}function Iie(e){const t=I0(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:o,compute:l}=e||{},c=O.useRef(a),u=O.useRef(l),d=O.useRef(void 0);u.current=l;const f=O.useMemo(()=>r._getWatch(n,c.current),[r,n]),[h,m]=O.useState(u.current?u.current(f):f);return tE(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:g=>{if(!i){const p=SU(n,r._names,g.values||r._formValues,!1,c.current);if(u.current){const v=u.current(p);no(v,d.current)||(m(v),d.current=v)}else m(p)}}}),[r,i,n,o]),O.useEffect(()=>r._removeUnmounted()),h}function Lie(e){const t=I0(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i,defaultValue:o}=e,l=_U(a._names.array,r),c=O.useMemo(()=>Se(a._formValues,r,Se(a._defaultValues,r,o)),[a,r,o]),u=Iie({control:a,name:r,defaultValue:c,exact:!0}),d=$ie({control:a,name:r,exact:!0}),f=O.useRef(e),h=O.useRef(a.register(r,{...e.rules,value:u,...Us(e.disabled)?{disabled:e.disabled}:{}}));f.current=e;const m=O.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Se(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!Se(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Se(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Se(d.validatingFields,r)},error:{enumerable:!0,get:()=>Se(d.errors,r)}}),[d,r]),g=O.useCallback(y=>h.current.onChange({target:{value:jU(y),name:r},type:Dx.CHANGE}),[r]),p=O.useCallback(()=>h.current.onBlur({target:{value:Se(a._formValues,r),name:r},type:Dx.BLUR}),[r,a._formValues]),v=O.useCallback(y=>{const w=Se(a._fields,r);w&&y&&(w._f.ref={focus:()=>y.focus&&y.focus(),select:()=>y.select&&y.select(),setCustomValidity:_=>y.setCustomValidity(_),reportValidity:()=>y.reportValidity()})},[a._fields,r]),b=O.useMemo(()=>({name:r,value:u,...Us(n)||d.disabled?{disabled:d.disabled||n}:{},onChange:g,onBlur:p,ref:v}),[r,n,d.disabled,g,p,v,u]);return O.useEffect(()=>{const y=a._options.shouldUnregister||i;a.register(r,{...f.current.rules,...Us(f.current.disabled)?{disabled:f.current.disabled}:{}});const w=(_,j)=>{const N=Se(a._fields,_);N&&N._f&&(N._f.mount=j)};if(w(r,!0),y){const _=an(Se(a._options.defaultValues,r));Qt(a._defaultValues,r,_),Vr(Se(a._formValues,r))&&Qt(a._formValues,r,_)}return!l&&a.register(r),()=>{(l?y&&!a._state.action:y)?a.unregister(r):w(r,!1)}},[r,a,l,i]),O.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),O.useMemo(()=>({field:b,formState:d,fieldState:m}),[b,d,m])}const Fie=e=>e.render(Lie(e));var CU=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Gm=e=>Array.isArray(e)?e:[e],ZO=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},ps=e=>Kr(e)&&!Object.keys(e).length,rE=e=>e.type==="file",Va=e=>typeof e=="function",Rx=e=>{if(!Qk)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},kU=e=>e.type==="select-multiple",nE=e=>e.type==="radio",Uie=e=>nE(e)||Gg(e),e_=e=>Rx(e)&&e.isConnected;function Bie(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Vr(e)?n++:e[t[n++]];return e}function zie(e){for(const t in e)if(e.hasOwnProperty(t)&&!Vr(e[t]))return!1;return!0}function Gr(e,t){const r=Array.isArray(t)?t:$0(t)?[t]:Jk(t),n=r.length===1?e:Bie(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(Kr(n)&&ps(n)||Array.isArray(n)&&zie(n))&&Gr(e,r.slice(0,-1)),e}var EU=e=>{for(const t in e)if(Va(e[t]))return!0;return!1};function Mx(e,t={}){const r=Array.isArray(e);if(Kr(e)||r)for(const n in e)Array.isArray(e[n])||Kr(e[n])&&!EU(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Mx(e[n],t[n])):Qn(e[n])||(t[n]=!0);return t}function PU(e,t,r){const n=Array.isArray(e);if(Kr(e)||n)for(const a in e)Array.isArray(e[a])||Kr(e[a])&&!EU(e[a])?Vr(t)||k1(r[a])?r[a]=Array.isArray(e[a])?Mx(e[a],[]):{...Mx(e[a])}:PU(e[a],Qn(t)?{}:t[a],r[a]):r[a]=!no(e[a],t[a]);return r}var lm=(e,t)=>PU(e,t,Mx(t));const JO={value:!1,isValid:!1},eT={value:!0,isValid:!0};var AU=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Vr(e[0].attributes.value)?Vr(e[0].value)||e[0].value===""?eT:{value:e[0].value,isValid:!0}:eT:JO}return JO},OU=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Vr(e)?e:t?e===""?NaN:e&&+e:r&&wi(e)?new Date(e):n?n(e):e;const tT={isValid:!1,value:null};var TU=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,tT):tT;function rT(e){const t=e.ref;return rE(t)?t.files:nE(t)?TU(e.refs).value:kU(t)?[...t.selectedOptions].map(({value:r})=>r):Gg(t)?AU(e.refs).value:OU(Vr(t.value)?e.ref.value:t.value,e)}var Vie=(e,t,r,n)=>{const a={};for(const i of e){const o=Se(t,i);o&&Qt(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},$x=e=>e instanceof RegExp,cm=e=>Vr(e)?e:$x(e)?e.source:Kr(e)?$x(e.value)?e.value.source:e.value:e,nT=e=>({isOnSubmit:!e||e===za.onSubmit,isOnBlur:e===za.onBlur,isOnChange:e===za.onChange,isOnAll:e===za.all,isOnTouch:e===za.onTouched});const sT="AsyncFunction";var qie=e=>!!e&&!!e.validate&&!!(Va(e.validate)&&e.validate.constructor.name===sT||Kr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===sT)),Wie=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),aT=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Ym=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=Se(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Ym(l,t))break}else if(Kr(l)&&Ym(l,t))break}}};function iT(e,t,r){const n=Se(e,r);if(n||$0(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=Se(t,i),l=Se(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var Hie=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return ps(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||za.all))},Kie=(e,t,r)=>!e||!t||e===t||Gm(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Gie=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,Yie=(e,t)=>!Zk(Se(e,t)).length&&Gr(e,t),Xie=(e,t,r)=>{const n=Gm(Se(e,r));return Qt(n,"root",t[r]),Qt(e,r,n),e},Dy=e=>wi(e);function oT(e,t,r="validate"){if(Dy(e)||Array.isArray(e)&&e.every(Dy)||Us(e)&&!e)return{type:r,message:Dy(e)?e:"",ref:t}}var od=e=>Kr(e)&&!$x(e)?e:{value:e,message:""},lT=async(e,t,r,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:g,name:p,valueAsNumber:v,mount:b}=e._f,y=Se(r,p);if(!b||t.has(p))return{};const w=l?l[0]:o,_=E=>{a&&w.reportValidity&&(w.setCustomValidity(Us(E)?"":E||""),w.reportValidity())},j={},N=nE(o),S=Gg(o),k=N||S,C=(v||rE(o))&&Vr(o.value)&&Vr(y)||Rx(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,P=CU.bind(null,p,n,j),A=(E,R,$,B=Ki.maxLength,F=Ki.minLength)=>{const L=E?R:$;j[p]={type:E?B:F,message:L,ref:o,...P(E?B:F,L)}};if(i?!Array.isArray(y)||!y.length:c&&(!k&&(C||Qn(y))||Us(y)&&!y||S&&!AU(l).isValid||N&&!TU(l).isValid)){const{value:E,message:R}=Dy(c)?{value:!!c,message:c}:od(c);if(E&&(j[p]={type:Ki.required,message:R,ref:w,...P(Ki.required,R)},!n))return _(R),j}if(!C&&(!Qn(f)||!Qn(h))){let E,R;const $=od(h),B=od(f);if(!Qn(y)&&!isNaN(y)){const F=o.valueAsNumber||y&&+y;Qn($.value)||(E=F>$.value),Qn(B.value)||(R=F<B.value)}else{const F=o.valueAsDate||new Date(y),L=U=>new Date(new Date().toDateString()+" "+U),D=o.type=="time",T=o.type=="week";wi($.value)&&y&&(E=D?L(y)>L($.value):T?y>$.value:F>new Date($.value)),wi(B.value)&&y&&(R=D?L(y)<L(B.value):T?y<B.value:F<new Date(B.value))}if((E||R)&&(A(!!E,$.message,B.message,Ki.max,Ki.min),!n))return _(j[p].message),j}if((u||d)&&!C&&(wi(y)||i&&Array.isArray(y))){const E=od(u),R=od(d),$=!Qn(E.value)&&y.length>+E.value,B=!Qn(R.value)&&y.length<+R.value;if(($||B)&&(A($,E.message,R.message),!n))return _(j[p].message),j}if(m&&!C&&wi(y)){const{value:E,message:R}=od(m);if($x(E)&&!y.match(E)&&(j[p]={type:Ki.pattern,message:R,ref:o,...P(Ki.pattern,R)},!n))return _(R),j}if(g){if(Va(g)){const E=await g(y,r),R=oT(E,w);if(R&&(j[p]={...R,...P(Ki.validate,R.message)},!n))return _(R.message),j}else if(Kr(g)){let E={};for(const R in g){if(!ps(E)&&!n)break;const $=oT(await g[R](y,r),w,R);$&&(E={...$,...P(R,$.message)},_($.message),n&&(j[p]=E))}if(!ps(E)&&(j[p]={ref:w,...E},!n))return j}}return _(!0),j};const Qie={mode:za.onSubmit,reValidateMode:za.onChange,shouldFocusError:!0};function Zie(e={}){let t={...Qie,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Va(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Kr(t.defaultValues)||Kr(t.values)?an(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:an(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:ZO(),state:ZO()},m=t.criteriaMode===za.all,g=z=>G=>{clearTimeout(u),u=setTimeout(z,G)},p=async z=>{if(!t.disabled&&(d.isValid||f.isValid||z)){const G=t.resolver?ps((await S()).errors):await C(n,!0);G!==r.isValid&&h.state.next({isValid:G})}},v=(z,G)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((z||Array.from(l.mount)).forEach(te=>{te&&(G?Qt(r.validatingFields,te,G):Gr(r.validatingFields,te))}),h.state.next({validatingFields:r.validatingFields,isValidating:!ps(r.validatingFields)}))},b=(z,G=[],te,we,je=!0,ve=!0)=>{if(we&&te&&!t.disabled){if(o.action=!0,ve&&Array.isArray(Se(n,z))){const Ce=te(Se(n,z),we.argA,we.argB);je&&Qt(n,z,Ce)}if(ve&&Array.isArray(Se(r.errors,z))){const Ce=te(Se(r.errors,z),we.argA,we.argB);je&&Qt(r.errors,z,Ce),Yie(r.errors,z)}if((d.touchedFields||f.touchedFields)&&ve&&Array.isArray(Se(r.touchedFields,z))){const Ce=te(Se(r.touchedFields,z),we.argA,we.argB);je&&Qt(r.touchedFields,z,Ce)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=lm(a,i)),h.state.next({name:z,isDirty:A(z,G),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Qt(i,z,G)},y=(z,G)=>{Qt(r.errors,z,G),h.state.next({errors:r.errors})},w=z=>{r.errors=z,h.state.next({errors:r.errors,isValid:!1})},_=(z,G,te,we)=>{const je=Se(n,z);if(je){const ve=Se(i,z,Vr(te)?Se(a,z):te);Vr(ve)||we&&we.defaultChecked||G?Qt(i,z,G?ve:rT(je._f)):$(z,ve),o.mount&&p()}},j=(z,G,te,we,je)=>{let ve=!1,Ce=!1;const gt={name:z};if(!t.disabled){if(!te||we){(d.isDirty||f.isDirty)&&(Ce=r.isDirty,r.isDirty=gt.isDirty=A(),ve=Ce!==gt.isDirty);const Gt=no(Se(a,z),G);Ce=!!Se(r.dirtyFields,z),Gt?Gr(r.dirtyFields,z):Qt(r.dirtyFields,z,!0),gt.dirtyFields=r.dirtyFields,ve=ve||(d.dirtyFields||f.dirtyFields)&&Ce!==!Gt}if(te){const Gt=Se(r.touchedFields,z);Gt||(Qt(r.touchedFields,z,te),gt.touchedFields=r.touchedFields,ve=ve||(d.touchedFields||f.touchedFields)&&Gt!==te)}ve&&je&&h.state.next(gt)}return ve?gt:{}},N=(z,G,te,we)=>{const je=Se(r.errors,z),ve=(d.isValid||f.isValid)&&Us(G)&&r.isValid!==G;if(t.delayError&&te?(c=g(()=>y(z,te)),c(t.delayError)):(clearTimeout(u),c=null,te?Qt(r.errors,z,te):Gr(r.errors,z)),(te?!no(je,te):je)||!ps(we)||ve){const Ce={...we,...ve&&Us(G)?{isValid:G}:{},errors:r.errors,name:z};r={...r,...Ce},h.state.next(Ce)}},S=async z=>{v(z,!0);const G=await t.resolver(i,t.context,Vie(z||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(z),G},k=async z=>{const{errors:G}=await S(z);if(z)for(const te of z){const we=Se(G,te);we?Qt(r.errors,te,we):Gr(r.errors,te)}else r.errors=G;return G},C=async(z,G,te={valid:!0})=>{for(const we in z){const je=z[we];if(je){const{_f:ve,...Ce}=je;if(ve){const gt=l.array.has(ve.name),Gt=je._f&&qie(je._f);Gt&&d.validatingFields&&v([we],!0);const tn=await lT(je,l.disabled,i,m,t.shouldUseNativeValidation&&!G,gt);if(Gt&&d.validatingFields&&v([we]),tn[ve.name]&&(te.valid=!1,G))break;!G&&(Se(tn,ve.name)?gt?Xie(r.errors,tn,ve.name):Qt(r.errors,ve.name,tn[ve.name]):Gr(r.errors,ve.name))}!ps(Ce)&&await C(Ce,G,te)}}return te.valid},P=()=>{for(const z of l.unMount){const G=Se(n,z);G&&(G._f.refs?G._f.refs.every(te=>!e_(te)):!e_(G._f.ref))&&ue(z)}l.unMount=new Set},A=(z,G)=>!t.disabled&&(z&&G&&Qt(i,z,G),!no(U(),a)),E=(z,G,te)=>SU(z,l,{...o.mount?i:Vr(G)?a:wi(z)?{[z]:G}:G},te,G),R=z=>Zk(Se(o.mount?i:a,z,t.shouldUnregister?Se(a,z,[]):[])),$=(z,G,te={})=>{const we=Se(n,z);let je=G;if(we){const ve=we._f;ve&&(!ve.disabled&&Qt(i,z,OU(G,ve)),je=Rx(ve.ref)&&Qn(G)?"":G,kU(ve.ref)?[...ve.ref.options].forEach(Ce=>Ce.selected=je.includes(Ce.value)):ve.refs?Gg(ve.ref)?ve.refs.forEach(Ce=>{(!Ce.defaultChecked||!Ce.disabled)&&(Array.isArray(je)?Ce.checked=!!je.find(gt=>gt===Ce.value):Ce.checked=je===Ce.value||!!je)}):ve.refs.forEach(Ce=>Ce.checked=Ce.value===je):rE(ve.ref)?ve.ref.value="":(ve.ref.value=je,ve.ref.type||h.state.next({name:z,values:an(i)})))}(te.shouldDirty||te.shouldTouch)&&j(z,je,te.shouldTouch,te.shouldDirty,!0),te.shouldValidate&&T(z)},B=(z,G,te)=>{for(const we in G){if(!G.hasOwnProperty(we))return;const je=G[we],ve=z+"."+we,Ce=Se(n,ve);(l.array.has(z)||Kr(je)||Ce&&!Ce._f)&&!Ec(je)?B(ve,je,te):$(ve,je,te)}},F=(z,G,te={})=>{const we=Se(n,z),je=l.array.has(z),ve=an(G);Qt(i,z,ve),je?(h.array.next({name:z,values:an(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&te.shouldDirty&&h.state.next({name:z,dirtyFields:lm(a,i),isDirty:A(z,ve)})):we&&!we._f&&!Qn(ve)?B(z,ve,te):$(z,ve,te),aT(z,l)&&h.state.next({...r,name:z}),h.state.next({name:o.mount?z:void 0,values:an(i)})},L=async z=>{o.mount=!0;const G=z.target;let te=G.name,we=!0;const je=Se(n,te),ve=Gt=>{we=Number.isNaN(Gt)||Ec(Gt)&&isNaN(Gt.getTime())||no(Gt,Se(i,te,Gt))},Ce=nT(t.mode),gt=nT(t.reValidateMode);if(je){let Gt,tn;const Ca=G.type?rT(je._f):jU(z),cs=z.type===Dx.BLUR||z.type===Dx.FOCUS_OUT,di=!Wie(je._f)&&!t.resolver&&!Se(r.errors,te)&&!je._f.deps||Gie(cs,Se(r.touchedFields,te),r.isSubmitted,gt,Ce),fi=aT(te,l,cs);Qt(i,te,Ca),cs?(je._f.onBlur&&je._f.onBlur(z),c&&c(0)):je._f.onChange&&je._f.onChange(z);const Rn=j(te,Ca,cs),rc=!ps(Rn)||fi;if(!cs&&h.state.next({name:te,type:z.type,values:an(i)}),di)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?cs&&p():cs||p()),rc&&h.state.next({name:te,...fi?{}:Rn});if(!cs&&fi&&h.state.next({...r}),t.resolver){const{errors:us}=await S([te]);if(ve(Ca),we){const nc=iT(r.errors,n,te),sc=iT(us,n,nc.name||te);Gt=sc.error,te=sc.name,tn=ps(us)}}else v([te],!0),Gt=(await lT(je,l.disabled,i,m,t.shouldUseNativeValidation))[te],v([te]),ve(Ca),we&&(Gt?tn=!1:(d.isValid||f.isValid)&&(tn=await C(n,!0)));we&&(je._f.deps&&T(je._f.deps),N(te,tn,Gt,Rn))}},D=(z,G)=>{if(Se(r.errors,G)&&z.focus)return z.focus(),1},T=async(z,G={})=>{let te,we;const je=Gm(z);if(t.resolver){const ve=await k(Vr(z)?z:je);te=ps(ve),we=z?!je.some(Ce=>Se(ve,Ce)):te}else z?(we=(await Promise.all(je.map(async ve=>{const Ce=Se(n,ve);return await C(Ce&&Ce._f?{[ve]:Ce}:Ce)}))).every(Boolean),!(!we&&!r.isValid)&&p()):we=te=await C(n);return h.state.next({...!wi(z)||(d.isValid||f.isValid)&&te!==r.isValid?{}:{name:z},...t.resolver||!z?{isValid:te}:{},errors:r.errors}),G.shouldFocus&&!we&&Ym(n,D,z?je:l.mount),we},U=z=>{const G={...o.mount?i:a};return Vr(z)?G:wi(z)?Se(G,z):z.map(te=>Se(G,te))},X=(z,G)=>({invalid:!!Se((G||r).errors,z),isDirty:!!Se((G||r).dirtyFields,z),error:Se((G||r).errors,z),isValidating:!!Se(r.validatingFields,z),isTouched:!!Se((G||r).touchedFields,z)}),H=z=>{z&&Gm(z).forEach(G=>Gr(r.errors,G)),h.state.next({errors:z?r.errors:{}})},ae=(z,G,te)=>{const we=(Se(n,z,{_f:{}})._f||{}).ref,je=Se(r.errors,z)||{},{ref:ve,message:Ce,type:gt,...Gt}=je;Qt(r.errors,z,{...Gt,...G,ref:we}),h.state.next({name:z,errors:r.errors,isValid:!1}),te&&te.shouldFocus&&we&&we.focus&&we.focus()},he=(z,G)=>Va(z)?h.state.subscribe({next:te=>"values"in te&&z(E(void 0,G),te)}):E(z,G,!0),Pe=z=>h.state.subscribe({next:G=>{Kie(z.name,G.name,z.exact)&&Hie(G,z.formState||d,tr,z.reRenderRoot)&&z.callback({values:{...i},...r,...G,defaultValues:a})}}).unsubscribe,Ae=z=>(o.mount=!0,f={...f,...z.formState},Pe({...z,formState:f})),ue=(z,G={})=>{for(const te of z?Gm(z):l.mount)l.mount.delete(te),l.array.delete(te),G.keepValue||(Gr(n,te),Gr(i,te)),!G.keepError&&Gr(r.errors,te),!G.keepDirty&&Gr(r.dirtyFields,te),!G.keepTouched&&Gr(r.touchedFields,te),!G.keepIsValidating&&Gr(r.validatingFields,te),!t.shouldUnregister&&!G.keepDefaultValue&&Gr(a,te);h.state.next({values:an(i)}),h.state.next({...r,...G.keepDirty?{isDirty:A()}:{}}),!G.keepIsValid&&p()},ze=({disabled:z,name:G})=>{(Us(z)&&o.mount||z||l.disabled.has(G))&&(z?l.disabled.add(G):l.disabled.delete(G))},ie=(z,G={})=>{let te=Se(n,z);const we=Us(G.disabled)||Us(t.disabled);return Qt(n,z,{...te||{},_f:{...te&&te._f?te._f:{ref:{name:z}},name:z,mount:!0,...G}}),l.mount.add(z),te?ze({disabled:Us(G.disabled)?G.disabled:t.disabled,name:z}):_(z,!0,G.value),{...we?{disabled:G.disabled||t.disabled}:{},...t.progressive?{required:!!G.required,min:cm(G.min),max:cm(G.max),minLength:cm(G.minLength),maxLength:cm(G.maxLength),pattern:cm(G.pattern)}:{},name:z,onChange:L,onBlur:L,ref:je=>{if(je){ie(z,G),te=Se(n,z);const ve=Vr(je.value)&&je.querySelectorAll&&je.querySelectorAll("input,select,textarea")[0]||je,Ce=Uie(ve),gt=te._f.refs||[];if(Ce?gt.find(Gt=>Gt===ve):ve===te._f.ref)return;Qt(n,z,{_f:{...te._f,...Ce?{refs:[...gt.filter(e_),ve,...Array.isArray(Se(a,z))?[{}]:[]],ref:{type:ve.type,name:z}}:{ref:ve}}}),_(z,!1,void 0,ve)}else te=Se(n,z,{}),te._f&&(te._f.mount=!1),(t.shouldUnregister||G.shouldUnregister)&&!(_U(l.array,z)&&o.action)&&l.unMount.add(z)}}},be=()=>t.shouldFocusError&&Ym(n,D,l.mount),_e=z=>{Us(z)&&(h.state.next({disabled:z}),Ym(n,(G,te)=>{const we=Se(n,te);we&&(G.disabled=we._f.disabled||z,Array.isArray(we._f.refs)&&we._f.refs.forEach(je=>{je.disabled=we._f.disabled||z}))},0,!1))},ee=(z,G)=>async te=>{let we;te&&(te.preventDefault&&te.preventDefault(),te.persist&&te.persist());let je=an(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ve,values:Ce}=await S();r.errors=ve,je=an(Ce)}else await C(n);if(l.disabled.size)for(const ve of l.disabled)Gr(je,ve);if(Gr(r.errors,"root"),ps(r.errors)){h.state.next({errors:{}});try{await z(je,te)}catch(ve){we=ve}}else G&&await G({...r.errors},te),be(),setTimeout(be);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ps(r.errors)&&!we,submitCount:r.submitCount+1,errors:r.errors}),we)throw we},ot=(z,G={})=>{Se(n,z)&&(Vr(G.defaultValue)?F(z,an(Se(a,z))):(F(z,G.defaultValue),Qt(a,z,an(G.defaultValue))),G.keepTouched||Gr(r.touchedFields,z),G.keepDirty||(Gr(r.dirtyFields,z),r.isDirty=G.defaultValue?A(z,an(Se(a,z))):A()),G.keepError||(Gr(r.errors,z),d.isValid&&p()),h.state.next({...r}))},Ge=(z,G={})=>{const te=z?an(z):a,we=an(te),je=ps(z),ve=je?a:we;if(G.keepDefaultValues||(a=te),!G.keepValues){if(G.keepDirtyValues){const Ce=new Set([...l.mount,...Object.keys(lm(a,i))]);for(const gt of Array.from(Ce))Se(r.dirtyFields,gt)?Qt(ve,gt,Se(i,gt)):F(gt,Se(ve,gt))}else{if(Qk&&Vr(z))for(const Ce of l.mount){const gt=Se(n,Ce);if(gt&&gt._f){const Gt=Array.isArray(gt._f.refs)?gt._f.refs[0]:gt._f.ref;if(Rx(Gt)){const tn=Gt.closest("form");if(tn){tn.reset();break}}}}if(G.keepFieldsRef)for(const Ce of l.mount)F(Ce,Se(ve,Ce));else n={}}i=t.shouldUnregister?G.keepDefaultValues?an(a):{}:an(ve),h.array.next({values:{...ve}}),h.state.next({values:{...ve}})}l={mount:G.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!G.keepIsValid||!!G.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:G.keepSubmitCount?r.submitCount:0,isDirty:je?!1:G.keepDirty?r.isDirty:!!(G.keepDefaultValues&&!no(z,a)),isSubmitted:G.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:je?{}:G.keepDirtyValues?G.keepDefaultValues&&i?lm(a,i):r.dirtyFields:G.keepDefaultValues&&z?lm(a,z):G.keepDirty?r.dirtyFields:{},touchedFields:G.keepTouched?r.touchedFields:{},errors:G.keepErrors?r.errors:{},isSubmitSuccessful:G.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Et=(z,G)=>Ge(Va(z)?z(i):z,G),Ut=(z,G={})=>{const te=Se(n,z),we=te&&te._f;if(we){const je=we.refs?we.refs[0]:we.ref;je.focus&&(je.focus(),G.shouldSelect&&Va(je.select)&&je.select())}},tr=z=>{r={...r,...z}},gn={control:{register:ie,unregister:ue,getFieldState:X,handleSubmit:ee,setError:ae,_subscribe:Pe,_runSchema:S,_focusError:be,_getWatch:E,_getDirty:A,_setValid:p,_setFieldArray:b,_setDisabledField:ze,_setErrors:w,_getFieldArray:R,_reset:Ge,_resetDefaultValues:()=>Va(t.defaultValues)&&t.defaultValues().then(z=>{Et(z,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:_e,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(z){o=z},get _defaultValues(){return a},get _names(){return l},set _names(z){l=z},get _formState(){return r},get _options(){return t},set _options(z){t={...t,...z}}},subscribe:Ae,trigger:T,register:ie,handleSubmit:ee,watch:he,setValue:F,getValues:U,reset:Et,resetField:ot,clearErrors:H,unregister:ue,setError:ae,setFocus:Ut,getFieldState:X};return{...gn,formControl:gn}}function as(e={}){const t=O.useRef(void 0),r=O.useRef(void 0),[n,a]=O.useState({isDirty:!1,isValidating:!1,isLoading:Va(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Va(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Va(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=Zie(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,tE(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),O.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),O.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),O.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),O.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),O.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),O.useEffect(()=>{e.values&&!no(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),O.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=NU(n,i),t.current}const cT=(e,t,r)=>{if(e&&"reportValidity"in e){const n=Se(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},DU=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?cT(n.ref,r,e):n.refs&&n.refs.forEach(a=>cT(a,r,e))}},Jie=(e,t)=>{t.shouldUseNativeValidation&&DU(e,t);const r={};for(const n in e){const a=Se(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(eoe(t.names||Object.keys(e),n)){const o=Object.assign({},Se(r,n));Qt(o,"root",i),Qt(r,n,o)}else Qt(r,n,i)}return r},eoe=(e,t)=>e.some(r=>r.startsWith(t+"."));var toe=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return e.push(f)})}),t){var c=r[o].types,u=c&&c[n.code];r[o]=CU(o,t,r,a,u?[].concat(u,n.message):n.message)}e.shift()}return r},Di=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(u){return i.shouldUseNativeValidation&&DU({},i),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Jie(toe(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},roe="Label",RU=x.forwardRef((e,t)=>s.jsx(Ne.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));RU.displayName=roe;var MU=RU;const noe=dh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),q=x.forwardRef(({className:e,...t},r)=>s.jsx(MU,{ref:r,className:Q(noe(),e),...t}));q.displayName=MU.displayName;function Yg(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var L0="Checkbox",[soe,l3e]=zr(L0),[aoe,sE]=soe(L0);function ioe(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[h,m]=qn({prop:r,defaultProp:a??!1,onChange:c,caller:L0}),[g,p]=x.useState(null),[v,b]=x.useState(null),y=x.useRef(!1),w=g?!!o||!!g.closest("form"):!0,_={checked:h,disabled:i,setChecked:m,control:g,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:Sl(a)?!1:a,isFormControl:w,bubbleInput:v,setBubbleInput:b};return s.jsx(aoe,{scope:t,..._,children:ooe(f)?f(_):n})}var $U="CheckboxTrigger",IU=x.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=sE($U,e),p=We(a,d),v=x.useRef(c);return x.useEffect(()=>{const b=i==null?void 0:i.form;if(b){const y=()=>f(v.current);return b.addEventListener("reset",y),()=>b.removeEventListener("reset",y)}},[i,f]),s.jsx(Ne.button,{type:"button",role:"checkbox","aria-checked":Sl(c)?"mixed":c,"aria-required":u,"data-state":zU(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:p,onKeyDown:fe(t,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:fe(r,b=>{f(y=>Sl(y)?!0:!y),g&&m&&(h.current=b.isPropagationStopped(),h.current||b.stopPropagation())})})});IU.displayName=$U;var aE=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return s.jsx(ioe,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>s.jsxs(s.Fragment,{children:[s.jsx(IU,{...f,ref:t,__scopeCheckbox:r}),h&&s.jsx(BU,{__scopeCheckbox:r})]})})});aE.displayName=L0;var LU="CheckboxIndicator",FU=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=sE(LU,r);return s.jsx(en,{present:n||Sl(i.checked)||i.checked===!0,children:s.jsx(Ne.span,{"data-state":zU(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});FU.displayName=LU;var UU="CheckboxBubbleInput",BU=x.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:m}=sE(UU,e),g=We(r,m),p=Yg(i),v=Ig(n);x.useEffect(()=>{const y=h;if(!y)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set,N=!a.current;if(p!==i&&j){const S=new Event("click",{bubbles:N});y.indeterminate=Sl(i),j.call(y,Sl(i)?!1:i),y.dispatchEvent(S)}},[h,p,i,a]);const b=x.useRef(Sl(i)?!1:i);return s.jsx(Ne.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});BU.displayName=UU;function ooe(e){return typeof e=="function"}function Sl(e){return e==="indeterminate"}function zU(e){return Sl(e)?"indeterminate":e?"checked":"unchecked"}const Ri=x.forwardRef(({className:e,...t},r)=>s.jsx(aE,{ref:r,className:Q("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(FU,{className:Q("flex items-center justify-center text-current"),children:s.jsx(fh,{className:"h-4 w-4"})})}));Ri.displayName=aE.displayName;const loe=Os({email:Ze().email({message:"Please enter a valid email address"}),password:Ze().min(6,{message:"Password must be at least 6 characters"})}),coe=Os({displayName:Ze().min(2,{message:"Display name must be at least 2 characters"}).max(50,{message:"Display name must be less than 50 characters"}),email:Ze().email({message:"Please enter a valid email address"}),password:Ze().min(6,{message:"Password must be at least 6 characters"}),confirmPassword:Ze()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function uoe(){const[e,t]=x.useState(!0),[r,n]=x.useState(!1),[a,i]=x.useState(!1),[o,l]=x.useState(!1),c=oi(),{user:u,loading:d,signIn:f,signUp:h}=Kg(),m=as({resolver:Di(loe),defaultValues:{email:"",password:""},mode:"onChange"}),g=as({resolver:Di(coe),defaultValues:{displayName:"",email:"",password:"",confirmPassword:""},mode:"onChange"});x.useEffect(()=>{!d&&u&&c("/employees")},[u,d,c]);const p=async y=>{n(!0);const{error:w}=await f(y.email,y.password);if(n(!1),w){w.message.includes("Invalid login credentials")?oe({title:"Login failed",description:"Invalid email or password. Please try again.",variant:"destructive"}):oe({title:"Login failed",description:w.message,variant:"destructive"});return}oe({title:"Welcome back!",description:"You have successfully logged in."}),c("/employees")},v=async y=>{n(!0);const{error:w}=await h(y.email,y.password,y.displayName);if(n(!1),w){w.message.includes("User already registered")?oe({title:"Account exists",description:"An account with this email already exists. Please log in instead.",variant:"destructive"}):oe({title:"Signup failed",description:w.message,variant:"destructive"});return}oe({title:"Account created!",description:"Welcome to SocialPlus HR. You are now logged in."}),c("/employees")},b=async()=>{const y=m.watch("email");if(!y||!Ze().email().safeParse(y).success){oe({title:"Email required",description:"Please enter your email address first.",variant:"destructive"});return}l(!0);const{error:w}=await M.auth.resetPasswordForEmail(y,{redirectTo:`${window.location.origin}/auth`});if(l(!1),w){oe({title:"Error",description:w.message,variant:"destructive"});return}oe({title:"Password reset email sent",description:"Check your inbox for a link to reset your password."})};return d?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs("div",{className:"min-h-screen flex bg-background",children:[s.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-primary p-12 flex-col justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-primary-foreground",children:"SocialPlus HR"}),s.jsx("p",{className:"text-primary-foreground/80 mt-2",children:"Human Resource Management System"})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-primary-foreground/10 rounded-lg",children:s.jsx(Er,{className:"h-6 w-6 text-primary-foreground"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-primary-foreground",children:"Employee Management"}),s.jsx("p",{className:"text-primary-foreground/70 text-sm",children:"Manage your entire workforce from one central location"})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-primary-foreground/10 rounded-lg",children:s.jsx(dn,{className:"h-6 w-6 text-primary-foreground"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-primary-foreground",children:"Compliance Tracking"}),s.jsx("p",{className:"text-primary-foreground/70 text-sm",children:"Stay compliant with automated document tracking"})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-primary-foreground/10 rounded-lg",children:s.jsx(xt,{className:"h-6 w-6 text-primary-foreground"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-primary-foreground",children:"Time & Attendance"}),s.jsx("p",{className:"text-primary-foreground/70 text-sm",children:"Track hours, manage leave, and process payroll seamlessly"})]})]})]}),s.jsx("p",{className:"text-primary-foreground/60 text-sm",children:" 2024 SocialPlus. All rights reserved."})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:s.jsxs(K,{className:"w-full max-w-md",children:[s.jsxs(de,{className:"text-center",children:[s.jsx("div",{className:"lg:hidden mb-4",children:s.jsx("h1",{className:"text-2xl font-bold text-primary",children:"SocialPlus HR"})}),s.jsx(me,{className:"text-2xl",children:e?"Welcome back":"Create an account"}),s.jsx(Be,{children:e?"Enter your credentials to access your account":"Enter your details to get started"})]}),s.jsxs(Y,{children:[e?s.jsxs("form",{onSubmit:m.handleSubmit(p),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"login-email",children:"Email"}),s.jsx(J,{id:"login-email",type:"email",placeholder:"name@company.com",value:m.watch("email"),onChange:y=>m.setValue("email",y.target.value,{shouldValidate:!0})}),m.formState.errors.email&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:m.formState.errors.email.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"login-password",children:"Password"}),s.jsx(J,{id:"login-password",type:"password",placeholder:"Enter your password",value:m.watch("password"),onChange:y=>m.setValue("password",y.target.value,{shouldValidate:!0})}),m.formState.errors.password&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:m.formState.errors.password.message})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ri,{id:"remember-me",checked:a,onCheckedChange:y=>i(y===!0)}),s.jsx(q,{htmlFor:"remember-me",className:"text-sm font-normal cursor-pointer",children:"Remember me"})]}),s.jsx("button",{type:"button",onClick:b,disabled:o,className:"text-sm text-primary hover:underline disabled:opacity-50",children:o?"Sending...":"Forgot password?"})]}),s.jsx(I,{type:"submit",className:"w-full",disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign in"})]}):s.jsxs("form",{onSubmit:g.handleSubmit(v),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"signup-displayName",children:"Display Name"}),s.jsx(J,{id:"signup-displayName",placeholder:"John Doe",value:g.watch("displayName"),onChange:y=>g.setValue("displayName",y.target.value,{shouldValidate:!0})}),g.formState.errors.displayName&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:g.formState.errors.displayName.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"signup-email",children:"Email"}),s.jsx(J,{id:"signup-email",type:"email",placeholder:"name@company.com",value:g.watch("email"),onChange:y=>g.setValue("email",y.target.value,{shouldValidate:!0})}),g.formState.errors.email&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:g.formState.errors.email.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"signup-password",children:"Password"}),s.jsx(J,{id:"signup-password",type:"password",placeholder:"Create a password",value:g.watch("password"),onChange:y=>g.setValue("password",y.target.value,{shouldValidate:!0})}),g.formState.errors.password&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:g.formState.errors.password.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"signup-confirmPassword",children:"Confirm Password"}),s.jsx(J,{id:"signup-confirmPassword",type:"password",placeholder:"Confirm your password",value:g.watch("confirmPassword"),onChange:y=>g.setValue("confirmPassword",y.target.value,{shouldValidate:!0})}),g.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:g.formState.errors.confirmPassword.message})]}),s.jsx(I,{type:"submit",className:"w-full",disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create account"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{type:"button",onClick:()=>t(!e),className:"text-sm text-primary hover:underline",children:e?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})]})}function Bp(e,[t,r]){return Math.min(r,Math.max(t,e))}var doe=[" ","Enter","ArrowUp","ArrowDown"],foe=[" ","Enter"],_u="Select",[F0,U0,hoe]=ch(_u),[Sh,c3e]=zr(_u,[hoe,ql]),B0=ql(),[moe,Gl]=Sh(_u),[poe,goe]=Sh(_u),VU=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:g}=e,p=B0(t),[v,b]=x.useState(null),[y,w]=x.useState(null),[_,j]=x.useState(!1),N=Hl(u),[S,k]=qn({prop:n,defaultProp:a??!1,onChange:i,caller:_u}),[C,P]=qn({prop:o,defaultProp:l,onChange:c,caller:_u}),A=x.useRef(null),E=v?g||!!v.closest("form"):!0,[R,$]=x.useState(new Set),B=Array.from(R).map(F=>F.props.value).join(";");return s.jsx(x0,{...p,children:s.jsxs(moe,{required:m,scope:t,trigger:v,onTriggerChange:b,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:Ss(),value:C,onValueChange:P,open:S,onOpenChange:k,dir:N,triggerPointerDownPosRef:A,disabled:h,children:[s.jsx(F0.Provider,{scope:t,children:s.jsx(poe,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(F=>{$(L=>new Set(L).add(F))},[]),onNativeOptionRemove:x.useCallback(F=>{$(L=>{const D=new Set(L);return D.delete(F),D})},[]),children:r})}),E?s.jsxs(hB,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:C,onChange:F=>P(F.target.value),disabled:h,form:g,children:[C===void 0?s.jsx("option",{value:""}):null,Array.from(R)]},B):null]})})};VU.displayName=_u;var qU="SelectTrigger",WU=x.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=B0(r),o=Gl(qU,r),l=o.disabled||n,c=We(t,o.onTriggerChange),u=U0(r),d=x.useRef("touch"),[f,h,m]=pB(p=>{const v=u().filter(w=>!w.disabled),b=v.find(w=>w.value===o.value),y=gB(v,p,b);y!==void 0&&o.onValueChange(y.value)}),g=p=>{l||(o.onOpenChange(!0),m()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return s.jsx(Lg,{asChild:!0,...i,children:s.jsx(Ne.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":mB(o.value)?"":void 0,...a,ref:c,onClick:fe(a.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&g(p)}),onPointerDown:fe(a.onPointerDown,p=>{d.current=p.pointerType;const v=p.target;v.hasPointerCapture(p.pointerId)&&v.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:fe(a.onKeyDown,p=>{const v=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(v&&p.key===" ")&&doe.includes(p.key)&&(g(),p.preventDefault())})})})});WU.displayName=qU;var HU="SelectValue",KU=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=Gl(HU,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=We(t,c.onValueNodeChange);return Br(()=>{u(d)},[u,d]),s.jsx(Ne.span,{...l,ref:f,style:{pointerEvents:"none"},children:mB(c.value)?s.jsx(s.Fragment,{children:o}):i})});KU.displayName=HU;var voe="SelectIcon",GU=x.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Ne.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});GU.displayName=voe;var yoe="SelectPortal",YU=e=>s.jsx(uh,{asChild:!0,...e});YU.displayName=yoe;var Nu="SelectContent",XU=x.forwardRef((e,t)=>{const r=Gl(Nu,e.__scopeSelect),[n,a]=x.useState();if(Br(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?Ru.createPortal(s.jsx(QU,{scope:e.__scopeSelect,children:s.jsx(F0.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(ZU,{...e,ref:t})});XU.displayName=Nu;var Da=10,[QU,Yl]=Sh(Nu),xoe="SelectContentImpl",boe=Dl("SelectContent.RemoveScroll"),ZU=x.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:v,...b}=e,y=Gl(Nu,r),[w,_]=x.useState(null),[j,N]=x.useState(null),S=We(t,ue=>_(ue)),[k,C]=x.useState(null),[P,A]=x.useState(null),E=U0(r),[R,$]=x.useState(!1),B=x.useRef(!1);x.useEffect(()=>{if(w)return A0(w)},[w]),P0();const F=x.useCallback(ue=>{const[ze,...ie]=E().map(ee=>ee.ref.current),[be]=ie.slice(-1),_e=document.activeElement;for(const ee of ue)if(ee===_e||(ee==null||ee.scrollIntoView({block:"nearest"}),ee===ze&&j&&(j.scrollTop=0),ee===be&&j&&(j.scrollTop=j.scrollHeight),ee==null||ee.focus(),document.activeElement!==_e))return},[E,j]),L=x.useCallback(()=>F([k,w]),[F,k,w]);x.useEffect(()=>{R&&L()},[R,L]);const{onOpenChange:D,triggerPointerDownPosRef:T}=y;x.useEffect(()=>{if(w){let ue={x:0,y:0};const ze=be=>{var _e,ee;ue={x:Math.abs(Math.round(be.pageX)-(((_e=T.current)==null?void 0:_e.x)??0)),y:Math.abs(Math.round(be.pageY)-(((ee=T.current)==null?void 0:ee.y)??0))}},ie=be=>{ue.x<=10&&ue.y<=10?be.preventDefault():w.contains(be.target)||D(!1),document.removeEventListener("pointermove",ze),T.current=null};return T.current!==null&&(document.addEventListener("pointermove",ze),document.addEventListener("pointerup",ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ze),document.removeEventListener("pointerup",ie,{capture:!0})}}},[w,D,T]),x.useEffect(()=>{const ue=()=>D(!1);return window.addEventListener("blur",ue),window.addEventListener("resize",ue),()=>{window.removeEventListener("blur",ue),window.removeEventListener("resize",ue)}},[D]);const[U,X]=pB(ue=>{const ze=E().filter(_e=>!_e.disabled),ie=ze.find(_e=>_e.ref.current===document.activeElement),be=gB(ze,ue,ie);be&&setTimeout(()=>be.ref.current.focus())}),H=x.useCallback((ue,ze,ie)=>{const be=!B.current&&!ie;(y.value!==void 0&&y.value===ze||be)&&(C(ue),be&&(B.current=!0))},[y.value]),ae=x.useCallback(()=>w==null?void 0:w.focus(),[w]),he=x.useCallback((ue,ze,ie)=>{const be=!B.current&&!ie;(y.value!==void 0&&y.value===ze||be)&&A(ue)},[y.value]),Pe=n==="popper"?E1:JU,Ae=Pe===E1?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:v}:{};return s.jsx(QU,{scope:r,content:w,viewport:j,onViewportChange:N,itemRefCallback:H,selectedItem:k,onItemLeave:ae,itemTextRefCallback:he,focusSelectedItem:L,selectedItemText:P,position:n,isPositioned:R,searchRef:U,children:s.jsx(qg,{as:boe,allowPinchZoom:!0,children:s.jsx(zg,{asChild:!0,trapped:y.open,onMountAutoFocus:ue=>{ue.preventDefault()},onUnmountAutoFocus:fe(a,ue=>{var ze;(ze=y.trigger)==null||ze.focus({preventScroll:!0}),ue.preventDefault()}),children:s.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ue=>ue.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(Pe,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ue=>ue.preventDefault(),...b,...Ae,onPlaced:()=>$(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:fe(b.onKeyDown,ue=>{const ze=ue.ctrlKey||ue.altKey||ue.metaKey;if(ue.key==="Tab"&&ue.preventDefault(),!ze&&ue.key.length===1&&X(ue.key),["ArrowUp","ArrowDown","Home","End"].includes(ue.key)){let be=E().filter(_e=>!_e.disabled).map(_e=>_e.ref.current);if(["ArrowUp","End"].includes(ue.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(ue.key)){const _e=ue.target,ee=be.indexOf(_e);be=be.slice(ee+1)}setTimeout(()=>F(be)),ue.preventDefault()}})})})})})})});ZU.displayName=xoe;var woe="SelectItemAlignedPosition",JU=x.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Gl(Nu,r),o=Yl(Nu,r),[l,c]=x.useState(null),[u,d]=x.useState(null),f=We(t,S=>d(S)),h=U0(r),m=x.useRef(!1),g=x.useRef(!0),{viewport:p,selectedItem:v,selectedItemText:b,focusSelectedItem:y}=o,w=x.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&v&&b){const S=i.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),P=b.getBoundingClientRect();if(i.dir!=="rtl"){const _e=P.left-k.left,ee=C.left-_e,ot=S.left-ee,Ge=S.width+ot,Et=Math.max(Ge,k.width),Ut=window.innerWidth-Da,tr=Bp(ee,[Da,Math.max(Da,Ut-Et)]);l.style.minWidth=Ge+"px",l.style.left=tr+"px"}else{const _e=k.right-P.right,ee=window.innerWidth-C.right-_e,ot=window.innerWidth-S.right-ee,Ge=S.width+ot,Et=Math.max(Ge,k.width),Ut=window.innerWidth-Da,tr=Bp(ee,[Da,Math.max(Da,Ut-Et)]);l.style.minWidth=Ge+"px",l.style.right=tr+"px"}const A=h(),E=window.innerHeight-Da*2,R=p.scrollHeight,$=window.getComputedStyle(u),B=parseInt($.borderTopWidth,10),F=parseInt($.paddingTop,10),L=parseInt($.borderBottomWidth,10),D=parseInt($.paddingBottom,10),T=B+F+R+D+L,U=Math.min(v.offsetHeight*5,T),X=window.getComputedStyle(p),H=parseInt(X.paddingTop,10),ae=parseInt(X.paddingBottom,10),he=S.top+S.height/2-Da,Pe=E-he,Ae=v.offsetHeight/2,ue=v.offsetTop+Ae,ze=B+F+ue,ie=T-ze;if(ze<=he){const _e=A.length>0&&v===A[A.length-1].ref.current;l.style.bottom="0px";const ee=u.clientHeight-p.offsetTop-p.offsetHeight,ot=Math.max(Pe,Ae+(_e?ae:0)+ee+L),Ge=ze+ot;l.style.height=Ge+"px"}else{const _e=A.length>0&&v===A[0].ref.current;l.style.top="0px";const ot=Math.max(he,B+p.offsetTop+(_e?H:0)+Ae)+ie;l.style.height=ot+"px",p.scrollTop=ze-he+p.offsetTop}l.style.margin=`${Da}px 0`,l.style.minHeight=U+"px",l.style.maxHeight=E+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,u,p,v,b,i.dir,n]);Br(()=>w(),[w]);const[_,j]=x.useState();Br(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const N=x.useCallback(S=>{S&&g.current===!0&&(w(),y==null||y(),g.current=!1)},[w,y]);return s.jsx(_oe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:N,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:s.jsx(Ne.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});JU.displayName=woe;var joe="SelectPopperPosition",E1=x.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Da,...i}=e,o=B0(r);return s.jsx(b0,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});E1.displayName=joe;var[_oe,iE]=Sh(Nu,{}),P1="SelectViewport",eB=x.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Yl(P1,r),o=iE(P1,r),l=We(t,i.onViewportChange),c=x.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(F0.Slot,{scope:r,children:s.jsx(Ne.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:fe(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const g=window.innerHeight-Da*2,p=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),b=Math.max(p,v);if(b<g){const y=b+m,w=Math.min(g,y),_=y-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});eB.displayName=P1;var tB="SelectGroup",[Noe,Soe]=Sh(tB),Coe=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Ss();return s.jsx(Noe,{scope:r,id:a,children:s.jsx(Ne.div,{role:"group","aria-labelledby":a,...n,ref:t})})});Coe.displayName=tB;var rB="SelectLabel",nB=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Soe(rB,r);return s.jsx(Ne.div,{id:a.id,...n,ref:t})});nB.displayName=rB;var Ix="SelectItem",[koe,sB]=Sh(Ix),aB=x.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=Gl(Ix,r),c=Yl(Ix,r),u=l.value===n,[d,f]=x.useState(i??""),[h,m]=x.useState(!1),g=We(t,y=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,y,n,a)}),p=Ss(),v=x.useRef("touch"),b=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(koe,{scope:r,value:n,disabled:a,textId:p,isSelected:u,onItemTextChange:x.useCallback(y=>{f(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(F0.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:s.jsx(Ne.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:fe(o.onFocus,()=>m(!0)),onBlur:fe(o.onBlur,()=>m(!1)),onClick:fe(o.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:fe(o.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:fe(o.onPointerDown,y=>{v.current=y.pointerType}),onPointerMove:fe(o.onPointerMove,y=>{var w;v.current=y.pointerType,a?(w=c.onItemLeave)==null||w.call(c):v.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:fe(o.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:fe(o.onKeyDown,y=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&y.key===" "||(foe.includes(y.key)&&b(),y.key===" "&&y.preventDefault())})})})})});aB.displayName=Ix;var Tm="SelectItemText",iB=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Gl(Tm,r),l=Yl(Tm,r),c=sB(Tm,r),u=goe(Tm,r),[d,f]=x.useState(null),h=We(t,b=>f(b),c.onItemTextChange,b=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,b,c.value,c.disabled)}),m=d==null?void 0:d.textContent,g=x.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:v}=u;return Br(()=>(p(g),()=>v(g)),[p,v,g]),s.jsxs(s.Fragment,{children:[s.jsx(Ne.span,{id:c.textId,...i,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ru.createPortal(i.children,o.valueNode):null]})});iB.displayName=Tm;var oB="SelectItemIndicator",lB=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return sB(oB,r).isSelected?s.jsx(Ne.span,{"aria-hidden":!0,...n,ref:t}):null});lB.displayName=oB;var A1="SelectScrollUpButton",cB=x.forwardRef((e,t)=>{const r=Yl(A1,e.__scopeSelect),n=iE(A1,e.__scopeSelect),[a,i]=x.useState(!1),o=We(t,n.onScrollButtonChange);return Br(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(dB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});cB.displayName=A1;var O1="SelectScrollDownButton",uB=x.forwardRef((e,t)=>{const r=Yl(O1,e.__scopeSelect),n=iE(O1,e.__scopeSelect),[a,i]=x.useState(!1),o=We(t,n.onScrollButtonChange);return Br(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(dB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});uB.displayName=O1;var dB=x.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Yl("SelectScrollButton",r),o=x.useRef(null),l=U0(r),c=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>c(),[c]),Br(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(Ne.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:fe(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:fe(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:fe(a.onPointerLeave,()=>{c()})})}),Eoe="SelectSeparator",fB=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Ne.div,{"aria-hidden":!0,...n,ref:t})});fB.displayName=Eoe;var T1="SelectArrow",Poe=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=B0(r),i=Gl(T1,r),o=Yl(T1,r);return i.open&&o.position==="popper"?s.jsx(w0,{...a,...n,ref:t}):null});Poe.displayName=T1;var Aoe="SelectBubbleInput",hB=x.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=x.useRef(null),i=We(n,a),o=Yg(t);return x.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Ne.select,{...r,style:{...kL,...r.style},ref:i,defaultValue:t})});hB.displayName=Aoe;function mB(e){return e===""||e===void 0}function pB(e){const t=Ur(e),r=x.useRef(""),n=x.useRef(0),a=x.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=x.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function gB(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=Ooe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function Ooe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Toe=VU,vB=WU,Doe=KU,Roe=GU,Moe=YU,yB=XU,$oe=eB,xB=nB,bB=aB,Ioe=iB,Loe=lB,wB=cB,jB=uB,_B=fB;const Me=Toe,$e=Doe,Te=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(vB,{ref:n,className:Q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(Roe,{asChild:!0,children:s.jsx(f0,{className:"h-4 w-4 opacity-50"})})]}));Te.displayName=vB.displayName;const NB=x.forwardRef(({className:e,...t},r)=>s.jsx(wB,{ref:r,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(rG,{className:"h-4 w-4"})}));NB.displayName=wB.displayName;const SB=x.forwardRef(({className:e,...t},r)=>s.jsx(jB,{ref:r,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(f0,{className:"h-4 w-4"})}));SB.displayName=jB.displayName;const De=x.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(Moe,{children:s.jsxs(yB,{ref:a,className:Q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(NB,{}),s.jsx($oe,{className:Q("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(SB,{})]})}));De.displayName=yB.displayName;const Foe=x.forwardRef(({className:e,...t},r)=>s.jsx(xB,{ref:r,className:Q("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Foe.displayName=xB.displayName;const W=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(bB,{ref:n,className:Q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Loe,{children:s.jsx(fh,{className:"h-4 w-4"})})}),s.jsx(Ioe,{children:t})]}));W.displayName=bB.displayName;const Uoe=x.forwardRef(({className:e,...t},r)=>s.jsx(_B,{ref:r,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));Uoe.displayName=_B.displayName;var z0="Dialog",[CB,kB]=zr(z0),[Boe,li]=CB(z0),EB=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=x.useRef(null),c=x.useRef(null),[u,d]=qn({prop:n,defaultProp:a??!1,onChange:i,caller:z0});return s.jsx(Boe,{scope:t,triggerRef:l,contentRef:c,contentId:Ss(),titleId:Ss(),descriptionId:Ss(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};EB.displayName=z0;var PB="DialogTrigger",AB=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=li(PB,r),i=We(t,a.triggerRef);return s.jsx(Ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":cE(a.open),...n,ref:i,onClick:fe(e.onClick,a.onOpenToggle)})});AB.displayName=PB;var oE="DialogPortal",[zoe,OB]=CB(oE,{forceMount:void 0}),TB=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=li(oE,t);return s.jsx(zoe,{scope:t,forceMount:r,children:x.Children.map(n,o=>s.jsx(en,{present:r||i.open,children:s.jsx(uh,{asChild:!0,container:a,children:o})}))})};TB.displayName=oE;var Lx="DialogOverlay",DB=x.forwardRef((e,t)=>{const r=OB(Lx,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=li(Lx,e.__scopeDialog);return i.modal?s.jsx(en,{present:n||i.open,children:s.jsx(qoe,{...a,ref:t})}):null});DB.displayName=Lx;var Voe=Dl("DialogOverlay.RemoveScroll"),qoe=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=li(Lx,r);return s.jsx(qg,{as:Voe,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Ne.div,{"data-state":cE(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Su="DialogContent",RB=x.forwardRef((e,t)=>{const r=OB(Su,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=li(Su,e.__scopeDialog);return s.jsx(en,{present:n||i.open,children:i.modal?s.jsx(Woe,{...a,ref:t}):s.jsx(Hoe,{...a,ref:t})})});RB.displayName=Su;var Woe=x.forwardRef((e,t)=>{const r=li(Su,e.__scopeDialog),n=x.useRef(null),a=We(t,r.contentRef,n);return x.useEffect(()=>{const i=n.current;if(i)return A0(i)},[]),s.jsx(MB,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:fe(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:fe(e.onFocusOutside,i=>i.preventDefault())})}),Hoe=x.forwardRef((e,t)=>{const r=li(Su,e.__scopeDialog),n=x.useRef(!1),a=x.useRef(!1);return s.jsx(MB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),MB=x.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=li(Su,r),c=x.useRef(null),u=We(t,c);return P0(),s.jsxs(s.Fragment,{children:[s.jsx(zg,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Mu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":cE(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Goe,{titleId:l.titleId}),s.jsx(Xoe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),lE="DialogTitle",$B=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=li(lE,r);return s.jsx(Ne.h2,{id:a.titleId,...n,ref:t})});$B.displayName=lE;var IB="DialogDescription",LB=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=li(IB,r);return s.jsx(Ne.p,{id:a.descriptionId,...n,ref:t})});LB.displayName=IB;var FB="DialogClose",UB=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=li(FB,r);return s.jsx(Ne.button,{type:"button",...n,ref:t,onClick:fe(e.onClick,()=>a.onOpenChange(!1))})});UB.displayName=FB;function cE(e){return e?"open":"closed"}var BB="DialogTitleWarning",[Koe,zB]=iK(BB,{contentName:Su,titleName:lE,docsSlug:"dialog"}),Goe=({titleId:e})=>{const t=zB(BB),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Yoe="DialogDescriptionWarning",Xoe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zB(Yoe).contentName}}.`;return x.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},uE=EB,VB=AB,dE=TB,Xg=DB,Qg=RB,Zg=$B,Jg=LB,V0=UB;const $t=uE,ev=VB,Qoe=dE,qB=x.forwardRef(({className:e,...t},r)=>s.jsx(Xg,{ref:r,className:Q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));qB.displayName=Xg.displayName;const Tt=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Qoe,{children:[s.jsx(qB,{}),s.jsxs(Qg,{ref:n,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(V0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Bn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Tt.displayName=Qg.displayName;const Dt=({className:e,...t})=>s.jsx("div",{className:Q("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Dt.displayName="DialogHeader";const fr=({className:e,...t})=>s.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});fr.displayName="DialogFooter";const Rt=x.forwardRef(({className:e,...t},r)=>s.jsx(Zg,{ref:r,className:Q("text-lg font-semibold leading-none tracking-tight",e),...t}));Rt.displayName=Zg.displayName;const Mt=x.forwardRef(({className:e,...t},r)=>s.jsx(Jg,{ref:r,className:Q("text-sm text-muted-foreground",e),...t}));Mt.displayName=Jg.displayName;const Zoe=Os({firstName:Ze().min(1,"First name is required").max(50,"First name must be less than 50 characters").trim(),lastName:Ze().min(1,"Last name is required").max(50,"Last name must be less than 50 characters").trim(),email:Ze().min(1,"Email is required").email("Please enter a valid email address").max(255,"Email must be less than 255 characters").trim(),phone:Ze().max(20,"Phone must be less than 20 characters").regex(/^[0-9\s\-\+\(\)]*$/,"Please enter a valid phone number").optional().or(kc("")),position:Ze().min(1,"Position is required").max(100,"Position must be less than 100 characters").trim(),department:Ze().max(100,"Department must be less than 100 characters").trim().optional().or(kc("")),employmentType:Bu(["casual","part_time","full_time","contractor"]),payRate:Ze().regex(/^(\d+(\.\d{0,2})?)?$/,"Please enter a valid pay rate").refine(e=>{if(!e)return!0;const t=parseFloat(e);return t>=0&&t<=9999.99},"Pay rate must be between 0 and 9999.99").optional().or(kc(""))}),Joe=Os({title:Ze().max(200,"Title must be less than 200 characters").trim().optional().or(kc("")),employee_name:Ze().min(1,"Employee name is required").max(100,"Employee name must be less than 100 characters").trim(),employee_email:Ze().min(1,"Employee email is required").email("Please enter a valid email address").max(255,"Email must be less than 255 characters").trim(),position:Ze().min(1,"Position is required").max(100,"Position must be less than 100 characters").trim(),department:Ze().max(100,"Department must be less than 100 characters").trim().optional().or(kc("")),start_date:Ze().regex(/^(\d{4}-\d{2}-\d{2})?$/,"Please enter a valid date").optional().or(kc("")),pay_rate:Ze().regex(/^(\d+(\.\d{0,2})?)?$/,"Please enter a valid pay rate").refine(e=>{if(!e)return!0;const t=parseFloat(e);return t>=0&&t<=9999.99},"Pay rate must be between 0 and 9999.99").optional().or(kc("")),employment_type:Bu(["casual","part_time","full_time","contractor"]),content:Ze().min(10,"Contract content must be at least 10 characters").max(5e4,"Contract content must be less than 50000 characters")}),uT={firstName:"",lastName:"",email:"",phone:"",position:"",department:"",employmentType:"casual",payRate:""};function ele({open:e,onOpenChange:t,onAdd:r}){var S,k,C,P;const[n,a]=x.useState(uT),[i,o]=x.useState({}),[l,c]=x.useState(null),[u,d]=x.useState(null),[f,h]=x.useState(!1),m=x.useRef(null),{data:g=[]}=sr({queryKey:["departments"],queryFn:async()=>{const{data:A,error:E}=await M.from("departments").select("*").order("name");if(E)throw E;return A}}),{data:p=[]}=sr({queryKey:["positions"],queryFn:async()=>{const{data:A,error:E}=await M.from("positions").select("*, departments(name)").order("name");if(E)throw E;return A}}),v=n.department?p.filter(A=>{const E=g.find(R=>R.name===n.department);return E?A.department_id===E.id:!0}):p,b=A=>{var R;const E=(R=A.target.files)==null?void 0:R[0];if(E){if(E.size>5*1024*1024){oe({title:"File too large",description:"Please select an image under 5MB",variant:"destructive"});return}if(!E.type.startsWith("image/")){oe({title:"Invalid file type",description:"Please select an image file",variant:"destructive"});return}c(E),d(URL.createObjectURL(E))}},y=()=>{c(null),u&&(URL.revokeObjectURL(u),d(null)),m.current&&(m.current.value="")},w=async()=>{if(!l)return null;const A=l.name.split(".").pop(),E=`${Date.now()}-${Math.random().toString(36).substring(2)}.${A}`,{error:R}=await M.storage.from("employee-avatars").upload(E,l);if(R)throw console.error("Upload error:",R),R;const{data:{publicUrl:$}}=M.storage.from("employee-avatars").getPublicUrl(E);return $},_=()=>{const A=Zoe.safeParse(n);if(!A.success){const E={};return A.error.errors.forEach(R=>{const $=R.path[0];E[$]||(E[$]=R.message)}),o(E),!1}return o({}),!0},j=async()=>{var A,E;if(!_()){oe({title:"Validation Error",description:"Please fix the errors in the form",variant:"destructive"});return}h(!0);try{let R;l&&(R=await w()||void 0),r({firstName:n.firstName.trim(),lastName:n.lastName.trim(),email:n.email.trim(),phone:((A=n.phone)==null?void 0:A.trim())||"",position:n.position.trim(),department:((E=n.department)==null?void 0:E.trim())||"",employmentType:n.employmentType,payRate:n.payRate?parseFloat(n.payRate):0,avatar:R}),a(uT),o({}),y(),t(!1)}catch(R){console.error("Error adding employee:",R),oe({title:"Upload Error",description:"Failed to upload employee photo. Please try again.",variant:"destructive"})}finally{h(!1)}},N=(A,E)=>{a({...n,[A]:E}),i[A]&&o({...i,[A]:void 0})};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-lg",children:[s.jsxs(Dt,{children:[s.jsxs(Rt,{className:"flex items-center gap-2",children:[s.jsx(mu,{className:"h-5 w-5 text-primary"}),"Add New Employee"]}),s.jsx(Mt,{children:"Enter the details for the new employee"})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Pr,{className:"h-24 w-24",children:u?s.jsx(Bg,{src:u,alt:"Employee photo"}):s.jsxs(Ar,{className:"bg-muted text-muted-foreground text-2xl",children:[((k=(S=n.firstName)==null?void 0:S[0])==null?void 0:k.toUpperCase())||"?",((P=(C=n.lastName)==null?void 0:C[0])==null?void 0:P.toUpperCase())||""]})}),u&&s.jsx(I,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:y,children:s.jsx(Bn,{className:"h-3 w-3"})})]}),s.jsxs("div",{children:[s.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:b,className:"hidden"}),s.jsxs(I,{type:"button",variant:"outline",size:"sm",onClick:()=>{var A;return(A=m.current)==null?void 0:A.click()},children:[s.jsx(Ml,{className:"h-4 w-4 mr-2"}),u?"Change Photo":"Upload Photo"]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Personal Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"firstName",children:"First Name *"}),s.jsx(J,{id:"firstName",value:n.firstName,onChange:A=>N("firstName",A.target.value),placeholder:"John",className:i.firstName?"border-destructive":"",maxLength:50}),i.firstName&&s.jsx("p",{className:"text-xs text-destructive",children:i.firstName})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"lastName",children:"Last Name *"}),s.jsx(J,{id:"lastName",value:n.lastName,onChange:A=>N("lastName",A.target.value),placeholder:"Smith",className:i.lastName?"border-destructive":"",maxLength:50}),i.lastName&&s.jsx("p",{className:"text-xs text-destructive",children:i.lastName})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"email",children:"Email *"}),s.jsx(J,{id:"email",type:"email",value:n.email,onChange:A=>N("email",A.target.value),placeholder:"john@example.com",className:i.email?"border-destructive":"",maxLength:255}),i.email&&s.jsx("p",{className:"text-xs text-destructive",children:i.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"phone",children:"Phone"}),s.jsx(J,{id:"phone",value:n.phone||"",onChange:A=>N("phone",A.target.value),placeholder:"0400 000 000",className:i.phone?"border-destructive":"",maxLength:20}),i.phone&&s.jsx("p",{className:"text-xs text-destructive",children:i.phone})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Employment Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"department",children:"Department"}),s.jsxs(Me,{value:n.department||"none",onValueChange:A=>{N("department",A==="none"?"":A),n.position&&N("position","")},children:[s.jsx(Te,{className:i.department?"border-destructive":"",children:s.jsx($e,{placeholder:"Select department"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"none",children:"No department"}),g.map(A=>s.jsx(W,{value:A.name,children:A.name},A.id))]})]}),i.department&&s.jsx("p",{className:"text-xs text-destructive",children:i.department})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"position",children:"Position *"}),s.jsxs(Me,{value:n.position||"none",onValueChange:A=>N("position",A==="none"?"":A),children:[s.jsx(Te,{className:i.position?"border-destructive":"",children:s.jsx($e,{placeholder:"Select position"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"none",children:"Select a position"}),v.map(A=>s.jsx(W,{value:A.name,children:A.name},A.id))]})]}),i.position&&s.jsx("p",{className:"text-xs text-destructive",children:i.position})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"employmentType",children:"Employment Type"}),s.jsxs(Me,{value:n.employmentType,onValueChange:A=>N("employmentType",A),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"casual",children:"Casual"}),s.jsx(W,{value:"part_time",children:"Part-Time"}),s.jsx(W,{value:"full_time",children:"Full-Time"}),s.jsx(W,{value:"contractor",children:"Contractor"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"payRate",children:"Pay Rate ($/hr)"}),s.jsx(J,{id:"payRate",type:"text",inputMode:"decimal",value:n.payRate||"",onChange:A=>N("payRate",A.target.value),placeholder:"40.00",className:i.payRate?"border-destructive":""}),i.payRate&&s.jsx("p",{className:"text-xs text-destructive",children:i.payRate})]})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(I,{variant:"outline",onClick:()=>t(!1),className:"flex-1",disabled:f,children:"Cancel"}),s.jsx(I,{className:"flex-1 gradient-primary",onClick:j,disabled:f,children:f?"Adding...":"Add Employee"})]})]})]})})}const Oo=uE,tle=dE,WB=x.forwardRef(({className:e,...t},r)=>s.jsx(Xg,{className:Q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));WB.displayName=Xg.displayName;const rle=dh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ui=x.forwardRef(({side:e="right",className:t,children:r,...n},a)=>s.jsxs(tle,{children:[s.jsx(WB,{}),s.jsxs(Qg,{ref:a,className:Q(rle({side:e}),t),...n,children:[r,s.jsxs(V0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Bn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ui.displayName=Qg.displayName;const Bi=({className:e,...t})=>s.jsx("div",{className:Q("flex flex-col space-y-2 text-center sm:text-left",e),...t});Bi.displayName="SheetHeader";const zi=x.forwardRef(({className:e,...t},r)=>s.jsx(Zg,{ref:r,className:Q("text-lg font-semibold text-foreground",e),...t}));zi.displayName=Zg.displayName;const To=x.forwardRef(({className:e,...t},r)=>s.jsx(Jg,{ref:r,className:Q("text-sm text-muted-foreground",e),...t}));To.displayName=Jg.displayName;function nle(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var fE="ScrollArea",[HB,u3e]=zr(fE),[sle,_a]=HB(fE),KB=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=x.useState(null),[u,d]=x.useState(null),[f,h]=x.useState(null),[m,g]=x.useState(null),[p,v]=x.useState(null),[b,y]=x.useState(0),[w,_]=x.useState(0),[j,N]=x.useState(!1),[S,k]=x.useState(!1),C=We(t,A=>c(A)),P=Hl(a);return s.jsx(sle,{scope:r,type:n,dir:P,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:j,onScrollbarXEnabledChange:N,scrollbarY:p,onScrollbarYChange:v,scrollbarYEnabled:S,onScrollbarYEnabledChange:k,onCornerWidthChange:y,onCornerHeightChange:_,children:s.jsx(Ne.div,{dir:P,...o,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});KB.displayName=fE;var GB="ScrollAreaViewport",YB=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=_a(GB,r),l=x.useRef(null),c=We(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(Ne.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});YB.displayName=GB;var Vi="ScrollAreaScrollbar",hE=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=_a(Vi,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return x.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(ale,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(ile,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(XB,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(mE,{...n,ref:t}):null});hE.displayName=Vi;var ale=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=_a(Vi,e.__scopeScrollArea),[i,o]=x.useState(!1);return x.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(en,{present:r||i,children:s.jsx(XB,{"data-state":i?"visible":"hidden",...n,ref:t})})}),ile=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=_a(Vi,e.__scopeScrollArea),i=e.orientation==="horizontal",o=W0(()=>c("SCROLL_END"),100),[l,c]=nle("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),x.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const m=u[d];f!==m&&(c("SCROLL"),o()),f=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,i,c,o]),s.jsx(en,{present:r||l!=="hidden",children:s.jsx(mE,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:fe(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:fe(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),XB=x.forwardRef((e,t)=>{const r=_a(Vi,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=x.useState(!1),l=e.orientation==="horizontal",c=W0(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Tf(r.viewport,c),Tf(r.content,c),s.jsx(en,{present:n||i,children:s.jsx(mE,{"data-state":i?"visible":"hidden",...a,ref:t})})}),mE=x.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=_a(Vi,e.__scopeScrollArea),i=x.useRef(null),o=x.useRef(0),[l,c]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=t6(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,m){return fle(h,o.current,l,m)}return r==="horizontal"?s.jsx(ole,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,m=dT(h,l,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?s.jsx(lle,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,m=dT(h,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),ole=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=_a(Vi,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),u=We(t,c,i.onScrollbarXChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(ZB,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":q0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),n6(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ux(o.paddingLeft),paddingEnd:Ux(o.paddingRight)}})}})}),lle=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=_a(Vi,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),u=We(t,c,i.onScrollbarYChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(ZB,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":q0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),n6(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ux(o.paddingTop),paddingEnd:Ux(o.paddingBottom)}})}})}),[cle,QB]=HB(Vi),ZB=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=e,m=_a(Vi,r),[g,p]=x.useState(null),v=We(t,C=>p(C)),b=x.useRef(null),y=x.useRef(""),w=m.viewport,_=n.content-n.viewport,j=Ur(d),N=Ur(c),S=W0(f,10);function k(C){if(b.current){const P=C.clientX-b.current.left,A=C.clientY-b.current.top;u({x:P,y:A})}}return x.useEffect(()=>{const C=P=>{const A=P.target;(g==null?void 0:g.contains(A))&&j(P,_)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[w,g,_,j]),x.useEffect(N,[n,N]),Tf(g,S),Tf(m.content,S),s.jsx(cle,{scope:r,scrollbar:g,hasThumb:a,onThumbChange:Ur(i),onThumbPointerUp:Ur(o),onThumbPositionChange:N,onThumbPointerDown:Ur(l),children:s.jsx(Ne.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:fe(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),b.current=g.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),k(C))}),onPointerMove:fe(e.onPointerMove,k),onPointerUp:fe(e.onPointerUp,C=>{const P=C.target;P.hasPointerCapture(C.pointerId)&&P.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),Fx="ScrollAreaThumb",JB=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=QB(Fx,e.__scopeScrollArea);return s.jsx(en,{present:r||a.hasThumb,children:s.jsx(ule,{ref:t,...n})})}),ule=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=_a(Fx,r),o=QB(Fx,r),{onThumbPositionChange:l}=o,c=We(t,f=>o.onThumbChange(f)),u=x.useRef(void 0),d=W0(()=>{u.current&&(u.current(),u.current=void 0)},100);return x.useEffect(()=>{const f=i.viewport;if(f){const h=()=>{if(d(),!u.current){const m=hle(f,l);u.current=m,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[i.viewport,d,l]),s.jsx(Ne.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:fe(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),g=f.clientX-m.left,p=f.clientY-m.top;o.onThumbPointerDown({x:g,y:p})}),onPointerUp:fe(e.onPointerUp,o.onThumbPointerUp)})});JB.displayName=Fx;var pE="ScrollAreaCorner",e6=x.forwardRef((e,t)=>{const r=_a(pE,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(dle,{...e,ref:t}):null});e6.displayName=pE;var dle=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=_a(pE,r),[i,o]=x.useState(0),[l,c]=x.useState(0),u=!!(i&&l);return Tf(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),Tf(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?s.jsx(Ne.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Ux(e){return e?parseInt(e,10):0}function t6(e,t){const r=e/t;return isNaN(r)?0:r}function q0(e){const t=t6(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function fle(e,t,r,n="ltr"){const a=q0(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return r6([c,u],f)(e)}function dT(e,t,r="ltr"){const n=q0(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],u=Bp(e,c);return r6([0,o],[0,l])(u)}function r6(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function n6(e,t){return e>0&&e<t}var hle=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function W0(e,t){const r=Ur(e),n=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),x.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Tf(e,t){const r=Ur(t);Br(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var s6=KB,mle=YB,ple=e6;const zu=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(s6,{ref:n,className:Q("relative overflow-hidden",e),...r,children:[s.jsx(mle,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(a6,{}),s.jsx(ple,{})]}));zu.displayName=s6.displayName;const a6=x.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(hE,{ref:n,orientation:t,className:Q("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(JB,{className:"relative flex-1 rounded-full bg-border"})}));a6.displayName=hE.displayName;var gE="Progress",vE=100,[gle,d3e]=zr(gE),[vle,yle]=gle(gE),i6=x.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=xle,...o}=e;(a||a===0)&&!fT(a)&&console.error(ble(`${a}`,"Progress"));const l=fT(a)?a:vE;n!==null&&!hT(n,l)&&console.error(wle(`${n}`,"Progress"));const c=hT(n,l)?n:null,u=Bx(c)?i(c,l):void 0;return s.jsx(vle,{scope:r,value:c,max:l,children:s.jsx(Ne.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Bx(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":c6(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});i6.displayName=gE;var o6="ProgressIndicator",l6=x.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=yle(o6,r);return s.jsx(Ne.div,{"data-state":c6(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});l6.displayName=o6;function xle(e,t){return`${Math.round(e/t*100)}%`}function c6(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Bx(e){return typeof e=="number"}function fT(e){return Bx(e)&&!isNaN(e)&&e>0}function hT(e,t){return Bx(e)&&!isNaN(e)&&e<=t&&e>=0}function ble(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${vE}\`.`}function wle(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${vE} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var u6=i6,jle=l6;const Ks=x.forwardRef(({className:e,value:t,...r},n)=>s.jsx(u6,{ref:n,className:Q("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:s.jsx(jle,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ks.displayName=u6.displayName;var H0="Popover",[d6,f3e]=zr(H0,[ql]),tv=ql(),[_le,Xl]=d6(H0),f6=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=tv(t),c=x.useRef(null),[u,d]=x.useState(!1),[f,h]=qn({prop:n,defaultProp:a??!1,onChange:i,caller:H0});return s.jsx(x0,{...l,children:s.jsx(_le,{scope:t,contentId:Ss(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>d(!0),[]),onCustomAnchorRemove:x.useCallback(()=>d(!1),[]),modal:o,children:r})})};f6.displayName=H0;var h6="PopoverAnchor",Nle=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Xl(h6,r),i=tv(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return x.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Lg,{...i,...n,ref:t})});Nle.displayName=h6;var m6="PopoverTrigger",p6=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Xl(m6,r),i=tv(r),o=We(t,a.triggerRef),l=s.jsx(Ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":b6(a.open),...n,ref:o,onClick:fe(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(Lg,{asChild:!0,...i,children:l})});p6.displayName=m6;var yE="PopoverPortal",[Sle,Cle]=d6(yE,{forceMount:void 0}),g6=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=Xl(yE,t);return s.jsx(Sle,{scope:t,forceMount:r,children:s.jsx(en,{present:r||i.open,children:s.jsx(uh,{asChild:!0,container:a,children:n})})})};g6.displayName=yE;var Df="PopoverContent",v6=x.forwardRef((e,t)=>{const r=Cle(Df,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=Xl(Df,e.__scopePopover);return s.jsx(en,{present:n||i.open,children:i.modal?s.jsx(Ele,{...a,ref:t}):s.jsx(Ple,{...a,ref:t})})});v6.displayName=Df;var kle=Dl("PopoverContent.RemoveScroll"),Ele=x.forwardRef((e,t)=>{const r=Xl(Df,e.__scopePopover),n=x.useRef(null),a=We(t,n),i=x.useRef(!1);return x.useEffect(()=>{const o=n.current;if(o)return A0(o)},[]),s.jsx(qg,{as:kle,allowPinchZoom:!0,children:s.jsx(y6,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:fe(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:fe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ple=x.forwardRef((e,t)=>{const r=Xl(Df,e.__scopePopover),n=x.useRef(!1),a=x.useRef(!1);return s.jsx(y6,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),y6=x.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=Xl(Df,r),m=tv(r);return P0(),s.jsx(zg,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:s.jsx(b0,{"data-state":b6(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),x6="PopoverClose",Ale=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Xl(x6,r);return s.jsx(Ne.button,{type:"button",...n,ref:t,onClick:fe(e.onClick,()=>a.onOpenChange(!1))})});Ale.displayName=x6;var Ole="PopoverArrow",Tle=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=tv(r);return s.jsx(w0,{...a,...n,ref:t})});Tle.displayName=Ole;function b6(e){return e?"open":"closed"}var Dle=f6,Rle=p6,Mle=g6,w6=v6;const Mi=Dle,$i=Rle,ti=x.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(Mle,{children:s.jsx(w6,{ref:a,align:t,sideOffset:r,className:Q("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ti.displayName=w6.displayName;var rt=function(){return rt=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},rt.apply(this,arguments)};function $le(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function j6(e,t,r){for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function rv(e){return e.mode==="multiple"}function nv(e){return e.mode==="range"}function K0(e){return e.mode==="single"}var Ile={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Lle(e,t){return ne(e,"LLLL y",t)}function Fle(e,t){return ne(e,"d",t)}function Ule(e,t){return ne(e,"LLLL",t)}function Ble(e){return"".concat(e)}function zle(e,t){return ne(e,"cccccc",t)}function Vle(e,t){return ne(e,"yyyy",t)}var qle=Object.freeze({__proto__:null,formatCaption:Lle,formatDay:Fle,formatMonthCaption:Ule,formatWeekNumber:Ble,formatWeekdayName:zle,formatYearCaption:Vle}),Wle=function(e,t,r){return ne(e,"do MMMM (EEEE)",r)},Hle=function(){return"Month: "},Kle=function(){return"Go to next month"},Gle=function(){return"Go to previous month"},Yle=function(e,t){return ne(e,"cccc",t)},Xle=function(e){return"Week n. ".concat(e)},Qle=function(){return"Year: "},Zle=Object.freeze({__proto__:null,labelDay:Wle,labelMonthDropdown:Hle,labelNext:Kle,labelPrevious:Gle,labelWeekNumber:Xle,labelWeekday:Yle,labelYearDropdown:Qle});function Jle(){var e="buttons",t=Ile,r=Gk,n={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:qle,labels:Zle,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function ece(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=Cs(n):t&&(i=new Date(t,0,1)),a?o=M0(a):r&&(o=new Date(r,11,31)),{fromDate:i?Nf(i):void 0,toDate:o?Nf(o):void 0}}var _6=x.createContext(void 0);function tce(e){var t,r=e.initialProps,n=Jle(),a=ece(r),i=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(K0(r)||rv(r)||nv(r))&&(c=r.onSelect);var u=rt(rt(rt({},n),r),{captionLayout:l,classNames:rt(rt({},n.classNames),r.classNames),components:rt({},r.components),formatters:rt(rt({},n.formatters),r.formatters),fromDate:i,labels:rt(rt({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:rt(rt({},n.modifiers),r.modifiers),modifiersClassNames:rt(rt({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:rt(rt({},n.styles),r.styles),toDate:o});return s.jsx(_6.Provider,{value:u,children:e.children})}function hr(){var e=x.useContext(_6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function N6(e){var t=hr(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function rce(e){return s.jsx("svg",rt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function S6(e){var t,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,u=hr(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:rce;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:n,children:i}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function nce(e){var t,r=hr(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var f=[];if(kae(n,a))for(var h=Cs(n),m=n.getMonth();m<=a.getMonth();m++)f.push(Zj(h,m));else for(var h=Cs(new Date),m=0;m<=11;m++)f.push(Zj(h,m));var g=function(v){var b=Number(v.target.value),y=Zj(Cs(e.displayMonth),b);e.onChange(y)},p=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:S6;return s.jsx(p,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(v){return s.jsx("option",{value:v.getMonth(),children:l(v,{locale:o})},v.getMonth())})})}function sce(e){var t,r=e.displayMonth,n=hr(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!a)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});for(var m=a.getFullYear(),g=i.getFullYear(),p=m;p<=g;p++)h.push(IO(iU(new Date),p));var v=function(y){var w=IO(Cs(r),Number(y.target.value));e.onChange(w)},b=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:S6;return s.jsx(b,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:r.getFullYear(),caption:d(r,{locale:o}),children:h.map(function(y){return s.jsx("option",{value:y.getFullYear(),children:d(y,{locale:o})},y.getFullYear())})})}function ace(e,t){var r=x.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function ice(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&Cf(i,a)<0){var u=-1*(c-1);a=Ja(i,u)}return o&&Cf(a,o)<0&&(a=o),Cs(a)}function oce(){var e=hr(),t=ice(e),r=ace(t,e.month),n=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var c=Cs(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,i]}function lce(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Cs(e),i=Cs(Ja(a,n)),o=Cf(i,a),l=[],c=0;c<o;c++){var u=Ja(a,c);l.push(u)}return r&&(l=l.reverse()),l}function cce(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Cs(e);if(!r)return Ja(l,o);var c=Cf(r,e);if(!(c<i))return Ja(l,o)}}function uce(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Cs(e);if(!r)return Ja(l,-o);var c=Cf(l,r);if(!(c<=0))return Ja(l,-o)}}var C6=x.createContext(void 0);function dce(e){var t=hr(),r=oce(),n=r[0],a=r[1],i=lce(n,t),o=cce(n,t),l=uce(n,t),c=function(f){return i.some(function(h){return Yk(f,h)})},u=function(f,h){c(f)||(h&&hU(f,h)?a(Ja(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(C6.Provider,{value:d,children:e.children})}function sv(){var e=x.useContext(C6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function mT(e){var t,r=hr(),n=r.classNames,a=r.styles,i=r.components,o=sv().goToMonth,l=function(d){o(Ja(d,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:N6,u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:u}),s.jsx(nce,{onChange:l,displayMonth:e.displayMonth}),s.jsx(sce,{onChange:l,displayMonth:e.displayMonth})]})}function fce(e){return s.jsx("svg",rt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function hce(e){return s.jsx("svg",rt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var zx=x.forwardRef(function(e,t){var r=hr(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),l=rt(rt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",rt({},e,{ref:t,type:"button",className:o,style:l}))});function mce(e){var t,r,n=hr(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var h=u(e.previousMonth,{locale:i}),m=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:i}),p=[o.nav_button,o.nav_button_next].join(" "),v=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:hce,b=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:fce;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(zx,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(v,{className:o.nav_icon,style:l.nav_icon}):s.jsx(b,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(zx,{name:"next-month","aria-label":g,className:p,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(b,{className:o.nav_icon,style:l.nav_icon}):s.jsx(v,{className:o.nav_icon,style:l.nav_icon})})]})}function pT(e){var t=hr().numberOfMonths,r=sv(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(g){return Yk(e.displayMonth,g)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){n&&i(n)},m=function(){a&&i(a)};return s.jsx(mce,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:m})}function pce(e){var t,r=hr(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:N6,u;return a?u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=s.jsx(mT,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(mT,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(pT,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(pT,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:i.caption,children:u})}function gce(e){var t=hr(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?s.jsx("tfoot",{className:a,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function vce(e,t,r){for(var n=r?yu(new Date):Ti(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=ln(n,i);a.push(o)}return a}function yce(){var e=hr(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=vce(a,i,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},f)})]})}function xce(){var e,t=hr(),r=t.classNames,n=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:yce;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(i,{})})}function bce(e){var t=hr(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var xE=x.createContext(void 0);function wce(e){if(!rv(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(xE.Provider,{value:t,children:e.children})}return s.jsx(jce,{initialProps:e.initialProps,children:e.children})}function jce(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,o=function(u,d,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var g=!!(d.selected&&a&&(n==null?void 0:n.length)===a);if(!g){var p=!!(!d.selected&&i&&(n==null?void 0:n.length)===i);if(!p){var v=n?j6([],n):[];if(d.selected){var b=v.findIndex(function(y){return Zn(u,y)});v.splice(b,1)}else v.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,v,u,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=i&&n.length>i-1,f=n.some(function(h){return Zn(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(xE.Provider,{value:c,children:r})}function bE(){var e=x.useContext(xE);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function _ce(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?Zn(a,e)&&Zn(n,e)?void 0:Zn(a,e)?{from:a,to:void 0}:Zn(n,e)?void 0:b1(n,e)?{from:e,to:a}:{from:n,to:e}:a?b1(e,a)?{from:a,to:e}:{from:e,to:a}:n?hU(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var wE=x.createContext(void 0);function Nce(e){if(!nv(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(wE.Provider,{value:t,children:e.children})}return s.jsx(Sce,{initialProps:e.initialProps,children:e.children})}function Sce(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,o=a.to,l=t.min,c=t.max,u=function(m,g,p){var v,b;(v=t.onDayClick)===null||v===void 0||v.call(t,m,g,p);var y=_ce(m,n);(b=t.onSelect)===null||b===void 0||b.call(t,y,m,g,p)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],Zn(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),l&&(i&&!o&&d.disabled.push({after:Xj(i,l-1),before:ln(i,l-1)}),i&&o&&d.disabled.push({after:i,before:ln(i,l-1)}),!i&&o&&d.disabled.push({after:Xj(o,l-1),before:ln(o,l-1)})),c){if(i&&!o&&(d.disabled.push({before:ln(i,-c+1)}),d.disabled.push({after:ln(i,c-1)})),i&&o){var f=pa(o,i)+1,h=c-f;d.disabled.push({before:Xj(i,h)}),d.disabled.push({after:ln(o,h)})}!i&&o&&(d.disabled.push({before:ln(o,-c+1)}),d.disabled.push({after:ln(o,c-1)}))}return s.jsx(wE.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function jE(){var e=x.useContext(wE);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Ry(e){return Array.isArray(e)?j6([],e):e!==void 0?[e]:[]}function Cce(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=Ry(a)}),t}var ri;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(ri||(ri={}));var kce=ri.Selected,Gi=ri.Disabled,Ece=ri.Hidden,Pce=ri.Today,t_=ri.RangeEnd,r_=ri.RangeMiddle,n_=ri.RangeStart,Ace=ri.Outside;function Oce(e,t,r){var n,a=(n={},n[kce]=Ry(e.selected),n[Gi]=Ry(e.disabled),n[Ece]=Ry(e.hidden),n[Pce]=[e.today],n[t_]=[],n[r_]=[],n[n_]=[],n[Ace]=[],n);return e.fromDate&&a[Gi].push({before:e.fromDate}),e.toDate&&a[Gi].push({after:e.toDate}),rv(e)?a[Gi]=a[Gi].concat(t.modifiers[Gi]):nv(e)&&(a[Gi]=a[Gi].concat(r.modifiers[Gi]),a[n_]=r.modifiers[n_],a[r_]=r.modifiers[r_],a[t_]=r.modifiers[t_]),a}var k6=x.createContext(void 0);function Tce(e){var t=hr(),r=bE(),n=jE(),a=Oce(t,r,n),i=Cce(t.modifiers),o=rt(rt({},a),i);return s.jsx(k6.Provider,{value:o,children:e.children})}function E6(){var e=x.useContext(k6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Dce(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Rce(e){return!!(e&&typeof e=="object"&&"from"in e)}function Mce(e){return!!(e&&typeof e=="object"&&"after"in e)}function $ce(e){return!!(e&&typeof e=="object"&&"before"in e)}function Ice(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Lce(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=pa(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=pa(e,n)>=0&&pa(a,e)>=0;return o}return a?Zn(a,e):n?Zn(n,e):!1}function Fce(e){return Hk(e)}function Uce(e){return Array.isArray(e)&&e.every(Hk)}function Bce(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(Fce(r))return Zn(e,r);if(Uce(r))return r.includes(e);if(Rce(r))return Lce(e,r);if(Ice(r))return r.dayOfWeek.includes(e.getDay());if(Dce(r)){var n=pa(r.before,e),a=pa(r.after,e),i=n>0,o=a<0,l=b1(r.before,r.after);return l?o&&i:i||o}return Mce(r)?pa(e,r.after)>0:$ce(r)?pa(r.before,e)>0:typeof r=="function"?r(e):!1})}function _E(e,t,r){var n=Object.keys(t).reduce(function(i,o){var l=t[o];return Bce(e,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!Yk(e,r)&&(a.outside=!0),a}function zce(e,t){for(var r=Cs(e[0]),n=M0(e[e.length-1]),a,i,o=r;o<=n;){var l=_E(o,t),c=!l.disabled&&!l.hidden;if(!c){o=ln(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=ln(o,1)}return i||a}var Vce=365;function P6(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,h={day:ln,week:y1,month:Ja,year:pse,startOfWeek:function(v){return a.ISOWeek?yu(v):Ti(v,{locale:f,weekStartsOn:c})},endOfWeek:function(v){return a.ISOWeek?oU(v):Kk(v,{locale:f,weekStartsOn:c})}},m=h[r](e,n==="after"?1:-1);n==="before"&&u?m=gse([u,m]):n==="after"&&d&&(m=vse([d,m]));var g=!0;if(i){var p=_E(m,i);g=!p.disabled&&!p.hidden}return g?m:l.count>Vce?l.lastFocused:P6(m,{moveBy:r,direction:n,context:a,modifiers:i,retry:rt(rt({},l),{count:l.count+1})})}var A6=x.createContext(void 0);function qce(e){var t=sv(),r=E6(),n=x.useState(),a=n[0],i=n[1],o=x.useState(),l=o[0],c=o[1],u=zce(t.displayMonths,r),d=a??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(a),i(void 0)},h=function(v){i(v)},m=hr(),g=function(v,b){if(a){var y=P6(a,{moveBy:v,direction:b,context:m,modifiers:r});Zn(a,y)||(t.goToDate(y,a),h(y))}},p={focusedDay:a,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return s.jsx(A6.Provider,{value:p,children:e.children})}function NE(){var e=x.useContext(A6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Wce(e,t){var r=E6(),n=_E(e,r,t);return n}var SE=x.createContext(void 0);function Hce(e){if(!K0(e.initialProps)){var t={selected:void 0};return s.jsx(SE.Provider,{value:t,children:e.children})}return s.jsx(Kce,{initialProps:e.initialProps,children:e.children})}function Kce(e){var t=e.initialProps,r=e.children,n=function(i,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:n};return s.jsx(SE.Provider,{value:a,children:r})}function O6(){var e=x.useContext(SE);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Gce(e,t){var r=hr(),n=O6(),a=bE(),i=jE(),o=NE(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,p=o.focusYearBefore,v=o.focusYearAfter,b=o.focusStartOfWeek,y=o.focusEndOfWeek,w=function(L){var D,T,U,X;K0(r)?(D=n.onDayClick)===null||D===void 0||D.call(n,e,t,L):rv(r)?(T=a.onDayClick)===null||T===void 0||T.call(a,e,t,L):nv(r)?(U=i.onDayClick)===null||U===void 0||U.call(i,e,t,L):(X=r.onDayClick)===null||X===void 0||X.call(r,e,t,L)},_=function(L){var D;h(e),(D=r.onDayFocus)===null||D===void 0||D.call(r,e,t,L)},j=function(L){var D;f(),(D=r.onDayBlur)===null||D===void 0||D.call(r,e,t,L)},N=function(L){var D;(D=r.onDayMouseEnter)===null||D===void 0||D.call(r,e,t,L)},S=function(L){var D;(D=r.onDayMouseLeave)===null||D===void 0||D.call(r,e,t,L)},k=function(L){var D;(D=r.onDayPointerEnter)===null||D===void 0||D.call(r,e,t,L)},C=function(L){var D;(D=r.onDayPointerLeave)===null||D===void 0||D.call(r,e,t,L)},P=function(L){var D;(D=r.onDayTouchCancel)===null||D===void 0||D.call(r,e,t,L)},A=function(L){var D;(D=r.onDayTouchEnd)===null||D===void 0||D.call(r,e,t,L)},E=function(L){var D;(D=r.onDayTouchMove)===null||D===void 0||D.call(r,e,t,L)},R=function(L){var D;(D=r.onDayTouchStart)===null||D===void 0||D.call(r,e,t,L)},$=function(L){var D;(D=r.onDayKeyUp)===null||D===void 0||D.call(r,e,t,L)},B=function(L){var D;switch(L.key){case"ArrowLeft":L.preventDefault(),L.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":L.preventDefault(),L.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":L.preventDefault(),L.stopPropagation(),u();break;case"ArrowUp":L.preventDefault(),L.stopPropagation(),d();break;case"PageUp":L.preventDefault(),L.stopPropagation(),L.shiftKey?p():m();break;case"PageDown":L.preventDefault(),L.stopPropagation(),L.shiftKey?v():g();break;case"Home":L.preventDefault(),L.stopPropagation(),b();break;case"End":L.preventDefault(),L.stopPropagation(),y();break}(D=r.onDayKeyDown)===null||D===void 0||D.call(r,e,t,L)},F={onClick:w,onFocus:_,onBlur:j,onKeyDown:B,onKeyUp:$,onMouseEnter:N,onMouseLeave:S,onPointerEnter:k,onPointerLeave:C,onTouchCancel:P,onTouchEnd:A,onTouchMove:E,onTouchStart:R};return F}function Yce(){var e=hr(),t=O6(),r=bE(),n=jE(),a=K0(e)?t.selected:rv(e)?r.selected:nv(e)?n.selected:void 0;return a}function Xce(e){return Object.values(ri).includes(e)}function Qce(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(Xce(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function Zce(e,t){var r=rt({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=rt(rt({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function Jce(e,t,r){var n,a,i,o=hr(),l=NE(),c=Wce(e,t),u=Gce(e,c),d=Yce(),f=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var N;c.outside||l.focusedDay&&f&&Zn(l.focusedDay,e)&&((N=r.current)===null||N===void 0||N.focus())},[l.focusedDay,e,r,f,c.outside]);var h=Qce(o,c).join(" "),m=Zce(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),p=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:bce,v=s.jsx(p,{date:e,displayMonth:t,activeModifiers:c}),b={style:m,className:h,children:v,role:"gridcell"},y=l.focusTarget&&Zn(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&Zn(l.focusedDay,e),_=rt(rt(rt({},b),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||y?0:-1,n)),u),j={isButton:f,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:b};return j}function eue(e){var t=x.useRef(null),r=Jce(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(zx,rt({name:"day",ref:t},r.buttonProps)):s.jsx("div",rt({},r.divProps))}function tue(e){var t=e.number,r=e.dates,n=hr(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return s.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:d});var f=c(Number(t),{locale:l}),h=function(m){a(t,r,m)};return s.jsx(zx,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:h,children:d})}function rue(e){var t,r,n=hr(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:eue,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:tue,d;return o&&(d=s.jsx("td",{className:i.cell,style:a.cell,children:s.jsx(u,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:i.row,style:a.row,children:[d,e.dates.map(function(f){return s.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:f})},Nae(f))})]})}function gT(e,t,r){for(var n=r!=null&&r.ISOWeek?oU(t):Kk(t,r),a=r!=null&&r.ISOWeek?yu(e):Ti(e,r),i=pa(n,a),o=[],l=0;l<=i;l++)o.push(ln(a,l));var c=o.reduce(function(u,d){var f=r!=null&&r.ISOWeek?lU(d):uU(d,r),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function nue(e,t){var r=gT(Cs(e),M0(e),t);if(t!=null&&t.useFixedWeeks){var n=Cae(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=y1(i,6-n),l=gT(y1(i,1),o,t);r.push.apply(r,l)}}return r}function sue(e){var t,r,n,a=hr(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=nue(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:h}),p=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:xce,v=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:rue,b=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:gce;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(p,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(y){return s.jsx(v,{displayMonth:e.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),s.jsx(b,{displayMonth:e.displayMonth})]})}function aue(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var iue=aue()?x.useLayoutEffect:x.useEffect,s_=!1,oue=0;function vT(){return"react-day-picker-".concat(++oue)}function lue(e){var t,r=e??(s_?vT():null),n=x.useState(r),a=n[0],i=n[1];return iue(function(){a===null&&i(vT())},[]),x.useEffect(function(){s_===!1&&(s_=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function cue(e){var t,r,n=hr(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,c=sv().displayMonths,u=lue(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,p=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(f.push(i.caption_start),h=rt(rt({},h),o.caption_start)),g&&(f.push(i.caption_end),h=rt(rt({},h),o.caption_end)),p&&(f.push(i.caption_between),h=rt(rt({},h),o.caption_between));var v=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:pce;return s.jsxs("div",{className:f.join(" "),style:h,children:[s.jsx(v,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(sue,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function uue(e){var t=hr(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function due(e){var t,r,n=e.initialProps,a=hr(),i=NE(),o=sv(),l=x.useState(!1),c=l[0],u=l[1];x.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=rt(rt({},a.styles.root),a.style),h=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,p){var v;return rt(rt({},g),(v={},v[p]=n[p],v))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:uue;return s.jsx("div",rt({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:s.jsx(m,{children:o.displayMonths.map(function(g,p){return s.jsx(cue,{displayIndex:p,displayMonth:g},p)})})}))}function fue(e){var t=e.children,r=$le(e,["children"]);return s.jsx(tce,{initialProps:r,children:s.jsx(dce,{children:s.jsx(Hce,{initialProps:r,children:s.jsx(wce,{initialProps:r,children:s.jsx(Nce,{initialProps:r,children:s.jsx(Tce,{children:s.jsx(qce,{children:t})})})})})})})}function hue(e){return s.jsx(fue,rt({},e,{children:s.jsx(due,{initialProps:e})}))}function ni({className:e,classNames:t,showOutsideDays:r=!0,...n}){return s.jsx(hue,{showOutsideDays:r,className:Q("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Q(Op({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Q(Op({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>s.jsx(hk,{className:"h-4 w-4"}),IconRight:({...a})=>s.jsx(Po,{className:"h-4 w-4"})},...n})}ni.displayName="Calendar";const a_=[{value:"police_check",label:"Police Check",defaultValidityYears:3},{value:"ndis_screening",label:"NDIS Worker Screening",defaultValidityYears:5},{value:"first_aid",label:"First Aid Certificate",defaultValidityYears:3},{value:"cpr",label:"CPR Certificate",defaultValidityYears:1},{value:"wwcc_vic",label:"Working with Children's Check Victoria",defaultValidityYears:5},{value:"wwcc_nsw",label:"Working with Children's Check NSW",defaultValidityYears:5},{value:"drivers_license",label:"Drivers License",defaultValidityYears:10},{value:"training",label:"Training Certificate",defaultValidityYears:2},{value:"other",label:"Other",defaultValidityYears:1}],mue=Os({name:Ze().min(1,"Name is required").max(100,"Name must be less than 100 characters"),type:Bu(["police_check","ndis_screening","first_aid","cpr","wwcc_vic","wwcc_nsw","drivers_license","training","other"]),issueDate:ju({required_error:"Issue date is required"}),expiryDate:ju({required_error:"Expiry date is required"})});function yT(e){const r=ei(e,new Date);return r<0?"expired":r<=30?"expiring":"compliant"}function pue(e){switch(e){case"expired":return s.jsx(ir,{className:"h-4 w-4 text-destructive"});case"expiring":return s.jsx(xt,{className:"h-4 w-4 text-warning"});case"compliant":return s.jsx(yt,{className:"h-4 w-4 text-success"});case"pending":return s.jsx(xt,{className:"h-4 w-4 text-muted-foreground"})}}function gue({open:e,onOpenChange:t,certification:r,onSave:n,onDelete:a}){const i=!!r,o=x.useRef(null),[l,c]=x.useState({name:(r==null?void 0:r.name)||"",type:(r==null?void 0:r.type)||"police_check",issueDate:r!=null&&r.issueDate?new Date(r.issueDate):void 0,expiryDate:r!=null&&r.expiryDate?new Date(r.expiryDate):void 0}),[u,d]=x.useState(null),[f,h]=x.useState({}),[m,g]=x.useState(!1),p=j=>{const N=a_.find(P=>P.value===j),S=j,k=(N==null?void 0:N.label)||"";let C=l.expiryDate;l.issueDate&&N&&(C=ln(l.issueDate,N.defaultValidityYears*365)),c({...l,type:S,name:l.name||k,expiryDate:C})},v=j=>{if(!j){c({...l,issueDate:void 0});return}const N=a_.find(k=>k.value===l.type),S=N?ln(j,N.defaultValidityYears*365):l.expiryDate;c({...l,issueDate:j,expiryDate:S})},b=j=>{var C;const N=(C=j.target.files)==null?void 0:C[0];if(!N)return;if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(N.type)){oe({title:"Invalid File Type",description:"Please upload a PDF or image file (JPG, PNG)",variant:"destructive"});return}const k=10*1024*1024;if(N.size>k){oe({title:"File Too Large",description:"Please upload a file smaller than 10MB",variant:"destructive"});return}d(N)},y=()=>{const j=mue.safeParse(l);if(!j.success){const S={};j.error.errors.forEach(k=>{k.path[0]&&(S[k.path[0]]=k.message)}),h(S);return}if(l.expiryDate&&l.issueDate&&l.expiryDate<=l.issueDate){h({expiryDate:"Expiry date must be after issue date"});return}g(!0);const N={id:(r==null?void 0:r.id)||`cert-${Date.now()}`,name:l.name.trim(),type:l.type,issueDate:l.issueDate.toISOString().split("T")[0],expiryDate:l.expiryDate.toISOString().split("T")[0],status:yT(l.expiryDate),documentId:r==null?void 0:r.documentId};n(N,u||void 0),g(!1),t(!1),c({name:"",type:"police_check",issueDate:void 0,expiryDate:void 0}),d(null),h({})},w=()=>{r&&a&&(a(r.id),t(!1))},_=l.expiryDate?yT(l.expiryDate):null;return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-md",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:i?"Edit Certification":"Add Certification"}),s.jsx(Mt,{children:i?"Update the certification details and upload a new document if needed.":"Add a new compliance certification with document upload."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"cert-type",children:"Certification Type *"}),s.jsxs(Me,{value:l.type,onValueChange:p,children:[s.jsx(Te,{children:s.jsx($e,{placeholder:"Select type"})}),s.jsx(De,{className:"bg-popover",children:a_.map(j=>s.jsx(W,{value:j.value,children:j.label},j.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"cert-name",children:"Certificate Name *"}),s.jsx(J,{id:"cert-name",value:l.name,onChange:j=>c({...l,name:j.target.value}),placeholder:"e.g., National Police Certificate",maxLength:100}),f.name&&s.jsx("p",{className:"text-xs text-destructive",children:f.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Issue Date *"}),s.jsxs(Mi,{children:[s.jsx($i,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:Q("w-full justify-start text-left font-normal",!l.issueDate&&"text-muted-foreground"),children:[s.jsx(zt,{className:"mr-2 h-4 w-4"}),l.issueDate?ne(l.issueDate,"PPP"):"Select issue date"]})}),s.jsx(ti,{className:"w-auto p-0",align:"start",children:s.jsx(ni,{mode:"single",selected:l.issueDate,onSelect:v,disabled:j=>j>new Date,initialFocus:!0,className:Q("p-3 pointer-events-auto")})})]}),f.issueDate&&s.jsx("p",{className:"text-xs text-destructive",children:f.issueDate})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Expiry Date *"}),s.jsxs(Mi,{children:[s.jsx($i,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:Q("w-full justify-start text-left font-normal",!l.expiryDate&&"text-muted-foreground"),children:[s.jsx(zt,{className:"mr-2 h-4 w-4"}),l.expiryDate?ne(l.expiryDate,"PPP"):"Select expiry date"]})}),s.jsx(ti,{className:"w-auto p-0",align:"start",children:s.jsx(ni,{mode:"single",selected:l.expiryDate,onSelect:j=>c({...l,expiryDate:j}),disabled:j=>l.issueDate?j<=l.issueDate:!1,initialFocus:!0,className:Q("p-3 pointer-events-auto")})})]}),f.expiryDate&&s.jsx("p",{className:"text-xs text-destructive",children:f.expiryDate}),_&&s.jsxs("div",{className:Q("flex items-center gap-2 text-xs p-2 rounded-md",_==="expired"&&"bg-destructive/10 text-destructive",_==="expiring"&&"bg-warning/10 text-warning",_==="compliant"&&"bg-success/10 text-success"),children:[pue(_),s.jsxs("span",{children:[_==="expired"&&"This certificate has expired",_==="expiring"&&`Expires in ${ei(l.expiryDate,new Date)} days`,_==="compliant"&&`Valid for ${ei(l.expiryDate,new Date)} days`]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Supporting Document"}),s.jsx("div",{className:"border-2 border-dashed border-muted rounded-lg p-4",children:u?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ml,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"truncate max-w-[200px]",children:u.name})]}),s.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>d(null),children:s.jsx(Bn,{className:"h-4 w-4"})})]}):s.jsxs("div",{className:"text-center",children:[s.jsx(Ml,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Upload certificate document"}),s.jsx(I,{variant:"outline",size:"sm",onClick:()=>{var j;return(j=o.current)==null?void 0:j.click()},children:"Choose File"}),s.jsx("input",{ref:o,type:"file",accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:b})]})}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepted formats: PDF, JPG, PNG (max 10MB)"})]})]}),s.jsxs(fr,{className:"flex-col sm:flex-row gap-2",children:[i&&a&&s.jsx(I,{variant:"destructive",onClick:w,className:"w-full sm:w-auto",children:"Delete"}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto sm:ml-auto",children:[s.jsx(I,{variant:"outline",onClick:()=>t(!1),className:"flex-1 sm:flex-none",children:"Cancel"}),s.jsx(I,{onClick:y,disabled:m,className:"flex-1 sm:flex-none gradient-primary",children:m?"Saving...":i?"Update":"Add Certification"})]})]})]})})}const vue={casual:"Casual",part_time:"Part-Time",full_time:"Full-Time",contractor:"Contractor"},yue={casual:"bg-info/10 text-info",part_time:"bg-primary/10 text-primary",full_time:"bg-success/10 text-success",contractor:"bg-warning/10 text-warning"};function xue({employee:e,open:t,onOpenChange:r,onUpdate:n}){var $,B,F,L,D;const[a,i]=x.useState(!1),[o,l]=x.useState({}),[c,u]=x.useState(!1),[d,f]=x.useState(!1),[h,m]=x.useState(null),g=x.useRef(null);if(!e)return null;const p=T=>{const U=new Date(T);return{daysUntil:ei(U,new Date),expiry:U}},v=T=>{switch(T){case"expired":return s.jsx(ir,{className:"h-4 w-4 text-destructive"});case"expiring":return s.jsx(xt,{className:"h-4 w-4 text-warning"});case"compliant":return s.jsx(yt,{className:"h-4 w-4 text-success"});case"pending":return s.jsx(xt,{className:"h-4 w-4 text-muted-foreground"})}},b=()=>{m(null),f(!0)},y=T=>{m(T),f(!0)},w=(T,U)=>{let X=[...e.documents];if(U){const ie={id:`doc-${Date.now()}`,name:U.name,type:"certificate",uploadedAt:new Date().toISOString(),url:URL.createObjectURL(U)};X=[...X,ie],T.documentId=ie.id}const H=e.certifications.findIndex(ie=>ie.id===T.id);let ae;H>=0?(ae=[...e.certifications],ae[H]=T):ae=[...e.certifications,T];const he=ae.some(ie=>ie.status==="expired"),Pe=ae.some(ie=>ie.status==="expiring"),Ae=ae.some(ie=>ie.status==="pending");let ue="compliant";he?ue="expired":Pe?ue="expiring":Ae&&(ue="pending");const ze={...e,certifications:ae,documents:X,complianceStatus:ue};n==null||n(ze),oe({title:H>=0?"Certification Updated":"Certification Added",description:`${T.name} has been ${H>=0?"updated":"added"} successfully.`})},_=T=>{const U=e.certifications.filter(Ae=>Ae.id!==T),X=U.some(Ae=>Ae.status==="expired"),H=U.some(Ae=>Ae.status==="expiring"),ae=U.some(Ae=>Ae.status==="pending");let he="compliant";X?he="expired":H?he="expiring":ae&&(he="pending");const Pe={...e,certifications:U,complianceStatus:U.length===0?"pending":he};n==null||n(Pe),oe({title:"Certification Removed",description:"The certification has been removed."})},j=T=>{var Pe;const U=(Pe=T.target.files)==null?void 0:Pe[0];if(!U)return;if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(U.type)){oe({title:"Invalid File Type",description:"Please upload a PDF or image file (JPG, PNG)",variant:"destructive"});return}const H=10*1024*1024;if(U.size>H){oe({title:"File Too Large",description:"Please upload a file smaller than 10MB",variant:"destructive"});return}u(!0);const ae={id:`doc-${Date.now()}`,name:U.name,type:"certificate",uploadedAt:new Date().toISOString(),url:URL.createObjectURL(U)},he={...e,documents:[...e.documents,ae]};n==null||n(he),u(!1),oe({title:"Document Uploaded",description:`${U.name} has been uploaded successfully.`}),g.current&&(g.current.value="")},N=()=>{var T;(T=g.current)==null||T.click()},S=e.certifications.length,k=e.certifications.filter(T=>T.status==="compliant").length,C=S>0?Math.round(k/S*100):0,P=()=>{l({firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,position:e.position,department:e.department,employmentType:e.employmentType,payRate:e.payRate,awardClassification:e.awardClassification,emergencyContact:e.emergencyContact}),i(!0)},A=()=>{i(!1),l({})},E=()=>{if(!o.firstName||!o.lastName||!o.email){oe({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}const T={...e,...o};n==null||n(T),i(!1),l({}),oe({title:"Profile Updated",description:`${T.firstName} ${T.lastName}'s profile has been updated.`})},R=T=>{T||(i(!1),l({})),r(T)};return s.jsxs(Oo,{open:t,onOpenChange:R,children:[s.jsxs(Ui,{className:"w-full sm:max-w-lg overflow-hidden flex flex-col",children:[s.jsx(Bi,{children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Pr,{className:"h-16 w-16 avatar-ring",children:s.jsxs(Ar,{className:"bg-primary/10 text-primary text-xl font-semibold",children:[(a?($=o.firstName)==null?void 0:$[0]:e.firstName[0])||"E",(a?(B=o.lastName)==null?void 0:B[0]:e.lastName[0])||"E"]})}),s.jsx("div",{className:"flex-1",children:a?s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{value:o.firstName||"",onChange:T=>l({...o,firstName:T.target.value}),placeholder:"First Name",className:"h-8"}),s.jsx(J,{value:o.lastName||"",onChange:T=>l({...o,lastName:T.target.value}),placeholder:"Last Name",className:"h-8"})]})}):s.jsxs(s.Fragment,{children:[s.jsxs(zi,{className:"text-xl",children:[e.firstName," ",e.lastName]}),s.jsxs(To,{className:"flex items-center gap-2 mt-1",children:[e.position,s.jsx("span",{className:Q("text-xs px-2 py-0.5 rounded-full font-medium",yue[e.employmentType]),children:vue[e.employmentType]})]})]})}),!a&&s.jsx(I,{variant:"outline",size:"icon",onClick:P,children:s.jsx(_p,{className:"h-4 w-4"})})]})}),s.jsx(zu,{className:"flex-1 -mx-6 px-6",children:s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(ns,{className:"h-4 w-4"}),"Contact Information"]}),a?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"edit-email",children:"Email"}),s.jsx(J,{id:"edit-email",type:"email",value:o.email||"",onChange:T=>l({...o,email:T.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"edit-phone",children:"Phone"}),s.jsx(J,{id:"edit-phone",value:o.phone||"",onChange:T=>l({...o,phone:T.target.value})})]})]}):s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fu,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("a",{href:`mailto:${e.email}`,className:"text-primary hover:underline",children:e.email})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Vd,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("a",{href:`tel:${e.phone}`,className:"hover:underline",children:e.phone})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(Rl,{className:"h-4 w-4"}),"Employment Details"]}),a?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"edit-position",children:"Position"}),s.jsx(J,{id:"edit-position",value:o.position||"",onChange:T=>l({...o,position:T.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"edit-department",children:"Department"}),s.jsx(J,{id:"edit-department",value:o.department||"",onChange:T=>l({...o,department:T.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"edit-employmentType",children:"Employment Type"}),s.jsxs(Me,{value:o.employmentType,onValueChange:T=>l({...o,employmentType:T}),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"casual",children:"Casual"}),s.jsx(W,{value:"part_time",children:"Part-Time"}),s.jsx(W,{value:"full_time",children:"Full-Time"}),s.jsx(W,{value:"contractor",children:"Contractor"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"edit-payRate",children:"Pay Rate ($/hr)"}),s.jsx(J,{id:"edit-payRate",type:"number",step:"0.01",value:o.payRate||"",onChange:T=>l({...o,payRate:parseFloat(T.target.value)||0})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"edit-award",children:"Award Classification"}),s.jsx(J,{id:"edit-award",value:o.awardClassification||"",onChange:T=>l({...o,awardClassification:T.target.value}),placeholder:"e.g., Level 2.1"})]})]}):s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Department"}),s.jsx("p",{className:"font-medium",children:e.department})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Start Date"}),s.jsx("p",{className:"font-medium",children:ne(new Date(e.startDate),"MMM d, yyyy")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Pay Rate"}),s.jsxs("p",{className:"font-medium",children:["$",e.payRate.toFixed(2),"/hr"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Award Classification"}),s.jsx("p",{className:"font-medium",children:e.awardClassification||"Not set"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Status"}),s.jsx(ce,{variant:e.status==="active"?"default":"secondary",className:"mt-1",children:e.status})]})]})]}),a&&s.jsxs(s.Fragment,{children:[s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(Vd,{className:"h-4 w-4"}),"Emergency Contact"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"edit-emergency-name",children:"Contact Name"}),s.jsx(J,{id:"edit-emergency-name",value:((F=o.emergencyContact)==null?void 0:F.name)||"",onChange:T=>{var U,X;return l({...o,emergencyContact:{...o.emergencyContact,name:T.target.value,phone:((U=o.emergencyContact)==null?void 0:U.phone)||"",relationship:((X=o.emergencyContact)==null?void 0:X.relationship)||""}})},placeholder:"Emergency contact name"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"edit-emergency-phone",children:"Phone"}),s.jsx(J,{id:"edit-emergency-phone",value:((L=o.emergencyContact)==null?void 0:L.phone)||"",onChange:T=>{var U,X;return l({...o,emergencyContact:{...o.emergencyContact,name:((U=o.emergencyContact)==null?void 0:U.name)||"",phone:T.target.value,relationship:((X=o.emergencyContact)==null?void 0:X.relationship)||""}})},placeholder:"Phone number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"edit-emergency-relationship",children:"Relationship"}),s.jsx(J,{id:"edit-emergency-relationship",value:((D=o.emergencyContact)==null?void 0:D.relationship)||"",onChange:T=>{var U,X;return l({...o,emergencyContact:{...o.emergencyContact,name:((U=o.emergencyContact)==null?void 0:U.name)||"",phone:((X=o.emergencyContact)==null?void 0:X.phone)||"",relationship:T.target.value}})},placeholder:"e.g., Spouse, Parent"})]})]})]})]})]}),!a&&s.jsxs(s.Fragment,{children:[s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(dn,{className:"h-4 w-4"}),"Compliance Status"]}),s.jsx(Nh,{status:e.complianceStatus})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Overall Compliance"}),s.jsxs("span",{className:"font-medium",children:[C,"%"]})]}),s.jsx(Ks,{value:C,className:"h-2"})]}),s.jsxs("div",{className:"space-y-2 mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Certifications"}),s.jsxs(I,{variant:"outline",size:"sm",onClick:b,className:"h-7 text-xs",children:[s.jsx(jt,{className:"h-3 w-3 mr-1"}),"Add"]})]}),e.certifications.length>0?s.jsx("div",{className:"space-y-2",children:e.certifications.map(T=>{const{daysUntil:U,expiry:X}=p(T.expiryDate);return s.jsx("div",{className:Q("p-3 rounded-lg border cursor-pointer hover:bg-muted/50 transition-colors",T.status==="expired"&&"border-destructive/50 bg-destructive/5",T.status==="expiring"&&"border-warning/50 bg-warning/5",T.status==="compliant"&&"border-success/50 bg-success/5",T.status==="pending"&&"border-muted"),onClick:()=>y(T),children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[v(T.status),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:T.name}),s.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:T.status==="pending"?"Awaiting documentation":T.status==="expired"?`Expired ${ne(X,"MMM d, yyyy")}`:`Expires ${ne(X,"MMM d, yyyy")} (${U} days)`})]})]}),s.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:H=>{H.stopPropagation(),y(T)},children:s.jsx(Sc,{className:"h-3 w-3"})})]})},T.id)})}):s.jsxs("div",{className:"text-center py-4 border-2 border-dashed border-muted rounded-lg",children:[s.jsx(dn,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No certifications added"}),s.jsxs(I,{variant:"outline",size:"sm",onClick:b,children:[s.jsx(jt,{className:"h-3 w-3 mr-1"}),"Add Certification"]})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(ut,{className:"h-4 w-4"}),"Documents (",e.documents.length,")"]}),s.jsxs(I,{variant:"outline",size:"sm",onClick:N,disabled:c,children:[s.jsx(Ml,{className:"h-3 w-3 mr-1"}),c?"Uploading...":"Upload"]}),s.jsx("input",{ref:g,type:"file",accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:j})]}),e.documents.length>0?s.jsx("div",{className:"space-y-2",children:e.documents.map(T=>s.jsxs("div",{className:"flex items-center justify-between text-sm p-2 rounded-lg bg-muted/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ut,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:T.name})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:ne(new Date(T.uploadedAt),"MMM d, yyyy")})]},T.id))}):s.jsxs("div",{className:"text-center py-4 border-2 border-dashed border-muted rounded-lg",children:[s.jsx(ut,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No documents uploaded"}),s.jsxs(I,{variant:"outline",size:"sm",onClick:N,disabled:c,children:[s.jsx(jt,{className:"h-3 w-3 mr-1"}),"Add Document"]})]})]}),e.emergencyContact&&s.jsxs(s.Fragment,{children:[s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(Vd,{className:"h-4 w-4"}),"Emergency Contact"]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsx("p",{className:"font-medium",children:e.emergencyContact.name}),s.jsx("p",{className:"text-muted-foreground",children:e.emergencyContact.relationship}),s.jsx("p",{children:e.emergencyContact.phone})]})]})]})]})]})}),s.jsx("div",{className:"flex gap-3 pt-4 border-t border-border",children:a?s.jsxs(s.Fragment,{children:[s.jsxs(I,{variant:"outline",className:"flex-1",onClick:A,children:[s.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs(I,{className:"flex-1 gradient-primary",onClick:E,children:[s.jsx(oF,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(I,{variant:"outline",className:"flex-1",onClick:P,children:[s.jsx(_p,{className:"h-4 w-4 mr-2"}),"Edit Profile"]}),s.jsxs(I,{variant:"outline",className:"flex-1",children:[s.jsx(fu,{className:"h-4 w-4 mr-2"}),"Send Email"]})]})})]}),s.jsx(gue,{open:d,onOpenChange:f,certification:h,onSave:w,onDelete:_})]})}function G0(){const{user:e}=Kg(),[t,r]=x.useState(null),[n,a]=x.useState(!0);x.useEffect(()=>{e?i():(r(null),a(!1))},[e]);const i=async()=>{if(e)try{const{data:d,error:f}=await M.from("user_roles").select("role").eq("user_id",e.id).maybeSingle();f?(console.error("Error fetching user role:",f),r("employee")):r((d==null?void 0:d.role)||"employee")}catch(d){console.error("Error fetching user role:",d),r("employee")}finally{a(!1)}};return{currentUserRole:t,loading:n,isAdmin:t==="admin",isManager:t==="manager"||t==="admin",isEmployee:t==="employee",hasPermission:d=>{if(!t)return!1;const f={admin:3,manager:2,employee:1};return f[t]>=f[d]},refetch:i}}function bue(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),a=async()=>{n(!0);try{const{data:l,error:c}=await M.from("user_roles").select("id, user_id, role, created_at");if(c)throw c;const u=(l==null?void 0:l.map(m=>m.user_id))||[];if(u.length===0){t([]),n(!1);return}const{data:d,error:f}=await M.from("profiles").select("user_id, display_name").in("user_id",u);if(f)throw f;const h=l.map(m=>{const g=d==null?void 0:d.find(p=>p.user_id===m.user_id);return{id:m.id,user_id:m.user_id,email:(g==null?void 0:g.display_name)||"Unknown",display_name:g==null?void 0:g.display_name,role:m.role,created_at:m.created_at}});t(h)}catch(l){console.error("Error fetching users with roles:",l)}finally{n(!1)}},i=async(l,c)=>{try{const{error:u}=await M.from("user_roles").update({role:c}).eq("user_id",l);if(u)throw u;return await a(),{success:!0}}catch(u){return console.error("Error updating user role:",u),{success:!1,error:u}}},o=async l=>{try{const{error:c}=await M.from("user_roles").delete().eq("user_id",l);if(c)throw c;return await a(),{success:!0}}catch(c){return console.error("Error deleting user role:",c),{success:!1,error:c}}};return x.useEffect(()=>{a()},[]),{users:e,loading:r,fetchUsersWithRoles:a,updateUserRole:i,deleteUserRole:o}}const wue={casual:"Casual",part_time:"Part-Time",full_time:"Full-Time",contractor:"Contractor"},jue={casual:"bg-info/10 text-info",part_time:"bg-primary/10 text-primary",full_time:"bg-success/10 text-success",contractor:"bg-warning/10 text-warning"};function _ue(e){return{id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,phone:e.phone||"",avatar:e.avatar_url||void 0,employmentType:e.employment_type,position:e.position||"",department:e.department||"",startDate:e.start_date||"",status:e.status,complianceStatus:e.compliance_status,payRate:e.pay_rate||0,awardClassification:void 0,emergencyContact:e.emergency_contact_name?{name:e.emergency_contact_name,phone:e.emergency_contact_phone||"",relationship:e.emergency_contact_relationship||""}:void 0,documents:[],certifications:[]}}function Nue(){const{isManager:e}=G0(),[t,r]=x.useState(""),[n,a]=x.useState("all"),[i,o]=x.useState("all"),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,h]=x.useState(null),{employees:m,isLoading:g,error:p,createEmployee:v,updateEmployee:b,changeStatus:y,organisationId:w,isCreating:_}=Kl(),j=m.map(_ue),N=j.filter(E=>{if(E.status==="inactive")return!1;const R=`${E.firstName} ${E.lastName}`.toLowerCase().includes(t.toLowerCase())||E.email.toLowerCase().includes(t.toLowerCase())||E.position.toLowerCase().includes(t.toLowerCase()),$=n==="all"||E.department===n,B=i==="all"||E.status===i;return R&&$&&B}),S=[...new Set(j.map(E=>E.department).filter(Boolean))],k=E=>{h(E),d(!0)},C=async E=>{var $,B,F;if(!(!w||!m.find(L=>L.id===E.id)))try{await b(E.id,{first_name:E.firstName,last_name:E.lastName,email:E.email,phone:E.phone||null,position:E.position||null,department:E.department||null,employment_type:E.employmentType,pay_rate:E.payRate||null,status:E.status,compliance_status:E.complianceStatus,emergency_contact_name:(($=E.emergencyContact)==null?void 0:$.name)||null,emergency_contact_phone:((B=E.emergencyContact)==null?void 0:B.phone)||null,emergency_contact_relationship:((F=E.emergencyContact)==null?void 0:F.relationship)||null}),h(E)}catch(L){console.error("Failed to update employee:",L)}},P=async E=>{const R=E.status==="inactive"?"active":"inactive";try{await y(E.id,R)}catch($){console.error("Failed to change status:",$)}},A=async E=>{if(!w){oe({title:"Error",description:"Organisation not available. Please try again.",variant:"destructive"});return}try{await v({organisation_id:w,first_name:E.firstName,last_name:E.lastName,email:E.email,phone:E.phone||void 0,avatar_url:E.avatar||void 0,position:E.position||void 0,department:E.department||void 0,employment_type:E.employmentType,pay_rate:E.payRate||void 0,start_date:new Date().toISOString().split("T")[0]}),c(!1)}catch(R){console.error("Failed to add employee:",R)}};return g?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):p?s.jsx(K,{children:s.jsxs(Y,{className:"py-12 text-center",children:[s.jsx("p",{className:"text-destructive",children:"Failed to load employees. Please try again."}),s.jsx(I,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Retry"})]})}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Employees"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your team members and their information."})]}),s.jsxs("div",{className:"flex gap-2",children:[e&&s.jsx(I,{variant:"outline",asChild:!0,children:s.jsxs(On,{to:"/employees/deactivated",children:[s.jsx(hx,{className:"h-4 w-4 mr-2"}),"Deactivated"]})}),s.jsxs(I,{variant:"outline",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Export"]}),s.jsxs(I,{className:"gradient-primary",onClick:()=>c(!0),disabled:_,children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Add Employee"]})]})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{type:"search",placeholder:"Search by name, email, or position...",value:t,onChange:E=>r(E.target.value),className:"pl-10"})]}),s.jsxs(Me,{value:n,onValueChange:a,children:[s.jsx(Te,{className:"w-full sm:w-48",children:s.jsx($e,{placeholder:"Department"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"all",children:"All Departments"}),S.map(E=>s.jsx(W,{value:E,children:E},E))]})]}),s.jsxs(Me,{value:i,onValueChange:o,children:[s.jsx(Te,{className:"w-full sm:w-36",children:s.jsx($e,{placeholder:"Status"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"all",children:"All Status"}),s.jsx(W,{value:"active",children:"Active"}),s.jsx(W,{value:"onboarding",children:"Onboarding"})]})]})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(E=>s.jsx(K,{className:"card-interactive cursor-pointer",onClick:()=>k(E),children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs(Pr,{className:"h-12 w-12 avatar-ring",children:[s.jsx(Bg,{src:E.avatar,alt:`${E.firstName} ${E.lastName}`}),s.jsxs(Ar,{className:"bg-primary/10 text-primary font-semibold",children:[E.firstName[0],E.lastName[0]]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold",children:[E.firstName," ",E.lastName]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:E.position}),s.jsx("div",{className:"flex items-center gap-2 mt-2",children:s.jsx("span",{className:Q("text-xs px-2 py-0.5 rounded-full font-medium",jue[E.employmentType]),children:wue[E.employmentType]})})]})]}),s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,onClick:R=>R.stopPropagation(),children:s.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(ai,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",children:[s.jsx(st,{onClick:R=>{R.stopPropagation(),k(E)},children:"View Profile"}),s.jsx(st,{onClick:R=>R.stopPropagation(),children:"Edit Details"}),s.jsx(st,{onClick:R=>R.stopPropagation(),children:"View Documents"}),s.jsx(ma,{}),s.jsx(st,{className:E.status==="inactive"?"text-success":"text-destructive",onClick:R=>{R.stopPropagation(),P(E)},children:E.status==="inactive"?"Reactivate":"Deactivate"})]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-border space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Department"}),s.jsx("span",{className:"font-medium",children:E.department||"Not assigned"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Compliance"}),s.jsx(Nh,{status:E.complianceStatus,size:"sm"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Pay Rate"}),s.jsxs("span",{className:"font-medium",children:["$",(E.payRate||0).toFixed(2),"/hr"]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-border flex gap-2",children:[s.jsxs(I,{variant:"outline",size:"sm",className:"flex-1",onClick:R=>{R.stopPropagation(),window.location.href=`mailto:${E.email}`},children:[s.jsx(fu,{className:"h-4 w-4 mr-1"}),"Email"]}),s.jsxs(I,{variant:"outline",size:"sm",className:"flex-1",onClick:R=>{R.stopPropagation(),window.location.href=`tel:${E.phone}`},children:[s.jsx(Vd,{className:"h-4 w-4 mr-1"}),"Call"]})]})]})},E.id))}),N.length===0&&s.jsx(K,{children:s.jsx(Y,{className:"py-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"No employees found matching your criteria."})})}),s.jsx(ele,{open:l,onOpenChange:c,onAdd:A}),s.jsx(xue,{employee:f,open:u,onOpenChange:d,onUpdate:C})]})}var T6="AlertDialog",[Sue,h3e]=zr(T6,[kB]),Do=kB(),D6=e=>{const{__scopeAlertDialog:t,...r}=e,n=Do(t);return s.jsx(uE,{...n,...r,modal:!0})};D6.displayName=T6;var Cue="AlertDialogTrigger",R6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Do(r);return s.jsx(VB,{...a,...n,ref:t})});R6.displayName=Cue;var kue="AlertDialogPortal",M6=e=>{const{__scopeAlertDialog:t,...r}=e,n=Do(t);return s.jsx(dE,{...n,...r})};M6.displayName=kue;var Eue="AlertDialogOverlay",$6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Do(r);return s.jsx(Xg,{...a,...n,ref:t})});$6.displayName=Eue;var Gd="AlertDialogContent",[Pue,Aue]=Sue(Gd),Oue=_L("AlertDialogContent"),I6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Do(r),o=x.useRef(null),l=We(t,o),c=x.useRef(null);return s.jsx(Koe,{contentName:Gd,titleName:L6,docsSlug:"alert-dialog",children:s.jsx(Pue,{scope:r,cancelRef:c,children:s.jsxs(Qg,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:fe(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(Oue,{children:n}),s.jsx(Due,{contentRef:o})]})})})});I6.displayName=Gd;var L6="AlertDialogTitle",F6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Do(r);return s.jsx(Zg,{...a,...n,ref:t})});F6.displayName=L6;var U6="AlertDialogDescription",B6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Do(r);return s.jsx(Jg,{...a,...n,ref:t})});B6.displayName=U6;var Tue="AlertDialogAction",z6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Do(r);return s.jsx(V0,{...a,...n,ref:t})});z6.displayName=Tue;var V6="AlertDialogCancel",q6=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=Aue(V6,r),i=Do(r),o=We(t,a);return s.jsx(V0,{...i,...n,ref:o})});q6.displayName=V6;var Due=({contentRef:e})=>{const t=`\`${Gd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Gd}\` by passing a \`${U6}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Gd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Rue=D6,Mue=R6,$ue=M6,W6=$6,H6=I6,K6=z6,G6=q6,Y6=F6,X6=B6;const Ad=Rue,Q6=Mue,Iue=$ue,Z6=x.forwardRef(({className:e,...t},r)=>s.jsx(W6,{className:Q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Z6.displayName=W6.displayName;const Pc=x.forwardRef(({className:e,...t},r)=>s.jsxs(Iue,{children:[s.jsx(Z6,{}),s.jsx(H6,{ref:r,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Pc.displayName=H6.displayName;const Ac=({className:e,...t})=>s.jsx("div",{className:Q("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ac.displayName="AlertDialogHeader";const Oc=({className:e,...t})=>s.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Oc.displayName="AlertDialogFooter";const Tc=x.forwardRef(({className:e,...t},r)=>s.jsx(Y6,{ref:r,className:Q("text-lg font-semibold",e),...t}));Tc.displayName=Y6.displayName;const Dc=x.forwardRef(({className:e,...t},r)=>s.jsx(X6,{ref:r,className:Q("text-sm text-muted-foreground",e),...t}));Dc.displayName=X6.displayName;const Rc=x.forwardRef(({className:e,...t},r)=>s.jsx(K6,{ref:r,className:Q(Op(),e),...t}));Rc.displayName=K6.displayName;const Mc=x.forwardRef(({className:e,...t},r)=>s.jsx(G6,{ref:r,className:Q(Op({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Mc.displayName=G6.displayName;const Lue={casual:"Casual",part_time:"Part-Time",full_time:"Full-Time",contractor:"Contractor"},Fue={casual:"bg-info/10 text-info",part_time:"bg-primary/10 text-primary",full_time:"bg-success/10 text-success",contractor:"bg-warning/10 text-warning"};function Uue(){const{isManager:e,loading:t}=G0(),[r,n]=x.useState(""),[a,i]=x.useState("all"),{employees:o,isLoading:l,error:c,changeStatus:u,isChangingStatus:d}=Kl();if(t||l)return s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})});if(!e)return s.jsx("div",{className:"space-y-6 animate-fade-in",children:s.jsx(K,{children:s.jsxs(Y,{className:"py-12 text-center",children:[s.jsx(dG,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Only administrators and managers can view the deactivated staff archive."}),s.jsx(I,{variant:"outline",asChild:!0,children:s.jsxs(On,{to:"/employees",children:[s.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Back to Employees"]})})]})})});if(c)return s.jsx(K,{children:s.jsxs(Y,{className:"py-12 text-center",children:[s.jsx("p",{className:"text-destructive",children:"Failed to load employees. Please try again."}),s.jsx(I,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Retry"})]})});const f=o.filter(g=>{var b;if(g.status!=="inactive")return!1;const p=`${g.first_name} ${g.last_name}`.toLowerCase().includes(r.toLowerCase())||g.email.toLowerCase().includes(r.toLowerCase())||(((b=g.position)==null?void 0:b.toLowerCase().includes(r.toLowerCase()))??!1),v=a==="all"||g.department===a;return p&&v}),h=[...new Set(o.map(g=>g.department).filter(Boolean))],m=async g=>{try{await u(g.id,"active")}catch(p){console.error("Failed to reactivate employee:",p)}};return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(I,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(On,{to:"/employees",children:s.jsx(Qc,{className:"h-5 w-5"})})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(hx,{className:"h-6 w-6 text-muted-foreground"}),"Deactivated Staff"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"View and manage former employees. Admins can reactivate staff when needed."})]})]})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{type:"search",placeholder:"Search by name, email, or position...",value:r,onChange:g=>n(g.target.value),className:"pl-10"})]}),s.jsxs(Me,{value:a,onValueChange:i,children:[s.jsx(Te,{className:"w-full sm:w-48",children:s.jsx($e,{placeholder:"Department"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"all",children:"All Departments"}),h.map(g=>s.jsx(W,{value:g,children:g},g))]})]})]})})}),f.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(g=>s.jsx(K,{className:"border-dashed border-muted-foreground/30",children:s.jsxs(Y,{className:"pt-6",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Pr,{className:"h-12 w-12 opacity-60",children:s.jsxs(Ar,{className:"bg-muted text-muted-foreground font-semibold",children:[g.first_name[0],g.last_name[0]]})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-muted-foreground",children:[g.first_name," ",g.last_name]}),s.jsx("p",{className:"text-sm text-muted-foreground/70",children:g.position||"No position"}),s.jsx("div",{className:"flex items-center gap-2 mt-2",children:s.jsx("span",{className:Q("text-xs px-2 py-0.5 rounded-full font-medium opacity-60",Fue[g.employment_type]),children:Lue[g.employment_type]})})]})]})}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-border space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Department"}),s.jsx("span",{className:"font-medium text-muted-foreground",children:g.department||"Not assigned"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Email"}),s.jsx("span",{className:"font-medium text-muted-foreground truncate max-w-[180px]",children:g.email})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status"}),s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-destructive/10 text-destructive font-medium",children:"Deactivated"})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:s.jsxs(Ad,{children:[s.jsx(Q6,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:"w-full",disabled:d,children:[s.jsx(iF,{className:"h-4 w-4 mr-2"}),"Reactivate Employee"]})}),s.jsxs(Pc,{children:[s.jsxs(Ac,{children:[s.jsx(Tc,{children:"Reactivate Employee?"}),s.jsxs(Dc,{children:["This will restore ",g.first_name," ",g.last_name," to active status. They will appear in the main Employees list again."]})]}),s.jsxs(Oc,{children:[s.jsx(Mc,{children:"Cancel"}),s.jsx(Rc,{onClick:()=>m(g),children:"Reactivate"})]})]})]})})]})},g.id))}):s.jsx(K,{children:s.jsxs(Y,{className:"py-12 text-center",children:[s.jsx(hx,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"No Deactivated Staff"}),s.jsx("p",{className:"text-muted-foreground/70 mt-1",children:r||a!=="all"?"No deactivated employees match your search criteria.":"All employees are currently active."}),s.jsx(I,{variant:"outline",className:"mt-4",asChild:!0,children:s.jsxs(On,{to:"/employees",children:[s.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Back to Employees"]})})]})})]})}var Y0="Tabs",[Bue,m3e]=zr(Y0,[jh]),J6=jh(),[zue,CE]=Bue(Y0),e8=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Hl(l),[f,h]=qn({prop:n,onChange:a,defaultProp:i??"",caller:Y0});return s.jsx(zue,{scope:r,baseId:Ss(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:s.jsx(Ne.div,{dir:d,"data-orientation":o,...u,ref:t})})});e8.displayName=Y0;var t8="TabsList",r8=x.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=CE(t8,r),o=J6(r);return s.jsx($k,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Ne.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});r8.displayName=t8;var n8="TabsTrigger",s8=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=CE(n8,r),l=J6(r),c=o8(o.baseId,n),u=l8(o.baseId,n),d=n===o.value;return s.jsx(Ik,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(Ne.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:fe(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:fe(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:fe(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});s8.displayName=n8;var a8="TabsContent",i8=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=CE(a8,r),c=o8(l.baseId,n),u=l8(l.baseId,n),d=n===l.value,f=x.useRef(d);return x.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(en,{present:a||d,children:({present:h})=>s.jsx(Ne.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});i8.displayName=a8;function o8(e,t){return`${e}-trigger-${t}`}function l8(e,t){return`${e}-content-${t}`}var Vue=e8,c8=r8,u8=s8,d8=i8;const _n=Vue,mn=x.forwardRef(({className:e,...t},r)=>s.jsx(c8,{ref:r,className:Q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));mn.displayName=c8.displayName;const Ue=x.forwardRef(({className:e,...t},r)=>s.jsx(u8,{ref:r,className:Q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Ue.displayName=u8.displayName;const tt=x.forwardRef(({className:e,...t},r)=>s.jsx(d8,{ref:r,className:Q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));tt.displayName=d8.displayName;const br=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:Q("w-full caption-bottom text-sm",e),...t})}));br.displayName="Table";const wr=x.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:Q("[&_tr]:border-b",e),...t}));wr.displayName="TableHeader";const jr=x.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:Q("[&_tr:last-child]:border-0",e),...t}));jr.displayName="TableBody";const que=x.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:Q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));que.displayName="TableFooter";const qe=x.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:Q("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));qe.displayName="TableRow";const re=x.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:Q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));re.displayName="TableHead";const Z=x.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:Q("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Z.displayName="TableCell";const Wue=x.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:Q("mt-4 text-sm text-muted-foreground",e),...t}));Wue.displayName="TableCaption";const Dm={police_check:"Police Check",ndis_screening:"NDIS Screening",first_aid:"First Aid",cpr:"CPR",training:"Training",other:"Other"};function Hue(){const[e,t]=x.useState(""),[r,n]=x.useState("all"),[a,i]=x.useState("all"),[o,l]=x.useState("all"),[c,u]=x.useState("certifications"),{employees:d,certifications:f,getCertificationsForEmployee:h,isLoading:m,error:g}=Kl(),p=x.useMemo(()=>d.filter(E=>E.status!=="inactive").map(E=>({...E,certifications:h(E.id)})),[d,h]),v=x.useMemo(()=>[...new Set(p.map(E=>E.department).filter(Boolean))].sort(),[p]),b=x.useMemo(()=>[...new Set(f.map(E=>E.type))].sort(),[f]),y=x.useMemo(()=>({compliant:p.filter(E=>E.compliance_status==="compliant").length,expiring:p.filter(E=>E.compliance_status==="expiring").length,expired:p.filter(E=>E.compliance_status==="expired").length,pending:p.filter(E=>E.compliance_status==="pending").length}),[p]),w=p.length>0?Math.round(y.compliant/p.length*100):0,_=x.useMemo(()=>p.flatMap(E=>E.certifications.map(R=>({id:R.id,name:R.name,type:R.type,issueDate:R.issue_date||"",expiryDate:R.expiry_date||"",status:R.status,employeeId:E.id,employeeName:`${E.first_name} ${E.last_name}`,employeeInitials:`${E.first_name[0]||""}${E.last_name[0]||""}`,department:E.department||"Unassigned"}))),[p]),j=x.useMemo(()=>{const E={};return _.forEach(R=>{E[R.type]||(E[R.type]={total:0,compliant:0,expiring:0,expired:0,pending:0}),E[R.type].total++;const $=R.status;$ in E[R.type]&&E[R.type][$]++}),Object.entries(E).map(([R,$])=>({type:R,label:Dm[R]||R,...$,complianceRate:$.total>0?Math.round($.compliant/$.total*100):0}))},[_]),N=x.useMemo(()=>_.filter(E=>{const R=E.employeeName.toLowerCase().includes(e.toLowerCase())||E.name.toLowerCase().includes(e.toLowerCase()),$=r==="all"||E.department===r,B=a==="all"||E.type===a,F=o==="all"||E.status===o;return R&&$&&B&&F}),[_,e,r,a,o]),S=x.useMemo(()=>p.filter(E=>{const R=`${E.first_name} ${E.last_name}`.toLowerCase().includes(e.toLowerCase()),$=r==="all"||E.department===r,B=o==="all"||E.compliance_status===o;return R&&$&&B}),[p,e,r,o]),k=()=>{const E=["Employee","Department","Certification","Type","Issue Date","Expiry Date","Status","Days Remaining"],R=N.map(L=>{const D=L.expiryDate?ei(Hr(L.expiryDate),new Date):"N/A";return[L.employeeName,L.department,L.name,Dm[L.type]||L.type,L.issueDate?ne(Hr(L.issueDate),"yyyy-MM-dd"):"",L.expiryDate?ne(Hr(L.expiryDate),"yyyy-MM-dd"):"",L.status,D.toString()]}),$=[E,...R].map(L=>L.map(D=>`"${D}"`).join(",")).join(`
`),B=new Blob([$],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(B),F.download=`compliance-report-${ne(new Date,"yyyy-MM-dd")}.csv`,F.click(),oe({title:"Report Exported",description:`Exported ${N.length} certification records to CSV.`})},C=()=>{const E=["Employee","Department","Status","Total Certs","Compliant","Expiring","Expired","Pending"],R=S.map(L=>{const D={total:L.certifications.length,compliant:L.certifications.filter(T=>T.status==="compliant").length,expiring:L.certifications.filter(T=>T.status==="expiring").length,expired:L.certifications.filter(T=>T.status==="expired").length,pending:L.certifications.filter(T=>T.status==="pending").length};return[`${L.first_name} ${L.last_name}`,L.department||"Unassigned",L.compliance_status,D.total.toString(),D.compliant.toString(),D.expiring.toString(),D.expired.toString(),D.pending.toString()]}),$=[E,...R].map(L=>L.map(D=>`"${D}"`).join(",")).join(`
`),B=new Blob([$],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(B),F.download=`employee-compliance-summary-${ne(new Date,"yyyy-MM-dd")}.csv`,F.click(),oe({title:"Summary Exported",description:`Exported ${S.length} employee compliance summaries to CSV.`})},P=()=>{t(""),n("all"),i("all"),l("all")},A=e||r!=="all"||a!=="all"||o!=="all";return m?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading compliance data..."})]})}):g?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx(K,{className:"p-6 max-w-md",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx(zn,{className:"h-12 w-12 text-destructive"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Unable to Load Compliance Data"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"The compliance dashboard cannot be displayed because employee data could not be retrieved from the database. Please try again or contact support if the issue persists."}),s.jsx(I,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Compliance Dashboard"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Track certifications, clearances, and training requirements across your team."})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsxs(I,{variant:"outline",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Export",s.jsx(f0,{className:"h-4 w-4 ml-2"})]})}),s.jsxs(ss,{align:"end",className:"bg-popover",children:[s.jsxs(st,{onClick:k,children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Export Certifications (CSV)"]}),s.jsxs(st,{onClick:C,children:[s.jsx(Er,{className:"h-4 w-4 mr-2"}),"Export Employee Summary (CSV)"]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(K,{className:Q("card-interactive cursor-pointer transition-all",o==="compliant"&&"ring-2 ring-success"),onClick:()=>l(o==="compliant"?"all":"compliant"),children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-success/10",children:s.jsx(yt,{className:"h-5 w-5 text-success"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:y.compliant}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Compliant"})]})]})})}),s.jsx(K,{className:Q("card-interactive cursor-pointer transition-all",o==="expiring"&&"ring-2 ring-warning"),onClick:()=>l(o==="expiring"?"all":"expiring"),children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-warning/10",children:s.jsx(ir,{className:"h-5 w-5 text-warning"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:y.expiring}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiring Soon"})]})]})})}),s.jsx(K,{className:Q("card-interactive cursor-pointer transition-all",o==="expired"&&"ring-2 ring-destructive"),onClick:()=>l(o==="expired"?"all":"expired"),children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-destructive/10",children:s.jsx(zn,{className:"h-5 w-5 text-destructive"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:y.expired}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expired"})]})]})})}),s.jsx(K,{className:Q("card-interactive cursor-pointer transition-all",o==="pending"&&"ring-2 ring-info"),onClick:()=>l(o==="pending"?"all":"pending"),children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-info/10",children:s.jsx(xt,{className:"h-5 w-5 text-info"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:y.pending}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs(K,{children:[s.jsxs(de,{className:"pb-2",children:[s.jsx(me,{className:"text-lg",children:"Overall Compliance Rate"}),s.jsx(Be,{children:"Percentage of employees fully compliant"})]}),s.jsxs(Y,{children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Ks,{value:w,className:"flex-1 h-3"}),s.jsxs("span",{className:"text-2xl font-bold text-primary",children:[w,"%"]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[y.compliant," of ",p.length," employees have all required certifications up to date"]})]})]}),s.jsxs(K,{children:[s.jsxs(de,{className:"pb-2",children:[s.jsx(me,{className:"text-lg",children:"Compliance by Certification Type"}),s.jsx(Be,{children:"Status breakdown for each certification type"})]}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-3",children:j.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No certification data available"}):j.map(E=>s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:E.label}),s.jsxs("span",{className:"text-muted-foreground",children:[E.compliant,"/",E.total," compliant"]})]}),s.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden bg-muted",children:[E.compliant>0&&s.jsx("div",{className:"bg-success transition-all",style:{width:`${E.compliant/E.total*100}%`}}),E.expiring>0&&s.jsx("div",{className:"bg-warning transition-all",style:{width:`${E.expiring/E.total*100}%`}}),E.expired>0&&s.jsx("div",{className:"bg-destructive transition-all",style:{width:`${E.expired/E.total*100}%`}}),E.pending>0&&s.jsx("div",{className:"bg-muted-foreground/30 transition-all",style:{width:`${E.pending/E.total*100}%`}})]})]},E.type))})})]})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{type:"search",placeholder:"Search by employee or certification...",value:e,onChange:E=>t(E.target.value),className:"pl-10"})]}),s.jsxs(Me,{value:r,onValueChange:n,children:[s.jsx(Te,{className:"w-full sm:w-48",children:s.jsx($e,{placeholder:"Department"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"all",children:"All Departments"}),v.map(E=>s.jsx(W,{value:E,children:E},E))]})]}),s.jsxs(Me,{value:a,onValueChange:i,children:[s.jsx(Te,{className:"w-full sm:w-48",children:s.jsx($e,{placeholder:"Certification Type"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"all",children:"All Types"}),b.map(E=>s.jsx(W,{value:E,children:Dm[E]||E},E))]})]}),s.jsxs(Me,{value:o,onValueChange:l,children:[s.jsx(Te,{className:"w-full sm:w-40",children:s.jsx($e,{placeholder:"Status"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"all",children:"All Status"}),s.jsx(W,{value:"compliant",children:"Compliant"}),s.jsx(W,{value:"expiring",children:"Expiring"}),s.jsx(W,{value:"expired",children:"Expired"}),s.jsx(W,{value:"pending",children:"Pending"})]})]})]}),A&&s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),e&&s.jsxs(ce,{variant:"secondary",className:"gap-1",children:["Search: ",e,s.jsx(Bn,{className:"h-3 w-3 cursor-pointer",onClick:()=>t("")})]}),r!=="all"&&s.jsxs(ce,{variant:"secondary",className:"gap-1",children:[r,s.jsx(Bn,{className:"h-3 w-3 cursor-pointer",onClick:()=>n("all")})]}),a!=="all"&&s.jsxs(ce,{variant:"secondary",className:"gap-1",children:[Dm[a]||a,s.jsx(Bn,{className:"h-3 w-3 cursor-pointer",onClick:()=>i("all")})]}),o!=="all"&&s.jsxs(ce,{variant:"secondary",className:"gap-1 capitalize",children:[o,s.jsx(Bn,{className:"h-3 w-3 cursor-pointer",onClick:()=>l("all")})]}),s.jsx(I,{variant:"ghost",size:"sm",onClick:P,className:"h-6 text-xs",children:"Clear all"})]})]})})}),s.jsxs(K,{children:[s.jsx(de,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsx(me,{className:"text-lg",children:"Compliance Details"}),s.jsx(_n,{value:c,onValueChange:E=>u(E),children:s.jsxs(mn,{children:[s.jsxs(Ue,{value:"certifications",className:"gap-2",children:[s.jsx(Ai,{className:"h-4 w-4"}),"Certifications (",N.length,")"]}),s.jsxs(Ue,{value:"employees",className:"gap-2",children:[s.jsx(Er,{className:"h-4 w-4"}),"Employees (",S.length,")"]})]})})]})}),s.jsx(Y,{children:c==="certifications"?s.jsx(Kue,{certifications:N}):s.jsx(Gue,{employees:S})})]})]})}function Kue({certifications:e}){return s.jsx("div",{className:"rounded-lg border overflow-hidden",children:s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{className:"bg-muted/50",children:[s.jsx(re,{children:"Employee"}),s.jsx(re,{children:"Department"}),s.jsx(re,{children:"Certification"}),s.jsx(re,{children:"Type"}),s.jsx(re,{children:"Expiry Date"}),s.jsx(re,{children:"Status"})]})}),s.jsx(jr,{children:e.length===0?s.jsx(qe,{children:s.jsx(Z,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No certifications found matching your filters"})}):e.map(t=>{const r=t.expiryDate?ei(Hr(t.expiryDate),new Date):null;return s.jsxs(qe,{className:"table-row-interactive",children:[s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pr,{className:"h-8 w-8",children:s.jsx(Ar,{className:"text-xs bg-primary/10 text-primary",children:t.employeeInitials})}),s.jsx("span",{className:"font-medium",children:t.employeeName})]})}),s.jsx(Z,{children:s.jsx("span",{className:"text-sm text-muted-foreground",children:t.department})}),s.jsx(Z,{children:t.name}),s.jsx(Z,{children:s.jsx(ce,{variant:"outline",className:"text-xs",children:Dm[t.type]||t.type})}),s.jsx(Z,{children:t.expiryDate?s.jsxs("div",{children:[s.jsx("span",{className:"text-sm",children:ne(Hr(t.expiryDate),"dd MMM yyyy")}),r!==null&&s.jsx("span",{className:Q("text-xs block",r<0?"text-destructive":r<30?"text-warning":"text-muted-foreground"),children:r<0?`${Math.abs(r)} days overdue`:`${r} days remaining`})]}):s.jsx("span",{className:"text-muted-foreground",children:"Pending"})}),s.jsx(Z,{children:s.jsx(Nh,{status:t.status,size:"sm"})})]},t.id)})})]})})}function Gue({employees:e}){return s.jsx("div",{className:"rounded-lg border overflow-hidden",children:s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{className:"bg-muted/50",children:[s.jsx(re,{children:"Employee"}),s.jsx(re,{children:"Department"}),s.jsx(re,{children:"Overall Status"}),s.jsx(re,{children:"Certifications"}),s.jsx(re,{children:"Compliance Progress"})]})}),s.jsx(jr,{children:e.length===0?s.jsx(qe,{children:s.jsx(Z,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No employees found matching your filters"})}):e.map(t=>{const r={total:t.certifications.length,compliant:t.certifications.filter(a=>a.status==="compliant").length,expiring:t.certifications.filter(a=>a.status==="expiring").length,expired:t.certifications.filter(a=>a.status==="expired").length,pending:t.certifications.filter(a=>a.status==="pending").length},n=r.total>0?Math.round(r.compliant/r.total*100):0;return s.jsxs(qe,{className:"table-row-interactive",children:[s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pr,{className:"h-8 w-8",children:s.jsxs(Ar,{className:"text-xs bg-primary/10 text-primary",children:[t.first_name[0],t.last_name[0]]})}),s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium block",children:[t.first_name," ",t.last_name]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:t.position||"No position"})]})]})}),s.jsx(Z,{children:s.jsx("span",{className:"text-sm text-muted-foreground",children:t.department||"Unassigned"})}),s.jsx(Z,{children:s.jsx(Nh,{status:t.compliance_status,size:"sm"})}),s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[r.compliant>0&&s.jsxs(ce,{variant:"outline",className:"text-xs bg-success/10 text-success border-success/20",children:[r.compliant," "]}),r.expiring>0&&s.jsxs(ce,{variant:"outline",className:"text-xs bg-warning/10 text-warning border-warning/20",children:[r.expiring," "]}),r.expired>0&&s.jsxs(ce,{variant:"outline",className:"text-xs bg-destructive/10 text-destructive border-destructive/20",children:[r.expired," "]}),r.pending>0&&s.jsxs(ce,{variant:"outline",className:"text-xs",children:[r.pending," pending"]}),r.total===0&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"No certifications"})]})}),s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-2 min-w-[120px]",children:[s.jsx(Ks,{value:n,className:"h-2 flex-1"}),s.jsxs("span",{className:"text-xs font-medium w-10 text-right",children:[n,"%"]})]})})]},t.id)})})]})})}const wt=x.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:Q("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));wt.displayName="Textarea";const Ql=Mie,f8=x.createContext({}),pt=({...e})=>s.jsx(f8.Provider,{value:{name:e.name},children:s.jsx(Fie,{...e})}),X0=()=>{const e=x.useContext(f8),t=x.useContext(h8),{getFieldState:r,formState:n}=I0(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},h8=x.createContext({}),ft=x.forwardRef(({className:e,...t},r)=>{const n=x.useId();return s.jsx(h8.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:Q("space-y-2",e),...t})})});ft.displayName="FormItem";const vt=x.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=X0();return s.jsx(q,{ref:r,className:Q(n&&"text-destructive",e),htmlFor:a,...t})});vt.displayName="FormLabel";const ht=x.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=X0();return s.jsx(wL,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});ht.displayName="FormControl";const Yd=x.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=X0();return s.jsx("p",{ref:r,id:n,className:Q("text-sm text-muted-foreground",e),...t})});Yd.displayName="FormDescription";const _t=x.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=X0(),o=a?String(a==null?void 0:a.message):t;return o?s.jsx("p",{ref:n,id:i,className:Q("text-sm font-medium text-destructive",e),...r,children:o}):null});_t.displayName="FormMessage";const Yue=Os({employeeId:Ze().min(1,"Employee is required"),leaveTypeId:Ze().min(1,"Leave type is required"),startDate:Ze().min(1,"Start date is required"),endDate:Ze().min(1,"End date is required"),hours:xU().min(.5,"Hours must be at least 0.5"),reason:Ze().optional()}).refine(e=>e.startDate&&e.endDate?Hr(e.endDate)>=Hr(e.startDate):!0,{message:"End date must be after start date",path:["endDate"]});function Xue({open:e,onOpenChange:t,preselectedEmployeeId:r}){const{leaveTypes:n,createRequest:a,isCreatingRequest:i}=Uu(),{employees:o}=Kl(),l=o.filter(m=>m.status==="active"),c=as({resolver:Di(Yue),defaultValues:{employeeId:r||"",leaveTypeId:"",startDate:"",endDate:"",hours:8,reason:""}}),u=c.watch("startDate"),d=c.watch("endDate"),f=()=>{if(u&&d)try{const m=xse(Hr(d),Hr(u))+1;return Math.max(m*8,0)}catch{return 8}return 8},h=m=>{a({employeeId:m.employeeId,leaveTypeId:m.leaveTypeId,startDate:m.startDate,endDate:m.endDate,hours:m.hours,reason:m.reason},{onSuccess:()=>{c.reset(),t(!1)}})};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-md",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Submit Leave Request"}),s.jsx(Mt,{children:"Fill in the details for the leave request."})]}),s.jsx(Ql,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(h),className:"space-y-4",children:[!r&&s.jsx(pt,{control:c.control,name:"employeeId",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Employee"}),s.jsxs(Me,{onValueChange:m.onChange,value:m.value,children:[s.jsx(ht,{children:s.jsx(Te,{children:s.jsx($e,{placeholder:"Select employee"})})}),s.jsx(De,{children:l.map(g=>s.jsxs(W,{value:g.id,children:[g.first_name," ",g.last_name]},g.id))})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"leaveTypeId",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Leave Type"}),s.jsxs(Me,{onValueChange:m.onChange,value:m.value,children:[s.jsx(ht,{children:s.jsx(Te,{children:s.jsx($e,{placeholder:"Select leave type"})})}),s.jsx(De,{children:n.map(g=>s.jsxs(W,{value:g.id,children:[g.name," ",!g.paid&&"(Unpaid)"]},g.id))})]}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(pt,{control:c.control,name:"startDate",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Start Date"}),s.jsx(ht,{children:s.jsx(J,{type:"date",...m,onChange:g=>{m.onChange(g),setTimeout(()=>{const p=f();c.setValue("hours",p)},0)}})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"endDate",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"End Date"}),s.jsx(ht,{children:s.jsx(J,{type:"date",...m,onChange:g=>{m.onChange(g),setTimeout(()=>{const p=f();c.setValue("hours",p)},0)}})}),s.jsx(_t,{})]})})]}),s.jsx(pt,{control:c.control,name:"hours",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Total Hours"}),s.jsx(ht,{children:s.jsx(J,{type:"number",step:"0.5",...m,onChange:g=>m.onChange(parseFloat(g.target.value)||0)})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"reason",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Reason (Optional)"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Brief description...",...m})}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{type:"submit",className:"gradient-primary",disabled:i,children:i?"Submitting...":"Submit Request"})]})]})})]})})}function Que({onViewEmployee:e}){const{leaveRequests:t,stats:r,processDecision:n,isProcessingDecision:a,getEmployeeBalances:i}=Uu(),[o,l]=x.useState("pending"),[c,u]=x.useState(null),[d,f]=x.useState({open:!1,action:null,reason:"",override:!1,insufficientBalance:!1}),h=o==="all"?t:t.filter(v=>v.status===o),m=(v,b)=>{let y=!1;if(b==="approve"&&v.leave_type_id){const _=i(v.employee_id).find(j=>j.leave_type_id===v.leave_type_id);y=!_||_.balance_hours<v.hours}u(v),f({open:!0,action:b,reason:"",override:!1,insufficientBalance:y})},g=()=>{!c||!d.action||n({request_id:c.id,action:d.action,reason:d.reason||void 0,override_insufficient_balance:d.override},{onSuccess:()=>{f({open:!1,action:null,reason:"",override:!1,insufficientBalance:!1}),u(null)}})},p=v=>({"Annual Leave":"bg-info/10 text-info","Personal/Sick Leave":"bg-warning/10 text-warning","Compassionate Leave":"bg-primary/10 text-primary","Parental Leave":"bg-success/10 text-success","Unpaid Leave":"bg-muted text-muted-foreground",Other:"bg-muted text-muted-foreground"})[v]||"bg-muted text-muted-foreground";return s.jsxs(s.Fragment,{children:[s.jsxs(K,{children:[s.jsx(de,{children:s.jsx(me,{className:"text-lg",children:"Leave Requests"})}),s.jsx(Y,{children:s.jsxs(_n,{value:o,onValueChange:l,children:[s.jsxs(mn,{className:"mb-4",children:[s.jsxs(Ue,{value:"pending",children:["Pending (",r.pending,")"]}),s.jsx(Ue,{value:"approved",children:"Approved"}),s.jsx(Ue,{value:"rejected",children:"Rejected"}),s.jsx(Ue,{value:"all",children:"All"})]}),s.jsx("div",{className:"space-y-4",children:h.length===0?s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:s.jsx("p",{children:"No leave requests found"})}):h.map(v=>{const b=v.employee;return b?s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-muted/30 transition-colors",children:[s.jsx(Pr,{className:"h-12 w-12 flex-shrink-0 cursor-pointer",onClick:()=>e==null?void 0:e(b.id),children:s.jsxs(Ar,{className:"bg-primary/10 text-primary",children:[b.first_name[0],b.last_name[0]]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("p",{className:"font-semibold cursor-pointer hover:text-primary",onClick:()=>e==null?void 0:e(b.id),children:[b.first_name," ",b.last_name]}),v.leave_type&&s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${p(v.leave_type.name)}`,children:v.leave_type.name}),s.jsx(Nh,{status:v.status,size:"sm"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[ne(Hr(v.start_date),"EEE, dd MMM")," -"," ",ne(Hr(v.end_date),"EEE, dd MMM yyyy")]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.hours," hours",v.override_reason&&s.jsxs("span",{className:"ml-2 text-warning",children:[s.jsx(ir,{className:"inline h-3 w-3 mr-1"}),"Override applied"]})]}),v.reason&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-1 italic",children:['"',v.reason,'"']})]}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[v.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(I,{size:"sm",variant:"outline",className:"text-success border-success hover:bg-success/10",onClick:()=>m(v,"approve"),children:[s.jsx(yt,{className:"h-4 w-4 mr-1"}),"Approve"]}),s.jsxs(I,{size:"sm",variant:"outline",className:"text-destructive border-destructive hover:bg-destructive/10",onClick:()=>m(v,"reject"),children:[s.jsx(zn,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),v.status==="approved"&&s.jsxs(I,{size:"sm",variant:"outline",className:"text-muted-foreground",onClick:()=>m(v,"cancel"),children:[s.jsx(ZK,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]},v.id):null})})]})})]}),s.jsx($t,{open:d.open,onOpenChange:v=>{v||(f({open:!1,action:null,reason:"",override:!1,insufficientBalance:!1}),u(null))},children:s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsxs(Rt,{children:[d.action==="approve"&&"Approve Leave Request",d.action==="reject"&&"Reject Leave Request",d.action==="cancel"&&"Cancel Leave Request"]}),s.jsxs(Mt,{children:[d.action==="approve"&&"This will deduct the hours from the employee's balance.",d.action==="reject"&&"The employee will be notified of the rejection.",d.action==="cancel"&&"This will restore the hours to the employee's balance."]})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[d.insufficientBalance&&d.action==="approve"&&s.jsx("div",{className:"p-3 rounded-lg bg-warning/10 border border-warning/20",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ir,{className:"h-5 w-5 text-warning flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-warning",children:"Insufficient Balance"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"The employee does not have enough leave balance for this request."}),s.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[s.jsx(Ri,{id:"override",checked:d.override,onCheckedChange:v=>f(b=>({...b,override:!!v}))}),s.jsx(q,{htmlFor:"override",className:"text-sm",children:"Override and approve anyway (requires reason)"})]})]})]})}),(d.action==="reject"||d.action==="cancel"||d.insufficientBalance&&d.override)&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(q,{htmlFor:"reason",children:["Reason ",d.override?"(Required)":"(Optional)"]}),s.jsx(wt,{id:"reason",value:d.reason,onChange:v=>f(b=>({...b,reason:v.target.value})),placeholder:"Enter reason..."})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>{f({open:!1,action:null,reason:"",override:!1,insufficientBalance:!1}),u(null)},children:"Cancel"}),s.jsx(I,{onClick:g,disabled:a||d.insufficientBalance&&d.action==="approve"&&!d.override||d.override&&!d.reason.trim(),className:d.action==="approve"?"bg-success hover:bg-success/90":d.action==="reject"?"bg-destructive hover:bg-destructive/90":"",children:a?"Processing...":`Confirm ${d.action}`})]})]})})]})}const Zue=Os({leaveTypeId:Ze().min(1,"Leave type is required"),adjustmentHours:xU().refine(e=>e!==0,"Hours cannot be zero"),reason:Ze().min(10,"Reason must be at least 10 characters")});function Jue({open:e,onOpenChange:t,employeeId:r,employeeName:n}){const{leaveTypes:a,createAdjustment:i,isCreatingAdjustment:o,getEmployeeBalances:l}=Uu(),c=as({resolver:Di(Zue),defaultValues:{leaveTypeId:"",adjustmentHours:0,reason:""}}),u=c.watch("leaveTypeId"),f=(r?l(r):[]).find(m=>m.leave_type_id===u),h=m=>{r&&i({employee_id:r,leave_type_id:m.leaveTypeId,adjustment_hours:m.adjustmentHours,reason:m.reason},{onSuccess:()=>{c.reset(),t(!1)}})};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-md",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Adjust Leave Balance"}),s.jsxs(Mt,{children:["Manually adjust the leave balance for ",n,". This action will be logged for audit purposes."]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-warning/10 border border-warning/20 flex items-start gap-2",children:[s.jsx(ir,{className:"h-5 w-5 text-warning flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Balance adjustments are tracked in the audit log and visible in compliance reports. A detailed reason is required."})]}),s.jsx(Ql,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(h),className:"space-y-4",children:[s.jsx(pt,{control:c.control,name:"leaveTypeId",render:({field:m})=>{var g;return s.jsxs(ft,{children:[s.jsx(vt,{children:"Leave Type"}),s.jsxs(Me,{onValueChange:m.onChange,value:m.value,children:[s.jsx(ht,{children:s.jsx(Te,{children:s.jsx($e,{placeholder:"Select leave type"})})}),s.jsx(De,{children:a.map(p=>s.jsx(W,{value:p.id,children:p.name},p.id))})]}),f&&s.jsxs(Yd,{children:["Current balance: ",((g=f.balance_hours)==null?void 0:g.toFixed(1))||0," hours"]}),s.jsx(_t,{})]})}}),s.jsx(pt,{control:c.control,name:"adjustmentHours",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Adjustment Hours"}),s.jsx(ht,{children:s.jsx(J,{type:"number",step:"0.5",placeholder:"e.g., 8 or -16",...m,onChange:g=>m.onChange(parseFloat(g.target.value)||0)})}),s.jsx(Yd,{children:"Use positive numbers to add hours, negative to deduct."}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"reason",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Reason"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Explain why this adjustment is being made...",className:"min-h-[100px]",...m})}),s.jsx(Yd,{children:"This will be recorded in the audit log."}),s.jsx(_t,{})]})}),s.jsxs(fr,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:o,children:o?"Saving...":"Save Adjustment"})]})]})})]})})}function ede({onViewEmployee:e}){const{leaveBalances:t,leaveTypes:r,runAccruals:n,isRunningAccruals:a}=Uu(),{employees:i}=Kl(),o=i.filter(m=>m.status==="active"),[l,c]=x.useState(""),[u,d]=x.useState({open:!1,employeeId:null,employeeName:""}),h=o.map(m=>{const g=t.filter(p=>p.employee_id===m.id);return{employee:m,balances:r.map(p=>{const v=g.find(b=>b.leave_type_id===p.id);return{leaveType:p,hours:(v==null?void 0:v.balance_hours)||0}})}}).filter(m=>`${m.employee.first_name} ${m.employee.last_name}`.toLowerCase().includes(l.toLowerCase()));return s.jsxs(s.Fragment,{children:[s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between",children:[s.jsx(me,{className:"text-lg",children:"Leave Balances"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{placeholder:"Search employees...",value:l,onChange:m=>c(m.target.value),className:"pl-9 w-64"})]}),s.jsxs(I,{variant:"outline",size:"sm",onClick:()=>n(),disabled:a,children:[s.jsx(Zs,{className:"h-4 w-4 mr-2"}),a?"Running...":"Run Accruals"]})]})]}),s.jsx(Y,{children:h.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.jsx("p",{children:"No employees found"})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(({employee:m,balances:g})=>{var p;return s.jsxs("div",{className:"p-4 rounded-lg border border-border bg-card hover:bg-muted/30 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>e==null?void 0:e(m.id),children:[s.jsx(Pr,{className:"h-10 w-10",children:s.jsxs(Ar,{className:"bg-primary/10 text-primary text-sm",children:[m.first_name[0],m.last_name[0]]})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium hover:text-primary",children:[m.first_name," ",m.last_name]}),s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:(p=m.employment_type)==null?void 0:p.replace("_"," ")})]})]}),s.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>d({open:!0,employeeId:m.id,employeeName:`${m.first_name} ${m.last_name}`}),children:s.jsx(jt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[g.slice(0,4).map(({leaveType:v,hours:b})=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground truncate mr-2",children:v.name}),s.jsxs(ce,{variant:b>0?"secondary":"outline",className:"font-mono",children:[b.toFixed(1),"h"]})]},v.id)),g.length>4&&s.jsxs("p",{className:"text-xs text-muted-foreground text-center pt-1",children:["+",g.length-4," more"]})]})]},m.id)})})})]}),s.jsx(Jue,{open:u.open,onOpenChange:m=>d(g=>({...g,open:m})),employeeId:u.employeeId,employeeName:u.employeeName})]})}function tde(){const{adjustments:e,adjustmentsLoading:t}=Uu();return t?s.jsxs(K,{children:[s.jsx(de,{children:s.jsx(me,{className:"text-lg",children:"Adjustment History"})}),s.jsx(Y,{children:s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading adjustments..."})})]}):s.jsxs(K,{children:[s.jsx(de,{children:s.jsxs(me,{className:"text-lg flex items-center gap-2",children:[s.jsx(Xa,{className:"h-5 w-5"}),"Balance Adjustment History"]})}),s.jsx(Y,{children:e.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Xa,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No balance adjustments have been made"}),s.jsx("p",{className:"text-sm mt-1",children:"Adjustments will appear here when admins manually modify leave balances."})]}):s.jsx("div",{className:"space-y-4",children:e.map(r=>{const n=r.adjustment_hours>0,a=r.employee,i=r.leave_type;return s.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border border-border bg-card",children:[s.jsx("div",{className:`p-2 rounded-full ${n?"bg-success/10":"bg-destructive/10"}`,children:n?s.jsx(Zs,{className:"h-5 w-5 text-success"}):s.jsx(hG,{className:"h-5 w-5 text-destructive"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pr,{className:"h-6 w-6",children:s.jsxs(Ar,{className:"text-xs bg-primary/10 text-primary",children:[a.first_name[0],a.last_name[0]]})}),s.jsxs("span",{className:"font-medium",children:[a.first_name," ",a.last_name]})]}),i&&s.jsx(ce,{variant:"secondary",children:i.name}),s.jsxs(ce,{variant:n?"default":"destructive",className:"font-mono",children:[n?"+":"",r.adjustment_hours.toFixed(1),"h"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.reason}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Adjusted by ",r.adjusted_by_name||r.adjusted_by_email," on"," ",ne(Hr(r.created_at),"PPp")]})]})]},r.id)})})})]})}function rde(){const[e,t]=x.useState("requests"),[r,n]=x.useState(!1),{stats:a,isLoading:i}=Uu();return i?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ot,{className:"h-8 w-48"}),s.jsx(Ot,{className:"h-10 w-40"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[1,2,3,4].map(o=>s.jsx(Ot,{className:"h-24"},o))}),s.jsx(Ot,{className:"h-96"})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Leave Management"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage leave requests, balances, and accruals."})]}),s.jsxs(I,{className:"gradient-primary",onClick:()=>n(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"New Leave Request"]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[s.jsx(K,{className:"card-interactive",children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-warning/10",children:s.jsx(xt,{className:"h-5 w-5 text-warning"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:a.pending}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"})]})]})})}),s.jsx(K,{className:"card-interactive",children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-success/10",children:s.jsx(yt,{className:"h-5 w-5 text-success"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:a.approved}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"})]})]})})}),s.jsx(K,{className:"card-interactive",children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-destructive/10",children:s.jsx(zn,{className:"h-5 w-5 text-destructive"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:a.rejected}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejected"})]})]})})}),s.jsx(K,{className:"card-interactive",children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-muted",children:s.jsx(zt,{className:"h-5 w-5 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:a.cancelled}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cancelled"})]})]})})})]}),s.jsxs(_n,{value:e,onValueChange:t,children:[s.jsxs(mn,{children:[s.jsxs(Ue,{value:"requests",children:[s.jsx(zt,{className:"h-4 w-4 mr-2"}),"Requests"]}),s.jsxs(Ue,{value:"balances",children:[s.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Balances"]}),s.jsxs(Ue,{value:"adjustments",children:[s.jsx(Xa,{className:"h-4 w-4 mr-2"}),"Adjustments"]})]}),s.jsx(tt,{value:"requests",className:"mt-6",children:s.jsx(Que,{})}),s.jsx(tt,{value:"balances",className:"mt-6",children:s.jsx(ede,{})}),s.jsx(tt,{value:"adjustments",className:"mt-6",children:s.jsx(tde,{})})]}),s.jsx(Xue,{open:r,onOpenChange:n})]})}const nde={draft:{label:"Draft",className:"bg-muted text-muted-foreground"},active:{label:"Active",className:"bg-success/10 text-success border-success/20"},paused:{label:"Paused",className:"bg-warning/10 text-warning border-warning/20"},closed:{label:"Closed",className:"bg-destructive/10 text-destructive border-destructive/20"}},sde={casual:"Casual",part_time:"Part-Time",full_time:"Full-Time",contractor:"Contractor"};function ade({job:e,onView:t,onEdit:r}){const n=nde[e.status],a=e.closingDate?ei(Hr(e.closingDate),new Date):null;return s.jsx(K,{className:"card-interactive",children:s.jsxs(Y,{className:"pt-5",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold text-lg truncate",children:e.title}),s.jsx(ce,{variant:"outline",className:Q("text-xs",n.className),children:n.label})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.department})]}),s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",children:s.jsx(ai,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",className:"w-48 bg-popover",children:[s.jsxs(st,{onClick:()=>t==null?void 0:t(e),children:[s.jsx(Li,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.jsxs(st,{onClick:()=>r==null?void 0:r(e),children:[s.jsx(mk,{className:"h-4 w-4 mr-2"}),"Edit Posting"]}),s.jsx(ma,{}),e.status==="active"?s.jsxs(st,{children:[s.jsx(p0,{className:"h-4 w-4 mr-2"}),"Pause Posting"]}):e.status==="paused"?s.jsxs(st,{children:[s.jsx(Np,{className:"h-4 w-4 mr-2"}),"Resume Posting"]}):null,s.jsx(ma,{}),s.jsxs(st,{className:"text-destructive",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground flex-wrap",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(nF,{className:"h-4 w-4"}),e.location]}),s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(Rl,{className:"h-4 w-4"}),sde[e.employmentType]]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground flex-wrap",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(zd,{className:"h-4 w-4"}),"$",e.payRateMin," - $",e.payRateMax,"/hr"]}),e.closingDate&&s.jsxs("span",{className:Q("flex items-center gap-1.5",a!==null&&a<7?"text-warning":""),children:[s.jsx(xt,{className:"h-4 w-4"}),a!==null&&a>=0?`Closes in ${a} days`:"Closed"]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-border flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Er,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm font-medium",children:[e.applicantCount," applicants"]})]}),s.jsx(I,{variant:"outline",size:"sm",onClick:()=>t==null?void 0:t(e),children:"View Applicants"})]})]})})}const Jv=[{key:"applied",label:"Applied",color:"bg-muted"},{key:"screening",label:"Screening",color:"bg-info/20"},{key:"interview",label:"Interview",color:"bg-primary/20"},{key:"reference_check",label:"Reference Check",color:"bg-warning/20"},{key:"offer",label:"Offer",color:"bg-success/20"}];function ide({applicants:e,onSelectApplicant:t,onMoveApplicant:r}){const n=i=>e.filter(o=>o.stage===i),a=i=>{const o=Jv.findIndex(l=>l.key===i);return o>=0&&o<Jv.length-1?Jv[o+1].key:null};return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Jv.map(i=>{const o=n(i.key);return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:Q("rounded-lg p-3",i.color),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-sm",children:i.label}),s.jsx(ce,{variant:"secondary",className:"text-xs",children:o.length})]})}),s.jsxs("div",{className:"space-y-2 min-h-[200px]",children:[o.map(l=>s.jsx(ode,{applicant:l,nextStage:a(l.stage),onSelect:()=>t==null?void 0:t(l),onMove:c=>r==null?void 0:r(l,c)},l.id)),o.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm border-2 border-dashed rounded-lg",children:"No applicants"})]})]},i.key)})})}function ode({applicant:e,nextStage:t,onSelect:r,onMove:n}){const a={applied:"Applied",screening:"Screening",interview:"Interview",reference_check:"Reference Check",offer:"Offer",hired:"Hired",rejected:"Rejected"};return s.jsx(K,{className:"cursor-pointer hover:shadow-md transition-all hover:-translate-y-0.5",onClick:r,children:s.jsxs(Y,{className:"p-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Pr,{className:"h-9 w-9 flex-shrink-0",children:s.jsxs(Ar,{className:"bg-primary/10 text-primary text-xs",children:[e.firstName[0],e.lastName[0]]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"font-medium text-sm truncate",children:[e.firstName," ",e.lastName]}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.jobTitle})]}),s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,onClick:i=>i.stopPropagation(),children:s.jsx(I,{variant:"ghost",size:"icon",className:"h-6 w-6",children:s.jsx(ai,{className:"h-3 w-3"})})}),s.jsxs(ss,{align:"end",className:"w-48 bg-popover",children:[s.jsxs(st,{onClick:i=>{i.stopPropagation(),r()},children:[s.jsx(ns,{className:"h-4 w-4 mr-2"}),"View Profile"]}),s.jsxs(st,{onClick:i=>i.stopPropagation(),children:[s.jsx(fu,{className:"h-4 w-4 mr-2"}),"Send Email"]}),s.jsx(ma,{}),t&&s.jsxs(st,{onClick:i=>{i.stopPropagation(),n(t)},children:[s.jsx(Po,{className:"h-4 w-4 mr-2"}),"Move to ",a[t]]}),s.jsx(st,{className:"text-destructive",onClick:i=>{i.stopPropagation(),n("rejected")},children:"Reject Applicant"})]})]})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(i=>s.jsx(Ws,{className:Q("h-3 w-3",i<=e.rating?"fill-warning text-warning":"text-muted")},i))}),s.jsx("span",{className:"text-xs text-muted-foreground",children:ne(Hr(e.appliedAt),"MMM d")})]}),e.notes.length>0&&s.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:s.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.notes[e.notes.length-1].content})})]})})}const um=["applied","screening","interview","reference_check","offer","hired"],xT={applied:"Applied",screening:"Screening",interview:"Interview",reference_check:"Reference Check",offer:"Offer",hired:"Hired",rejected:"Rejected"},lde={applied:"bg-muted text-muted-foreground",screening:"bg-info/10 text-info",interview:"bg-primary/10 text-primary",reference_check:"bg-warning/10 text-warning",offer:"bg-success/10 text-success",hired:"bg-success text-success-foreground",rejected:"bg-destructive/10 text-destructive"};function cde({applicant:e,open:t,onOpenChange:r,onMoveStage:n}){const[a,i]=x.useState("");if(!e)return null;const o=um.indexOf(e.stage),l=o>=0&&o<um.length-1?um[o+1]:null;return s.jsx(Oo,{open:t,onOpenChange:r,children:s.jsxs(Ui,{className:"w-full sm:max-w-lg overflow-y-auto",children:[s.jsx(Bi,{className:"pb-4",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Pr,{className:"h-14 w-14",children:s.jsxs(Ar,{className:"bg-primary/10 text-primary text-lg",children:[e.firstName[0],e.lastName[0]]})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(zi,{className:"text-xl",children:[e.firstName," ",e.lastName]}),s.jsx(To,{className:"mt-1",children:e.jobTitle}),s.jsx(ce,{className:Q("mt-2",lde[e.stage]),children:xT[e.stage]})]})]})}),s.jsxs("div",{className:"space-y-3 py-4 border-t border-b border-border",children:[s.jsxs("a",{href:`mailto:${e.email}`,className:"flex items-center gap-3 text-sm hover:text-primary transition-colors",children:[s.jsx(fu,{className:"h-4 w-4 text-muted-foreground"}),e.email]}),s.jsxs("a",{href:`tel:${e.phone}`,className:"flex items-center gap-3 text-sm hover:text-primary transition-colors",children:[s.jsx(Vd,{className:"h-4 w-4 text-muted-foreground"}),e.phone]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[s.jsx(zt,{className:"h-4 w-4"}),"Applied ",ne(Hr(e.appliedAt),"MMMM d, yyyy")]})]}),s.jsxs("div",{className:"py-4",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Rating"}),s.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(c=>s.jsx("button",{className:"p-1 hover:scale-110 transition-transform",children:s.jsx(Ws,{className:Q("h-5 w-5",c<=e.rating?"fill-warning text-warning":"text-muted hover:text-warning/50")})},c)),s.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:e.rating>0?`${e.rating}/5`:"Not rated"})]})]}),s.jsxs("div",{className:"py-4",children:[s.jsx("p",{className:"text-sm font-medium mb-3",children:"Hiring Progress"}),s.jsx("div",{className:"flex items-center gap-1",children:um.slice(0,-1).map((c,u)=>{const d=um.indexOf(e.stage)>=u;return e.stage,s.jsx("div",{className:"flex items-center flex-1",children:s.jsx("div",{className:Q("h-2 flex-1 rounded-full transition-colors",d?"bg-primary":"bg-muted")})},c)})}),s.jsxs("div",{className:"flex justify-between mt-2 text-xs text-muted-foreground",children:[s.jsx("span",{children:"Applied"}),s.jsx("span",{children:"Hired"})]})]}),s.jsxs("div",{className:"flex gap-2 py-4",children:[l&&e.stage!=="rejected"&&s.jsxs(I,{className:"flex-1 gradient-primary",onClick:()=>n==null?void 0:n(e,l),children:["Move to ",xT[l],s.jsx(Po,{className:"h-4 w-4 ml-1"})]}),e.stage==="offer"&&s.jsxs(I,{className:"flex-1 gradient-primary",children:[s.jsx(bo,{className:"h-4 w-4 mr-2"}),"Send Offer Letter"]}),e.stage!=="rejected"&&e.stage!=="hired"&&s.jsxs(I,{variant:"outline",className:"text-destructive",children:[s.jsx(Bn,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),s.jsx(Nt,{}),s.jsxs(_n,{defaultValue:"notes",className:"mt-4",children:[s.jsxs(mn,{className:"w-full",children:[s.jsx(Ue,{value:"notes",className:"flex-1",children:"Notes"}),s.jsx(Ue,{value:"documents",className:"flex-1",children:"Documents"})]}),s.jsxs(tt,{value:"notes",className:"mt-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(wt,{placeholder:"Add a note about this candidate...",value:a,onChange:c=>i(c.target.value),className:"min-h-[80px]"}),s.jsxs(I,{size:"sm",disabled:!a.trim(),children:[s.jsx(jt,{className:"h-4 w-4 mr-1"}),"Add Note"]})]}),s.jsx("div",{className:"space-y-3",children:e.notes.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"}):e.notes.map(c=>s.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[s.jsx("p",{className:"text-sm",children:c.content}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:c.author}),s.jsx("span",{children:""}),s.jsx("span",{children:ne(Hr(c.createdAt),"MMM d, h:mm a")})]})]},c.id))})]}),s.jsxs(tt,{value:"documents",className:"mt-4 space-y-2",children:[e.documents.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No documents uploaded"}):e.documents.map(c=>s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(ut,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:c.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uploaded ",ne(Hr(c.uploadedAt),"MMM d, yyyy")]})]}),s.jsx(I,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(As,{className:"h-4 w-4"})})]},c.id)),s.jsxs(I,{variant:"outline",className:"w-full mt-2",children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Upload Document"]})]})]})]})})}var Q0="Collapsible",[ude,m8]=zr(Q0),[dde,kE]=ude(Q0),p8=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:i,onOpenChange:o,...l}=e,[c,u]=qn({prop:n,defaultProp:a??!1,onChange:o,caller:Q0});return s.jsx(dde,{scope:r,disabled:i,contentId:Ss(),open:c,onOpenToggle:x.useCallback(()=>u(d=>!d),[u]),children:s.jsx(Ne.div,{"data-state":PE(c),"data-disabled":i?"":void 0,...l,ref:t})})});p8.displayName=Q0;var g8="CollapsibleTrigger",v8=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,a=kE(g8,r);return s.jsx(Ne.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":PE(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:t,onClick:fe(e.onClick,a.onOpenToggle)})});v8.displayName=g8;var EE="CollapsibleContent",y8=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=kE(EE,e.__scopeCollapsible);return s.jsx(en,{present:r||a.open,children:({present:i})=>s.jsx(fde,{...n,ref:t,present:i})})});y8.displayName=EE;var fde=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:a,...i}=e,o=kE(EE,r),[l,c]=x.useState(n),u=x.useRef(null),d=We(t,u),f=x.useRef(0),h=f.current,m=x.useRef(0),g=m.current,p=o.open||l,v=x.useRef(p),b=x.useRef(void 0);return x.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),Br(()=>{const y=u.current;if(y){b.current=b.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const w=y.getBoundingClientRect();f.current=w.height,m.current=w.width,v.current||(y.style.transitionDuration=b.current.transitionDuration,y.style.animationName=b.current.animationName),c(n)}},[o.open,n]),s.jsx(Ne.div,{"data-state":PE(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!p,...i,ref:d,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:p&&a})});function PE(e){return e?"open":"closed"}var hde=p8,mde=v8,pde=y8,ci="Accordion",gde=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[AE,vde,yde]=ch(ci),[Z0,p3e]=zr(ci,[yde,m8]),OE=m8(),x8=O.forwardRef((e,t)=>{const{type:r,...n}=e,a=n,i=n;return s.jsx(AE.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?s.jsx(jde,{...i,ref:t}):s.jsx(wde,{...a,ref:t})})});x8.displayName=ci;var[b8,xde]=Z0(ci),[w8,bde]=Z0(ci,{collapsible:!1}),wde=O.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...o}=e,[l,c]=qn({prop:r,defaultProp:n??"",onChange:a,caller:ci});return s.jsx(b8,{scope:e.__scopeAccordion,value:O.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:O.useCallback(()=>i&&c(""),[i,c]),children:s.jsx(w8,{scope:e.__scopeAccordion,collapsible:i,children:s.jsx(j8,{...o,ref:t})})})}),jde=O.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=qn({prop:r,defaultProp:n??[],onChange:a,caller:ci}),c=O.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=O.useCallback(d=>l((f=[])=>f.filter(h=>h!==d)),[l]);return s.jsx(b8,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:s.jsx(w8,{scope:e.__scopeAccordion,collapsible:!0,children:s.jsx(j8,{...i,ref:t})})})}),[_de,J0]=Z0(ci),j8=O.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:n,dir:a,orientation:i="vertical",...o}=e,l=O.useRef(null),c=We(l,t),u=vde(r),f=Hl(a)==="ltr",h=fe(e.onKeyDown,m=>{var k;if(!gde.includes(m.key))return;const g=m.target,p=u().filter(C=>{var P;return!((P=C.ref.current)!=null&&P.disabled)}),v=p.findIndex(C=>C.ref.current===g),b=p.length;if(v===-1)return;m.preventDefault();let y=v;const w=0,_=b-1,j=()=>{y=v+1,y>_&&(y=w)},N=()=>{y=v-1,y<w&&(y=_)};switch(m.key){case"Home":y=w;break;case"End":y=_;break;case"ArrowRight":i==="horizontal"&&(f?j():N());break;case"ArrowDown":i==="vertical"&&j();break;case"ArrowLeft":i==="horizontal"&&(f?N():j());break;case"ArrowUp":i==="vertical"&&N();break}const S=y%b;(k=p[S].ref.current)==null||k.focus()});return s.jsx(_de,{scope:r,disabled:n,direction:a,orientation:i,children:s.jsx(AE.Slot,{scope:r,children:s.jsx(Ne.div,{...o,"data-orientation":i,ref:c,onKeyDown:n?void 0:h})})})}),Vx="AccordionItem",[Nde,TE]=Z0(Vx),_8=O.forwardRef((e,t)=>{const{__scopeAccordion:r,value:n,...a}=e,i=J0(Vx,r),o=xde(Vx,r),l=OE(r),c=Ss(),u=n&&o.value.includes(n)||!1,d=i.disabled||e.disabled;return s.jsx(Nde,{scope:r,open:u,disabled:d,triggerId:c,children:s.jsx(hde,{"data-orientation":i.orientation,"data-state":P8(u),...l,...a,ref:t,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(n):o.onItemClose(n)}})})});_8.displayName=Vx;var N8="AccordionHeader",S8=O.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=J0(ci,r),i=TE(N8,r);return s.jsx(Ne.h3,{"data-orientation":a.orientation,"data-state":P8(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:t})});S8.displayName=N8;var D1="AccordionTrigger",C8=O.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=J0(ci,r),i=TE(D1,r),o=bde(D1,r),l=OE(r);return s.jsx(AE.ItemSlot,{scope:r,children:s.jsx(mde,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...l,...n,ref:t})})});C8.displayName=D1;var k8="AccordionContent",E8=O.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=J0(ci,r),i=TE(k8,r),o=OE(r);return s.jsx(pde,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...o,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});E8.displayName=k8;function P8(e){return e?"open":"closed"}var Sde=x8,Cde=_8,kde=S8,A8=C8,O8=E8;const Ede=Sde,T8=x.forwardRef(({className:e,...t},r)=>s.jsx(Cde,{ref:r,className:Q("border-b",e),...t}));T8.displayName="AccordionItem";const D8=x.forwardRef(({className:e,children:t,...r},n)=>s.jsx(kde,{className:"flex",children:s.jsxs(A8,{ref:n,className:Q("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,s.jsx(f0,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));D8.displayName=A8.displayName;const R8=x.forwardRef(({className:e,children:t,...r},n)=>s.jsx(O8,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:s.jsx("div",{className:Q("pb-4 pt-0",e),children:t})}));R8.displayName=O8.displayName;const kt=e=>{const t=new Date;return t.setDate(t.getDate()-e),t.toISOString().split("T")[0]},Xm=e=>{const t=new Date;return t.setDate(t.getDate()+e),t.toISOString().split("T")[0]},i_=[{id:"job-1",title:"Support Worker",department:"Disability Services",location:"Melbourne, VIC",employmentType:"casual",payRateMin:35,payRateMax:42,description:"We are looking for compassionate and dedicated Support Workers to join our team providing high-quality disability support services.",requirements:["Certificate III in Individual Support or equivalent","Current NDIS Worker Screening Check","Valid drivers licence and reliable vehicle","First Aid and CPR certification","Experience working with people with disabilities (preferred)"],status:"active",applicantCount:12,createdAt:kt(14),closingDate:Xm(16)},{id:"job-2",title:"Senior Support Worker",department:"Community Support",location:"Sydney, NSW",employmentType:"part_time",payRateMin:42,payRateMax:50,description:"Experienced Senior Support Worker needed to mentor junior staff and provide complex support services.",requirements:["Certificate IV in Disability or equivalent","Minimum 3 years experience in disability support","Leadership experience","Current NDIS Worker Screening Check","Advanced First Aid certification"],status:"active",applicantCount:5,createdAt:kt(7),closingDate:Xm(23)},{id:"job-3",title:"Team Coordinator",department:"Operations",location:"Brisbane, QLD",employmentType:"full_time",payRateMin:55,payRateMax:65,description:"Lead a team of support workers and ensure delivery of exceptional support services.",requirements:["Diploma in Community Services or equivalent","Minimum 5 years in disability sector","Team management experience","Strong communication and organizational skills"],status:"paused",applicantCount:3,createdAt:kt(21),closingDate:Xm(9)},{id:"job-4",title:"Allied Health Assistant",department:"Allied Health",location:"Melbourne, VIC",employmentType:"contractor",payRateMin:45,payRateMax:55,description:"Support our allied health professionals in delivering therapy services to NDIS participants.",requirements:["Certificate IV in Allied Health Assistance","Experience in therapy support","NDIS Worker Screening Check"],status:"draft",applicantCount:0,createdAt:kt(2)}],My=[{id:"app-1",firstName:"James",lastName:"Wilson",email:"james.wilson@email.com",phone:"0412 111 222",jobId:"job-1",jobTitle:"Support Worker",stage:"interview",rating:4,appliedAt:kt(5),notes:[{id:"n1",content:"Strong application, relevant experience",author:"HR Manager",createdAt:kt(4)},{id:"n2",content:"Phone screening completed - very articulate",author:"HR Manager",createdAt:kt(3)}],documents:[{id:"d1",name:"Resume - James Wilson.pdf",type:"resume",url:"#",uploadedAt:kt(5)}]},{id:"app-2",firstName:"Sophie",lastName:"Anderson",email:"sophie.a@email.com",phone:"0423 222 333",jobId:"job-1",jobTitle:"Support Worker",stage:"offer",rating:5,appliedAt:kt(10),notes:[{id:"n3",content:"Excellent candidate, 4 years experience",author:"HR Manager",createdAt:kt(9)},{id:"n4",content:"Interview went exceptionally well",author:"Team Lead",createdAt:kt(6)},{id:"n5",content:"References checked - all positive",author:"HR Manager",createdAt:kt(2)}],documents:[{id:"d2",name:"Resume - Sophie Anderson.pdf",type:"resume",url:"#",uploadedAt:kt(10)},{id:"d3",name:"Cover Letter.pdf",type:"cover_letter",url:"#",uploadedAt:kt(10)}]},{id:"app-3",firstName:"Marcus",lastName:"Lee",email:"marcus.lee@email.com",phone:"0434 333 444",jobId:"job-1",jobTitle:"Support Worker",stage:"screening",rating:3,appliedAt:kt(2),notes:[],documents:[{id:"d4",name:"Resume - Marcus Lee.pdf",type:"resume",url:"#",uploadedAt:kt(2)}]},{id:"app-4",firstName:"Emma",lastName:"Roberts",email:"emma.r@email.com",phone:"0445 444 555",jobId:"job-1",jobTitle:"Support Worker",stage:"applied",rating:0,appliedAt:kt(1),notes:[],documents:[{id:"d5",name:"Resume.pdf",type:"resume",url:"#",uploadedAt:kt(1)}]},{id:"app-5",firstName:"David",lastName:"Kim",email:"david.kim@email.com",phone:"0456 555 666",jobId:"job-2",jobTitle:"Senior Support Worker",stage:"reference_check",rating:4,appliedAt:kt(6),notes:[{id:"n6",content:"Great leadership potential",author:"HR Manager",createdAt:kt(4)}],documents:[{id:"d6",name:"Resume - David Kim.pdf",type:"resume",url:"#",uploadedAt:kt(6)},{id:"d7",name:"Certificates.pdf",type:"certificate",url:"#",uploadedAt:kt(6)}]},{id:"app-6",firstName:"Rachel",lastName:"Green",email:"rachel.g@email.com",phone:"0467 666 777",jobId:"job-1",jobTitle:"Support Worker",stage:"rejected",rating:2,appliedAt:kt(12),notes:[{id:"n7",content:"Does not meet minimum requirements",author:"HR Manager",createdAt:kt(11)}],documents:[]},{id:"app-7",firstName:"Tom",lastName:"Harris",email:"tom.h@email.com",phone:"0478 777 888",jobId:"job-1",jobTitle:"Support Worker",stage:"hired",rating:5,appliedAt:kt(20),notes:[{id:"n8",content:"Offer accepted!",author:"HR Manager",createdAt:kt(8)}],documents:[]}],bT=[{id:"task-1",title:"Submit ID Documents",description:"Upload proof of identity (passport or drivers licence)",category:"documents",dueInDays:1,required:!0},{id:"task-2",title:"Sign Employment Contract",description:"Review and digitally sign your employment contract",category:"documents",dueInDays:1,required:!0},{id:"task-3",title:"Complete Tax Declaration",description:"Submit TFN declaration and superannuation choice form",category:"admin",dueInDays:3,required:!0},{id:"task-4",title:"NDIS Worker Screening",description:"Provide NDIS Worker Screening clearance or apply for one",category:"compliance",dueInDays:7,required:!0},{id:"task-5",title:"Police Check",description:"Submit current police check or apply for a new one",category:"compliance",dueInDays:7,required:!0},{id:"task-6",title:"First Aid Certificate",description:"Upload current First Aid certificate",category:"compliance",dueInDays:14,required:!0},{id:"task-7",title:"Workplace Induction",description:"Complete online workplace induction training",category:"training",dueInDays:7,required:!0},{id:"task-8",title:"NDIS Orientation",description:"Complete NDIS Worker Orientation Module",category:"training",dueInDays:14,required:!0},{id:"task-9",title:"Manual Handling Training",description:"Complete manual handling safety training",category:"training",dueInDays:14,required:!1},{id:"task-10",title:"IT System Setup",description:"Set up work email and access to internal systems",category:"setup",dueInDays:3,required:!0},{id:"task-11",title:"Uniform Collection",description:"Collect work uniform from office",category:"setup",dueInDays:7,required:!1},{id:"task-12",title:"Emergency Contact Form",description:"Submit emergency contact details",category:"admin",dueInDays:3,required:!0}],wT=[{employeeId:"emp-new-1",employeeName:"Alex Nguyen",startDate:Xm(7),tasks:[{taskId:"task-1",status:"completed",completedAt:kt(2)},{taskId:"task-2",status:"completed",completedAt:kt(1)},{taskId:"task-3",status:"in_progress"},{taskId:"task-4",status:"pending"},{taskId:"task-5",status:"pending"},{taskId:"task-6",status:"pending"},{taskId:"task-7",status:"pending"},{taskId:"task-8",status:"pending"},{taskId:"task-9",status:"pending"},{taskId:"task-10",status:"pending"},{taskId:"task-11",status:"pending"},{taskId:"task-12",status:"pending"}],completionPercentage:17},{employeeId:"emp-new-2",employeeName:"Tom Harris",startDate:Xm(3),tasks:[{taskId:"task-1",status:"completed",completedAt:kt(5)},{taskId:"task-2",status:"completed",completedAt:kt(4)},{taskId:"task-3",status:"completed",completedAt:kt(3)},{taskId:"task-4",status:"completed",completedAt:kt(2)},{taskId:"task-5",status:"completed",completedAt:kt(2)},{taskId:"task-6",status:"completed",completedAt:kt(1)},{taskId:"task-7",status:"in_progress"},{taskId:"task-8",status:"pending"},{taskId:"task-9",status:"pending"},{taskId:"task-10",status:"completed",completedAt:kt(1)},{taskId:"task-11",status:"pending"},{taskId:"task-12",status:"completed",completedAt:kt(3)}],completionPercentage:67}],Pde=e=>My.filter(t=>t.jobId===e),Ade={documents:ut,training:bf,compliance:hu,setup:mh,admin:XL},Ode={documents:"Documents",training:"Training",compliance:"Compliance",setup:"System Setup",admin:"Administrative"},jT={completed:{icon:yt,color:"text-success"},in_progress:{icon:xt,color:"text-info"},pending:{icon:h0,color:"text-muted-foreground"},overdue:{icon:cu,color:"text-destructive"}};function Tde({onboardingProgress:e}){const t=a=>bT.find(i=>i.id===a),n=(a=>a.reduce((i,o)=>(i[o.category]||(i[o.category]=[]),i[o.category].push(o),i),{}))(bT);return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(a=>{const i=a.tasks.filter(l=>l.status==="completed").length,o=a.tasks.length;return s.jsx(K,{className:"card-interactive",children:s.jsxs(Y,{className:"pt-5",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Pr,{className:"h-12 w-12",children:s.jsx(Ar,{className:"bg-primary/10 text-primary",children:a.employeeName.split(" ").map(l=>l[0]).join("")})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold",children:a.employeeName}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Starts ",ne(Hr(a.startDate),"MMMM d, yyyy")]}),s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-muted-foreground",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[a.completionPercentage,"%"]})]}),s.jsx(Ks,{value:a.completionPercentage,className:"h-2"}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i," of ",o," tasks completed"]})]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Outstanding Tasks"}),s.jsx("div",{className:"space-y-2",children:a.tasks.filter(l=>l.status!=="completed").slice(0,3).map(l=>{const c=t(l.taskId);if(!c)return null;const u=jT[l.status].icon;return s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(u,{className:Q("h-4 w-4",jT[l.status].color)}),s.jsx("span",{className:"truncate",children:c.title}),c.required&&s.jsx(ce,{variant:"outline",className:"text-xs ml-auto",children:"Required"})]},l.taskId)})})]}),s.jsx(I,{variant:"outline",className:"w-full mt-4",children:"View Full Checklist"})]})},a.employeeId)})}),s.jsxs(K,{children:[s.jsx(de,{children:s.jsx(me,{className:"text-lg",children:"Onboarding Checklist Template"})}),s.jsx(Y,{children:s.jsx(Ede,{type:"multiple",className:"w-full",children:Object.entries(n).map(([a,i])=>{const o=Ade[a]||ut;return s.jsxs(T8,{value:a,children:[s.jsx(D8,{className:"hover:no-underline",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(o,{className:"h-4 w-4 text-primary"})}),s.jsx("span",{className:"font-medium",children:Ode[a]}),s.jsxs(ce,{variant:"secondary",className:"ml-2",children:[i.length," tasks"]})]})}),s.jsx(R8,{children:s.jsx("div",{className:"space-y-3 pt-2",children:i.map(l=>s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border",children:[s.jsx(h0,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium text-sm",children:l.title}),l.required&&s.jsx(ce,{variant:"outline",className:"text-xs",children:"Required"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:l.description}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Due within ",l.dueInDays," days of start date"]})]})]},l.id))})})]},a)})})})]})]})}function Dde({open:e,onOpenChange:t,trigger:r}){const[n,a]=x.useState([]),[i,o]=x.useState(""),{data:l=[],isLoading:c}=sr({queryKey:["departments"],queryFn:async()=>{const{data:f,error:h}=await M.from("departments").select("*").order("name");if(h)throw h;return f}}),u=()=>{i.trim()&&(a([...n,i.trim()]),o(""))},d=f=>{a(n.filter((h,m)=>m!==f))};return s.jsxs($t,{open:e,onOpenChange:t,children:[r&&s.jsx(ev,{asChild:!0,children:r}),s.jsxs(Tt,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Create Job Posting"}),s.jsx(Mt,{children:"Fill in the details to create a new job listing."})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"job-title",children:"Job Title *"}),s.jsx(J,{id:"job-title",placeholder:"e.g. Support Worker"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"department",children:"Department *"}),s.jsxs(Me,{children:[s.jsx(Te,{children:s.jsx($e,{placeholder:"Select department"})}),s.jsx(De,{className:"bg-popover",children:c?s.jsx("div",{className:"flex items-center justify-center py-2",children:s.jsx(et,{className:"h-4 w-4 animate-spin"})}):l.length===0?s.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No departments configured"}):l.map(f=>s.jsx(W,{value:f.name,children:f.name},f.id))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"location",children:"Location *"}),s.jsx(J,{id:"location",placeholder:"e.g. Melbourne, VIC"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"employment-type",children:"Employment Type *"}),s.jsxs(Me,{children:[s.jsx(Te,{children:s.jsx($e,{placeholder:"Select type"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"casual",children:"Casual"}),s.jsx(W,{value:"part_time",children:"Part-Time"}),s.jsx(W,{value:"full_time",children:"Full-Time"}),s.jsx(W,{value:"contractor",children:"Contractor"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"pay-min",children:"Minimum Pay Rate ($/hr)"}),s.jsx(J,{id:"pay-min",type:"number",placeholder:"35"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"pay-max",children:"Maximum Pay Rate ($/hr)"}),s.jsx(J,{id:"pay-max",type:"number",placeholder:"45"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"closing-date",children:"Closing Date"}),s.jsx(J,{id:"closing-date",type:"date"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"description",children:"Job Description *"}),s.jsx(wt,{id:"description",placeholder:"Describe the role, responsibilities, and what you're looking for...",className:"min-h-[120px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Requirements"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{placeholder:"Add a requirement...",value:i,onChange:f=>o(f.target.value),onKeyPress:f=>f.key==="Enter"&&(f.preventDefault(),u())}),s.jsx(I,{type:"button",onClick:u,variant:"outline",children:s.jsx(jt,{className:"h-4 w-4"})})]}),n.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:n.map((f,h)=>s.jsxs(ce,{variant:"secondary",className:"pl-3 pr-1 py-1.5",children:[f,s.jsx("button",{type:"button",onClick:()=>d(h),className:"ml-2 hover:text-destructive",children:s.jsx(Bn,{className:"h-3 w-3"})})]},h))})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[s.jsx(I,{variant:"outline",className:"flex-1",onClick:()=>t==null?void 0:t(!1),children:"Save as Draft"}),s.jsx(I,{className:"flex-1 gradient-primary",children:"Publish Job"})]})]})]})]})}function Rde({applicant:e,open:t,onOpenChange:r}){const[n,a]=x.useState("details");return e?s.jsx($t,{open:t,onOpenChange:r,children:s.jsxs(Tt,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Dt,{children:[s.jsxs(Rt,{className:"flex items-center gap-2",children:[s.jsx(hh,{className:"h-5 w-5 text-primary"}),"Generate Offer Letter"]}),s.jsxs(Mt,{children:["Create an offer letter for ",e.firstName," ",e.lastName]})]}),n==="details"?s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Position Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"position",children:"Position Title"}),s.jsx(J,{id:"position",defaultValue:e.jobTitle})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"employment-type",children:"Employment Type"}),s.jsxs(Me,{defaultValue:"casual",children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"casual",children:"Casual"}),s.jsx(W,{value:"part_time",children:"Part-Time"}),s.jsx(W,{value:"full_time",children:"Full-Time"}),s.jsx(W,{value:"contractor",children:"Contractor"})]})]})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Compensation"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"pay-rate",children:"Pay Rate ($/hr)"}),s.jsx(J,{id:"pay-rate",type:"number",placeholder:"40.00"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"award",children:"Award Classification"}),s.jsxs(Me,{children:[s.jsx(Te,{children:s.jsx($e,{placeholder:"Select classification"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"level-1",children:"Level 1.1"}),s.jsx(W,{value:"level-2",children:"Level 2.1"}),s.jsx(W,{value:"level-3",children:"Level 3.1"}),s.jsx(W,{value:"level-4",children:"Level 4.1"})]})]})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Important Dates"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"start-date",children:"Proposed Start Date"}),s.jsx(J,{id:"start-date",type:"date"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"expiry-date",children:"Offer Expiry Date"}),s.jsx(J,{id:"expiry-date",type:"date"})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"notes",children:"Additional Notes"}),s.jsx(wt,{id:"notes",placeholder:"Any additional terms or notes to include...",className:"min-h-[80px]"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(I,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsxs(I,{variant:"outline",onClick:()=>a("preview"),children:[s.jsx(Li,{className:"h-4 w-4 mr-2"}),"Preview"]}),s.jsxs(I,{className:"flex-1 gradient-primary",children:[s.jsx(bo,{className:"h-4 w-4 mr-2"}),"Send Offer Letter"]})]})]}):s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsx(K,{className:"bg-muted/30",children:s.jsxs(Y,{className:"pt-6 space-y-4",children:[s.jsxs("div",{className:"text-center border-b border-border pb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg gradient-primary flex items-center justify-center mx-auto mb-3",children:s.jsx("span",{className:"text-white font-bold",children:"S+"})}),s.jsx("h2",{className:"text-xl font-bold",children:"Social Plus Support Work"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Employment Offer Letter"})]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("p",{children:["Dear ",e.firstName," ",e.lastName,","]}),s.jsxs("p",{children:["We are pleased to offer you the position of ",s.jsx("strong",{children:e.jobTitle})," at Social Plus Support Work. We were impressed with your qualifications and experience, and believe you will be a valuable addition to our team."]}),s.jsxs("div",{className:"bg-background rounded-lg p-4 space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Position:"})," ",e.jobTitle]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Employment Type:"})," Casual"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Pay Rate:"})," $40.00 per hour"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Start Date:"})," To be confirmed"]})]}),s.jsx("p",{children:"This offer is contingent upon satisfactory completion of pre-employment checks, including verification of your NDIS Worker Screening clearance and other required certifications."}),s.jsx("p",{children:"Please confirm your acceptance of this offer by signing below and returning this letter by the specified date."}),s.jsx("div",{className:"pt-4 space-y-4",children:s.jsxs("div",{className:"border-t border-border pt-4",children:[s.jsx("p",{className:"text-muted-foreground",children:"Signature: ________________________"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Date: ________________________"})]})})]})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(I,{variant:"outline",onClick:()=>a("details"),children:"Back to Edit"}),s.jsxs(I,{variant:"outline",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),s.jsxs(I,{className:"flex-1 gradient-primary",children:[s.jsx(bo,{className:"h-4 w-4 mr-2"}),"Send to Candidate"]})]})]})]})}):null}function Mde(){const[e,t]=x.useState("jobs"),[r,n]=x.useState("all"),[a,i]=x.useState(null),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,f]=x.useState(!1),[h,m]=x.useState(""),g=i_.filter(j=>j.status==="active").length,p=My.length,v=My.filter(j=>!["hired","rejected"].includes(j.stage)).length,b=wT.length,y=r==="all"?My.filter(j=>!["hired","rejected"].includes(j.stage)):Pde(r).filter(j=>!["hired","rejected"].includes(j.stage)),w=j=>{i(j),l(!0)},_=(j,N)=>{console.log(`Moving ${j.firstName} to ${N}`),N==="offer"&&(i(j),f(!0))};return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Recruitment & Onboarding"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage job postings, track applicants, and onboard new hires."})]}),s.jsxs(I,{className:"gradient-primary",onClick:()=>u(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Post New Job"]})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Lt,{title:"Active Jobs",value:g,description:"Open positions",icon:Rl,variant:"default"}),s.jsx(Lt,{title:"Total Applicants",value:p,description:"All time",icon:Er,variant:"info"}),s.jsx(Lt,{title:"In Pipeline",value:v,description:"Currently reviewing",icon:lF,variant:"warning"}),s.jsx(Lt,{title:"Onboarding",value:b,description:"New hires in progress",icon:uu,variant:"success"})]}),s.jsxs(_n,{value:e,onValueChange:t,children:[s.jsxs(mn,{children:[s.jsxs(Ue,{value:"jobs",className:"flex items-center gap-2",children:[s.jsx(Rl,{className:"h-4 w-4"}),"Job Postings"]}),s.jsxs(Ue,{value:"applicants",className:"flex items-center gap-2",children:[s.jsx(Er,{className:"h-4 w-4"}),"Applicants",s.jsx(ce,{variant:"secondary",className:"ml-1",children:v})]}),s.jsxs(Ue,{value:"onboarding",className:"flex items-center gap-2",children:[s.jsx(uu,{className:"h-4 w-4"}),"Onboarding",s.jsx(ce,{variant:"secondary",className:"ml-1",children:b})]})]}),s.jsx(tt,{value:"jobs",className:"mt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{type:"search",placeholder:"Search job postings...",value:h,onChange:j=>m(j.target.value),className:"pl-10"})]}),s.jsxs(Me,{defaultValue:"all",children:[s.jsx(Te,{className:"w-full sm:w-40",children:s.jsx($e,{placeholder:"Status"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"all",children:"All Status"}),s.jsx(W,{value:"active",children:"Active"}),s.jsx(W,{value:"paused",children:"Paused"}),s.jsx(W,{value:"draft",children:"Draft"}),s.jsx(W,{value:"closed",children:"Closed"})]})]})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i_.filter(j=>j.title.toLowerCase().includes(h.toLowerCase())||j.department.toLowerCase().includes(h.toLowerCase())).map(j=>s.jsx(ade,{job:j,onView:N=>{n(N.id),t("applicants")},onEdit:N=>console.log("Edit job",N.id)},j.id))})]})}),s.jsx(tt,{value:"applicants",className:"mt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[s.jsx("div",{className:"flex-1",children:s.jsxs(Me,{value:r,onValueChange:n,children:[s.jsx(Te,{className:"w-full sm:w-64",children:s.jsx($e,{placeholder:"Filter by job"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"all",children:"All Active Jobs"}),i_.filter(j=>j.status==="active").map(j=>s.jsx(W,{value:j.id,children:j.title},j.id))]})]})}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",y.length," applicants in pipeline"]})]})})}),s.jsx("div",{className:"overflow-x-auto pb-4",children:s.jsx(ide,{applicants:y,onSelectApplicant:w,onMoveApplicant:_})})]})}),s.jsx(tt,{value:"onboarding",className:"mt-6",children:s.jsx(Tde,{onboardingProgress:wT})})]}),s.jsx(cde,{applicant:a,open:o,onOpenChange:l,onMoveStage:_}),s.jsx(Dde,{open:c,onOpenChange:u}),s.jsx(Rde,{applicant:a,open:d,onOpenChange:f})]})}const $de={draft:{label:"Draft",variant:"secondary",icon:ut},pending_signature:{label:"Pending Signature",variant:"default",icon:xt},signed:{label:"Signed",variant:"outline",icon:yt},expired:{label:"Expired",variant:"destructive",icon:cu},voided:{label:"Voided",variant:"destructive",icon:zn}};function Ide({contract:e,onView:t,onSign:r}){const n=$de[e.status],a=n.icon;return s.jsxs(K,{className:"hover:shadow-md transition-shadow",children:[s.jsx(de,{className:"pb-2",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(ut,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sm",children:e.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e.position})]})]}),s.jsxs(ce,{variant:n.variant,className:"flex items-center gap-1",children:[s.jsx(a,{className:"h-3 w-3"}),n.label]})]})}),s.jsxs(Y,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Employee"}),s.jsx("p",{className:"font-medium",children:e.employee_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Email"}),s.jsx("p",{className:"font-medium truncate",children:e.employee_email})]}),e.start_date&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Start Date"}),s.jsx("p",{className:"font-medium",children:ne(new Date(e.start_date),"MMM d, yyyy")})]}),e.pay_rate&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Pay Rate"}),s.jsxs("p",{className:"font-medium",children:["$",e.pay_rate,"/hr"]})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsxs(I,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>t(e),children:[s.jsx(Li,{className:"h-4 w-4 mr-1"}),"View"]}),e.status==="pending_signature"&&s.jsxs(I,{size:"sm",className:"flex-1 gradient-primary",onClick:()=>r(e),children:[s.jsx(_p,{className:"h-4 w-4 mr-1"}),"Sign"]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created ",ne(new Date(e.created_at),"MMM d, yyyy"),e.signed_at&&s.jsxs(s.Fragment,{children:["  Signed ",ne(new Date(e.signed_at),"MMM d, yyyy")]})]})]})]})}const Lde=`EMPLOYMENT CONTRACT

This Employment Agreement ("Agreement") is entered into between Social Plus Support Work ("Employer") and the Employee named below.

TERMS OF EMPLOYMENT:

1. POSITION AND DUTIES
   The Employee agrees to perform the duties and responsibilities associated with the position stated above, and such other duties as may be reasonably assigned.

2. COMPENSATION
   The Employee will be compensated at the rate specified above, paid in accordance with the Employer's standard payroll practices.

3. WORKING HOURS
   Working hours will be determined based on client needs and roster schedules. The Employee agrees to maintain availability as reasonably required.

4. CONFIDENTIALITY
   The Employee agrees to maintain strict confidentiality of all client information, business operations, and proprietary information.

5. COMPLIANCE
   The Employee agrees to maintain all required certifications and clearances, including NDIS Worker Screening Check.

6. TERMINATION
   Either party may terminate this agreement with appropriate notice as required by the relevant Award or legislation.

By signing this agreement, both parties acknowledge and agree to the terms outlined above.`,_T={title:"",employee_name:"",employee_email:"",position:"",department:"",start_date:"",pay_rate:"",employment_type:"casual",content:Lde};function Fde({open:e,onOpenChange:t,onCreate:r}){const[n,a]=x.useState(!1),[i,o]=x.useState(_T),[l,c]=x.useState({}),u=()=>{const h=Joe.safeParse(i);if(!h.success){const m={};return h.error.errors.forEach(g=>{const p=g.path[0];m[p]||(m[p]=g.message)}),c(m),!1}return c({}),!0},d=async h=>{var m,g;if(!u()){oe({title:"Validation Error",description:"Please fix the errors in the form",variant:"destructive"});return}a(!0);try{await r({title:((m=i.title)==null?void 0:m.trim())||`Employment Contract - ${i.employee_name.trim()}`,content:i.content.trim(),employee_name:i.employee_name.trim(),employee_email:i.employee_email.trim(),position:i.position.trim(),department:((g=i.department)==null?void 0:g.trim())||void 0,start_date:i.start_date||void 0,pay_rate:i.pay_rate?parseFloat(i.pay_rate):void 0,employment_type:i.employment_type}),t(!1),o(_T),c({})}catch(p){console.error("Failed to create contract:",p)}finally{a(!1)}},f=(h,m)=>{o({...i,[h]:m}),l[h]&&c({...l,[h]:void 0})};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Dt,{children:[s.jsxs(Rt,{className:"flex items-center gap-2",children:[s.jsx(oG,{className:"h-5 w-5 text-primary"}),"Create Employment Contract"]}),s.jsx(Mt,{children:"Create a new employment contract for signing"})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Employee Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"employee_name",children:"Employee Name *"}),s.jsx(J,{id:"employee_name",value:i.employee_name,onChange:h=>f("employee_name",h.target.value),placeholder:"John Smith",className:l.employee_name?"border-destructive":"",maxLength:100}),l.employee_name&&s.jsx("p",{className:"text-xs text-destructive",children:l.employee_name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"employee_email",children:"Employee Email *"}),s.jsx(J,{id:"employee_email",type:"email",value:i.employee_email,onChange:h=>f("employee_email",h.target.value),placeholder:"john@example.com",className:l.employee_email?"border-destructive":"",maxLength:255}),l.employee_email&&s.jsx("p",{className:"text-xs text-destructive",children:l.employee_email})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Position Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"position",children:"Position Title *"}),s.jsx(J,{id:"position",value:i.position,onChange:h=>f("position",h.target.value),placeholder:"Support Worker",className:l.position?"border-destructive":"",maxLength:100}),l.position&&s.jsx("p",{className:"text-xs text-destructive",children:l.position})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"department",children:"Department"}),s.jsx(J,{id:"department",value:i.department||"",onChange:h=>f("department",h.target.value),placeholder:"Disability Services",className:l.department?"border-destructive":"",maxLength:100}),l.department&&s.jsx("p",{className:"text-xs text-destructive",children:l.department})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"employment_type",children:"Employment Type"}),s.jsxs(Me,{value:i.employment_type,onValueChange:h=>f("employment_type",h),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"casual",children:"Casual"}),s.jsx(W,{value:"part_time",children:"Part-Time"}),s.jsx(W,{value:"full_time",children:"Full-Time"}),s.jsx(W,{value:"contractor",children:"Contractor"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"pay_rate",children:"Pay Rate ($/hr)"}),s.jsx(J,{id:"pay_rate",type:"text",inputMode:"decimal",value:i.pay_rate||"",onChange:h=>f("pay_rate",h.target.value),placeholder:"40.00",className:l.pay_rate?"border-destructive":""}),l.pay_rate&&s.jsx("p",{className:"text-xs text-destructive",children:l.pay_rate})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"start_date",children:"Start Date"}),s.jsx(J,{id:"start_date",type:"date",value:i.start_date||"",onChange:h=>f("start_date",h.target.value),className:l.start_date?"border-destructive":""}),l.start_date&&s.jsx("p",{className:"text-xs text-destructive",children:l.start_date})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"title",children:"Contract Title"}),s.jsx(J,{id:"title",value:i.title||"",onChange:h=>f("title",h.target.value),placeholder:"Auto-generated if empty",className:l.title?"border-destructive":"",maxLength:200}),l.title&&s.jsx("p",{className:"text-xs text-destructive",children:l.title})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"content",children:"Contract Content *"}),s.jsx(wt,{id:"content",value:i.content,onChange:h=>f("content",h.target.value),className:`min-h-[200px] font-mono text-xs ${l.content?"border-destructive":""}`,maxLength:5e4}),l.content&&s.jsx("p",{className:"text-xs text-destructive",children:l.content}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.content.length.toLocaleString()," / 50,000 characters"]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(I,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{variant:"outline",onClick:()=>d(),disabled:n,children:"Save as Draft"}),s.jsxs(I,{className:"flex-1 gradient-primary",onClick:()=>d(),disabled:n,children:[s.jsx(bo,{className:"h-4 w-4 mr-2"}),"Create & Send for Signature"]})]})]})]})})}const Ude=dh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Cl=x.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:Q(Ude({variant:t}),e),...r}));Cl.displayName="Alert";const Qm=x.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:Q("mb-1 font-medium leading-none tracking-tight",e),...t}));Qm.displayName="AlertTitle";const kl=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Q("text-sm [&_p]:leading-relaxed",e),...t}));kl.displayName="AlertDescription";function Bde({onSignatureChange:e,signerName:t}){const r=x.useRef(null),[n,a]=x.useState(!1),[i,o]=x.useState(""),[l,c]=x.useState("draw");x.useEffect(()=>{const p=r.current;if(!p)return;const v=p.getContext("2d");if(!v)return;const b=p.getBoundingClientRect();p.width=b.width*2,p.height=b.height*2,v.scale(2,2),v.strokeStyle="hsl(var(--foreground))",v.lineWidth=2,v.lineCap="round",v.lineJoin="round",v.fillStyle="hsl(var(--background))",v.fillRect(0,0,b.width,b.height)},[]);const u=p=>{const v=r.current;if(!v)return{x:0,y:0};const b=v.getBoundingClientRect();return"touches"in p?{x:p.touches[0].clientX-b.left,y:p.touches[0].clientY-b.top}:{x:p.clientX-b.left,y:p.clientY-b.top}},d=p=>{p.preventDefault();const v=r.current,b=v==null?void 0:v.getContext("2d");if(!b)return;a(!0);const{x:y,y:w}=u(p);b.beginPath(),b.moveTo(y,w)},f=p=>{if(p.preventDefault(),!n)return;const v=r.current,b=v==null?void 0:v.getContext("2d");if(!b)return;const{x:y,y:w}=u(p);b.lineTo(y,w),b.stroke()},h=()=>{if(!n)return;a(!1);const p=r.current;if(p){const v=p.toDataURL("image/png");e(v,"drawn")}},m=()=>{const p=r.current,v=p==null?void 0:p.getContext("2d");if(!v||!p)return;const b=p.getBoundingClientRect();v.fillStyle="hsl(var(--background))",v.fillRect(0,0,b.width,b.height),e("","drawn")},g=p=>{if(o(p),p){const v=document.createElement("canvas");v.width=400,v.height=100;const b=v.getContext("2d");b&&(b.fillStyle="hsl(var(--background))",b.fillRect(0,0,400,100),b.font='italic 32px "Brush Script MT", cursive, serif',b.fillStyle="hsl(var(--foreground))",b.textAlign="center",b.textBaseline="middle",b.fillText(p,200,50),e(v.toDataURL("image/png"),"typed"))}else e("","typed")};return s.jsx("div",{className:"space-y-4",children:s.jsxs(_n,{value:l,onValueChange:p=>c(p),children:[s.jsxs(mn,{className:"grid w-full grid-cols-2",children:[s.jsxs(Ue,{value:"draw",className:"flex items-center gap-2",children:[s.jsx(Sc,{className:"h-4 w-4"}),"Draw Signature"]}),s.jsx(Ue,{value:"type",children:"Type Signature"})]}),s.jsxs(tt,{value:"draw",className:"space-y-3",children:[s.jsxs("div",{className:"relative border border-border rounded-lg overflow-hidden bg-background",children:[s.jsx("canvas",{ref:r,className:"w-full h-32 cursor-crosshair touch-none",onMouseDown:d,onMouseMove:f,onMouseUp:h,onMouseLeave:h,onTouchStart:d,onTouchMove:f,onTouchEnd:h}),s.jsx("div",{className:"absolute bottom-2 left-2 right-2 border-t border-dashed border-muted-foreground/30"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign above the line using your mouse or finger"}),s.jsxs(I,{variant:"outline",size:"sm",onClick:m,children:[s.jsx(aG,{className:"h-4 w-4 mr-2"}),"Clear"]})]})]}),s.jsxs(tt,{value:"type",className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"typed-signature",children:"Type your full legal name"}),s.jsx(J,{id:"typed-signature",value:i,onChange:p=>g(p.target.value),placeholder:t,className:"text-xl italic",style:{fontFamily:'"Brush Script MT", cursive, serif'}})]}),i&&s.jsxs("div",{className:"p-4 border border-border rounded-lg bg-background",children:[s.jsx("p",{className:"text-3xl italic text-center",style:{fontFamily:'"Brush Script MT", cursive, serif'},children:i}),s.jsx("div",{className:"mt-2 border-t border-dashed border-muted-foreground/30"})]})]})]})})}function zde({contract:e,open:t,onOpenChange:r,onSign:n}){const[a,i]=x.useState(""),[o,l]=x.useState("drawn"),[c,u]=x.useState(!1),[d,f]=x.useState(!1);if(!e)return null;const h=(p,v)=>{i(p),l(v)},m=async()=>{if(!(!a||!c)){f(!0);try{await n(e.id,a,o),r(!1),i(""),u(!1)}catch(p){console.error("Failed to sign contract:",p)}finally{f(!1)}}},g=a&&c&&!d;return s.jsx($t,{open:t,onOpenChange:r,children:s.jsxs(Tt,{className:"sm:max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs(Dt,{children:[s.jsxs(Rt,{className:"flex items-center gap-2",children:[s.jsx(hh,{className:"h-5 w-5 text-primary"}),"Sign Employment Contract"]}),s.jsxs(Mt,{children:["Review and sign your employment contract with ",e.title]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col gap-4",children:[s.jsxs("div",{className:"flex-1 min-h-0",children:[s.jsx(q,{className:"text-sm font-medium mb-2 block",children:"Contract Document"}),s.jsx(zu,{className:"h-64 border border-border rounded-lg bg-muted/30",children:s.jsxs("div",{className:"p-4 space-y-4 text-sm",children:[s.jsxs("div",{className:"text-center border-b border-border pb-4",children:[s.jsx("h2",{className:"text-lg font-bold",children:"Employment Contract"}),s.jsx("p",{className:"text-muted-foreground",children:e.title})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Employee:"})," ",e.employee_name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Position:"})," ",e.position]}),e.department&&s.jsxs("p",{children:[s.jsx("strong",{children:"Department:"})," ",e.department]}),e.employment_type&&s.jsxs("p",{children:[s.jsx("strong",{children:"Employment Type:"})," ",e.employment_type]}),e.start_date&&s.jsxs("p",{children:[s.jsx("strong",{children:"Start Date:"})," ",ne(new Date(e.start_date),"MMMM d, yyyy")]}),e.pay_rate&&s.jsxs("p",{children:[s.jsx("strong",{children:"Pay Rate:"})," $",e.pay_rate.toFixed(2),"/hr"]})]}),s.jsx(Nt,{}),s.jsx("div",{className:"whitespace-pre-wrap",children:e.content})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(q,{className:"text-sm font-medium",children:"Your Signature"}),s.jsx(Bde,{onSignatureChange:h,signerName:e.employee_name})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx(Ri,{id:"agree-terms",checked:c,onCheckedChange:p=>u(p===!0)}),s.jsxs("div",{className:"grid gap-1.5 leading-none",children:[s.jsx(q,{htmlFor:"agree-terms",className:"text-sm font-medium leading-relaxed cursor-pointer",children:"I agree to the terms and conditions"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"By signing this document, I acknowledge that I have read and understood the terms of this employment contract and agree to be bound by them."})]})]}),s.jsxs(Cl,{children:[s.jsx(dn,{className:"h-4 w-4"}),s.jsx(kl,{className:"text-xs",children:"Your signature will be securely recorded along with timestamp, IP address, and browser information for audit purposes."})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[s.jsx(I,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"}),s.jsx(I,{className:"flex-1 gradient-primary",onClick:m,disabled:!g,children:d?s.jsx(s.Fragment,{children:"Signing..."}):s.jsxs(s.Fragment,{children:[s.jsx(fh,{className:"h-4 w-4 mr-2"}),"Sign Contract"]})})]})]})})}const Vde={created:ut,viewed:Li,sent:bo,signed:_p,approved:yt,rejected:zn,voided:zn},qde={created:"text-blue-500 bg-blue-500/10",viewed:"text-gray-500 bg-gray-500/10",sent:"text-purple-500 bg-purple-500/10",signed:"text-green-500 bg-green-500/10",approved:"text-green-500 bg-green-500/10",rejected:"text-red-500 bg-red-500/10",voided:"text-red-500 bg-red-500/10"};function Wde({auditLogs:e}){return e.length===0?s.jsxs(K,{children:[s.jsx(de,{children:s.jsxs(me,{className:"flex items-center gap-2 text-base",children:[s.jsx(Xa,{className:"h-4 w-4"}),"Audit Trail"]})}),s.jsx(Y,{children:s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No audit entries yet"})})]}):s.jsxs(K,{children:[s.jsx(de,{children:s.jsxs(me,{className:"flex items-center gap-2 text-base",children:[s.jsx(Xa,{className:"h-4 w-4"}),"Audit Trail"]})}),s.jsx(Y,{children:s.jsx(zu,{className:"h-64",children:s.jsx("div",{className:"space-y-4",children:e.map((t,r)=>{const n=Vde[t.action]||ut,a=qde[t.action]||"text-gray-500 bg-gray-500/10";return s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:`p-2 rounded-full ${a}`,children:s.jsx(n,{className:"h-3 w-3"})}),r<e.length-1&&s.jsx("div",{className:"w-px h-full bg-border mt-2"})]}),s.jsxs("div",{className:"flex-1 pb-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("p",{className:"text-sm font-medium capitalize",children:t.action}),s.jsx("time",{className:"text-xs text-muted-foreground",children:ne(new Date(t.created_at),"MMM d, yyyy h:mm a")})]}),t.actor_name&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",t.actor_name]}),t.actor_email&&!t.actor_name&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",t.actor_email]}),t.ip_address&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["IP: ",t.ip_address]}),t.details&&Object.keys(t.details).length>0&&s.jsx("div",{className:"mt-2 p-2 rounded bg-muted/50 text-xs",children:Object.entries(t.details).map(([i,o])=>s.jsxs("p",{children:[s.jsxs("span",{className:"text-muted-foreground",children:[i,":"]})," ",String(o)]},i))})]})]},t.id)})})})})]})}const Hde={draft:{label:"Draft",variant:"secondary"},pending_signature:{label:"Pending Signature",variant:"default"},signed:{label:"Signed",variant:"outline"},expired:{label:"Expired",variant:"destructive"},voided:{label:"Voided",variant:"destructive"}};function Kde({contract:e,signature:t,auditLogs:r,open:n,onOpenChange:a}){if(!e)return null;const i=Hde[e.status];return s.jsx(Oo,{open:n,onOpenChange:a,children:s.jsxs(Ui,{className:"w-full sm:max-w-xl overflow-hidden flex flex-col",children:[s.jsx(Bi,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(ut,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(zi,{children:e.title}),s.jsx(To,{children:e.position})]}),s.jsx(ce,{variant:i.variant,children:i.label})]})}),s.jsx(zu,{className:"flex-1 -mx-6 px-6",children:s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Contract Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Employee"}),s.jsx("p",{className:"font-medium",children:e.employee_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Email"}),s.jsx("p",{className:"font-medium",children:e.employee_email})]}),e.department&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Department"}),s.jsx("p",{className:"font-medium",children:e.department})]}),e.employment_type&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Employment Type"}),s.jsx("p",{className:"font-medium capitalize",children:e.employment_type.replace("_"," ")})]}),e.start_date&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Start Date"}),s.jsx("p",{className:"font-medium",children:ne(new Date(e.start_date),"MMMM d, yyyy")})]}),e.pay_rate&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Pay Rate"}),s.jsxs("p",{className:"font-medium",children:["$",e.pay_rate,"/hr"]})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Contract Content"}),s.jsx("div",{className:"p-4 rounded-lg bg-muted/30 text-sm whitespace-pre-wrap",children:e.content})]}),t&&s.jsxs(s.Fragment,{children:[s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(yt,{className:"h-4 w-4 text-primary"}),"Signature"]}),s.jsx("div",{className:"p-4 rounded-lg border border-border bg-background",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("img",{src:t.signature_data,alt:"Signature",className:"max-h-20 object-contain"})}),s.jsx(Nt,{}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Signer"}),s.jsx("p",{className:"font-medium",children:t.signer_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Date Signed"}),s.jsx("p",{className:"font-medium",children:ne(new Date(t.signed_at),"MMM d, yyyy h:mm a")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Signature Type"}),s.jsx("p",{className:"font-medium capitalize",children:t.signature_type})]}),t.ip_address&&s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"IP Address"}),s.jsx("p",{className:"font-medium",children:t.ip_address})]})]})]})})]})]}),s.jsx(Nt,{}),s.jsx(Wde,{auditLogs:r}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(xt,{className:"h-3 w-3"}),"Created: ",ne(new Date(e.created_at),"MMM d, yyyy h:mm a")]}),e.signed_at&&s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(yt,{className:"h-3 w-3"}),"Signed: ",ne(new Date(e.signed_at),"MMM d, yyyy h:mm a")]})]})]})}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[s.jsxs(I,{variant:"outline",className:"flex-1",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),e.status==="pending_signature"&&s.jsxs(I,{variant:"outline",className:"flex-1",children:[s.jsx(fu,{className:"h-4 w-4 mr-2"}),"Resend"]})]})]})})}function Gde(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),a=async()=>{n(!0);try{const{data:d,error:f}=await M.from("contracts").select("*").order("created_at",{ascending:!1});if(f)throw f;t(d||[])}catch(d){console.error("Error fetching contracts:",d),oe({title:"Error",description:"Failed to fetch contracts",variant:"destructive"})}finally{n(!1)}},i=async d=>{var f;try{const{data:h}=await M.auth.getUser(),{data:m,error:g}=await M.from("contracts").insert({...d,status:"pending_signature",created_by:(f=h.user)==null?void 0:f.id}).select().single();if(g)throw g;return await u(m.id,"created","Contract created and sent for signature"),t(p=>[m,...p]),oe({title:"Contract Created",description:"Contract has been created and sent for signature"}),m}catch(h){throw console.error("Error creating contract:",h),oe({title:"Error",description:"Failed to create contract",variant:"destructive"}),h}},o=async(d,f,h,m,g)=>{try{const{error:p}=await M.from("signatures").insert({contract_id:d,signer_name:m,signer_email:g,signature_data:f,signature_type:h,user_agent:navigator.userAgent});if(p)throw p;const{error:v}=await M.from("contracts").update({status:"signed",signed_at:new Date().toISOString()}).eq("id",d);if(v)throw v;await u(d,"signed","Contract signed by employee",{signer_name:m,signature_type:h}),await a(),oe({title:"Contract Signed",description:"The contract has been successfully signed"})}catch(p){throw console.error("Error signing contract:",p),oe({title:"Error",description:"Failed to sign contract",variant:"destructive"}),p}},l=async d=>{try{const{data:f,error:h}=await M.from("signatures").select("*").eq("contract_id",d).single();if(h&&h.code!=="PGRST116")throw h;return f}catch(f){return console.error("Error fetching signature:",f),null}},c=async d=>{try{const{data:f,error:h}=await M.from("contract_audit_log").select("*").eq("contract_id",d).order("created_at",{ascending:!1});if(h)throw h;return f||[]}catch(f){return console.error("Error fetching audit logs:",f),[]}},u=async(d,f,h,m)=>{var g,p,v;try{const{data:b}=await M.auth.getUser(),y=m||(h?{description:h}:null);await M.from("contract_audit_log").insert([{contract_id:d,action:f,actor_email:(g=b.user)==null?void 0:g.email,actor_name:(v=(p=b.user)==null?void 0:p.user_metadata)==null?void 0:v.full_name,details:y,user_agent:navigator.userAgent}])}catch(b){console.error("Error logging audit event:",b)}};return x.useEffect(()=>{a()},[]),{contracts:e,isLoading:r,createContract:i,signContract:o,getSignature:l,getAuditLogs:c,logAuditEvent:u,refetch:a}}function Yde(){const{contracts:e,isLoading:t,createContract:r,signContract:n,getSignature:a,getAuditLogs:i,logAuditEvent:o}=Gde(),[l,c]=x.useState(""),[u,d]=x.useState("all"),[f,h]=x.useState(!1),[m,g]=x.useState(!1),[p,v]=x.useState(!1),[b,y]=x.useState(null),[w,_]=x.useState(null),[j,N]=x.useState([]),S=e.length,k=e.filter(F=>F.status==="pending_signature").length,C=e.filter(F=>F.status==="signed").length,P=e.filter(F=>F.status==="expired").length,A=e.filter(F=>{const L=F.employee_name.toLowerCase().includes(l.toLowerCase())||F.position.toLowerCase().includes(l.toLowerCase())||F.title.toLowerCase().includes(l.toLowerCase()),D=u==="all"||F.status===u;return L&&D}),E=async F=>{y(F);const[L,D]=await Promise.all([a(F.id),i(F.id)]);_(L),N(D),await o(F.id,"viewed"),v(!0)},R=F=>{y(F),g(!0)},$=async(F,L,D)=>{b&&await n(F,L,D,b.employee_name,b.employee_email)},B=async F=>{await r(F)};return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Contracts & E-Signatures"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Create, send, and manage employment contracts with digital signatures"})]}),s.jsxs(I,{className:"gradient-primary",onClick:()=>h(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Create Contract"]})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Lt,{title:"Total Contracts",value:S,description:"All contracts",icon:ut,variant:"default"}),s.jsx(Lt,{title:"Pending Signature",value:k,description:"Awaiting signature",icon:xt,variant:"warning"}),s.jsx(Lt,{title:"Signed",value:C,description:"Completed",icon:yt,variant:"success"}),s.jsx(Lt,{title:"Expired",value:P,description:"Need attention",icon:cu,variant:"danger"})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{type:"search",placeholder:"Search contracts...",value:l,onChange:F=>c(F.target.value),className:"pl-10"})]}),s.jsxs(Me,{value:u,onValueChange:d,children:[s.jsx(Te,{className:"w-full sm:w-48",children:s.jsx($e,{placeholder:"Filter by status"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"all",children:"All Status"}),s.jsx(W,{value:"draft",children:"Draft"}),s.jsx(W,{value:"pending_signature",children:"Pending Signature"}),s.jsx(W,{value:"signed",children:"Signed"}),s.jsx(W,{value:"expired",children:"Expired"}),s.jsx(W,{value:"voided",children:"Voided"})]})]})]})})}),t?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(F=>s.jsx(K,{className:"animate-pulse",children:s.jsx(Y,{className:"pt-6 h-48"})},F))}):A.length===0?s.jsx(K,{children:s.jsxs(Y,{className:"py-12 text-center",children:[s.jsx(hh,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"No contracts found"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:l||u!=="all"?"Try adjusting your search or filters":"Create your first employment contract"}),!l&&u==="all"&&s.jsxs(I,{onClick:()=>h(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Create Contract"]})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(F=>s.jsx(Ide,{contract:F,onView:E,onSign:R},F.id))}),s.jsx(Fde,{open:f,onOpenChange:h,onCreate:B}),s.jsx(zde,{contract:b,open:m,onOpenChange:g,onSign:$}),s.jsx(Kde,{contract:b,signature:w,auditLogs:j,open:p,onOpenChange:v})]})}function ew(){const{toast:e}=or(),t=ii(),{data:r=[],isLoading:n,refetch:a}=sr({queryKey:["org-documents"],queryFn:async()=>{const{data:f,error:h}=await M.from("org_documents").select("*").order("created_at",{ascending:!1});if(h)throw h;return f||[]}}),i=Wt({mutationFn:async({file:f,metadata:h})=>{var N,S;const{data:m}=await M.auth.getUser(),g=(N=m==null?void 0:m.user)==null?void 0:N.id,p=(S=m==null?void 0:m.user)==null?void 0:S.email,v=f.name.split(".").pop(),b=`${crypto.randomUUID()}.${v}`,{error:y}=await M.storage.from("org-documents").upload(b,f);if(y)throw y;const{data:w}=M.storage.from("org-documents").getPublicUrl(b),{data:_,error:j}=await M.from("org_documents").insert({...h,file_url:w.publicUrl,file_name:f.name,file_size:f.size,mime_type:f.type,uploaded_by:g,uploaded_by_name:p}).select().single();if(j)throw j;return _},onSuccess:()=>{t.invalidateQueries({queryKey:["org-documents"]}),e({title:"Success",description:"Document uploaded successfully"})},onError:f=>{console.error("Error uploading document:",f),e({title:"Error",description:f.message||"Failed to upload document",variant:"destructive"})}}),o=Wt({mutationFn:async({id:f,updates:h})=>{const{data:m,error:g}=await M.from("org_documents").update(h).eq("id",f).select().single();if(g)throw g;return m},onSuccess:()=>{t.invalidateQueries({queryKey:["org-documents"]}),e({title:"Success",description:"Document updated successfully"})},onError:()=>{e({title:"Error",description:"Failed to update document",variant:"destructive"})}}),l=Wt({mutationFn:async f=>{const{error:h}=await M.from("org_documents").delete().eq("id",f);if(h)throw h},onSuccess:()=>{t.invalidateQueries({queryKey:["org-documents"]}),e({title:"Success",description:"Document deleted successfully"})},onError:()=>{e({title:"Error",description:"Failed to delete document",variant:"destructive"})}}),c=x.useCallback(async(f,h)=>i.mutateAsync({file:f,metadata:h}),[i]),u=x.useCallback(async(f,h)=>o.mutateAsync({id:f,updates:h}),[o]),d=x.useCallback(async f=>l.mutateAsync(f),[l]);return{documents:r,loading:n,refetch:a,uploadDocument:c,updateDocument:u,deleteDocument:d}}function tw(e){const[t,r]=x.useState([]),[n,a]=x.useState(!0),{toast:i}=or(),o=x.useCallback(async()=>{try{a(!0);let u=M.from("document_distributions").select("*").order("created_at",{ascending:!1});e&&(u=u.eq("org_document_id",e));const{data:d,error:f}=await u;if(f)throw f;r(d||[])}catch(u){console.error("Error fetching distributions:",u),i({title:"Error",description:"Failed to load distributions",variant:"destructive"})}finally{a(!1)}},[e,i]);return x.useEffect(()=>{o()},[o]),{distributions:t,loading:n,refetch:o,createDistribution:async u=>{var d,f;try{const{data:h}=await M.auth.getUser(),{data:m,error:g}=await M.from("document_distributions").insert({...u,sent_by:(d=h==null?void 0:h.user)==null?void 0:d.id,sent_by_name:(f=h==null?void 0:h.user)==null?void 0:f.email,sent_at:new Date().toISOString(),status:"sent"}).select().single();if(g)throw g;return r(p=>[m,...p]),i({title:"Success",description:"Document distributed successfully"}),m}catch(h){throw console.error("Error creating distribution:",h),i({title:"Error",description:h.message||"Failed to distribute document",variant:"destructive"}),h}},updateDistribution:async(u,d)=>{try{const{data:f,error:h}=await M.from("document_distributions").update(d).eq("id",u).select().single();if(h)throw h;return r(m=>m.map(g=>g.id===u?f:g)),f}catch(f){throw console.error("Error updating distribution:",f),i({title:"Error",description:"Failed to update distribution",variant:"destructive"}),f}}}}const Xde={contract_template:"Contract Template",handbook:"Handbook",policy:"Policy",procedure:"Procedure",training:"Training",other:"Other"};function Qde({open:e,onOpenChange:t,document:r}){const{distributions:n}=tw(r.id),a=o=>o?o<1024?`${o} B`:o<1024*1024?`${(o/1024).toFixed(1)} KB`:`${(o/(1024*1024)).toFixed(1)} MB`:"Unknown",i={pending:n.filter(o=>o.status==="pending"||o.status==="sent").length,viewed:n.filter(o=>o.status==="viewed"||o.status==="downloaded").length,completed:n.filter(o=>o.status==="acknowledged"||o.status==="signed").length};return s.jsx(Oo,{open:e,onOpenChange:t,children:s.jsxs(Ui,{className:"sm:max-w-[480px] overflow-y-auto",children:[s.jsxs(Bi,{children:[s.jsxs(zi,{className:"flex items-center gap-2",children:[s.jsx(ut,{className:"h-5 w-5 text-primary"}),"Document Details"]}),s.jsx(To,{children:"View document information and distribution status"})]}),s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.description})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(ce,{variant:"secondary",children:Xde[r.category]}),r.requires_acknowledgment&&s.jsxs(ce,{variant:"outline",className:"gap-1",children:[s.jsx(Ai,{className:"h-3 w-3"}),"Requires Acknowledgment"]}),r.requires_signature&&s.jsxs(ce,{variant:"outline",className:"gap-1",children:[s.jsx(hh,{className:"h-3 w-3"}),"Requires Signature"]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"File Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"File Name"}),s.jsx("p",{className:"font-medium truncate",children:r.file_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Size"}),s.jsx("p",{className:"font-medium",children:a(r.file_size)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Version"}),s.jsxs("p",{className:"font-medium",children:["v",r.version||1]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Type"}),s.jsx("p",{className:"font-medium",children:r.mime_type||"Unknown"})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Metadata"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Uploaded:"}),s.jsx("span",{children:ne(new Date(r.created_at),"dd MMM yyyy HH:mm")})]}),r.uploaded_by_name&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"By:"}),s.jsx("span",{children:r.uploaded_by_name})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Distribution Summary"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-warning/10 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-warning",children:i.pending}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-info/10 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-info",children:i.viewed}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Viewed"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-success/10 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-success",children:i.completed}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"})]})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(I,{variant:"outline",className:"flex-1 gap-2",onClick:()=>window.open(r.file_url,"_blank"),children:[s.jsx(QL,{className:"h-4 w-4"}),"View"]}),s.jsxs(I,{className:"flex-1 gap-2",onClick:()=>window.open(r.file_url,"_blank"),children:[s.jsx(As,{className:"h-4 w-4"}),"Download"]})]})]})]})})}function Zde({open:e,onOpenChange:t,document:r}){const[n,a]=x.useState([]),[i,o]=x.useState(new Set),[l,c]=x.useState(""),[u,d]=x.useState(!0),[f,h]=x.useState(!1),{createDistribution:m,distributions:g,refetch:p}=tw(r.id),{toast:v}=or(),b=new Set(g.map(S=>S.recipient_user_id));x.useEffect(()=>{e&&(y(),o(new Set))},[e]);const y=async()=>{try{d(!0);const{data:S,error:k}=await M.from("profiles").select("user_id, display_name");if(k)throw k;const{data:C,error:P}=await M.from("user_roles").select("user_id, role");if(P)throw P;const A=new Map(C==null?void 0:C.map(R=>[R.user_id,R.role])),E=(S||[]).map(R=>({id:R.user_id,email:R.display_name||"Unknown",display_name:R.display_name,role:A.get(R.user_id)||"employee"}));a(E)}catch(S){console.error("Error fetching users:",S),v({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{d(!1)}},w=n.filter(S=>{var k;return!b.has(S.id)&&(((k=S.display_name)==null?void 0:k.toLowerCase().includes(l.toLowerCase()))||S.email.toLowerCase().includes(l.toLowerCase()))}),_=S=>{const k=new Set(i);k.has(S)?k.delete(S):k.add(S),o(k)},j=()=>{i.size===w.length?o(new Set):o(new Set(w.map(S=>S.id)))},N=async()=>{if(i.size!==0){h(!0);try{const S=n.filter(k=>i.has(k.id));for(const k of S)await m({org_document_id:r.id,recipient_user_id:k.id,recipient_name:k.display_name||k.email,recipient_email:k.email});v({title:"Success",description:`Document distributed to ${S.length} recipient(s)`}),t(!1),p()}catch(S){console.error("Error distributing document:",S)}finally{h(!1)}}};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-[500px]",children:[s.jsxs(Dt,{children:[s.jsxs(Rt,{className:"flex items-center gap-2",children:[s.jsx(ut,{className:"h-5 w-5 text-primary"}),"Distribute Document"]}),s.jsxs(Mt,{children:['Select employees to receive "',r.title,'"']})]}),s.jsxs("div",{className:"space-y-4",children:[(r.requires_acknowledgment||r.requires_signature)&&s.jsxs("div",{className:"flex gap-2 text-sm",children:[r.requires_acknowledgment&&s.jsx(ce,{variant:"outline",children:"Requires Acknowledgment"}),r.requires_signature&&s.jsx(ce,{variant:"outline",children:"Requires Signature"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{placeholder:"Search employees...",value:l,onChange:S=>c(S.target.value),className:"pl-10"})]}),w.length>0&&s.jsxs("div",{className:"flex items-center justify-between px-1",children:[s.jsx("button",{type:"button",onClick:j,className:"text-sm text-primary hover:underline",children:i.size===w.length?"Deselect All":"Select All"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[i.size," selected"]})]}),u?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(et,{className:"h-6 w-6 animate-spin text-primary"})}):w.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Er,{className:"h-10 w-10 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No employees available"}),s.jsx("p",{className:"text-sm",children:"All users have already received this document"})]}):s.jsx(zu,{className:"h-[280px] border rounded-lg",children:s.jsx("div",{className:"p-2 space-y-1",children:w.map(S=>s.jsxs("div",{onClick:()=>_(S.id),className:`flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-colors ${i.has(S.id)?"bg-primary/10 border border-primary/20":"hover:bg-muted"}`,children:[s.jsx(Ri,{checked:i.has(S.id),onCheckedChange:()=>_(S.id)}),s.jsx(Pr,{className:"h-8 w-8",children:s.jsx(Ar,{className:"text-xs",children:(S.display_name||S.email).split(" ").map(k=>k[0]).join("").slice(0,2)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:S.display_name||S.email}),s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:S.role})]})]},S.id))})})]}),s.jsxs(fr,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{onClick:N,disabled:f||i.size===0,children:[f&&s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Distribute to ",i.size," ",i.size===1?"User":"Users"]})]})]})})}const NT={contract_template:"Contract Template",handbook:"Handbook",policy:"Policy",procedure:"Procedure",training:"Training",other:"Other"},Jde={contract_template:"bg-blue-100 text-blue-800",handbook:"bg-purple-100 text-purple-800",policy:"bg-amber-100 text-amber-800",procedure:"bg-green-100 text-green-800",training:"bg-teal-100 text-teal-800",other:"bg-gray-100 text-gray-800"};function efe({searchQuery:e}){const{documents:t,loading:r,deleteDocument:n}=ew(),[a,i]=x.useState(null),[o,l]=x.useState(!1),[c,u]=x.useState(!1),d=t.filter(v=>{var b,y;return v.title.toLowerCase().includes(e.toLowerCase())||((b=v.description)==null?void 0:b.toLowerCase().includes(e.toLowerCase()))||((y=NT[v.category])==null?void 0:y.toLowerCase().includes(e.toLowerCase()))}),f=v=>{i(v),l(!0)},h=v=>{i(v),u(!0)},m=v=>{window.open(v.file_url,"_blank")},g=async v=>{confirm("Are you sure you want to delete this document?")&&await n(v.id)},p=v=>v?v<1024?`${v} B`:v<1024*1024?`${(v/1024).toFixed(1)} KB`:`${(v/(1024*1024)).toFixed(1)} MB`:"Unknown";return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(s.Fragment,{children:[s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-lg",children:"All Documents"}),s.jsx(Be,{children:"Organizational documents, policies, and templates"})]}),s.jsx(Y,{children:d.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(ut,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No documents found"}),s.jsx("p",{className:"text-sm mt-1",children:"Upload a document to get started"})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Document"}),s.jsx(re,{children:"Category"}),s.jsx(re,{children:"Requirements"}),s.jsx(re,{children:"Size"}),s.jsx(re,{children:"Uploaded"}),s.jsx(re,{className:"text-right",children:"Actions"})]})}),s.jsx(jr,{children:d.map(v=>s.jsxs(qe,{children:[s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg bg-muted flex items-center justify-center",children:s.jsx(ut,{className:"h-5 w-5 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:v.title}),v.description&&s.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:v.description})]})]})}),s.jsx(Z,{children:s.jsx(ce,{variant:"secondary",className:Jde[v.category],children:NT[v.category]})}),s.jsx(Z,{children:s.jsxs("div",{className:"flex gap-1",children:[v.requires_acknowledgment&&s.jsxs(ce,{variant:"outline",className:"text-xs gap-1",children:[s.jsx(Ai,{className:"h-3 w-3"}),"Ack"]}),v.requires_signature&&s.jsxs(ce,{variant:"outline",className:"text-xs gap-1",children:[s.jsx(hh,{className:"h-3 w-3"}),"Sign"]}),!v.requires_acknowledgment&&!v.requires_signature&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"None"})]})}),s.jsx(Z,{className:"text-sm text-muted-foreground",children:p(v.file_size)}),s.jsx(Z,{className:"text-sm text-muted-foreground",children:ne(new Date(v.created_at),"dd MMM yyyy")}),s.jsx(Z,{className:"text-right",children:s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:s.jsx(ai,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",className:"bg-popover",children:[s.jsxs(st,{onClick:()=>f(v),children:[s.jsx(Li,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.jsxs(st,{onClick:()=>m(v),children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Download"]}),s.jsxs(st,{onClick:()=>h(v),children:[s.jsx(bo,{className:"h-4 w-4 mr-2"}),"Distribute"]}),s.jsx(ma,{}),s.jsxs(st,{onClick:()=>g(v),className:"text-destructive",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},v.id))})]})})]}),a&&s.jsxs(s.Fragment,{children:[s.jsx(Qde,{open:o,onOpenChange:l,document:a}),s.jsx(Zde,{open:c,onOpenChange:u,document:a})]})]})}const tfe={pending:{label:"Pending",icon:xt,className:"bg-gray-100 text-gray-800"},sent:{label:"Sent",icon:ut,className:"bg-blue-100 text-blue-800"},viewed:{label:"Viewed",icon:Li,className:"bg-purple-100 text-purple-800"},downloaded:{label:"Downloaded",icon:As,className:"bg-teal-100 text-teal-800"},acknowledged:{label:"Acknowledged",icon:fh,className:"bg-green-100 text-green-800"},signed:{label:"Signed",icon:hh,className:"bg-emerald-100 text-emerald-800"}};function rfe({searchQuery:e}){const{distributions:t,loading:r}=tw(),{documents:n}=ew(),a=new Map(n.map(o=>[o.id,o])),i=t.filter(o=>{const l=a.get(o.org_document_id);return o.recipient_name.toLowerCase().includes(e.toLowerCase())||o.recipient_email.toLowerCase().includes(e.toLowerCase())||(l==null?void 0:l.title.toLowerCase().includes(e.toLowerCase()))});return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-lg",children:"Document Distributions"}),s.jsx(Be,{children:"Track document distribution status and employee acknowledgments"})]}),s.jsx(Y,{children:i.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(ut,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No distributions found"}),s.jsx("p",{className:"text-sm mt-1",children:"Distribute a document to employees to track here"})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Recipient"}),s.jsx(re,{children:"Document"}),s.jsx(re,{children:"Status"}),s.jsx(re,{children:"Sent"}),s.jsx(re,{children:"Last Action"})]})}),s.jsx(jr,{children:i.map(o=>{const l=a.get(o.org_document_id),c=tfe[o.status],u=c.icon,d=o.signed_at||o.acknowledged_at||o.downloaded_at||o.viewed_at||o.sent_at;return s.jsxs(qe,{children:[s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pr,{className:"h-8 w-8",children:s.jsx(Ar,{className:"text-xs",children:o.recipient_name.split(" ").map(f=>f[0]).join("")})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:o.recipient_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:o.recipient_email})]})]})}),s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ut,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:(l==null?void 0:l.title)||"Unknown Document"})]})}),s.jsx(Z,{children:s.jsxs(ce,{variant:"secondary",className:`gap-1 ${c.className}`,children:[s.jsx(u,{className:"h-3 w-3"}),c.label]})}),s.jsx(Z,{className:"text-sm text-muted-foreground",children:o.sent_at?ne(new Date(o.sent_at),"dd MMM yyyy"):"-"}),s.jsx(Z,{className:"text-sm text-muted-foreground",children:d?ne(new Date(d),"dd MMM yyyy HH:mm"):"-"})]},o.id)})})]})})]})}const nfe=Os({title:Ze().min(1,"Title is required").max(200),description:Ze().max(500).optional(),category:Bu(["contract_template","handbook","policy","procedure","training","other"]),requires_acknowledgment:Tx().default(!1),requires_signature:Tx().default(!1)}),sfe=[{value:"contract_template",label:"Contract Template"},{value:"handbook",label:"Handbook"},{value:"policy",label:"Policy"},{value:"procedure",label:"Procedure"},{value:"training",label:"Training Material"},{value:"other",label:"Other"}];function afe({open:e,onOpenChange:t}){const[r,n]=x.useState(!1),[a,i]=x.useState(null),o=x.useRef(null),{uploadDocument:l}=ew(),c=as({resolver:Di(nfe),defaultValues:{title:"",description:"",category:"other",requires_acknowledgment:!1,requires_signature:!1}}),u=m=>{var p;const g=(p=m.target.files)==null?void 0:p[0];if(g&&(i(g),!c.getValues("title"))){const v=g.name.replace(/\.[^/.]+$/,"");c.setValue("title",v)}},d=()=>{i(null),o.current&&(o.current.value="")},f=async m=>{if(a){n(!0);try{await l(a,{title:m.title,description:m.description||null,category:m.category,requires_acknowledgment:m.requires_acknowledgment,requires_signature:m.requires_signature}),c.reset(),i(null),t(!1)}finally{n(!1)}}},h=m=>m<1024?`${m} B`:m<1024*1024?`${(m/1024).toFixed(1)} KB`:`${(m/(1024*1024)).toFixed(1)} MB`;return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-[550px]",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Upload Document"}),s.jsx(Mt,{children:"Upload a new document to the organizational library"})]}),s.jsx(Ql,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(f),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"File"}),a?s.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-muted/50",children:[s.jsx(ut,{className:"h-8 w-8 text-primary"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:a.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:h(a.size)})]}),s.jsx(I,{type:"button",variant:"ghost",size:"icon",onClick:d,children:s.jsx(Bn,{className:"h-4 w-4"})})]}):s.jsxs("div",{onClick:()=>{var m;return(m=o.current)==null?void 0:m.click()},className:"flex flex-col items-center justify-center gap-2 p-6 border-2 border-dashed rounded-lg cursor-pointer hover:border-primary transition-colors",children:[s.jsx(Ml,{className:"h-8 w-8 text-muted-foreground"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload or drag and drop"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"PDF, Word, Excel, or other documents"})]}),s.jsx("input",{ref:o,type:"file",onChange:u,className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.rtf"})]}),s.jsx(pt,{control:c.control,name:"title",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Title"}),s.jsx(ht,{children:s.jsx(J,{placeholder:"Document title",...m})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"category",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Category"}),s.jsxs(Me,{onValueChange:m.onChange,value:m.value,children:[s.jsx(ht,{children:s.jsx(Te,{children:s.jsx($e,{placeholder:"Select a category"})})}),s.jsx(De,{children:sfe.map(g=>s.jsx(W,{value:g.value,children:g.label},g.value))})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:c.control,name:"description",render:({field:m})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Description (Optional)"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Brief description of the document...",className:"resize-none",...m})}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-sm font-medium",children:"Requirements"}),s.jsx(pt,{control:c.control,name:"requires_acknowledgment",render:({field:m})=>s.jsxs(ft,{className:"flex items-start space-x-3 space-y-0",children:[s.jsx(ht,{children:s.jsx(Ri,{checked:m.value,onCheckedChange:m.onChange})}),s.jsxs("div",{className:"space-y-1 leading-none",children:[s.jsx(vt,{className:"font-normal",children:"Requires acknowledgment"}),s.jsx(Yd,{children:"Employees must confirm they have read the document"})]})]})}),s.jsx(pt,{control:c.control,name:"requires_signature",render:({field:m})=>s.jsxs(ft,{className:"flex items-start space-x-3 space-y-0",children:[s.jsx(ht,{children:s.jsx(Ri,{checked:m.value,onCheckedChange:m.onChange})}),s.jsxs("div",{className:"space-y-1 leading-none",children:[s.jsx(vt,{className:"font-normal",children:"Requires signature"}),s.jsx(Yd,{children:"Employees must sign to accept the document"})]})]})})]}),s.jsxs(fr,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:r||!a,children:[r&&s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Upload Document"]})]})]})})]})})}function ife(){const[e,t]=x.useState("library"),[r,n]=x.useState(""),[a,i]=x.useState(!1),{documents:o,loading:l}=ew(),{distributions:c,loading:u}=tw(),d=o.filter(m=>m.is_active),f=c.filter(m=>m.status==="pending"||m.status==="sent"),h=c.filter(m=>m.status==="acknowledged"||m.status==="signed");return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Document Library"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage organizational documents and distribute to employees"})]}),s.jsxs(I,{onClick:()=>i(!0),className:"gap-2",children:[s.jsx(Ml,{className:"h-4 w-4"}),"Upload Document"]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Lt,{title:"Total Documents",value:d.length,description:"Active documents",icon:ut,variant:"default"}),s.jsx(Lt,{title:"Categories",value:new Set(o.map(m=>m.category)).size,description:"Document types",icon:JL,variant:"info"}),s.jsx(Lt,{title:"Pending Actions",value:f.length,description:"Awaiting response",icon:bo,variant:"warning"}),s.jsx(Lt,{title:"Completed",value:h.length,description:"Acknowledged/Signed",icon:fk,variant:"success"})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{placeholder:"Search documents...",value:r,onChange:m=>n(m.target.value),className:"pl-10"})]})}),s.jsxs(_n,{value:e,onValueChange:t,className:"space-y-4",children:[s.jsxs(mn,{className:"grid w-full grid-cols-2 lg:w-auto lg:inline-grid",children:[s.jsxs(Ue,{value:"library",className:"flex items-center gap-2",children:[s.jsx(ut,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Document Library"}),s.jsx("span",{className:"sm:hidden",children:"Library"})]}),s.jsxs(Ue,{value:"distributions",className:"flex items-center gap-2",children:[s.jsx(bo,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Distributions"}),s.jsx("span",{className:"sm:hidden",children:"Sent"})]})]}),s.jsx(tt,{value:"library",children:s.jsx(efe,{searchQuery:r})}),s.jsx(tt,{value:"distributions",children:s.jsx(rfe,{searchQuery:r})})]}),s.jsx(afe,{open:a,onOpenChange:i})]})}const ofe=18,lfe=23,cfe=23,ufe=6;function dfe(){const[e,t]=x.useState([]),[r,n]=x.useState(null),[a,i]=x.useState([]),[o,l]=x.useState(!0);x.useEffect(()=>{(async()=>{l(!0);const{data:b,error:y}=await M.from("award_classifications").select("*").order("name");!y&&b&&(t(b),b.length>0&&n(b[0])),l(!1)})()},[]);const c=v=>{const b={...v,id:crypto.randomUUID()};i(y=>[...y,b])},u=(v,b)=>{i(y=>y.map(w=>w.id===v?{...w,...b}:w))},d=v=>{i(b=>b.filter(y=>y.id!==v))},f=()=>{i([])},h=(v,b,y,w,_,j)=>{const N=v+b/60,S=y+w/60;if(_>j){const P=h(v,b,y,w,_,24),A=h(v,b,y,w,0,j);return P+A}const k=Math.max(N,_),C=Math.min(S,j);return C>k?C-k:0},m=v=>{if(!r)return null;const[b,y]=v.startTime.split(":").map(Number),[w,_]=v.endTime.split(":").map(Number);let j=w*60+_-(b*60+y);j<0&&(j+=24*60);const N=j/60,S=v.breakMinutes/60,k=Math.max(0,N-S),P=new Date(v.date).getDay(),A=P===6,E=P===0;let R=0,$=0,B=0,F=0,L=0,D=0,T=0;v.isPublicHoliday?D=k:A?F=k:E?L=k:($=h(b,y,w,_,ofe,lfe),B=h(b,y,w,_,cfe,ufe),R=Math.max(0,k-$-B)),v.isOvertime&&(T=k,R=0,$=0,B=0);const U=r.base_hourly_rate,X=R*U,H=$*U*r.evening_multiplier,ae=B*U*r.night_multiplier,he=F*U*r.saturday_multiplier,Pe=L*U*r.sunday_multiplier,Ae=D*U*r.public_holiday_multiplier,ue=T*U*r.overtime_multiplier,ze=X+H+ae+he+Pe+Ae+ue;return{shiftId:v.id,date:v.date,startTime:v.startTime,endTime:v.endTime,totalHours:N,breakHours:S,workedHours:k,baseHours:R,eveningHours:$,nightHours:B,saturdayHours:F,sundayHours:L,publicHolidayHours:D,overtimeHours:T,basePay:X,eveningPay:H,nightPay:ae,saturdayPay:he,sundayPay:Pe,publicHolidayPay:Ae,overtimePay:ue,totalPay:ze}},g=x.useMemo(()=>a.map(m).filter(v=>v!==null),[a,r]),p=x.useMemo(()=>{const v={totalHours:0,totalWorkedHours:0,baseHours:0,penaltyHours:0,basePay:0,eveningPay:0,nightPay:0,saturdayPay:0,sundayPay:0,publicHolidayPay:0,overtimePay:0,totalPenaltyPay:0,grossPay:0};return g.reduce((b,y)=>(b.totalHours+=y.totalHours,b.totalWorkedHours+=y.workedHours,b.baseHours+=y.baseHours,b.penaltyHours+=y.eveningHours+y.nightHours+y.saturdayHours+y.sundayHours+y.publicHolidayHours+y.overtimeHours,b.basePay+=y.basePay,b.eveningPay+=y.eveningPay,b.nightPay+=y.nightPay,b.saturdayPay+=y.saturdayPay,b.sundayPay+=y.sundayPay,b.publicHolidayPay+=y.publicHolidayPay,b.overtimePay+=y.overtimePay,b.totalPenaltyPay+=y.eveningPay+y.nightPay+y.saturdayPay+y.sundayPay+y.publicHolidayPay+y.overtimePay,b.grossPay+=y.totalPay,b),v)},[g]);return{awardClassifications:e,selectedAward:r,setSelectedAward:n,shifts:a,addShift:c,updateShift:u,removeShift:d,clearShifts:f,calculations:g,summary:p,loading:o}}function ffe({onAddShift:e}){const[t,r]=x.useState(new Date),[n,a]=x.useState("09:00"),[i,o]=x.useState("17:00"),[l,c]=x.useState("30"),[u,d]=x.useState(!1),[f,h]=x.useState(!1),m=g=>{g.preventDefault(),e({date:ne(t,"yyyy-MM-dd"),startTime:n,endTime:i,breakMinutes:parseInt(l)||0,isPublicHoliday:u,isOvertime:f}),r(new Date),a("09:00"),o("17:00"),c("30"),d(!1),h(!1)};return s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Date"}),s.jsxs(Mi,{children:[s.jsx($i,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:Q("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[s.jsx(zt,{className:"mr-2 h-4 w-4"}),t?ne(t,"PPP"):s.jsx("span",{children:"Pick a date"})]})}),s.jsx(ti,{className:"w-auto p-0",align:"start",children:s.jsx(ni,{mode:"single",selected:t,onSelect:g=>g&&r(g),initialFocus:!0,className:"pointer-events-auto"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"startTime",children:"Start Time"}),s.jsx(J,{id:"startTime",type:"time",value:n,onChange:g=>a(g.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"endTime",children:"End Time"}),s.jsx(J,{id:"endTime",type:"time",value:i,onChange:g=>o(g.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"breakMinutes",children:"Break (mins)"}),s.jsx(J,{id:"breakMinutes",type:"number",min:"0",max:"120",value:l,onChange:g=>c(g.target.value),placeholder:"30"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{className:"invisible",children:"Add"}),s.jsxs(I,{type:"submit",className:"w-full",children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Add Shift"]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ri,{id:"publicHoliday",checked:u,onCheckedChange:g=>d(g===!0)}),s.jsx(q,{htmlFor:"publicHoliday",className:"text-sm cursor-pointer",children:"Public Holiday"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ri,{id:"overtime",checked:f,onCheckedChange:g=>h(g===!0)}),s.jsx(q,{htmlFor:"overtime",className:"text-sm cursor-pointer",children:"Overtime"})]})]})]})}function hfe({shifts:e,calculations:t,onRemoveShift:r,formatCurrency:n}){const a=o=>t.find(l=>l.shiftId===o),i=o=>{const l=new Date(o);return ne(l,"EEE")};return e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"No shifts added yet"}),s.jsx("p",{className:"text-sm",children:"Add shifts above to calculate payroll"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Date"}),s.jsx(re,{children:"Time"}),s.jsx(re,{children:"Hours"}),s.jsx(re,{children:"Type"}),s.jsx(re,{className:"text-right",children:"Pay"}),s.jsx(re,{className:"w-[60px]"})]})}),s.jsx(jr,{children:e.map(o=>{const l=a(o.id);return s.jsxs(qe,{children:[s.jsx(Z,{children:s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:ne(new Date(o.date),"dd MMM yyyy")}),s.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",i(o.date),")"]})]})}),s.jsxs(Z,{children:[o.startTime," - ",o.endTime,o.breakMinutes>0&&s.jsxs("span",{className:"text-muted-foreground text-sm ml-2",children:["(",o.breakMinutes,"m break)"]})]}),s.jsx(Z,{children:l?s.jsxs("span",{children:[l.workedHours.toFixed(2)," hrs"]}):"-"}),s.jsx(Z,{children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.isPublicHoliday&&s.jsx(ce,{variant:"destructive",className:"text-xs",children:"Public Holiday"}),o.isOvertime&&s.jsx(ce,{variant:"secondary",className:"text-xs",children:"Overtime"}),l&&l.saturdayHours>0&&s.jsx(ce,{variant:"outline",className:"text-xs",children:"Saturday"}),l&&l.sundayHours>0&&s.jsx(ce,{variant:"outline",className:"text-xs",children:"Sunday"}),l&&l.eveningHours>0&&!o.isOvertime&&s.jsx(ce,{variant:"outline",className:"text-xs",children:"Evening"}),l&&l.nightHours>0&&!o.isOvertime&&s.jsx(ce,{variant:"outline",className:"text-xs",children:"Night"}),l&&l.baseHours>0&&!o.isPublicHoliday&&!o.isOvertime&&s.jsx(ce,{variant:"outline",className:"text-xs",children:"Base"})]})}),s.jsx(Z,{className:"text-right font-medium",children:l?n(l.totalPay):"-"}),s.jsx(Z,{children:s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>r(o.id),children:s.jsx(bs,{className:"h-4 w-4 text-destructive"})})})]},o.id)})})]})})}function mfe({summary:e,selectedAward:t,formatCurrency:r}){return s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Total Hours"}),s.jsx(xt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Y,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[e.totalWorkedHours.toFixed(2)," hrs"]}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 space-y-0.5",children:[s.jsxs("p",{children:["Base: ",e.baseHours.toFixed(2)," hrs"]}),s.jsxs("p",{children:["Penalty: ",e.penaltyHours.toFixed(2)," hrs"]})]})]})]}),s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Base Rate"}),s.jsx(Zs,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Y,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[t?r(t.base_hourly_rate):"$0.00","/hr"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(t==null?void 0:t.name)||"No award selected"})]})]}),s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Gross Pay"}),s.jsx(zd,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Y,{children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:r(e.grossPay)}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Before tax & deductions"})]})]}),s.jsxs(K,{className:"md:col-span-3",children:[s.jsx(de,{children:s.jsx(me,{className:"text-sm font-medium",children:"Pay Breakdown"})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Base Pay"}),s.jsx("span",{className:"font-medium",children:r(e.basePay)})]}),e.eveningPay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Evening Loading (",t==null?void 0:t.evening_multiplier,"x)"]}),s.jsx("span",{children:r(e.eveningPay)})]}),e.nightPay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Night Loading (",t==null?void 0:t.night_multiplier,"x)"]}),s.jsx("span",{children:r(e.nightPay)})]}),e.saturdayPay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Saturday Loading (",t==null?void 0:t.saturday_multiplier,"x)"]}),s.jsx("span",{children:r(e.saturdayPay)})]}),e.sundayPay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Sunday Loading (",t==null?void 0:t.sunday_multiplier,"x)"]}),s.jsx("span",{children:r(e.sundayPay)})]}),e.publicHolidayPay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Public Holiday (",t==null?void 0:t.public_holiday_multiplier,"x)"]}),s.jsx("span",{children:r(e.publicHolidayPay)})]}),e.overtimePay>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Overtime (",t==null?void 0:t.overtime_multiplier,"x)"]}),s.jsx("span",{children:r(e.overtimePay)})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:"Total Penalty Pay"}),s.jsx("span",{className:"font-medium",children:r(e.totalPenaltyPay)})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"font-bold",children:"Gross Pay"}),s.jsx("span",{className:"font-bold text-primary",children:r(e.grossPay)})]})]})})]})]})}function pfe(){const{awardClassifications:e,selectedAward:t,setSelectedAward:r,shifts:n,addShift:a,removeShift:i,clearShifts:o,calculations:l,summary:c,loading:u}=dfe(),d=h=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(h),f=h=>{const m=e.find(g=>g.id===h);m&&r(m)};return u?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):e.length===0?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Payroll Calculator"}),s.jsx("p",{className:"text-muted-foreground",children:"Calculate employee wages based on award classifications and shift times"})]}),s.jsxs(Cl,{children:[s.jsx(DN,{className:"h-4 w-4"}),s.jsx(Qm,{children:"No Award Classifications"}),s.jsx(kl,{children:"You need to create at least one award classification before using the payroll calculator. Go to Settings  Award Classifications to add pay rates and penalty multipliers."})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Payroll Calculator"}),s.jsx("p",{className:"text-muted-foreground",children:"Calculate employee wages based on award classifications and shift times"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(eG,{className:"h-5 w-5 text-primary"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[n.length," shifts"]})]})]}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-lg",children:"Award Classification"}),s.jsx(Be,{children:"Select the award classification to use for pay calculations"})]}),s.jsx(Y,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[s.jsxs("div",{className:"space-y-2 flex-1 max-w-md",children:[s.jsx(q,{children:"Select Award"}),s.jsxs(Me,{value:(t==null?void 0:t.id)||"",onValueChange:f,children:[s.jsx(Te,{children:s.jsx($e,{placeholder:"Select an award classification"})}),s.jsx(De,{children:e.map(h=>s.jsxs(W,{value:h.id,children:[h.name," - ",d(h.base_hourly_rate),"/hr"]},h.id))})]})]}),t&&s.jsxs("div",{className:"text-sm text-muted-foreground bg-muted/50 p-3 rounded-md flex-1",children:[s.jsx("p",{className:"font-medium text-foreground mb-1",children:"Penalty Rates:"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-1",children:[s.jsxs("span",{children:["Saturday: ",t.saturday_multiplier,"x"]}),s.jsxs("span",{children:["Sunday: ",t.sunday_multiplier,"x"]}),s.jsxs("span",{children:["Public Holiday: ",t.public_holiday_multiplier,"x"]}),s.jsxs("span",{children:["Evening: ",t.evening_multiplier,"x"]}),s.jsxs("span",{children:["Night: ",t.night_multiplier,"x"]}),s.jsxs("span",{children:["Overtime: ",t.overtime_multiplier,"x"]})]})]})]})})]}),s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg",children:"Add Shifts"}),s.jsx(Be,{children:"Enter shift details to calculate pay. Evening: 6pm-11pm, Night: 11pm-6am"})]}),n.length>0&&s.jsxs(I,{variant:"outline",size:"sm",onClick:o,children:[s.jsx(iF,{className:"h-4 w-4 mr-2"}),"Clear All"]})]}),s.jsx(Y,{children:s.jsx(ffe,{onAddShift:a})})]}),n.length>0&&s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-lg",children:"Shifts"}),s.jsx(Be,{children:"All entered shifts with calculated pay"})]}),s.jsx(Y,{children:s.jsx(hfe,{shifts:n,calculations:l,onRemoveShift:i,formatCurrency:d})})]}),n.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Pay Summary"}),s.jsx(mfe,{summary:c,selectedAward:t,formatCurrency:d})]})]})}class gfe{async getPayPeriods(t){const{data:r,error:n}=await M.from("pay_periods").select("*").eq("organisation_id",t).order("start_date",{ascending:!1});if(n)throw n;return r||[]}async createPayPeriod(t,r){var o;const{data:{user:n}}=await M.auth.getUser();if(!n)throw new Error("Not authenticated");const{data:a,error:i}=await M.from("pay_periods").insert({organisation_id:t,start_date:r.start_date,end_date:r.end_date,created_by_user_id:n.id,created_by_name:((o=n.user_metadata)==null?void 0:o.display_name)||n.email,created_by_email:n.email}).select().single();if(i)throw i;return await Nr.log({action:"pay_period.create",entityType:"pay_period",entityId:a.id,organisationId:t,afterState:{start_date:r.start_date,end_date:r.end_date}}),a}async updatePayPeriodStatus(t,r){const{data:{user:n}}=await M.auth.getUser(),a={status:r};r==="closed"&&(a.closed_at=new Date().toISOString(),a.closed_by_user_id=n==null?void 0:n.id);const{data:i,error:o}=await M.from("pay_periods").update(a).eq("id",t).select().single();if(o)throw o;return await Nr.log({action:r==="closed"?"pay_period.close":"pay_period.update",entityType:"pay_period",entityId:t,organisationId:i.organisation_id,afterState:{status:r}}),i}async getMappings(t){const{data:r,error:n}=await M.from("payroll_mappings").select("*").eq("organisation_id",t).order("shift_type");if(n)throw n;return r||[]}async createMapping(t,r){const{data:n,error:a}=await M.from("payroll_mappings").insert({organisation_id:t,shift_type:r.shift_type,earning_code:r.earning_code,description:r.description||null,multiplier:r.multiplier||1,applies_when:r.applies_when||null}).select().single();if(a)throw a;return n}async updateMapping(t,r){const n={};r.shift_type!==void 0&&(n.shift_type=r.shift_type),r.earning_code!==void 0&&(n.earning_code=r.earning_code),r.description!==void 0&&(n.description=r.description),r.multiplier!==void 0&&(n.multiplier=r.multiplier),r.applies_when!==void 0&&(n.applies_when=r.applies_when);const{data:a,error:i}=await M.from("payroll_mappings").update(n).eq("id",t).select().single();if(i)throw i;return a}async deleteMapping(t){const{error:r}=await M.from("payroll_mappings").delete().eq("id",t);if(r)throw r}async validateExport(t,r,n){const a=[],i=[],{data:o,error:l}=await M.from("pay_periods").select("*").eq("id",r).single();if(l||!o)return a.push({type:"invalid_dates",message:"Pay period not found"}),{isValid:!1,errors:a,warnings:i,timesheets:[]};const{data:c,error:u}=await M.from("timesheets").select(`
        id,
        employee_id,
        date,
        clock_in,
        clock_out,
        break_minutes,
        total_hours,
        status,
        notes,
        is_locked,
        exported_at
      `).eq("organisation_id",t).gte("date",o.start_date).lte("date",o.end_date).order("date");if(u)throw u;const d=[...new Set((c||[]).map(v=>v.employee_id))],{data:f}=await M.from("employees").select("id, first_name, last_name, email").in("id",d),h=new Map((f||[]).map(v=>[v.id,{name:`${v.first_name} ${v.last_name}`,email:v.email}])),m=new Map(n.map(v=>[v.shift_type,v.earning_code])),g=[],p=new Map;for(const v of c||[]){const b=h.get(v.employee_id),y=(b==null?void 0:b.name)||"Unknown",w=b==null?void 0:b.email;if(v.status!=="approved"){a.push({type:"unapproved",message:`Timesheet for ${y} on ${v.date} is not approved (status: ${v.status})`,employeeId:v.employee_id,employeeName:y});continue}if(v.is_locked&&v.exported_at){i.push({type:"duplicate",message:`Timesheet for ${y} on ${v.date} was already exported`,employeeId:v.employee_id,employeeName:y,date:v.date});continue}w||a.push({type:"missing_identifier",message:`Employee ${y} has no email address for payroll export`,employeeId:v.employee_id,employeeName:y});const _="standard";m.has(_)||a.push({type:"missing_mapping",message:`No payroll mapping found for shift type: ${_}`,shiftType:_});const j=`${v.employee_id}-${v.date}`;p.has(j)||p.set(j,[]);const N=p.get(j);N.length>0&&i.push({type:"overlap",message:`Multiple timesheets for ${y} on ${v.date}`,employeeId:v.employee_id,employeeName:y,date:v.date}),N.push(v.id),v.total_hours&&v.total_hours>12&&i.push({type:"long_shift",message:`Long shift (${v.total_hours.toFixed(1)}h) for ${y} on ${v.date}`,employeeId:v.employee_id,employeeName:y,date:v.date}),g.push({id:v.id,employee_id:v.employee_id,employee_name:y,employee_email:w,date:v.date,clock_in:v.clock_in,clock_out:v.clock_out,break_minutes:v.break_minutes||0,total_hours:v.total_hours,status:v.status,notes:v.notes,shift_type:_,is_locked:v.is_locked||!1,exported_at:v.exported_at})}return{isValid:a.length===0,errors:a,warnings:i,timesheets:g}}async getExports(t){const{data:r,error:n}=await M.from("payroll_exports").select(`
        *,
        pay_period:pay_periods(*)
      `).eq("organisation_id",t).order("created_at",{ascending:!1});if(n)throw n;return(r||[]).map(a=>({...a,file_urls:a.file_urls||[],totals_summary:this.parseTotalsSummary(a.totals_summary)}))}parseTotalsSummary(t){if(!t||typeof t!="object"||Array.isArray(t))return{totalHours:0,employeesCount:0,linesCount:0};const r=t;return{totalHours:typeof r.totalHours=="number"?r.totalHours:0,employeesCount:typeof r.employeesCount=="number"?r.employeesCount:0,linesCount:typeof r.linesCount=="number"?r.linesCount:0,totalEarnings:typeof r.totalEarnings=="number"?r.totalEarnings:void 0}}async generateExport(t,r,n,a){var g;const{data:{user:i}}=await M.auth.getUser();if(!i)throw new Error("Not authenticated");const o=this.generateCSVContent(r.provider,a,n),l=`export_${r.pay_period_id}_${r.provider}_${Date.now()}.csv`,c=`${t}/${l}`,{error:u}=await M.storage.from("payroll-exports").upload(c,new Blob([o],{type:"text/csv"}));if(u)throw u;const d={totalHours:a.reduce((p,v)=>p+(v.total_hours||0),0),employeesCount:new Set(a.map(p=>p.employee_id)).size,linesCount:a.length},{data:f,error:h}=await M.from("payroll_exports").insert({organisation_id:t,pay_period_id:r.pay_period_id,provider:r.provider,file_urls:[c],totals_summary:d,created_by_user_id:i.id,created_by_name:((g=i.user_metadata)==null?void 0:g.display_name)||i.email,created_by_email:i.email}).select().single();if(h)throw h;const m=a.map(p=>p.id);return await M.rpc("lock_timesheets_for_export",{_timesheet_ids:m,_pay_period_id:r.pay_period_id}),await this.updatePayPeriodStatus(r.pay_period_id,"exported"),await Nr.log({action:"payroll_export.generate",entityType:"payroll_export",entityId:f.id,organisationId:t,afterState:{provider:r.provider,timesheets_count:m.length,total_hours:d.totalHours,employees_count:d.employeesCount}}),{...f,file_urls:f.file_urls||[],totals_summary:d}}generateCSVContent(t,r,n){const a=new Map(n.map(i=>[i.shift_type,i.earning_code]));switch(t){case"generic_csv":return this.generateGenericCSV(r,a);case"keypay":return this.generateKeyPayCSV(r,a);case"xero":return this.generateXeroCSV(r,a);case"myob":return this.generateMYOBCSV(r,a);default:return this.generateGenericCSV(r,a)}}escapeCSV(t){if(t==null)return"";const r=String(t);return r.includes(",")||r.includes('"')||r.includes(`
`)?`"${r.replace(/"/g,'""')}"`:r}generateGenericCSV(t,r){const n=["employee_email","employee_name","date","start_time","end_time","break_minutes","hours","earning_code","cost_center","notes"],a=t.map(i=>{var o;return[this.escapeCSV(i.employee_email),this.escapeCSV(i.employee_name),this.escapeCSV(i.date),this.escapeCSV(i.clock_in),this.escapeCSV(i.clock_out),this.escapeCSV(i.break_minutes),this.escapeCSV((o=i.total_hours)==null?void 0:o.toFixed(2)),this.escapeCSV(r.get(i.shift_type||"standard")||"ORD"),"",this.escapeCSV(i.notes)]});return[n.join(","),...a.map(i=>i.join(","))].join(`
`)}generateKeyPayCSV(t,r){const n=["Employee Email","Location","Date","Earnings Category","Units","Notes"],a=t.map(i=>{var o;return[this.escapeCSV(i.employee_email),"",this.escapeCSV(i.date),this.escapeCSV(r.get(i.shift_type||"standard")||"Ordinary Hours"),this.escapeCSV((o=i.total_hours)==null?void 0:o.toFixed(2)),this.escapeCSV(i.notes)]});return[n.join(","),...a.map(i=>i.join(","))].join(`
`)}generateXeroCSV(t,r){const n=["Employee Email","Earnings Rate Code","Units","Date"],a=t.map(i=>{var o;return[this.escapeCSV(i.employee_email),this.escapeCSV(r.get(i.shift_type||"standard")||"ORD"),this.escapeCSV((o=i.total_hours)==null?void 0:o.toFixed(2)),this.escapeCSV(i.date)]});return[n.join(","),...a.map(i=>i.join(","))].join(`
`)}generateMYOBCSV(t,r){const n=["Employee Email","Payroll Category","Units","Date"],a=t.map(i=>{var o;return[this.escapeCSV(i.employee_email),this.escapeCSV(r.get(i.shift_type||"standard")||"Base Hourly"),this.escapeCSV((o=i.total_hours)==null?void 0:o.toFixed(2)),this.escapeCSV(i.date)]});return[n.join(","),...a.map(i=>i.join(","))].join(`
`)}async getDownloadUrl(t){const{data:r,error:n}=await M.storage.from("payroll-exports").createSignedUrl(t,3600);if(n)throw n;return r.signedUrl}async voidExport(t,r){var o;const{data:{user:n}}=await M.auth.getUser();if(!n)throw new Error("Not authenticated");const{data:a,error:i}=await M.from("payroll_exports").update({status:"voided",voided_at:new Date().toISOString(),voided_by_user_id:n.id,voided_by_name:((o=n.user_metadata)==null?void 0:o.display_name)||n.email,voided_reason:r}).eq("id",t).select().single();if(i)throw i;return await Nr.log({action:"payroll_export.void",entityType:"payroll_export",entityId:t,organisationId:a.organisation_id,afterState:{reason:r,voided_at:a.voided_at}}),{...a,file_urls:a.file_urls||[],totals_summary:this.parseTotalsSummary(a.totals_summary)}}async unlockTimesheet(t,r){var o;const{data:{user:n}}=await M.auth.getUser();if(!n)throw new Error("Not authenticated");const{data:a,error:i}=await M.rpc("unlock_timesheet",{_timesheet_id:t,_user_id:n.id,_user_name:((o=n.user_metadata)==null?void 0:o.display_name)||n.email,_user_email:n.email,_reason:r});if(i)throw i;return await Nr.log({action:"timesheet.unlock",entityType:"timesheet",entityId:t,afterState:{reason:r,unlocked_at:new Date().toISOString()}}),a}}const Rs=new gfe;function vfe(e){const t=ii(),{data:r}=sr({queryKey:["default-organisation"],queryFn:async()=>{const{data:C,error:P}=await M.from("organisations").select("id").limit(1).maybeSingle();if(P)throw P;return C},enabled:!e}),n=r==null?void 0:r.id,{data:a=[],isLoading:i}=sr({queryKey:["pay-periods",n],queryFn:async()=>n?Rs.getPayPeriods(n):[],enabled:!!n}),o=Wt({mutationFn:async C=>{if(!n)throw new Error("Organisation not found");return Rs.createPayPeriod(n,C)},onSuccess:()=>{t.invalidateQueries({queryKey:["pay-periods",n]}),oe({title:"Pay Period Created",description:"The pay period has been created successfully."})},onError:C=>{console.error("[usePayrollExport] Create pay period failed:",C),oe({title:"Error",description:"Failed to create pay period. Please try again.",variant:"destructive"})}}),l=Wt({mutationFn:async C=>Rs.updatePayPeriodStatus(C,"closed"),onSuccess:()=>{t.invalidateQueries({queryKey:["pay-periods",n]}),oe({title:"Pay Period Closed",description:"The pay period has been closed."})},onError:C=>{console.error("[usePayrollExport] Close pay period failed:",C),oe({title:"Error",description:"Failed to close pay period.",variant:"destructive"})}}),{data:c=[],isLoading:u}=sr({queryKey:["payroll-mappings",n],queryFn:async()=>n?Rs.getMappings(n):[],enabled:!!n}),d=Wt({mutationFn:async C=>{if(!n)throw new Error("Organisation not found");return Rs.createMapping(n,C)},onSuccess:()=>{t.invalidateQueries({queryKey:["payroll-mappings",n]}),oe({title:"Mapping Created",description:"Payroll mapping has been created."})},onError:C=>{console.error("[usePayrollExport] Create mapping failed:",C),oe({title:"Error",description:"Failed to create mapping.",variant:"destructive"})}}),f=Wt({mutationFn:async({id:C,updates:P})=>Rs.updateMapping(C,P),onSuccess:()=>{t.invalidateQueries({queryKey:["payroll-mappings",n]}),oe({title:"Mapping Updated",description:"Payroll mapping has been updated."})},onError:C=>{console.error("[usePayrollExport] Update mapping failed:",C),oe({title:"Error",description:"Failed to update mapping.",variant:"destructive"})}}),h=Wt({mutationFn:async C=>Rs.deleteMapping(C),onSuccess:()=>{t.invalidateQueries({queryKey:["payroll-mappings",n]}),oe({title:"Mapping Deleted",description:"Payroll mapping has been removed."})},onError:C=>{console.error("[usePayrollExport] Delete mapping failed:",C),oe({title:"Error",description:"Failed to delete mapping.",variant:"destructive"})}}),m=Wt({mutationFn:async C=>{if(!n)throw new Error("Organisation not found");return Rs.validateExport(n,C,c)}}),{data:g=[],isLoading:p}=sr({queryKey:["payroll-exports",n],queryFn:async()=>n?Rs.getExports(n):[],enabled:!!n}),v=Wt({mutationFn:async({payPeriodId:C,provider:P,timesheets:A})=>{if(!n)throw new Error("Organisation not found");return Rs.generateExport(n,{pay_period_id:C,provider:P,timesheet_ids:A.map(E=>E.id)},c,A)},onSuccess:()=>{t.invalidateQueries({queryKey:["payroll-exports",n]}),t.invalidateQueries({queryKey:["pay-periods",n]}),t.invalidateQueries({queryKey:["timesheets",n]}),oe({title:"Export Generated",description:"Payroll export has been generated successfully."})},onError:C=>{console.error("[usePayrollExport] Generate export failed:",C),oe({title:"Error",description:"Failed to generate export.",variant:"destructive"})}}),b=Wt({mutationFn:async({exportId:C,reason:P})=>Rs.voidExport(C,P),onSuccess:()=>{t.invalidateQueries({queryKey:["payroll-exports",n]}),oe({title:"Export Voided",description:"The export has been voided."})},onError:C=>{console.error("[usePayrollExport] Void export failed:",C),oe({title:"Error",description:"Failed to void export.",variant:"destructive"})}}),y=Wt({mutationFn:async C=>Rs.getDownloadUrl(C),onError:C=>{console.error("[usePayrollExport] Get download URL failed:",C),oe({title:"Error",description:"Failed to get download link.",variant:"destructive"})}}),w=Wt({mutationFn:async({timesheetId:C,reason:P})=>Rs.unlockTimesheet(C,P),onSuccess:()=>{t.invalidateQueries({queryKey:["timesheets",n]}),oe({title:"Timesheet Unlocked",description:"The timesheet has been unlocked for editing."})},onError:C=>{console.error("[usePayrollExport] Unlock timesheet failed:",C),oe({title:"Error",description:"Failed to unlock timesheet.",variant:"destructive"})}}),_=a.filter(C=>C.status==="open"),j=a.filter(C=>C.status==="exported"),N=a.filter(C=>C.status==="closed"),S=g.filter(C=>C.status==="generated"),k=g.filter(C=>C.status==="voided");return{payPeriods:a,openPayPeriods:_,exportedPayPeriods:j,closedPayPeriods:N,mappings:c,exports:g,activeExports:S,voidedExports:k,organisationId:n,isLoading:i||u||p,isLoadingPayPeriods:i,isLoadingMappings:u,isLoadingExports:p,createPayPeriod:o.mutateAsync,closePayPeriod:l.mutateAsync,isCreatingPayPeriod:o.isPending,createMapping:d.mutateAsync,updateMapping:(C,P)=>f.mutateAsync({id:C,updates:P}),deleteMapping:h.mutateAsync,isCreatingMapping:d.isPending,validateExport:m.mutateAsync,isValidating:m.isPending,validationResult:m.data,generateExport:v.mutateAsync,voidExport:(C,P)=>b.mutateAsync({exportId:C,reason:P}),getDownloadUrl:y.mutateAsync,isGenerating:v.isPending,isVoiding:b.isPending,isDownloading:y.isPending,unlockTimesheet:(C,P)=>w.mutateAsync({timesheetId:C,reason:P}),isUnlocking:w.isPending}}function ST({payPeriods:e,onCreatePayPeriod:t,onClosePayPeriod:r,onSelectPayPeriod:n,selectedPayPeriodId:a,isCreating:i}){const[o,l]=x.useState(!1),[c,u]=x.useState(""),[d,f]=x.useState(""),h=async()=>{!c||!d||(await t({start_date:c,end_date:d}),l(!1),u(""),f(""))},m=g=>{switch(g){case"open":return s.jsx(ce,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20",children:"Open"});case"exported":return s.jsx(ce,{variant:"outline",className:"bg-accent/50 text-accent-foreground border-accent/30",children:"Exported"});case"closed":return s.jsx(ce,{variant:"outline",className:"bg-muted text-muted-foreground border-muted",children:"Closed"})}};return s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsxs(me,{className:"text-lg flex items-center gap-2",children:[s.jsx(zt,{className:"h-5 w-5"}),"Pay Periods"]}),s.jsx(Be,{children:"Manage pay periods for payroll exports"})]}),s.jsxs($t,{open:o,onOpenChange:l,children:[s.jsx(ev,{asChild:!0,children:s.jsxs(I,{size:"sm",children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"New Pay Period"]})}),s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Create Pay Period"}),s.jsx(Mt,{children:"Define the date range for this pay period"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"start_date",children:"Start Date"}),s.jsx(J,{id:"start_date",type:"date",value:c,onChange:g=>u(g.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"end_date",children:"End Date"}),s.jsx(J,{id:"end_date",type:"date",value:d,onChange:g=>f(g.target.value)})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsxs(I,{onClick:h,disabled:i||!c||!d,children:[i&&s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),"Create"]})]})]})]})]}),s.jsx(Y,{children:e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(zt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No pay periods created yet"}),s.jsx("p",{className:"text-sm",children:"Create a pay period to start exporting payroll"})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Period"}),s.jsx(re,{children:"Status"}),s.jsx(re,{children:"Created By"}),s.jsx(re,{className:"text-right",children:"Actions"})]})}),s.jsx(jr,{children:e.map(g=>s.jsxs(qe,{className:a===g.id?"bg-muted/50":"",children:[s.jsxs(Z,{className:"font-medium",children:[ne(new Date(g.start_date),"dd MMM yyyy")," -"," ",ne(new Date(g.end_date),"dd MMM yyyy")]}),s.jsx(Z,{children:m(g.status)}),s.jsx(Z,{className:"text-sm text-muted-foreground",children:g.created_by_name||g.created_by_email}),s.jsx(Z,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[g.status==="open"&&s.jsx(I,{size:"sm",variant:a===g.id?"default":"outline",onClick:()=>n(g),children:"Select"}),g.status==="exported"&&s.jsxs(I,{size:"sm",variant:"outline",onClick:()=>r(g.id),children:[s.jsx(du,{className:"h-4 w-4 mr-1"}),"Close"]}),g.status==="closed"&&s.jsx(yt,{className:"h-4 w-4 text-green-600"})]})})]},g.id))})]})})]})}function yfe({mappings:e,onCreateMapping:t,onUpdateMapping:r,onDeleteMapping:n,isCreating:a}){const[i,o]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState({shift_type:"",earning_code:"",description:"",multiplier:1}),f=()=>{c(null),d({shift_type:"",earning_code:"",description:"",multiplier:1}),o(!0)},h=p=>{c(p),d({shift_type:p.shift_type,earning_code:p.earning_code,description:p.description||"",multiplier:p.multiplier}),o(!0)},m=async()=>{!u.shift_type||!u.earning_code||(l?await r(l.id,u):await t(u),o(!1))},g=async p=>{confirm("Are you sure you want to delete this mapping?")&&await n(p)};return s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsxs(me,{className:"text-lg flex items-center gap-2",children:[s.jsx(RN,{className:"h-5 w-5"}),"Payroll Mappings"]}),s.jsx(Be,{children:"Map shift types to payroll earning codes"})]}),s.jsxs($t,{open:i,onOpenChange:o,children:[s.jsx(ev,{asChild:!0,children:s.jsxs(I,{size:"sm",onClick:f,children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Add Mapping"]})}),s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:l?"Edit Mapping":"Create Mapping"}),s.jsx(Mt,{children:"Map a shift type to a payroll earning code"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"shift_type",children:"Shift Type"}),s.jsx(J,{id:"shift_type",placeholder:"e.g., standard, overtime, weekend",value:u.shift_type,onChange:p=>d({...u,shift_type:p.target.value}),disabled:!!l})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"earning_code",children:"Earning Code"}),s.jsx(J,{id:"earning_code",placeholder:"e.g., ORD, OT1.5, SAT",value:u.earning_code,onChange:p=>d({...u,earning_code:p.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"description",children:"Description"}),s.jsx(J,{id:"description",placeholder:"e.g., Ordinary Hours",value:u.description,onChange:p=>d({...u,description:p.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"multiplier",children:"Multiplier"}),s.jsx(J,{id:"multiplier",type:"number",step:"0.1",min:"0",value:u.multiplier,onChange:p=>d({...u,multiplier:parseFloat(p.target.value)||1})})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsxs(I,{onClick:m,disabled:a||!u.shift_type||!u.earning_code,children:[a&&s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),l?"Update":"Create"]})]})]})]})]}),s.jsx(Y,{children:e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(RN,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No payroll mappings configured"}),s.jsx("p",{className:"text-sm",children:"Add mappings to export timesheets with earning codes"})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Shift Type"}),s.jsx(re,{children:"Earning Code"}),s.jsx(re,{children:"Description"}),s.jsx(re,{children:"Multiplier"}),s.jsx(re,{className:"text-right",children:"Actions"})]})}),s.jsx(jr,{children:e.map(p=>s.jsxs(qe,{children:[s.jsx(Z,{className:"font-medium font-mono",children:p.shift_type}),s.jsx(Z,{className:"font-mono",children:p.earning_code}),s.jsx(Z,{className:"text-muted-foreground",children:p.description||"-"}),s.jsxs(Z,{children:[p.multiplier,"x"]}),s.jsx(Z,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-1",children:[s.jsx(I,{size:"icon",variant:"ghost",onClick:()=>h(p),children:s.jsx(_p,{className:"h-4 w-4"})}),s.jsx(I,{size:"icon",variant:"ghost",className:"text-destructive",onClick:()=>g(p.id),children:s.jsx(bs,{className:"h-4 w-4"})})]})})]},p.id))})]})})]})}var DE="Radio",[xfe,M8]=zr(DE),[bfe,wfe]=xfe(DE),$8=x.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:u,...d}=e,[f,h]=x.useState(null),m=We(t,v=>h(v)),g=x.useRef(!1),p=f?u||!!f.closest("form"):!0;return s.jsxs(bfe,{scope:r,checked:a,disabled:o,children:[s.jsx(Ne.button,{type:"button",role:"radio","aria-checked":a,"data-state":U8(a),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:m,onClick:fe(e.onClick,v=>{a||c==null||c(),p&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),p&&s.jsx(F8,{control:f,bubbles:!g.current,name:n,value:l,checked:a,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});$8.displayName=DE;var I8="RadioIndicator",L8=x.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,i=wfe(I8,r);return s.jsx(en,{present:n||i.checked,children:s.jsx(Ne.span,{"data-state":U8(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});L8.displayName=I8;var jfe="RadioBubbleInput",F8=x.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=x.useRef(null),l=We(o,i),c=Yg(r),u=Ig(t);return x.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const g=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(g)}},[c,r,n]),s.jsx(Ne.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});F8.displayName=jfe;function U8(e){return e?"checked":"unchecked"}var _fe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],rw="RadioGroup",[Nfe,g3e]=zr(rw,[jh,M8]),B8=jh(),z8=M8(),[Sfe,Cfe]=Nfe(rw),V8=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:f,...h}=e,m=B8(r),g=Hl(u),[p,v]=qn({prop:i,defaultProp:a??null,onChange:f,caller:rw});return s.jsx(Sfe,{scope:r,name:n,required:o,disabled:l,value:p,onValueChange:v,children:s.jsx($k,{asChild:!0,...m,orientation:c,dir:g,loop:d,children:s.jsx(Ne.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...h,ref:t})})})});V8.displayName=rw;var q8="RadioGroupItem",W8=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,i=Cfe(q8,r),o=i.disabled||n,l=B8(r),c=z8(r),u=x.useRef(null),d=We(t,u),f=i.value===a.value,h=x.useRef(!1);return x.useEffect(()=>{const m=p=>{_fe.includes(p.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",g)}},[]),s.jsx(Ik,{asChild:!0,...l,focusable:!o,active:f,children:s.jsx($8,{disabled:o,required:i.required,checked:f,...c,...a,name:i.name,ref:d,onCheck:()=>i.onValueChange(a.value),onKeyDown:fe(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:fe(a.onFocus,()=>{var m;h.current&&((m=u.current)==null||m.click())})})})});W8.displayName=q8;var kfe="RadioGroupIndicator",H8=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=z8(r);return s.jsx(L8,{...a,...n,ref:t})});H8.displayName=kfe;var K8=V8,G8=W8,Efe=H8;const Y8=x.forwardRef(({className:e,...t},r)=>s.jsx(K8,{className:Q("grid gap-2",e),...t,ref:r}));Y8.displayName=K8.displayName;const X8=x.forwardRef(({className:e,...t},r)=>s.jsx(G8,{ref:r,className:Q("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(Efe,{className:"flex items-center justify-center",children:s.jsx(h0,{className:"h-2.5 w-2.5 fill-current text-current"})})}));X8.displayName=G8.displayName;const $y={generic_csv:"Generic Payroll CSV",keypay:"KeyPay Import",xero:"Xero Payroll",myob:"MYOB Payroll"},Pfe={generic_csv:"Standard CSV format compatible with most payroll systems",keypay:"KeyPay timesheet/earnings lines import format",xero:"Xero Payroll earnings import format",myob:"MYOB Payroll categories import format"};function Afe({selectedPayPeriod:e,validationResult:t,isValidating:r,isGenerating:n,onValidate:a,onGenerate:i,onDownload:o}){const[l,c]=x.useState("provider"),[u,d]=x.useState("generic_csv"),[f,h]=x.useState(null);x.useState(null);const m=async()=>{e&&(await a(e.id),c("validation"))},g=async()=>{!e||!t||(await i(e.id,u,t.timesheets),c("complete"))},p=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select Export Format"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the payroll system you're exporting to"})]}),s.jsx(Y8,{value:u,onValueChange:w=>d(w),className:"space-y-3",children:Object.keys($y).map(w=>s.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-lg border cursor-pointer transition-colors ${u===w?"border-primary bg-primary/5":"border-border hover:bg-muted/50"}`,onClick:()=>d(w),children:[s.jsx(X8,{value:w,id:w,className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(q,{htmlFor:w,className:"font-medium cursor-pointer",children:$y[w]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Pfe[w]})]})]},w))}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(I,{onClick:m,disabled:r,children:[r&&s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),"Validate & Continue",s.jsx(TN,{className:"h-4 w-4 ml-2"})]})})]}),v=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Validation Results"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Review any issues before generating the export"})]}),t&&s.jsx(ce,{variant:t.isValid?"outline":"destructive",className:t.isValid?"bg-green-50 text-green-700 border-green-200":"",children:t.isValid?"Valid":"Has Errors"})]}),(t==null?void 0:t.errors)&&t.errors.length>0&&s.jsxs(Cl,{variant:"destructive",children:[s.jsx(cu,{className:"h-4 w-4"}),s.jsxs(Qm,{children:["Errors (",t.errors.length,")"]}),s.jsx(kl,{children:s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[t.errors.slice(0,5).map((w,_)=>s.jsx("li",{className:"text-sm",children:w.message},_)),t.errors.length>5&&s.jsxs("li",{className:"text-sm",children:["...and ",t.errors.length-5," more"]})]})})]}),(t==null?void 0:t.warnings)&&t.warnings.length>0&&s.jsxs(Cl,{children:[s.jsx(ir,{className:"h-4 w-4"}),s.jsxs(Qm,{children:["Warnings (",t.warnings.length,")"]}),s.jsx(kl,{children:s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[t.warnings.slice(0,5).map((w,_)=>s.jsx("li",{className:"text-sm",children:w.message},_)),t.warnings.length>5&&s.jsxs("li",{className:"text-sm",children:["...and ",t.warnings.length-5," more"]})]})})]}),(t==null?void 0:t.timesheets)&&t.timesheets.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-2",children:["Timesheets to Export (",t.timesheets.length,")"]}),s.jsx("div",{className:"border rounded-lg max-h-64 overflow-auto",children:s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Employee"}),s.jsx(re,{children:"Date"}),s.jsx(re,{children:"Hours"})]})}),s.jsxs(jr,{children:[t.timesheets.slice(0,10).map(w=>{var _;return s.jsxs(qe,{children:[s.jsx(Z,{className:"font-medium",children:w.employee_name}),s.jsx(Z,{children:ne(new Date(w.date),"dd MMM yyyy")}),s.jsx(Z,{children:((_=w.total_hours)==null?void 0:_.toFixed(2))||"-"})]},w.id)}),t.timesheets.length>10&&s.jsx(qe,{children:s.jsxs(Z,{colSpan:3,className:"text-center text-muted-foreground",children:["...and ",t.timesheets.length-10," more timesheets"]})})]})]})})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs(I,{variant:"outline",onClick:()=>c("provider"),children:[s.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs(I,{onClick:()=>c("confirm"),disabled:!(t!=null&&t.isValid)||t.timesheets.length===0,children:["Continue to Export",s.jsx(TN,{className:"h-4 w-4 ml-2"})]})]})]}),b=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Confirm Export"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Review the export details before generating"})]}),s.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Format"}),s.jsx("span",{className:"font-medium",children:$y[u]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Pay Period"}),s.jsx("span",{className:"font-medium",children:e&&`${ne(new Date(e.start_date),"dd MMM")} - ${ne(new Date(e.end_date),"dd MMM yyyy")}`})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Timesheets"}),s.jsx("span",{className:"font-medium",children:(t==null?void 0:t.timesheets.length)||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Hours"}),s.jsx("span",{className:"font-medium",children:(t==null?void 0:t.timesheets.reduce((w,_)=>w+(_.total_hours||0),0).toFixed(2))||"0"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Employees"}),s.jsx("span",{className:"font-medium",children:new Set(t==null?void 0:t.timesheets.map(w=>w.employee_id)).size||0})]})]}),s.jsxs(Cl,{children:[s.jsx(ir,{className:"h-4 w-4"}),s.jsx(Qm,{children:"Important"}),s.jsx(kl,{children:"Exporting will lock these timesheets from further editing. Make sure all entries are correct before proceeding."})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs(I,{variant:"outline",onClick:()=>c("validation"),children:[s.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs(I,{onClick:g,disabled:n,children:[n&&s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),"Generate Export",s.jsx(Ed,{className:"h-4 w-4 ml-2"})]})]})]}),y=()=>s.jsxs("div",{className:"space-y-6 text-center py-8",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"h-16 w-16 rounded-full bg-green-100 flex items-center justify-center",children:s.jsx(nG,{className:"h-8 w-8 text-green-600"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Complete!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Your payroll export has been generated and timesheets have been locked."})]}),s.jsx("div",{className:"flex justify-center gap-4",children:s.jsx(I,{variant:"outline",onClick:()=>{c("provider"),h(null)},children:"Create Another Export"})})]});return e?s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsxs(me,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ed,{className:"h-5 w-5"}),"Export Wizard"]}),s.jsxs(Be,{children:["Exporting for: ",ne(new Date(e.start_date),"dd MMM")," -"," ",ne(new Date(e.end_date),"dd MMM yyyy")]})]}),s.jsxs(Y,{children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-8",children:["provider","validation","confirm","complete"].map((w,_)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium ${l===w?"bg-primary text-primary-foreground":["provider","validation","confirm","complete"].indexOf(l)>_?"bg-green-100 text-green-700":"bg-muted text-muted-foreground"}`,children:_+1}),_<3&&s.jsx("div",{className:"w-8 h-0.5 bg-muted mx-1"})]},w))}),l==="provider"&&p(),l==="validation"&&v(),l==="confirm"&&b(),l==="complete"&&y()]})]}):s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsxs(me,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ed,{className:"h-5 w-5"}),"Export Wizard"]}),s.jsx(Be,{children:"Select a pay period to begin the export process"})]}),s.jsx(Y,{children:s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ed,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No pay period selected"}),s.jsx("p",{className:"text-sm",children:"Select an open pay period from the list above"})]})})]})}function Ofe({exports:e,onDownload:t,onVoid:r,isVoiding:n,isDownloading:a}){const[i,o]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState(""),f=async p=>{const v=await t(p);window.open(v,"_blank")},h=p=>{c(p),d(""),o(!0)},m=async()=>{!l||!u.trim()||(await r(l.id,u),o(!1),c(null),d(""))},g=p=>{switch(p){case"generated":return s.jsx(ce,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20",children:"Generated"});case"voided":return s.jsx(ce,{variant:"outline",className:"bg-destructive/10 text-destructive border-destructive/20",children:"Voided"})}};return s.jsxs(s.Fragment,{children:[s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsxs(me,{className:"text-lg flex items-center gap-2",children:[s.jsx(Xa,{className:"h-5 w-5"}),"Export History"]}),s.jsx(Be,{children:"View and download previous payroll exports"})]}),s.jsx(Y,{children:e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ed,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No exports yet"}),s.jsx("p",{className:"text-sm",children:"Generate your first payroll export to see it here"})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Date"}),s.jsx(re,{children:"Pay Period"}),s.jsx(re,{children:"Provider"}),s.jsx(re,{children:"Summary"}),s.jsx(re,{children:"Status"}),s.jsx(re,{children:"Created By"}),s.jsx(re,{className:"text-right",children:"Actions"})]})}),s.jsx(jr,{children:e.map(p=>s.jsxs(qe,{className:p.status==="voided"?"opacity-60":"",children:[s.jsx(Z,{className:"font-medium",children:ne(new Date(p.created_at),"dd MMM yyyy HH:mm")}),s.jsx(Z,{children:p.pay_period&&s.jsxs("span",{className:"text-sm",children:[ne(new Date(p.pay_period.start_date),"dd MMM")," -"," ",ne(new Date(p.pay_period.end_date),"dd MMM")]})}),s.jsx(Z,{children:$y[p.provider]}),s.jsxs(Z,{className:"text-sm text-muted-foreground",children:[p.totals_summary.linesCount," lines, ",p.totals_summary.totalHours.toFixed(1),"h,"," ",p.totals_summary.employeesCount," employees"]}),s.jsx(Z,{children:g(p.status)}),s.jsx(Z,{className:"text-sm text-muted-foreground",children:p.created_by_name||p.created_by_email}),s.jsx(Z,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-1",children:[p.file_urls.length>0&&s.jsx(I,{size:"icon",variant:"ghost",onClick:()=>f(p.file_urls[0]),disabled:a,children:a?s.jsx(et,{className:"h-4 w-4 animate-spin"}):s.jsx(As,{className:"h-4 w-4"})}),p.status==="generated"&&s.jsx(I,{size:"icon",variant:"ghost",className:"text-destructive",onClick:()=>h(p),children:s.jsx(zn,{className:"h-4 w-4"})})]})})]},p.id))})]})})]}),s.jsx($t,{open:i,onOpenChange:o,children:s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Void Export"}),s.jsx(Mt,{children:"This will mark the export as voided. The file will remain but won't be considered valid. A reason is required for audit purposes."})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"void_reason",children:"Reason for Voiding"}),s.jsx(wt,{id:"void_reason",placeholder:"Enter the reason for voiding this export...",value:u,onChange:p=>d(p.target.value),rows:3})]})}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsxs(I,{variant:"destructive",onClick:m,disabled:n||!u.trim(),children:[n&&s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),"Void Export"]})]})]})})]})}function Tfe(){const[e,t]=x.useState("export"),[r,n]=x.useState(null),{payPeriods:a,mappings:i,exports:o,isLoading:l,createPayPeriod:c,closePayPeriod:u,isCreatingPayPeriod:d,createMapping:f,updateMapping:h,deleteMapping:m,isCreatingMapping:g,validateExport:p,isValidating:v,validationResult:b,generateExport:y,isGenerating:w,voidExport:_,isVoiding:j,getDownloadUrl:N,isDownloading:S}=vfe();return l?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Export"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate payroll-ready CSV exports from approved timesheets"})]}),s.jsxs(_n,{value:e,onValueChange:t,className:"space-y-4",children:[s.jsxs(mn,{children:[s.jsxs(Ue,{value:"export",className:"flex items-center gap-2",children:[s.jsx(Ed,{className:"h-4 w-4"}),"Export Wizard"]}),s.jsxs(Ue,{value:"periods",className:"flex items-center gap-2",children:[s.jsx(zt,{className:"h-4 w-4"}),"Pay Periods"]}),s.jsxs(Ue,{value:"mappings",className:"flex items-center gap-2",children:[s.jsx(RN,{className:"h-4 w-4"}),"Mappings"]}),s.jsxs(Ue,{value:"history",className:"flex items-center gap-2",children:[s.jsx(Xa,{className:"h-4 w-4"}),"History"]})]}),s.jsxs(tt,{value:"export",className:"space-y-6",children:[s.jsx(ST,{payPeriods:a.filter(k=>k.status==="open"),onCreatePayPeriod:c,onClosePayPeriod:u,onSelectPayPeriod:n,selectedPayPeriodId:r==null?void 0:r.id,isCreating:d}),s.jsx(Afe,{selectedPayPeriod:r,validationResult:b||null,isValidating:v,isGenerating:w,onValidate:p,onGenerate:async(k,C,P)=>{await y({payPeriodId:k,provider:C,timesheets:P}),n(null)},onDownload:N})]}),s.jsx(tt,{value:"periods",children:s.jsx(ST,{payPeriods:a,onCreatePayPeriod:c,onClosePayPeriod:u,onSelectPayPeriod:k=>{k.status==="open"&&(n(k),t("export"))},selectedPayPeriodId:r==null?void 0:r.id,isCreating:d})}),s.jsx(tt,{value:"mappings",children:s.jsx(yfe,{mappings:i,onCreateMapping:f,onUpdateMapping:h,onDeleteMapping:m,isCreating:g})}),s.jsx(tt,{value:"history",children:s.jsx(Ofe,{exports:o,onDownload:N,onVoid:_,isVoiding:j,isDownloading:S})})]})]})}async function Dfe(e){try{const{data:t}=await M.from("profiles").select("user_id").ilike("display_name",`%${e.employeeName}%`).maybeSingle();if(!(t!=null&&t.user_id))return console.warn(`Could not find user_id for employee: ${e.employeeName}`),!1;const r=e.reviewType==="annual"?"Annual Review":e.reviewType==="probation"?"Probation Review":"Performance Review",{error:n}=await M.from("notifications").insert({user_id:t.user_id,title:"New Review Assigned",message:`${e.reviewerName} has assigned you a ${r}. Please complete your self-assessment.`,type:"review",category:"performance",link:"/portal/reviews",is_read:!1});if(n)throw n;return!0}catch(t){return console.error("Error creating review notification:",t.message),!1}}async function Rfe(e){try{const{data:t}=await M.from("profiles").select("user_id").ilike("display_name",`%${e.employeeName}%`).maybeSingle();if(!(t!=null&&t.user_id))return!1;let r="Review Updated",n="Your review status has been updated.";switch(e.status){case"in_progress":r="Review In Progress",n="Your performance review is now in progress.";break;case"pending_approval":r="Review Pending Approval",n="Your review is pending final approval.";break;case"completed":r="Review Completed",n="Your performance review has been completed. View your feedback.";break}const{error:a}=await M.from("notifications").insert({user_id:t.user_id,title:r,message:n,type:"review",category:"performance",link:"/portal/reviews",is_read:!1});if(a)throw a;return!0}catch(t){return console.error("Error creating status notification:",t.message),!1}}async function Mfe(e){try{const{data:t}=await M.from("profiles").select("user_id").ilike("display_name",`%${e.responderName}%`).maybeSingle();if(!(t!=null&&t.user_id))return!1;const{error:r}=await M.from("notifications").insert({user_id:t.user_id,title:"360 Feedback Requested",message:`You've been asked to provide feedback for ${e.employeeName}'s performance review.`,type:"feedback",category:"performance",link:"/portal/reviews",is_read:!1});if(r)throw r;return!0}catch(t){return console.error("Error creating feedback notification:",t.message),!1}}function RE(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:a}=or(),i=x.useCallback(async()=>{try{n(!0);const{data:u,error:d}=await M.from("supervisions").select("*").order("created_at",{ascending:!1});if(d)throw d;t(u||[])}catch(u){a({title:"Error fetching supervisions",description:u.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async u=>{try{const{data:d,error:f}=await M.from("supervisions").insert(u).select().single();if(f)throw f;return t(h=>[d,...h]),a({title:"Supervision relationship created"}),d}catch(d){return a({title:"Error creating supervision",description:d.message,variant:"destructive"}),null}},l=async(u,d)=>{try{const{data:f,error:h}=await M.from("supervisions").update(d).eq("id",u).select().single();if(h)throw h;return t(m=>m.map(g=>g.id===u?f:g)),a({title:"Supervision updated"}),f}catch(f){return a({title:"Error updating supervision",description:f.message,variant:"destructive"}),null}},c=async u=>{try{const{error:d}=await M.from("supervisions").delete().eq("id",u);if(d)throw d;return t(f=>f.filter(h=>h.id!==u)),a({title:"Supervision deleted"}),!0}catch(d){return a({title:"Error deleting supervision",description:d.message,variant:"destructive"}),!1}};return x.useEffect(()=>{i()},[i]),{supervisions:e,loading:r,fetchSupervisions:i,createSupervision:o,updateSupervision:l,deleteSupervision:c}}function $fe(e){const[t,r]=x.useState([]),[n,a]=x.useState(!0),{toast:i}=or(),o=x.useCallback(async()=>{try{a(!0);let c=M.from("supervision_sessions").select("*").order("session_date",{ascending:!1});e&&(c=c.eq("supervision_id",e));const{data:u,error:d}=await c;if(d)throw d;r(u||[])}catch(c){i({title:"Error fetching sessions",description:c.message,variant:"destructive"})}finally{a(!1)}},[e,i]),l=async c=>{try{const{data:u,error:d}=await M.from("supervision_sessions").insert(c).select().single();if(d)throw d;return r(f=>[u,...f]),i({title:"Session recorded"}),u}catch(u){return i({title:"Error creating session",description:u.message,variant:"destructive"}),null}};return x.useEffect(()=>{o()},[o]),{sessions:t,loading:n,fetchSessions:o,createSession:l}}function ME(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:a}=or(),i=x.useCallback(async()=>{try{n(!0);const{data:u,error:d}=await M.from("competencies").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(d)throw d;t(u||[])}catch(u){a({title:"Error fetching competencies",description:u.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async u=>{try{const{data:d,error:f}=await M.from("competencies").insert(u).select().single();if(f)throw f;return t(h=>[...h,d].sort((m,g)=>m.display_order-g.display_order)),a({title:"Competency created"}),d}catch(d){return a({title:"Error creating competency",description:d.message,variant:"destructive"}),null}},l=async(u,d)=>{try{const{data:f,error:h}=await M.from("competencies").update(d).eq("id",u).select().single();if(h)throw h;return t(m=>m.map(g=>g.id===u?f:g).sort((g,p)=>g.display_order-p.display_order)),a({title:"Competency updated"}),f}catch(f){return a({title:"Error updating competency",description:f.message,variant:"destructive"}),null}},c=async u=>{try{const{error:d}=await M.from("competencies").update({is_active:!1}).eq("id",u);if(d)throw d;return t(f=>f.filter(h=>h.id!==u)),a({title:"Competency removed"}),!0}catch(d){return a({title:"Error removing competency",description:d.message,variant:"destructive"}),!1}};return x.useEffect(()=>{i()},[i]),{competencies:e,loading:r,fetchCompetencies:i,createCompetency:o,updateCompetency:l,deleteCompetency:c}}function nw(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:a}=or(),i=x.useCallback(async()=>{try{n(!0);const{data:u,error:d}=await M.from("performance_reviews").select("*").order("created_at",{ascending:!1});if(d)throw d;t(u||[])}catch(u){a({title:"Error fetching reviews",description:u.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async u=>{try{const{data:d,error:f}=await M.from("performance_reviews").insert(u).select().single();if(f)throw f;return t(h=>[d,...h]),a({title:"Review created"}),await Dfe({employeeEmail:d.employee_email,employeeName:d.employee_name,reviewerName:d.reviewer_name,reviewType:d.review_type,reviewId:d.id}),d}catch(d){return a({title:"Error creating review",description:d.message,variant:"destructive"}),null}},l=async(u,d)=>{try{const{data:f,error:h}=await M.from("performance_reviews").update(d).eq("id",u).select().single();if(h)throw h;return t(m=>m.map(g=>g.id===u?f:g)),a({title:"Review updated"}),d.status&&await Rfe({employeeEmail:f.employee_email,employeeName:f.employee_name,status:f.status,reviewId:f.id}),f}catch(f){return a({title:"Error updating review",description:f.message,variant:"destructive"}),null}},c=async u=>{try{const{error:d}=await M.from("performance_reviews").delete().eq("id",u);if(d)throw d;return t(f=>f.filter(h=>h.id!==u)),a({title:"Review deleted"}),!0}catch(d){return a({title:"Error deleting review",description:d.message,variant:"destructive"}),!1}};return x.useEffect(()=>{i()},[i]),{reviews:e,loading:r,fetchReviews:i,createReview:o,updateReview:l,deleteReview:c}}function Q8(e){const[t,r]=x.useState([]),[n,a]=x.useState(!0),{toast:i}=or(),o=x.useCallback(async()=>{if(!e){a(!1);return}try{a(!0);const{data:u,error:d}=await M.from("review_feedback").select("*").eq("review_id",e).order("created_at",{ascending:!1}).returns();if(d)throw d;r(u||[])}catch(u){i({title:"Error fetching feedback",description:u.message,variant:"destructive"})}finally{a(!1)}},[e,i]),l=async(u,d)=>{try{const{data:f,error:h}=await M.from("review_feedback").insert(u).select().returns().single();if(h)throw h;return r(m=>[f,...m]),i({title:"Feedback request sent"}),d&&await Mfe({responderEmail:f.responder_email,responderName:f.responder_name,employeeName:d,reviewId:f.review_id}),f}catch(f){return i({title:"Error requesting feedback",description:f.message,variant:"destructive"}),null}},c=async(u,d)=>{try{const{data:f,error:h}=await M.from("review_feedback").update({...d,status:"submitted",submitted_at:new Date().toISOString()}).eq("id",u).select().returns().single();if(h)throw h;return r(m=>m.map(g=>g.id===u?f:g)),i({title:"Feedback submitted"}),f}catch(f){return i({title:"Error submitting feedback",description:f.message,variant:"destructive"}),null}};return x.useEffect(()=>{o()},[o]),{feedback:t,loading:n,fetchFeedback:o,requestFeedback:l,submitFeedback:c}}function CT(e){return{id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,phone:e.phone||"",avatar:e.avatar_url||void 0,employmentType:e.employment_type,position:e.position||"",department:e.department||"",startDate:e.start_date||"",status:e.status,complianceStatus:e.compliance_status,payRate:e.pay_rate||0,awardClassification:void 0,emergencyContact:e.emergency_contact_name?{name:e.emergency_contact_name,phone:e.emergency_contact_phone||"",relationship:e.emergency_contact_relationship||""}:void 0,documents:[],certifications:[]}}function $E(){const{employees:e,activeEmployees:t,refetch:r,isLoading:n}=Kl(),a=e.map(CT),i=t.map(CT);return{employees:a,activeEmployees:i,refetch:r,isLoading:n}}const Ife=Os({employee_id:Ze().min(1,"Please select an employee"),supervisor_id:Ze().min(1,"Please select a supervisor"),start_date:ju({required_error:"Start date is required"}),notes:Ze().max(500).optional()});function Lfe({open:e,onOpenChange:t}){const[r,n]=x.useState(!1),{createSupervision:a}=RE(),{activeEmployees:i}=$E(),o=as({resolver:Di(Ife),defaultValues:{employee_id:"",supervisor_id:"",notes:""}}),l=async d=>{const f=i.find(m=>m.id===d.employee_id),h=i.find(m=>m.id===d.supervisor_id);if(!(!f||!h)){n(!0);try{await a({supervisor_name:`${h.firstName} ${h.lastName}`,supervisor_email:h.email,employee_name:`${f.firstName} ${f.lastName}`,employee_email:f.email,start_date:ne(d.start_date,"yyyy-MM-dd"),end_date:null,is_active:!0,notes:d.notes||null}),o.reset(),t(!1)}finally{n(!1)}}},c=o.watch("employee_id"),u=o.watch("supervisor_id");return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-[500px]",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Create Supervision Assignment"}),s.jsx(Mt,{children:"Assign a supervisor to an employee for ongoing supervision sessions."})]}),s.jsx(Ql,{...o,children:s.jsxs("form",{onSubmit:o.handleSubmit(l),className:"space-y-4",children:[s.jsx(pt,{control:o.control,name:"employee_id",render:({field:d})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Employee"}),s.jsxs(Me,{onValueChange:d.onChange,value:d.value,children:[s.jsx(ht,{children:s.jsx(Te,{children:s.jsx($e,{placeholder:"Select an employee"})})}),s.jsx(De,{children:i.filter(f=>f.id!==u).map(f=>s.jsxs(W,{value:f.id,children:[f.firstName," ",f.lastName," - ",f.position]},f.id))})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"supervisor_id",render:({field:d})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Supervisor"}),s.jsxs(Me,{onValueChange:d.onChange,value:d.value,children:[s.jsx(ht,{children:s.jsx(Te,{children:s.jsx($e,{placeholder:"Select a supervisor"})})}),s.jsx(De,{children:i.filter(f=>f.id!==c).map(f=>s.jsxs(W,{value:f.id,children:[f.firstName," ",f.lastName," - ",f.position]},f.id))})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"start_date",render:({field:d})=>s.jsxs(ft,{className:"flex flex-col",children:[s.jsx(vt,{children:"Start Date"}),s.jsxs(Mi,{children:[s.jsx($i,{asChild:!0,children:s.jsx(ht,{children:s.jsxs(I,{variant:"outline",className:Q("w-full pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?ne(d.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(zt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(ti,{className:"w-auto p-0",align:"start",children:s.jsx(ni,{mode:"single",selected:d.value,onSelect:d.onChange,initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"notes",render:({field:d})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Notes (Optional)"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Any additional notes about this supervision arrangement...",className:"resize-none",...d})}),s.jsx(_t,{})]})}),s.jsxs(fr,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:r,children:[r&&s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Assignment"]})]})]})})]})})}var sw="Switch",[Ffe,v3e]=zr(sw),[Ufe,Bfe]=Ffe(sw),Z8=x.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,m]=x.useState(null),g=We(t,w=>m(w)),p=x.useRef(!1),v=h?d||!!h.closest("form"):!0,[b,y]=qn({prop:a,defaultProp:i??!1,onChange:u,caller:sw});return s.jsxs(Ufe,{scope:r,checked:b,disabled:l,children:[s.jsx(Ne.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":rz(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onClick:fe(e.onClick,w=>{y(_=>!_),v&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})}),v&&s.jsx(tz,{control:h,bubbles:!p.current,name:n,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});Z8.displayName=sw;var J8="SwitchThumb",ez=x.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=Bfe(J8,r);return s.jsx(Ne.span,{"data-state":rz(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});ez.displayName=J8;var zfe="SwitchBubbleInput",tz=x.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=x.useRef(null),l=We(o,i),c=Yg(r),u=Ig(t);return x.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const g=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(g)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});tz.displayName=zfe;function rz(e){return e?"checked":"unchecked"}var nz=Z8,Vfe=ez;const An=x.forwardRef(({className:e,...t},r)=>s.jsx(nz,{className:Q("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:s.jsx(Vfe,{className:Q("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));An.displayName=nz.displayName;const qfe=Os({session_date:ju({required_error:"Session date is required"}),duration_minutes:bU.number().min(1,"Duration must be at least 1 minute").optional(),location:Ze().max(100).optional(),topics_discussed:Ze().max(2e3).optional(),action_items:Ze().max(2e3).optional(),follow_up_required:Tx().default(!1),next_session_date:ju().optional(),notes:Ze().max(2e3).optional()});function Wfe({open:e,onOpenChange:t,supervisionId:r}){const[n,a]=x.useState(!1),{createSession:i}=$fe(r),o=as({resolver:Di(qfe),defaultValues:{follow_up_required:!1,location:"",topics_discussed:"",action_items:"",notes:""}}),l=async c=>{a(!0);try{await i({supervision_id:r,session_date:ne(c.session_date,"yyyy-MM-dd"),duration_minutes:c.duration_minutes||null,location:c.location||null,topics_discussed:c.topics_discussed||null,action_items:c.action_items||null,follow_up_required:c.follow_up_required,next_session_date:c.next_session_date?ne(c.next_session_date,"yyyy-MM-dd"):null,notes:c.notes||null,created_by:null}),o.reset(),t(!1)}finally{a(!1)}};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Log Supervision Session"}),s.jsx(Mt,{children:"Record details of a supervision meeting including topics discussed and action items."})]}),s.jsx(Ql,{...o,children:s.jsxs("form",{onSubmit:o.handleSubmit(l),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(pt,{control:o.control,name:"session_date",render:({field:c})=>s.jsxs(ft,{className:"flex flex-col",children:[s.jsx(vt,{children:"Session Date"}),s.jsxs(Mi,{children:[s.jsx($i,{asChild:!0,children:s.jsx(ht,{children:s.jsxs(I,{variant:"outline",className:Q("w-full pl-3 text-left font-normal",!c.value&&"text-muted-foreground"),children:[c.value?ne(c.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(zt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(ti,{className:"w-auto p-0",align:"start",children:s.jsx(ni,{mode:"single",selected:c.value,onSelect:c.onChange,initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"duration_minutes",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Duration (minutes)"}),s.jsx(ht,{children:s.jsx(J,{type:"number",placeholder:"60",...c})}),s.jsx(_t,{})]})})]}),s.jsx(pt,{control:o.control,name:"location",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Location"}),s.jsx(ht,{children:s.jsx(J,{placeholder:"Office, Video Call, etc.",...c})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"topics_discussed",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Topics Discussed"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Key topics covered during the session...",className:"resize-none min-h-[100px]",...c})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"action_items",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Action Items"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Tasks and follow-up actions...",className:"resize-none min-h-[80px]",...c})}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("span",{className:"text-sm font-medium",children:"Follow-up Required"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Mark if additional follow-up is needed before next session"})]}),s.jsx(pt,{control:o.control,name:"follow_up_required",render:({field:c})=>s.jsx(ft,{children:s.jsx(ht,{children:s.jsx(An,{checked:c.value,onCheckedChange:c.onChange})})})})]}),s.jsx(pt,{control:o.control,name:"next_session_date",render:({field:c})=>s.jsxs(ft,{className:"flex flex-col",children:[s.jsx(vt,{children:"Next Session Date (Optional)"}),s.jsxs(Mi,{children:[s.jsx($i,{asChild:!0,children:s.jsx(ht,{children:s.jsxs(I,{variant:"outline",className:Q("w-full pl-3 text-left font-normal",!c.value&&"text-muted-foreground"),children:[c.value?ne(c.value,"PPP"):s.jsx("span",{children:"Schedule next session"}),s.jsx(zt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(ti,{className:"w-auto p-0",align:"start",children:s.jsx(ni,{mode:"single",selected:c.value,onSelect:c.onChange,disabled:u=>u<new Date,initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"notes",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Additional Notes"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Any other observations or comments...",className:"resize-none",...c})}),s.jsx(_t,{})]})}),s.jsxs(fr,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:n,children:[n&&s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Log Session"]})]})]})})]})})}function Hfe({searchQuery:e}){const{supervisions:t,loading:r,deleteSupervision:n,updateSupervision:a}=RE(),[i,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(null),f=t.filter(g=>g.employee_name.toLowerCase().includes(e.toLowerCase())||g.supervisor_name.toLowerCase().includes(e.toLowerCase())),h=g=>{d(g),c(!0)},m=async g=>{await a(g,{is_active:!1,end_date:new Date().toISOString().split("T")[0]})};return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(s.Fragment,{children:[s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg",children:"Supervision Assignments"}),s.jsx(Be,{children:"Manage supervisor-employee relationships and log supervision sessions"})]}),s.jsxs(I,{onClick:()=>o(!0),className:"gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Add Supervision"]})]}),s.jsx(Y,{children:f.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Er,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No supervision assignments found"}),s.jsx("p",{className:"text-sm mt-1",children:"Create a new supervision assignment to get started"})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Employee"}),s.jsx(re,{children:"Supervisor"}),s.jsx(re,{children:"Start Date"}),s.jsx(re,{children:"Status"}),s.jsx(re,{className:"text-right",children:"Actions"})]})}),s.jsx(jr,{children:f.map(g=>s.jsxs(qe,{children:[s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pr,{className:"h-8 w-8",children:s.jsx(Ar,{className:"text-xs",children:g.employee_name.split(" ").map(p=>p[0]).join("")})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:g.employee_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:g.employee_email})]})]})}),s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pr,{className:"h-8 w-8",children:s.jsx(Ar,{className:"text-xs bg-primary/10 text-primary",children:g.supervisor_name.split(" ").map(p=>p[0]).join("")})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:g.supervisor_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:g.supervisor_email})]})]})}),s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(zt,{className:"h-4 w-4 text-muted-foreground"}),ne(new Date(g.start_date),"dd MMM yyyy")]})}),s.jsx(Z,{children:s.jsx(ce,{variant:g.is_active?"default":"secondary",children:g.is_active?"Active":"Ended"})}),s.jsx(Z,{className:"text-right",children:s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:s.jsx(ai,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",className:"bg-popover",children:[s.jsxs(st,{onClick:()=>h(g.id),children:[s.jsx(Mg,{className:"h-4 w-4 mr-2"}),"Log Session"]}),g.is_active&&s.jsx(st,{onClick:()=>m(g.id),className:"text-destructive",children:"End Supervision"}),s.jsx(st,{onClick:()=>n(g.id),className:"text-destructive",children:"Delete"})]})]})})]},g.id))})]})})]}),s.jsx(Lfe,{open:i,onOpenChange:o}),u&&s.jsx(Wfe,{open:l,onOpenChange:c,supervisionId:u})]})}const Kfe=Os({employee_id:Ze().min(1,"Please select an employee"),reviewer_id:Ze().min(1,"Please select a reviewer"),review_type:Bu(["performance","annual","probation"]),review_period_start:ju({required_error:"Start date is required"}),review_period_end:ju({required_error:"End date is required"})});function Gfe({open:e,onOpenChange:t}){const[r,n]=x.useState(!1),{createReview:a}=nw(),{activeEmployees:i}=$E(),o=as({resolver:Di(Kfe),defaultValues:{employee_id:"",reviewer_id:"",review_type:"performance"}}),l=o.watch("employee_id"),c=o.watch("reviewer_id"),u=async d=>{const f=i.find(m=>m.id===d.employee_id),h=i.find(m=>m.id===d.reviewer_id);if(!(!f||!h)){n(!0);try{await a({employee_name:`${f.firstName} ${f.lastName}`,employee_email:f.email,employee_position:f.position||null,employee_department:f.department||null,reviewer_name:`${h.firstName} ${h.lastName}`,reviewer_email:h.email,review_type:d.review_type,review_period_start:ne(d.review_period_start,"yyyy-MM-dd"),review_period_end:ne(d.review_period_end,"yyyy-MM-dd"),status:"draft",overall_rating:null,overall_feedback:null,strengths:null,areas_for_improvement:null,development_plan:null,employee_comments:null,completed_at:null}),o.reset(),t(!1)}finally{n(!1)}}};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Create Performance Review"}),s.jsx(Mt,{children:"Set up a new performance review for an employee with goals, competency ratings, and 360 feedback."})]}),s.jsx(Ql,{...o,children:s.jsxs("form",{onSubmit:o.handleSubmit(u),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Employee Details"}),s.jsx(pt,{control:o.control,name:"employee_id",render:({field:d})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Select Employee"}),s.jsxs(Me,{onValueChange:d.onChange,value:d.value,children:[s.jsx(ht,{children:s.jsx(Te,{children:s.jsx($e,{placeholder:"Select an employee to review"})})}),s.jsx(De,{className:"bg-popover",children:i.filter(f=>f.id!==c).map(f=>s.jsxs(W,{value:f.id,children:[f.firstName," ",f.lastName," - ",f.position]},f.id))})]}),s.jsx(_t,{})]})}),l&&s.jsx("div",{className:"text-sm text-muted-foreground bg-muted/50 p-3 rounded-md",children:(()=>{const d=i.find(f=>f.id===l);return d?s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",d.email]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Position:"})," ",d.position]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Department:"})," ",d.department]})]}):null})()})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Reviewer Details"}),s.jsx(pt,{control:o.control,name:"reviewer_id",render:({field:d})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Select Reviewer"}),s.jsxs(Me,{onValueChange:d.onChange,value:d.value,children:[s.jsx(ht,{children:s.jsx(Te,{children:s.jsx($e,{placeholder:"Select a reviewer"})})}),s.jsx(De,{className:"bg-popover",children:i.filter(f=>f.id!==l).map(f=>s.jsxs(W,{value:f.id,children:[f.firstName," ",f.lastName," - ",f.position]},f.id))})]}),s.jsx(_t,{})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Review Settings"}),s.jsx(pt,{control:o.control,name:"review_type",render:({field:d})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Review Type"}),s.jsxs(Me,{onValueChange:d.onChange,defaultValue:d.value,children:[s.jsx(ht,{children:s.jsx(Te,{children:s.jsx($e,{placeholder:"Select review type"})})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"performance",children:"Performance Review"}),s.jsx(W,{value:"annual",children:"Annual Review"}),s.jsx(W,{value:"probation",children:"Probation Review"})]})]}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(pt,{control:o.control,name:"review_period_start",render:({field:d})=>s.jsxs(ft,{className:"flex flex-col",children:[s.jsx(vt,{children:"Period Start"}),s.jsxs(Mi,{children:[s.jsx($i,{asChild:!0,children:s.jsx(ht,{children:s.jsxs(I,{variant:"outline",className:Q("w-full pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?ne(d.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(zt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(ti,{className:"w-auto p-0",align:"start",children:s.jsx(ni,{mode:"single",selected:d.value,onSelect:d.onChange,initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"review_period_end",render:({field:d})=>s.jsxs(ft,{className:"flex flex-col",children:[s.jsx(vt,{children:"Period End"}),s.jsxs(Mi,{children:[s.jsx($i,{asChild:!0,children:s.jsx(ht,{children:s.jsxs(I,{variant:"outline",className:Q("w-full pl-3 text-left font-normal",!d.value&&"text-muted-foreground"),children:[d.value?ne(d.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(zt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(ti,{className:"w-auto p-0",align:"start",children:s.jsx(ni,{mode:"single",selected:d.value,onSelect:d.onChange,initialFocus:!0,className:"p-3 pointer-events-auto"})})]}),s.jsx(_t,{})]})})]})]}),s.jsxs(fr,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:r,children:[r&&s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Review"]})]})]})})]})})}const Yfe=Os({responder_name:Ze().min(1,"Name is required").max(100),responder_email:Ze().email("Invalid email address"),feedback_type:Bu(["self","manager","peer","direct_report"]),relationship_to_employee:Ze().max(100).optional(),is_anonymous:Tx().default(!1)});function Xfe({open:e,onOpenChange:t,reviewId:r}){const[n,a]=x.useState(!1),{requestFeedback:i}=Q8(r),o=as({resolver:Di(Yfe),defaultValues:{responder_name:"",responder_email:"",feedback_type:"peer",relationship_to_employee:"",is_anonymous:!1}}),l=async c=>{a(!0);try{await i({review_id:r,responder_name:c.responder_name,responder_email:c.responder_email,feedback_type:c.feedback_type,relationship_to_employee:c.relationship_to_employee||null,is_anonymous:c.is_anonymous,overall_rating:null,strengths:null,areas_for_improvement:null,additional_comments:null,submitted_at:null,status:"pending"}),o.reset(),t(!1)}finally{a(!1)}};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-[450px]",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Request 360 Feedback"}),s.jsx(Mt,{children:"Invite someone to provide feedback on the employee's performance."})]}),s.jsx(Ql,{...o,children:s.jsxs("form",{onSubmit:o.handleSubmit(l),className:"space-y-4",children:[s.jsx(pt,{control:o.control,name:"responder_name",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Responder Name"}),s.jsx(ht,{children:s.jsx(J,{placeholder:"John Smith",...c})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"responder_email",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Responder Email"}),s.jsx(ht,{children:s.jsx(J,{placeholder:"john@example.com",type:"email",...c})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"feedback_type",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Feedback Type"}),s.jsxs(Me,{onValueChange:c.onChange,defaultValue:c.value,children:[s.jsx(ht,{children:s.jsx(Te,{children:s.jsx($e,{placeholder:"Select type"})})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"self",children:"Self Assessment"}),s.jsx(W,{value:"manager",children:"Manager"}),s.jsx(W,{value:"peer",children:"Peer"}),s.jsx(W,{value:"direct_report",children:"Direct Report"})]})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:o.control,name:"relationship_to_employee",render:({field:c})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Relationship (Optional)"}),s.jsx(ht,{children:s.jsx(J,{placeholder:"e.g., Team Lead, Colleague",...c})}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("span",{className:"text-sm font-medium",children:"Anonymous Feedback"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Hide responder identity from the employee"})]}),s.jsx(pt,{control:o.control,name:"is_anonymous",render:({field:c})=>s.jsx(ft,{children:s.jsx(ht,{children:s.jsx(An,{checked:c.value,onCheckedChange:c.onChange})})})})]}),s.jsxs(fr,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:n,children:[n&&s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Request"]})]})]})})]})})}const kT={draft:{label:"Draft",color:"bg-muted text-muted-foreground"},in_progress:{label:"In Progress",color:"bg-primary/10 text-primary"},pending_approval:{label:"Pending Approval",color:"bg-warning/10 text-warning"},completed:{label:"Completed",color:"bg-success/10 text-success"}};function Qfe({open:e,onOpenChange:t,review:r}){const[n,a]=x.useState("overview"),[i,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(r.overall_feedback||""),[f,h]=x.useState(r.strengths||""),[m,g]=x.useState(r.areas_for_improvement||""),[p,v]=x.useState(r.development_plan||""),{updateReview:b}=nw(),{competencies:y}=ME(),{feedback:w}=Q8(r.id),_=async()=>{c(!0);try{await b(r.id,{overall_feedback:u||null,strengths:f||null,areas_for_improvement:m||null,development_plan:p||null})}finally{c(!1)}},j=w.filter(S=>S.status==="pending").length,N=w.filter(S=>S.status==="submitted").length;return s.jsxs(s.Fragment,{children:[s.jsx(Oo,{open:e,onOpenChange:t,children:s.jsxs(Ui,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[s.jsx(Bi,{children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Pr,{className:"h-12 w-12",children:s.jsx(Ar,{children:r.employee_name.split(" ").map(S=>S[0]).join("")})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(zi,{className:"flex items-center gap-2",children:[r.employee_name,s.jsx(ce,{className:kT[r.status].color,children:kT[r.status].label})]}),s.jsxs(To,{children:[r.employee_position||"No position","  ",r.employee_department||"No department"]})]})]})}),s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Review Period"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(zt,{className:"h-4 w-4 text-muted-foreground"}),ne(new Date(r.review_period_start),"MMM yyyy")," - ",ne(new Date(r.review_period_end),"MMM yyyy")]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Reviewer"}),s.jsx("p",{className:"mt-1 font-medium",children:r.reviewer_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Type"}),s.jsxs("p",{className:"mt-1 font-medium capitalize",children:[r.review_type," Review"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Overall Rating"}),s.jsx("div",{className:"flex items-center gap-1 mt-1",children:r.overall_rating?s.jsxs(s.Fragment,{children:[s.jsx(Ws,{className:"h-4 w-4 fill-amber-400 text-amber-400"}),s.jsxs("span",{className:"font-medium",children:[r.overall_rating.toFixed(1)," / 5.0"]})]}):s.jsx("span",{className:"text-muted-foreground",children:"Not rated"})})]})]})})}),s.jsxs(_n,{value:n,onValueChange:a,children:[s.jsxs(mn,{className:"grid w-full grid-cols-3",children:[s.jsxs(Ue,{value:"overview",className:"flex items-center gap-2",children:[s.jsx(ut,{className:"h-4 w-4"}),"Overview"]}),s.jsxs(Ue,{value:"competencies",className:"flex items-center gap-2",children:[s.jsx(Qs,{className:"h-4 w-4"}),"Competencies"]}),s.jsxs(Ue,{value:"feedback",className:"flex items-center gap-2",children:[s.jsx(Er,{className:"h-4 w-4"}),"360 Feedback",j>0&&s.jsx(ce,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:j})]})]}),s.jsx(tt,{value:"overview",className:"mt-4 space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Overall Feedback"}),s.jsx(wt,{placeholder:"Provide overall feedback for this review period...",value:u,onChange:S=>d(S.target.value),className:"min-h-[100px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Strengths"}),s.jsx(wt,{placeholder:"Key strengths demonstrated...",value:f,onChange:S=>h(S.target.value),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Areas for Improvement"}),s.jsx(wt,{placeholder:"Areas that need improvement...",value:m,onChange:S=>g(S.target.value),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Development Plan"}),s.jsx(wt,{placeholder:"Outline the development plan for the next period...",value:p,onChange:S=>v(S.target.value),className:"min-h-[80px]"})]}),s.jsxs(I,{onClick:_,disabled:l,className:"w-full",children:[l&&s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Feedback"]})]})}),s.jsx(tt,{value:"competencies",className:"mt-4 space-y-4",children:s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-base",children:"Competency Framework"}),s.jsx(Be,{children:"Rate the employee on each competency area"})]}),s.jsx(Y,{className:"space-y-4",children:y.map(S=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:S.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:S.description})]}),s.jsx(ce,{variant:"outline",children:S.category})]}),s.jsx("div",{className:"flex items-center gap-2",children:[1,2,3,4,5].map(k=>s.jsx(I,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:k},k))}),s.jsx(Nt,{})]},S.id))})]})}),s.jsx(tt,{value:"feedback",className:"mt-4 space-y-4",children:s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-base",children:"360 Feedback Requests"}),s.jsxs(Be,{children:[N," of ",w.length," responses received"]})]}),s.jsxs(I,{size:"sm",onClick:()=>o(!0),className:"gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Request Feedback"]})]}),s.jsx(Y,{children:w.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Er,{className:"h-10 w-10 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No feedback requests yet"}),s.jsx("p",{className:"text-xs mt-1",children:"Request 360 feedback from peers, managers, or direct reports"})]}):s.jsx("div",{className:"space-y-3",children:w.map(S=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pr,{className:"h-8 w-8",children:s.jsx(Ar,{className:"text-xs",children:S.responder_name.split(" ").map(k=>k[0]).join("")})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:S.responder_name}),s.jsxs("p",{className:"text-xs text-muted-foreground capitalize",children:[S.feedback_type.replace("_"," "),"  ",S.relationship_to_employee||"N/A"]})]})]}),s.jsx(ce,{variant:S.status==="submitted"?"default":"secondary",children:S.status==="submitted"?"Received":"Pending"})]},S.id))})})]})})]})]})]})}),s.jsx(Xfe,{open:i,onOpenChange:o,reviewId:r.id})]})}function Zfe(){const[e,t]=x.useState(null),[r,n]=x.useState(!1),{toast:a}=or(),i=x.useCallback(async l=>{try{n(!0);const{data:c,error:u}=await M.from("performance_reviews").select("*").eq("employee_email",l).order("review_period_end",{ascending:!1});if(u)throw u;const d=(c==null?void 0:c.map(C=>C.id))||[],[f,h,m,g]=await Promise.all([d.length>0?M.from("review_goals").select("*").in("review_id",d):Promise.resolve({data:[],error:null}),d.length>0?M.from("competency_ratings").select("*").in("review_id",d):Promise.resolve({data:[],error:null}),d.length>0?M.from("review_feedback").select("*").in("review_id",d).eq("status","submitted"):Promise.resolve({data:[],error:null}),M.from("competencies").select("*").eq("is_active",!0)]);if(f.error)throw f.error;if(h.error)throw h.error;if(m.error)throw m.error;if(g.error)throw g.error;const p=f.data||[],v=h.data||[],b=m.data||[],y=g.data||[],w=v.map(C=>({...C,competency:y.find(P=>P.id===C.competency_id)})).filter(C=>C.competency),_=(c==null?void 0:c.filter(C=>C.overall_rating))||[],j=_.length>0?_.reduce((C,P)=>C+(P.overall_rating||0),0)/_.length:0,N=p.filter(C=>C.status==="completed").length,S=w.filter(C=>C.rating),k=S.length>0?S.reduce((C,P)=>C+(P.rating||0),0)/S.length:0;return t({reviews:c||[],goals:p,competencyRatings:w,feedback:b,summary:{totalReviews:(c==null?void 0:c.length)||0,averageRating:Number(j.toFixed(2)),completedGoals:N,totalGoals:p.length,averageCompetencyScore:Number(k.toFixed(2))}}),!0}catch(c){return a({title:"Error fetching performance report",description:c.message,variant:"destructive"}),!1}finally{n(!1)}},[a]),o=x.useCallback(()=>{t(null)},[]);return{data:e,loading:r,fetchEmployeeReport:i,clearData:o}}const Jfe={completed:"bg-success/10 text-success",in_progress:"bg-info/10 text-info",not_started:"bg-muted text-muted-foreground",deferred:"bg-warning/10 text-warning"},ehe={draft:"bg-muted text-muted-foreground",in_progress:"bg-info/10 text-info",pending_approval:"bg-warning/10 text-warning",completed:"bg-success/10 text-success"};function ET({rating:e}){return s.jsxs("div",{className:"flex items-center gap-0.5",children:[[1,2,3,4,5].map(t=>s.jsx(Ws,{className:`h-4 w-4 ${t<=e?"fill-warning text-warning":"text-muted"}`},t)),s.jsx("span",{className:"ml-2 text-sm font-medium",children:e.toFixed(1)})]})}function the({open:e,onOpenChange:t,employeeName:r,employeeEmail:n}){const{data:a,loading:i,fetchEmployeeReport:o,clearData:l}=Zfe(),c=x.useRef(null);x.useEffect(()=>{e&&n?o(n):l()},[e,n,o,l]);const u=()=>{window.print()},d=(a==null?void 0:a.competencyRatings.reduce((f,h)=>{const m=h.competency.category||"General";return f[m]||(f[m]=[]),f[m].push(h),f},{}))||{};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto print:max-w-none print:max-h-none print:overflow-visible",children:[s.jsxs(Dt,{className:"print:hidden",children:[s.jsx(Rt,{children:"Performance Report"}),s.jsxs(Mt,{children:["Comprehensive performance summary for ",r]})]}),s.jsx("div",{className:"flex gap-2 print:hidden",children:s.jsxs(I,{onClick:u,className:"flex-1",children:[s.jsx(uG,{className:"h-4 w-4 mr-2"}),"Print Report"]})}),i?s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ot,{className:"h-32"}),s.jsx(Ot,{className:"h-48"}),s.jsx(Ot,{className:"h-48"})]}):a?s.jsxs("div",{ref:c,className:"print-report space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 rounded-lg p-6 print:bg-none print:border print:border-border",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:r}),s.jsx("p",{className:"text-muted-foreground",children:n}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Report generated: ",ne(new Date,"dd MMMM yyyy")]})]}),s.jsxs("div",{className:"text-right hidden print:block",children:[s.jsx("p",{className:"font-semibold",children:"Social Plus Support Work"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Performance Report"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-6",children:[s.jsxs("div",{className:"bg-background rounded-lg p-3 border",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Qs,{className:"h-4 w-4"}),"Total Reviews"]}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:a.summary.totalReviews})]}),s.jsxs("div",{className:"bg-background rounded-lg p-3 border",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Ws,{className:"h-4 w-4"}),"Avg Rating"]}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:a.summary.averageRating>0?a.summary.averageRating.toFixed(1):""})]}),s.jsxs("div",{className:"bg-background rounded-lg p-3 border",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(yt,{className:"h-4 w-4"}),"Goals Completed"]}),s.jsxs("p",{className:"text-2xl font-bold mt-1",children:[a.summary.completedGoals,"/",a.summary.totalGoals]})]}),s.jsxs("div",{className:"bg-background rounded-lg p-3 border",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Zs,{className:"h-4 w-4"}),"Competency Score"]}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:a.summary.averageCompetencyScore>0?a.summary.averageCompetencyScore.toFixed(1):""})]})]})]}),s.jsxs("section",{className:"print:break-inside-avoid",children:[s.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[s.jsx(Qs,{className:"h-5 w-5 text-primary"}),"Performance Reviews"]}),a.reviews.length>0?s.jsx("div",{className:"space-y-4",children:a.reviews.map(f=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ce,{variant:"outline",className:"capitalize",children:f.review_type}),s.jsx(ce,{className:ehe[f.status],children:f.status.replace("_"," ")})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Period: ",ne(new Date(f.review_period_start),"MMM yyyy")," -"," ",ne(new Date(f.review_period_end),"MMM yyyy")]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Reviewer: ",f.reviewer_name]})]}),f.overall_rating&&s.jsx(ET,{rating:f.overall_rating})]}),(f.strengths||f.areas_for_improvement)&&s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 mt-4",children:[f.strengths&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-success mb-1",children:"Strengths"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.strengths})]}),f.areas_for_improvement&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-warning mb-1",children:"Areas for Improvement"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.areas_for_improvement})]})]}),f.overall_feedback&&s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Overall Feedback"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.overall_feedback})]})]},f.id))}):s.jsx("p",{className:"text-muted-foreground text-sm",children:"No performance reviews on record."})]}),s.jsx(Nt,{className:"print:hidden"}),s.jsxs("section",{className:"print:break-inside-avoid",children:[s.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[s.jsx(Zs,{className:"h-5 w-5 text-primary"}),"Competency Scores"]}),Object.keys(d).length>0?s.jsx("div",{className:"space-y-6",children:Object.entries(d).map(([f,h])=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:f}),s.jsx("div",{className:"space-y-3",children:h.map(m=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("p",{className:"text-sm font-medium truncate",children:m.competency.name})}),s.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[s.jsx("div",{className:"w-24 bg-muted rounded-full h-2",children:s.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${(m.rating||0)/5*100}%`}})}),s.jsx("span",{className:"text-sm font-medium w-8 text-right",children:m.rating?m.rating.toFixed(1):""})]})]},m.id))})]},f))}):s.jsx("p",{className:"text-muted-foreground text-sm",children:"No competency ratings recorded."})]}),s.jsx(Nt,{className:"print:hidden"}),s.jsxs("section",{className:"print:break-inside-avoid",children:[s.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[s.jsx(yt,{className:"h-5 w-5 text-primary"}),"Goals & Objectives"]}),a.goals.length>0?s.jsx("div",{className:"space-y-3",children:a.goals.map(f=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:f.title}),s.jsx(ce,{className:Jfe[f.status||"not_started"],children:(f.status||"not_started").replace("_"," ")})]}),f.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.description}),f.target_date&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-2 flex items-center gap-1",children:[s.jsx(xt,{className:"h-3 w-3"}),"Target: ",ne(new Date(f.target_date),"dd MMM yyyy")]})]}),s.jsx("div",{className:"text-right shrink-0",children:s.jsxs("p",{className:"text-sm font-medium",children:[f.progress_percentage||0,"%"]})})]}),s.jsx(Ks,{value:f.progress_percentage||0,className:"mt-3 h-2"})]},f.id))}):s.jsx("p",{className:"text-muted-foreground text-sm",children:"No goals assigned."})]}),a.feedback.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(Nt,{className:"print:hidden"}),s.jsxs("section",{className:"print:break-inside-avoid",children:[s.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2 mb-4",children:[s.jsx(Er,{className:"h-5 w-5 text-primary"}),"360 Feedback Summary"]}),s.jsx("div",{className:"space-y-3",children:a.feedback.map(f=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ce,{variant:"outline",className:"capitalize",children:f.feedback_type.replace("_"," ")}),!f.is_anonymous&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:["from ",f.responder_name]})]}),f.submitted_at&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Submitted: ",ne(new Date(f.submitted_at),"dd MMM yyyy")]})]}),f.overall_rating&&s.jsx(ET,{rating:f.overall_rating})]}),(f.strengths||f.areas_for_improvement)&&s.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 mt-3",children:[f.strengths&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-success mb-1",children:"Strengths"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.strengths})]}),f.areas_for_improvement&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-warning mb-1",children:"Areas for Improvement"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.areas_for_improvement})]})]}),f.additional_comments&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Additional Comments"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.additional_comments})]})]},f.id))})]})]}),s.jsxs("div",{className:"hidden print:block mt-8 pt-4 border-t text-center text-sm text-muted-foreground",children:[s.jsx("p",{children:"This report was generated from Social Plus Support Work HRMS"}),s.jsxs("p",{children:["Generated on ",ne(new Date,"dd MMMM yyyy")," at ",ne(new Date,"HH:mm")]})]})]}):s.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No performance data available for this employee."})]})})}const PT={draft:{label:"Draft",variant:"secondary"},in_progress:{label:"In Progress",variant:"default"},pending_approval:{label:"Pending Approval",variant:"outline"},completed:{label:"Completed",variant:"default"}},rhe={performance:"Performance",annual:"Annual",probation:"Probation"};function nhe({searchQuery:e}){const{reviews:t,loading:r,deleteReview:n,updateReview:a}=nw(),[i,o]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState(!1),[f,h]=x.useState(!1),[m,g]=x.useState(null),p=t.filter(y=>y.employee_name.toLowerCase().includes(e.toLowerCase())||y.reviewer_name.toLowerCase().includes(e.toLowerCase())),v=y=>{c(y),d(!0)},b=y=>{g({name:y.employee_name,email:y.employee_email}),h(!0)};return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(s.Fragment,{children:[s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg",children:"Performance Reviews"}),s.jsx(Be,{children:"Create and manage performance, annual, and probation reviews with 360 feedback"})]}),s.jsxs(I,{onClick:()=>o(!0),className:"gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"New Review"]})]}),s.jsx(Y,{children:p.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(uu,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No performance reviews found"}),s.jsx("p",{className:"text-sm mt-1",children:"Create a new review to get started"})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Employee"}),s.jsx(re,{children:"Type"}),s.jsx(re,{children:"Period"}),s.jsx(re,{children:"Reviewer"}),s.jsx(re,{children:"Rating"}),s.jsx(re,{children:"Status"}),s.jsx(re,{className:"text-right",children:"Actions"})]})}),s.jsx(jr,{children:p.map(y=>s.jsxs(qe,{children:[s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pr,{className:"h-8 w-8",children:s.jsx(Ar,{className:"text-xs",children:y.employee_name.split(" ").map(w=>w[0]).join("")})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:y.employee_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:y.employee_position||"No position"})]})]})}),s.jsx(Z,{children:s.jsx(ce,{variant:"outline",children:rhe[y.review_type]})}),s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(zt,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{children:[ne(new Date(y.review_period_start),"MMM yyyy")," - ",ne(new Date(y.review_period_end),"MMM yyyy")]})]})}),s.jsx(Z,{children:s.jsx("span",{className:"text-sm",children:y.reviewer_name})}),s.jsx(Z,{children:y.overall_rating?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ws,{className:"h-4 w-4 fill-amber-400 text-amber-400"}),s.jsx("span",{className:"font-medium",children:y.overall_rating.toFixed(1)})]}):s.jsx("span",{className:"text-muted-foreground text-sm",children:""})}),s.jsx(Z,{children:s.jsx(ce,{variant:PT[y.status].variant,className:y.status==="completed"?"bg-success/10 text-success":"",children:PT[y.status].label})}),s.jsx(Z,{className:"text-right",children:s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:s.jsx(ai,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",className:"bg-popover",children:[s.jsxs(st,{onClick:()=>v(y),children:[s.jsx(Li,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.jsxs(st,{onClick:()=>b(y),children:[s.jsx(ut,{className:"h-4 w-4 mr-2"}),"View Full Report"]}),s.jsxs(st,{onClick:()=>v(y),children:[s.jsx(Er,{className:"h-4 w-4 mr-2"}),"Request 360 Feedback"]}),s.jsx(ma,{}),y.status==="draft"&&s.jsx(st,{onClick:()=>a(y.id,{status:"in_progress"}),children:"Start Review"}),y.status==="in_progress"&&s.jsx(st,{onClick:()=>a(y.id,{status:"pending_approval"}),children:"Submit for Approval"}),y.status==="pending_approval"&&s.jsx(st,{onClick:()=>a(y.id,{status:"completed",completed_at:new Date().toISOString()}),children:"Mark Complete"}),s.jsx(ma,{}),s.jsx(st,{onClick:()=>n(y.id),className:"text-destructive",children:"Delete"})]})]})})]},y.id))})]})})]}),s.jsx(Gfe,{open:i,onOpenChange:o}),l&&s.jsx(Qfe,{open:u,onOpenChange:d,review:l}),m&&s.jsx(the,{open:f,onOpenChange:h,employeeName:m.name,employeeEmail:m.email})]})}const she=Os({name:Ze().min(1,"Name is required").max(100),description:Ze().max(500).optional(),category:Ze().min(1,"Category is required").max(50),display_order:bU.number().min(0).default(0)}),ahe=["Core Skills","Compliance","Professional","Growth","Leadership"];function ihe({searchQuery:e}){const{competencies:t,loading:r,createCompetency:n,updateCompetency:a,deleteCompetency:i}=ME(),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,f]=x.useState(!1),h=as({resolver:Di(she),defaultValues:{name:"",description:"",category:"Core Skills",display_order:0}}),m=t.filter(y=>{var w;return y.name.toLowerCase().includes(e.toLowerCase())||(((w=y.category)==null?void 0:w.toLowerCase())||"").includes(e.toLowerCase())}),g=y=>{u(y),h.reset({name:y.name,description:y.description||"",category:y.category||"Core Skills",display_order:y.display_order}),l(!0)},p=()=>{u(null),h.reset({name:"",description:"",category:"Core Skills",display_order:t.length+1}),l(!0)},v=async y=>{f(!0);try{c?await a(c.id,{name:y.name,description:y.description||null,category:y.category,display_order:y.display_order}):await n({name:y.name,description:y.description||null,category:y.category,display_order:y.display_order,is_active:!0}),l(!1),h.reset()}finally{f(!1)}},b=m.reduce((y,w)=>{const _=w.category||"Other";return y[_]||(y[_]=[]),y[_].push(w),y},{});return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(s.Fragment,{children:[s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg",children:"Competency Framework"}),s.jsx(Be,{children:"Define the competencies used to evaluate employee performance"})]}),s.jsxs(I,{onClick:p,className:"gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Add Competency"]})]}),s.jsx(Y,{children:m.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Qs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No competencies defined"}),s.jsx("p",{className:"text-sm mt-1",children:"Add competencies to use in performance reviews"})]}):s.jsx("div",{className:"space-y-6",children:Object.entries(b).map(([y,w])=>s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-3",children:y}),s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{className:"w-12",children:"#"}),s.jsx(re,{children:"Competency"}),s.jsx(re,{children:"Description"}),s.jsx(re,{className:"text-right",children:"Actions"})]})}),s.jsx(jr,{children:w.map(_=>s.jsxs(qe,{children:[s.jsx(Z,{className:"text-muted-foreground",children:_.display_order}),s.jsx(Z,{className:"font-medium",children:_.name}),s.jsx(Z,{className:"text-sm text-muted-foreground max-w-md truncate",children:_.description||""}),s.jsx(Z,{className:"text-right",children:s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:s.jsx(ai,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",className:"bg-popover",children:[s.jsxs(st,{onClick:()=>g(_),children:[s.jsx(Sc,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(st,{onClick:()=>i(_.id),className:"text-destructive",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})})]},_.id))})]})]},y))})})]}),s.jsx($t,{open:o,onOpenChange:l,children:s.jsxs(Tt,{className:"sm:max-w-[450px]",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:c?"Edit Competency":"Add Competency"}),s.jsx(Mt,{children:c?"Update the competency details":"Add a new competency to the framework"})]}),s.jsx(Ql,{...h,children:s.jsxs("form",{onSubmit:h.handleSubmit(v),className:"space-y-4",children:[s.jsx(pt,{control:h.control,name:"name",render:({field:y})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Name"}),s.jsx(ht,{children:s.jsx(J,{placeholder:"e.g., Communication",...y})}),s.jsx(_t,{})]})}),s.jsx(pt,{control:h.control,name:"description",render:({field:y})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Description"}),s.jsx(ht,{children:s.jsx(wt,{placeholder:"Describe what this competency measures...",className:"resize-none",...y})}),s.jsx(_t,{})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(pt,{control:h.control,name:"category",render:({field:y})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Category"}),s.jsxs(Me,{onValueChange:y.onChange,value:y.value,children:[s.jsx(ht,{children:s.jsx(Te,{children:s.jsx($e,{placeholder:"Select category"})})}),s.jsx(De,{className:"bg-popover",children:ahe.map(w=>s.jsx(W,{value:w,children:w},w))})]}),s.jsx(_t,{})]})}),s.jsx(pt,{control:h.control,name:"display_order",render:({field:y})=>s.jsxs(ft,{children:[s.jsx(vt,{children:"Display Order"}),s.jsx(ht,{children:s.jsx(J,{type:"number",min:"0",...y})}),s.jsx(_t,{})]})})]}),s.jsxs(fr,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsxs(I,{type:"submit",disabled:d,children:[d&&s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),c?"Update":"Add"," Competency"]})]})]})})]})})]})}function ohe(){const[e,t]=x.useState([]),[r,n]=x.useState([]),[a,i]=x.useState([]),[o,l]=x.useState([]),[c,u]=x.useState([]),[d,f]=x.useState(!0),{toast:h}=or(),m=x.useCallback(async()=>{try{const{data:v,error:b}=await M.from("competencies").select("id, name, category").eq("is_active",!0);if(b)throw b;const{data:y,error:w}=await M.from("competency_ratings").select("competency_id, rating").not("rating","is",null);if(w)throw w;const _=new Map;y==null||y.forEach(N=>{const S=_.get(N.competency_id)||{sum:0,count:0};S.sum+=N.rating||0,S.count+=1,_.set(N.competency_id,S)});const j=(v||[]).map(N=>{const S=_.get(N.id)||{sum:0,count:0};return{competency_id:N.id,competency_name:N.name,category:N.category,average_rating:S.count>0?Number((S.sum/S.count).toFixed(2)):0,total_ratings:S.count}});t(j)}catch(v){h({title:"Error fetching competency scores",description:v.message,variant:"destructive"})}},[h]),g=x.useCallback(async()=>{try{const{data:v,error:b}=await M.from("performance_reviews").select("status, review_type, overall_rating, employee_department, created_at, completed_at");if(b)throw b;const y=new Map,w=new Map,_=new Map;v==null||v.forEach(S=>{if(y.set(S.status,(y.get(S.status)||0)+1),w.set(S.review_type,(w.get(S.review_type)||0)+1),S.employee_department&&S.overall_rating){const k=_.get(S.employee_department)||{sum:0,count:0};k.sum+=S.overall_rating,k.count+=1,_.set(S.employee_department,k)}}),n(Array.from(y.entries()).map(([S,k])=>({status:S,count:k}))),i(Array.from(w.entries()).map(([S,k])=>({review_type:S,count:k}))),u(Array.from(_.entries()).map(([S,k])=>({department:S,average_rating:Number((k.sum/k.count).toFixed(2)),review_count:k.count})));const j=new Date,N=[];for(let S=5;S>=0;S--){const k=new Date(j.getFullYear(),j.getMonth()-S,1),C=k.toLocaleDateString("en-AU",{month:"short",year:"2-digit"}),P=(v==null?void 0:v.filter(A=>{const E=new Date(A.created_at);return E.getMonth()===k.getMonth()&&E.getFullYear()===k.getFullYear()}))||[];N.push({month:C,completed:P.filter(A=>A.status==="completed").length,in_progress:P.filter(A=>A.status==="in_progress").length,pending:P.filter(A=>A.status==="pending_approval"||A.status==="draft").length})}l(N)}catch(v){h({title:"Error fetching review statistics",description:v.message,variant:"destructive"})}},[h]),p=x.useCallback(async()=>{f(!0),await Promise.all([m(),g()]),f(!1)},[m,g]);return x.useEffect(()=>{p()},[p]),{competencyScores:e,reviewStatusCounts:r,reviewTypeCounts:a,monthlyTrends:o,departmentPerformance:c,loading:d,refetch:p}}var lhe=Array.isArray,Ts=lhe,che=typeof vv=="object"&&vv&&vv.Object===Object&&vv,sz=che,uhe=sz,dhe=typeof self=="object"&&self&&self.Object===Object&&self,fhe=uhe||dhe||Function("return this")(),qi=fhe,hhe=qi,mhe=hhe.Symbol,av=mhe,AT=av,az=Object.prototype,phe=az.hasOwnProperty,ghe=az.toString,dm=AT?AT.toStringTag:void 0;function vhe(e){var t=phe.call(e,dm),r=e[dm];try{e[dm]=void 0;var n=!0}catch{}var a=ghe.call(e);return n&&(t?e[dm]=r:delete e[dm]),a}var yhe=vhe,xhe=Object.prototype,bhe=xhe.toString;function whe(e){return bhe.call(e)}var jhe=whe,OT=av,_he=yhe,Nhe=jhe,She="[object Null]",Che="[object Undefined]",TT=OT?OT.toStringTag:void 0;function khe(e){return e==null?e===void 0?Che:She:TT&&TT in Object(e)?_he(e):Nhe(e)}var Ro=khe;function Ehe(e){return e!=null&&typeof e=="object"}var Mo=Ehe,Phe=Ro,Ahe=Mo,Ohe="[object Symbol]";function The(e){return typeof e=="symbol"||Ahe(e)&&Phe(e)==Ohe}var Ch=The,Dhe=Ts,Rhe=Ch,Mhe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$he=/^\w*$/;function Ihe(e,t){if(Dhe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Rhe(e)?!0:$he.test(e)||!Mhe.test(e)||t!=null&&e in Object(t)}var IE=Ihe;function Lhe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Zl=Lhe;const kh=Kt(Zl);var Fhe=Ro,Uhe=Zl,Bhe="[object AsyncFunction]",zhe="[object Function]",Vhe="[object GeneratorFunction]",qhe="[object Proxy]";function Whe(e){if(!Uhe(e))return!1;var t=Fhe(e);return t==zhe||t==Vhe||t==Bhe||t==qhe}var LE=Whe;const Ye=Kt(LE);var Hhe=qi,Khe=Hhe["__core-js_shared__"],Ghe=Khe,o_=Ghe,DT=function(){var e=/[^.]+$/.exec(o_&&o_.keys&&o_.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Yhe(e){return!!DT&&DT in e}var Xhe=Yhe,Qhe=Function.prototype,Zhe=Qhe.toString;function Jhe(e){if(e!=null){try{return Zhe.call(e)}catch{}try{return e+""}catch{}}return""}var iz=Jhe,eme=LE,tme=Xhe,rme=Zl,nme=iz,sme=/[\\^$.*+?()[\]{}|]/g,ame=/^\[object .+?Constructor\]$/,ime=Function.prototype,ome=Object.prototype,lme=ime.toString,cme=ome.hasOwnProperty,ume=RegExp("^"+lme.call(cme).replace(sme,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dme(e){if(!rme(e)||tme(e))return!1;var t=eme(e)?ume:ame;return t.test(nme(e))}var fme=dme;function hme(e,t){return e==null?void 0:e[t]}var mme=hme,pme=fme,gme=mme;function vme(e,t){var r=gme(e,t);return pme(r)?r:void 0}var Vu=vme,yme=Vu,xme=yme(Object,"create"),aw=xme,RT=aw;function bme(){this.__data__=RT?RT(null):{},this.size=0}var wme=bme;function jme(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _me=jme,Nme=aw,Sme="__lodash_hash_undefined__",Cme=Object.prototype,kme=Cme.hasOwnProperty;function Eme(e){var t=this.__data__;if(Nme){var r=t[e];return r===Sme?void 0:r}return kme.call(t,e)?t[e]:void 0}var Pme=Eme,Ame=aw,Ome=Object.prototype,Tme=Ome.hasOwnProperty;function Dme(e){var t=this.__data__;return Ame?t[e]!==void 0:Tme.call(t,e)}var Rme=Dme,Mme=aw,$me="__lodash_hash_undefined__";function Ime(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Mme&&t===void 0?$me:t,this}var Lme=Ime,Fme=wme,Ume=_me,Bme=Pme,zme=Rme,Vme=Lme;function Eh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Eh.prototype.clear=Fme;Eh.prototype.delete=Ume;Eh.prototype.get=Bme;Eh.prototype.has=zme;Eh.prototype.set=Vme;var qme=Eh;function Wme(){this.__data__=[],this.size=0}var Hme=Wme;function Kme(e,t){return e===t||e!==e&&t!==t}var FE=Kme,Gme=FE;function Yme(e,t){for(var r=e.length;r--;)if(Gme(e[r][0],t))return r;return-1}var iw=Yme,Xme=iw,Qme=Array.prototype,Zme=Qme.splice;function Jme(e){var t=this.__data__,r=Xme(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Zme.call(t,r,1),--this.size,!0}var epe=Jme,tpe=iw;function rpe(e){var t=this.__data__,r=tpe(t,e);return r<0?void 0:t[r][1]}var npe=rpe,spe=iw;function ape(e){return spe(this.__data__,e)>-1}var ipe=ape,ope=iw;function lpe(e,t){var r=this.__data__,n=ope(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var cpe=lpe,upe=Hme,dpe=epe,fpe=npe,hpe=ipe,mpe=cpe;function Ph(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ph.prototype.clear=upe;Ph.prototype.delete=dpe;Ph.prototype.get=fpe;Ph.prototype.has=hpe;Ph.prototype.set=mpe;var ow=Ph,ppe=Vu,gpe=qi,vpe=ppe(gpe,"Map"),UE=vpe,MT=qme,ype=ow,xpe=UE;function bpe(){this.size=0,this.__data__={hash:new MT,map:new(xpe||ype),string:new MT}}var wpe=bpe;function jpe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var _pe=jpe,Npe=_pe;function Spe(e,t){var r=e.__data__;return Npe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var lw=Spe,Cpe=lw;function kpe(e){var t=Cpe(this,e).delete(e);return this.size-=t?1:0,t}var Epe=kpe,Ppe=lw;function Ape(e){return Ppe(this,e).get(e)}var Ope=Ape,Tpe=lw;function Dpe(e){return Tpe(this,e).has(e)}var Rpe=Dpe,Mpe=lw;function $pe(e,t){var r=Mpe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Ipe=$pe,Lpe=wpe,Fpe=Epe,Upe=Ope,Bpe=Rpe,zpe=Ipe;function Ah(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ah.prototype.clear=Lpe;Ah.prototype.delete=Fpe;Ah.prototype.get=Upe;Ah.prototype.has=Bpe;Ah.prototype.set=zpe;var BE=Ah,oz=BE,Vpe="Expected a function";function zE(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Vpe);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(zE.Cache||oz),r}zE.Cache=oz;var lz=zE;const qpe=Kt(lz);var Wpe=lz,Hpe=500;function Kpe(e){var t=Wpe(e,function(n){return r.size===Hpe&&r.clear(),n}),r=t.cache;return t}var Gpe=Kpe,Ype=Gpe,Xpe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qpe=/\\(\\)?/g,Zpe=Ype(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Xpe,function(r,n,a,i){t.push(a?i.replace(Qpe,"$1"):n||r)}),t}),Jpe=Zpe;function ege(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var VE=ege,$T=av,tge=VE,rge=Ts,nge=Ch,sge=1/0,IT=$T?$T.prototype:void 0,LT=IT?IT.toString:void 0;function cz(e){if(typeof e=="string")return e;if(rge(e))return tge(e,cz)+"";if(nge(e))return LT?LT.call(e):"";var t=e+"";return t=="0"&&1/e==-sge?"-0":t}var age=cz,ige=age;function oge(e){return e==null?"":ige(e)}var uz=oge,lge=Ts,cge=IE,uge=Jpe,dge=uz;function fge(e,t){return lge(e)?e:cge(e,t)?[e]:uge(dge(e))}var dz=fge,hge=Ch,mge=1/0;function pge(e){if(typeof e=="string"||hge(e))return e;var t=e+"";return t=="0"&&1/e==-mge?"-0":t}var cw=pge,gge=dz,vge=cw;function yge(e,t){t=gge(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[vge(t[r++])];return r&&r==n?e:void 0}var qE=yge,xge=qE;function bge(e,t,r){var n=e==null?void 0:xge(e,t);return n===void 0?r:n}var fz=bge;const Gs=Kt(fz);function wge(e){return e==null}var jge=wge;const it=Kt(jge);var _ge=Ro,Nge=Ts,Sge=Mo,Cge="[object String]";function kge(e){return typeof e=="string"||!Nge(e)&&Sge(e)&&_ge(e)==Cge}var Ege=kge;const Cu=Kt(Ege);var hz={exports:{}},er={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE=Symbol.for("react.element"),HE=Symbol.for("react.portal"),uw=Symbol.for("react.fragment"),dw=Symbol.for("react.strict_mode"),fw=Symbol.for("react.profiler"),hw=Symbol.for("react.provider"),mw=Symbol.for("react.context"),Pge=Symbol.for("react.server_context"),pw=Symbol.for("react.forward_ref"),gw=Symbol.for("react.suspense"),vw=Symbol.for("react.suspense_list"),yw=Symbol.for("react.memo"),xw=Symbol.for("react.lazy"),Age=Symbol.for("react.offscreen"),mz;mz=Symbol.for("react.module.reference");function Na(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case WE:switch(e=e.type,e){case uw:case fw:case dw:case gw:case vw:return e;default:switch(e=e&&e.$$typeof,e){case Pge:case mw:case pw:case xw:case yw:case hw:return e;default:return t}}case HE:return t}}}er.ContextConsumer=mw;er.ContextProvider=hw;er.Element=WE;er.ForwardRef=pw;er.Fragment=uw;er.Lazy=xw;er.Memo=yw;er.Portal=HE;er.Profiler=fw;er.StrictMode=dw;er.Suspense=gw;er.SuspenseList=vw;er.isAsyncMode=function(){return!1};er.isConcurrentMode=function(){return!1};er.isContextConsumer=function(e){return Na(e)===mw};er.isContextProvider=function(e){return Na(e)===hw};er.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===WE};er.isForwardRef=function(e){return Na(e)===pw};er.isFragment=function(e){return Na(e)===uw};er.isLazy=function(e){return Na(e)===xw};er.isMemo=function(e){return Na(e)===yw};er.isPortal=function(e){return Na(e)===HE};er.isProfiler=function(e){return Na(e)===fw};er.isStrictMode=function(e){return Na(e)===dw};er.isSuspense=function(e){return Na(e)===gw};er.isSuspenseList=function(e){return Na(e)===vw};er.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===uw||e===fw||e===dw||e===gw||e===vw||e===Age||typeof e=="object"&&e!==null&&(e.$$typeof===xw||e.$$typeof===yw||e.$$typeof===hw||e.$$typeof===mw||e.$$typeof===pw||e.$$typeof===mz||e.getModuleId!==void 0)};er.typeOf=Na;hz.exports=er;var Oge=hz.exports,Tge=Ro,Dge=Mo,Rge="[object Number]";function Mge(e){return typeof e=="number"||Dge(e)&&Tge(e)==Rge}var pz=Mge;const $ge=Kt(pz);var Ige=pz;function Lge(e){return Ige(e)&&e!=+e}var Fge=Lge;const iv=Kt(Fge);var Jn=function(t){return t===0?0:t>0?1:-1},$c=function(t){return Cu(t)&&t.indexOf("%")===t.length-1},xe=function(t){return $ge(t)&&!iv(t)},Uge=function(t){return it(t)},fn=function(t){return xe(t)||Cu(t)},Bge=0,Oh=function(t){var r=++Bge;return"".concat(t||"").concat(r)},es=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xe(t)&&!Cu(t))return n;var i;if($c(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return iv(i)&&(i=n),a&&i>r&&(i=r),i},Jo=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},zge=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},Pn=function(t,r){return xe(t)&&xe(r)?function(n){return t+n*(r-t)}:function(){return r}};function qx(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Gs(n,t))===r})}var Vge=function(t,r){return xe(t)&&xe(r)?t-r:Cu(t)&&Cu(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Xd(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function R1(e){"@babel/helpers - typeof";return R1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R1(e)}var qge=["viewBox","children"],Wge=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],FT=["points","pathLength"],l_={svg:qge,polygon:FT,polyline:FT},KE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Wx=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(x.isValidElement(t)&&(n=t.props),!kh(n))return null;var a={};return Object.keys(n).forEach(function(i){KE.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},Hge=function(t,r,n){return function(a){return t(r,n,a),null}},ku=function(t,r,n){if(!kh(t)||R1(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];KE.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Hge(o,r,n))}),a},Kge=["children"],Gge=["children"];function UT(e,t){if(e==null)return{};var r=Yge(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function M1(e){"@babel/helpers - typeof";return M1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M1(e)}var BT={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ho=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},zT=null,c_=null,GE=function e(t){if(t===zT&&Array.isArray(c_))return c_;var r=[];return x.Children.forEach(t,function(n){it(n)||(Oge.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),c_=r,zT=t,r};function Ys(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return ho(a)}):n=[ho(t)],GE(e).forEach(function(a){var i=Gs(a,"type.displayName")||Gs(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Fs(e,t){var r=Ys(e,t);return r&&r[0]}var VT=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!xe(n)||n<=0||!xe(a)||a<=0)},Xge=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Qge=function(t){return t&&t.type&&Cu(t.type)&&Xge.indexOf(t.type)>=0},Zge=function(t){return t&&M1(t)==="object"&&"clipDot"in t},Jge=function(t,r,n,a){var i,o=(i=l_==null?void 0:l_[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Ye(t)&&(a&&o.includes(r)||Wge.includes(r))||n&&KE.includes(r)},Ve=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(x.isValidElement(t)&&(a=t.props),!kh(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;Jge((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},$1=function e(t,r){if(t===r)return!0;var n=x.Children.count(t);if(n!==x.Children.count(r))return!1;if(n===0)return!0;if(n===1)return qT(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!qT(i,o))return!1}return!0},qT=function(t,r){if(it(t)&&it(r))return!0;if(!it(t)&&!it(r)){var n=t.props||{},a=n.children,i=UT(n,Kge),o=r.props||{},l=o.children,c=UT(o,Gge);return a&&l?Xd(i,c)&&$1(a,l):!a&&!l?Xd(i,c):!1}return!1},WT=function(t,r){var n=[],a={};return GE(t).forEach(function(i,o){if(Qge(i))n.push(i);else if(i){var l=ho(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,o);n.push(f),a[l]=!0}}}),n},eve=function(t){var r=t&&t.type;return r&&BT[r]?BT[r]:null},tve=function(t,r){return GE(r).indexOf(t)},rve=["children","width","height","viewBox","className","style","title","desc"];function I1(){return I1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I1.apply(this,arguments)}function nve(e,t){if(e==null)return{};var r=sve(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sve(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function L1(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=nve(e,rve),d=a||{width:r,height:n,x:0,y:0},f=at("recharts-surface",i);return O.createElement("svg",I1({},Ve(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),O.createElement("title",null,l),O.createElement("desc",null,c),t)}var ave=["children","className"];function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F1.apply(this,arguments)}function ive(e,t){if(e==null)return{};var r=ove(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ove(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var At=O.forwardRef(function(e,t){var r=e.children,n=e.className,a=ive(e,ave),i=at("recharts-layer",n);return O.createElement("g",F1({className:i},Ve(a,!0),{ref:t}),r)}),Ka=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function lve(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var cve=lve,uve=cve;function dve(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:uve(e,t,r)}var fve=dve,hve="\\ud800-\\udfff",mve="\\u0300-\\u036f",pve="\\ufe20-\\ufe2f",gve="\\u20d0-\\u20ff",vve=mve+pve+gve,yve="\\ufe0e\\ufe0f",xve="\\u200d",bve=RegExp("["+xve+hve+vve+yve+"]");function wve(e){return bve.test(e)}var gz=wve;function jve(e){return e.split("")}var _ve=jve,vz="\\ud800-\\udfff",Nve="\\u0300-\\u036f",Sve="\\ufe20-\\ufe2f",Cve="\\u20d0-\\u20ff",kve=Nve+Sve+Cve,Eve="\\ufe0e\\ufe0f",Pve="["+vz+"]",U1="["+kve+"]",B1="\\ud83c[\\udffb-\\udfff]",Ave="(?:"+U1+"|"+B1+")",yz="[^"+vz+"]",xz="(?:\\ud83c[\\udde6-\\uddff]){2}",bz="[\\ud800-\\udbff][\\udc00-\\udfff]",Ove="\\u200d",wz=Ave+"?",jz="["+Eve+"]?",Tve="(?:"+Ove+"(?:"+[yz,xz,bz].join("|")+")"+jz+wz+")*",Dve=jz+wz+Tve,Rve="(?:"+[yz+U1+"?",U1,xz,bz,Pve].join("|")+")",Mve=RegExp(B1+"(?="+B1+")|"+Rve+Dve,"g");function $ve(e){return e.match(Mve)||[]}var Ive=$ve,Lve=_ve,Fve=gz,Uve=Ive;function Bve(e){return Fve(e)?Uve(e):Lve(e)}var zve=Bve,Vve=fve,qve=gz,Wve=zve,Hve=uz;function Kve(e){return function(t){t=Hve(t);var r=qve(t)?Wve(t):void 0,n=r?r[0]:t.charAt(0),a=r?Vve(r,1).join(""):t.slice(1);return n[e]()+a}}var Gve=Kve,Yve=Gve,Xve=Yve("toUpperCase"),Qve=Xve;const bw=Kt(Qve);function ur(e){return function(){return e}}const _z=Math.cos,Hx=Math.sin,ui=Math.sqrt,Kx=Math.PI,ww=2*Kx,z1=Math.PI,V1=2*z1,gc=1e-6,Zve=V1-gc;function Nz(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Jve(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Nz;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class eye{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Nz:Jve(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>gc)if(!(Math.abs(f*c-u*d)>gc)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=a-l,p=c*c+u*u,v=m*m+g*g,b=Math.sqrt(p),y=Math.sqrt(h),w=i*Math.tan((z1-Math.acos((p+h-v)/(2*b*y)))/2),_=w/y,j=w/b;Math.abs(_-1)>gc&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>gc||Math.abs(this._y1-d)>gc)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%V1+V1),h>Zve?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>gc&&this._append`A${n},${n},0,${+(h>=z1)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function YE(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new eye(t)}function XE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Sz(e){this._context=e}Sz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function jw(e){return new Sz(e)}function Cz(e){return e[0]}function kz(e){return e[1]}function Ez(e,t){var r=ur(!0),n=null,a=jw,i=null,o=YE(l);e=typeof e=="function"?e:e===void 0?Cz:ur(e),t=typeof t=="function"?t:t===void 0?kz:ur(t);function l(c){var u,d=(c=XE(c)).length,f,h=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ur(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ur(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ur(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function ey(e,t,r){var n=null,a=ur(!0),i=null,o=jw,l=null,c=YE(u);e=typeof e=="function"?e:e===void 0?Cz:ur(+e),t=typeof t=="function"?t:ur(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?kz:ur(+r);function u(f){var h,m,g,p=(f=XE(f)).length,v,b=!1,y,w=new Array(p),_=new Array(p);for(i==null&&(l=o(y=c())),h=0;h<=p;++h){if(!(h<p&&a(v=f[h],h,f))===b)if(b=!b)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(w[g],_[g]);l.lineEnd(),l.areaEnd()}b&&(w[h]=+e(v,h,f),_[h]=+t(v,h,f),l.point(n?+n(v,h,f):w[h],r?+r(v,h,f):_[h]))}if(y)return l=null,y+""||null}function d(){return Ez().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ur(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ur(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ur(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:ur(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ur(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ur(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:ur(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class Pz{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function tye(e){return new Pz(e,!0)}function rye(e){return new Pz(e,!1)}const QE={draw(e,t){const r=ui(t/Kx);e.moveTo(r,0),e.arc(0,0,r,0,ww)}},nye={draw(e,t){const r=ui(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Az=ui(1/3),sye=Az*2,aye={draw(e,t){const r=ui(t/sye),n=r*Az;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},iye={draw(e,t){const r=ui(t),n=-r/2;e.rect(n,n,r,r)}},oye=.8908130915292852,Oz=Hx(Kx/10)/Hx(7*Kx/10),lye=Hx(ww/10)*Oz,cye=-_z(ww/10)*Oz,uye={draw(e,t){const r=ui(t*oye),n=lye*r,a=cye*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=ww*i/5,l=_z(o),c=Hx(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},u_=ui(3),dye={draw(e,t){const r=-ui(t/(u_*3));e.moveTo(0,r*2),e.lineTo(-u_*r,-r),e.lineTo(u_*r,-r),e.closePath()}},aa=-.5,ia=ui(3)/2,q1=1/ui(12),fye=(q1/2+1)*3,hye={draw(e,t){const r=ui(t/fye),n=r/2,a=r*q1,i=n,o=r*q1+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(aa*n-ia*a,ia*n+aa*a),e.lineTo(aa*i-ia*o,ia*i+aa*o),e.lineTo(aa*l-ia*c,ia*l+aa*c),e.lineTo(aa*n+ia*a,aa*a-ia*n),e.lineTo(aa*i+ia*o,aa*o-ia*i),e.lineTo(aa*l+ia*c,aa*c-ia*l),e.closePath()}};function mye(e,t){let r=null,n=YE(a);e=typeof e=="function"?e:ur(e||QE),t=typeof t=="function"?t:ur(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:ur(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:ur(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Gx(){}function Yx(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Tz(e){this._context=e}Tz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pye(e){return new Tz(e)}function Dz(e){this._context=e}Dz.prototype={areaStart:Gx,areaEnd:Gx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Yx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gye(e){return new Dz(e)}function Rz(e){this._context=e}Rz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Yx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vye(e){return new Rz(e)}function Mz(e){this._context=e}Mz.prototype={areaStart:Gx,areaEnd:Gx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function yye(e){return new Mz(e)}function HT(e){return e<0?-1:1}function KT(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(HT(i)+HT(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function GT(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function d_(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function Xx(e){this._context=e}Xx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:d_(this,this._t0,GT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,d_(this,GT(this,r=KT(this,e,t)),r);break;default:d_(this,this._t0,r=KT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function $z(e){this._context=new Iz(e)}($z.prototype=Object.create(Xx.prototype)).point=function(e,t){Xx.prototype.point.call(this,t,e)};function Iz(e){this._context=e}Iz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function xye(e){return new Xx(e)}function bye(e){return new $z(e)}function Lz(e){this._context=e}Lz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=YT(e),a=YT(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function YT(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function wye(e){return new Lz(e)}function _w(e,t){this._context=e,this._t=t}_w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function jye(e){return new _w(e,.5)}function _ye(e){return new _w(e,0)}function Nye(e){return new _w(e,1)}function Rf(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function W1(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Sye(e,t){return e[t]}function Cye(e){const t=[];return t.key=e,t}function kye(){var e=ur([]),t=W1,r=Rf,n=Sye;function a(i){var o=Array.from(e.apply(this,arguments),Cye),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=XE(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ur(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:ur(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?W1:typeof i=="function"?i:ur(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Rf,a):r},a}function Eye(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Rf(e,t)}}function Pye(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Rf(e,t)}}function Aye(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var p=e[t[g]],v=p[n][1]||0,b=p[n-1][1]||0;m+=v-b}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Rf(e,t)}}function zp(e){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(e)}var Oye=["type","size","sizeType"];function H1(){return H1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H1.apply(this,arguments)}function XT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XT(Object(r),!0).forEach(function(n){Tye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tye(e,t,r){return t=Dye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dye(e){var t=Rye(e,"string");return zp(t)=="symbol"?t:t+""}function Rye(e,t){if(zp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mye(e,t){if(e==null)return{};var r=$ye(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $ye(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Fz={symbolCircle:QE,symbolCross:nye,symbolDiamond:aye,symbolSquare:iye,symbolStar:uye,symbolTriangle:dye,symbolWye:hye},Iye=Math.PI/180,Lye=function(t){var r="symbol".concat(bw(t));return Fz[r]||QE},Fye=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Iye;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Uye=function(t,r){Fz["symbol".concat(bw(t))]=r},ZE=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=Mye(t,Oye),u=QT(QT({},c),{},{type:n,size:i,sizeType:l}),d=function(){var v=Lye(n),b=mye().type(v).size(Fye(i,l,n));return b()},f=u.className,h=u.cx,m=u.cy,g=Ve(u,!0);return h===+h&&m===+m&&i===+i?O.createElement("path",H1({},g,{className:at("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};ZE.registerSymbol=Uye;function Mf(e){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}function K1(){return K1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K1.apply(this,arguments)}function ZT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(r),!0).forEach(function(n){Vp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bz(n.key),n)}}function qye(e,t,r){return t&&Vye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wye(e,t,r){return t=Qx(t),Hye(e,Uz()?Reflect.construct(t,r||[],Qx(e).constructor):t.apply(e,r))}function Hye(e,t){if(t&&(Mf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kye(e)}function Kye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uz=function(){return!!e})()}function Qx(e){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qx(e)}function Gye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G1(e,t)}function G1(e,t){return G1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},G1(e,t)}function Vp(e,t,r){return t=Bz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bz(e){var t=Yye(e,"string");return Mf(t)=="symbol"?t:t+""}function Yye(e,t){if(Mf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oa=32,JE=function(e){function t(){return zye(this,t),Wye(this,t,arguments)}return Gye(t,e),qye(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=oa/2,o=oa/6,l=oa/3,c=n.inactive?a:n.color;if(n.type==="plainline")return O.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:oa,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return O.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(oa,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return O.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(oa/8,"h").concat(oa,"v").concat(oa*3/4,"h").concat(-oa,"z"),className:"recharts-legend-icon"});if(O.isValidElement(n.legendIcon)){var u=Bye({},n);return delete u.legendIcon,O.cloneElement(n.legendIcon,u)}return O.createElement(ZE,{fill:c,cx:i,cy:i,size:oa,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:oa,height:oa},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,g){var p=m.formatter||c,v=at(Vp(Vp({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var b=Ye(m.value)?null:m.value;Ka(!Ye(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?u:m.color;return O.createElement("li",K1({className:v,style:f,key:"legend-item-".concat(g)},ku(n.props,m,g)),O.createElement(L1,{width:o,height:o,viewBox:d,style:h},n.renderIcon(m)),O.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},p?p(b,m,g):b))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return O.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(x.PureComponent);Vp(JE,"displayName","Legend");Vp(JE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Xye=ow;function Qye(){this.__data__=new Xye,this.size=0}var Zye=Qye;function Jye(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var exe=Jye;function txe(e){return this.__data__.get(e)}var rxe=txe;function nxe(e){return this.__data__.has(e)}var sxe=nxe,axe=ow,ixe=UE,oxe=BE,lxe=200;function cxe(e,t){var r=this.__data__;if(r instanceof axe){var n=r.__data__;if(!ixe||n.length<lxe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new oxe(n)}return r.set(e,t),this.size=r.size,this}var uxe=cxe,dxe=ow,fxe=Zye,hxe=exe,mxe=rxe,pxe=sxe,gxe=uxe;function Th(e){var t=this.__data__=new dxe(e);this.size=t.size}Th.prototype.clear=fxe;Th.prototype.delete=hxe;Th.prototype.get=mxe;Th.prototype.has=pxe;Th.prototype.set=gxe;var zz=Th,vxe="__lodash_hash_undefined__";function yxe(e){return this.__data__.set(e,vxe),this}var xxe=yxe;function bxe(e){return this.__data__.has(e)}var wxe=bxe,jxe=BE,_xe=xxe,Nxe=wxe;function Zx(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new jxe;++t<r;)this.add(e[t])}Zx.prototype.add=Zx.prototype.push=_xe;Zx.prototype.has=Nxe;var Vz=Zx;function Sxe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var qz=Sxe;function Cxe(e,t){return e.has(t)}var Wz=Cxe,kxe=Vz,Exe=qz,Pxe=Wz,Axe=1,Oxe=2;function Txe(e,t,r,n,a,i){var o=r&Axe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,m=r&Oxe?new kxe:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var g=e[f],p=t[f];if(n)var v=o?n(p,g,f,t,e,i):n(g,p,f,e,t,i);if(v!==void 0){if(v)continue;h=!1;break}if(m){if(!Exe(t,function(b,y){if(!Pxe(m,y)&&(g===b||a(g,b,r,n,i)))return m.push(y)})){h=!1;break}}else if(!(g===p||a(g,p,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var Hz=Txe,Dxe=qi,Rxe=Dxe.Uint8Array,Mxe=Rxe;function $xe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var Ixe=$xe;function Lxe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var eP=Lxe,JT=av,eD=Mxe,Fxe=FE,Uxe=Hz,Bxe=Ixe,zxe=eP,Vxe=1,qxe=2,Wxe="[object Boolean]",Hxe="[object Date]",Kxe="[object Error]",Gxe="[object Map]",Yxe="[object Number]",Xxe="[object RegExp]",Qxe="[object Set]",Zxe="[object String]",Jxe="[object Symbol]",ebe="[object ArrayBuffer]",tbe="[object DataView]",tD=JT?JT.prototype:void 0,f_=tD?tD.valueOf:void 0;function rbe(e,t,r,n,a,i,o){switch(r){case tbe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ebe:return!(e.byteLength!=t.byteLength||!i(new eD(e),new eD(t)));case Wxe:case Hxe:case Yxe:return Fxe(+e,+t);case Kxe:return e.name==t.name&&e.message==t.message;case Xxe:case Zxe:return e==t+"";case Gxe:var l=Bxe;case Qxe:var c=n&Vxe;if(l||(l=zxe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=qxe,o.set(e,t);var d=Uxe(l(e),l(t),n,a,i,o);return o.delete(e),d;case Jxe:if(f_)return f_.call(e)==f_.call(t)}return!1}var nbe=rbe;function sbe(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var Kz=sbe,abe=Kz,ibe=Ts;function obe(e,t,r){var n=t(e);return ibe(e)?n:abe(n,r(e))}var lbe=obe;function cbe(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var ube=cbe;function dbe(){return[]}var fbe=dbe,hbe=ube,mbe=fbe,pbe=Object.prototype,gbe=pbe.propertyIsEnumerable,rD=Object.getOwnPropertySymbols,vbe=rD?function(e){return e==null?[]:(e=Object(e),hbe(rD(e),function(t){return gbe.call(e,t)}))}:mbe,ybe=vbe;function xbe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var bbe=xbe,wbe=Ro,jbe=Mo,_be="[object Arguments]";function Nbe(e){return jbe(e)&&wbe(e)==_be}var Sbe=Nbe,nD=Sbe,Cbe=Mo,Gz=Object.prototype,kbe=Gz.hasOwnProperty,Ebe=Gz.propertyIsEnumerable,Pbe=nD(function(){return arguments}())?nD:function(e){return Cbe(e)&&kbe.call(e,"callee")&&!Ebe.call(e,"callee")},tP=Pbe,Jx={exports:{}};function Abe(){return!1}var Obe=Abe;Jx.exports;(function(e,t){var r=qi,n=Obe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Jx,Jx.exports);var Yz=Jx.exports,Tbe=9007199254740991,Dbe=/^(?:0|[1-9]\d*)$/;function Rbe(e,t){var r=typeof e;return t=t??Tbe,!!t&&(r=="number"||r!="symbol"&&Dbe.test(e))&&e>-1&&e%1==0&&e<t}var rP=Rbe,Mbe=9007199254740991;function $be(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Mbe}var nP=$be,Ibe=Ro,Lbe=nP,Fbe=Mo,Ube="[object Arguments]",Bbe="[object Array]",zbe="[object Boolean]",Vbe="[object Date]",qbe="[object Error]",Wbe="[object Function]",Hbe="[object Map]",Kbe="[object Number]",Gbe="[object Object]",Ybe="[object RegExp]",Xbe="[object Set]",Qbe="[object String]",Zbe="[object WeakMap]",Jbe="[object ArrayBuffer]",e0e="[object DataView]",t0e="[object Float32Array]",r0e="[object Float64Array]",n0e="[object Int8Array]",s0e="[object Int16Array]",a0e="[object Int32Array]",i0e="[object Uint8Array]",o0e="[object Uint8ClampedArray]",l0e="[object Uint16Array]",c0e="[object Uint32Array]",vr={};vr[t0e]=vr[r0e]=vr[n0e]=vr[s0e]=vr[a0e]=vr[i0e]=vr[o0e]=vr[l0e]=vr[c0e]=!0;vr[Ube]=vr[Bbe]=vr[Jbe]=vr[zbe]=vr[e0e]=vr[Vbe]=vr[qbe]=vr[Wbe]=vr[Hbe]=vr[Kbe]=vr[Gbe]=vr[Ybe]=vr[Xbe]=vr[Qbe]=vr[Zbe]=!1;function u0e(e){return Fbe(e)&&Lbe(e.length)&&!!vr[Ibe(e)]}var d0e=u0e;function f0e(e){return function(t){return e(t)}}var Xz=f0e,eb={exports:{}};eb.exports;(function(e,t){var r=sz,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(eb,eb.exports);var h0e=eb.exports,m0e=d0e,p0e=Xz,sD=h0e,aD=sD&&sD.isTypedArray,g0e=aD?p0e(aD):m0e,Qz=g0e,v0e=bbe,y0e=tP,x0e=Ts,b0e=Yz,w0e=rP,j0e=Qz,_0e=Object.prototype,N0e=_0e.hasOwnProperty;function S0e(e,t){var r=x0e(e),n=!r&&y0e(e),a=!r&&!n&&b0e(e),i=!r&&!n&&!a&&j0e(e),o=r||n||a||i,l=o?v0e(e.length,String):[],c=l.length;for(var u in e)(t||N0e.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||w0e(u,c)))&&l.push(u);return l}var C0e=S0e,k0e=Object.prototype;function E0e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||k0e;return e===r}var P0e=E0e;function A0e(e,t){return function(r){return e(t(r))}}var Zz=A0e,O0e=Zz,T0e=O0e(Object.keys,Object),D0e=T0e,R0e=P0e,M0e=D0e,$0e=Object.prototype,I0e=$0e.hasOwnProperty;function L0e(e){if(!R0e(e))return M0e(e);var t=[];for(var r in Object(e))I0e.call(e,r)&&r!="constructor"&&t.push(r);return t}var F0e=L0e,U0e=LE,B0e=nP;function z0e(e){return e!=null&&B0e(e.length)&&!U0e(e)}var ov=z0e,V0e=C0e,q0e=F0e,W0e=ov;function H0e(e){return W0e(e)?V0e(e):q0e(e)}var Nw=H0e,K0e=lbe,G0e=ybe,Y0e=Nw;function X0e(e){return K0e(e,Y0e,G0e)}var Q0e=X0e,iD=Q0e,Z0e=1,J0e=Object.prototype,ewe=J0e.hasOwnProperty;function twe(e,t,r,n,a,i){var o=r&Z0e,l=iD(e),c=l.length,u=iD(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:ewe.call(t,h)))return!1}var m=i.get(e),g=i.get(t);if(m&&g)return m==t&&g==e;var p=!0;i.set(e,t),i.set(t,e);for(var v=o;++f<c;){h=l[f];var b=e[h],y=t[h];if(n)var w=o?n(y,b,h,t,e,i):n(b,y,h,e,t,i);if(!(w===void 0?b===y||a(b,y,r,n,i):w)){p=!1;break}v||(v=h=="constructor")}if(p&&!v){var _=e.constructor,j=t.constructor;_!=j&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof j=="function"&&j instanceof j)&&(p=!1)}return i.delete(e),i.delete(t),p}var rwe=twe,nwe=Vu,swe=qi,awe=nwe(swe,"DataView"),iwe=awe,owe=Vu,lwe=qi,cwe=owe(lwe,"Promise"),uwe=cwe,dwe=Vu,fwe=qi,hwe=dwe(fwe,"Set"),Jz=hwe,mwe=Vu,pwe=qi,gwe=mwe(pwe,"WeakMap"),vwe=gwe,Y1=iwe,X1=UE,Q1=uwe,Z1=Jz,J1=vwe,eV=Ro,Dh=iz,oD="[object Map]",ywe="[object Object]",lD="[object Promise]",cD="[object Set]",uD="[object WeakMap]",dD="[object DataView]",xwe=Dh(Y1),bwe=Dh(X1),wwe=Dh(Q1),jwe=Dh(Z1),_we=Dh(J1),vc=eV;(Y1&&vc(new Y1(new ArrayBuffer(1)))!=dD||X1&&vc(new X1)!=oD||Q1&&vc(Q1.resolve())!=lD||Z1&&vc(new Z1)!=cD||J1&&vc(new J1)!=uD)&&(vc=function(e){var t=eV(e),r=t==ywe?e.constructor:void 0,n=r?Dh(r):"";if(n)switch(n){case xwe:return dD;case bwe:return oD;case wwe:return lD;case jwe:return cD;case _we:return uD}return t});var Nwe=vc,h_=zz,Swe=Hz,Cwe=nbe,kwe=rwe,fD=Nwe,hD=Ts,mD=Yz,Ewe=Qz,Pwe=1,pD="[object Arguments]",gD="[object Array]",ty="[object Object]",Awe=Object.prototype,vD=Awe.hasOwnProperty;function Owe(e,t,r,n,a,i){var o=hD(e),l=hD(t),c=o?gD:fD(e),u=l?gD:fD(t);c=c==pD?ty:c,u=u==pD?ty:u;var d=c==ty,f=u==ty,h=c==u;if(h&&mD(e)){if(!mD(t))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new h_),o||Ewe(e)?Swe(e,t,r,n,a,i):Cwe(e,t,c,r,n,a,i);if(!(r&Pwe)){var m=d&&vD.call(e,"__wrapped__"),g=f&&vD.call(t,"__wrapped__");if(m||g){var p=m?e.value():e,v=g?t.value():t;return i||(i=new h_),a(p,v,r,n,i)}}return h?(i||(i=new h_),kwe(e,t,r,n,a,i)):!1}var Twe=Owe,Dwe=Twe,yD=Mo;function tV(e,t,r,n,a){return e===t?!0:e==null||t==null||!yD(e)&&!yD(t)?e!==e&&t!==t:Dwe(e,t,r,n,tV,a)}var sP=tV,Rwe=zz,Mwe=sP,$we=1,Iwe=2;function Lwe(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new Rwe;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?Mwe(d,u,$we|Iwe,n,f):h))return!1}}return!0}var Fwe=Lwe,Uwe=Zl;function Bwe(e){return e===e&&!Uwe(e)}var rV=Bwe,zwe=rV,Vwe=Nw;function qwe(e){for(var t=Vwe(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,zwe(a)]}return t}var Wwe=qwe;function Hwe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var nV=Hwe,Kwe=Fwe,Gwe=Wwe,Ywe=nV;function Xwe(e){var t=Gwe(e);return t.length==1&&t[0][2]?Ywe(t[0][0],t[0][1]):function(r){return r===e||Kwe(r,e,t)}}var Qwe=Xwe;function Zwe(e,t){return e!=null&&t in Object(e)}var Jwe=Zwe,eje=dz,tje=tP,rje=Ts,nje=rP,sje=nP,aje=cw;function ije(e,t,r){t=eje(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=aje(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&sje(a)&&nje(o,a)&&(rje(e)||tje(e)))}var oje=ije,lje=Jwe,cje=oje;function uje(e,t){return e!=null&&cje(e,t,lje)}var dje=uje,fje=sP,hje=fz,mje=dje,pje=IE,gje=rV,vje=nV,yje=cw,xje=1,bje=2;function wje(e,t){return pje(e)&&gje(t)?vje(yje(e),t):function(r){var n=hje(r,e);return n===void 0&&n===t?mje(r,e):fje(t,n,xje|bje)}}var jje=wje;function _je(e){return e}var Rh=_je;function Nje(e){return function(t){return t==null?void 0:t[e]}}var Sje=Nje,Cje=qE;function kje(e){return function(t){return Cje(t,e)}}var Eje=kje,Pje=Sje,Aje=Eje,Oje=IE,Tje=cw;function Dje(e){return Oje(e)?Pje(Tje(e)):Aje(e)}var Rje=Dje,Mje=Qwe,$je=jje,Ije=Rh,Lje=Ts,Fje=Rje;function Uje(e){return typeof e=="function"?e:e==null?Ije:typeof e=="object"?Lje(e)?$je(e[0],e[1]):Mje(e):Fje(e)}var Wi=Uje;function Bje(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var sV=Bje;function zje(e){return e!==e}var Vje=zje;function qje(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var Wje=qje,Hje=sV,Kje=Vje,Gje=Wje;function Yje(e,t,r){return t===t?Gje(e,t,r):Hje(e,Kje,r)}var Xje=Yje,Qje=Xje;function Zje(e,t){var r=e==null?0:e.length;return!!r&&Qje(e,t,0)>-1}var Jje=Zje;function e_e(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var t_e=e_e;function r_e(){}var n_e=r_e,m_=Jz,s_e=n_e,a_e=eP,i_e=1/0,o_e=m_&&1/a_e(new m_([,-0]))[1]==i_e?function(e){return new m_(e)}:s_e,l_e=o_e,c_e=Vz,u_e=Jje,d_e=t_e,f_e=Wz,h_e=l_e,m_e=eP,p_e=200;function g_e(e,t,r){var n=-1,a=u_e,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=d_e;else if(i>=p_e){var u=t?null:h_e(e);if(u)return m_e(u);o=!1,a=f_e,c=new c_e}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var v_e=g_e,y_e=Wi,x_e=v_e;function b_e(e,t){return e&&e.length?x_e(e,y_e(t)):[]}var w_e=b_e;const xD=Kt(w_e);function aV(e,t,r){return t===!0?xD(e,r):Ye(t)?xD(e,t):e}function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}var j_e=["ref"];function bD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bD(Object(r),!0).forEach(function(n){Sw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function __e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oV(n.key),n)}}function N_e(e,t,r){return t&&wD(e.prototype,t),r&&wD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function S_e(e,t,r){return t=tb(t),C_e(e,iV()?Reflect.construct(t,r||[],tb(e).constructor):t.apply(e,r))}function C_e(e,t){if(t&&($f(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k_e(e)}function k_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iV=function(){return!!e})()}function tb(e){return tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tb(e)}function E_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eS(e,t)}function eS(e,t){return eS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},eS(e,t)}function Sw(e,t,r){return t=oV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oV(e){var t=P_e(e,"string");return $f(t)=="symbol"?t:t+""}function P_e(e,t){if($f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A_e(e,t){if(e==null)return{};var r=O_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function O_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function T_e(e){return e.value}function D_e(e,t){if(O.isValidElement(e))return O.cloneElement(e,t);if(typeof e=="function")return O.createElement(e,t);t.ref;var r=A_e(t,j_e);return O.createElement(JE,r)}var jD=1,Zc=function(e){function t(){var r;__e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=S_e(this,t,[].concat(a)),Sw(r,"lastBoundingBox",{width:-1,height:-1}),r}return E_e(t,e),N_e(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>jD||Math.abs(a.height-this.lastBoundingBox.height)>jD)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Yi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Yi(Yi({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Yi(Yi({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return O.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},D_e(i,Yi(Yi({},this.props),{},{payload:aV(d,u,T_e)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Yi(Yi({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&xe(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(x.PureComponent);Sw(Zc,"displayName","Legend");Sw(Zc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var _D=av,R_e=tP,M_e=Ts,ND=_D?_D.isConcatSpreadable:void 0;function $_e(e){return M_e(e)||R_e(e)||!!(ND&&e&&e[ND])}var I_e=$_e,L_e=Kz,F_e=I_e;function lV(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=F_e),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?lV(l,t-1,r,n,a):L_e(a,l):n||(a[a.length]=l)}return a}var cV=lV;function U_e(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var B_e=U_e,z_e=B_e,V_e=z_e(),q_e=V_e,W_e=q_e,H_e=Nw;function K_e(e,t){return e&&W_e(e,t,H_e)}var uV=K_e,G_e=ov;function Y_e(e,t){return function(r,n){if(r==null)return r;if(!G_e(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var X_e=Y_e,Q_e=uV,Z_e=X_e,J_e=Z_e(Q_e),aP=J_e,eNe=aP,tNe=ov;function rNe(e,t){var r=-1,n=tNe(e)?Array(e.length):[];return eNe(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var dV=rNe;function nNe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var sNe=nNe,SD=Ch;function aNe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=SD(e),o=t!==void 0,l=t===null,c=t===t,u=SD(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var iNe=aNe,oNe=iNe;function lNe(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=oNe(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var cNe=lNe,p_=VE,uNe=qE,dNe=Wi,fNe=dV,hNe=sNe,mNe=Xz,pNe=cNe,gNe=Rh,vNe=Ts;function yNe(e,t,r){t.length?t=p_(t,function(i){return vNe(i)?function(o){return uNe(o,i.length===1?i[0]:i)}:i}):t=[gNe];var n=-1;t=p_(t,mNe(dNe));var a=fNe(e,function(i,o,l){var c=p_(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return hNe(a,function(i,o){return pNe(i,o,r)})}var xNe=yNe;function bNe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var wNe=bNe,jNe=wNe,CD=Math.max;function _Ne(e,t,r){return t=CD(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=CD(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),jNe(e,this,l)}}var NNe=_Ne;function SNe(e){return function(){return e}}var CNe=SNe,kNe=Vu,ENe=function(){try{var e=kNe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),fV=ENe,PNe=CNe,kD=fV,ANe=Rh,ONe=kD?function(e,t){return kD(e,"toString",{configurable:!0,enumerable:!1,value:PNe(t),writable:!0})}:ANe,TNe=ONe,DNe=800,RNe=16,MNe=Date.now;function $Ne(e){var t=0,r=0;return function(){var n=MNe(),a=RNe-(n-r);if(r=n,a>0){if(++t>=DNe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var INe=$Ne,LNe=TNe,FNe=INe,UNe=FNe(LNe),BNe=UNe,zNe=Rh,VNe=NNe,qNe=BNe;function WNe(e,t){return qNe(VNe(e,t,zNe),e+"")}var HNe=WNe,KNe=FE,GNe=ov,YNe=rP,XNe=Zl;function QNe(e,t,r){if(!XNe(r))return!1;var n=typeof t;return(n=="number"?GNe(r)&&YNe(t,r.length):n=="string"&&t in r)?KNe(r[t],e):!1}var Cw=QNe,ZNe=cV,JNe=xNe,e1e=HNe,ED=Cw,t1e=e1e(function(e,t){if(e==null)return[];var r=t.length;return r>1&&ED(e,t[0],t[1])?t=[]:r>2&&ED(t[0],t[1],t[2])&&(t=[t[0]]),JNe(e,ZNe(t,1),[])}),r1e=t1e;const iP=Kt(r1e);function qp(e){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qp(e)}function tS(){return tS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tS.apply(this,arguments)}function n1e(e,t){return o1e(e)||i1e(e,t)||a1e(e,t)||s1e()}function s1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a1e(e,t){if(e){if(typeof e=="string")return PD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PD(e,t)}}function PD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function o1e(e){if(Array.isArray(e))return e}function AD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function g_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AD(Object(r),!0).forEach(function(n){l1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l1e(e,t,r){return t=c1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c1e(e){var t=u1e(e,"string");return qp(t)=="symbol"?t:t+""}function u1e(e,t){if(qp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d1e(e){return Array.isArray(e)&&fn(e[0])&&fn(e[1])?e.join(" ~ "):e}var f1e=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,p=t.label,v=t.labelFormatter,b=t.accessibilityLayer,y=b===void 0?!1:b,w=function(){if(d&&d.length){var E={padding:0,margin:0},R=(h?iP(d,h):d).map(function($,B){if($.type==="none")return null;var F=g_({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},l),L=$.formatter||f||d1e,D=$.value,T=$.name,U=D,X=T;if(L&&U!=null&&X!=null){var H=L(D,T,$,B,d);if(Array.isArray(H)){var ae=n1e(H,2);U=ae[0],X=ae[1]}else U=H}return O.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:F},fn(X)?O.createElement("span",{className:"recharts-tooltip-item-name"},X):null,fn(X)?O.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,O.createElement("span",{className:"recharts-tooltip-item-value"},U),O.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return O.createElement("ul",{className:"recharts-tooltip-item-list",style:E},R)}return null},_=g_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=g_({margin:0},u),N=!it(p),S=N?p:"",k=at("recharts-default-tooltip",m),C=at("recharts-tooltip-label",g);N&&v&&d!==void 0&&d!==null&&(S=v(p,d));var P=y?{role:"status","aria-live":"assertive"}:{};return O.createElement("div",tS({className:k,style:_},P),O.createElement("p",{className:C,style:j},O.isValidElement(S)?S:"".concat(S)),w())};function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function ry(e,t,r){return t=h1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h1e(e){var t=m1e(e,"string");return Wp(t)=="symbol"?t:t+""}function m1e(e,t){if(Wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fm="recharts-tooltip-wrapper",p1e={visibility:"hidden"};function g1e(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return at(fm,ry(ry(ry(ry({},"".concat(fm,"-right"),xe(r)&&t&&xe(t.x)&&r>=t.x),"".concat(fm,"-left"),xe(r)&&t&&xe(t.x)&&r<t.x),"".concat(fm,"-bottom"),xe(n)&&t&&xe(t.y)&&n>=t.y),"".concat(fm,"-top"),xe(n)&&t&&xe(t.y)&&n<t.y))}function OD(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&xe(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return o[n]?d:f;if(o[n]){var h=d,m=c[n];return h<m?Math.max(f,c[n]):Math.max(d,c[n])}var g=f+l,p=c[n]+u;return g>p?Math.max(d,c[n]):Math.max(f,c[n])}function v1e(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function y1e(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=OD({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=OD({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=v1e({translateX:d,translateY:f,useTranslate3d:l})):u=p1e,{cssProperties:u,cssClasses:g1e({translateX:d,translateY:f,coordinate:r})}}function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}function TD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TD(Object(r),!0).forEach(function(n){nS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mV(n.key),n)}}function w1e(e,t,r){return t&&b1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j1e(e,t,r){return t=rb(t),_1e(e,hV()?Reflect.construct(t,r||[],rb(e).constructor):t.apply(e,r))}function _1e(e,t){if(t&&(If(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N1e(e)}function N1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hV=function(){return!!e})()}function rb(e){return rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rb(e)}function S1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rS(e,t)}function rS(e,t){return rS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rS(e,t)}function nS(e,t,r){return t=mV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mV(e){var t=C1e(e,"string");return If(t)=="symbol"?t:t+""}function C1e(e,t){if(If(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(If(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RD=1,k1e=function(e){function t(){var r;x1e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=j1e(this,t,[].concat(a)),nS(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),nS(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return S1e(t,e),w1e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>RD||Math.abs(n.height-this.state.lastBoundingBox.height)>RD)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,p=a.reverseDirection,v=a.useTranslate3d,b=a.viewBox,y=a.wrapperStyle,w=y1e({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:b}),_=w.cssClasses,j=w.cssProperties,N=DD(DD({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},y);return O.createElement("div",{tabIndex:-1,className:_,style:N,ref:function(k){n.wrapperNode=k}},u)}}])}(x.PureComponent),E1e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ga={isSsr:E1e(),get:function(t){return Ga[t]},set:function(t,r){if(typeof t=="string")Ga[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){Ga[a]=t[a]})}}};function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function MD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $D(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MD(Object(r),!0).forEach(function(n){oP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A1e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gV(n.key),n)}}function O1e(e,t,r){return t&&A1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function T1e(e,t,r){return t=nb(t),D1e(e,pV()?Reflect.construct(t,r||[],nb(e).constructor):t.apply(e,r))}function D1e(e,t){if(t&&(Lf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R1e(e)}function R1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pV=function(){return!!e})()}function nb(e){return nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nb(e)}function M1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sS(e,t)}function sS(e,t){return sS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sS(e,t)}function oP(e,t,r){return t=gV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gV(e){var t=$1e(e,"string");return Lf(t)=="symbol"?t:t+""}function $1e(e,t){if(Lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I1e(e){return e.dataKey}function L1e(e,t){return O.isValidElement(e)?O.cloneElement(e,t):typeof e=="function"?O.createElement(e,t):O.createElement(f1e,t)}var vs=function(e){function t(){return P1e(this,t),T1e(this,t,arguments)}return M1e(t,e),O1e(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,p=a.payloadUniqBy,v=a.position,b=a.reverseDirection,y=a.useTranslate3d,w=a.viewBox,_=a.wrapperStyle,j=g??[];f&&j.length&&(j=aV(g.filter(function(S){return S.value!=null&&(S.hide!==!0||n.props.includeHidden)}),p,I1e));var N=j.length>0;return O.createElement(k1e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:N,offset:m,position:v,reverseDirection:b,useTranslate3d:y,viewBox:w,wrapperStyle:_},L1e(u,$D($D({},this.props),{},{payload:j})))}}])}(x.PureComponent);oP(vs,"displayName","Tooltip");oP(vs,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ga.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var F1e=qi,U1e=function(){return F1e.Date.now()},B1e=U1e,z1e=/\s/;function V1e(e){for(var t=e.length;t--&&z1e.test(e.charAt(t)););return t}var q1e=V1e,W1e=q1e,H1e=/^\s+/;function K1e(e){return e&&e.slice(0,W1e(e)+1).replace(H1e,"")}var G1e=K1e,Y1e=G1e,ID=Zl,X1e=Ch,LD=NaN,Q1e=/^[-+]0x[0-9a-f]+$/i,Z1e=/^0b[01]+$/i,J1e=/^0o[0-7]+$/i,eSe=parseInt;function tSe(e){if(typeof e=="number")return e;if(X1e(e))return LD;if(ID(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ID(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Y1e(e);var r=Z1e.test(e);return r||J1e.test(e)?eSe(e.slice(2),r?2:8):Q1e.test(e)?LD:+e}var vV=tSe,rSe=Zl,v_=B1e,FD=vV,nSe="Expected a function",sSe=Math.max,aSe=Math.min;function iSe(e,t,r){var n,a,i,o,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(nSe);t=FD(t)||0,rSe(r)&&(d=!!r.leading,f="maxWait"in r,i=f?sSe(FD(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(N){var S=n,k=a;return n=a=void 0,u=N,o=e.apply(k,S),o}function g(N){return u=N,l=setTimeout(b,t),d?m(N):o}function p(N){var S=N-c,k=N-u,C=t-S;return f?aSe(C,i-k):C}function v(N){var S=N-c,k=N-u;return c===void 0||S>=t||S<0||f&&k>=i}function b(){var N=v_();if(v(N))return y(N);l=setTimeout(b,p(N))}function y(N){return l=void 0,h&&n?m(N):(n=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function _(){return l===void 0?o:y(v_())}function j(){var N=v_(),S=v(N);if(n=arguments,a=this,c=N,S){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(b,t),m(c)}return l===void 0&&(l=setTimeout(b,t)),o}return j.cancel=w,j.flush=_,j}var oSe=iSe,lSe=oSe,cSe=Zl,uSe="Expected a function";function dSe(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(uSe);return cSe(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),lSe(e,t,{leading:n,maxWait:t,trailing:a})}var fSe=dSe;const yV=Kt(fSe);function Hp(e){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function UD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ny(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UD(Object(r),!0).forEach(function(n){hSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hSe(e,t,r){return t=mSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mSe(e){var t=pSe(e,"string");return Hp(t)=="symbol"?t:t+""}function pSe(e,t){if(Hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gSe(e,t){return bSe(e)||xSe(e,t)||ySe(e,t)||vSe()}function vSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ySe(e,t){if(e){if(typeof e=="string")return BD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BD(e,t)}}function BD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function bSe(e){if(Array.isArray(e))return e}var hm=x.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,p=g===void 0?0:g,v=e.id,b=e.className,y=e.onResize,w=e.style,_=w===void 0?{}:w,j=x.useRef(null),N=x.useRef();N.current=y,x.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var S=x.useState({containerWidth:a.width,containerHeight:a.height}),k=gSe(S,2),C=k[0],P=k[1],A=x.useCallback(function(R,$){P(function(B){var F=Math.round(R),L=Math.round($);return B.containerWidth===F&&B.containerHeight===L?B:{containerWidth:F,containerHeight:L}})},[]);x.useEffect(function(){var R=function(T){var U,X=T[0].contentRect,H=X.width,ae=X.height;A(H,ae),(U=N.current)===null||U===void 0||U.call(N,H,ae)};p>0&&(R=yV(R,p,{trailing:!0,leading:!1}));var $=new ResizeObserver(R),B=j.current.getBoundingClientRect(),F=B.width,L=B.height;return A(F,L),$.observe(j.current),function(){$.disconnect()}},[A,p]);var E=x.useMemo(function(){var R=C.containerWidth,$=C.containerHeight;if(R<0||$<0)return null;Ka($c(o)||$c(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Ka(!r||r>0,"The aspect(%s) must be greater than zero.",r);var B=$c(o)?R:o,F=$c(c)?$:c;r&&r>0&&(B?F=B/r:F&&(B=F*r),h&&F>h&&(F=h)),Ka(B>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,F,o,c,d,f,r);var L=!Array.isArray(m)&&ho(m.type).endsWith("Chart");return O.Children.map(m,function(D){return O.isValidElement(D)?x.cloneElement(D,ny({width:B,height:F},L?{style:ny({height:"100%",width:"100%",maxHeight:F,maxWidth:B},D.props.style)}:{})):D})},[r,m,c,h,f,d,C,o]);return O.createElement("div",{id:v?"".concat(v):void 0,className:at("recharts-responsive-container",b),style:ny(ny({},_),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:j},E)}),kw=function(t){return null};kw.displayName="Cell";function Kp(e){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function zD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zD(Object(r),!0).forEach(function(n){wSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wSe(e,t,r){return t=jSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jSe(e){var t=_Se(e,"string");return Kp(t)=="symbol"?t:t+""}function _Se(e,t){if(Kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ld={widthCache:{},cacheCount:0},NSe=2e3,SSe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},VD="recharts_measurement_span";function CSe(e){var t=aS({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Zm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ga.isSsr)return{width:0,height:0};var n=CSe(r),a=JSON.stringify({text:t,copyStyle:n});if(ld.widthCache[a])return ld.widthCache[a];try{var i=document.getElementById(VD);i||(i=document.createElement("span"),i.setAttribute("id",VD),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=aS(aS({},SSe),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return ld.widthCache[a]=c,++ld.cacheCount>NSe&&(ld.cacheCount=0,ld.widthCache={}),c}catch{return{width:0,height:0}}},kSe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Gp(e){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gp(e)}function sb(e,t){return OSe(e)||ASe(e,t)||PSe(e,t)||ESe()}function ESe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PSe(e,t){if(e){if(typeof e=="string")return qD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qD(e,t)}}function qD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ASe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function OSe(e){if(Array.isArray(e))return e}function TSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RSe(n.key),n)}}function DSe(e,t,r){return t&&WD(e.prototype,t),r&&WD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RSe(e){var t=MSe(e,"string");return Gp(t)=="symbol"?t:t+""}function MSe(e,t){if(Gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var HD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$Se=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ISe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,xV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},LSe=Object.keys(xV),Od="NaN";function FSe(e,t){return e*xV[t]}var sy=function(){function e(t,r){TSe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!$Se.test(r)&&(this.num=NaN,this.unit=""),LSe.includes(r)&&(this.num=FSe(t,r),this.unit="px")}return DSe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=ISe.exec(r))!==null&&n!==void 0?n:[],i=sb(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function bV(e){if(e.includes(Od))return Od;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=HD.exec(t))!==null&&r!==void 0?r:[],a=sb(n,4),i=a[1],o=a[2],l=a[3],c=sy.parse(i??""),u=sy.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Od;t=t.replace(HD,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=KD.exec(t))!==null&&f!==void 0?f:[],m=sb(h,4),g=m[1],p=m[2],v=m[3],b=sy.parse(g??""),y=sy.parse(v??""),w=p==="+"?b.add(y):b.subtract(y);if(w.isNaN())return Od;t=t.replace(KD,w.toString())}return t}var GD=/\(([^()]*)\)/;function USe(e){for(var t=e;t.includes("(");){var r=GD.exec(t),n=sb(r,2),a=n[1];t=t.replace(GD,bV(a))}return t}function BSe(e){var t=e.replace(/\s+/g,"");return t=USe(t),t=bV(t),t}function zSe(e){try{return BSe(e)}catch{return Od}}function y_(e){var t=zSe(e.slice(5,-1));return t===Od?"":t}var VSe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],qSe=["dx","dy","angle","className","breakAll"];function iS(){return iS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iS.apply(this,arguments)}function YD(e,t){if(e==null)return{};var r=WSe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WSe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function XD(e,t){return YSe(e)||GSe(e,t)||KSe(e,t)||HSe()}function HSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KSe(e,t){if(e){if(typeof e=="string")return QD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QD(e,t)}}function QD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function YSe(e){if(Array.isArray(e))return e}var wV=/[ \f\n\r\t\v\u2028\u2029]+/,jV=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];it(r)||(n?i=r.toString().split(""):i=r.toString().split(wV));var o=i.map(function(c){return{word:c,width:Zm(c,a).width}}),l=n?0:Zm("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},XSe=function(t,r,n,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=xe(o),f=l,h=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(F,L){var D=L.word,T=L.width,U=F[F.length-1];if(U&&(a==null||i||U.width+T+n<Number(a)))U.words.push(D),U.width+=T+n;else{var X={words:[D],width:T};F.push(X)}return F},[])},m=h(r),g=function(B){return B.reduce(function(F,L){return F.width>L.width?F:L})};if(!d)return m;for(var p="",v=function(B){var F=f.slice(0,B),L=jV({breakAll:u,style:c,children:F+p}).wordsWithComputedWidth,D=h(L),T=D.length>o||g(D).width>Number(a);return[T,D]},b=0,y=f.length-1,w=0,_;b<=y&&w<=f.length-1;){var j=Math.floor((b+y)/2),N=j-1,S=v(N),k=XD(S,2),C=k[0],P=k[1],A=v(j),E=XD(A,1),R=E[0];if(!C&&!R&&(b=j+1),C&&R&&(y=j-1),!C&&R){_=P;break}w++}return _||m},ZD=function(t){var r=it(t)?[]:t.toString().split(wV);return[{words:r}]},QSe=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Ga.isSsr){var c,u,d=jV({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return ZD(a);return XSe({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return ZD(a)},JD="#808080",Eu=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,p=g===void 0?"end":g,v=t.fill,b=v===void 0?JD:v,y=YD(t,VSe),w=x.useMemo(function(){return QSe({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:f,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,f,y.style,y.width]),_=y.dx,j=y.dy,N=y.angle,S=y.className,k=y.breakAll,C=YD(y,qSe);if(!fn(n)||!fn(i))return null;var P=n+(xe(_)?_:0),A=i+(xe(j)?j:0),E;switch(p){case"start":E=y_("calc(".concat(u,")"));break;case"middle":E=y_("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:E=y_("calc(".concat(w.length-1," * -").concat(l,")"));break}var R=[];if(f){var $=w[0].width,B=y.width;R.push("scale(".concat((xe(B)?B/$:1)/$,")"))}return N&&R.push("rotate(".concat(N,", ").concat(P,", ").concat(A,")")),R.length&&(C.transform=R.join(" ")),O.createElement("text",iS({},Ve(C,!0),{x:P,y:A,className:at("recharts-text",S),textAnchor:m,fill:b.includes("url")?JD:b}),w.map(function(F,L){var D=F.words.join(k?"":" ");return O.createElement("tspan",{x:P,dy:L===0?E:l,key:"".concat(D,"-").concat(L)},D)}))};function El(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ZSe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lP(e){let t,r,n;e.length!==2?(t=El,r=(l,c)=>El(e(l),c),n=(l,c)=>e(l)-c):(t=e===El||e===ZSe?e:JSe,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function JSe(){return 0}function _V(e){return e===null?NaN:+e}function*eCe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const tCe=lP(El),lv=tCe.right;lP(_V).center;class eR extends Map{constructor(t,r=sCe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(tR(this,t))}has(t){return super.has(tR(this,t))}set(t,r){return super.set(rCe(this,t),r)}delete(t){return super.delete(nCe(this,t))}}function tR({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function rCe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function nCe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function sCe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function aCe(e=El){if(e===El)return NV;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function NV(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const iCe=Math.sqrt(50),oCe=Math.sqrt(10),lCe=Math.sqrt(2);function ab(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=iCe?10:i>=oCe?5:i>=lCe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?ab(e,t,r*2):[l,c,u]}function oS(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?ab(t,e,r):ab(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function lS(e,t,r){return t=+t,e=+e,r=+r,ab(e,t,r)[2]}function cS(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?lS(t,e,r):lS(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function rR(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function nR(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function SV(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?NV:aCe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));SV(e,t,m,g,a)}const i=e[t];let o=r,l=n;for(mm(e,r,t),a(e[n],i)>0&&mm(e,r,n);o<l;){for(mm(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?mm(e,r,l):(++l,mm(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function mm(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function cCe(e,t,r){if(e=Float64Array.from(eCe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return nR(e);if(t>=1)return rR(e);var n,a=(n-1)*t,i=Math.floor(a),o=rR(SV(e,i).subarray(0,i+1)),l=nR(e.subarray(i+1));return o+(l-o)*(a-i)}}function uCe(e,t,r=_V){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function dCe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Sa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $o(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const uS=Symbol("implicit");function cP(){var e=new eR,t=[],r=[],n=uS;function a(i){let o=e.get(i);if(o===void 0){if(n!==uS)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new eR;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return cP(t,r).unknown(n)},Sa.apply(a,arguments),a}function Yp(){var e=cP().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,p=m?n:a;i=(p-g)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),g+=(p-g-i*(h-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=dCe(h).map(function(b){return g+i*b});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Yp(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Sa.apply(f(),arguments)}function CV(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return CV(t())},e}function Jm(){return CV(Yp.apply(null,arguments).paddingInner(1))}function uP(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function kV(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function cv(){}var Xp=.7,ib=1/Xp,Qd="\\s*([+-]?\\d+)\\s*",Qp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ki="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fCe=/^#([0-9a-f]{3,8})$/,hCe=new RegExp(`^rgb\\(${Qd},${Qd},${Qd}\\)$`),mCe=new RegExp(`^rgb\\(${ki},${ki},${ki}\\)$`),pCe=new RegExp(`^rgba\\(${Qd},${Qd},${Qd},${Qp}\\)$`),gCe=new RegExp(`^rgba\\(${ki},${ki},${ki},${Qp}\\)$`),vCe=new RegExp(`^hsl\\(${Qp},${ki},${ki}\\)$`),yCe=new RegExp(`^hsla\\(${Qp},${ki},${ki},${Qp}\\)$`),sR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uP(cv,Zp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:aR,formatHex:aR,formatHex8:xCe,formatHsl:bCe,formatRgb:iR,toString:iR});function aR(){return this.rgb().formatHex()}function xCe(){return this.rgb().formatHex8()}function bCe(){return EV(this).formatHsl()}function iR(){return this.rgb().formatRgb()}function Zp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=fCe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?oR(t):r===3?new ws(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ay(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ay(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hCe.exec(e))?new ws(t[1],t[2],t[3],1):(t=mCe.exec(e))?new ws(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pCe.exec(e))?ay(t[1],t[2],t[3],t[4]):(t=gCe.exec(e))?ay(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vCe.exec(e))?uR(t[1],t[2]/100,t[3]/100,1):(t=yCe.exec(e))?uR(t[1],t[2]/100,t[3]/100,t[4]):sR.hasOwnProperty(e)?oR(sR[e]):e==="transparent"?new ws(NaN,NaN,NaN,0):null}function oR(e){return new ws(e>>16&255,e>>8&255,e&255,1)}function ay(e,t,r,n){return n<=0&&(e=t=r=NaN),new ws(e,t,r,n)}function wCe(e){return e instanceof cv||(e=Zp(e)),e?(e=e.rgb(),new ws(e.r,e.g,e.b,e.opacity)):new ws}function dS(e,t,r,n){return arguments.length===1?wCe(e):new ws(e,t,r,n??1)}function ws(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}uP(ws,dS,kV(cv,{brighter(e){return e=e==null?ib:Math.pow(ib,e),new ws(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xp:Math.pow(Xp,e),new ws(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ws(Jc(this.r),Jc(this.g),Jc(this.b),ob(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lR,formatHex:lR,formatHex8:jCe,formatRgb:cR,toString:cR}));function lR(){return`#${Ic(this.r)}${Ic(this.g)}${Ic(this.b)}`}function jCe(){return`#${Ic(this.r)}${Ic(this.g)}${Ic(this.b)}${Ic((isNaN(this.opacity)?1:this.opacity)*255)}`}function cR(){const e=ob(this.opacity);return`${e===1?"rgb(":"rgba("}${Jc(this.r)}, ${Jc(this.g)}, ${Jc(this.b)}${e===1?")":`, ${e})`}`}function ob(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ic(e){return e=Jc(e),(e<16?"0":"")+e.toString(16)}function uR(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new qa(e,t,r,n)}function EV(e){if(e instanceof qa)return new qa(e.h,e.s,e.l,e.opacity);if(e instanceof cv||(e=Zp(e)),!e)return new qa;if(e instanceof qa)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new qa(o,l,c,e.opacity)}function _Ce(e,t,r,n){return arguments.length===1?EV(e):new qa(e,t,r,n??1)}function qa(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}uP(qa,_Ce,kV(cv,{brighter(e){return e=e==null?ib:Math.pow(ib,e),new qa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xp:Math.pow(Xp,e),new qa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new ws(x_(e>=240?e-240:e+120,a,n),x_(e,a,n),x_(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new qa(dR(this.h),iy(this.s),iy(this.l),ob(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ob(this.opacity);return`${e===1?"hsl(":"hsla("}${dR(this.h)}, ${iy(this.s)*100}%, ${iy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dR(e){return e=(e||0)%360,e<0?e+360:e}function iy(e){return Math.max(0,Math.min(1,e||0))}function x_(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const dP=e=>()=>e;function NCe(e,t){return function(r){return e+r*t}}function SCe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function CCe(e){return(e=+e)==1?PV:function(t,r){return r-t?SCe(t,r,e):dP(isNaN(t)?r:t)}}function PV(e,t){var r=t-e;return r?NCe(e,r):dP(isNaN(e)?t:e)}const fR=function e(t){var r=CCe(t);function n(a,i){var o=r((a=dS(a)).r,(i=dS(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=PV(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function kCe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function ECe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PCe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Mh(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function ACe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function lb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function OCe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Mh(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var fS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b_=new RegExp(fS.source,"g");function TCe(e){return function(){return e}}function DCe(e){return function(t){return e(t)+""}}function RCe(e,t){var r=fS.lastIndex=b_.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=fS.exec(e))&&(a=b_.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:lb(n,a)})),r=b_.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?DCe(c[0].x):TCe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Mh(e,t){var r=typeof t,n;return t==null||r==="boolean"?dP(t):(r==="number"?lb:r==="string"?(n=Zp(t))?(t=n,fR):RCe:t instanceof Zp?fR:t instanceof Date?ACe:ECe(t)?kCe:Array.isArray(t)?PCe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?OCe:lb)(e,t)}function fP(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function MCe(e,t){t===void 0&&(t=e,e=Mh);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function $Ce(e){return function(){return e}}function cb(e){return+e}var hR=[0,1];function ts(e){return e}function hS(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:$Ce(isNaN(t)?NaN:.5)}function ICe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function LCe(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=hS(a,n),i=r(o,i)):(n=hS(n,a),i=r(i,o)),function(l){return i(n(l))}}function FCe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=hS(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=lv(e,l,1,n)-1;return i[c](a[c](l))}}function uv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ew(){var e=hR,t=hR,r=Mh,n,a,i,o=ts,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==ts&&(o=ICe(e[0],e[h-1])),l=h>2?FCe:LCe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),lb)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,cb),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=fP,d()},f.clamp=function(h){return arguments.length?(o=h?!0:ts,d()):o!==ts},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function hP(){return Ew()(ts,ts)}function UCe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ub(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ff(e){return e=ub(Math.abs(e)),e?e[1]:NaN}function BCe(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function zCe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var VCe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jp(e){if(!(t=VCe.exec(e)))throw new Error("invalid format: "+e);var t;return new mP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Jp.prototype=mP.prototype;function mP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}mP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qCe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var AV;function WCe(e,t){var r=ub(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(AV=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+ub(e,Math.max(0,t+i-1))[0]}function mR(e,t){var r=ub(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const pR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:UCe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>mR(e*100,t),r:mR,s:WCe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function gR(e){return e}var vR=Array.prototype.map,yR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function HCe(e){var t=e.grouping===void 0||e.thousands===void 0?gR:BCe(vR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?gR:zCe(vR.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Jp(f);var h=f.fill,m=f.align,g=f.sign,p=f.symbol,v=f.zero,b=f.width,y=f.comma,w=f.precision,_=f.trim,j=f.type;j==="n"?(y=!0,j="g"):pR[j]||(w===void 0&&(w=12),_=!0,j="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var N=p==="$"?r:p==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",S=p==="$"?n:/[%p]/.test(j)?o:"",k=pR[j],C=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(A){var E=N,R=S,$,B,F;if(j==="c")R=k(A)+R,A="";else{A=+A;var L=A<0||1/A<0;if(A=isNaN(A)?c:k(Math.abs(A),w),_&&(A=qCe(A)),L&&+A==0&&g!=="+"&&(L=!1),E=(L?g==="("?g:l:g==="-"||g==="("?"":g)+E,R=(j==="s"?yR[8+AV/3]:"")+R+(L&&g==="("?")":""),C){for($=-1,B=A.length;++$<B;)if(F=A.charCodeAt($),48>F||F>57){R=(F===46?a+A.slice($+1):A.slice($))+R,A=A.slice(0,$);break}}}y&&!v&&(A=t(A,1/0));var D=E.length+A.length+R.length,T=D<b?new Array(b-D+1).join(h):"";switch(y&&v&&(A=t(T+A,T.length?b-R.length:1/0),T=""),m){case"<":A=E+A+R+T;break;case"=":A=E+T+A+R;break;case"^":A=T.slice(0,D=T.length>>1)+E+A+R+T.slice(D);break;default:A=T+E+A+R;break}return i(A)}return P.toString=function(){return f+""},P}function d(f,h){var m=u((f=Jp(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Ff(h)/3)))*3,p=Math.pow(10,-g),v=yR[8+g/3];return function(b){return m(p*b)+v}}return{format:u,formatPrefix:d}}var oy,pP,OV;KCe({thousands:",",grouping:[3],currency:["$",""]});function KCe(e){return oy=HCe(e),pP=oy.format,OV=oy.formatPrefix,oy}function GCe(e){return Math.max(0,-Ff(Math.abs(e)))}function YCe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ff(t)/3)))*3-Ff(Math.abs(e)))}function XCe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ff(t)-Ff(e))+1}function TV(e,t,r,n){var a=cS(e,t,r),i;switch(n=Jp(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=YCe(a,o))&&(n.precision=i),OV(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=XCe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=GCe(a))&&(n.precision=i-(n.type==="%")*2);break}}return pP(n)}function Jl(e){var t=e.domain;return e.ticks=function(r){var n=t();return oS(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return TV(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=lS(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function db(){var e=hP();return e.copy=function(){return uv(e,db())},Sa.apply(e,arguments),Jl(e)}function DV(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,cb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return DV(e).unknown(t)},e=arguments.length?Array.from(e,cb):[0,1],Jl(r)}function RV(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function xR(e){return Math.log(e)}function bR(e){return Math.exp(e)}function QCe(e){return-Math.log(-e)}function ZCe(e){return-Math.exp(-e)}function JCe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function eke(e){return e===10?JCe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function tke(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function wR(e){return(t,r)=>-e(-t,r)}function gP(e){const t=e(xR,bR),r=t.domain;let n=10,a,i;function o(){return a=tke(n),i=eke(n),r()[0]<0?(a=wR(a),i=wR(i),e(QCe,ZCe)):e(xR,bR),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,p;const v=l==null?10:+l;let b=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(p=h<0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;b.push(p)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(p=h>0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;b.push(p)}b.length*2<v&&(b=oS(u,d,v))}else b=oS(h,m,Math.min(m-h,v)).map(i);return f?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Jp(c)).precision==null&&(c.trim=!0),c=pP(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(RV(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function MV(){const e=gP(Ew()).domain([1,10]);return e.copy=()=>uv(e,MV()).base(e.base()),Sa.apply(e,arguments),e}function jR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function _R(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vP(e){var t=1,r=e(jR(t),_R(t));return r.constant=function(n){return arguments.length?e(jR(t=+n),_R(t)):t},Jl(r)}function $V(){var e=vP(Ew());return e.copy=function(){return uv(e,$V()).constant(e.constant())},Sa.apply(e,arguments)}function NR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function rke(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function nke(e){return e<0?-e*e:e*e}function yP(e){var t=e(ts,ts),r=1;function n(){return r===1?e(ts,ts):r===.5?e(rke,nke):e(NR(r),NR(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Jl(t)}function xP(){var e=yP(Ew());return e.copy=function(){return uv(e,xP()).exponent(e.exponent())},Sa.apply(e,arguments),e}function ske(){return xP.apply(null,arguments).exponent(.5)}function SR(e){return Math.sign(e)*e*e}function ake(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function IV(){var e=hP(),t=[0,1],r=!1,n;function a(i){var o=ake(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(SR(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,cb)).map(SR)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return IV(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Sa.apply(a,arguments),Jl(a)}function LV(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=uCe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[lv(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(El),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return LV().domain(e).range(t).unknown(n)},Sa.apply(i,arguments)}function FV(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[lv(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return FV().domain([e,t]).range(a).unknown(i)},Sa.apply(Jl(o),arguments)}function UV(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[lv(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return UV().domain(e).range(t).unknown(r)},Sa.apply(a,arguments)}const w_=new Date,j_=new Date;function pn(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>pn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(w_.setTime(+i),j_.setTime(+o),e(w_),e(j_),Math.floor(r(w_,j_))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const fb=pn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);fb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?pn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):fb);fb.range;const lo=1e3,ga=lo*60,co=ga*60,No=co*24,bP=No*7,CR=No*30,__=No*365,Lc=pn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*lo)},(e,t)=>(t-e)/lo,e=>e.getUTCSeconds());Lc.range;const wP=pn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lo)},(e,t)=>{e.setTime(+e+t*ga)},(e,t)=>(t-e)/ga,e=>e.getMinutes());wP.range;const jP=pn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ga)},(e,t)=>(t-e)/ga,e=>e.getUTCMinutes());jP.range;const _P=pn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lo-e.getMinutes()*ga)},(e,t)=>{e.setTime(+e+t*co)},(e,t)=>(t-e)/co,e=>e.getHours());_P.range;const NP=pn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*co)},(e,t)=>(t-e)/co,e=>e.getUTCHours());NP.range;const dv=pn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ga)/No,e=>e.getDate()-1);dv.range;const Pw=pn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/No,e=>e.getUTCDate()-1);Pw.range;const BV=pn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/No,e=>Math.floor(e/No));BV.range;function qu(e){return pn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ga)/bP)}const Aw=qu(0),hb=qu(1),ike=qu(2),oke=qu(3),Uf=qu(4),lke=qu(5),cke=qu(6);Aw.range;hb.range;ike.range;oke.range;Uf.range;lke.range;cke.range;function Wu(e){return pn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/bP)}const Ow=Wu(0),mb=Wu(1),uke=Wu(2),dke=Wu(3),Bf=Wu(4),fke=Wu(5),hke=Wu(6);Ow.range;mb.range;uke.range;dke.range;Bf.range;fke.range;hke.range;const SP=pn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());SP.range;const CP=pn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());CP.range;const So=pn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());So.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});So.range;const Co=pn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Co.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Co.range;function zV(e,t,r,n,a,i){const o=[[Lc,1,lo],[Lc,5,5*lo],[Lc,15,15*lo],[Lc,30,30*lo],[i,1,ga],[i,5,5*ga],[i,15,15*ga],[i,30,30*ga],[a,1,co],[a,3,3*co],[a,6,6*co],[a,12,12*co],[n,1,No],[n,2,2*No],[r,1,bP],[t,1,CR],[t,3,3*CR],[e,1,__]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=lP(([,,v])=>v).right(o,h);if(m===o.length)return e.every(cS(u/__,d/__,f));if(m===0)return fb.every(Math.max(cS(u,d,f),1));const[g,p]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(p)}return[l,c]}const[mke,pke]=zV(Co,CP,Ow,BV,NP,jP),[gke,vke]=zV(So,SP,Aw,dv,_P,wP);function N_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function S_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function yke(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=gm(a),d=vm(a),f=gm(i),h=vm(i),m=gm(o),g=vm(o),p=gm(l),v=vm(l),b=gm(c),y=vm(c),w={a:L,A:D,b:T,B:U,c:null,d:TR,e:TR,f:Bke,g:Qke,G:Jke,H:Lke,I:Fke,j:Uke,L:VV,m:zke,M:Vke,p:X,q:H,Q:MR,s:$R,S:qke,u:Wke,U:Hke,V:Kke,w:Gke,W:Yke,x:null,X:null,y:Xke,Y:Zke,Z:eEe,"%":RR},_={a:ae,A:he,b:Pe,B:Ae,c:null,d:DR,e:DR,f:sEe,g:mEe,G:gEe,H:tEe,I:rEe,j:nEe,L:WV,m:aEe,M:iEe,p:ue,q:ze,Q:MR,s:$R,S:oEe,u:lEe,U:cEe,V:uEe,w:dEe,W:fEe,x:null,X:null,y:hEe,Y:pEe,Z:vEe,"%":RR},j={a:P,A,b:E,B:R,c:$,d:AR,e:AR,f:Rke,g:PR,G:ER,H:OR,I:OR,j:Ake,L:Dke,m:Pke,M:Oke,p:C,q:Eke,Q:$ke,s:Ike,S:Tke,u:_ke,U:Nke,V:Ske,w:jke,W:Cke,x:B,X:F,y:PR,Y:ER,Z:kke,"%":Mke};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),_.x=N(r,_),_.X=N(n,_),_.c=N(t,_);function N(ie,be){return function(_e){var ee=[],ot=-1,Ge=0,Et=ie.length,Ut,tr,_r;for(_e instanceof Date||(_e=new Date(+_e));++ot<Et;)ie.charCodeAt(ot)===37&&(ee.push(ie.slice(Ge,ot)),(tr=kR[Ut=ie.charAt(++ot)])!=null?Ut=ie.charAt(++ot):tr=Ut==="e"?" ":"0",(_r=be[Ut])&&(Ut=_r(_e,tr)),ee.push(Ut),Ge=ot+1);return ee.push(ie.slice(Ge,ot)),ee.join("")}}function S(ie,be){return function(_e){var ee=pm(1900,void 0,1),ot=k(ee,ie,_e+="",0),Ge,Et;if(ot!=_e.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(be&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(Ge=S_(pm(ee.y,0,1)),Et=Ge.getUTCDay(),Ge=Et>4||Et===0?mb.ceil(Ge):mb(Ge),Ge=Pw.offset(Ge,(ee.V-1)*7),ee.y=Ge.getUTCFullYear(),ee.m=Ge.getUTCMonth(),ee.d=Ge.getUTCDate()+(ee.w+6)%7):(Ge=N_(pm(ee.y,0,1)),Et=Ge.getDay(),Ge=Et>4||Et===0?hb.ceil(Ge):hb(Ge),Ge=dv.offset(Ge,(ee.V-1)*7),ee.y=Ge.getFullYear(),ee.m=Ge.getMonth(),ee.d=Ge.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),Et="Z"in ee?S_(pm(ee.y,0,1)).getUTCDay():N_(pm(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(Et+5)%7:ee.w+ee.U*7-(Et+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,S_(ee)):N_(ee)}}function k(ie,be,_e,ee){for(var ot=0,Ge=be.length,Et=_e.length,Ut,tr;ot<Ge;){if(ee>=Et)return-1;if(Ut=be.charCodeAt(ot++),Ut===37){if(Ut=be.charAt(ot++),tr=j[Ut in kR?be.charAt(ot++):Ut],!tr||(ee=tr(ie,_e,ee))<0)return-1}else if(Ut!=_e.charCodeAt(ee++))return-1}return ee}function C(ie,be,_e){var ee=u.exec(be.slice(_e));return ee?(ie.p=d.get(ee[0].toLowerCase()),_e+ee[0].length):-1}function P(ie,be,_e){var ee=m.exec(be.slice(_e));return ee?(ie.w=g.get(ee[0].toLowerCase()),_e+ee[0].length):-1}function A(ie,be,_e){var ee=f.exec(be.slice(_e));return ee?(ie.w=h.get(ee[0].toLowerCase()),_e+ee[0].length):-1}function E(ie,be,_e){var ee=b.exec(be.slice(_e));return ee?(ie.m=y.get(ee[0].toLowerCase()),_e+ee[0].length):-1}function R(ie,be,_e){var ee=p.exec(be.slice(_e));return ee?(ie.m=v.get(ee[0].toLowerCase()),_e+ee[0].length):-1}function $(ie,be,_e){return k(ie,t,be,_e)}function B(ie,be,_e){return k(ie,r,be,_e)}function F(ie,be,_e){return k(ie,n,be,_e)}function L(ie){return o[ie.getDay()]}function D(ie){return i[ie.getDay()]}function T(ie){return c[ie.getMonth()]}function U(ie){return l[ie.getMonth()]}function X(ie){return a[+(ie.getHours()>=12)]}function H(ie){return 1+~~(ie.getMonth()/3)}function ae(ie){return o[ie.getUTCDay()]}function he(ie){return i[ie.getUTCDay()]}function Pe(ie){return c[ie.getUTCMonth()]}function Ae(ie){return l[ie.getUTCMonth()]}function ue(ie){return a[+(ie.getUTCHours()>=12)]}function ze(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var be=N(ie+="",w);return be.toString=function(){return ie},be},parse:function(ie){var be=S(ie+="",!1);return be.toString=function(){return ie},be},utcFormat:function(ie){var be=N(ie+="",_);return be.toString=function(){return ie},be},utcParse:function(ie){var be=S(ie+="",!0);return be.toString=function(){return ie},be}}}var kR={"-":"",_:" ",0:"0"},Nn=/^\s*\d+/,xke=/^%/,bke=/[\\^$*+?|[\]().{}]/g;function Vt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function wke(e){return e.replace(bke,"\\$&")}function gm(e){return new RegExp("^(?:"+e.map(wke).join("|")+")","i")}function vm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function jke(e,t,r){var n=Nn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function _ke(e,t,r){var n=Nn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Nke(e,t,r){var n=Nn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Ske(e,t,r){var n=Nn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Cke(e,t,r){var n=Nn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function ER(e,t,r){var n=Nn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function PR(e,t,r){var n=Nn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function kke(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Eke(e,t,r){var n=Nn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Pke(e,t,r){var n=Nn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function AR(e,t,r){var n=Nn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Ake(e,t,r){var n=Nn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function OR(e,t,r){var n=Nn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Oke(e,t,r){var n=Nn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Tke(e,t,r){var n=Nn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Dke(e,t,r){var n=Nn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Rke(e,t,r){var n=Nn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Mke(e,t,r){var n=xke.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function $ke(e,t,r){var n=Nn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Ike(e,t,r){var n=Nn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function TR(e,t){return Vt(e.getDate(),t,2)}function Lke(e,t){return Vt(e.getHours(),t,2)}function Fke(e,t){return Vt(e.getHours()%12||12,t,2)}function Uke(e,t){return Vt(1+dv.count(So(e),e),t,3)}function VV(e,t){return Vt(e.getMilliseconds(),t,3)}function Bke(e,t){return VV(e,t)+"000"}function zke(e,t){return Vt(e.getMonth()+1,t,2)}function Vke(e,t){return Vt(e.getMinutes(),t,2)}function qke(e,t){return Vt(e.getSeconds(),t,2)}function Wke(e){var t=e.getDay();return t===0?7:t}function Hke(e,t){return Vt(Aw.count(So(e)-1,e),t,2)}function qV(e){var t=e.getDay();return t>=4||t===0?Uf(e):Uf.ceil(e)}function Kke(e,t){return e=qV(e),Vt(Uf.count(So(e),e)+(So(e).getDay()===4),t,2)}function Gke(e){return e.getDay()}function Yke(e,t){return Vt(hb.count(So(e)-1,e),t,2)}function Xke(e,t){return Vt(e.getFullYear()%100,t,2)}function Qke(e,t){return e=qV(e),Vt(e.getFullYear()%100,t,2)}function Zke(e,t){return Vt(e.getFullYear()%1e4,t,4)}function Jke(e,t){var r=e.getDay();return e=r>=4||r===0?Uf(e):Uf.ceil(e),Vt(e.getFullYear()%1e4,t,4)}function eEe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Vt(t/60|0,"0",2)+Vt(t%60,"0",2)}function DR(e,t){return Vt(e.getUTCDate(),t,2)}function tEe(e,t){return Vt(e.getUTCHours(),t,2)}function rEe(e,t){return Vt(e.getUTCHours()%12||12,t,2)}function nEe(e,t){return Vt(1+Pw.count(Co(e),e),t,3)}function WV(e,t){return Vt(e.getUTCMilliseconds(),t,3)}function sEe(e,t){return WV(e,t)+"000"}function aEe(e,t){return Vt(e.getUTCMonth()+1,t,2)}function iEe(e,t){return Vt(e.getUTCMinutes(),t,2)}function oEe(e,t){return Vt(e.getUTCSeconds(),t,2)}function lEe(e){var t=e.getUTCDay();return t===0?7:t}function cEe(e,t){return Vt(Ow.count(Co(e)-1,e),t,2)}function HV(e){var t=e.getUTCDay();return t>=4||t===0?Bf(e):Bf.ceil(e)}function uEe(e,t){return e=HV(e),Vt(Bf.count(Co(e),e)+(Co(e).getUTCDay()===4),t,2)}function dEe(e){return e.getUTCDay()}function fEe(e,t){return Vt(mb.count(Co(e)-1,e),t,2)}function hEe(e,t){return Vt(e.getUTCFullYear()%100,t,2)}function mEe(e,t){return e=HV(e),Vt(e.getUTCFullYear()%100,t,2)}function pEe(e,t){return Vt(e.getUTCFullYear()%1e4,t,4)}function gEe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Bf(e):Bf.ceil(e),Vt(e.getUTCFullYear()%1e4,t,4)}function vEe(){return"+0000"}function RR(){return"%"}function MR(e){return+e}function $R(e){return Math.floor(+e/1e3)}var cd,KV,GV;yEe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yEe(e){return cd=yke(e),KV=cd.format,cd.parse,GV=cd.utcFormat,cd.utcParse,cd}function xEe(e){return new Date(e)}function bEe(e){return e instanceof Date?+e:+new Date(+e)}function kP(e,t,r,n,a,i,o,l,c,u){var d=hP(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),p=u("%I:%M"),v=u("%I %p"),b=u("%a %d"),y=u("%b %d"),w=u("%B"),_=u("%Y");function j(N){return(c(N)<N?m:l(N)<N?g:o(N)<N?p:i(N)<N?v:n(N)<N?a(N)<N?b:y:r(N)<N?w:_)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?h(Array.from(N,bEe)):h().map(xEe)},d.ticks=function(N){var S=h();return e(S[0],S[S.length-1],N??10)},d.tickFormat=function(N,S){return S==null?j:u(S)},d.nice=function(N){var S=h();return(!N||typeof N.range!="function")&&(N=t(S[0],S[S.length-1],N??10)),N?h(RV(S,N)):d},d.copy=function(){return uv(d,kP(e,t,r,n,a,i,o,l,c,u))},d}function wEe(){return Sa.apply(kP(gke,vke,So,SP,Aw,dv,_P,wP,Lc,KV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function jEe(){return Sa.apply(kP(mke,pke,Co,CP,Ow,Pw,NP,jP,Lc,GV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Tw(){var e=0,t=1,r,n,a,i,o=ts,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(Mh),u.rangeRound=d(fP),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function ec(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function YV(){var e=Jl(Tw()(ts));return e.copy=function(){return ec(e,YV())},$o.apply(e,arguments)}function XV(){var e=gP(Tw()).domain([1,10]);return e.copy=function(){return ec(e,XV()).base(e.base())},$o.apply(e,arguments)}function QV(){var e=vP(Tw());return e.copy=function(){return ec(e,QV()).constant(e.constant())},$o.apply(e,arguments)}function EP(){var e=yP(Tw());return e.copy=function(){return ec(e,EP()).exponent(e.exponent())},$o.apply(e,arguments)}function _Ee(){return EP.apply(null,arguments).exponent(.5)}function ZV(){var e=[],t=ts;function r(n){if(n!=null&&!isNaN(n=+n))return t((lv(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(El),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>cCe(e,i/n))},r.copy=function(){return ZV(t).domain(e)},$o.apply(r,arguments)}function Dw(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=ts,d,f=!1,h;function m(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-i)*(n*p<n*i?l:c),u(f?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,r]=p,a=d(e=+e),i=d(t=+t),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(p){return arguments.length?(f=!!p,m):f},m.interpolator=function(p){return arguments.length?(u=p,m):u};function g(p){return function(v){var b,y,w;return arguments.length?([b,y,w]=v,u=MCe(p,[b,y,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(Mh),m.rangeRound=g(fP),m.unknown=function(p){return arguments.length?(h=p,m):h},function(p){return d=p,a=p(e),i=p(t),o=p(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function JV(){var e=Jl(Dw()(ts));return e.copy=function(){return ec(e,JV())},$o.apply(e,arguments)}function eq(){var e=gP(Dw()).domain([.1,1,10]);return e.copy=function(){return ec(e,eq()).base(e.base())},$o.apply(e,arguments)}function tq(){var e=vP(Dw());return e.copy=function(){return ec(e,tq()).constant(e.constant())},$o.apply(e,arguments)}function PP(){var e=yP(Dw());return e.copy=function(){return ec(e,PP()).exponent(e.exponent())},$o.apply(e,arguments)}function NEe(){return PP.apply(null,arguments).exponent(.5)}const IR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Yp,scaleDiverging:JV,scaleDivergingLog:eq,scaleDivergingPow:PP,scaleDivergingSqrt:NEe,scaleDivergingSymlog:tq,scaleIdentity:DV,scaleImplicit:uS,scaleLinear:db,scaleLog:MV,scaleOrdinal:cP,scalePoint:Jm,scalePow:xP,scaleQuantile:LV,scaleQuantize:FV,scaleRadial:IV,scaleSequential:YV,scaleSequentialLog:XV,scaleSequentialPow:EP,scaleSequentialQuantile:ZV,scaleSequentialSqrt:_Ee,scaleSequentialSymlog:QV,scaleSqrt:ske,scaleSymlog:$V,scaleThreshold:UV,scaleTime:wEe,scaleUtc:jEe,tickFormat:TV},Symbol.toStringTag,{value:"Module"}));var SEe=Ch;function CEe(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!SEe(o):r(o,l)))var l=o,c=i}return c}var Rw=CEe;function kEe(e,t){return e>t}var rq=kEe,EEe=Rw,PEe=rq,AEe=Rh;function OEe(e){return e&&e.length?EEe(e,AEe,PEe):void 0}var TEe=OEe;const Mw=Kt(TEe);function DEe(e,t){return e<t}var nq=DEe,REe=Rw,MEe=nq,$Ee=Rh;function IEe(e){return e&&e.length?REe(e,$Ee,MEe):void 0}var LEe=IEe;const $w=Kt(LEe);var FEe=VE,UEe=Wi,BEe=dV,zEe=Ts;function VEe(e,t){var r=zEe(e)?FEe:BEe;return r(e,UEe(t))}var qEe=VEe,WEe=cV,HEe=qEe;function KEe(e,t){return WEe(HEe(e,t),1)}var GEe=KEe;const YEe=Kt(GEe);var XEe=sP;function QEe(e,t){return XEe(e,t)}var ZEe=QEe;const $h=Kt(ZEe);var Ih=1e9,JEe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},OP,kr=!0,wa="[DecimalError] ",eu=wa+"Invalid argument: ",AP=wa+"Exponent out of range: ",Lh=Math.floor,yc=Math.pow,ePe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,zs,xn=1e7,yr=7,sq=9007199254740991,pb=Lh(sq/yr),Re={};Re.absoluteValue=Re.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Re.comparedTo=Re.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Re.decimalPlaces=Re.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*yr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Re.dividedBy=Re.div=function(e){return mo(this,new this.constructor(e))};Re.dividedToIntegerBy=Re.idiv=function(e){var t=this,r=t.constructor;return ar(mo(t,new r(e),0,1),r.precision)};Re.equals=Re.eq=function(e){return!this.cmp(e)};Re.exponent=function(){return Jr(this)};Re.greaterThan=Re.gt=function(e){return this.cmp(e)>0};Re.greaterThanOrEqualTo=Re.gte=function(e){return this.cmp(e)>=0};Re.isInteger=Re.isint=function(){return this.e>this.d.length-2};Re.isNegative=Re.isneg=function(){return this.s<0};Re.isPositive=Re.ispos=function(){return this.s>0};Re.isZero=function(){return this.s===0};Re.lessThan=Re.lt=function(e){return this.cmp(e)<0};Re.lessThanOrEqualTo=Re.lte=function(e){return this.cmp(e)<1};Re.logarithm=Re.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(zs))throw Error(wa+"NaN");if(r.s<1)throw Error(wa+(r.s?"NaN":"-Infinity"));return r.eq(zs)?new n(0):(kr=!1,t=mo(eg(r,i),eg(e,i),i),kr=!0,ar(t,a))};Re.minus=Re.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?oq(t,e):aq(t,(e.s=-e.s,e))};Re.modulo=Re.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(wa+"NaN");return r.s?(kr=!1,t=mo(r,e,0,1).times(e),kr=!0,r.minus(t)):ar(new n(r),a)};Re.naturalExponential=Re.exp=function(){return iq(this)};Re.naturalLogarithm=Re.ln=function(){return eg(this)};Re.negated=Re.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Re.plus=Re.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aq(t,e):oq(t,(e.s=-e.s,e))};Re.precision=Re.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(eu+e);if(t=Jr(a)+1,n=a.d.length-1,r=n*yr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Re.squareRoot=Re.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(wa+"NaN")}for(e=Jr(l),kr=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=ji(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Lh((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(mo(l,i,o+2)).times(.5),ji(i.d).slice(0,o)===(t=ji(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(ar(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return kr=!0,ar(n,r)};Re.times=Re.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+m[n]*h[a-n-1]+t,i[a--]=l%xn|0,t=l/xn|0;i[a]=(i[a]+t)%xn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,kr?ar(e,f.precision):e};Re.toDecimalPlaces=Re.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ii(e,0,Ih),t===void 0?t=n.rounding:Ii(t,0,8),ar(r,e+Jr(r)+1,t))};Re.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Pu(n,!0):(Ii(e,0,Ih),t===void 0?t=a.rounding:Ii(t,0,8),n=ar(new a(n),e+1,t),r=Pu(n,!0,e+1)),r};Re.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Pu(a):(Ii(e,0,Ih),t===void 0?t=i.rounding:Ii(t,0,8),n=ar(new i(a),e+Jr(a)+1,t),r=Pu(n.abs(),!1,e+Jr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Re.toInteger=Re.toint=function(){var e=this,t=e.constructor;return ar(new t(e),Jr(e)+1,t.rounding)};Re.toNumber=function(){return+this};Re.toPower=Re.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(zs);if(l=new c(l),!l.s){if(e.s<1)throw Error(wa+"Infinity");return l}if(l.eq(zs))return l;if(n=c.precision,e.eq(zs))return ar(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=sq){for(a=new c(zs),t=Math.ceil(n/yr+4),kr=!1;r%2&&(a=a.times(l),FR(a.d,t)),r=Lh(r/2),r!==0;)l=l.times(l),FR(l.d,t);return kr=!0,e.s<0?new c(zs).div(a):ar(a,n)}}else if(i<0)throw Error(wa+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,kr=!1,a=e.times(eg(l,n+u)),kr=!0,a=iq(a),a.s=i,a};Re.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Jr(a),n=Pu(a,r<=i.toExpNeg||r>=i.toExpPos)):(Ii(e,1,Ih),t===void 0?t=i.rounding:Ii(t,0,8),a=ar(new i(a),e,t),r=Jr(a),n=Pu(a,e<=r||r<=i.toExpNeg,e)),n};Re.toSignificantDigits=Re.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ii(e,1,Ih),t===void 0?t=n.rounding:Ii(t,0,8)),ar(new n(r),e,t)};Re.toString=Re.valueOf=Re.val=Re.toJSON=Re[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Jr(e),r=e.constructor;return Pu(e,t<=r.toExpNeg||t>=r.toExpPos)};function aq(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),kr?ar(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/yr),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/xn|0,c[i]%=xn;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,kr?ar(t,f):t}function Ii(e,t,r){if(e!==~~e||e<t||e>r)throw Error(eu+e)}function ji(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=yr-n.length,r&&(i+=Yo(r)),i+=n;o=e[t],n=o+"",r=yr-n.length,r&&(i+=Yo(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var mo=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%xn|0,o=i/xn|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*xn+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,h,m,g,p,v,b,y,w,_,j,N,S,k,C=n.constructor,P=n.s==a.s?1:-1,A=n.d,E=a.d;if(!n.s)return new C(n);if(!a.s)throw Error(wa+"Division by zero");for(c=n.e-a.e,S=E.length,j=A.length,m=new C(P),g=m.d=[],u=0;E[u]==(A[u]||0);)++u;if(E[u]>(A[u]||0)&&--c,i==null?y=i=C.precision:o?y=i+(Jr(n)-Jr(a))+1:y=i,y<0)return new C(0);if(y=y/yr+2|0,u=0,S==1)for(d=0,E=E[0],y++;(u<j||d)&&y--;u++)w=d*xn+(A[u]||0),g[u]=w/E|0,d=w%E|0;else{for(d=xn/(E[0]+1)|0,d>1&&(E=e(E,d),A=e(A,d),S=E.length,j=A.length),_=S,p=A.slice(0,S),v=p.length;v<S;)p[v++]=0;k=E.slice(),k.unshift(0),N=E[0],E[1]>=xn/2&&++N;do d=0,l=t(E,p,S,v),l<0?(b=p[0],S!=v&&(b=b*xn+(p[1]||0)),d=b/N|0,d>1?(d>=xn&&(d=xn-1),f=e(E,d),h=f.length,v=p.length,l=t(f,p,h,v),l==1&&(d--,r(f,S<h?k:E,h))):(d==0&&(l=d=1),f=E.slice()),h=f.length,h<v&&f.unshift(0),r(p,f,v),l==-1&&(v=p.length,l=t(E,p,S,v),l<1&&(d++,r(p,S<v?k:E,v))),v=p.length):l===0&&(d++,p=[0]),g[u++]=d,l&&p[0]?p[v++]=A[_]||0:(p=[A[_]],v=1);while((_++<j||p[0]!==void 0)&&y--)}return g[0]||g.shift(),m.e=c,ar(m,o?i+Jr(m)+1:i)}}();function iq(e,t){var r,n,a,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Jr(e)>16)throw Error(AP+Jr(e));if(!e.s)return new d(zs);for(t==null?(kr=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(yc(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(zs),d.precision=l;;){if(a=ar(a.times(e),l),r=r.times(++c),o=i.plus(mo(a,r,l)),ji(o.d).slice(0,l)===ji(i.d).slice(0,l)){for(;u--;)i=ar(i.times(i),l);return d.precision=f,t==null?(kr=!0,ar(i,f)):i}i=o}}function Jr(e){for(var t=e.e*yr,r=e.d[0];r>=10;r/=10)t++;return t}function C_(e,t,r){if(t>e.LN10.sd())throw kr=!0,r&&(e.precision=r),Error(wa+"LN10 precision limit exceeded");return ar(new e(e.LN10),t)}function Yo(e){for(var t="";e--;)t+="0";return t}function eg(e,t){var r,n,a,i,o,l,c,u,d,f=1,h=10,m=e,g=m.d,p=m.constructor,v=p.precision;if(m.s<1)throw Error(wa+(m.s?"NaN":"-Infinity"));if(m.eq(zs))return new p(0);if(t==null?(kr=!1,u=v):u=t,m.eq(10))return t==null&&(kr=!0),C_(p,u);if(u+=h,p.precision=u,r=ji(g),n=r.charAt(0),i=Jr(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=ji(m.d),n=r.charAt(0),f++;i=Jr(m),n>1?(m=new p("0."+r),i++):m=new p(n+"."+r.slice(1))}else return c=C_(p,u+2,v).times(i+""),m=eg(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=v,t==null?(kr=!0,ar(m,v)):m;for(l=o=m=mo(m.minus(zs),m.plus(zs),u),d=ar(m.times(m),u),a=3;;){if(o=ar(o.times(d),u),c=l.plus(mo(o,new p(a),u)),ji(c.d).slice(0,u)===ji(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(C_(p,u+2,v).times(i+""))),l=mo(l,new p(f),u),p.precision=v,t==null?(kr=!0,ar(l,v)):l;l=c,a+=2}}function LR(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Lh(r/yr),e.d=[],n=(r+1)%yr,r<0&&(n+=yr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=yr;n<a;)e.d.push(+t.slice(n,n+=yr));t=t.slice(n),n=yr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),kr&&(e.e>pb||e.e<-pb))throw Error(AP+r)}else e.s=0,e.e=0,e.d=[0];return e}function ar(e,t,r){var n,a,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=yr,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/yr),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=yr,a=n-yr+o}if(r!==void 0&&(i=yc(10,o-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/yc(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Jr(e),f.length=1,t=t-i-1,f[0]=yc(10,(yr-t%yr)%yr),e.e=Lh(-t/yr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=yc(10,yr-n),f[d]=a>0?(u/yc(10,o-a)%yc(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==xn&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=xn)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(kr&&(e.e>pb||e.e<-pb))throw Error(AP+Jr(e));return e}function oq(e,t){var r,n,a,i,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),kr?ar(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/yr),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=xn-1;--c[i],c[a]+=xn}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,kr?ar(t,m):t):new h(0)}function Pu(e,t,r){var n,a=Jr(e),i=ji(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Yo(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Yo(-a-1)+i,r&&(n=r-o)>0&&(i+=Yo(n))):a>=o?(i+=Yo(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Yo(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Yo(n))),e.s<0?"-"+i:i}function FR(e,t){if(e.length>t)return e.length=t,!0}function lq(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(eu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return LR(o,i.toString())}else if(typeof i!="string")throw Error(eu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,ePe.test(i))LR(o,i);else throw Error(eu+i)}if(a.prototype=Re,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=lq,a.config=a.set=tPe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function tPe(e){if(!e||typeof e!="object")throw Error(wa+"Object expected");var t,r,n,a=["precision",1,Ih,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Lh(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(eu+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(eu+r+": "+n);return this}var OP=lq(JEe);zs=new OP(1);const nr=OP;function rPe(e){return iPe(e)||aPe(e)||sPe(e)||nPe()}function nPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sPe(e,t){if(e){if(typeof e=="string")return mS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mS(e,t)}}function aPe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function iPe(e){if(Array.isArray(e))return mS(e)}function mS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oPe=function(t){return t},cq={"@@functional/placeholder":!0},uq=function(t){return t===cq},UR=function(t){return function r(){return arguments.length===0||arguments.length===1&&uq(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},lPe=function e(t,r){return t===1?r:UR(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==cq}).length;return o>=t?r.apply(void 0,a):e(t-o,UR(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return uq(f)?c.shift():f});return r.apply(void 0,rPe(d).concat(c))}))})},Iw=function(t){return lPe(t.length,t)},pS=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},cPe=Iw(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),uPe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return oPe;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},gS=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},dq=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function dPe(e){var t;return e===0?t=1:t=Math.floor(new nr(e).abs().log(10).toNumber())+1,t}function fPe(e,t,r){for(var n=new nr(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var hPe=Iw(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),mPe=Iw(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),pPe=Iw(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Lw={rangeStep:fPe,getDigitCount:dPe,interpolateNumber:hPe,uninterpolateNumber:mPe,uninterpolateTruncation:pPe};function vS(e){return yPe(e)||vPe(e)||fq(e)||gPe()}function gPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vPe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function yPe(e){if(Array.isArray(e))return yS(e)}function tg(e,t){return wPe(e)||bPe(e,t)||fq(e,t)||xPe()}function xPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fq(e,t){if(e){if(typeof e=="string")return yS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yS(e,t)}}function yS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bPe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function wPe(e){if(Array.isArray(e))return e}function hq(e){var t=tg(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function mq(e,t,r){if(e.lte(0))return new nr(0);var n=Lw.getDigitCount(e.toNumber()),a=new nr(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new nr(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new nr(Math.ceil(c))}function jPe(e,t,r){var n=1,a=new nr(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new nr(10).pow(Lw.getDigitCount(e)-1),a=new nr(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new nr(Math.floor(e)))}else e===0?a=new nr(Math.floor((t-1)/2)):r||(a=new nr(Math.floor(e)));var o=Math.floor((t-1)/2),l=uPe(cPe(function(c){return a.add(new nr(c-o).mul(n)).toNumber()}),pS);return l(0,t)}function pq(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new nr(0),tickMin:new nr(0),tickMax:new nr(0)};var i=mq(new nr(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new nr(0):(o=new nr(e).add(t).div(2),o=o.sub(new nr(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new nr(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?pq(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new nr(l).mul(i)),tickMax:o.add(new nr(c).mul(i))})}function _Pe(e){var t=tg(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=hq([r,n]),c=tg(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(vS(pS(0,a-1).map(function(){return 1/0}))):[].concat(vS(pS(0,a-1).map(function(){return-1/0})),[d]);return r>n?gS(f):f}if(u===d)return jPe(u,a,i);var h=pq(u,d,o,i),m=h.step,g=h.tickMin,p=h.tickMax,v=Lw.rangeStep(g,p.add(new nr(.1).mul(m)),m);return r>n?gS(v):v}function NPe(e,t){var r=tg(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=hq([n,a]),l=tg(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=mq(new nr(u).sub(c).div(d-1),i,0),h=[].concat(vS(Lw.rangeStep(new nr(c),new nr(u).sub(new nr(.99).mul(f)),f)),[u]);return n>a?gS(h):h}var SPe=dq(_Pe),CPe=dq(NPe),kPe="Invariant failed";function Au(e,t){throw new Error(kPe)}var EPe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}function gb(){return gb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gb.apply(this,arguments)}function PPe(e,t){return DPe(e)||TPe(e,t)||OPe(e,t)||APe()}function APe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OPe(e,t){if(e){if(typeof e=="string")return BR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BR(e,t)}}function BR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TPe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function DPe(e){if(Array.isArray(e))return e}function RPe(e,t){if(e==null)return{};var r=MPe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yq(n.key),n)}}function LPe(e,t,r){return t&&IPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function FPe(e,t,r){return t=vb(t),UPe(e,gq()?Reflect.construct(t,r||[],vb(e).constructor):t.apply(e,r))}function UPe(e,t){if(t&&(zf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BPe(e)}function BPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gq=function(){return!!e})()}function vb(e){return vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vb(e)}function zPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xS(e,t)}function xS(e,t){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xS(e,t)}function vq(e,t,r){return t=yq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yq(e){var t=VPe(e,"string");return zf(t)=="symbol"?t:t+""}function VPe(e,t){if(zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fv=function(e){function t(){return $Pe(this,t),FPe(this,t,arguments)}return zPe(t,e),LPe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=RPe(n,EPe),m=Ve(h,!1);this.props.direction==="x"&&d.type!=="number"&&Au();var g=c.map(function(p){var v=u(p,l),b=v.x,y=v.y,w=v.value,_=v.errorVal;if(!_)return null;var j=[],N,S;if(Array.isArray(_)){var k=PPe(_,2);N=k[0],S=k[1]}else N=S=_;if(i==="vertical"){var C=d.scale,P=y+a,A=P+o,E=P-o,R=C(w-N),$=C(w+S);j.push({x1:$,y1:A,x2:$,y2:E}),j.push({x1:R,y1:P,x2:$,y2:P}),j.push({x1:R,y1:A,x2:R,y2:E})}else if(i==="horizontal"){var B=f.scale,F=b+a,L=F-o,D=F+o,T=B(w-N),U=B(w+S);j.push({x1:L,y1:U,x2:D,y2:U}),j.push({x1:F,y1:T,x2:F,y2:U}),j.push({x1:L,y1:T,x2:D,y2:T})}return O.createElement(At,gb({className:"recharts-errorBar",key:"bar-".concat(j.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},m),j.map(function(X){return O.createElement("line",gb({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return O.createElement(At,{className:"recharts-errorBars"},g)}}])}(O.Component);vq(fv,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});vq(fv,"displayName","ErrorBar");function rg(e){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rg(e)}function zR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zR(Object(r),!0).forEach(function(n){qPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qPe(e,t,r){return t=WPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WPe(e){var t=HPe(e,"string");return rg(t)=="symbol"?t:t+""}function HPe(e,t){if(rg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xq=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Fs(r,Zc);if(!o)return null;var l=Zc.defaultProps,c=l!==void 0?cc(cc({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,g=m.sectors||m.data||[];return d.concat(g.map(function(p){return{type:o.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?cc(cc({},h),f.props):{},g=m.dataKey,p=m.name,v=m.legendType,b=m.hide;return{inactive:b,dataKey:g,type:c.iconType||v||"square",color:TP(f),value:p||g,payload:m}}),cc(cc(cc({},c),Zc.getWithHeight(o,a)),{},{payload:u,item:o})};function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function VR(e){return XPe(e)||YPe(e)||GPe(e)||KPe()}function KPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GPe(e,t){if(e){if(typeof e=="string")return bS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bS(e,t)}}function YPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function XPe(e){if(Array.isArray(e))return bS(e)}function bS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(r),!0).forEach(function(n){Zd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zd(e,t,r){return t=QPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QPe(e){var t=ZPe(e,"string");return ng(t)=="symbol"?t:t+""}function ZPe(e,t){if(ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wr(e,t,r){return it(e)||it(t)?r:fn(t)?Gs(e,t,r):Ye(t)?t(e):r}function ep(e,t,r,n){var a=YEe(e,function(l){return Wr(l,t)});if(r==="number"){var i=a.filter(function(l){return xe(l)||parseFloat(l)});return i.length?[$w(i),Mw(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!it(l)}):a;return o.map(function(l){return fn(l)||l instanceof Date?l:""})}var JPe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Jn(f-d)!==Jn(h-f)){var g=[];if(Jn(h-f)===Jn(c[1]-c[0])){m=h;var p=f+c[1]-c[0];g[0]=Math.min(p,(p+d)/2),g[1]=Math.max(p,(p+d)/2)}else{m=d;var v=h+c[1]-c[0];g[0]=Math.min(f,(v+f)/2),g[1]=Math.max(f,(v+f)/2)}var b=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>b[0]&&t<=b[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var y=Math.min(d,h),w=Math.max(d,h);if(t>(y+f)/2&&t<=(w+f)/2){o=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}return o},TP=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Fr(Fr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},eAe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var g=d[f[h]],p=g.items,v=g.cateAxisId,b=p.filter(function(S){return ho(S.type).indexOf("Bar")>=0});if(b&&b.length){var y=b[0].type.defaultProps,w=y!==void 0?Fr(Fr({},y),b[0].props):b[0].props,_=w.barSize,j=w[v];o[j]||(o[j]=[]);var N=it(_)?r:_;o[j].push({item:b[0],stackList:b.slice(1),barSize:it(N)?void 0:es(N,n,0)})}}return o},tAe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=es(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,g=o.reduce(function(_,j){return _+j.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var p=(a-g)/2>>0,v={offset:p-u,size:0};d=o.reduce(function(_,j){var N={item:j.item,position:{offset:v.offset+v.size+u,size:h?m:j.barSize}},S=[].concat(VR(_),[N]);return v=S[S.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(k){S.push({item:k,position:v})}),S},f)}else{var b=es(n,a,0,!0);a-2*b-(c-1)*u<=0&&(u=0);var y=(a-2*b-(c-1)*u)/c;y>1&&(y>>=0);var w=l===+l?Math.min(y,l):y;d=o.reduce(function(_,j,N){var S=[].concat(VR(_),[{item:j.item,position:{offset:b+(y+u)*N+(y-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(k){S.push({item:k,position:S[S.length-1].position})}),S},f)}return d},rAe=function(t,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=xq({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,g=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&m!=="center"&&xe(t[m]))return Fr(Fr({},t),{},Zd({},m,t[m]+(f||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&g!=="middle"&&xe(t[g]))return Fr(Fr({},t),{},Zd({},g,t[g]+(h||0)))}return t},nAe=function(t,r,n){return it(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},bq=function(t,r,n,a,i){var o=r.props.children,l=Ys(o,fv).filter(function(u){return nAe(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Wr(d,n);if(it(f))return u;var h=Array.isArray(f)?[$w(f),Mw(f)]:[f,f],m=c.reduce(function(g,p){var v=Wr(d,p,0),b=h[0]-Math.abs(Array.isArray(v)?v[0]:v),y=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(b,g[0]),Math.max(y,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},sAe=function(t,r,n,a,i){var o=r.map(function(l){return bq(t,l,n,i,a)}).filter(function(l){return!it(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},wq=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&bq(t,c,u,a)||ep(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},jq=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},_q=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},uo=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Jn(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!iv(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},k_=new WeakMap,ly=function(t,r){if(typeof r!="function")return t;k_.has(t)||k_.set(t,new WeakMap);var n=k_.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},Nq=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Yp(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:db(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Jm(),realScaleType:"point"}:i==="category"?{scale:Yp(),realScaleType:"band"}:{scale:db(),realScaleType:"linear"};if(Cu(a)){var c="scale".concat(bw(a));return{scale:(IR[c]||Jm)(),realScaleType:IR[c]?c:"point"}}return Ye(a)?{scale:a}:{scale:Jm(),realScaleType:"point"}},WR=1e-4,Sq=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-WR,o=Math.max(a[0],a[1])+WR,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},aAe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},iAe=function(t,r){if(!r||r.length!==2||!xe(r[0])||!xe(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!xe(t[0])||t[0]<n)&&(i[0]=n),(!xe(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},oAe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=iv(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},lAe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=iv(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},cAe={sign:oAe,expand:Eye,none:Rf,silhouette:Pye,wiggle:Aye,positive:lAe},uAe=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=cAe[n],o=kye().keys(a).value(function(l,c){return+Wr(l,c,0)}).order(W1).offset(i);return o(t)},dAe=function(t,r,n,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Fr(Fr({},h.type.defaultProps),h.props):h.props,p=g.stackId,v=g.hide;if(v)return f;var b=g[n],y=f[b]||{hasStack:!1,stackGroups:{}};if(fn(p)){var w=y.stackGroups[p]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(h),y.hasStack=!0,y.stackGroups[p]=w}else y.stackGroups[Oh("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Fr(Fr({},f),{},Zd({},b,y))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,v){var b=m.stackGroups[v];return Fr(Fr({},p),{},Zd({},v,{numericAxisId:n,cateAxisId:a,items:b.items,stackedData:uAe(t,b.items,i)}))},g)}return Fr(Fr({},f),{},Zd({},h,m))},d)},Cq=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=SPe(u,i,l);return t.domain([$w(d),Mw(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=CPe(f,i,l);return{niceTicks:h}}return null};function HR(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!it(a[t.dataKey])){var l=qx(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Wr(a,it(o)?t.dataKey:o);return it(c)?null:t.scale(c)}var KR=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=Wr(o,r.dataKey,r.domain[l]);return it(c)?null:r.scale(c)-i/2+a},fAe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},hAe=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Fr(Fr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(fn(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},mAe=function(t){return t.reduce(function(r,n){return[$w(n.concat([r[0]]).filter(xe)),Mw(n.concat([r[1]]).filter(xe))]},[1/0,-1/0])},kq=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=mAe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},GR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,YR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wS=function(t,r,n){if(Ye(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(xe(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(GR.test(t[0])){var i=+GR.exec(t[0])[1];a[0]=r[0]-i}else Ye(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(xe(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(YR.test(t[1])){var o=+YR.exec(t[1])[1];a[1]=r[1]+o}else Ye(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},yb=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=iP(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},XR=function(t,r,n){return!t||!t.length||$h(t,Gs(n,"type.defaultProps.domain"))?r:t},Eq=function(t,r){var n=t.type.defaultProps?Fr(Fr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Fr(Fr({},Ve(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:TP(t),value:Wr(r,a),type:c,payload:r,chartType:u,hide:d})};function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}function QR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QR(Object(r),!0).forEach(function(n){Pq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pq(e,t,r){return t=pAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pAe(e){var t=gAe(e,"string");return sg(t)=="symbol"?t:t+""}function gAe(e,t){if(sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vAe(e,t){return wAe(e)||bAe(e,t)||xAe(e,t)||yAe()}function yAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xAe(e,t){if(e){if(typeof e=="string")return ZR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZR(e,t)}}function ZR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bAe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function wAe(e){if(Array.isArray(e))return e}var xb=Math.PI/180,jAe=function(t){return t*180/Math.PI},Ht=function(t,r,n,a){return{x:t+Math.cos(-xb*a)*n,y:r+Math.sin(-xb*a)*n}},Aq=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Oq=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=es(t.cx,o,o/2),f=es(t.cy,l,l/2),h=Aq(o,l,n),m=es(t.innerRadius,h,0),g=es(t.outerRadius,h,h*.8),p=Object.keys(r);return p.reduce(function(v,b){var y=r[b],w=y.domain,_=y.reversed,j;if(it(y.range))a==="angleAxis"?j=[c,u]:a==="radiusAxis"&&(j=[m,g]),_&&(j=[j[1],j[0]]);else{j=y.range;var N=j,S=vAe(N,2);c=S[0],u=S[1]}var k=Nq(y,i),C=k.realScaleType,P=k.scale;P.domain(w).range(j),Sq(P);var A=Cq(P,Ji(Ji({},y),{},{realScaleType:C})),E=Ji(Ji(Ji({},y),A),{},{range:j,radius:g,realScaleType:C,scale:P,cx:d,cy:f,innerRadius:m,outerRadius:g,startAngle:c,endAngle:u});return Ji(Ji({},v),{},Pq({},b,E))},{})},_Ae=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},NAe=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,l=_Ae({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:jAe(u),angleInRadian:u}},SAe=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},CAe=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},JR=function(t,r){var n=t.x,a=t.y,i=NAe({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=SAe(r),f=d.startAngle,h=d.endAngle,m=l,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?Ji(Ji({},r),{},{radius:o,angle:CAe(m,r)}):null},Tq=function(t){return!x.isValidElement(t)&&!Ye(t)&&typeof t!="boolean"?t.className:""};function ag(e){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ag(e)}var kAe=["offset"];function EAe(e){return TAe(e)||OAe(e)||AAe(e)||PAe()}function PAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AAe(e,t){if(e){if(typeof e=="string")return jS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jS(e,t)}}function OAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TAe(e){if(Array.isArray(e))return jS(e)}function jS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DAe(e,t){if(e==null)return{};var r=RAe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function RAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function eM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eM(Object(r),!0).forEach(function(n){MAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MAe(e,t,r){return t=$Ae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Ae(e){var t=IAe(e,"string");return ag(t)=="symbol"?t:t+""}function IAe(e,t){if(ag(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ig(){return ig=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ig.apply(this,arguments)}var LAe=function(t){var r=t.value,n=t.formatter,a=it(t.children)?r:t.children;return Ye(n)?n(a):a},FAe=function(t,r){var n=Jn(r-t),a=Math.min(Math.abs(r-t),360);return n*a},UAe=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,p=c.clockWise,v=(f+h)/2,b=FAe(m,g),y=b>=0?1:-1,w,_;a==="insideStart"?(w=m+y*o,_=p):a==="insideEnd"?(w=g-y*o,_=!p):a==="end"&&(w=g+y*o,_=p),_=b<=0?_:!_;var j=Ht(u,d,v,w),N=Ht(u,d,v,w+(_?1:-1)*359),S="M".concat(j.x,",").concat(j.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(_?0:1,`,
    `).concat(N.x,",").concat(N.y),k=it(t.id)?Oh("recharts-radial-line-"):t.id;return O.createElement("text",ig({},n,{dominantBaseline:"central",className:at("recharts-radial-bar-label",l)}),O.createElement("defs",null,O.createElement("path",{id:k,d:S})),O.createElement("textPath",{xlinkHref:"#".concat(k)},r))},BAe=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var m=Ht(o,l,u+n,h),g=m.x,p=m.y;return{x:g,y:p,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,b=Ht(o,l,v,h),y=b.x,w=b.y;return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},zAe=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",g=f>0?"start":"end",p=u>=0?1:-1,v=p*a,b=p>0?"end":"start",y=p>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return nn(nn({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return nn(nn({},_),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return nn(nn({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(i==="right"){var N={x:l+u+v,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return nn(nn({},N),n?{width:Math.max(n.x+n.width-N.x,0),height:d}:{})}var S=n?{width:u,height:d}:{};return i==="insideLeft"?nn({x:l+v,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},S):i==="insideRight"?nn({x:l+u-v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},S):i==="insideTop"?nn({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},S):i==="insideBottom"?nn({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},S):i==="insideTopLeft"?nn({x:l+v,y:c+h,textAnchor:y,verticalAnchor:g},S):i==="insideTopRight"?nn({x:l+u-v,y:c+h,textAnchor:b,verticalAnchor:g},S):i==="insideBottomLeft"?nn({x:l+v,y:c+d-h,textAnchor:y,verticalAnchor:m},S):i==="insideBottomRight"?nn({x:l+u-v,y:c+d-h,textAnchor:b,verticalAnchor:m},S):kh(i)&&(xe(i.x)||$c(i.x))&&(xe(i.y)||$c(i.y))?nn({x:l+es(i.x,u),y:c+es(i.y,d),textAnchor:"end",verticalAnchor:"end"},S):nn({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},VAe=function(t){return"cx"in t&&xe(t.cx)};function wn(e){var t=e.offset,r=t===void 0?5:t,n=DAe(e,kAe),a=nn({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||it(l)&&it(c)&&!x.isValidElement(u)&&!Ye(u))return null;if(x.isValidElement(u))return x.cloneElement(u,a);var m;if(Ye(u)){if(m=x.createElement(u,a),x.isValidElement(m))return m}else m=LAe(a);var g=VAe(i),p=Ve(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return UAe(a,m,p);var v=g?BAe(a):zAe(a);return O.createElement(Eu,ig({className:at("recharts-label",f)},p,v,{breakAll:h}),m)}wn.displayName="Label";var Dq=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,g=t.left,p=t.width,v=t.height,b=t.clockWise,y=t.labelViewBox;if(y)return y;if(xe(p)&&xe(v)){if(xe(f)&&xe(h))return{x:f,y:h,width:p,height:v};if(xe(m)&&xe(g))return{x:m,y:g,width:p,height:v}}return xe(f)&&xe(h)?{x:f,y:h,width:0,height:0}:xe(r)&&xe(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},qAe=function(t,r){return t?t===!0?O.createElement(wn,{key:"label-implicit",viewBox:r}):fn(t)?O.createElement(wn,{key:"label-implicit",viewBox:r,value:t}):x.isValidElement(t)?t.type===wn?x.cloneElement(t,{key:"label-implicit",viewBox:r}):O.createElement(wn,{key:"label-implicit",content:t,viewBox:r}):Ye(t)?O.createElement(wn,{key:"label-implicit",content:t,viewBox:r}):kh(t)?O.createElement(wn,ig({viewBox:r},t,{key:"label-implicit"})):null:null},WAe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=Dq(t),o=Ys(a,wn).map(function(c,u){return x.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=qAe(t.label,r||i);return[l].concat(EAe(o))};wn.parseViewBox=Dq;wn.renderCallByParent=WAe;function HAe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var KAe=HAe;const Rq=Kt(KAe);function og(e){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(e)}var GAe=["valueAccessor"],YAe=["data","dataKey","clockWise","id","textBreakAll"];function XAe(e){return e2e(e)||JAe(e)||ZAe(e)||QAe()}function QAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZAe(e,t){if(e){if(typeof e=="string")return _S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _S(e,t)}}function JAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function e2e(e){if(Array.isArray(e))return _S(e)}function _S(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bb(){return bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bb.apply(this,arguments)}function tM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tM(Object(r),!0).forEach(function(n){t2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t2e(e,t,r){return t=r2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r2e(e){var t=n2e(e,"string");return og(t)=="symbol"?t:t+""}function n2e(e,t){if(og(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nM(e,t){if(e==null)return{};var r=s2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var a2e=function(t){return Array.isArray(t.value)?Rq(t.value):t.value};function Ei(e){var t=e.valueAccessor,r=t===void 0?a2e:t,n=nM(e,GAe),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=nM(n,YAe);return!a||!a.length?null:O.createElement(At,{className:"recharts-label-list"},a.map(function(d,f){var h=it(i)?r(d,f):Wr(d&&d.payload,i),m=it(l)?{}:{id:"".concat(l,"-").concat(f)};return O.createElement(wn,bb({},Ve(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:wn.parseViewBox(it(o)?d:rM(rM({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Ei.displayName="LabelList";function i2e(e,t){return e?e===!0?O.createElement(Ei,{key:"labelList-implicit",data:t}):O.isValidElement(e)||Ye(e)?O.createElement(Ei,{key:"labelList-implicit",data:t,content:e}):kh(e)?O.createElement(Ei,bb({data:t},e,{key:"labelList-implicit"})):null:null}function o2e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Ys(n,Ei).map(function(o,l){return x.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=i2e(e.label,t);return[i].concat(XAe(a))}Ei.renderCallByParent=o2e;function lg(e){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lg(e)}function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NS.apply(this,arguments)}function sM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sM(Object(r),!0).forEach(function(n){l2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l2e(e,t,r){return t=c2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c2e(e){var t=u2e(e,"string");return lg(t)=="symbol"?t:t+""}function u2e(e,t){if(lg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d2e=function(t,r){var n=Jn(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},cy=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/xb,h=u?i:i+o*f,m=Ht(r,n,d,h),g=Ht(r,n,a,h),p=u?i-o*f:i,v=Ht(r,n,d*Math.cos(f*xb),p);return{center:m,circleTangency:g,lineTangency:v,theta:f}},Mq=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=d2e(o,l),u=o+c,d=Ht(r,n,i,o),f=Ht(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=Ht(r,n,a,o),g=Ht(r,n,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},f2e=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Jn(d-u),h=cy({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,p=h.theta,v=cy({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),b=v.circleTangency,y=v.lineTangency,w=v.theta,_=c?Math.abs(u-d):Math.abs(u-d)-p-w;if(_<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Mq({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var N=cy({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=N.circleTangency,k=N.lineTangency,C=N.theta,P=cy({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=P.circleTangency,E=P.lineTangency,R=P.theta,$=c?Math.abs(u-d):Math.abs(u-d)-C-R;if($<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(a,",").concat(a,",0,").concat(+($>180),",").concat(+(f>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},h2e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$q=function(t){var r=aM(aM({},h2e),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<i||d===f)return null;var m=at("recharts-sector",h),g=o-i,p=es(l,g,0,!0),v;return p>0&&Math.abs(d-f)<360?v=f2e({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):v=Mq({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),O.createElement("path",NS({},Ve(r,!0),{className:m,d:v,role:"img"}))};function cg(e){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cg(e)}function SS(){return SS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SS.apply(this,arguments)}function iM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iM(Object(r),!0).forEach(function(n){m2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m2e(e,t,r){return t=p2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p2e(e){var t=g2e(e,"string");return cg(t)=="symbol"?t:t+""}function g2e(e,t){if(cg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lM={curveBasisClosed:gye,curveBasisOpen:vye,curveBasis:pye,curveBumpX:tye,curveBumpY:rye,curveLinearClosed:yye,curveLinear:jw,curveMonotoneX:xye,curveMonotoneY:bye,curveNatural:wye,curveStep:jye,curveStepAfter:Nye,curveStepBefore:_ye},uy=function(t){return t.x===+t.x&&t.y===+t.y},ym=function(t){return t.x},xm=function(t){return t.y},v2e=function(t,r){if(Ye(t))return t;var n="curve".concat(bw(t));return(n==="curveMonotone"||n==="curveBump")&&r?lM["".concat(n).concat(r==="vertical"?"Y":"X")]:lM[n]||jw},y2e=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=v2e(n,l),f=u?i.filter(function(p){return uy(p)}):i,h;if(Array.isArray(o)){var m=u?o.filter(function(p){return uy(p)}):o,g=f.map(function(p,v){return oM(oM({},p),{},{base:m[v]})});return l==="vertical"?h=ey().y(xm).x1(ym).x0(function(p){return p.base.x}):h=ey().x(ym).y1(xm).y0(function(p){return p.base.y}),h.defined(uy).curve(d),h(g)}return l==="vertical"&&xe(o)?h=ey().y(xm).x1(ym).x0(o):xe(o)?h=ey().x(ym).y1(xm).y0(o):h=Ez().x(ym).y(xm),h.defined(uy).curve(d),h(f)},wb=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?y2e(t):a;return x.createElement("path",SS({},Ve(t,!1),Wx(t),{className:at("recharts-curve",r),d:o,ref:i}))},Iq={exports:{}},x2e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",b2e=x2e,w2e=b2e;function Lq(){}function Fq(){}Fq.resetWarningCache=Lq;var j2e=function(){function e(n,a,i,o,l,c){if(c!==w2e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Fq,resetWarningCache:Lq};return r.PropTypes=r,r};Iq.exports=j2e();var _2e=Iq.exports;const Yt=Kt(_2e);var N2e=Object.getOwnPropertyNames,S2e=Object.getOwnPropertySymbols,C2e=Object.prototype.hasOwnProperty;function cM(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function dy(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function uM(e){return N2e(e).concat(S2e(e))}var k2e=Object.hasOwn||function(e,t){return C2e.call(e,t)};function Hu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var E2e="__v",P2e="__o",A2e="_owner",dM=Object.getOwnPropertyDescriptor,fM=Object.keys;function O2e(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function T2e(e,t){return Hu(e.getTime(),t.getTime())}function D2e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function R2e(e,t){return e===t}function hM(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,m=l.value;if(r.equals(h[0],m[0],c,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var M2e=Hu;function $2e(e,t,r){var n=fM(e),a=n.length;if(fM(t).length!==a)return!1;for(;a-- >0;)if(!Uq(e,t,r,n[a]))return!1;return!0}function bm(e,t,r){var n=uM(e),a=n.length;if(uM(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!Uq(e,t,r,i)||(o=dM(e,i),l=dM(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function I2e(e,t){return Hu(e.valueOf(),t.valueOf())}function L2e(e,t){return e.source===t.source&&e.flags===t.flags}function mM(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function F2e(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function U2e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Uq(e,t,r,n){return(n===A2e||n===P2e||n===E2e)&&(e.$$typeof||t.$$typeof)?!0:k2e(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var B2e="[object Arguments]",z2e="[object Boolean]",V2e="[object Date]",q2e="[object Error]",W2e="[object Map]",H2e="[object Number]",K2e="[object Object]",G2e="[object RegExp]",Y2e="[object Set]",X2e="[object String]",Q2e="[object URL]",Z2e=Array.isArray,pM=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,gM=Object.assign,J2e=Object.prototype.toString.call.bind(Object.prototype.toString);function eOe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,p,v){if(g===p)return!0;if(g==null||p==null)return!1;var b=typeof g;if(b!==typeof p)return!1;if(b!=="object")return b==="number"?o(g,p,v):b==="function"?a(g,p,v):!1;var y=g.constructor;if(y!==p.constructor)return!1;if(y===Object)return l(g,p,v);if(Z2e(g))return t(g,p,v);if(pM!=null&&pM(g))return f(g,p,v);if(y===Date)return r(g,p,v);if(y===RegExp)return u(g,p,v);if(y===Map)return i(g,p,v);if(y===Set)return d(g,p,v);var w=J2e(g);return w===V2e?r(g,p,v):w===G2e?u(g,p,v):w===W2e?i(g,p,v):w===Y2e?d(g,p,v):w===K2e?typeof g.then!="function"&&typeof p.then!="function"&&l(g,p,v):w===Q2e?h(g,p,v):w===q2e?n(g,p,v):w===B2e?l(g,p,v):w===z2e||w===H2e||w===X2e?c(g,p,v):!1}}function tOe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?bm:O2e,areDatesEqual:T2e,areErrorsEqual:D2e,areFunctionsEqual:R2e,areMapsEqual:n?cM(hM,bm):hM,areNumbersEqual:M2e,areObjectsEqual:n?bm:$2e,arePrimitiveWrappersEqual:I2e,areRegExpsEqual:L2e,areSetsEqual:n?cM(mM,bm):mM,areTypedArraysEqual:n?bm:F2e,areUrlsEqual:U2e};if(r&&(a=gM({},a,r(a))),t){var i=dy(a.areArraysEqual),o=dy(a.areMapsEqual),l=dy(a.areObjectsEqual),c=dy(a.areSetsEqual);a=gM({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function rOe(e){return function(t,r,n,a,i,o,l){return e(t,r,l)}}function nOe(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(c,u,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var sOe=tc();tc({strict:!0});tc({circular:!0});tc({circular:!0,strict:!0});tc({createInternalComparator:function(){return Hu}});tc({strict:!0,createInternalComparator:function(){return Hu}});tc({circular:!0,createInternalComparator:function(){return Hu}});tc({circular:!0,createInternalComparator:function(){return Hu},strict:!0});function tc(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=tOe(e),c=eOe(l),u=n?n(c):rOe(c);return nOe({circular:r,comparator:c,createState:a,equals:u,strict:o})}function aOe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function vM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):aOe(a)};requestAnimationFrame(n)}function CS(e){"@babel/helpers - typeof";return CS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CS(e)}function iOe(e){return uOe(e)||cOe(e)||lOe(e)||oOe()}function oOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lOe(e,t){if(e){if(typeof e=="string")return yM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yM(e,t)}}function yM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uOe(e){if(Array.isArray(e))return e}function dOe(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=iOe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){vM(a.bind(null,u),c);return}a(c),vM(a.bind(null,u));return}CS(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function ug(e){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ug(e)}function xM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xM(Object(r),!0).forEach(function(n){Bq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bq(e,t,r){return t=fOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fOe(e){var t=hOe(e,"string");return ug(t)==="symbol"?t:String(t)}function hOe(e,t){if(ug(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ug(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mOe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},pOe=function(t){return t},gOe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},tp=function(t,r){return Object.keys(r).reduce(function(n,a){return bM(bM({},n),{},Bq({},a,t(a,r[a])))},{})},wM=function(t,r,n){return t.map(function(a){return"".concat(gOe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function vOe(e,t){return bOe(e)||xOe(e,t)||zq(e,t)||yOe()}function yOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function bOe(e){if(Array.isArray(e))return e}function wOe(e){return NOe(e)||_Oe(e)||zq(e)||jOe()}function jOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zq(e,t){if(e){if(typeof e=="string")return kS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kS(e,t)}}function _Oe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function NOe(e){if(Array.isArray(e))return kS(e)}function kS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jb=1e-4,Vq=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},qq=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},jM=function(t,r){return function(n){var a=Vq(t,r);return qq(a,n)}},SOe=function(t,r){return function(n){var a=Vq(t,r),i=[].concat(wOe(a.map(function(o,l){return o*l}).slice(1)),[0]);return qq(i,n)}},_M=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=vOe(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var f=jM(a,o),h=jM(i,l),m=SOe(a,o),g=function(b){return b>1?1:b<0?0:b},p=function(b){for(var y=b>1?1:b,w=y,_=0;_<8;++_){var j=f(w)-y,N=m(w);if(Math.abs(j-y)<jb||N<jb)return h(w);w=g(w-j/N)}return h(w)};return p.isStepper=!1,p},COe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var m=-(d-f)*n,g=h*i,p=h+(m-g)*l/1e3,v=h*l/1e3+d;return Math.abs(v-f)<jb&&Math.abs(p)<jb?[f,0]:[v,p]};return c.isStepper=!0,c.dt=l,c},kOe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _M(a);case"spring":return COe();default:if(a.split("(")[0]==="cubic-bezier")return _M(a)}return typeof a=="function"?a:null};function dg(e){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dg(e)}function NM(e){return AOe(e)||POe(e)||Wq(e)||EOe()}function EOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function POe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AOe(e){if(Array.isArray(e))return PS(e)}function SM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SM(Object(r),!0).forEach(function(n){ES(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ES(e,t,r){return t=OOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OOe(e){var t=TOe(e,"string");return dg(t)==="symbol"?t:String(t)}function TOe(e,t){if(dg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DOe(e,t){return $Oe(e)||MOe(e,t)||Wq(e,t)||ROe()}function ROe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wq(e,t){if(e){if(typeof e=="string")return PS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PS(e,t)}}function PS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function $Oe(e){if(Array.isArray(e))return e}var _b=function(t,r,n){return t+(r-t)*n},AS=function(t){var r=t.from,n=t.to;return r!==n},IOe=function e(t,r,n){var a=tp(function(i,o){if(AS(o)){var l=t(o.from,o.to,o.velocity),c=DOe(l,2),u=c[0],d=c[1];return kn(kn({},o),{},{from:u,velocity:d})}return o},r);return n<1?tp(function(i,o){return AS(o)?kn(kn({},o),{},{velocity:_b(o.velocity,a[i].velocity,n),from:_b(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const LOe=function(e,t,r,n,a){var i=mOe(e,t),o=i.reduce(function(v,b){return kn(kn({},v),{},ES({},b,[e[b],t[b]]))},{}),l=i.reduce(function(v,b){return kn(kn({},v),{},ES({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return tp(function(b,y){return y.from},l)},m=function(){return!Object.values(l).filter(AS).length},g=function(b){u||(u=b);var y=b-u,w=y/r.dt;l=IOe(r,l,w),a(kn(kn(kn({},e),t),h())),u=b,m()||(c=requestAnimationFrame(f))},p=function(b){d||(d=b);var y=(b-d)/n,w=tp(function(j,N){return _b.apply(void 0,NM(N).concat([r(y)]))},o);if(a(kn(kn(kn({},e),t),w)),y<1)c=requestAnimationFrame(f);else{var _=tp(function(j,N){return _b.apply(void 0,NM(N).concat([r(1)]))},o);a(kn(kn(kn({},e),t),_))}};return f=r.isStepper?g:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}var FOe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function UOe(e,t){if(e==null)return{};var r=BOe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BOe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function E_(e){return WOe(e)||qOe(e)||VOe(e)||zOe()}function zOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VOe(e,t){if(e){if(typeof e=="string")return OS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OS(e,t)}}function qOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WOe(e){if(Array.isArray(e))return OS(e)}function OS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CM(Object(r),!0).forEach(function(n){Rm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rm(e,t,r){return t=Hq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KOe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hq(n.key),n)}}function GOe(e,t,r){return t&&KOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hq(e){var t=YOe(e,"string");return Vf(t)==="symbol"?t:String(t)}function YOe(e,t){if(Vf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TS(e,t)}function TS(e,t){return TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},TS(e,t)}function QOe(e){var t=ZOe();return function(){var n=Nb(e),a;if(t){var i=Nb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return DS(this,a)}}function DS(e,t){if(t&&(Vf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RS(e)}function RS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZOe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nb(e){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nb(e)}var si=function(e){XOe(r,e);var t=QOe(r);function r(n,a){var i;HOe(this,r),i=t.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(RS(i)),i.changeStyle=i.changeStyle.bind(RS(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),DS(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},DS(i);i.state={style:c?Rm({},c,u):u}}else i.state={style:{}};return i}return GOe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!o){var m={style:c?Rm({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(sOe(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||u?f:a.to;if(this.state&&h){var v={style:c?Rm({},c,p):p};(c&&h[c]!==p||!c&&h!==p)&&this.setState(v)}this.runAnimation(Oa(Oa({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=LOe(o,l,kOe(u),c,this.changeStyle),g=function(){i.stopJSAnimation=m()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(p,v,b){if(b===0)return p;var y=v.duration,w=v.easing,_=w===void 0?"ease":w,j=v.style,N=v.properties,S=v.onAnimationEnd,k=b>0?o[b-1]:v,C=N||Object.keys(j);if(typeof _=="function"||_==="spring")return[].concat(E_(p),[i.runJSAnimation.bind(i,{from:k.style,to:j,duration:y,easing:_}),y]);var P=wM(C,y,_),A=Oa(Oa(Oa({},k.style),j),{},{transition:P});return[].concat(E_(p),[A,y,S]).filter(pOe)};return this.manager.start([c].concat(E_(o.reduce(m,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=dOe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var p=l?Rm({},l,c):c,v=wM(Object.keys(p),o,u);g.start([d,i,Oa(Oa({},p),{},{transition:v}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=UOe(a,FOe),u=x.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(m){var g=m.props,p=g.style,v=p===void 0?{}:p,b=g.className,y=x.cloneElement(m,Oa(Oa({},c),{},{style:Oa(Oa({},v),d),className:b}));return y};return u===1?f(x.Children.only(i)):O.createElement("div",null,x.Children.map(i,function(h){return f(h)}))}}]),r}(x.PureComponent);si.displayName="Animate";si.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};si.propTypes={from:Yt.oneOfType([Yt.object,Yt.string]),to:Yt.oneOfType([Yt.object,Yt.string]),attributeName:Yt.string,duration:Yt.number,begin:Yt.number,easing:Yt.oneOfType([Yt.string,Yt.func]),steps:Yt.arrayOf(Yt.shape({duration:Yt.number.isRequired,style:Yt.object.isRequired,easing:Yt.oneOfType([Yt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Yt.func]),properties:Yt.arrayOf("string"),onAnimationEnd:Yt.func})),children:Yt.oneOfType([Yt.node,Yt.func]),isActive:Yt.bool,canBegin:Yt.bool,onAnimationEnd:Yt.func,shouldReAnimate:Yt.bool,onAnimationStart:Yt.func,onAnimationReStart:Yt.func};function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sb.apply(this,arguments)}function JOe(e,t){return nTe(e)||rTe(e,t)||tTe(e,t)||eTe()}function eTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tTe(e,t){if(e){if(typeof e=="string")return kM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kM(e,t)}}function kM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function nTe(e){if(Array.isArray(e))return e}function EM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EM(Object(r),!0).forEach(function(n){sTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sTe(e,t,r){return t=aTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aTe(e){var t=iTe(e,"string");return fg(t)=="symbol"?t:t+""}function iTe(e,t){if(fg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AM=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>o?o:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);d="M ".concat(t,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(r,`
            L `).concat(t+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*g,`
            L `).concat(t+n,",").concat(r+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n-c*g,",").concat(r+a,`
            L `).concat(t+c*g,",").concat(r+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*g," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},oTe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},lTe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DP=function(t){var r=PM(PM({},lTe),t),n=x.useRef(),a=x.useState(-1),i=JOe(a,2),o=i[0],l=i[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,g=r.animationEasing,p=r.animationDuration,v=r.animationBegin,b=r.isAnimationActive,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=at("recharts-rectangle",m);return y?O.createElement(si,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:p,animationEasing:g,isActive:y},function(_){var j=_.width,N=_.height,S=_.x,k=_.y;return O.createElement(si,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,isActive:b,easing:g},O.createElement("path",Sb({},Ve(r,!0),{className:w,d:AM(S,k,j,N,h),ref:n})))}):O.createElement("path",Sb({},Ve(r,!0),{className:w,d:AM(c,u,d,f,h)}))},cTe=["points","className","baseLinePoints","connectNulls"];function Td(){return Td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Td.apply(this,arguments)}function uTe(e,t){if(e==null)return{};var r=dTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function OM(e){return pTe(e)||mTe(e)||hTe(e)||fTe()}function fTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hTe(e,t){if(e){if(typeof e=="string")return MS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MS(e,t)}}function mTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pTe(e){if(Array.isArray(e))return MS(e)}function MS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var TM=function(t){return t&&t.x===+t.x&&t.y===+t.y},gTe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){TM(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),TM(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},rp=function(t,r){var n=gTe(t);r&&(n=[n.reduce(function(i,o){return[].concat(OM(i),OM(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},vTe=function(t,r,n){var a=rp(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(rp(r.reverse(),n).slice(1))},Kq=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,o=uTe(t,cTe);if(!r||!r.length)return null;var l=at("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=vTe(r,a,i);return O.createElement("g",{className:l},O.createElement("path",Td({},Ve(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?O.createElement("path",Td({},Ve(o,!0),{fill:"none",d:rp(r,i)})):null,c?O.createElement("path",Td({},Ve(o,!0),{fill:"none",d:rp(a,i)})):null)}var d=rp(r,i);return O.createElement("path",Td({},Ve(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function $S(){return $S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$S.apply(this,arguments)}var hv=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=at("recharts-dot",i);return r===+r&&n===+n&&a===+a?x.createElement("circle",$S({},Ve(t,!1),Wx(t),{className:o,cx:r,cy:n,r:a})):null};function hg(e){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(e)}var yTe=["x","y","top","left","width","height","className"];function IS(){return IS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IS.apply(this,arguments)}function DM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xTe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DM(Object(r),!0).forEach(function(n){bTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bTe(e,t,r){return t=wTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wTe(e){var t=jTe(e,"string");return hg(t)=="symbol"?t:t+""}function jTe(e,t){if(hg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Te(e,t){if(e==null)return{};var r=NTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var STe=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},CTe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,g=t.className,p=_Te(t,yTe),v=xTe({x:n,y:i,top:l,left:u,width:f,height:m},p);return!xe(n)||!xe(i)||!xe(f)||!xe(m)||!xe(l)||!xe(u)?null:O.createElement("path",IS({},Ve(v,!0),{className:at("recharts-cross",g),d:STe(n,i,f,m,l,u)}))},kTe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function mg(e){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(e)}function ETe(e,t){if(e==null)return{};var r=PTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function PTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ko(){return ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ko.apply(this,arguments)}function RM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RM(Object(r),!0).forEach(function(n){ATe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ATe(e,t,r){return t=OTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OTe(e){var t=TTe(e,"string");return mg(t)=="symbol"?t:t+""}function TTe(e,t){if(mg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DTe=function(t,r,n,a){var i="";return a.forEach(function(o,l){var c=Ht(r,n,t,o);l?i+="L ".concat(c.x,",").concat(c.y):i+="M ".concat(c.x,",").concat(c.y)}),i+="Z",i},RTe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.polarAngles,l=t.radialLines;if(!o||!o.length||!l)return null;var c=pg({stroke:"#ccc"},Ve(t,!1));return O.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(u){var d=Ht(r,n,a,u),f=Ht(r,n,i,u);return O.createElement("line",ko({},c,{key:"line-".concat(u),x1:d.x,y1:d.y,x2:f.x,y2:f.y}))}))},MTe=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.index,o=pg(pg({stroke:"#ccc"},Ve(t,!1)),{},{fill:"none"});return O.createElement("circle",ko({},o,{className:at("recharts-polar-grid-concentric-circle",t.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},$Te=function(t){var r=t.radius,n=t.index,a=pg(pg({stroke:"#ccc"},Ve(t,!1)),{},{fill:"none"});return O.createElement("path",ko({},a,{className:at("recharts-polar-grid-concentric-polygon",t.className),key:"path-".concat(n),d:DTe(r,t.cx,t.cy,t.polarAngles)}))},ITe=function(t){var r=t.polarRadius,n=t.gridType;return!r||!r.length?null:O.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var o=i;return n==="circle"?O.createElement(MTe,ko({key:o},t,{radius:a,index:i})):O.createElement($Te,ko({key:o},t,{radius:a,index:i}))}))},Gq=function(t){var r=t.cx,n=r===void 0?0:r,a=t.cy,i=a===void 0?0:a,o=t.innerRadius,l=o===void 0?0:o,c=t.outerRadius,u=c===void 0?0:c,d=t.gridType,f=d===void 0?"polygon":d,h=t.radialLines,m=h===void 0?!0:h,g=ETe(t,kTe);return u<=0?null:O.createElement("g",{className:"recharts-polar-grid"},O.createElement(RTe,ko({cx:n,cy:i,innerRadius:l,outerRadius:u,gridType:f,radialLines:m},g)),O.createElement(ITe,ko({cx:n,cy:i,innerRadius:l,outerRadius:u,gridType:f,radialLines:m},g)))};Gq.displayName="PolarGrid";var LTe=Rw,FTe=rq,UTe=Wi;function BTe(e,t){return e&&e.length?LTe(e,UTe(t),FTe):void 0}var zTe=BTe;const VTe=Kt(zTe);var qTe=Rw,WTe=Wi,HTe=nq;function KTe(e,t){return e&&e.length?qTe(e,WTe(t),HTe):void 0}var GTe=KTe;const YTe=Kt(GTe);var XTe=["cx","cy","angle","ticks","axisLine"],QTe=["ticks","tick","angle","tickFormatter","stroke"];function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function np(){return np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},np.apply(this,arguments)}function MM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MM(Object(r),!0).forEach(function(n){Fw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $M(e,t){if(e==null)return{};var r=ZTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ZTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function JTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xq(n.key),n)}}function eDe(e,t,r){return t&&IM(e.prototype,t),r&&IM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tDe(e,t,r){return t=Cb(t),rDe(e,Yq()?Reflect.construct(t,r||[],Cb(e).constructor):t.apply(e,r))}function rDe(e,t){if(t&&(qf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nDe(e)}function nDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yq=function(){return!!e})()}function Cb(e){return Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cb(e)}function sDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LS(e,t)}function LS(e,t){return LS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},LS(e,t)}function Fw(e,t,r){return t=Xq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xq(e){var t=aDe(e,"string");return qf(t)=="symbol"?t:t+""}function aDe(e,t){if(qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fh=function(e){function t(){return JTe(this,t),tDe(this,t,arguments)}return sDe(t,e),eDe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Ht(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=VTe(l,function(d){return d.coordinate||0}),u=YTe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=$M(n,XTe),d=l.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),f=Ht(a,i,d[0],o),h=Ht(a,i,d[1],o),m=uc(uc(uc({},Ve(u,!1)),{},{fill:"none"},Ve(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return O.createElement("line",np({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=$M(a,QTe),f=this.getTickTextAnchor(),h=Ve(d,!1),m=Ve(o,!1),g=i.map(function(p,v){var b=n.getTickValueCoord(p),y=uc(uc(uc(uc({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:v},b),{},{payload:p});return O.createElement(At,np({className:at("recharts-polar-radius-axis-tick",Tq(o)),key:"tick-".concat(p.coordinate)},ku(n.props,p,v)),t.renderTickItem(o,y,c?c(p.value,v):p.value))});return O.createElement(At,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:O.createElement(At,{className:at("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),wn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return O.isValidElement(n)?o=O.cloneElement(n,a):Ye(n)?o=n(a):o=O.createElement(Eu,np({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(x.PureComponent);Fw(Fh,"displayName","PolarRadiusAxis");Fw(Fh,"axisType","radiusAxis");Fw(Fh,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function wc(){return wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wc.apply(this,arguments)}function LM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LM(Object(r),!0).forEach(function(n){Uw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zq(n.key),n)}}function oDe(e,t,r){return t&&FM(e.prototype,t),r&&FM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lDe(e,t,r){return t=kb(t),cDe(e,Qq()?Reflect.construct(t,r||[],kb(e).constructor):t.apply(e,r))}function cDe(e,t){if(t&&(Wf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uDe(e)}function uDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qq=function(){return!!e})()}function kb(e){return kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kb(e)}function dDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FS(e,t)}function FS(e,t){return FS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},FS(e,t)}function Uw(e,t,r){return t=Zq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zq(e){var t=fDe(e,"string");return Wf(t)=="symbol"?t:t+""}function fDe(e,t){if(Wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hDe=Math.PI/180,UM=1e-5,Uh=function(e){function t(){return iDe(this,t),lDe(this,t,arguments)}return dDe(t,e),oDe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=Ht(i,o,l,n.coordinate),h=Ht(i,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*hDe),o;return i>UM?o=a==="outer"?"start":"end":i<-UM?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=dc(dc({},Ve(this.props,!1)),{},{fill:"none"},Ve(l,!1));if(c==="circle")return O.createElement(hv,wc({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,f=d.map(function(h){return Ht(a,i,o,h.coordinate)});return O.createElement(Kq,wc({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Ve(this.props,!1),f=Ve(o,!1),h=dc(dc({},d),{},{fill:"none"},Ve(l,!1)),m=i.map(function(g,p){var v=n.getTickLineCoord(g),b=n.getTickTextAnchor(g),y=dc(dc(dc({textAnchor:b},d),{},{stroke:"none",fill:u},f),{},{index:p,payload:g,x:v.x2,y:v.y2});return O.createElement(At,wc({className:at("recharts-polar-angle-axis-tick",Tq(o)),key:"tick-".concat(g.coordinate)},ku(n.props,g,p)),l&&O.createElement("line",wc({className:"recharts-polar-angle-axis-tick-line"},h,v)),o&&t.renderTickItem(o,y,c?c(g.value,p):g.value))});return O.createElement(At,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:O.createElement(At,{className:at("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return O.isValidElement(n)?o=O.cloneElement(n,a):Ye(n)?o=n(a):o=O.createElement(Eu,wc({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(x.PureComponent);Uw(Uh,"displayName","PolarAngleAxis");Uw(Uh,"axisType","angleAxis");Uw(Uh,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var mDe=Zz,pDe=mDe(Object.getPrototypeOf,Object),gDe=pDe,vDe=Ro,yDe=gDe,xDe=Mo,bDe="[object Object]",wDe=Function.prototype,jDe=Object.prototype,Jq=wDe.toString,_De=jDe.hasOwnProperty,NDe=Jq.call(Object);function SDe(e){if(!xDe(e)||vDe(e)!=bDe)return!1;var t=yDe(e);if(t===null)return!0;var r=_De.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Jq.call(r)==NDe}var CDe=SDe;const kDe=Kt(CDe);var EDe=Ro,PDe=Mo,ADe="[object Boolean]";function ODe(e){return e===!0||e===!1||PDe(e)&&EDe(e)==ADe}var TDe=ODe;const DDe=Kt(TDe);function gg(e){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gg(e)}function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eb.apply(this,arguments)}function RDe(e,t){return LDe(e)||IDe(e,t)||$De(e,t)||MDe()}function MDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $De(e,t){if(e){if(typeof e=="string")return BM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BM(e,t)}}function BM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function LDe(e){if(Array.isArray(e))return e}function zM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zM(Object(r),!0).forEach(function(n){FDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FDe(e,t,r){return t=UDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UDe(e){var t=BDe(e,"string");return gg(t)=="symbol"?t:t+""}function BDe(e,t){if(gg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qM=function(t,r,n,a,i){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},zDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},VDe=function(t){var r=VM(VM({},zDe),t),n=x.useRef(),a=x.useState(-1),i=RDe(a,2),o=i[0],l=i[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,g=r.animationEasing,p=r.animationDuration,v=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var y=at("recharts-trapezoid",m);return b?O.createElement(si,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:p,animationEasing:g,isActive:b},function(w){var _=w.upperWidth,j=w.lowerWidth,N=w.height,S=w.x,k=w.y;return O.createElement(si,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,easing:g},O.createElement("path",Eb({},Ve(r,!0),{className:y,d:qM(S,k,_,j,N),ref:n})))}):O.createElement("g",null,O.createElement("path",Eb({},Ve(r,!0),{className:y,d:qM(c,u,d,f,h)})))},qDe=["option","shapeType","propTransformer","activeClassName","isActive"];function vg(e){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vg(e)}function WDe(e,t){if(e==null)return{};var r=HDe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HDe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function WM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WM(Object(r),!0).forEach(function(n){KDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KDe(e,t,r){return t=GDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GDe(e){var t=YDe(e,"string");return vg(t)=="symbol"?t:t+""}function YDe(e,t){if(vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XDe(e,t){return Pb(Pb({},t),e)}function QDe(e,t){return e==="symbols"}function HM(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return O.createElement(DP,r);case"trapezoid":return O.createElement(VDe,r);case"sector":return O.createElement($q,r);case"symbols":if(QDe(t))return O.createElement(ZE,r);break;default:return null}}function ZDe(e){return x.isValidElement(e)?e.props:e}function eW(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?XDe:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=WDe(e,qDe),u;if(x.isValidElement(t))u=x.cloneElement(t,Pb(Pb({},c),ZDe(t)));else if(Ye(t))u=t(c);else if(kDe(t)&&!DDe(t)){var d=a(t,c);u=O.createElement(HM,{shapeType:r,elementProps:d})}else{var f=c;u=O.createElement(HM,{shapeType:r,elementProps:f})}return l?O.createElement(At,{className:o},u):u}function Bw(e,t){return t!=null&&"trapezoids"in e.props}function zw(e,t){return t!=null&&"sectors"in e.props}function yg(e,t){return t!=null&&"points"in e.props}function JDe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function eRe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function tRe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function rRe(e,t){var r;return Bw(e,t)?r=JDe:zw(e,t)?r=eRe:yg(e,t)&&(r=tRe),r}function nRe(e,t){var r;return Bw(e,t)?r="trapezoids":zw(e,t)?r="sectors":yg(e,t)&&(r="points"),r}function sRe(e,t){if(Bw(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(zw(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return yg(e,t)?t.payload:{}}function aRe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=nRe(r,t),i=sRe(r,t),o=n.filter(function(c,u){var d=$h(i,c),f=r.props[a].filter(function(g){var p=rRe(r,t);return p(g,t)}),h=r.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=n.indexOf(o[o.length-1]);return l}var Iy;function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function Dd(){return Dd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dd.apply(this,arguments)}function KM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KM(Object(r),!0).forEach(function(n){fa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rW(n.key),n)}}function oRe(e,t,r){return t&&GM(e.prototype,t),r&&GM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lRe(e,t,r){return t=Ab(t),cRe(e,tW()?Reflect.construct(t,r||[],Ab(e).constructor):t.apply(e,r))}function cRe(e,t){if(t&&(Hf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uRe(e)}function uRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tW=function(){return!!e})()}function Ab(e){return Ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ab(e)}function dRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&US(e,t)}function US(e,t){return US=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},US(e,t)}function fa(e,t,r){return t=rW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rW(e){var t=fRe(e,"string");return Hf(t)=="symbol"?t:t+""}function fRe(e,t){if(Hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Io=function(e){function t(r){var n;return iRe(this,t),n=lRe(this,t,[r]),fa(n,"pieRef",null),fa(n,"sectorRefs",[]),fa(n,"id",Oh("recharts-pie-")),fa(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ye(a)&&a()}),fa(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ye(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return dRe(t,e),oRe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=Ve(this.props,!1),f=Ve(o,!1),h=Ve(l,!1),m=o&&o.offsetRadius||20,g=n.map(function(p,v){var b=(p.startAngle+p.endAngle)/2,y=Ht(p.cx,p.cy,p.outerRadius+m,b),w=cr(cr(cr(cr({},d),p),{},{stroke:"none"},f),{},{index:v,textAnchor:t.getTextAnchor(y.x,p.cx)},y),_=cr(cr(cr(cr({},d),p),{},{fill:"none",stroke:p.fill},h),{},{index:v,points:[Ht(p.cx,p.cy,p.outerRadius,b),y]}),j=c;return it(c)&&it(u)?j="value":it(c)&&(j=u),O.createElement(At,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(o,w,Wr(p,j)))});return O.createElement(At,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,m=f?o:h,g=cr(cr({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return O.createElement(At,Dd({ref:function(v){v&&!a.sectorRefs.includes(v)&&a.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},ku(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),O.createElement(eW,Dd({option:m,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return O.createElement(si,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,v=[],b=i&&i[0],y=b.startAngle;return i.forEach(function(w,_){var j=h&&h[_],N=_>0?Gs(w,"paddingAngle",0):0;if(j){var S=Pn(j.endAngle-j.startAngle,w.endAngle-w.startAngle),k=cr(cr({},w),{},{startAngle:y+N,endAngle:y+S(p)+N});v.push(k),y=k.endAngle}else{var C=w.endAngle,P=w.startAngle,A=Pn(0,C-P),E=A(p),R=cr(cr({},w),{},{startAngle:y+N,endAngle:y+E+N});v.push(R),y=R.endAngle}}),O.createElement(At,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!$h(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,m=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!o||!o.length||!xe(u)||!xe(d)||!xe(f)||!xe(h))return null;var p=at("recharts-pie",l);return O.createElement(At,{tabIndex:this.props.rootTabIndex,className:p,ref:function(b){n.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),wn.renderCallByParent(this.props,null,!1),(!m||g)&&Ei.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(O.isValidElement(n))return O.cloneElement(n,a);if(Ye(n))return n(a);var o=at("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return O.createElement(wb,Dd({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(O.isValidElement(n))return O.cloneElement(n,a);var o=i;if(Ye(n)&&(o=n(a),O.isValidElement(o)))return o;var l=at("recharts-pie-label-text",typeof n!="boolean"&&!Ye(n)?n.className:"");return O.createElement(Eu,Dd({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(x.PureComponent);Iy=Io;fa(Io,"displayName","Pie");fa(Io,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ga.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});fa(Io,"parseDeltaAngle",function(e,t){var r=Jn(t-e),n=Math.min(Math.abs(t-e),360);return r*n});fa(Io,"getRealPieData",function(e){var t=e.data,r=e.children,n=Ve(e,!1),a=Ys(r,kw);return t&&t.length?t.map(function(i,o){return cr(cr(cr({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return cr(cr({},n),i.props)}):[]});fa(Io,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,o=Aq(a,i),l=n+es(e.cx,a,a/2),c=r+es(e.cy,i,i/2),u=es(e.innerRadius,o,0),d=es(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});fa(Io,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?cr(cr({},t.type.defaultProps),t.props):t.props,a=Iy.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),g=Iy.parseCoordinateOfPie(n,r),p=Iy.parseDeltaAngle(o,l),v=Math.abs(p),b=u;it(u)&&it(f)?(Ka(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):it(u)&&(Ka(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=f);var y=a.filter(function(k){return Wr(k,b,0)!==0}).length,w=(v>=360?y:y-1)*c,_=v-y*m-w,j=a.reduce(function(k,C){var P=Wr(C,b,0);return k+(xe(P)?P:0)},0),N;if(j>0){var S;N=a.map(function(k,C){var P=Wr(k,b,0),A=Wr(k,d,C),E=(xe(P)?P:0)/j,R;C?R=S.endAngle+Jn(p)*c*(P!==0?1:0):R=o;var $=R+Jn(p)*((P!==0?m:0)+E*_),B=(R+$)/2,F=(g.innerRadius+g.outerRadius)/2,L=[{name:A,value:P,payload:k,dataKey:b,type:h}],D=Ht(g.cx,g.cy,F,B);return S=cr(cr(cr({percent:E,cornerRadius:i,name:A,tooltipPayload:L,midAngle:B,middleRadius:F,tooltipPosition:D},k),g),{},{value:Wr(k,b),startAngle:R,endAngle:$,payload:k,paddingAngle:Jn(p)*c}),S})}return cr(cr({},g),{},{sectors:N,data:a})});function hRe(e){return e&&e.length?e[0]:void 0}var mRe=hRe,pRe=mRe;const gRe=Kt(pRe);var vRe=["key"];function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function yRe(e,t){if(e==null)return{};var r=xRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ob(){return Ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ob.apply(this,arguments)}function YM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YM(Object(r),!0).forEach(function(n){so(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sW(n.key),n)}}function wRe(e,t,r){return t&&XM(e.prototype,t),r&&XM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jRe(e,t,r){return t=Tb(t),_Re(e,nW()?Reflect.construct(t,r||[],Tb(e).constructor):t.apply(e,r))}function _Re(e,t){if(t&&(Kf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NRe(e)}function NRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nW=function(){return!!e})()}function Tb(e){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tb(e)}function SRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BS(e,t)}function BS(e,t){return BS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},BS(e,t)}function so(e,t,r){return t=sW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sW(e){var t=CRe(e,"string");return Kf(t)=="symbol"?t:t+""}function CRe(e,t){if(Kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mv=function(e){function t(){var r;bRe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=jRe(this,t,[].concat(a)),so(r,"state",{isAnimationFinished:!1}),so(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ye(o)&&o()}),so(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ye(o)&&o()}),so(r,"handleMouseEnter",function(o){var l=r.props.onMouseEnter;l&&l(r.props,o)}),so(r,"handleMouseLeave",function(o){var l=r.props.onMouseLeave;l&&l(r.props,o)}),r}return SRe(t,e),wRe(t,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,o=a.dataKey,l=Ve(this.props,!1),c=Ve(i,!0),u=n.map(function(d,f){var h=Gn(Gn(Gn({key:"dot-".concat(f),r:3},l),c),{},{dataKey:o,cx:d.x,cy:d.y,index:f,payload:d});return t.renderDotItem(i,h)});return O.createElement(At,{className:"recharts-radar-dots"},u)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,o=a.dot,l=a.isRange,c=a.baseLinePoints,u=a.connectNulls,d;return O.isValidElement(i)?d=O.cloneElement(i,Gn(Gn({},this.props),{},{points:n})):Ye(i)?d=i(Gn(Gn({},this.props),{},{points:n})):d=O.createElement(Kq,Ob({},Ve(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:l?c:null,connectNulls:u})),O.createElement(At,{className:"recharts-radar-polygon"},d,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state.prevPoints;return O.createElement(si,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"radar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,g=f&&f.length/i.length,p=i.map(function(v,b){var y=f&&f[Math.floor(b*g)];if(y){var w=Pn(y.x,v.x),_=Pn(y.y,v.y);return Gn(Gn({},v),{},{x:w(m),y:_(m)})}var j=Pn(v.cx,v.x),N=Pn(v.cy,v.y);return Gn(Gn({},v),{},{x:j(m),y:N(m)})});return n.renderPolygonStatically(p)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=n.isRange,l=this.state.prevPoints;return i&&a&&a.length&&!o&&(!l||!$h(l,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,o=n.points,l=n.isAnimationActive;if(a||!o||!o.length)return null;var c=this.state.isAnimationFinished,u=at("recharts-radar",i);return O.createElement(At,{className:u},this.renderPolygon(),(!l||c)&&Ei.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(O.isValidElement(n))i=O.cloneElement(n,a);else if(Ye(n))i=n(a);else{var o=a.key,l=yRe(a,vRe);i=O.createElement(hv,Ob({},l,{key:o,className:at("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])}(x.PureComponent);so(mv,"displayName","Radar");so(mv,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Ga.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});so(mv,"getComposedData",function(e){var t=e.radiusAxis,r=e.angleAxis,n=e.displayedData,a=e.dataKey,i=e.bandSize,o=r.cx,l=r.cy,c=!1,u=[],d=r.type!=="number"?i??0:0;n.forEach(function(h,m){var g=Wr(h,r.dataKey,m),p=Wr(h,a),v=r.scale(g)+d,b=Array.isArray(p)?Rq(p):p,y=it(b)?void 0:t.scale(b);Array.isArray(p)&&p.length>=2&&(c=!0),u.push(Gn(Gn({},Ht(o,l,y,v)),{},{name:g,value:p,cx:o,cy:l,radius:y,angle:v,payload:h}))});var f=[];return c&&u.forEach(function(h){if(Array.isArray(h.value)){var m=gRe(h.value),g=it(m)?void 0:t.scale(m);f.push(Gn(Gn({},h),{},{radius:g},Ht(o,l,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}});var kRe=Math.ceil,ERe=Math.max;function PRe(e,t,r,n){for(var a=-1,i=ERe(kRe((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var ARe=PRe,ORe=vV,QM=1/0,TRe=17976931348623157e292;function DRe(e){if(!e)return e===0?e:0;if(e=ORe(e),e===QM||e===-QM){var t=e<0?-1:1;return t*TRe}return e===e?e:0}var aW=DRe,RRe=ARe,MRe=Cw,P_=aW;function $Re(e){return function(t,r,n){return n&&typeof n!="number"&&MRe(t,r,n)&&(r=n=void 0),t=P_(t),r===void 0?(r=t,t=0):r=P_(r),n=n===void 0?t<r?1:-1:P_(n),RRe(t,r,n,e)}}var IRe=$Re,LRe=IRe,FRe=LRe(),URe=FRe;const Db=Kt(URe);function xg(e){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(e)}function ZM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function JM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZM(Object(r),!0).forEach(function(n){iW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iW(e,t,r){return t=BRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BRe(e){var t=zRe(e,"string");return xg(t)=="symbol"?t:t+""}function zRe(e,t){if(xg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VRe=["Webkit","Moz","O","ms"],qRe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=VRe.reduce(function(i,o){return JM(JM({},i),{},iW({},o+n,r))},{});return a[t]=r,a};function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function Rb(){return Rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rb.apply(this,arguments)}function e4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function A_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e4(Object(r),!0).forEach(function(n){Is(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lW(n.key),n)}}function HRe(e,t,r){return t&&t4(e.prototype,t),r&&t4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KRe(e,t,r){return t=Mb(t),GRe(e,oW()?Reflect.construct(t,r||[],Mb(e).constructor):t.apply(e,r))}function GRe(e,t){if(t&&(Gf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YRe(e)}function YRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oW=function(){return!!e})()}function Mb(e){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mb(e)}function XRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zS(e,t)}function zS(e,t){return zS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zS(e,t)}function Is(e,t,r){return t=lW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lW(e){var t=QRe(e,"string");return Gf(t)=="symbol"?t:t+""}function QRe(e,t){if(Gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZRe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Jm().domain(Db(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},r4=function(t){return t.changedTouches&&!!t.changedTouches.length},Yf=function(e){function t(r){var n;return WRe(this,t),n=KRe(this,t,[r]),Is(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Is(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Is(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Is(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Is(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Is(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Is(n,"handleSlideDragStart",function(a){var i=r4(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return XRe(t,e),HRe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,f),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=Wr(i[n],l,n);return Ye(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,p=n.pageX-i;p>0?p=Math.min(p,u+d-f-l,u+d-f-o):p<0&&(p=Math.max(p,u-o,u-l));var v=this.getIndex({startX:o+p,endX:l+p});(v.startIndex!==h||v.endIndex!==m)&&g&&g(v),this.setState({startX:o+p,endX:l+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=r4(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,g=d.onChange,p=d.gap,v=d.data,b={startX:this.state.startX,endX:this.state.endX},y=n.pageX-i;y>0?y=Math.min(y,f+h-m-u):y<0&&(y=Math.max(y,f-u)),b[o]=u+y;var w=this.getIndex(b),_=w.startIndex,j=w.endIndex,N=function(){var k=v.length-1;return o==="startX"&&(l>c?_%p===0:j%p===0)||l<c&&j===k||o==="endX"&&(l>c?j%p===0:_%p===0)||l>c&&j===k};this.setState(Is(Is({},o,u+y),"brushMoveStartX",n.pageX),function(){g&&N()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Is({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return O.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=x.Children.only(u);return f?O.cloneElement(f,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,p=c.startIndex,v=c.endIndex,b=Math.max(n,this.props.x),y=A_(A_({},Ve(this.props,!1)),{},{x:b,y:u,width:d,height:f}),w=m||"Min value: ".concat((i=g[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[v])===null||o===void 0?void 0:o.name);return O.createElement(At,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,y))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return O.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,g={pointerEvents:"none",fill:u};return O.createElement(At,{className:"recharts-brush-texts"},O.createElement(Eu,Rb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+l/2},g),this.getTextOfTick(a)),O.createElement(Eu,Rb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,g=h.endX,p=h.isTextActive,v=h.isSlideMoving,b=h.isTravellerMoving,y=h.isTravellerFocused;if(!a||!a.length||!xe(l)||!xe(c)||!xe(u)||!xe(d)||u<=0||d<=0)return null;var w=at("recharts-brush",i),_=O.Children.count(o)===1,j=qRe("userSelect","none");return O.createElement(At,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(p||v||b||y||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return O.createElement(O.Fragment,null,O.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),O.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),O.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return O.isValidElement(n)?i=O.cloneElement(n,a):Ye(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return A_({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?ZRe({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(x.PureComponent);Is(Yf,"displayName","Brush");Is(Yf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var JRe=aP;function eMe(e,t){var r;return JRe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var tMe=eMe,rMe=qz,nMe=Wi,sMe=tMe,aMe=Ts,iMe=Cw;function oMe(e,t,r){var n=aMe(e)?rMe:sMe;return r&&iMe(e,t,r)&&(t=void 0),n(e,nMe(t))}var lMe=oMe;const cMe=Kt(lMe);var Pi=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},n4=fV;function uMe(e,t,r){t=="__proto__"&&n4?n4(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var dMe=uMe,fMe=dMe,hMe=uV,mMe=Wi;function pMe(e,t){var r={};return t=mMe(t),hMe(e,function(n,a,i){fMe(r,a,t(n,a,i))}),r}var gMe=pMe;const vMe=Kt(gMe);function yMe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var xMe=yMe,bMe=aP;function wMe(e,t){var r=!0;return bMe(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var jMe=wMe,_Me=xMe,NMe=jMe,SMe=Wi,CMe=Ts,kMe=Cw;function EMe(e,t,r){var n=CMe(e)?_Me:NMe;return r&&kMe(e,t,r)&&(t=void 0),n(e,SMe(t))}var PMe=EMe;const cW=Kt(PMe);var AMe=["x","y"];function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function VS(){return VS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VS.apply(this,arguments)}function s4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s4(Object(r),!0).forEach(function(n){OMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OMe(e,t,r){return t=TMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TMe(e){var t=DMe(e,"string");return bg(t)=="symbol"?t:t+""}function DMe(e,t){if(bg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RMe(e,t){if(e==null)return{};var r=MMe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MMe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $Me(e,t){var r=e.x,n=e.y,a=RMe(e,AMe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return wm(wm(wm(wm(wm({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function a4(e){return O.createElement(eW,VS({shapeType:"rectangle",propTransformer:$Me,activeClassName:"recharts-active-bar"},e))}var IMe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=xe(n)||Uge(n);return i?t(n,a):(i||Au(),r)}},LMe=["value","background"],uW;function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function FMe(e,t){if(e==null)return{};var r=UMe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function UMe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$b.apply(this,arguments)}function i4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i4(Object(r),!0).forEach(function(n){hl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fW(n.key),n)}}function zMe(e,t,r){return t&&o4(e.prototype,t),r&&o4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function VMe(e,t,r){return t=Ib(t),qMe(e,dW()?Reflect.construct(t,r||[],Ib(e).constructor):t.apply(e,r))}function qMe(e,t){if(t&&(Xf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WMe(e)}function WMe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dW=function(){return!!e})()}function Ib(e){return Ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ib(e)}function HMe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qS(e,t)}function qS(e,t){return qS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qS(e,t)}function hl(e,t,r){return t=fW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fW(e){var t=KMe(e,"string");return Xf(t)=="symbol"?t:t+""}function KMe(e,t){if(Xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ul=function(e){function t(){var r;BMe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=VMe(this,t,[].concat(a)),hl(r,"state",{isAnimationFinished:!1}),hl(r,"id",Oh("recharts-bar-")),hl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),hl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return HMe(t,e),zMe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Ve(this.props,!1);return n&&n.map(function(f,h){var m=h===c,g=m?u:o,p=Yr(Yr(Yr({},d),f),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return O.createElement(At,$b({className:"recharts-bar-rectangle"},ku(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),O.createElement(a4,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return O.createElement(si,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,p=i.map(function(v,b){var y=h&&h[b];if(y){var w=Pn(y.x,v.x),_=Pn(y.y,v.y),j=Pn(y.width,v.width),N=Pn(y.height,v.height);return Yr(Yr({},v),{},{x:w(g),y:_(g),width:j(g),height:N(g)})}if(o==="horizontal"){var S=Pn(0,v.height),k=S(g);return Yr(Yr({},v),{},{y:v.y+v.height-k,height:k})}var C=Pn(0,v.width),P=C(g);return Yr(Yr({},v),{},{width:P})});return O.createElement(At,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!$h(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Ve(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=FMe(u,LMe);if(!f)return null;var m=Yr(Yr(Yr(Yr(Yr({},h),{},{fill:"#eee"},f),c),ku(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return O.createElement(a4,$b({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Ys(d,fv);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(v,b){var y=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:y,errorVal:Wr(v,b)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return O.createElement(At,g,f.map(function(p){return O.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,g=n.background,p=n.id;if(a||!i||!i.length)return null;var v=this.state.isAnimationFinished,b=at("recharts-bar",o),y=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,_=y||w,j=it(p)?this.id:p;return O.createElement(At,{className:b},y||w?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(j)},O.createElement("rect",{x:y?u:u-f/2,y:w?d:d-h/2,width:y?f:f*2,height:w?h:h*2}))):null,O.createElement(At,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(j,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,j),(!m||v)&&Ei.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(x.PureComponent);uW=Ul;hl(Ul,"displayName","Bar");hl(Ul,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ga.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});hl(Ul,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=aAe(n,r);if(!m)return null;var g=t.layout,p=r.type.defaultProps,v=p!==void 0?Yr(Yr({},p),r.props):r.props,b=v.dataKey,y=v.children,w=v.minPointSize,_=g==="horizontal"?o:i,j=u?_.scale.domain():null,N=fAe({numericAxis:_}),S=Ys(y,kw),k=f.map(function(C,P){var A,E,R,$,B,F;u?A=iAe(u[d+P],j):(A=Wr(C,b),Array.isArray(A)||(A=[N,A]));var L=IMe(w,uW.defaultProps.minPointSize)(A[1],P);if(g==="horizontal"){var D,T=[o.scale(A[0]),o.scale(A[1])],U=T[0],X=T[1];E=KR({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:C,index:P}),R=(D=X??U)!==null&&D!==void 0?D:void 0,$=m.size;var H=U-X;if(B=Number.isNaN(H)?0:H,F={x:E,y:o.y,width:$,height:o.height},Math.abs(L)>0&&Math.abs(B)<Math.abs(L)){var ae=Jn(B||L)*(Math.abs(L)-Math.abs(B));R-=ae,B+=ae}}else{var he=[i.scale(A[0]),i.scale(A[1])],Pe=he[0],Ae=he[1];if(E=Pe,R=KR({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:C,index:P}),$=Ae-Pe,B=m.size,F={x:i.x,y:R,width:i.width,height:B},Math.abs(L)>0&&Math.abs($)<Math.abs(L)){var ue=Jn($||L)*(Math.abs(L)-Math.abs($));$+=ue}}return Yr(Yr(Yr({},C),{},{x:E,y:R,width:$,height:B,value:u?A:A[1],payload:C,background:F},S&&S[P]&&S[P].props),{},{tooltipPayload:[Eq(r,C)],tooltipPosition:{x:E+$/2,y:R+B/2}})});return Yr({data:k,layout:g},h)});function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function GMe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hW(n.key),n)}}function YMe(e,t,r){return t&&l4(e.prototype,t),r&&l4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c4(Object(r),!0).forEach(function(n){Vw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vw(e,t,r){return t=hW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hW(e){var t=XMe(e,"string");return wg(t)=="symbol"?t:t+""}function XMe(e,t){if(wg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mW=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!Fs(u,Ul);return d.reduce(function(m,g){var p=r[g],v=p.orientation,b=p.domain,y=p.padding,w=y===void 0?{}:y,_=p.mirror,j=p.reversed,N="".concat(v).concat(_?"Mirror":""),S,k,C,P,A;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var E=b[1]-b[0],R=1/0,$=p.categoricalDomain.sort(Vge);if($.forEach(function(he,Pe){Pe>0&&(R=Math.min((he||0)-($[Pe-1]||0),R))}),Number.isFinite(R)){var B=R/E,F=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(S=B*F/2),p.padding==="no-gap"){var L=es(t.barCategoryGap,B*F),D=B*F/2;S=D-L-(D-L)/F*L}}}a==="xAxis"?k=[n.left+(w.left||0)+(S||0),n.left+n.width-(w.right||0)-(S||0)]:a==="yAxis"?k=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(S||0),n.top+n.height-(w.bottom||0)-(S||0)]:k=p.range,j&&(k=[k[1],k[0]]);var T=Nq(p,i,h),U=T.scale,X=T.realScaleType;U.domain(b).range(k),Sq(U);var H=Cq(U,Fa(Fa({},p),{},{realScaleType:X}));a==="xAxis"?(A=v==="top"&&!_||v==="bottom"&&_,C=n.left,P=f[N]-A*p.height):a==="yAxis"&&(A=v==="left"&&!_||v==="right"&&_,C=f[N]-A*p.width,P=n.top);var ae=Fa(Fa(Fa({},p),H),{},{realScaleType:X,x:C,y:P,scale:U,width:a==="xAxis"?n.width:p.width,height:a==="yAxis"?n.height:p.height});return ae.bandSize=yb(ae,H),!p.hide&&a==="xAxis"?f[N]+=(A?-1:1)*ae.height:p.hide||(f[N]+=(A?-1:1)*ae.width),Fa(Fa({},m),{},Vw({},g,ae))},{})},pW=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},QMe=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return pW({x:r,y:n},{x:a,y:i})},gW=function(){function e(t){GMe(this,e),this.scale=t}return YMe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();Vw(gW,"EPS",1e-4);var RP=function(t){var r=Object.keys(t).reduce(function(n,a){return Fa(Fa({},n),{},Vw({},a,gW.create(t[a])))},{});return Fa(Fa({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return vMe(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return cW(a,function(i,o){return r[o].isInRange(i)})}})};function ZMe(e){return(e%180+180)%180}var JMe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=ZMe(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},e4e=Wi,t4e=ov,r4e=Nw;function n4e(e){return function(t,r,n){var a=Object(t);if(!t4e(t)){var i=e4e(r);t=r4e(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var s4e=n4e,a4e=aW;function i4e(e){var t=a4e(e),r=t%1;return t===t?r?t-r:t:0}var o4e=i4e,l4e=sV,c4e=Wi,u4e=o4e,d4e=Math.max;function f4e(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:u4e(r);return a<0&&(a=d4e(n+a,0)),l4e(e,c4e(t),a)}var h4e=f4e,m4e=s4e,p4e=h4e,g4e=m4e(p4e),v4e=g4e;const y4e=Kt(v4e);var x4e=qpe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),MP=x.createContext(void 0),$P=x.createContext(void 0),vW=x.createContext(void 0),yW=x.createContext({}),xW=x.createContext(void 0),bW=x.createContext(0),wW=x.createContext(0),u4=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=x4e(i);return O.createElement(MP.Provider,{value:n},O.createElement($P.Provider,{value:a},O.createElement(yW.Provider,{value:i},O.createElement(vW.Provider,{value:d},O.createElement(xW.Provider,{value:o},O.createElement(bW.Provider,{value:u},O.createElement(wW.Provider,{value:c},l)))))))},b4e=function(){return x.useContext(xW)},jW=function(t){var r=x.useContext(MP);r==null&&Au();var n=r[t];return n==null&&Au(),n},w4e=function(){var t=x.useContext(MP);return Jo(t)},j4e=function(){var t=x.useContext($P),r=y4e(t,function(n){return cW(n.domain,Number.isFinite)});return r||Jo(t)},_W=function(t){var r=x.useContext($P);r==null&&Au();var n=r[t];return n==null&&Au(),n},_4e=function(){var t=x.useContext(vW);return t},N4e=function(){return x.useContext(yW)},IP=function(){return x.useContext(wW)},LP=function(){return x.useContext(bW)};function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}function S4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C4e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SW(n.key),n)}}function k4e(e,t,r){return t&&C4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function E4e(e,t,r){return t=Lb(t),P4e(e,NW()?Reflect.construct(t,r||[],Lb(e).constructor):t.apply(e,r))}function P4e(e,t){if(t&&(Qf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A4e(e)}function A4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NW=function(){return!!e})()}function Lb(e){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lb(e)}function O4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WS(e,t)}function WS(e,t){return WS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},WS(e,t)}function d4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function f4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d4(Object(r),!0).forEach(function(n){FP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FP(e,t,r){return t=SW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SW(e){var t=T4e(e,"string");return Qf(t)=="symbol"?t:t+""}function T4e(e,t){if(Qf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D4e(e,t){return I4e(e)||$4e(e,t)||M4e(e,t)||R4e()}function R4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M4e(e,t){if(e){if(typeof e=="string")return h4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h4(e,t)}}function h4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function I4e(e){if(Array.isArray(e))return e}function HS(){return HS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HS.apply(this,arguments)}var L4e=function(t,r){var n;return O.isValidElement(t)?n=O.cloneElement(t,r):Ye(t)?n=t(r):n=O.createElement("line",HS({},r,{className:"recharts-reference-line-line"})),n},F4e=function(t,r,n,a,i,o,l,c,u){var d=i.x,f=i.y,h=i.width,m=i.height;if(n){var g=u.y,p=t.y.apply(g,{position:o});if(Pi(u,"discard")&&!t.y.isInRange(p))return null;var v=[{x:d+h,y:p},{x:d,y:p}];return c==="left"?v.reverse():v}if(r){var b=u.x,y=t.x.apply(b,{position:o});if(Pi(u,"discard")&&!t.x.isInRange(y))return null;var w=[{x:y,y:f+m},{x:y,y:f}];return l==="top"?w.reverse():w}if(a){var _=u.segment,j=_.map(function(N){return t.apply(N,{position:o})});return Pi(u,"discard")&&cMe(j,function(N){return!t.isInRange(N)})?null:j}return null};function U4e(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=b4e(),d=jW(a),f=_W(i),h=_4e();if(!u||!h)return null;Ka(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=RP({x:d.scale,y:f.scale}),g=fn(t),p=fn(r),v=n&&n.length===2,b=F4e(m,g,p,v,h,e.position,d.orientation,f.orientation,e);if(!b)return null;var y=D4e(b,2),w=y[0],_=w.x,j=w.y,N=y[1],S=N.x,k=N.y,C=Pi(e,"hidden")?"url(#".concat(u,")"):void 0,P=f4(f4({clipPath:C},Ve(e,!0)),{},{x1:_,y1:j,x2:S,y2:k});return O.createElement(At,{className:at("recharts-reference-line",l)},L4e(o,P),wn.renderCallByParent(e,QMe({x1:_,y1:j,x2:S,y2:k})))}var UP=function(e){function t(){return S4e(this,t),E4e(this,t,arguments)}return O4e(t,e),k4e(t,[{key:"render",value:function(){return O.createElement(U4e,this.props)}}])}(O.Component);FP(UP,"displayName","ReferenceLine");FP(UP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function KS(){return KS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KS.apply(this,arguments)}function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function m4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function p4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m4(Object(r),!0).forEach(function(n){qw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z4e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kW(n.key),n)}}function V4e(e,t,r){return t&&z4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function q4e(e,t,r){return t=Fb(t),W4e(e,CW()?Reflect.construct(t,r||[],Fb(e).constructor):t.apply(e,r))}function W4e(e,t){if(t&&(Zf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H4e(e)}function H4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CW=function(){return!!e})()}function Fb(e){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fb(e)}function K4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GS(e,t)}function GS(e,t){return GS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GS(e,t)}function qw(e,t,r){return t=kW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kW(e){var t=G4e(e,"string");return Zf(t)=="symbol"?t:t+""}function G4e(e,t){if(Zf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y4e=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=RP({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Pi(t,"discard")&&!o.isInRange(l)?null:l},Ww=function(e){function t(){return B4e(this,t),q4e(this,t,arguments)}return K4e(t,e),V4e(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=fn(a),d=fn(i);if(Ka(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=Y4e(this.props);if(!f)return null;var h=f.x,m=f.y,g=this.props,p=g.shape,v=g.className,b=Pi(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=p4(p4({clipPath:b},Ve(this.props,!0)),{},{cx:h,cy:m});return O.createElement(At,{className:at("recharts-reference-dot",v)},t.renderDot(p,y),wn.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(O.Component);qw(Ww,"displayName","ReferenceDot");qw(Ww,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});qw(Ww,"renderDot",function(e,t){var r;return O.isValidElement(e)?r=O.cloneElement(e,t):Ye(e)?r=e(t):r=O.createElement(hv,KS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function YS(){return YS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YS.apply(this,arguments)}function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}function g4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function v4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g4(Object(r),!0).forEach(function(n){Hw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q4e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PW(n.key),n)}}function Z4e(e,t,r){return t&&Q4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function J4e(e,t,r){return t=Ub(t),e$e(e,EW()?Reflect.construct(t,r||[],Ub(e).constructor):t.apply(e,r))}function e$e(e,t){if(t&&(Jf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t$e(e)}function t$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EW=function(){return!!e})()}function Ub(e){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(e)}function r$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XS(e,t)}function XS(e,t){return XS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},XS(e,t)}function Hw(e,t,r){return t=PW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PW(e){var t=n$e(e,"string");return Jf(t)=="symbol"?t:t+""}function n$e(e,t){if(Jf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s$e=function(t,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=RP({x:d.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Pi(i,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:pW(m,g)},Kw=function(e){function t(){return X4e(this,t),J4e(this,t,arguments)}return r$e(t,e),Z4e(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Ka(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=fn(a),h=fn(i),m=fn(o),g=fn(l),p=this.props.shape;if(!f&&!h&&!m&&!g&&!p)return null;var v=s$e(f,h,m,g,this.props);if(!v&&!p)return null;var b=Pi(this.props,"hidden")?"url(#".concat(d,")"):void 0;return O.createElement(At,{className:at("recharts-reference-area",c)},t.renderRect(p,v4(v4({clipPath:b},Ve(this.props,!0)),v)),wn.renderCallByParent(this.props,v))}}])}(O.Component);Hw(Kw,"displayName","ReferenceArea");Hw(Kw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Hw(Kw,"renderRect",function(e,t){var r;return O.isValidElement(e)?r=O.cloneElement(e,t):Ye(e)?r=e(t):r=O.createElement(DP,YS({},t,{className:"recharts-reference-area-rect"})),r});function AW(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function a$e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return JMe(n,r)}function i$e(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function Bb(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function o$e(e,t){return AW(e,t+1)}function l$e(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:AW(n,u)};var p=c,v,b=function(){return v===void 0&&(v=r(g,p)),v},y=g.coordinate,w=c===0||Bb(e,y,b,d,l);w||(c=0,d=o,u+=1),w&&(d=y+e*(b()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function jg(e){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(e)}function y4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y4(Object(r),!0).forEach(function(n){c$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c$e(e,t,r){return t=u$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u$e(e){var t=d$e(e,"string");return jg(t)=="symbol"?t:t+""}function d$e(e,t){if(jg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f$e(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(h){var m=i[h],g,p=function(){return g===void 0&&(g=r(m,h)),g};if(h===o-1){var v=e*(m.coordinate+e*p()/2-c);i[h]=m=Ln(Ln({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else i[h]=m=Ln(Ln({},m),{},{tickCoord:m.coordinate});var b=Bb(e,m.tickCoord,p,l,c);b&&(c=m.tickCoord-e*(p()/2+a),i[h]=Ln(Ln({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function h$e(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=Ln(Ln({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=Bb(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=Ln(Ln({},d),{},{isShow:!0}))}for(var g=i?l-1:l,p=function(y){var w=o[y],_,j=function(){return _===void 0&&(_=r(w,y)),_};if(y===0){var N=e*(w.coordinate-e*j()/2-c);o[y]=w=Ln(Ln({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[y]=w=Ln(Ln({},w),{},{tickCoord:w.coordinate});var S=Bb(e,w.tickCoord,j,c,u);S&&(c=w.tickCoord+e*(j()/2+a),o[y]=Ln(Ln({},w),{},{isShow:!0}))},v=0;v<g;v++)p(v);return o}function BP(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(xe(c)||Ga.isSsr)return o$e(a,typeof c=="number"&&xe(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=d&&m==="width"?Zm(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=function(w,_){var j=Ye(u)?u(w.value,_):w.value;return m==="width"?a$e(Zm(j,{fontSize:t,letterSpacing:r}),g,f):Zm(j,{fontSize:t,letterSpacing:r})[m]},v=a.length>=2?Jn(a[1].coordinate-a[0].coordinate):1,b=i$e(i,v,m);return c==="equidistantPreserveStart"?l$e(v,b,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=h$e(v,b,p,a,o,c==="preserveStartEnd"):h=f$e(v,b,p,a,o),h.filter(function(y){return y.isShow}))}var m$e=["viewBox"],p$e=["viewBox"],g$e=["ticks"];function eh(e){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eh(e)}function Rd(){return Rd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rd.apply(this,arguments)}function x4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x4(Object(r),!0).forEach(function(n){zP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O_(e,t){if(e==null)return{};var r=v$e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function v$e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function y$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TW(n.key),n)}}function x$e(e,t,r){return t&&b4(e.prototype,t),r&&b4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b$e(e,t,r){return t=zb(t),w$e(e,OW()?Reflect.construct(t,r||[],zb(e).constructor):t.apply(e,r))}function w$e(e,t){if(t&&(eh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j$e(e)}function j$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OW=function(){return!!e})()}function zb(e){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(e)}function _$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QS(e,t)}function QS(e,t){return QS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},QS(e,t)}function zP(e,t,r){return t=TW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TW(e){var t=N$e(e,"string");return eh(t)=="symbol"?t:t+""}function N$e(e,t){if(eh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(eh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bh=function(e){function t(r){var n;return y$e(this,t),n=b$e(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return _$e(t,e),x$e(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=O_(n,m$e),l=this.props,c=l.viewBox,u=O_(l,p$e);return!Xd(i,c)||!Xd(o,u)||!Xd(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,g,p,v,b,y,w=f?-1:1,_=n.tickSize||d,j=xe(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=g=n.coordinate,v=o+ +!f*c,p=v-w*_,y=p-w*h,b=j;break;case"left":p=v=n.coordinate,g=i+ +!f*l,m=g-w*_,b=m-w*h,y=j;break;case"right":p=v=n.coordinate,g=i+ +f*l,m=g+w*_,b=m+w*h,y=j;break;default:m=g=n.coordinate,v=o+ +f*c,p=v+w*_,y=p+w*h,b=j;break}return{line:{x1:m,y1:p,x2:g,y2:v},tick:{x:b,y}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=rn(rn(rn({},Ve(this.props,!1)),Ve(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=rn(rn({},f),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=rn(rn({},f),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return O.createElement("line",Rd({},f,{className:at("recharts-cartesian-axis-line",Gs(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=BP(rn(rn({},this.props),{},{ticks:n}),a,i),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),v=Ve(this.props,!1),b=Ve(d,!1),y=rn(rn({},v),{},{fill:"none"},Ve(c,!1)),w=m.map(function(_,j){var N=o.getTickLineCoord(_),S=N.line,k=N.tick,C=rn(rn(rn(rn({textAnchor:g,verticalAnchor:p},v),{},{stroke:"none",fill:u},b),k),{},{index:j,payload:_,visibleTicksCount:m.length,tickFormatter:f});return O.createElement(At,Rd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},ku(o.props,_,j)),c&&O.createElement("line",Rd({},y,S,{className:at("recharts-cartesian-axis-tick-line",Gs(c,"className"))})),d&&t.renderTickItem(d,C,"".concat(Ye(f)?f(_.value,j):_.value).concat(h||"")))});return O.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=O_(f,g$e),g=h;return Ye(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:O.createElement(At,{className:at("recharts-cartesian-axis",u),ref:function(v){n.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),wn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=at(a.className,"recharts-cartesian-axis-tick-value");return O.isValidElement(n)?o=O.cloneElement(n,rn(rn({},a),{},{className:l})):Ye(n)?o=n(rn(rn({},a),{},{className:l})):o=O.createElement(Eu,Rd({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(x.Component);zP(Bh,"displayName","CartesianAxis");zP(Bh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var S$e=["x1","y1","x2","y2","key"],C$e=["offset"];function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}function w4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Un(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w4(Object(r),!0).forEach(function(n){k$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k$e(e,t,r){return t=E$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E$e(e){var t=P$e(e,"string");return Ou(t)=="symbol"?t:t+""}function P$e(e,t){if(Ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fc.apply(this,arguments)}function j4(e,t){if(e==null)return{};var r=A$e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function A$e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var O$e=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return O.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function DW(e,t){var r;if(O.isValidElement(e))r=O.cloneElement(e,t);else if(Ye(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=j4(t,S$e),u=Ve(c,!1);u.offset;var d=j4(u,C$e);r=O.createElement("line",Fc({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function T$e(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Un(Un({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return DW(a,u)});return O.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function D$e(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Un(Un({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return DW(a,u)});return O.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function R$e(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?a+o-h:d[m+1]-h;if(p<=0)return null;var v=m%t.length;return O.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:p,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function M$e(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?i+l-h:d[m+1]-h;if(p<=0)return null;var v=m%n.length;return O.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:p,height:c,stroke:"none",fill:n[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return O.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var $$e=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return _q(BP(Un(Un(Un({},Bh.defaultProps),n),{},{ticks:uo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},I$e=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return _q(BP(Un(Un(Un({},Bh.defaultProps),n),{},{ticks:uo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},ud={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ly(e){var t,r,n,a,i,o,l=IP(),c=LP(),u=N4e(),d=Un(Un({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:ud.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:ud.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:ud.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:ud.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:ud.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:ud.verticalFill,x:xe(e.x)?e.x:u.left,y:xe(e.y)?e.y:u.top,width:xe(e.width)?e.width:u.width,height:xe(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,g=d.height,p=d.syncWithTicks,v=d.horizontalValues,b=d.verticalValues,y=w4e(),w=j4e();if(!xe(m)||m<=0||!xe(g)||g<=0||!xe(f)||f!==+f||!xe(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||$$e,j=d.horizontalCoordinatesGenerator||I$e,N=d.horizontalPoints,S=d.verticalPoints;if((!N||!N.length)&&Ye(j)){var k=v&&v.length,C=j({yAxis:w?Un(Un({},w),{},{ticks:k?v:w.ticks}):void 0,width:l,height:c,offset:u},k?!0:p);Ka(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ou(C),"]")),Array.isArray(C)&&(N=C)}if((!S||!S.length)&&Ye(_)){var P=b&&b.length,A=_({xAxis:y?Un(Un({},y),{},{ticks:P?b:y.ticks}):void 0,width:l,height:c,offset:u},P?!0:p);Ka(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ou(A),"]")),Array.isArray(A)&&(S=A)}return O.createElement("g",{className:"recharts-cartesian-grid"},O.createElement(O$e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),O.createElement(T$e,Fc({},d,{offset:u,horizontalPoints:N,xAxis:y,yAxis:w})),O.createElement(D$e,Fc({},d,{offset:u,verticalPoints:S,xAxis:y,yAxis:w})),O.createElement(R$e,Fc({},d,{horizontalPoints:N})),O.createElement(M$e,Fc({},d,{verticalPoints:S})))}Ly.displayName="CartesianGrid";var L$e=["type","layout","connectNulls","ref"],F$e=["key"];function th(e){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(e)}function _4(e,t){if(e==null)return{};var r=U$e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function U$e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function sp(){return sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sp.apply(this,arguments)}function N4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N4(Object(r),!0).forEach(function(n){Ua(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dd(e){return q$e(e)||V$e(e)||z$e(e)||B$e()}function B$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z$e(e,t){if(e){if(typeof e=="string")return ZS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZS(e,t)}}function V$e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function q$e(e){if(Array.isArray(e))return ZS(e)}function ZS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MW(n.key),n)}}function H$e(e,t,r){return t&&S4(e.prototype,t),r&&S4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function K$e(e,t,r){return t=Vb(t),G$e(e,RW()?Reflect.construct(t,r||[],Vb(e).constructor):t.apply(e,r))}function G$e(e,t){if(t&&(th(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y$e(e)}function Y$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RW=function(){return!!e})()}function Vb(e){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vb(e)}function X$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JS(e,t)}function JS(e,t){return JS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},JS(e,t)}function Ua(e,t,r){return t=MW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MW(e){var t=Q$e(e,"string");return th(t)=="symbol"?t:t+""}function Q$e(e,t){if(th(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tu=function(e){function t(){var r;W$e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=K$e(this,t,[].concat(a)),Ua(r,"state",{isAnimationFinished:!0,totalLength:0}),Ua(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Ua(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(b,y){return b+y});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,h=l-o,m=[],g=0,p=0;g<c.length;p+=c[g],++g)if(p+c[g]>f){m=[].concat(dd(c.slice(0,g)),[f-p]);break}var v=m.length%2===0?[0,h]:[h];return[].concat(dd(t.repeat(c,d)),dd(m),v).map(function(b){return"".concat(b,"px")}).join(", ")}),Ua(r,"id",Oh("recharts-line-")),Ua(r,"pathRef",function(o){r.mainCurve=o}),Ua(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Ua(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return X$e(t,e),H$e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Ys(d,fv);if(!f)return null;var h=function(p,v){return{x:p.x,y:p.y,value:p.value,errorVal:Wr(p.payload,v)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return O.createElement(At,m,f.map(function(g){return O.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=Ve(this.props,!1),h=Ve(c,!0),m=u.map(function(p,v){var b=$s($s($s({key:"dot-".concat(v),r:3},f),h),{},{index:v,cx:p.x,cy:p.y,value:p.value,dataKey:d,payload:p.payload,points:u});return t.renderDotItem(c,b)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return O.createElement(At,sp({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(n,a,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=_4(l,L$e),h=$s($s($s({},Ve(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:d});return O.createElement(wb,sp({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,g=o.animateNewValues,p=o.width,v=o.height,b=this.state,y=b.prevPoints,w=b.totalLength;return O.createElement(si,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var j=_.t;if(y){var N=y.length/l.length,S=l.map(function(E,R){var $=Math.floor(R*N);if(y[$]){var B=y[$],F=Pn(B.x,E.x),L=Pn(B.y,E.y);return $s($s({},E),{},{x:F(j),y:L(j)})}if(g){var D=Pn(p*2,E.x),T=Pn(v/2,E.y);return $s($s({},E),{},{x:D(j),y:T(j)})}return $s($s({},E),{},{x:E.x,y:E.y})});return i.renderCurveStatically(S,n,a)}var k=Pn(0,w),C=k(j),P;if(c){var A="".concat(c).split(/[,\s]+/gim).map(function(E){return parseFloat(E)});P=i.getStrokeDasharray(C,w,A)}else P=i.generateSimpleStrokeDasharray(w,C);return i.renderCurveStatically(l,n,a,{strokeDasharray:P})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!$h(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,f=a.top,h=a.left,m=a.width,g=a.height,p=a.isAnimationActive,v=a.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,y=l.length===1,w=at("recharts-line",c),_=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,N=_||j,S=it(v)?this.id:v,k=(n=Ve(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},C=k.r,P=C===void 0?3:C,A=k.strokeWidth,E=A===void 0?2:A,R=Zge(o)?o:{},$=R.clipDot,B=$===void 0?!0:$,F=P*2+E;return O.createElement(At,{className:w},_||j?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(S)},O.createElement("rect",{x:_?h:h-m/2,y:j?f:f-g/2,width:_?m:m*2,height:j?g:g*2})),!B&&O.createElement("clipPath",{id:"clipPath-dots-".concat(S)},O.createElement("rect",{x:h-F/2,y:f-F/2,width:m+F,height:g+F}))):null,!y&&this.renderCurve(N,S),this.renderErrorBar(N,S),(y||o)&&this.renderDots(N,B,S),(!p||b)&&Ei.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(dd(n),[0]):n,o=[],l=0;l<a;++l)o=[].concat(dd(o),dd(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(O.isValidElement(n))i=O.cloneElement(n,a);else if(Ye(n))i=n(a);else{var o=a.key,l=_4(a,F$e),c=at("recharts-line-dot",typeof n!="boolean"?n.className:"");i=O.createElement(hv,sp({key:o},l,{className:c}))}return i}}])}(x.PureComponent);Ua(tu,"displayName","Line");Ua(tu,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ga.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ua(tu,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,m){var g=Wr(h,o);return d==="horizontal"?{x:HR({axis:r,ticks:a,bandSize:l,entry:h,index:m}),y:it(g)?null:n.scale(g),value:g,payload:h}:{x:it(g)?null:r.scale(g),y:HR({axis:n,ticks:i,bandSize:l,entry:h,index:m}),value:g,payload:h}});return $s({points:f,layout:d},u)});function rh(e){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(e)}function Z$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J$e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LW(n.key),n)}}function eIe(e,t,r){return t&&J$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tIe(e,t,r){return t=qb(t),rIe(e,$W()?Reflect.construct(t,r||[],qb(e).constructor):t.apply(e,r))}function rIe(e,t){if(t&&(rh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nIe(e)}function nIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($W=function(){return!!e})()}function qb(e){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qb(e)}function sIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eC(e,t)}function eC(e,t){return eC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},eC(e,t)}function IW(e,t,r){return t=LW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LW(e){var t=aIe(e,"string");return rh(t)=="symbol"?t:t+""}function aIe(e,t){if(rh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tC(){return tC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tC.apply(this,arguments)}function iIe(e){var t=e.xAxisId,r=IP(),n=LP(),a=jW(t);return a==null?null:x.createElement(Bh,tC({},a,{className:at("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return uo(o,!0)}}))}var ru=function(e){function t(){return Z$e(this,t),tIe(this,t,arguments)}return sIe(t,e),eIe(t,[{key:"render",value:function(){return x.createElement(iIe,this.props)}}])}(x.Component);IW(ru,"displayName","XAxis");IW(ru,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function nh(e){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nh(e)}function oIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BW(n.key),n)}}function cIe(e,t,r){return t&&lIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uIe(e,t,r){return t=Wb(t),dIe(e,FW()?Reflect.construct(t,r||[],Wb(e).constructor):t.apply(e,r))}function dIe(e,t){if(t&&(nh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fIe(e)}function fIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FW=function(){return!!e})()}function Wb(e){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wb(e)}function hIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rC(e,t)}function rC(e,t){return rC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rC(e,t)}function UW(e,t,r){return t=BW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BW(e){var t=mIe(e,"string");return nh(t)=="symbol"?t:t+""}function mIe(e,t){if(nh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nC(){return nC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nC.apply(this,arguments)}var pIe=function(t){var r=t.yAxisId,n=IP(),a=LP(),i=_W(r);return i==null?null:x.createElement(Bh,nC({},i,{className:at("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return uo(l,!0)}}))},nu=function(e){function t(){return oIe(this,t),uIe(this,t,arguments)}return hIe(t,e),cIe(t,[{key:"render",value:function(){return x.createElement(pIe,this.props)}}])}(x.Component);UW(nu,"displayName","YAxis");UW(nu,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function C4(e){return xIe(e)||yIe(e)||vIe(e)||gIe()}function gIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vIe(e,t){if(e){if(typeof e=="string")return sC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sC(e,t)}}function yIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xIe(e){if(Array.isArray(e))return sC(e)}function sC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var aC=function(t,r,n,a,i){var o=Ys(t,UP),l=Ys(t,Ww),c=[].concat(C4(o),C4(l)),u=Ys(t,Kw),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(p,v){if(v.props[d]===n&&Pi(v.props,"extendDomain")&&xe(v.props[f])){var b=v.props[f];return[Math.min(p[0],b),Math.max(p[1],b)]}return p},h)),u.length){var m="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(p,v){if(v.props[d]===n&&Pi(v.props,"extendDomain")&&xe(v.props[m])&&xe(v.props[g])){var b=v.props[m],y=v.props[g];return[Math.min(p[0],b,y),Math.max(p[1],b,y)]}return p},h)}return i&&i.length&&(h=i.reduce(function(p,v){return xe(v)?[Math.min(p[0],v),Math.max(p[1],v)]:p},h)),h},zW={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var p=r?r+u:u;if(!this._events[p])return!1;var v=this._events[p],b=arguments.length,y,w;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,g),!0}for(w=1,y=new Array(b-1);w<b;w++)y[w-1]=arguments[w];v.fn.apply(v.context,y)}else{var _=v.length,j;for(w=0;w<_;w++)switch(v[w].once&&this.removeListener(u,v[w].fn,void 0,!0),b){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,d);break;case 3:v[w].fn.call(v[w].context,d,f);break;case 4:v[w].fn.call(v[w].context,d,f,h);break;default:if(!y)for(j=1,y=new Array(b-1);j<b;j++)y[j-1]=arguments[j];v[w].fn.apply(v[w].context,y)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var p=0,v=[],b=g.length;p<b;p++)(g[p].fn!==d||h&&!g[p].once||f&&g[p].context!==f)&&v.push(g[p]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(zW);var bIe=zW.exports;const wIe=Kt(bIe);var T_=new wIe,D_="recharts.syncMouseEvents";function _g(e){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_g(e)}function jIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VW(n.key),n)}}function NIe(e,t,r){return t&&_Ie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R_(e,t,r){return t=VW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VW(e){var t=SIe(e,"string");return _g(t)=="symbol"?t:t+""}function SIe(e,t){if(_g(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var CIe=function(){function e(){jIe(this,e),R_(this,"activeIndex",0),R_(this,"coordinateList",[]),R_(this,"layout","horizontal")}return NIe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function kIe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&xe(n)&&xe(a))return!0}return!1}function EIe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function qW(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=Ht(t,r,n,a),l=Ht(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function PIe(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=Ht(l,c,u,f),m=Ht(l,c,d,f);n=h.x,a=h.y,i=m.x,o=m.y}else return qW(t);return[{x:n,y:a},{x:i,y:o}]}function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function k4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k4(Object(r),!0).forEach(function(n){AIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AIe(e,t,r){return t=OIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OIe(e){var t=TIe(e,"string");return Ng(t)=="symbol"?t:t+""}function TIe(e,t){if(Ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DIe(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,p=wb;if(h==="ScatterChart")g=o,p=CTe;else if(h==="BarChart")g=EIe(f,o,c,d),p=DP;else if(f==="radial"){var v=qW(o),b=v.cx,y=v.cy,w=v.radius,_=v.startAngle,j=v.endAngle;g={cx:b,cy:y,startAngle:_,endAngle:j,innerRadius:w,outerRadius:w},p=$q}else g={points:PIe(f,o,c)},p=wb;var N=fy(fy(fy(fy({stroke:"#ccc",pointerEvents:"none"},c),g),Ve(m,!1)),{},{payload:l,payloadIndex:u,className:at("recharts-tooltip-cursor",m.className)});return x.isValidElement(m)?x.cloneElement(m,N):x.createElement(p,N)}var RIe=["item"],MIe=["children","className","width","height","style","compact","title","desc"];function sh(e){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(e)}function Md(){return Md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Md.apply(this,arguments)}function E4(e,t){return LIe(e)||IIe(e,t)||HW(e,t)||$Ie()}function $Ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IIe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function LIe(e){if(Array.isArray(e))return e}function P4(e,t){if(e==null)return{};var r=FIe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function FIe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function UIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KW(n.key),n)}}function zIe(e,t,r){return t&&BIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VIe(e,t,r){return t=Hb(t),qIe(e,WW()?Reflect.construct(t,r||[],Hb(e).constructor):t.apply(e,r))}function qIe(e,t){if(t&&(sh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WIe(e)}function WIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WW=function(){return!!e})()}function Hb(e){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hb(e)}function HIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iC(e,t)}function iC(e,t){return iC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iC(e,t)}function ah(e){return YIe(e)||GIe(e)||HW(e)||KIe()}function KIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HW(e,t){if(e){if(typeof e=="string")return oC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oC(e,t)}}function GIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YIe(e){if(Array.isArray(e))return oC(e)}function oC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A4(Object(r),!0).forEach(function(n){Xe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xe(e,t,r){return t=KW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KW(e){var t=XIe(e,"string");return sh(t)=="symbol"?t:t+""}function XIe(e,t){if(sh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QIe={xAxis:["bottom","top"],yAxis:["left","right"]},ZIe={width:"100%",height:"100%"},GW={x:0,y:0};function hy(e){return e}var JIe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},eLe=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return se(se(se({},a),Ht(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return se(se(se({},a),Ht(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return GW},Gw=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(ah(l),ah(u)):l},[]);return o.length>0?o:t&&t.length&&xe(a)&&xe(i)?t.slice(a,i+1):[]};function YW(e){return e==="number"?[0,"auto"]:void 0}var lC=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,l=Gw(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;h=qx(m,o.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(ah(c),[Eq(u,h)]):c},[])},O4=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=JIe(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=JPe(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=lC(t,r,d,f),m=eLe(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},tLe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=jq(d,i);return n.reduce(function(g,p){var v,b=p.type.defaultProps!==void 0?se(se({},p.type.defaultProps),p.props):p.props,y=b.type,w=b.dataKey,_=b.allowDataOverflow,j=b.allowDuplicatedCategory,N=b.scale,S=b.ticks,k=b.includeHidden,C=b[o];if(g[C])return g;var P=Gw(t.data,{graphicalItems:a.filter(function(H){var ae,he=o in H.props?H.props[o]:(ae=H.type.defaultProps)===null||ae===void 0?void 0:ae[o];return he===C}),dataStartIndex:c,dataEndIndex:u}),A=P.length,E,R,$;kIe(b.domain,_,y)&&(E=wS(b.domain,null,_),m&&(y==="number"||N!=="auto")&&($=ep(P,w,"category")));var B=YW(y);if(!E||E.length===0){var F,L=(F=b.domain)!==null&&F!==void 0?F:B;if(w){if(E=ep(P,w,y),y==="category"&&m){var D=zge(E);j&&D?(R=E,E=Db(0,A)):j||(E=XR(L,E,p).reduce(function(H,ae){return H.indexOf(ae)>=0?H:[].concat(ah(H),[ae])},[]))}else if(y==="category")j?E=E.filter(function(H){return H!==""&&!it(H)}):E=XR(L,E,p).reduce(function(H,ae){return H.indexOf(ae)>=0||ae===""||it(ae)?H:[].concat(ah(H),[ae])},[]);else if(y==="number"){var T=sAe(P,a.filter(function(H){var ae,he,Pe=o in H.props?H.props[o]:(ae=H.type.defaultProps)===null||ae===void 0?void 0:ae[o],Ae="hide"in H.props?H.props.hide:(he=H.type.defaultProps)===null||he===void 0?void 0:he.hide;return Pe===C&&(k||!Ae)}),w,i,d);T&&(E=T)}m&&(y==="number"||N!=="auto")&&($=ep(P,w,"category"))}else m?E=Db(0,A):l&&l[C]&&l[C].hasStack&&y==="number"?E=h==="expand"?[0,1]:kq(l[C].stackGroups,c,u):E=wq(P,a.filter(function(H){var ae=o in H.props?H.props[o]:H.type.defaultProps[o],he="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return ae===C&&(k||!he)}),y,d,!0);if(y==="number")E=aC(f,E,C,i,S),L&&(E=wS(L,E,_));else if(y==="category"&&L){var U=L,X=E.every(function(H){return U.indexOf(H)>=0});X&&(E=U)}}return se(se({},g),{},Xe({},C,se(se({},b),{},{axisType:i,domain:E,categoricalDomain:$,duplicateDomain:R,originalDomain:(v=b.domain)!==null&&v!==void 0?v:B,isCategorical:m,layout:d})))},{})},rLe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=Gw(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=jq(d,i),p=-1;return n.reduce(function(v,b){var y=b.type.defaultProps!==void 0?se(se({},b.type.defaultProps),b.props):b.props,w=y[o],_=YW("number");if(!v[w]){p++;var j;return g?j=Db(0,m):l&&l[w]&&l[w].hasStack?(j=kq(l[w].stackGroups,c,u),j=aC(f,j,w,i)):(j=wS(_,wq(h,n.filter(function(N){var S,k,C=o in N.props?N.props[o]:(S=N.type.defaultProps)===null||S===void 0?void 0:S[o],P="hide"in N.props?N.props.hide:(k=N.type.defaultProps)===null||k===void 0?void 0:k.hide;return C===w&&!P}),"number",d),a.defaultProps.allowDataOverflow),j=aC(f,j,w,i)),se(se({},v),{},Xe({},w,se(se({axisType:i},a.defaultProps),{},{hide:!0,orientation:Gs(QIe,"".concat(i,".").concat(p%2),null),domain:j,originalDomain:_,isCategorical:g,layout:d})))}return v},{})},nLe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=Ys(d,i),m={};return h&&h.length?m=tLe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=rLe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},sLe=function(t){var r=Jo(t),n=uo(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:iP(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:yb(r,n)}},T4=function(t){var r=t.children,n=t.defaultShowTooltip,a=Fs(r,Yf),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},aLe=function(t){return!t||!t.length?!1:t.some(function(r){var n=ho(r&&r.type);return n&&n.indexOf("Bar")>=0})},D4=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},iLe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=Fs(f,Yf),g=Fs(f,Zc),p=Object.keys(c).reduce(function(j,N){var S=c[N],k=S.orientation;return!S.mirror&&!S.hide?se(se({},j),{},Xe({},k,j[k]+S.width)):j},{left:h.left||0,right:h.right||0}),v=Object.keys(o).reduce(function(j,N){var S=o[N],k=S.orientation;return!S.mirror&&!S.hide?se(se({},j),{},Xe({},k,Gs(j,"".concat(k))+S.height)):j},{top:h.top||0,bottom:h.bottom||0}),b=se(se({},v),p),y=b.bottom;m&&(b.bottom+=m.props.height||Yf.defaultProps.height),g&&r&&(b=rAe(b,a,n,r));var w=u-b.left-b.right,_=d-b.top-b.bottom;return se(se({brushBottom:y},b),{},{width:Math.max(w,0),height:Math.max(_,0)})},oLe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Yw=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(b,y){var w=y.graphicalItems,_=y.stackGroups,j=y.offset,N=y.updateId,S=y.dataStartIndex,k=y.dataEndIndex,C=b.barSize,P=b.layout,A=b.barGap,E=b.barCategoryGap,R=b.maxBarSize,$=D4(P),B=$.numericAxisName,F=$.cateAxisName,L=aLe(w),D=[];return w.forEach(function(T,U){var X=Gw(b.data,{graphicalItems:[T],dataStartIndex:S,dataEndIndex:k}),H=T.type.defaultProps!==void 0?se(se({},T.type.defaultProps),T.props):T.props,ae=H.dataKey,he=H.maxBarSize,Pe=H["".concat(B,"Id")],Ae=H["".concat(F,"Id")],ue={},ze=c.reduce(function(G,te){var we=y["".concat(te.axisType,"Map")],je=H["".concat(te.axisType,"Id")];we&&we[je]||te.axisType==="zAxis"||Au();var ve=we[je];return se(se({},G),{},Xe(Xe({},te.axisType,ve),"".concat(te.axisType,"Ticks"),uo(ve)))},ue),ie=ze[F],be=ze["".concat(F,"Ticks")],_e=_&&_[Pe]&&_[Pe].hasStack&&hAe(T,_[Pe].stackGroups),ee=ho(T.type).indexOf("Bar")>=0,ot=yb(ie,be),Ge=[],Et=L&&eAe({barSize:C,stackGroups:_,totalSize:oLe(ze,F)});if(ee){var Ut,tr,_r=it(he)?R:he,gn=(Ut=(tr=yb(ie,be,!0))!==null&&tr!==void 0?tr:_r)!==null&&Ut!==void 0?Ut:0;Ge=tAe({barGap:A,barCategoryGap:E,bandSize:gn!==ot?gn:ot,sizeList:Et[Ae],maxBarSize:_r}),gn!==ot&&(Ge=Ge.map(function(G){return se(se({},G),{},{position:se(se({},G.position),{},{offset:G.position.offset-gn/2})})}))}var z=T&&T.type&&T.type.getComposedData;z&&D.push({props:se(se({},z(se(se({},ze),{},{displayedData:X,props:b,dataKey:ae,item:T,bandSize:ot,barPosition:Ge,offset:j,stackedData:_e,layout:P,dataStartIndex:S,dataEndIndex:k}))),{},Xe(Xe(Xe({key:T.key||"item-".concat(U)},B,ze[B]),F,ze[F]),"animationId",N)),childIndex:tve(T,b.children),item:T})}),D},m=function(b,y){var w=b.props,_=b.dataStartIndex,j=b.dataEndIndex,N=b.updateId;if(!VT({props:w}))return null;var S=w.children,k=w.layout,C=w.stackOffset,P=w.data,A=w.reverseStackOrder,E=D4(k),R=E.numericAxisName,$=E.cateAxisName,B=Ys(S,n),F=dAe(P,B,"".concat(R,"Id"),"".concat($,"Id"),C,A),L=c.reduce(function(H,ae){var he="".concat(ae.axisType,"Map");return se(se({},H),{},Xe({},he,nLe(w,se(se({},ae),{},{graphicalItems:B,stackGroups:ae.axisType===R&&F,dataStartIndex:_,dataEndIndex:j}))))},{}),D=iLe(se(se({},L),{},{props:w,graphicalItems:B}),y==null?void 0:y.legendBBox);Object.keys(L).forEach(function(H){L[H]=d(w,L[H],D,H.replace("Map",""),r)});var T=L["".concat($,"Map")],U=sLe(T),X=h(w,se(se({},L),{},{dataStartIndex:_,dataEndIndex:j,updateId:N,graphicalItems:B,stackGroups:F,offset:D}));return se(se({formattedGraphicalItems:X,graphicalItems:B,offset:D,stackGroups:F},U),L)},g=function(v){function b(y){var w,_,j;return UIe(this,b),j=VIe(this,b,[y]),Xe(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xe(j,"accessibilityManager",new CIe),Xe(j,"handleLegendBBoxUpdate",function(N){if(N){var S=j.state,k=S.dataStartIndex,C=S.dataEndIndex,P=S.updateId;j.setState(se({legendBBox:N},m({props:j.props,dataStartIndex:k,dataEndIndex:C,updateId:P},se(se({},j.state),{},{legendBBox:N}))))}}),Xe(j,"handleReceiveSyncEvent",function(N,S,k){if(j.props.syncId===N){if(k===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(S)}}),Xe(j,"handleBrushChange",function(N){var S=N.startIndex,k=N.endIndex;if(S!==j.state.dataStartIndex||k!==j.state.dataEndIndex){var C=j.state.updateId;j.setState(function(){return se({dataStartIndex:S,dataEndIndex:k},m({props:j.props,dataStartIndex:S,dataEndIndex:k,updateId:C},j.state))}),j.triggerSyncEvent({dataStartIndex:S,dataEndIndex:k})}}),Xe(j,"handleMouseEnter",function(N){var S=j.getMouseInfo(N);if(S){var k=se(se({},S),{},{isTooltipActive:!0});j.setState(k),j.triggerSyncEvent(k);var C=j.props.onMouseEnter;Ye(C)&&C(k,N)}}),Xe(j,"triggeredAfterMouseMove",function(N){var S=j.getMouseInfo(N),k=S?se(se({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(k),j.triggerSyncEvent(k);var C=j.props.onMouseMove;Ye(C)&&C(k,N)}),Xe(j,"handleItemMouseEnter",function(N){j.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),Xe(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),Xe(j,"handleMouseMove",function(N){N.persist(),j.throttleTriggeredAfterMouseMove(N)}),Xe(j,"handleMouseLeave",function(N){j.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};j.setState(S),j.triggerSyncEvent(S);var k=j.props.onMouseLeave;Ye(k)&&k(S,N)}),Xe(j,"handleOuterEvent",function(N){var S=eve(N),k=Gs(j.props,"".concat(S));if(S&&Ye(k)){var C,P;/.*touch.*/i.test(S)?P=j.getMouseInfo(N.changedTouches[0]):P=j.getMouseInfo(N),k((C=P)!==null&&C!==void 0?C:{},N)}}),Xe(j,"handleClick",function(N){var S=j.getMouseInfo(N);if(S){var k=se(se({},S),{},{isTooltipActive:!0});j.setState(k),j.triggerSyncEvent(k);var C=j.props.onClick;Ye(C)&&C(k,N)}}),Xe(j,"handleMouseDown",function(N){var S=j.props.onMouseDown;if(Ye(S)){var k=j.getMouseInfo(N);S(k,N)}}),Xe(j,"handleMouseUp",function(N){var S=j.props.onMouseUp;if(Ye(S)){var k=j.getMouseInfo(N);S(k,N)}}),Xe(j,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),Xe(j,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.handleMouseDown(N.changedTouches[0])}),Xe(j,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.handleMouseUp(N.changedTouches[0])}),Xe(j,"handleDoubleClick",function(N){var S=j.props.onDoubleClick;if(Ye(S)){var k=j.getMouseInfo(N);S(k,N)}}),Xe(j,"handleContextMenu",function(N){var S=j.props.onContextMenu;if(Ye(S)){var k=j.getMouseInfo(N);S(k,N)}}),Xe(j,"triggerSyncEvent",function(N){j.props.syncId!==void 0&&T_.emit(D_,j.props.syncId,N,j.eventEmitterSymbol)}),Xe(j,"applySyncEvent",function(N){var S=j.props,k=S.layout,C=S.syncMethod,P=j.state.updateId,A=N.dataStartIndex,E=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)j.setState(se({dataStartIndex:A,dataEndIndex:E},m({props:j.props,dataStartIndex:A,dataEndIndex:E,updateId:P},j.state)));else if(N.activeTooltipIndex!==void 0){var R=N.chartX,$=N.chartY,B=N.activeTooltipIndex,F=j.state,L=F.offset,D=F.tooltipTicks;if(!L)return;if(typeof C=="function")B=C(D,N);else if(C==="value"){B=-1;for(var T=0;T<D.length;T++)if(D[T].value===N.activeLabel){B=T;break}}var U=se(se({},L),{},{x:L.left,y:L.top}),X=Math.min(R,U.x+U.width),H=Math.min($,U.y+U.height),ae=D[B]&&D[B].value,he=lC(j.state,j.props.data,B),Pe=D[B]?{x:k==="horizontal"?D[B].coordinate:X,y:k==="horizontal"?H:D[B].coordinate}:GW;j.setState(se(se({},N),{},{activeLabel:ae,activeCoordinate:Pe,activePayload:he,activeTooltipIndex:B}))}else j.setState(N)}),Xe(j,"renderCursor",function(N){var S,k=j.state,C=k.isTooltipActive,P=k.activeCoordinate,A=k.activePayload,E=k.offset,R=k.activeTooltipIndex,$=k.tooltipAxisBandSize,B=j.getTooltipEventType(),F=(S=N.props.active)!==null&&S!==void 0?S:C,L=j.props.layout,D=N.key||"_recharts-cursor";return O.createElement(DIe,{key:D,activeCoordinate:P,activePayload:A,activeTooltipIndex:R,chartName:r,element:N,isActive:F,layout:L,offset:E,tooltipAxisBandSize:$,tooltipEventType:B})}),Xe(j,"renderPolarAxis",function(N,S,k){var C=Gs(N,"type.axisType"),P=Gs(j.state,"".concat(C,"Map")),A=N.type.defaultProps,E=A!==void 0?se(se({},A),N.props):N.props,R=P&&P[E["".concat(C,"Id")]];return x.cloneElement(N,se(se({},R),{},{className:at(C,R.className),key:N.key||"".concat(S,"-").concat(k),ticks:uo(R,!0)}))}),Xe(j,"renderPolarGrid",function(N){var S=N.props,k=S.radialLines,C=S.polarAngles,P=S.polarRadius,A=j.state,E=A.radiusAxisMap,R=A.angleAxisMap,$=Jo(E),B=Jo(R),F=B.cx,L=B.cy,D=B.innerRadius,T=B.outerRadius;return x.cloneElement(N,{polarAngles:Array.isArray(C)?C:uo(B,!0).map(function(U){return U.coordinate}),polarRadius:Array.isArray(P)?P:uo($,!0).map(function(U){return U.coordinate}),cx:F,cy:L,innerRadius:D,outerRadius:T,key:N.key||"polar-grid",radialLines:k})}),Xe(j,"renderLegend",function(){var N=j.state.formattedGraphicalItems,S=j.props,k=S.children,C=S.width,P=S.height,A=j.props.margin||{},E=C-(A.left||0)-(A.right||0),R=xq({children:k,formattedGraphicalItems:N,legendWidth:E,legendContent:u});if(!R)return null;var $=R.item,B=P4(R,RIe);return x.cloneElement($,se(se({},B),{},{chartWidth:C,chartHeight:P,margin:A,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),Xe(j,"renderTooltip",function(){var N,S=j.props,k=S.children,C=S.accessibilityLayer,P=Fs(k,vs);if(!P)return null;var A=j.state,E=A.isTooltipActive,R=A.activeCoordinate,$=A.activePayload,B=A.activeLabel,F=A.offset,L=(N=P.props.active)!==null&&N!==void 0?N:E;return x.cloneElement(P,{viewBox:se(se({},F),{},{x:F.left,y:F.top}),active:L,label:B,payload:L?$:[],coordinate:R,accessibilityLayer:C})}),Xe(j,"renderBrush",function(N){var S=j.props,k=S.margin,C=S.data,P=j.state,A=P.offset,E=P.dataStartIndex,R=P.dataEndIndex,$=P.updateId;return x.cloneElement(N,{key:N.key||"_recharts-brush",onChange:ly(j.handleBrushChange,N.props.onChange),data:C,x:xe(N.props.x)?N.props.x:A.left,y:xe(N.props.y)?N.props.y:A.top+A.height+A.brushBottom-(k.bottom||0),width:xe(N.props.width)?N.props.width:A.width,startIndex:E,endIndex:R,updateId:"brush-".concat($)})}),Xe(j,"renderReferenceElement",function(N,S,k){if(!N)return null;var C=j,P=C.clipPathId,A=j.state,E=A.xAxisMap,R=A.yAxisMap,$=A.offset,B=N.type.defaultProps||{},F=N.props,L=F.xAxisId,D=L===void 0?B.xAxisId:L,T=F.yAxisId,U=T===void 0?B.yAxisId:T;return x.cloneElement(N,{key:N.key||"".concat(S,"-").concat(k),xAxis:E[D],yAxis:R[U],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:P})}),Xe(j,"renderActivePoints",function(N){var S=N.item,k=N.activePoint,C=N.basePoint,P=N.childIndex,A=N.isRange,E=[],R=S.props.key,$=S.item.type.defaultProps!==void 0?se(se({},S.item.type.defaultProps),S.item.props):S.item.props,B=$.activeDot,F=$.dataKey,L=se(se({index:P,dataKey:F,cx:k.x,cy:k.y,r:4,fill:TP(S.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value},Ve(B,!1)),Wx(B));return E.push(b.renderActiveDot(B,L,"".concat(R,"-activePoint-").concat(P))),C?E.push(b.renderActiveDot(B,se(se({},L),{},{cx:C.x,cy:C.y}),"".concat(R,"-basePoint-").concat(P))):A&&E.push(null),E}),Xe(j,"renderGraphicChild",function(N,S,k){var C=j.filterFormatItem(N,S,k);if(!C)return null;var P=j.getTooltipEventType(),A=j.state,E=A.isTooltipActive,R=A.tooltipAxis,$=A.activeTooltipIndex,B=A.activeLabel,F=j.props.children,L=Fs(F,vs),D=C.props,T=D.points,U=D.isRange,X=D.baseLine,H=C.item.type.defaultProps!==void 0?se(se({},C.item.type.defaultProps),C.item.props):C.item.props,ae=H.activeDot,he=H.hide,Pe=H.activeBar,Ae=H.activeShape,ue=!!(!he&&E&&L&&(ae||Pe||Ae)),ze={};P!=="axis"&&L&&L.props.trigger==="click"?ze={onClick:ly(j.handleItemMouseEnter,N.props.onClick)}:P!=="axis"&&(ze={onMouseLeave:ly(j.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:ly(j.handleItemMouseEnter,N.props.onMouseEnter)});var ie=x.cloneElement(N,se(se({},C.props),ze));function be(te){return typeof R.dataKey=="function"?R.dataKey(te.payload):null}if(ue)if($>=0){var _e,ee;if(R.dataKey&&!R.allowDuplicatedCategory){var ot=typeof R.dataKey=="function"?be:"payload.".concat(R.dataKey.toString());_e=qx(T,ot,B),ee=U&&X&&qx(X,ot,B)}else _e=T==null?void 0:T[$],ee=U&&X&&X[$];if(Ae||Pe){var Ge=N.props.activeIndex!==void 0?N.props.activeIndex:$;return[x.cloneElement(N,se(se(se({},C.props),ze),{},{activeIndex:Ge})),null,null]}if(!it(_e))return[ie].concat(ah(j.renderActivePoints({item:C,activePoint:_e,basePoint:ee,childIndex:$,isRange:U})))}else{var Et,Ut=(Et=j.getItemByXY(j.state.activeCoordinate))!==null&&Et!==void 0?Et:{graphicalItem:ie},tr=Ut.graphicalItem,_r=tr.item,gn=_r===void 0?N:_r,z=tr.childIndex,G=se(se(se({},C.props),ze),{},{activeIndex:z});return[x.cloneElement(gn,G),null,null]}return U?[ie,null,null]:[ie,null]}),Xe(j,"renderCustomized",function(N,S,k){return x.cloneElement(N,se(se({key:"recharts-customized-".concat(k)},j.props),j.state))}),Xe(j,"renderMap",{CartesianGrid:{handler:hy,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:hy},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:hy},YAxis:{handler:hy},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=y.id)!==null&&w!==void 0?w:Oh("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=yV(j.triggeredAfterMouseMove,(_=y.throttleDelay)!==null&&_!==void 0?_:1e3/60),j.state={},j}return HIe(b,v),zIe(b,[{key:"componentDidMount",value:function(){var w,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,_=w.children,j=w.data,N=w.height,S=w.layout,k=Fs(_,vs);if(k){var C=k.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,A=lC(this.state,j,C,P),E=this.state.tooltipTicks[C].coordinate,R=(this.state.offset.top+N)/2,$=S==="horizontal",B=$?{x:E,y:R}:{y:E,x:R},F=this.state.formattedGraphicalItems.find(function(D){var T=D.item;return T.type.name==="Scatter"});F&&(B=se(se({},B),F.props.points[C].tooltipPosition),A=F.props.points[C].tooltipPayload);var L={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:P,activePayload:A,activeCoordinate:B};this.setState(L),this.renderCursor(k),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,N;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(w){$1([Fs(w.children,vs)],[Fs(this.props.children,vs)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Fs(this.props.children,vs);if(w&&typeof w.props.shared=="boolean"){var _=w.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var _=this.container,j=_.getBoundingClientRect(),N=kSe(j),S={chartX:Math.round(w.pageX-N.left),chartY:Math.round(w.pageY-N.top)},k=j.width/_.offsetWidth||1,C=this.inRange(S.chartX,S.chartY,k);if(!C)return null;var P=this.state,A=P.xAxisMap,E=P.yAxisMap,R=this.getTooltipEventType(),$=O4(this.state,this.props.data,this.props.layout,C);if(R!=="axis"&&A&&E){var B=Jo(A).scale,F=Jo(E).scale,L=B&&B.invert?B.invert(S.chartX):null,D=F&&F.invert?F.invert(S.chartY):null;return se(se({},S),{},{xValue:L,yValue:D},$)}return $?se(se({},S),$):null}},{key:"inRange",value:function(w,_){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,S=w/j,k=_/j;if(N==="horizontal"||N==="vertical"){var C=this.state.offset,P=S>=C.left&&S<=C.left+C.width&&k>=C.top&&k<=C.top+C.height;return P?{x:S,y:k}:null}var A=this.state,E=A.angleAxisMap,R=A.radiusAxisMap;if(E&&R){var $=Jo(E);return JR({x:S,y:k},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,_=this.getTooltipEventType(),j=Fs(w,vs),N={};j&&_==="axis"&&(j.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=Wx(this.props,this.handleOuterEvent);return se(se({},S),N)}},{key:"addListener",value:function(){T_.on(D_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){T_.removeListener(D_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,_,j){for(var N=this.state.formattedGraphicalItems,S=0,k=N.length;S<k;S++){var C=N[S];if(C.item===w||C.props.key===w.key||_===ho(C.item.type)&&j===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,_=this.state.offset,j=_.left,N=_.top,S=_.height,k=_.width;return O.createElement("defs",null,O.createElement("clipPath",{id:w},O.createElement("rect",{x:j,y:N,height:S,width:k})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(_,j){var N=E4(j,2),S=N[0],k=N[1];return se(se({},_),{},Xe({},S,k.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(_,j){var N=E4(j,2),S=N[0],k=N[1];return se(se({},_),{},Xe({},S,k.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(w){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(w){var _=this.state,j=_.formattedGraphicalItems,N=_.activeItem;if(j&&j.length)for(var S=0,k=j.length;S<k;S++){var C=j[S],P=C.props,A=C.item,E=A.type.defaultProps!==void 0?se(se({},A.type.defaultProps),A.props):A.props,R=ho(A.type);if(R==="Bar"){var $=(P.data||[]).find(function(D){return oTe(w,D)});if($)return{graphicalItem:C,payload:$}}else if(R==="RadialBar"){var B=(P.data||[]).find(function(D){return JR(w,D)});if(B)return{graphicalItem:C,payload:B}}else if(Bw(C,N)||zw(C,N)||yg(C,N)){var F=aRe({graphicalItem:C,activeTooltipItem:N,itemData:E.data}),L=E.activeIndex===void 0?F:E.activeIndex;return{graphicalItem:se(se({},C),{},{childIndex:L}),payload:yg(C,N)?E.data[F]:C.props.data[F]}}}return null}},{key:"render",value:function(){var w=this;if(!VT(this))return null;var _=this.props,j=_.children,N=_.className,S=_.width,k=_.height,C=_.style,P=_.compact,A=_.title,E=_.desc,R=P4(_,MIe),$=Ve(R,!1);if(P)return O.createElement(u4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},O.createElement(L1,Md({},$,{width:S,height:k,title:A,desc:E}),this.renderClipPath(),WT(j,this.renderMap)));if(this.props.accessibilityLayer){var B,F;$.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,$.role=(F=this.props.role)!==null&&F!==void 0?F:"application",$.onKeyDown=function(D){w.accessibilityManager.keyboardEvent(D)},$.onFocus=function(){w.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return O.createElement(u4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},O.createElement("div",Md({className:at("recharts-wrapper",N),style:se({position:"relative",cursor:"default",width:S,height:k},C)},L,{ref:function(T){w.container=T}}),O.createElement(L1,Md({},$,{width:S,height:k,title:A,desc:E,style:ZIe}),this.renderClipPath(),WT(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(x.Component);Xe(g,"displayName",r),Xe(g,"defaultProps",se({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Xe(g,"getDerivedStateFromProps",function(v,b){var y=v.dataKey,w=v.data,_=v.children,j=v.width,N=v.height,S=v.layout,k=v.stackOffset,C=v.margin,P=b.dataStartIndex,A=b.dataEndIndex;if(b.updateId===void 0){var E=T4(v);return se(se(se({},E),{},{updateId:0},m(se(se({props:v},E),{},{updateId:0}),b)),{},{prevDataKey:y,prevData:w,prevWidth:j,prevHeight:N,prevLayout:S,prevStackOffset:k,prevMargin:C,prevChildren:_})}if(y!==b.prevDataKey||w!==b.prevData||j!==b.prevWidth||N!==b.prevHeight||S!==b.prevLayout||k!==b.prevStackOffset||!Xd(C,b.prevMargin)){var R=T4(v),$={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},B=se(se({},O4(b,w,S)),{},{updateId:b.updateId+1}),F=se(se(se({},R),$),B);return se(se(se({},F),m(se({props:v},F),b)),{},{prevDataKey:y,prevData:w,prevWidth:j,prevHeight:N,prevLayout:S,prevStackOffset:k,prevMargin:C,prevChildren:_})}if(!$1(_,b.prevChildren)){var L,D,T,U,X=Fs(_,Yf),H=X&&(L=(D=X.props)===null||D===void 0?void 0:D.startIndex)!==null&&L!==void 0?L:P,ae=X&&(T=(U=X.props)===null||U===void 0?void 0:U.endIndex)!==null&&T!==void 0?T:A,he=H!==P||ae!==A,Pe=!it(w),Ae=Pe&&!he?b.updateId:b.updateId+1;return se(se({updateId:Ae},m(se(se({props:v},b),{},{updateId:Ae,dataStartIndex:H,dataEndIndex:ae}),b)),{},{prevChildren:_,dataStartIndex:H,dataEndIndex:ae})}return null}),Xe(g,"renderActiveDot",function(v,b,y){var w;return x.isValidElement(v)?w=x.cloneElement(v,b):Ye(v)?w=v(b):w=O.createElement(hv,b),O.createElement(At,{className:"recharts-active-dot",key:y},w)});var p=x.forwardRef(function(b,y){return O.createElement(g,Md({},b,{ref:y}))});return p.displayName=g.displayName,p},lLe=Yw({chartName:"LineChart",GraphicalChild:tu,axisComponents:[{axisType:"xAxis",AxisComp:ru},{axisType:"yAxis",AxisComp:nu}],formatAxisMap:mW}),R4=Yw({chartName:"BarChart",GraphicalChild:Ul,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ru},{axisType:"yAxis",AxisComp:nu}],formatAxisMap:mW}),cLe=Yw({chartName:"PieChart",GraphicalChild:Io,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Uh},{axisType:"radiusAxis",AxisComp:Fh}],formatAxisMap:Oq,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),uLe=Yw({chartName:"RadarChart",GraphicalChild:mv,axisComponents:[{axisType:"angleAxis",AxisComp:Uh},{axisType:"radiusAxis",AxisComp:Fh}],formatAxisMap:Oq,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const dLe={draft:"hsl(var(--muted-foreground))",in_progress:"hsl(var(--info))",pending_approval:"hsl(var(--warning))",completed:"hsl(var(--success))"},M4=["hsl(var(--primary))","hsl(var(--info))","hsl(var(--success))","hsl(var(--warning))"],fLe={draft:"Draft",in_progress:"In Progress",pending_approval:"Pending Approval",completed:"Completed"},hLe={performance:"Performance",annual:"Annual",probation:"Probation"};function mLe(){var g;const{competencyScores:e,reviewStatusCounts:t,reviewTypeCounts:r,monthlyTrends:n,departmentPerformance:a,loading:i}=ohe();if(i)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(p=>s.jsx(Ot,{className:"h-28"},p))}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map(p=>s.jsx(Ot,{className:"h-80"},p))})]});const o=t.reduce((p,v)=>p+v.count,0),l=((g=t.find(p=>p.status==="completed"))==null?void 0:g.count)||0,c=o>0?Math.round(l/o*100):0,u=e.length>0?(e.reduce((p,v)=>p+v.average_rating,0)/e.filter(p=>p.average_rating>0).length||0).toFixed(1):"0",d=e.reduce((p,v)=>p+v.total_ratings,0),f=e.filter(p=>p.average_rating>0).map(p=>({competency:p.competency_name.length>15?p.competency_name.substring(0,15)+"...":p.competency_name,fullName:p.competency_name,score:p.average_rating,fullMark:5})),h=t.map(p=>({name:fLe[p.status]||p.status,value:p.count,status:p.status})),m=r.map(p=>({name:hLe[p.review_type]||p.review_type,count:p.count}));return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Lt,{title:"Total Reviews",value:o,description:"All time reviews",icon:Qs,variant:"default"}),s.jsx(Lt,{title:"Completion Rate",value:`${c}%`,description:`${l} of ${o} completed`,icon:yt,variant:"success"}),s.jsx(Lt,{title:"Avg Competency Score",value:u,description:"Out of 5.0",icon:Zs,variant:"info"}),s.jsx(Lt,{title:"Total Ratings",value:d,description:"Competency assessments",icon:Er,variant:"default"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-lg",children:"Review Status Distribution"}),s.jsx(Be,{children:"Current status of all performance reviews"})]}),s.jsx(Y,{children:h.length>0?s.jsx("div",{className:"h-64",children:s.jsx(hm,{width:"100%",height:"100%",children:s.jsxs(cLe,{children:[s.jsx(Io,{data:h,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:p,percent:v})=>`${p} (${(v*100).toFixed(0)}%)`,children:h.map((p,v)=>s.jsx(kw,{fill:dLe[p.status]||M4[v%M4.length]},`cell-${v}`))}),s.jsx(vs,{})]})})}):s.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No review data available"})})]}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-lg",children:"Monthly Review Trends"}),s.jsx(Be,{children:"Review activity over the last 6 months"})]}),s.jsx(Y,{children:s.jsx("div",{className:"h-64",children:s.jsx(hm,{width:"100%",height:"100%",children:s.jsxs(lLe,{data:n,children:[s.jsx(Ly,{strokeDasharray:"3 3",className:"stroke-border"}),s.jsx(ru,{dataKey:"month",className:"text-xs fill-muted-foreground",tick:{fontSize:12}}),s.jsx(nu,{className:"text-xs fill-muted-foreground",tick:{fontSize:12},allowDecimals:!1}),s.jsx(vs,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),s.jsx(Zc,{}),s.jsx(tu,{type:"monotone",dataKey:"completed",stroke:"hsl(var(--success))",name:"Completed",strokeWidth:2,dot:{r:4}}),s.jsx(tu,{type:"monotone",dataKey:"in_progress",stroke:"hsl(var(--info))",name:"In Progress",strokeWidth:2,dot:{r:4}}),s.jsx(tu,{type:"monotone",dataKey:"pending",stroke:"hsl(var(--warning))",name:"Pending/Draft",strokeWidth:2,dot:{r:4}})]})})})})]}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-lg",children:"Team Competency Scores"}),s.jsx(Be,{children:"Average ratings across all competencies"})]}),s.jsx(Y,{children:f.length>0?s.jsx("div",{className:"h-72",children:s.jsx(hm,{width:"100%",height:"100%",children:s.jsxs(uLe,{cx:"50%",cy:"50%",outerRadius:"70%",data:f,children:[s.jsx(Gq,{className:"stroke-border"}),s.jsx(Uh,{dataKey:"competency",className:"text-xs fill-muted-foreground",tick:{fontSize:10}}),s.jsx(Fh,{angle:30,domain:[0,5],className:"text-xs fill-muted-foreground",tick:{fontSize:10}}),s.jsx(mv,{name:"Score",dataKey:"score",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.3,strokeWidth:2}),s.jsx(vs,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:(p,v,b)=>[`${p.toFixed(2)} / 5.0`,b.payload.fullName]})]})})}):s.jsx("div",{className:"h-72 flex items-center justify-center text-muted-foreground",children:"No competency ratings available yet"})})]}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-lg",children:"Reviews by Type"}),s.jsx(Be,{children:"Distribution of review types"})]}),s.jsx(Y,{children:m.length>0?s.jsx("div",{className:"h-72",children:s.jsx(hm,{width:"100%",height:"100%",children:s.jsxs(R4,{data:m,layout:"vertical",children:[s.jsx(Ly,{strokeDasharray:"3 3",className:"stroke-border"}),s.jsx(ru,{type:"number",className:"text-xs fill-muted-foreground",allowDecimals:!1}),s.jsx(nu,{type:"category",dataKey:"name",className:"text-xs fill-muted-foreground",width:100}),s.jsx(vs,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),s.jsx(Ul,{dataKey:"count",fill:"hsl(var(--primary))",radius:[0,4,4,0],name:"Reviews"})]})})}):s.jsx("div",{className:"h-72 flex items-center justify-center text-muted-foreground",children:"No review data available"})})]})]}),a.length>0&&s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-lg",children:"Department Performance"}),s.jsx(Be,{children:"Average ratings by department"})]}),s.jsx(Y,{children:s.jsx("div",{className:"h-64",children:s.jsx(hm,{width:"100%",height:"100%",children:s.jsxs(R4,{data:a,children:[s.jsx(Ly,{strokeDasharray:"3 3",className:"stroke-border"}),s.jsx(ru,{dataKey:"department",className:"text-xs fill-muted-foreground",tick:{fontSize:11}}),s.jsx(nu,{domain:[0,5],className:"text-xs fill-muted-foreground"}),s.jsx(vs,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},formatter:p=>[`${p.toFixed(2)} / 5.0`,"Avg Rating"]}),s.jsx(Ul,{dataKey:"average_rating",fill:"hsl(var(--info))",radius:[4,4,0,0],name:"Average Rating"})]})})})})]}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-lg",children:"Competency Breakdown"}),s.jsx(Be,{children:"Detailed scores for each competency"})]}),s.jsx(Y,{children:e.length>0?s.jsx("div",{className:"space-y-3",children:e.map(p=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm truncate",children:p.competency_name}),p.category&&s.jsx("p",{className:"text-xs text-muted-foreground",children:p.category})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-32 bg-muted rounded-full h-2",children:s.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${p.average_rating/5*100}%`}})}),s.jsx("span",{className:"text-sm font-medium w-12 text-right",children:p.average_rating>0?p.average_rating.toFixed(1):""}),s.jsxs("span",{className:"text-xs text-muted-foreground w-16",children:["(",p.total_ratings," ratings)"]})]})]},p.competency_id))}):s.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"No competency data available yet. Start creating performance reviews with competency ratings."})})]})]})}function pLe(){const[e,t]=x.useState("analytics"),[r,n]=x.useState(""),{supervisions:a,loading:i}=RE(),{reviews:o,loading:l}=nw();ME();const c=a.filter(h=>h.is_active).length,u=o.filter(h=>h.status==="in_progress"||h.status==="pending_approval").length,d=o.filter(h=>h.status==="completed").length,f=o.filter(h=>h.overall_rating).length>0?(o.filter(h=>h.overall_rating).reduce((h,m)=>h+(m.overall_rating||0),0)/o.filter(h=>h.overall_rating).length).toFixed(1):"N/A";return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Performance Management"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage supervisions, performance reviews, and competency assessments"})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Lt,{title:"Active Supervisions",value:c,description:"Current assignments",icon:Er,variant:"default"}),s.jsx(Lt,{title:"Pending Reviews",value:u,description:"Awaiting completion",icon:uu,variant:"info"}),s.jsx(Lt,{title:"Completed Reviews",value:d,description:"This year",icon:Qs,variant:"success"}),s.jsx(Lt,{title:"Average Rating",value:f,description:"Out of 5.0",icon:Ws,variant:"default"})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{placeholder:"Search supervisions, reviews, or competencies...",value:r,onChange:h=>n(h.target.value),className:"pl-10"})]})}),s.jsxs(_n,{value:e,onValueChange:t,className:"space-y-4",children:[s.jsxs(mn,{className:"grid w-full grid-cols-4 lg:w-auto lg:inline-grid",children:[s.jsxs(Ue,{value:"analytics",className:"flex items-center gap-2",children:[s.jsx(fk,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]}),s.jsxs(Ue,{value:"supervisions",className:"flex items-center gap-2",children:[s.jsx(Er,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Supervisions"})]}),s.jsxs(Ue,{value:"reviews",className:"flex items-center gap-2",children:[s.jsx(uu,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Reviews"})]}),s.jsxs(Ue,{value:"competencies",className:"flex items-center gap-2",children:[s.jsx(Qs,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Competencies"})]})]}),s.jsx(tt,{value:"analytics",children:s.jsx(mLe,{})}),s.jsx(tt,{value:"supervisions",children:s.jsx(Hfe,{searchQuery:r})}),s.jsx(tt,{value:"reviews",children:s.jsx(nhe,{searchQuery:r})}),s.jsx(tt,{value:"competencies",children:s.jsx(ihe,{searchQuery:r})})]})]})}function gLe(){const[e,t]=x.useState([]),[r,n]=x.useState([]),[a,i]=x.useState([]),[o,l]=x.useState(!0),c=async()=>{const{data:_,error:j}=await M.from("departments").select("*").order("name");if(j){oe({title:"Error",description:"Failed to load departments",variant:"destructive"});return}t(_||[])},u=async()=>{const{data:_,error:j}=await M.from("positions").select("*").order("name");if(j){oe({title:"Error",description:"Failed to load positions",variant:"destructive"});return}n(_||[])},d=async()=>{const{data:_,error:j}=await M.from("award_classifications").select("*").order("name");if(j){oe({title:"Error",description:"Failed to load award classifications",variant:"destructive"});return}i(_||[])};return x.useEffect(()=>{(async()=>{l(!0),await Promise.all([c(),u(),d()]),l(!1)})()},[]),{departments:e,positions:r,awardClassifications:a,loading:o,addDepartment:async(_,j)=>{const{data:N,error:S}=await M.from("departments").insert({name:_,description:j||null}).select().single();return S?(S.code==="23505"?oe({title:"Error",description:"A department with this name already exists",variant:"destructive"}):oe({title:"Error",description:"Failed to add department",variant:"destructive"}),null):(t(k=>[...k,N].sort((C,P)=>C.name.localeCompare(P.name))),oe({title:"Success",description:"Department added successfully"}),N)},updateDepartment:async(_,j,N)=>{const{data:S,error:k}=await M.from("departments").update({name:j,description:N||null}).eq("id",_).select().single();return k?(oe({title:"Error",description:"Failed to update department",variant:"destructive"}),null):(t(C=>C.map(P=>P.id===_?S:P).sort((P,A)=>P.name.localeCompare(A.name))),oe({title:"Success",description:"Department updated successfully"}),S)},deleteDepartment:async _=>{const{error:j}=await M.from("departments").delete().eq("id",_);return j?(oe({title:"Error",description:"Failed to delete department",variant:"destructive"}),!1):(t(N=>N.filter(S=>S.id!==_)),oe({title:"Success",description:"Department deleted successfully"}),!0)},addPosition:async(_,j,N)=>{const{data:S,error:k}=await M.from("positions").insert({name:_,department_id:j||null,description:N||null}).select().single();return k?(k.code==="23505"?oe({title:"Error",description:"A position with this name already exists",variant:"destructive"}):oe({title:"Error",description:"Failed to add position",variant:"destructive"}),null):(n(C=>[...C,S].sort((P,A)=>P.name.localeCompare(A.name))),oe({title:"Success",description:"Position added successfully"}),S)},updatePosition:async(_,j,N,S)=>{const{data:k,error:C}=await M.from("positions").update({name:j,department_id:N||null,description:S||null}).eq("id",_).select().single();return C?(oe({title:"Error",description:"Failed to update position",variant:"destructive"}),null):(n(P=>P.map(A=>A.id===_?k:A).sort((A,E)=>A.name.localeCompare(E.name))),oe({title:"Success",description:"Position updated successfully"}),k)},deletePosition:async _=>{const{error:j}=await M.from("positions").delete().eq("id",_);return j?(oe({title:"Error",description:"Failed to delete position",variant:"destructive"}),!1):(n(N=>N.filter(S=>S.id!==_)),oe({title:"Success",description:"Position deleted successfully"}),!0)},addAwardClassification:async _=>{const{data:j,error:N}=await M.from("award_classifications").insert({name:_.name,description:_.description||null,base_hourly_rate:_.base_hourly_rate,saturday_multiplier:_.saturday_multiplier??1.5,sunday_multiplier:_.sunday_multiplier??2,public_holiday_multiplier:_.public_holiday_multiplier??2.5,evening_multiplier:_.evening_multiplier??1.15,night_multiplier:_.night_multiplier??1.25,overtime_multiplier:_.overtime_multiplier??1.5}).select().single();return N?(N.code==="23505"?oe({title:"Error",description:"An award classification with this name already exists",variant:"destructive"}):oe({title:"Error",description:"Failed to add award classification",variant:"destructive"}),null):(i(S=>[...S,j].sort((k,C)=>k.name.localeCompare(C.name))),oe({title:"Success",description:"Award classification added successfully"}),j)},updateAwardClassification:async(_,j)=>{const{data:N,error:S}=await M.from("award_classifications").update({name:j.name,description:j.description||null,base_hourly_rate:j.base_hourly_rate,saturday_multiplier:j.saturday_multiplier,sunday_multiplier:j.sunday_multiplier,public_holiday_multiplier:j.public_holiday_multiplier,evening_multiplier:j.evening_multiplier,night_multiplier:j.night_multiplier,overtime_multiplier:j.overtime_multiplier}).eq("id",_).select().single();return S?(oe({title:"Error",description:"Failed to update award classification",variant:"destructive"}),null):(i(k=>k.map(C=>C.id===_?N:C).sort((C,P)=>C.name.localeCompare(P.name))),oe({title:"Success",description:"Award classification updated successfully"}),N)},deleteAwardClassification:async _=>{const{error:j}=await M.from("award_classifications").delete().eq("id",_);return j?(oe({title:"Error",description:"Failed to delete award classification",variant:"destructive"}),!1):(i(N=>N.filter(S=>S.id!==_)),oe({title:"Success",description:"Award classification deleted successfully"}),!0)},refetch:async()=>{await Promise.all([c(),u(),d()])}}}function vLe(){const{settings:e,loading:t,updateVisibility:r}=F3(),n=async a=>{await r(a.module_key,!a.is_visible)};return t?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-lg",children:"Navigation Visibility"}),s.jsx(Be,{children:"Control which modules appear in the sidebar navigation. Hidden modules are still accessible via direct URL."})]}),s.jsx(Y,{children:e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(rF,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No sidebar settings configured"})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Module"}),s.jsx(re,{children:"Order"}),s.jsx(re,{className:"text-right",children:"Visible"})]})}),s.jsx(jr,{children:e.map(a=>s.jsxs(qe,{children:[s.jsx(Z,{className:"font-medium",children:a.module_label}),s.jsx(Z,{className:"text-muted-foreground",children:a.display_order}),s.jsx(Z,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsxs(q,{htmlFor:`toggle-${a.module_key}`,className:"sr-only",children:["Toggle ",a.module_label," visibility"]}),s.jsx(An,{id:`toggle-${a.module_key}`,checked:a.is_visible,onCheckedChange:()=>n(a)})]})})]},a.id))})]})})]})}const yLe=Os({email:Ze().min(1,"Email is required").email("Please enter a valid email address").max(255,"Email must be less than 255 characters").trim(),password:Ze().min(6,"Password must be at least 6 characters").max(72,"Password must be less than 72 characters"),display_name:Ze().min(2,"Display name must be at least 2 characters").max(50,"Display name must be less than 50 characters").trim(),role:Bu(["admin","manager","employee"],{errorMap:()=>({message:"Please select a valid role"})})}),$4={email:"",password:"",display_name:"",role:"employee"};function xLe({open:e,onOpenChange:t,onUserCreated:r}){const[n,a]=x.useState($4),[i,o]=x.useState({}),[l,c]=x.useState(!1),[u,d]=x.useState(!1),f=()=>{const p=yLe.safeParse(n);if(!p.success){const v={};return p.error.errors.forEach(b=>{const y=b.path[0];v[y]||(v[y]=b.message)}),o(v),!1}return o({}),!0},h=async()=>{if(!f()){oe({title:"Validation Error",description:"Please fix the errors in the form",variant:"destructive"});return}c(!0);try{const{data:p,error:v}=await M.functions.invoke("create-user",{body:{email:n.email.trim(),password:n.password,display_name:n.display_name.trim(),role:n.role}});if(v)throw new Error(v.message||"Failed to create user");if(p!=null&&p.error)throw new Error(p.error);oe({title:"User Created",description:`${n.display_name} has been added with ${n.role} role.`}),a($4),o({}),t(!1),r==null||r()}catch(p){console.error("Failed to create user:",p),oe({title:"Error",description:p instanceof Error?p.message:"Failed to create user",variant:"destructive"})}finally{c(!1)}},m=(p,v)=>{a({...n,[p]:v}),i[p]&&o({...i,[p]:void 0})},g=()=>{const p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let v="";for(let b=0;b<16;b++)v+=p.charAt(Math.floor(Math.random()*p.length));m("password",v),d(!0)};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-md",children:[s.jsxs(Dt,{children:[s.jsxs(Rt,{className:"flex items-center gap-2",children:[s.jsx(mu,{className:"h-5 w-5 text-primary"}),"Create User Account"]}),s.jsx(Mt,{children:"Create a new user account with specific role permissions"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"display_name",children:"Display Name *"}),s.jsx(J,{id:"display_name",value:n.display_name,onChange:p=>m("display_name",p.target.value),placeholder:"John Smith",className:i.display_name?"border-destructive":"",maxLength:50,disabled:l}),i.display_name&&s.jsx("p",{className:"text-xs text-destructive",children:i.display_name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"email",children:"Email Address *"}),s.jsx(J,{id:"email",type:"email",value:n.email,onChange:p=>m("email",p.target.value),placeholder:"john@company.com",className:i.email?"border-destructive":"",maxLength:255,disabled:l}),i.email&&s.jsx("p",{className:"text-xs text-destructive",children:i.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(q,{htmlFor:"password",children:"Password *"}),s.jsx(I,{type:"button",variant:"ghost",size:"sm",className:"h-auto p-0 text-xs text-primary hover:text-primary/80",onClick:g,disabled:l,children:"Generate Strong Password"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(J,{id:"password",type:u?"text":"password",value:n.password,onChange:p=>m("password",p.target.value),placeholder:"Minimum 6 characters",className:`pr-10 ${i.password?"border-destructive":""}`,maxLength:72,disabled:l}),s.jsx(I,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>d(!u),disabled:l,children:u?s.jsx(iG,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(Li,{className:"h-4 w-4 text-muted-foreground"})})]}),i.password&&s.jsx("p",{className:"text-xs text-destructive",children:i.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"role",children:"Role *"}),s.jsxs(Me,{value:n.role,onValueChange:p=>m("role",p),disabled:l,children:[s.jsx(Te,{className:i.role?"border-destructive":"",children:s.jsx($e,{placeholder:"Select a role"})}),s.jsxs(De,{className:"bg-popover",children:[s.jsx(W,{value:"employee",children:"Employee"}),s.jsx(W,{value:"manager",children:"Manager"}),s.jsx(W,{value:"admin",children:"Administrator"})]})]}),i.role&&s.jsx("p",{className:"text-xs text-destructive",children:i.role}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.role==="admin"&&"Full access to all features and user management",n.role==="manager"&&"Can manage employees, contracts, and view reports",n.role==="employee"&&"Can view own contracts and profile information"]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(I,{variant:"outline",onClick:()=>t(!1),className:"flex-1",disabled:l,children:"Cancel"}),s.jsx(I,{className:"flex-1 gradient-primary",onClick:h,disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(mu,{className:"h-4 w-4 mr-2"}),"Create User"]})})]})]})]})})}const I4={admin:{label:"Admin",icon:hu,variant:"default"},manager:{label:"Manager",icon:dn,variant:"secondary"},employee:{label:"Employee",icon:ns,variant:"outline"}};function bLe(){const{departments:e,positions:t,awardClassifications:r,loading:n,addDepartment:a,updateDepartment:i,deleteDepartment:o,addPosition:l,updatePosition:c,deletePosition:u,addAwardClassification:d,updateAwardClassification:f,deleteAwardClassification:h}=gLe(),{isAdmin:m,loading:g}=G0(),{users:p,loading:v,updateUserRole:b,deleteUserRole:y,fetchUsersWithRoles:w}=bue(),[_,j]=x.useState(!1),[N,S]=x.useState(!1),[k,C]=x.useState(null),[P,A]=x.useState(null),[E,R]=x.useState(""),[$,B]=x.useState(""),[F,L]=x.useState(!1),[D,T]=x.useState(!1),[U,X]=x.useState(!1),[H,ae]=x.useState(null),[he,Pe]=x.useState(null),[Ae,ue]=x.useState(""),[ze,ie]=x.useState(""),[be,_e]=x.useState(""),[ee,ot]=x.useState(!1),[Ge,Et]=x.useState(!1),[Ut,tr]=x.useState(!1),[_r,gn]=x.useState(null),[z,G]=x.useState(null),[te,we]=x.useState("employee"),[je,ve]=x.useState(!1),[Ce,gt]=x.useState(!1),[Gt,tn]=x.useState(!1),[Ca,cs]=x.useState(!1),[di,fi]=x.useState(null),[Rn,rc]=x.useState(null),[us,nc]=x.useState(""),[sc,Ku]=x.useState(""),[ac,qh]=x.useState(""),[Gu,ra]=x.useState("1.5"),[pv,nt]=x.useState("2.0"),[qt,rr]=x.useState("2.5"),[ds,Wn]=x.useState("1.15"),[ka,Ea]=x.useState("1.25"),[fs,na]=x.useState("1.5"),[qP,WP]=x.useState(!1),[yH,HP]=x.useState(!1),[Wh,KP]=x.useState(""),[Qw,xH]=x.useState("all"),Yu=p.filter(le=>{var ic;const Ds=Wh===""||((ic=le.display_name)==null?void 0:ic.toLowerCase().includes(Wh.toLowerCase()))||le.email.toLowerCase().includes(Wh.toLowerCase()),sa=Qw==="all"||le.role===Qw;return Ds&&sa}),GP=le=>{le?(C(le),R(le.name),B(le.description||"")):(C(null),R(""),B("")),j(!0)},bH=async()=>{E.trim()&&(L(!0),k?await i(k.id,E.trim(),$.trim()):await a(E.trim(),$.trim()),L(!1),j(!1))},wH=async()=>{P&&(await o(P.id),S(!1),A(null))},YP=le=>{le?(ae(le),ue(le.name),ie(le.department_id||""),_e(le.description||"")):(ae(null),ue(""),ie(""),_e("")),T(!0)},jH=async()=>{Ae.trim()&&(ot(!0),H?await c(H.id,Ae.trim(),ze||void 0,be.trim()):await l(Ae.trim(),ze||void 0,be.trim()),ot(!1),T(!1))},_H=async()=>{he&&(await u(he.id),X(!1),Pe(null))},NH=le=>{gn(le),we(le.role),Et(!0)},SH=async()=>{if(!_r)return;ve(!0),(await b(_r.user_id,te)).success?oe({title:"Role Updated",description:`Successfully updated role to ${I4[te].label}`}):oe({title:"Error",description:"Failed to update user role. You may not have admin permissions.",variant:"destructive"}),ve(!1),Et(!1)},CH=async()=>{if(!z)return;gt(!0),(await y(z.user_id)).success?oe({title:"User Deleted",description:`Successfully removed ${z.display_name||"user"} from the system`}):oe({title:"Error",description:"Failed to delete user. You may not have admin permissions.",variant:"destructive"}),gt(!1),tr(!1),G(null)},XP=le=>{le?(fi(le),nc(le.name),Ku(le.description||""),qh(le.base_hourly_rate.toString()),ra(le.saturday_multiplier.toString()),nt(le.sunday_multiplier.toString()),rr(le.public_holiday_multiplier.toString()),Wn(le.evening_multiplier.toString()),Ea(le.night_multiplier.toString()),na(le.overtime_multiplier.toString())):(fi(null),nc(""),Ku(""),qh(""),ra("1.5"),nt("2.0"),rr("2.5"),Wn("1.15"),Ea("1.25"),na("1.5")),tn(!0)},kH=async()=>{if(!us.trim()||!ac)return;const le={name:us.trim(),description:sc.trim(),base_hourly_rate:parseFloat(ac),saturday_multiplier:parseFloat(Gu),sunday_multiplier:parseFloat(pv),public_holiday_multiplier:parseFloat(qt),evening_multiplier:parseFloat(ds),night_multiplier:parseFloat(ka),overtime_multiplier:parseFloat(fs)};WP(!0),di?await f(di.id,le):await d(le),WP(!1),tn(!1)},EH=async()=>{Rn&&(await h(Rn.id),cs(!1),rc(null))},QP=le=>{if(!le)return null;const Ds=e.find(sa=>sa.id===le);return(Ds==null?void 0:Ds.name)||null},PH=le=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(le);return n||g?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your organization's departments, positions, award classifications, and user roles"})]}),s.jsxs(_n,{defaultValue:"departments",className:"space-y-4",children:[s.jsxs(mn,{className:"flex-wrap",children:[s.jsxs(Ue,{value:"departments",className:"flex items-center gap-2",children:[s.jsx(ux,{className:"h-4 w-4"}),"Departments"]}),s.jsxs(Ue,{value:"positions",className:"flex items-center gap-2",children:[s.jsx(Rl,{className:"h-4 w-4"}),"Positions"]}),s.jsxs(Ue,{value:"awards",className:"flex items-center gap-2",children:[s.jsx(zd,{className:"h-4 w-4"}),"Award Classifications"]}),m&&s.jsxs(Ue,{value:"roles",className:"flex items-center gap-2",children:[s.jsx(Er,{className:"h-4 w-4"}),"User Roles"]}),m&&s.jsxs(Ue,{value:"navigation",className:"flex items-center gap-2",children:[s.jsx(rF,{className:"h-4 w-4"}),"Navigation"]})]}),s.jsx(tt,{value:"departments",children:s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg",children:"Departments"}),s.jsx(Be,{children:"Manage the departments in your organization"})]}),s.jsxs(I,{onClick:()=>GP(),size:"sm",children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Add Department"]})]}),s.jsx(Y,{children:e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(ux,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No departments yet"}),s.jsx("p",{className:"text-sm",children:"Add your first department to get started"})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Name"}),s.jsx(re,{children:"Description"}),s.jsx(re,{children:"Positions"}),s.jsx(re,{className:"w-[100px]",children:"Actions"})]})}),s.jsx(jr,{children:e.map(le=>{const Ds=t.filter(sa=>sa.department_id===le.id).length;return s.jsxs(qe,{children:[s.jsx(Z,{className:"font-medium",children:le.name}),s.jsx(Z,{className:"text-muted-foreground",children:le.description||""}),s.jsx(Z,{children:s.jsxs(ce,{variant:"secondary",children:[Ds," positions"]})}),s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>GP(le),children:s.jsx(Sc,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{A(le),S(!0)},children:s.jsx(bs,{className:"h-4 w-4 text-destructive"})})]})})]},le.id)})})]})})]})}),s.jsx(tt,{value:"positions",children:s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg",children:"Positions"}),s.jsx(Be,{children:"Manage the job positions in your organization"})]}),s.jsxs(I,{onClick:()=>YP(),size:"sm",children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Add Position"]})]}),s.jsx(Y,{children:t.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Rl,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No positions yet"}),s.jsx("p",{className:"text-sm",children:"Add your first position to get started"})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Name"}),s.jsx(re,{children:"Department"}),s.jsx(re,{children:"Description"}),s.jsx(re,{className:"w-[100px]",children:"Actions"})]})}),s.jsx(jr,{children:t.map(le=>s.jsxs(qe,{children:[s.jsx(Z,{className:"font-medium",children:le.name}),s.jsx(Z,{children:QP(le.department_id)?s.jsx(ce,{variant:"outline",children:QP(le.department_id)}):s.jsx("span",{className:"text-muted-foreground",children:""})}),s.jsx(Z,{className:"text-muted-foreground",children:le.description||""}),s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>YP(le),children:s.jsx(Sc,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{Pe(le),X(!0)},children:s.jsx(bs,{className:"h-4 w-4 text-destructive"})})]})})]},le.id))})]})})]})}),s.jsx(tt,{value:"awards",children:s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsxs(me,{className:"text-lg flex items-center gap-2",children:[s.jsx(zd,{className:"h-5 w-5"}),"Award Classifications"]}),s.jsx(Be,{children:"Configure pay rates and penalty multipliers for different award levels"})]}),s.jsxs(I,{onClick:()=>XP(),size:"sm",children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Add Classification"]})]}),s.jsx(Y,{children:r.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(zd,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No award classifications yet"}),s.jsx("p",{className:"text-sm",children:"Add your first award classification to configure pay rates"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Name"}),s.jsx(re,{children:"Base Rate"}),s.jsx(re,{children:"Sat"}),s.jsx(re,{children:"Sun"}),s.jsx(re,{children:"PH"}),s.jsx(re,{children:"Eve"}),s.jsx(re,{children:"Night"}),s.jsx(re,{children:"OT"}),s.jsx(re,{className:"w-[100px]",children:"Actions"})]})}),s.jsx(jr,{children:r.map(le=>s.jsxs(qe,{children:[s.jsx(Z,{className:"font-medium",children:s.jsxs("div",{children:[le.name,le.description&&s.jsx("p",{className:"text-xs text-muted-foreground",children:le.description})]})}),s.jsxs(Z,{className:"font-mono",children:[PH(le.base_hourly_rate),"/hr"]}),s.jsxs(Z,{className:"font-mono text-muted-foreground",children:["",le.saturday_multiplier]}),s.jsxs(Z,{className:"font-mono text-muted-foreground",children:["",le.sunday_multiplier]}),s.jsxs(Z,{className:"font-mono text-muted-foreground",children:["",le.public_holiday_multiplier]}),s.jsxs(Z,{className:"font-mono text-muted-foreground",children:["",le.evening_multiplier]}),s.jsxs(Z,{className:"font-mono text-muted-foreground",children:["",le.night_multiplier]}),s.jsxs(Z,{className:"font-mono text-muted-foreground",children:["",le.overtime_multiplier]}),s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>XP(le),children:s.jsx(Sc,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{rc(le),cs(!0)},children:s.jsx(bs,{className:"h-4 w-4 text-destructive"})})]})})]},le.id))})]})})})]})}),m&&s.jsx(tt,{value:"roles",children:s.jsxs(K,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[s.jsxs("div",{children:[s.jsxs(me,{className:"text-lg flex items-center gap-2",children:[s.jsx(hu,{className:"h-5 w-5"}),"User Management"]}),s.jsx(Be,{children:"Create user accounts and manage roles. Open signup is disabled for security."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{const le=[["Name","Email","Role","Joined Date"].join(","),...Yu.map(ic=>[`"${(ic.display_name||"").replace(/"/g,'""')}"`,`"${ic.email.replace(/"/g,'""')}"`,ic.role,new Date(ic.created_at).toLocaleDateString()].join(","))].join(`
`),Ds=new Blob([le],{type:"text/csv;charset=utf-8;"}),sa=document.createElement("a");sa.href=URL.createObjectURL(Ds),sa.download=`users_export_${new Date().toISOString().split("T")[0]}.csv`,sa.click(),URL.revokeObjectURL(sa.href),oe({title:"Export Complete",description:`Exported ${Yu.length} users to CSV`})},disabled:Yu.length===0,children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),s.jsxs(I,{onClick:()=>HP(!0),size:"sm",children:[s.jsx(mu,{className:"h-4 w-4 mr-2"}),"Create User"]})]})]}),s.jsx(Y,{children:v?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(et,{className:"h-6 w-6 animate-spin text-primary"})}):p.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Er,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No users found"}),s.jsx("p",{className:"text-sm",children:"Users will appear here after they sign up"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{placeholder:"Search by name or email...",value:Wh,onChange:le=>KP(le.target.value),className:"pl-9 pr-9"}),Wh&&s.jsx(I,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>KP(""),children:s.jsx(Bn,{className:"h-4 w-4"})})]}),s.jsxs(Me,{value:Qw,onValueChange:le=>xH(le),children:[s.jsx(Te,{className:"w-full sm:w-[180px]",children:s.jsx($e,{placeholder:"Filter by role"})}),s.jsxs(De,{children:[s.jsx(W,{value:"all",children:"All Roles"}),s.jsx(W,{value:"admin",children:"Admin"}),s.jsx(W,{value:"manager",children:"Manager"}),s.jsx(W,{value:"employee",children:"Employee"})]})]})]}),Yu.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(hn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No users match your search"}),s.jsx("p",{className:"text-sm",children:"Try adjusting your search or filter criteria"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["Showing ",Yu.length," of ",p.length," users"]}),s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"User"}),s.jsx(re,{children:"Role"}),s.jsx(re,{children:"Joined"}),s.jsx(re,{className:"w-[100px]",children:"Actions"})]})}),s.jsx(jr,{children:Yu.map(le=>{const Ds=I4[le.role],sa=Ds.icon;return s.jsxs(qe,{children:[s.jsx(Z,{className:"font-medium",children:le.display_name||le.email}),s.jsx(Z,{children:s.jsxs(ce,{variant:Ds.variant,className:"flex items-center gap-1 w-fit",children:[s.jsx(sa,{className:"h-3 w-3"}),Ds.label]})}),s.jsx(Z,{className:"text-muted-foreground",children:new Date(le.created_at).toLocaleDateString()}),s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>NH(le),children:s.jsx(Sc,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{G(le),tr(!0)},children:s.jsx(bs,{className:"h-4 w-4 text-destructive"})})]})})]},le.id)})})]})]})]})})]})}),m&&s.jsx(tt,{value:"navigation",children:s.jsx(vLe,{})})]}),s.jsx($t,{open:_,onOpenChange:j,children:s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:k?"Edit Department":"Add Department"}),s.jsx(Mt,{children:k?"Update the department details below":"Enter the details for the new department"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"dept-name",children:"Name *"}),s.jsx(J,{id:"dept-name",value:E,onChange:le=>R(le.target.value),placeholder:"e.g., Human Resources"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"dept-description",children:"Description"}),s.jsx(wt,{id:"dept-description",value:$,onChange:le=>B(le.target.value),placeholder:"Brief description of the department...",rows:3})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),s.jsx(I,{onClick:bH,disabled:!E.trim()||F,children:F?s.jsxs(s.Fragment,{children:[s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):k?"Update":"Add"})]})]})}),s.jsx(Ad,{open:N,onOpenChange:S,children:s.jsxs(Pc,{children:[s.jsxs(Ac,{children:[s.jsx(Tc,{children:"Delete Department"}),s.jsxs(Dc,{children:['Are you sure you want to delete "',P==null?void 0:P.name,'"? This action cannot be undone. Positions linked to this department will have their department unset.']})]}),s.jsxs(Oc,{children:[s.jsx(Mc,{children:"Cancel"}),s.jsx(Rc,{onClick:wH,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),s.jsx($t,{open:D,onOpenChange:T,children:s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:H?"Edit Position":"Add Position"}),s.jsx(Mt,{children:H?"Update the position details below":"Enter the details for the new position"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"pos-name",children:"Name *"}),s.jsx(J,{id:"pos-name",value:Ae,onChange:le=>ue(le.target.value),placeholder:"e.g., Support Worker"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"pos-department",children:"Department"}),s.jsxs(Me,{value:ze||"none",onValueChange:le=>ie(le==="none"?"":le),children:[s.jsx(Te,{children:s.jsx($e,{placeholder:"Select a department (optional)"})}),s.jsxs(De,{children:[s.jsx(W,{value:"none",children:"No department"}),e.map(le=>s.jsx(W,{value:le.id,children:le.name},le.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"pos-description",children:"Description"}),s.jsx(wt,{id:"pos-description",value:be,onChange:le=>_e(le.target.value),placeholder:"Brief description of the position...",rows:3})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),s.jsx(I,{onClick:jH,disabled:!Ae.trim()||ee,children:ee?s.jsxs(s.Fragment,{children:[s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):H?"Update":"Add"})]})]})}),s.jsx(Ad,{open:U,onOpenChange:X,children:s.jsxs(Pc,{children:[s.jsxs(Ac,{children:[s.jsx(Tc,{children:"Delete Position"}),s.jsxs(Dc,{children:['Are you sure you want to delete "',he==null?void 0:he.name,'"? This action cannot be undone.']})]}),s.jsxs(Oc,{children:[s.jsx(Mc,{children:"Cancel"}),s.jsx(Rc,{onClick:_H,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),s.jsx($t,{open:Ge,onOpenChange:Et,children:s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Edit User Role"}),s.jsxs(Mt,{children:["Change the role for ",(_r==null?void 0:_r.display_name)||(_r==null?void 0:_r.email)]})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Role"}),s.jsxs(Me,{value:te,onValueChange:le=>we(le),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"admin",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hu,{className:"h-4 w-4"}),"Admin - Full access to all features"]})}),s.jsx(W,{value:"manager",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dn,{className:"h-4 w-4"}),"Manager - Manage employees and operations"]})}),s.jsx(W,{value:"employee",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-4 w-4"}),"Employee - Basic access"]})})]})]})]})}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>Et(!1),children:"Cancel"}),s.jsx(I,{onClick:SH,disabled:je,children:je?s.jsxs(s.Fragment,{children:[s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Update Role"})]})]})}),s.jsx($t,{open:Gt,onOpenChange:tn,children:s.jsxs(Tt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:di?"Edit Award Classification":"Add Award Classification"}),s.jsx(Mt,{children:di?"Update the award classification details and pay rates":"Enter the details for the new award classification"})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"award-name",children:"Name *"}),s.jsx(J,{id:"award-name",value:us,onChange:le=>nc(le.target.value),placeholder:"e.g., Level 1 Support Worker"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"award-base-rate",children:"Base Hourly Rate (AUD) *"}),s.jsx(J,{id:"award-base-rate",type:"number",step:"0.01",min:"0",value:ac,onChange:le=>qh(le.target.value),placeholder:"e.g., 28.50"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"award-description",children:"Description"}),s.jsx(wt,{id:"award-description",value:sc,onChange:le=>Ku(le.target.value),placeholder:"Brief description of this award level...",rows:2})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(q,{className:"text-base font-semibold",children:"Penalty Rate Multipliers"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"These multipliers are applied to the base hourly rate for different work conditions"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"award-sat",children:"Saturday"}),s.jsx(J,{id:"award-sat",type:"number",step:"0.01",min:"1",value:Gu,onChange:le=>ra(le.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"award-sun",children:"Sunday"}),s.jsx(J,{id:"award-sun",type:"number",step:"0.01",min:"1",value:pv,onChange:le=>nt(le.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"award-ph",children:"Public Holiday"}),s.jsx(J,{id:"award-ph",type:"number",step:"0.01",min:"1",value:qt,onChange:le=>rr(le.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"award-eve",children:"Evening"}),s.jsx(J,{id:"award-eve",type:"number",step:"0.01",min:"1",value:ds,onChange:le=>Wn(le.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"award-night",children:"Night"}),s.jsx(J,{id:"award-night",type:"number",step:"0.01",min:"1",value:ka,onChange:le=>Ea(le.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"award-ot",children:"Overtime"}),s.jsx(J,{id:"award-ot",type:"number",step:"0.01",min:"1",value:fs,onChange:le=>na(le.target.value)})]})]})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>tn(!1),children:"Cancel"}),s.jsx(I,{onClick:kH,disabled:!us.trim()||!ac||qP,children:qP?s.jsxs(s.Fragment,{children:[s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):di?"Update":"Add"})]})]})}),s.jsx(Ad,{open:Ca,onOpenChange:cs,children:s.jsxs(Pc,{children:[s.jsxs(Ac,{children:[s.jsx(Tc,{children:"Delete Award Classification"}),s.jsxs(Dc,{children:['Are you sure you want to delete "',Rn==null?void 0:Rn.name,'"? This action cannot be undone.']})]}),s.jsxs(Oc,{children:[s.jsx(Mc,{children:"Cancel"}),s.jsx(Rc,{onClick:EH,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),s.jsx(Ad,{open:Ut,onOpenChange:tr,children:s.jsxs(Pc,{children:[s.jsxs(Ac,{children:[s.jsx(Tc,{children:"Delete User"}),s.jsxs(Dc,{children:['Are you sure you want to delete "',(z==null?void 0:z.display_name)||(z==null?void 0:z.email),'"? This will remove their role and access to the system. This action cannot be undone.']})]}),s.jsxs(Oc,{children:[s.jsx(Mc,{disabled:Ce,children:"Cancel"}),s.jsx(Rc,{onClick:CH,disabled:Ce,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:Ce?s.jsxs(s.Fragment,{children:[s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),s.jsx(xLe,{open:yH,onOpenChange:HP,onUserCreated:w})]})}const wLe=()=>{const e=Iu();return x.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),s.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})};class jLe{async getCurrentUser(){const{data:{user:t}}=await M.auth.getUser();if(!t)return null;const{data:r}=await M.from("profiles").select("display_name").eq("user_id",t.id).maybeSingle();return{id:t.id,email:t.email,name:(r==null?void 0:r.display_name)||t.email}}async getCases(t){let r=M.from("hr_cases").select(`
        *,
        employee:employees(id, first_name, last_name, email, position, department)
      `).order("created_at",{ascending:!1});t!=null&&t.status&&(r=r.eq("status",t.status)),t!=null&&t.case_type&&(r=r.eq("case_type",t.case_type)),t!=null&&t.severity&&(r=r.eq("severity",t.severity)),t!=null&&t.assigned_investigator_user_id&&(r=r.eq("assigned_investigator_user_id",t.assigned_investigator_user_id)),t!=null&&t.safeguarding_only&&(r=r.eq("safeguarding_flag",!0));const{data:n,error:a}=await r;if(a)throw console.error("[HRCasesService] Error fetching cases:",a),a;return n||[]}async getCaseById(t){const{data:r,error:n}=await M.from("hr_cases").select(`
        *,
        employee:employees(id, first_name, last_name, email, position, department)
      `).eq("id",t).maybeSingle();if(n)throw console.error("[HRCasesService] Error fetching case:",n),n;return r&&await Nr.log({action:"document.upload",entityType:"setting",entityId:t,afterState:{action:"case_accessed"}}),r}async createCase(t){const r=await this.getCurrentUser(),n={organisation_id:t.organisation_id,employee_id:t.employee_id||null,case_number:"TEMP",case_type:t.case_type,reported_by:t.reported_by,reporter_name:t.reporter_name||null,reporter_contact:t.reporter_contact||null,date_reported:t.date_reported||new Date().toISOString().split("T")[0],summary:t.summary,detailed_description:t.detailed_description||null,severity:t.severity||"medium",safeguarding_flag:t.safeguarding_flag||!1,confidentiality_level:t.confidentiality_level||"standard",assigned_investigator_user_id:t.assigned_investigator_user_id||null,created_by_user_id:(r==null?void 0:r.id)||null},{data:a,error:i}=await M.from("hr_cases").insert(n).select(`
        *,
        employee:employees(id, first_name, last_name, email, position, department)
      `).single();if(i)throw console.error("[HRCasesService] Error creating case:",i),i;return await Nr.log({action:"document.upload",entityType:"setting",entityId:a.id,organisationId:t.organisation_id,afterState:{action:"hr_case_created",case_number:a.case_number,case_type:t.case_type,severity:t.severity||"medium"}}),a}async updateCase(t,r){const{data:n}=await M.from("hr_cases").select("*").eq("id",t).single(),a={...r};r.status==="closed"&&(n==null?void 0:n.status)!=="closed"&&(a.closed_at=new Date().toISOString());const{data:i,error:o}=await M.from("hr_cases").update(a).eq("id",t).select(`
        *,
        employee:employees(id, first_name, last_name, email, position, department)
      `).single();if(o)throw console.error("[HRCasesService] Error updating case:",o),o;return await Nr.log({action:"document.upload",entityType:"setting",entityId:t,beforeState:n?{...n,action:"hr_case_updated"}:void 0,afterState:{...i,action:"hr_case_updated"}}),i}async closeCase(t,r){const{data:n}=await M.from("hr_case_findings").select("id").eq("hr_case_id",t).limit(1);if(!n||n.length===0)throw new Error("Cannot close case without findings. Please record findings first.");return this.updateCase(t,{status:"closed",closure_notes:r})}async getTriage(t){const{data:r,error:n}=await M.from("hr_case_triage").select("*").eq("hr_case_id",t).maybeSingle();if(n)throw console.error("[HRCasesService] Error fetching triage:",n),n;return r}async createTriage(t){const r=await this.getCurrentUser(),{data:n,error:a}=await M.from("hr_case_triage").insert({...t,triaged_by_user_id:(r==null?void 0:r.id)||""}).select().single();if(a)throw console.error("[HRCasesService] Error creating triage:",a),a;return await M.from("hr_cases").update({status:"triaged"}).eq("id",t.hr_case_id),await Nr.log({action:"document.upload",entityType:"setting",entityId:n.id,afterState:{action:"hr_case_triaged",hr_case_id:t.hr_case_id,escalation_required:t.escalation_required}}),n}async getNotes(t){const{data:r,error:n}=await M.from("hr_case_notes").select("*").eq("hr_case_id",t).order("created_at",{ascending:!1});if(n)throw console.error("[HRCasesService] Error fetching notes:",n),n;return r||[]}async createNote(t){const r=await this.getCurrentUser(),{data:n,error:a}=await M.from("hr_case_notes").insert({...t,created_by_user_id:(r==null?void 0:r.id)||"",created_by_name:r==null?void 0:r.name}).select().single();if(a)throw console.error("[HRCasesService] Error creating note:",a),a;return await Nr.log({action:"document.upload",entityType:"setting",entityId:n.id,afterState:{action:"hr_case_note_added",hr_case_id:t.hr_case_id,visibility:t.visibility||"standard"}}),n}async getEvidence(t){const{data:r,error:n}=await M.from("hr_case_evidence").select("*").eq("hr_case_id",t).order("uploaded_at",{ascending:!1});if(n)throw console.error("[HRCasesService] Error fetching evidence:",n),n;return r||[]}async uploadEvidence(t,r,n,a="normal"){const i=await this.getCurrentUser(),o=`${t}/${Date.now()}_${r.name}`,{error:l}=await M.storage.from("hr-case-evidence").upload(o,r);if(l)throw console.error("[HRCasesService] Error uploading file:",l),l;const{data:c}=M.storage.from("hr-case-evidence").getPublicUrl(o),{data:u,error:d}=await M.from("hr_case_evidence").insert({hr_case_id:t,file_url:c.publicUrl,file_name:r.name,description:n,uploaded_by_user_id:(i==null?void 0:i.id)||"",uploaded_by_name:i==null?void 0:i.name,access_level:a}).select().single();if(d)throw console.error("[HRCasesService] Error creating evidence record:",d),d;return await Nr.log({action:"document.upload",entityType:"document",entityId:u.id,afterState:{action:"hr_case_evidence_uploaded",hr_case_id:t,file_name:r.name,access_level:a}}),u}async getFindings(t){const{data:r,error:n}=await M.from("hr_case_findings").select("*").eq("hr_case_id",t).maybeSingle();if(n)throw console.error("[HRCasesService] Error fetching findings:",n),n;return r}async createFindings(t){const r=await this.getCurrentUser(),{data:n,error:a}=await M.from("hr_case_findings").insert({...t,decision_maker_user_id:(r==null?void 0:r.id)||"",decision_maker_name:r==null?void 0:r.name}).select().single();if(a)throw console.error("[HRCasesService] Error creating findings:",a),a;return await M.from("hr_cases").update({status:"decision_made"}).eq("id",t.hr_case_id),await Nr.log({action:"document.upload",entityType:"setting",entityId:n.id,afterState:{action:"hr_case_findings_recorded",hr_case_id:t.hr_case_id,substantiated:t.substantiated}}),n}async getActions(t){const{data:r,error:n}=await M.from("hr_case_actions").select("*").eq("hr_case_id",t).order("created_at",{ascending:!1});if(n)throw console.error("[HRCasesService] Error fetching actions:",n),n;return r||[]}async createAction(t){const r=await this.getCurrentUser(),{data:n,error:a}=await M.from("hr_case_actions").insert({...t,created_by_user_id:(r==null?void 0:r.id)||"",created_by_name:r==null?void 0:r.name}).select().single();if(a)throw console.error("[HRCasesService] Error creating action:",a),a;return await Nr.log({action:"document.upload",entityType:"setting",entityId:n.id,afterState:{action:"hr_case_action_created",hr_case_id:t.hr_case_id,action_type:t.action_type,effective_date:t.effective_date,expiry_date:t.expiry_date}}),n}async updateAction(t,r){const{data:n}=await M.from("hr_case_actions").select("*").eq("id",t).single(),{data:a,error:i}=await M.from("hr_case_actions").update(r).eq("id",t).select().single();if(i)throw console.error("[HRCasesService] Error updating action:",i),i;return await Nr.log({action:"document.upload",entityType:"setting",entityId:t,beforeState:n?{...n,action:"hr_case_action_updated"}:void 0,afterState:{...a,action:"hr_case_action_updated"}}),a}async getStats(){const{data:t,error:r}=await M.from("hr_cases").select("status, case_type, severity, safeguarding_flag");if(r)throw console.error("[HRCasesService] Error fetching stats:",r),r;const{data:n}=await M.from("hr_case_actions").select("id").in("action_type",["verbal_warning","written_warning","final_warning"]).eq("status","active").gte("expiry_date",new Date().toISOString().split("T")[0]),a={total:(t==null?void 0:t.length)||0,byStatus:{new:0,triaged:0,investigating:0,awaiting_response:0,decision_made:0,closed:0},byType:{incident:0,misconduct:0,grievance:0,performance:0,complaint:0},bySeverity:{low:0,medium:0,high:0,critical:0},openCases:0,closedCases:0,safeguardingCases:0,activeWarnings:(n==null?void 0:n.length)||0};return t==null||t.forEach(i=>{a.byStatus[i.status]++,a.byType[i.case_type]++,a.bySeverity[i.severity]++,i.status==="closed"?a.closedCases++:a.openCases++,i.safeguarding_flag&&a.safeguardingCases++}),a}async getCaseAuditLog(t){const{data:r,error:n}=await M.from("audit_logs").select("*").eq("entity_id",t).order("created_at",{ascending:!1});if(n)throw console.error("[HRCasesService] Error fetching audit log:",n),n;return r||[]}}const vn=new jLe;function _Le(e){const[t,r]=x.useState([]),[n,a]=x.useState(null),[i,o]=x.useState(!0),{toast:l}=or(),c=x.useCallback(async()=>{o(!0);try{const[h,m]=await Promise.all([vn.getCases(e),vn.getStats()]);r(h),a(m)}catch(h){console.error("Error fetching HR cases:",h),l({title:"Error",description:"Failed to load HR cases",variant:"destructive"})}finally{o(!1)}},[e,l]);return x.useEffect(()=>{c()},[c]),{cases:t,stats:n,loading:i,refetch:c,createCase:async h=>{try{const m=await vn.createCase(h);return l({title:"Case Created",description:`Case ${m.case_number} has been created`}),await c(),m}catch(m){return console.error("Error creating case:",m),l({title:"Error",description:"Failed to create case",variant:"destructive"}),null}},updateCase:async(h,m)=>{try{return await vn.updateCase(h,m),l({title:"Case Updated",description:"Case has been updated successfully"}),await c(),!0}catch(g){return console.error("Error updating case:",g),l({title:"Error",description:"Failed to update case",variant:"destructive"}),!1}},closeCase:async(h,m)=>{try{return await vn.closeCase(h,m),l({title:"Case Closed",description:"Case has been closed successfully"}),await c(),!0}catch(g){console.error("Error closing case:",g);const p=g instanceof Error?g.message:"Failed to close case";return l({title:"Error",description:p,variant:"destructive"}),!1}}}}function NLe(e){const[t,r]=x.useState(null),[n,a]=x.useState(null),[i,o]=x.useState([]),[l,c]=x.useState([]),[u,d]=x.useState(null),[f,h]=x.useState([]),[m,g]=x.useState([]),[p,v]=x.useState(!1),{toast:b}=or(),y=x.useCallback(async()=>{if(e){v(!0);try{const[C,P,A,E,R,$,B]=await Promise.all([vn.getCaseById(e),vn.getTriage(e),vn.getNotes(e),vn.getEvidence(e),vn.getFindings(e),vn.getActions(e),vn.getCaseAuditLog(e)]);r(C),a(P),o(A),c(E),d(R),h($),g(B)}catch(C){console.error("Error fetching case detail:",C),b({title:"Error",description:"Failed to load case details",variant:"destructive"})}finally{v(!1)}}},[e,b]);return x.useEffect(()=>{y()},[y]),{hrCase:t,triage:n,notes:i,evidence:l,findings:u,actions:f,auditLog:m,loading:p,refetch:y,createTriage:async C=>{if(!e)return!1;try{return await vn.createTriage({...C,hr_case_id:e}),b({title:"Triage Complete",description:"Case has been triaged successfully"}),await y(),!0}catch(P){return console.error("Error creating triage:",P),b({title:"Error",description:"Failed to save triage",variant:"destructive"}),!1}},addNote:async C=>{if(!e)return!1;try{return await vn.createNote({...C,hr_case_id:e}),b({title:"Note Added",description:"Note has been added to the case"}),await y(),!0}catch(P){return console.error("Error adding note:",P),b({title:"Error",description:"Failed to add note",variant:"destructive"}),!1}},uploadEvidence:async(C,P,A)=>{if(!e)return!1;try{return await vn.uploadEvidence(e,C,P,A),b({title:"Evidence Uploaded",description:"Evidence has been uploaded successfully"}),await y(),!0}catch(E){return console.error("Error uploading evidence:",E),b({title:"Error",description:"Failed to upload evidence",variant:"destructive"}),!1}},recordFindings:async C=>{if(!e)return!1;try{return await vn.createFindings({...C,hr_case_id:e}),b({title:"Findings Recorded",description:"Case findings have been recorded"}),await y(),!0}catch(P){return console.error("Error recording findings:",P),b({title:"Error",description:"Failed to record findings",variant:"destructive"}),!1}},addAction:async C=>{if(!e)return!1;try{return await vn.createAction({...C,hr_case_id:e}),b({title:"Action Added",description:"Disciplinary action has been recorded"}),await y(),!0}catch(P){return console.error("Error adding action:",P),b({title:"Error",description:"Failed to add action",variant:"destructive"}),!1}},updateAction:async(C,P)=>{try{return await vn.updateAction(C,P),b({title:"Action Updated",description:"Action has been updated"}),await y(),!0}catch(A){return console.error("Error updating action:",A),b({title:"Error",description:"Failed to update action",variant:"destructive"}),!1}}}}const SLe=[{value:"incident",label:"Incident"},{value:"misconduct",label:"Misconduct"},{value:"grievance",label:"Grievance"},{value:"performance",label:"Performance"},{value:"complaint",label:"Complaint"}],CLe=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}],kLe=[{value:"manager",label:"Manager"},{value:"employee",label:"Employee"},{value:"external",label:"External"},{value:"anonymous",label:"Anonymous"}];function ELe({open:e,onOpenChange:t,onSubmit:r,organisationId:n}){const[a,i]=x.useState(!1),{employees:o}=$E(),{toast:l}=or(),{register:c,handleSubmit:u,watch:d,setValue:f,reset:h,formState:{errors:m}}=as({defaultValues:{organisation_id:n,case_type:"incident",reported_by:"manager",severity:"medium",safeguarding_flag:!1,confidentiality_level:"standard"}}),g=d("reported_by"),p=d("safeguarding_flag"),v=async b=>{i(!0);try{await r(b),h(),t(!1)}catch(y){console.error("Error creating case:",y),l({title:"Error",description:"Failed to create case",variant:"destructive"})}finally{i(!1)}};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Create HR Case"}),s.jsx(Mt,{children:"Record a new incident, misconduct, grievance, or disciplinary matter."})]}),s.jsxs("form",{onSubmit:u(v),className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"case_type",children:"Case Type *"}),s.jsxs(Me,{value:d("case_type"),onValueChange:b=>f("case_type",b),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsx(De,{children:SLe.map(b=>s.jsx(W,{value:b.value,children:b.label},b.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"severity",children:"Severity *"}),s.jsxs(Me,{value:d("severity"),onValueChange:b=>f("severity",b),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsx(De,{children:CLe.map(b=>s.jsx(W,{value:b.value,children:b.label},b.value))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"employee_id",children:"Employee Involved"}),s.jsxs(Me,{value:d("employee_id")||"__none__",onValueChange:b=>f("employee_id",b==="__none__"?void 0:b),children:[s.jsx(Te,{children:s.jsx($e,{placeholder:"Select employee (optional)"})}),s.jsxs(De,{children:[s.jsx(W,{value:"__none__",children:"No specific employee"}),o.filter(b=>b.id&&b.id.trim()!=="").map(b=>s.jsxs(W,{value:b.id,children:[b.firstName," ",b.lastName]},b.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"summary",children:"Summary *"}),s.jsx(J,{id:"summary",...c("summary",{required:"Summary is required"}),placeholder:"Brief description of the case"}),m.summary&&s.jsx("p",{className:"text-sm text-destructive",children:m.summary.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"detailed_description",children:"Detailed Description"}),s.jsx(wt,{id:"detailed_description",...c("detailed_description"),placeholder:"Provide full details of the incident or matter...",rows:4})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"reported_by",children:"Reported By *"}),s.jsxs(Me,{value:g,onValueChange:b=>f("reported_by",b),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsx(De,{children:kLe.map(b=>s.jsx(W,{value:b.value,children:b.label},b.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"date_reported",children:"Date Reported"}),s.jsx(J,{id:"date_reported",type:"date",...c("date_reported"),defaultValue:new Date().toISOString().split("T")[0]})]})]}),g!=="anonymous"&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"reporter_name",children:"Reporter Name"}),s.jsx(J,{id:"reporter_name",...c("reporter_name"),placeholder:"Name of reporter"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"reporter_contact",children:"Reporter Contact"}),s.jsx(J,{id:"reporter_contact",...c("reporter_contact"),placeholder:"Phone or email"})]})]}),s.jsx("div",{className:"space-y-4 rounded-lg border border-destructive/20 bg-destructive/5 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(q,{htmlFor:"safeguarding_flag",className:"text-destructive font-medium",children:"Safeguarding Concern"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Flag if this case involves child safety or vulnerable persons"})]}),s.jsx(An,{id:"safeguarding_flag",checked:p,onCheckedChange:b=>f("safeguarding_flag",b)})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"confidentiality_level",children:"Confidentiality Level"}),s.jsxs(Me,{value:d("confidentiality_level"),onValueChange:b=>f("confidentiality_level",b),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"standard",children:"Standard"}),s.jsx(W,{value:"restricted",children:"Restricted (Admin Only)"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:a,children:a?"Creating...":"Create Case"})]})]})]})})}const PLe={incident:"Incident",misconduct:"Misconduct",grievance:"Grievance",performance:"Performance",complaint:"Complaint"},ALe={low:"Low",medium:"Medium",high:"High",critical:"Critical"},OLe={new:"New",triaged:"Triaged",investigating:"Investigating",awaiting_response:"Awaiting Response",decision_made:"Decision Made",closed:"Closed"},TLe={manager:"Manager",employee:"Employee",external:"External",anonymous:"Anonymous"};function DLe({hrCase:e}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(K,{children:[s.jsx(de,{children:s.jsxs(me,{className:"text-base flex items-center gap-2",children:[s.jsx(ut,{className:"h-4 w-4"}),"Case Details"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Case Type"}),s.jsx("p",{className:"font-medium",children:PLe[e.case_type]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Date Reported"}),s.jsxs("p",{className:"font-medium flex items-center gap-1",children:[s.jsx(zt,{className:"h-4 w-4"}),ne(new Date(e.date_reported),"dd MMM yyyy")]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Reported By"}),s.jsx("p",{className:"font-medium",children:TLe[e.reported_by]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Created"}),s.jsxs("p",{className:"font-medium flex items-center gap-1",children:[s.jsx(xt,{className:"h-4 w-4"}),ne(new Date(e.created_at),"dd MMM yyyy HH:mm")]})]})]}),(e.reporter_name||e.reporter_contact)&&s.jsxs(s.Fragment,{children:[s.jsx(Nt,{}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.reporter_name&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Reporter Name"}),s.jsx("p",{className:"font-medium",children:e.reporter_name})]}),e.reporter_contact&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Reporter Contact"}),s.jsx("p",{className:"font-medium",children:e.reporter_contact})]})]})]})]})]}),e.employee&&s.jsxs(K,{children:[s.jsx(de,{children:s.jsxs(me,{className:"text-base flex items-center gap-2",children:[s.jsx(ns,{className:"h-4 w-4"}),"Employee Involved"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),s.jsxs("p",{className:"font-medium",children:[e.employee.first_name," ",e.employee.last_name]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),s.jsx("p",{className:"font-medium",children:e.employee.email})]}),e.employee.position&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Position"}),s.jsx("p",{className:"font-medium",children:e.employee.position})]}),e.employee.department&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Department"}),s.jsx("p",{className:"font-medium",children:e.employee.department})]})]})})]}),s.jsxs(K,{children:[s.jsx(de,{children:s.jsx(me,{className:"text-base",children:"Summary"})}),s.jsx(Y,{children:s.jsx("p",{className:"text-sm",children:e.summary})})]}),e.detailed_description&&s.jsxs(K,{children:[s.jsx(de,{children:s.jsx(me,{className:"text-base",children:"Detailed Description"})}),s.jsx(Y,{children:s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.detailed_description})})]}),e.status==="closed"&&s.jsxs(K,{className:"border-green-200 bg-green-50",children:[s.jsx(de,{children:s.jsx(me,{className:"text-base text-green-800",children:"Case Closed"})}),s.jsxs(Y,{className:"space-y-2",children:[e.closed_at&&s.jsxs("p",{className:"text-sm text-green-700",children:["Closed on ",ne(new Date(e.closed_at),"dd MMM yyyy HH:mm")]}),e.closure_notes&&s.jsx("p",{className:"text-sm text-green-800",children:e.closure_notes})]})]})]})}function RLe({hrCase:e,triage:t,onCreateTriage:r}){const[n,a]=x.useState(!1),[i,o]=x.useState(!1),{register:l,handleSubmit:c,watch:u,setValue:d,reset:f}=as({defaultValues:{initial_risk_assessment:"",immediate_actions_taken:"",escalation_required:!1,escalated_to:""}}),h=u("escalation_required"),m=e.case_type==="misconduct"||e.severity==="high"||e.severity==="critical",g=async p=>{o(!0);try{await r(p)&&(a(!1),f())}finally{o(!1)}};return t?s.jsx("div",{className:"space-y-4",children:s.jsxs(K,{className:"border-green-200 bg-green-50",children:[s.jsx(de,{children:s.jsxs(me,{className:"text-base flex items-center gap-2 text-green-800",children:[s.jsx(yt,{className:"h-4 w-4"}),"Triage Complete"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Triaged At"}),s.jsx("p",{className:"text-sm font-medium",children:ne(new Date(t.triaged_at),"dd MMM yyyy HH:mm")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Risk Assessment"}),s.jsx("p",{className:"text-sm",children:t.initial_risk_assessment})]}),t.immediate_actions_taken&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Immediate Actions Taken"}),s.jsx("p",{className:"text-sm",children:t.immediate_actions_taken})]}),t.escalation_required&&s.jsxs("div",{className:"rounded-lg border border-orange-200 bg-orange-50 p-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ir,{className:"h-4 w-4 text-orange-600"}),s.jsx("span",{className:"font-medium text-orange-800",children:"Escalation Required"})]}),t.escalated_to&&s.jsxs("p",{className:"text-sm text-orange-700 mt-1",children:["Escalated to: ",t.escalated_to]})]})]})]})}):n?s.jsxs(K,{children:[s.jsx(de,{children:s.jsx(me,{className:"text-base",children:"Complete Triage"})}),s.jsx(Y,{children:s.jsxs("form",{onSubmit:c(g),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"initial_risk_assessment",children:"Initial Risk Assessment *"}),s.jsx(wt,{id:"initial_risk_assessment",...l("initial_risk_assessment",{required:!0}),placeholder:"Assess the immediate risks and potential impacts...",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"immediate_actions_taken",children:"Immediate Actions Taken"}),s.jsx(wt,{id:"immediate_actions_taken",...l("immediate_actions_taken"),placeholder:"Document any immediate actions taken to address the situation...",rows:3})]}),s.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(q,{htmlFor:"escalation_required",children:"Escalation Required"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Does this case need to be escalated to external bodies or senior leadership?"})]}),s.jsx(An,{id:"escalation_required",checked:h,onCheckedChange:p=>d("escalation_required",p)})]}),h&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"escalated_to",children:"Escalated To"}),s.jsx(J,{id:"escalated_to",...l("escalated_to"),placeholder:"e.g., NDIS Quality & Safeguards Commission, Police, etc."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:i,children:i?"Saving...":"Complete Triage"})]})]})})]}):s.jsxs("div",{className:"space-y-4",children:[m&&s.jsx(K,{className:"border-amber-200 bg-amber-50",children:s.jsxs(Y,{className:"flex items-center gap-3 py-4",children:[s.jsx(ir,{className:"h-5 w-5 text-amber-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-amber-800",children:"Triage Required"}),s.jsx("p",{className:"text-sm text-amber-700",children:"This case requires triage due to its type or severity."})]}),s.jsx(I,{onClick:()=>a(!0),children:"Begin Triage"})]})}),!m&&s.jsx(K,{children:s.jsxs(Y,{className:"flex items-center gap-3 py-4",children:[s.jsx(xt,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"No Triage Required"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This case does not require mandatory triage, but you can still complete one if needed."})]}),s.jsx(I,{variant:"outline",onClick:()=>a(!0),children:"Add Triage"})]})})]})}function MLe({notes:e,onAddNote:t}){const[r,n]=x.useState(!1),[a,i]=x.useState(!1),{register:o,handleSubmit:l,watch:c,setValue:u,reset:d}=as({defaultValues:{note_text:"",visibility:"standard"}}),f=async h=>{i(!0);try{await t(h)&&(n(!1),d())}finally{i(!1)}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium",children:"Case Notes"}),!r&&s.jsxs(I,{size:"sm",onClick:()=>n(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-1"}),"Add Note"]})]}),r&&s.jsxs(K,{children:[s.jsx(de,{children:s.jsx(me,{className:"text-base",children:"Add Note"})}),s.jsx(Y,{children:s.jsxs("form",{onSubmit:l(f),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"note_text",children:"Note *"}),s.jsx(wt,{id:"note_text",...o("note_text",{required:!0}),placeholder:"Enter your note...",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"visibility",children:"Visibility"}),s.jsxs(Me,{value:c("visibility"),onValueChange:h=>u("visibility",h),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"standard",children:"Standard (All Case Viewers)"}),s.jsx(W,{value:"restricted",children:"Restricted (Admin Only)"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:a,children:a?"Adding...":"Add Note"})]})]})})]}),e.length===0&&!r&&s.jsx(K,{children:s.jsxs(Y,{className:"py-8 text-center text-muted-foreground",children:[s.jsx(Mg,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No notes added yet"})]})}),e.map(h=>s.jsx(K,{className:h.visibility==="restricted"?"border-red-200":"",children:s.jsx(Y,{className:"py-4",children:s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ns,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium",children:h.created_by_name||"Unknown User"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:ne(new Date(h.created_at),"dd MMM yyyy HH:mm")}),h.visibility==="restricted"&&s.jsxs(ce,{variant:"outline",className:"border-red-500 text-red-500",children:[s.jsx(du,{className:"h-3 w-3 mr-1"}),"Restricted"]})]}),s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:h.note_text})]})})})},h.id))]})}function $Le({evidence:e,onUploadEvidence:t}){const[r,n]=x.useState(!1),[a,i]=x.useState(!1),[o,l]=x.useState(""),[c,u]=x.useState("normal"),[d,f]=x.useState(null),h=x.useRef(null),m=p=>{var b;const v=(b=p.target.files)==null?void 0:b[0];v&&f(v)},g=async()=>{if(d){i(!0);try{await t(d,o,c)&&(n(!1),f(null),l(""),u("normal"),h.current&&(h.current.value=""))}finally{i(!1)}}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium",children:"Evidence & Documents"}),!r&&s.jsxs(I,{size:"sm",onClick:()=>n(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-1"}),"Upload Evidence"]})]}),r&&s.jsxs(K,{children:[s.jsx(de,{children:s.jsx(me,{className:"text-base",children:"Upload Evidence"})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"file",children:"File *"}),s.jsx(J,{id:"file",type:"file",ref:h,onChange:m}),d&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",d.name," (",(d.size/1024).toFixed(1)," KB)"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"description",children:"Description"}),s.jsx(wt,{id:"description",value:o,onChange:p=>l(p.target.value),placeholder:"Describe this evidence...",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"access_level",children:"Access Level"}),s.jsxs(Me,{value:c,onValueChange:p=>u(p),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"normal",children:"Normal (All Case Viewers)"}),s.jsx(W,{value:"restricted",children:"Restricted (Admin Only)"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>{n(!1),f(null),l("")},children:"Cancel"}),s.jsx(I,{onClick:g,disabled:!d||a,children:a?"Uploading...":"Upload"})]})]})]}),e.length===0&&!r&&s.jsx(K,{children:s.jsxs(Y,{className:"py-8 text-center text-muted-foreground",children:[s.jsx(ut,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No evidence uploaded yet"})]})}),e.map(p=>s.jsx(K,{className:p.access_level==="restricted"?"border-red-200":"",children:s.jsx(Y,{className:"py-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(ut,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:p.file_name}),p.access_level==="restricted"&&s.jsxs(ce,{variant:"outline",className:"border-red-500 text-red-500",children:[s.jsx(du,{className:"h-3 w-3 mr-1"}),"Restricted"]})]}),p.description&&s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:p.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ns,{className:"h-3 w-3"}),p.uploaded_by_name||"Unknown"]}),s.jsx("span",{children:ne(new Date(p.uploaded_at),"dd MMM yyyy HH:mm")})]})]}),s.jsx(I,{variant:"outline",size:"sm",asChild:!0,children:s.jsxs("a",{href:p.file_url,target:"_blank",rel:"noopener noreferrer",children:[s.jsx(QL,{className:"h-4 w-4 mr-1"}),"View"]})})]})})},p.id))]})}const L4=[{value:"yes",label:"Substantiated",icon:yt},{value:"no",label:"Not Substantiated",icon:zn},{value:"partially",label:"Partially Substantiated",icon:ir}];function ILe({hrCase:e,findings:t,onRecordFindings:r}){var g;const[n,a]=x.useState(!1),[i,o]=x.useState(!1),{register:l,handleSubmit:c,watch:u,setValue:d,reset:f}=as({defaultValues:{findings_summary:"",substantiated:"no",contributing_factors:""}}),h=async p=>{o(!0);try{await r(p)&&(a(!1),f())}finally{o(!1)}},m=p=>{switch(p){case"yes":return"bg-red-500 text-white";case"no":return"bg-green-500 text-white";case"partially":return"bg-amber-500 text-black"}};return t?s.jsx("div",{className:"space-y-4",children:s.jsxs(K,{children:[s.jsx(de,{children:s.jsxs(me,{className:"text-base flex items-center gap-2",children:[s.jsx(fx,{className:"h-4 w-4"}),"Case Findings"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Outcome:"}),s.jsx(ce,{className:m(t.substantiated),children:(g=L4.find(p=>p.value===t.substantiated))==null?void 0:g.label})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Decision Date"}),s.jsx("p",{className:"text-sm font-medium",children:ne(new Date(t.decision_date),"dd MMM yyyy")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Decision Maker"}),s.jsx("p",{className:"text-sm font-medium",children:t.decision_maker_name||"Unknown"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Findings Summary"}),s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.findings_summary})]}),t.contributing_factors&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Contributing Factors"}),s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.contributing_factors})]})]})]})}):n?s.jsxs(K,{children:[s.jsx(de,{children:s.jsx(me,{className:"text-base",children:"Record Findings"})}),s.jsx(Y,{children:s.jsxs("form",{onSubmit:c(h),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"substantiated",children:"Outcome *"}),s.jsxs(Me,{value:u("substantiated"),onValueChange:p=>d("substantiated",p),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsx(De,{children:L4.map(p=>s.jsx(W,{value:p.value,children:p.label},p.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"findings_summary",children:"Findings Summary *"}),s.jsx(wt,{id:"findings_summary",...l("findings_summary",{required:!0}),placeholder:"Summarize the findings of the investigation...",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"contributing_factors",children:"Contributing Factors"}),s.jsx(wt,{id:"contributing_factors",...l("contributing_factors"),placeholder:"Identify any contributing factors or systemic issues...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:i,children:i?"Saving...":"Record Findings"})]})]})})]}):s.jsx("div",{className:"space-y-4",children:e.status==="closed"?s.jsx(K,{className:"border-amber-200 bg-amber-50",children:s.jsx(Y,{className:"py-4",children:s.jsx("p",{className:"text-amber-800",children:"Case was closed without findings recorded. This is unusual for a closed case."})})}):s.jsx(K,{children:s.jsxs(Y,{className:"flex items-center gap-3 py-6",children:[s.jsx(fx,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"No Findings Recorded"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Record findings once the investigation is complete."})]}),s.jsx(I,{onClick:()=>a(!0),children:"Record Findings"})]})})})}const F4=[{value:"verbal_warning",label:"Verbal Warning"},{value:"written_warning",label:"Written Warning"},{value:"final_warning",label:"Final Warning"},{value:"training",label:"Training Required"},{value:"supervision",label:"Increased Supervision"},{value:"termination",label:"Termination"},{value:"no_action",label:"No Action"},{value:"other",label:"Other"}],LLe=["verbal_warning","written_warning","final_warning"];function FLe({actions:e,onAddAction:t,onUpdateAction:r}){const[n,a]=x.useState(!1),[i,o]=x.useState(!1),{register:l,handleSubmit:c,watch:u,setValue:d,reset:f,formState:{errors:h}}=as({defaultValues:{action_type:"no_action",description:"",effective_date:new Date().toISOString().split("T")[0]}}),m=u("action_type"),g=LLe.includes(m),p=async w=>{o(!0);try{await t(w)&&(a(!1),f())}finally{o(!1)}},v=async(w,_)=>{await r(w,{status:_})},b=w=>{switch(w){case"termination":return"bg-red-500 text-white";case"final_warning":return"bg-orange-500 text-white";case"written_warning":return"bg-amber-500 text-black";case"verbal_warning":return"bg-yellow-400 text-black";case"training":return"bg-blue-500 text-white";case"supervision":return"bg-purple-500 text-white";case"no_action":return"bg-green-500 text-white";default:return"bg-muted"}},y=w=>{switch(w){case"planned":return s.jsx(xt,{className:"h-3 w-3"});case"active":return s.jsx(ir,{className:"h-3 w-3"});case"completed":return s.jsx(yt,{className:"h-3 w-3"});case"withdrawn":return s.jsx(zn,{className:"h-3 w-3"})}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium",children:"Disciplinary Actions"}),!n&&s.jsxs(I,{size:"sm",onClick:()=>a(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-1"}),"Add Action"]})]}),n&&s.jsxs(K,{children:[s.jsx(de,{children:s.jsx(me,{className:"text-base",children:"Add Disciplinary Action"})}),s.jsx(Y,{children:s.jsxs("form",{onSubmit:c(p),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"action_type",children:"Action Type *"}),s.jsxs(Me,{value:m,onValueChange:w=>d("action_type",w),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsx(De,{children:F4.map(w=>s.jsx(W,{value:w.value,children:w.label},w.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"description",children:"Description *"}),s.jsx(wt,{id:"description",...l("description",{required:"Description is required"}),placeholder:"Describe the action and expectations...",rows:3}),h.description&&s.jsx("p",{className:"text-sm text-destructive",children:h.description.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"effective_date",children:"Effective Date *"}),s.jsx(J,{id:"effective_date",type:"date",...l("effective_date",{required:!0})})]}),g&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"expiry_date",children:"Expiry Date *"}),s.jsx(J,{id:"expiry_date",type:"date",...l("expiry_date",{required:g?"Warnings must have an expiry date":!1})}),h.expiry_date&&s.jsx("p",{className:"text-sm text-destructive",children:h.expiry_date.message})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"assigned_to_name",children:"Assigned To"}),s.jsx(J,{id:"assigned_to_name",...l("assigned_to_name"),placeholder:"Name of person responsible for follow-up"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:i,children:i?"Adding...":"Add Action"})]})]})})]}),e.length===0&&!n&&s.jsx(K,{children:s.jsxs(Y,{className:"py-8 text-center text-muted-foreground",children:[s.jsx(eF,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No actions recorded yet"})]})}),e.map(w=>{var _;return s.jsx(K,{children:s.jsx(Y,{className:"py-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ce,{className:b(w.action_type),children:(_=F4.find(j=>j.value===w.action_type))==null?void 0:_.label}),s.jsxs(ce,{variant:"outline",className:"flex items-center gap-1",children:[y(w.status),w.status.charAt(0).toUpperCase()+w.status.slice(1)]})]}),s.jsx("p",{className:"text-sm mb-2",children:w.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Effective: ",ne(new Date(w.effective_date),"dd MMM yyyy")]}),w.expiry_date&&s.jsxs("span",{children:["Expires: ",ne(new Date(w.expiry_date),"dd MMM yyyy")]}),w.assigned_to_name&&s.jsxs("span",{children:["Assigned to: ",w.assigned_to_name]})]})]}),w.status!=="completed"&&w.status!=="withdrawn"&&s.jsxs(Me,{value:w.status,onValueChange:j=>v(w.id,j),children:[s.jsx(Te,{className:"w-32",children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"planned",children:"Planned"}),s.jsx(W,{value:"active",children:"Active"}),s.jsx(W,{value:"completed",children:"Completed"}),s.jsx(W,{value:"withdrawn",children:"Withdrawn"})]})]})]})})},w.id)})]})}function ULe({auditLog:e}){const t=e;if(t.length===0)return s.jsx(K,{children:s.jsxs(Y,{className:"py-8 text-center text-muted-foreground",children:[s.jsx(Xa,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No audit history available"})]})});const r=n=>{const a=n.split(".");return a.length===2?`${a[0].charAt(0).toUpperCase()+a[0].slice(1)} ${a[1].replace(/_/g," ")}`:n.replace(/_/g," ")};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(Xa,{className:"h-4 w-4"}),"Audit Trail"]}),s.jsx("div",{className:"space-y-2",children:t.map(n=>s.jsx(K,{children:s.jsx(Y,{className:"py-3",children:s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(ce,{variant:"outline",children:r(n.action)}),s.jsx("span",{className:"text-xs text-muted-foreground",children:ne(new Date(n.created_at),"dd MMM yyyy HH:mm:ss")})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(ns,{className:"h-3 w-3"}),s.jsx("span",{children:n.user_name||n.user_email||"System"})]}),n.new_values&&Object.keys(n.new_values).length>0&&s.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:s.jsxs("details",{children:[s.jsx("summary",{className:"cursor-pointer hover:text-foreground",children:"View details"}),s.jsx("pre",{className:"mt-1 p-2 bg-muted rounded text-xs overflow-x-auto",children:JSON.stringify(n.new_values,null,2)})]})})]})})})},n.id))})]})}function BLe({caseId:e,open:t,onOpenChange:r,onUpdate:n}){const[a,i]=x.useState("overview"),{hrCase:o,triage:l,notes:c,evidence:u,findings:d,actions:f,auditLog:h,loading:m,createTriage:g,addNote:p,uploadEvidence:v,recordFindings:b,addAction:y,updateAction:w}=NLe(t?e:null);if(!o)return null;const _=N=>{switch(N){case"critical":return"bg-red-500 text-white";case"high":return"bg-orange-500 text-white";case"medium":return"bg-yellow-500 text-black";case"low":return"bg-green-500 text-white";default:return"bg-muted"}},j=N=>{switch(N){case"new":return"bg-blue-500 text-white";case"triaged":return"bg-purple-500 text-white";case"investigating":return"bg-amber-500 text-black";case"awaiting_response":return"bg-cyan-500 text-white";case"decision_made":return"bg-indigo-500 text-white";case"closed":return"bg-gray-500 text-white";default:return"bg-muted"}};return s.jsx(Oo,{open:t,onOpenChange:r,children:s.jsxs(Ui,{className:"w-full sm:max-w-3xl p-0 flex flex-col h-full",children:[s.jsxs(Bi,{className:"px-6 py-4 border-b",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zi,{className:"text-lg font-semibold",children:o.case_number}),o.confidentiality_level==="restricted"&&s.jsxs(ce,{variant:"outline",className:"border-red-500 text-red-500",children:[s.jsx(du,{className:"h-3 w-3 mr-1"}),"Restricted"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:o.summary})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[o.safeguarding_flag&&s.jsxs(ce,{className:"bg-red-600 text-white",children:[s.jsx(dn,{className:"h-3 w-3 mr-1"}),"Safeguarding"]}),s.jsx(ce,{className:_(o.severity),children:ALe[o.severity]}),s.jsx(ce,{className:j(o.status),children:OLe[o.status]})]})]}),o.employee&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[s.jsx(ns,{className:"h-4 w-4"}),s.jsxs("span",{children:[o.employee.first_name," ",o.employee.last_name,o.employee.position&&`  ${o.employee.position}`]})]})]}),s.jsxs(_n,{value:a,onValueChange:i,className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxs(mn,{className:"px-6 py-2 justify-start border-b rounded-none bg-transparent h-auto",children:[s.jsxs(Ue,{value:"overview",className:"gap-1.5",children:[s.jsx(ut,{className:"h-4 w-4"}),"Overview"]}),s.jsxs(Ue,{value:"triage",className:"gap-1.5",children:[s.jsx(ir,{className:"h-4 w-4"}),"Triage"]}),s.jsxs(Ue,{value:"notes",className:"gap-1.5",children:[s.jsx(Mg,{className:"h-4 w-4"}),"Notes",c.length>0&&s.jsx(ce,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:c.length})]}),s.jsxs(Ue,{value:"evidence",className:"gap-1.5",children:[s.jsx(ut,{className:"h-4 w-4"}),"Evidence",u.length>0&&s.jsx(ce,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:u.length})]}),s.jsxs(Ue,{value:"findings",className:"gap-1.5",children:[s.jsx(fx,{className:"h-4 w-4"}),"Findings"]}),s.jsxs(Ue,{value:"actions",className:"gap-1.5",children:[s.jsx(eF,{className:"h-4 w-4"}),"Actions",f.length>0&&s.jsx(ce,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:f.length})]}),s.jsxs(Ue,{value:"audit",className:"gap-1.5",children:[s.jsx(Xa,{className:"h-4 w-4"}),"Audit"]})]}),s.jsx(zu,{className:"flex-1",children:s.jsxs("div",{className:"p-6",children:[s.jsx(tt,{value:"overview",className:"mt-0",children:s.jsx(DLe,{hrCase:o})}),s.jsx(tt,{value:"triage",className:"mt-0",children:s.jsx(RLe,{hrCase:o,triage:l,onCreateTriage:g})}),s.jsx(tt,{value:"notes",className:"mt-0",children:s.jsx(MLe,{notes:c,onAddNote:p})}),s.jsx(tt,{value:"evidence",className:"mt-0",children:s.jsx($Le,{evidence:u,onUploadEvidence:v})}),s.jsx(tt,{value:"findings",className:"mt-0",children:s.jsx(ILe,{hrCase:o,findings:d,onRecordFindings:b})}),s.jsx(tt,{value:"actions",className:"mt-0",children:s.jsx(FLe,{actions:f,onAddAction:y,onUpdateAction:w})}),s.jsx(tt,{value:"audit",className:"mt-0",children:s.jsx(ULe,{auditLog:h})})]})})]})]})})}const zLe="00000000-0000-0000-0000-000000000000";function VLe(){const{isAdmin:e,isManager:t,loading:r}=G0(),[n,a]=x.useState(""),[i,o]=x.useState("all"),[l,c]=x.useState("all"),[u,d]=x.useState("all"),[f,h]=x.useState(!1),[m,g]=x.useState(null),p={...i!=="all"&&{status:i},...l!=="all"&&{case_type:l},...u!=="all"&&{severity:u}},{cases:v,stats:b,loading:y,refetch:w,createCase:_}=_Le(Object.keys(p).length>0?p:void 0),j=v.filter(C=>{var A,E,R,$;if(!n)return!0;const P=n.toLowerCase();return C.case_number.toLowerCase().includes(P)||C.summary.toLowerCase().includes(P)||((E=(A=C.employee)==null?void 0:A.first_name)==null?void 0:E.toLowerCase().includes(P))||(($=(R=C.employee)==null?void 0:R.last_name)==null?void 0:$.toLowerCase().includes(P))});if(r)return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx("div",{className:"text-muted-foreground",children:"Loading..."})});if(!e&&!t)return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx(K,{className:"max-w-md",children:s.jsxs(Y,{className:"py-8 text-center",children:[s.jsx(du,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Access Restricted"}),s.jsx("p",{className:"text-muted-foreground",children:"This module is only accessible to administrators and managers."})]})})});const N=C=>{switch(C){case"critical":return"destructive";case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"default"}},S=C=>{switch(C){case"closed":return"outline";case"new":return"default";default:return"secondary"}},k=()=>{const C=["Case Number","Type","Status","Severity","Employee","Summary","Date Reported","Created At"],P=j.map(B=>[B.case_number,B.case_type,B.status,B.severity,B.employee?`${B.employee.first_name} ${B.employee.last_name}`:"",B.summary,B.date_reported,B.created_at]),A=[C,...P].map(B=>B.map(F=>`"${F}"`).join(",")).join(`
`),E=new Blob([A],{type:"text/csv"}),R=URL.createObjectURL(E),$=document.createElement("a");$.href=R,$.download=`hr-cases-${ne(new Date,"yyyy-MM-dd")}.csv`,$.click(),URL.revokeObjectURL(R)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"HR Cases"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage incidents, misconduct, grievances, and disciplinary matters"})]}),s.jsxs(I,{onClick:()=>h(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"New Case"]})]}),b&&s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[s.jsx(Lt,{title:"Total Cases",value:b.total,icon:ut}),s.jsx(Lt,{title:"Open Cases",value:b.openCases,icon:xt}),s.jsx(Lt,{title:"Closed Cases",value:b.closedCases,icon:yt}),s.jsx(Lt,{title:"Safeguarding",value:b.safeguardingCases,icon:dn,className:b.safeguardingCases>0?"border-destructive":""}),s.jsx(Lt,{title:"Active Warnings",value:b.activeWarnings,icon:ir})]}),s.jsxs(K,{children:[s.jsx(de,{children:s.jsxs(me,{className:"text-base flex items-center gap-2",children:[s.jsx(m0,{className:"h-4 w-4"}),"Filters"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsxs("div",{className:"relative",children:[s.jsx(hn,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(J,{placeholder:"Search cases...",value:n,onChange:C=>a(C.target.value),className:"pl-9"})]})}),s.jsxs(Me,{value:i,onValueChange:C=>o(C),children:[s.jsx(Te,{className:"w-[150px]",children:s.jsx($e,{placeholder:"Status"})}),s.jsxs(De,{children:[s.jsx(W,{value:"all",children:"All Statuses"}),s.jsx(W,{value:"new",children:"New"}),s.jsx(W,{value:"triaged",children:"Triaged"}),s.jsx(W,{value:"investigating",children:"Investigating"}),s.jsx(W,{value:"awaiting_response",children:"Awaiting Response"}),s.jsx(W,{value:"decision_made",children:"Decision Made"}),s.jsx(W,{value:"closed",children:"Closed"})]})]}),s.jsxs(Me,{value:l,onValueChange:C=>c(C),children:[s.jsx(Te,{className:"w-[150px]",children:s.jsx($e,{placeholder:"Type"})}),s.jsxs(De,{children:[s.jsx(W,{value:"all",children:"All Types"}),s.jsx(W,{value:"incident",children:"Incident"}),s.jsx(W,{value:"misconduct",children:"Misconduct"}),s.jsx(W,{value:"grievance",children:"Grievance"}),s.jsx(W,{value:"performance",children:"Performance"}),s.jsx(W,{value:"complaint",children:"Complaint"})]})]}),s.jsxs(Me,{value:u,onValueChange:C=>d(C),children:[s.jsx(Te,{className:"w-[150px]",children:s.jsx($e,{placeholder:"Severity"})}),s.jsxs(De,{children:[s.jsx(W,{value:"all",children:"All Severities"}),s.jsx(W,{value:"low",children:"Low"}),s.jsx(W,{value:"medium",children:"Medium"}),s.jsx(W,{value:"high",children:"High"}),s.jsx(W,{value:"critical",children:"Critical"})]})]}),s.jsxs(I,{variant:"outline",onClick:k,children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})})]}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{className:"text-base",children:"Case Register"}),s.jsxs(Be,{children:[j.length," case",j.length!==1?"s":""," found"]})]}),s.jsx(Y,{children:s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Case #"}),s.jsx(re,{children:"Type"}),s.jsx(re,{children:"Employee"}),s.jsx(re,{children:"Summary"}),s.jsx(re,{children:"Severity"}),s.jsx(re,{children:"Status"}),s.jsx(re,{children:"Reported"}),s.jsx(re,{})]})}),s.jsx(jr,{children:y?s.jsx(qe,{children:s.jsx(Z,{colSpan:8,className:"text-center py-8",children:"Loading..."})}):j.length===0?s.jsx(qe,{children:s.jsx(Z,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No cases found"})}):j.map(C=>s.jsxs(qe,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>g(C.id),children:[s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:C.case_number}),C.safeguarding_flag&&s.jsx(dn,{className:"h-4 w-4 text-destructive"}),C.confidentiality_level==="restricted"&&s.jsx(du,{className:"h-4 w-4 text-muted-foreground"})]})}),s.jsx(Z,{children:s.jsx(ce,{variant:"outline",children:C.case_type.charAt(0).toUpperCase()+C.case_type.slice(1)})}),s.jsx(Z,{children:C.employee?`${C.employee.first_name} ${C.employee.last_name}`:s.jsx("span",{className:"text-muted-foreground",children:""})}),s.jsx(Z,{className:"max-w-[200px] truncate",children:C.summary}),s.jsx(Z,{children:s.jsx(ce,{variant:N(C.severity),children:C.severity.charAt(0).toUpperCase()+C.severity.slice(1)})}),s.jsx(Z,{children:s.jsx(ce,{variant:S(C.status),children:C.status.replace(/_/g," ").replace(/\b\w/g,P=>P.toUpperCase())})}),s.jsx(Z,{className:"text-muted-foreground",children:ne(new Date(C.date_reported),"dd MMM yyyy")}),s.jsx(Z,{children:s.jsx(I,{variant:"ghost",size:"sm",onClick:P=>{P.stopPropagation(),g(C.id)},children:s.jsx(fx,{className:"h-4 w-4"})})})]},C.id))})]})})]}),s.jsx(ELe,{open:f,onOpenChange:h,onSubmit:_,organisationId:zLe}),s.jsx(BLe,{caseId:m,open:!!m,onOpenChange:C=>!C&&g(null),onUpdate:w})]})}function XW(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:a}=or(),i=x.useCallback(async()=>{try{n(!0);const{data:u,error:d}=await M.from("document_types").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(d)throw d;t(u||[])}catch(u){a({title:"Error fetching document types",description:u.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async u=>{try{const{data:d,error:f}=await M.from("document_types").insert(u).select().single();if(f)throw f;return t(h=>[...h,d].sort((m,g)=>m.display_order-g.display_order)),a({title:"Document type created"}),d}catch(d){return a({title:"Error creating document type",description:d.message,variant:"destructive"}),null}},l=async(u,d)=>{try{const{data:f,error:h}=await M.from("document_types").update(d).eq("id",u).select().single();if(h)throw h;return t(m=>m.map(g=>g.id===u?f:g).sort((g,p)=>g.display_order-p.display_order)),a({title:"Document type updated"}),f}catch(f){return a({title:"Error updating document type",description:f.message,variant:"destructive"}),null}},c=async u=>{try{const{error:d}=await M.from("document_types").update({is_active:!1}).eq("id",u);if(d)throw d;return t(f=>f.filter(h=>h.id!==u)),a({title:"Document type removed"}),!0}catch(d){return a({title:"Error removing document type",description:d.message,variant:"destructive"}),!1}};return x.useEffect(()=>{i()},[i]),{documentTypes:e,loading:r,fetchDocumentTypes:i,createDocumentType:o,updateDocumentType:l,deleteDocumentType:c}}function QW(e){const[t,r]=x.useState([]),[n,a]=x.useState(!0),{toast:i}=or(),o=x.useCallback(async()=>{try{a(!0);let f=M.from("employee_documents").select(`
          *,
          document_type:document_types(*)
        `).order("created_at",{ascending:!1});const{data:h,error:m}=await f;if(m)throw m;r(h||[])}catch(f){i({title:"Error fetching documents",description:f.message,variant:"destructive"})}finally{a(!1)}},[e,i]),l=async(f,h,m,g)=>{try{const{data:{user:p}}=await M.auth.getUser();if(!p)throw new Error("Not authenticated");const v=f.name.split(".").pop(),b=`${p.id}/${h}/${Date.now()}.${v}`,{error:y}=await M.storage.from("employee-documents").upload(b,f);if(y)throw y;const{data:{publicUrl:w}}=M.storage.from("employee-documents").getPublicUrl(b),{data:_,error:j}=await M.from("employee_documents").insert({user_id:p.id,document_type_id:h,file_url:w,file_name:f.name,issue_date:m||null,expiry_date:g||null,status:"pending"}).select("*, document_type:document_types(*)").single();if(j)throw j;return await M.from("document_versions").insert({document_id:_.id,version_number:1,file_url:w,file_name:f.name,uploaded_by:p.id}),r(N=>[_,...N]),i({title:"Document uploaded successfully"}),_}catch(p){return i({title:"Error uploading document",description:p.message,variant:"destructive"}),null}},c=async(f,h)=>{try{const{data:{user:m}}=await M.auth.getUser();if(!m)throw new Error("Not authenticated");const g=t.find(N=>N.id===f);if(!g)throw new Error("Document not found");const p=h.name.split(".").pop(),v=`${m.id}/${g.document_type_id}/${Date.now()}.${p}`,{error:b}=await M.storage.from("employee-documents").upload(v,h);if(b)throw b;const{data:{publicUrl:y}}=M.storage.from("employee-documents").getPublicUrl(v),w=g.current_version+1,{data:_,error:j}=await M.from("employee_documents").update({file_url:y,file_name:h.name,current_version:w,status:"pending"}).eq("id",f).select("*, document_type:document_types(*)").single();if(j)throw j;return await M.from("document_versions").insert({document_id:f,version_number:w,file_url:y,file_name:h.name,uploaded_by:m.id}),r(N=>N.map(S=>S.id===f?_:S)),i({title:"Document replaced successfully"}),_}catch(m){return i({title:"Error replacing document",description:m.message,variant:"destructive"}),null}},u=async f=>{try{const{error:h}=await M.from("employee_documents").delete().eq("id",f);if(h)throw h;return r(m=>m.filter(g=>g.id!==f)),i({title:"Document deleted"}),!0}catch(h){return i({title:"Error deleting document",description:h.message,variant:"destructive"}),!1}},d=async(f,h,m)=>{var g;try{const{data:{user:p}}=await M.auth.getUser();if(!p)throw new Error("Not authenticated");const{data:v,error:b}=await M.from("employee_documents").update({status:h}).eq("id",f).select("*, document_type:document_types(*)").single();if(b)throw b;return await M.from("document_reviews").insert({document_id:f,reviewer_id:p.id,reviewer_name:((g=p.user_metadata)==null?void 0:g.display_name)||p.email||"Unknown",reviewer_email:p.email||"",action:h,comments:m}),r(y=>y.map(w=>w.id===f?v:w)),i({title:`Document ${h}`}),v}catch(p){return i({title:"Error reviewing document",description:p.message,variant:"destructive"}),null}};return x.useEffect(()=>{o()},[o]),{documents:t,loading:n,fetchDocuments:o,uploadDocument:l,replaceDocument:c,deleteDocument:u,reviewDocument:d}}function ZW(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:a}=or(),i=x.useCallback(async()=>{try{n(!0);const{data:d,error:f}=await M.from("courses").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(f)throw f;t(d||[])}catch(d){a({title:"Error fetching courses",description:d.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async d=>{try{const{data:{user:f}}=await M.auth.getUser(),{data:h,error:m}=await M.from("courses").insert({...d,created_by:f==null?void 0:f.id}).select().single();if(m)throw m;return t(g=>[h,...g]),a({title:"Course created"}),h}catch(f){return a({title:"Error creating course",description:f.message,variant:"destructive"}),null}},l=async(d,f)=>{try{const{data:h,error:m}=await M.from("courses").update(f).eq("id",d).select().single();if(m)throw m;return t(g=>g.map(p=>p.id===d?h:p)),a({title:"Course updated"}),h}catch(h){return a({title:"Error updating course",description:h.message,variant:"destructive"}),null}},c=async d=>{try{const{error:f}=await M.from("courses").update({is_active:!1}).eq("id",d);if(f)throw f;return t(h=>h.filter(m=>m.id!==d)),a({title:"Course deleted"}),!0}catch(f){return a({title:"Error deleting course",description:f.message,variant:"destructive"}),!1}},u=async(d,f)=>l(d,{is_published:f});return x.useEffect(()=>{i()},[i]),{courses:e,loading:r,fetchCourses:i,createCourse:o,updateCourse:l,deleteCourse:c,publishCourse:u}}function qLe(e){const[t,r]=x.useState([]),[n,a]=x.useState(!0),{toast:i}=or(),o=x.useCallback(async()=>{if(!e){a(!1);return}try{a(!0);const{data:d,error:f}=await M.from("course_modules").select("*").eq("course_id",e).order("display_order",{ascending:!0});if(f)throw f;r(d||[])}catch(d){i({title:"Error fetching modules",description:d.message,variant:"destructive"})}finally{a(!1)}},[e,i]),l=async d=>{try{const{data:f,error:h}=await M.from("course_modules").insert(d).select().single();if(h)throw h;return r(m=>[...m,f].sort((g,p)=>g.display_order-p.display_order)),i({title:"Module created"}),f}catch(f){return i({title:"Error creating module",description:f.message,variant:"destructive"}),null}},c=async(d,f)=>{try{const{data:h,error:m}=await M.from("course_modules").update(f).eq("id",d).select().single();if(m)throw m;return r(g=>g.map(p=>p.id===d?h:p).sort((p,v)=>p.display_order-v.display_order)),i({title:"Module updated"}),h}catch(h){return i({title:"Error updating module",description:h.message,variant:"destructive"}),null}},u=async d=>{try{const{error:f}=await M.from("course_modules").delete().eq("id",d);if(f)throw f;return r(h=>h.filter(m=>m.id!==d)),i({title:"Module deleted"}),!0}catch(f){return i({title:"Error deleting module",description:f.message,variant:"destructive"}),!1}};return x.useEffect(()=>{o()},[o]),{modules:t,loading:n,fetchModules:o,createModule:l,updateModule:c,deleteModule:u}}function WLe(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:a}=or(),i=x.useCallback(async()=>{try{n(!0);const{data:c,error:u}=await M.from("course_assignments").select(`
          *,
          course:courses(*)
        `).order("created_at",{ascending:!1});if(u)throw u;t(c||[])}catch(c){a({title:"Error fetching assignments",description:c.message,variant:"destructive"})}finally{n(!1)}},[a]),o=async c=>{var u;try{const{data:{user:d}}=await M.auth.getUser(),{data:f,error:h}=await M.from("course_assignments").insert({...c,assigned_by:d==null?void 0:d.id,assigned_by_name:((u=d==null?void 0:d.user_metadata)==null?void 0:u.display_name)||(d==null?void 0:d.email)}).select("*, course:courses(*)").single();if(h)throw h;return t(m=>[f,...m]),a({title:"Assignment created"}),f}catch(d){return a({title:"Error creating assignment",description:d.message,variant:"destructive"}),null}},l=async c=>{try{const{error:u}=await M.from("course_assignments").delete().eq("id",c);if(u)throw u;return t(d=>d.filter(f=>f.id!==c)),a({title:"Assignment deleted"}),!0}catch(u){return a({title:"Error deleting assignment",description:u.message,variant:"destructive"}),!1}};return x.useEffect(()=>{i()},[i]),{assignments:e,loading:r,fetchAssignments:i,createAssignment:o,deleteAssignment:l}}function JW(e){const[t,r]=x.useState([]),[n,a]=x.useState(!0),{toast:i}=or(),o=x.useCallback(async()=>{try{a(!0);let u=e;if(!u){const{data:{user:h}}=await M.auth.getUser();u=h==null?void 0:h.id}if(!u){a(!1);return}const{data:d,error:f}=await M.from("user_course_assignments").select(`
          *,
          course:courses(*)
        `).eq("user_id",u).order("created_at",{ascending:!1});if(f)throw f;r(d||[])}catch(u){i({title:"Error fetching your training",description:u.message,variant:"destructive"})}finally{a(!1)}},[e,i]),l=async u=>{try{const{data:d,error:f}=await M.from("user_course_assignments").update({status:"in_progress",started_at:new Date().toISOString()}).eq("id",u).select("*, course:courses(*)").single();if(f)throw f;return r(h=>h.map(m=>m.id===u?d:m)),i({title:"Course started"}),d}catch(d){return i({title:"Error starting course",description:d.message,variant:"destructive"}),null}},c=async(u,d)=>{try{const f={progress_percentage:d};d>=100&&(f.status="completed",f.completed_at=new Date().toISOString());const{data:h,error:m}=await M.from("user_course_assignments").update(f).eq("id",u).select("*, course:courses(*)").single();if(m)throw m;return r(g=>g.map(p=>p.id===u?h:p)),h}catch(f){return i({title:"Error updating progress",description:f.message,variant:"destructive"}),null}};return x.useEffect(()=>{o()},[o]),{assignments:t,loading:n,fetchAssignments:o,startCourse:l,updateProgress:c}}function HLe(){const{documents:e,loading:t}=QW(),{documentTypes:r}=XW(),{assignments:n,loading:a}=JW(),[i,o]=x.useState("");x.useEffect(()=>{(async()=>{var A,E;const{data:{user:P}}=await M.auth.getUser();P&&o(((A=P.user_metadata)==null?void 0:A.display_name)||((E=P.email)==null?void 0:E.split("@")[0])||"User")})()},[]);const l=t||a,c=e.filter(C=>C.status==="approved").length,u=e.filter(C=>C.status==="pending").length,d=e.filter(C=>C.status==="expired"||C.expiry_date&&Km(new Date(C.expiry_date))).length,f=e.filter(C=>{if(!C.expiry_date||C.status==="expired")return!1;const P=ei(new Date(C.expiry_date),new Date);return P<=30&&P>0}),h=r.filter(C=>C.is_required),m=h.filter(C=>!e.some(P=>P.document_type_id===C.id&&(P.status==="approved"||P.status==="pending"))),g=n.filter(C=>C.status==="completed").length,p=n.filter(C=>C.status==="in_progress").length,v=n.filter(C=>C.status==="assigned").length,b=n.filter(C=>C.status==="completed"||!C.due_date?!1:Km(new Date(C.due_date))),y=h.length,w=h.filter(C=>e.some(P=>P.document_type_id===C.id&&P.status==="approved"&&(!P.expiry_date||!Km(new Date(P.expiry_date))))).length,_=y>0?Math.round(w/y*100):100,j=n.length,N=j>0?Math.round(g/j*100):100,S=Math.round((_+N)/2),k=[...m.map(C=>({type:"error",message:`Missing required document: ${C.name}`,link:"/portal/documents"})),...d>0?[{type:"error",message:`${d} document(s) have expired`,link:"/portal/documents"}]:[],...f.map(C=>{var P;return{type:"warning",message:`${((P=C.document_type)==null?void 0:P.name)||"Document"} expires ${ne(new Date(C.expiry_date),"dd MMM yyyy")}`,link:"/portal/documents"}}),...b.map(C=>{var P;return{type:"error",message:`Overdue training: ${(P=C.course)==null?void 0:P.title}`,link:"/portal/training"}}),...u>0?[{type:"info",message:`${u} document(s) awaiting review`,link:"/portal/documents"}]:[]].slice(0,5);return l?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx(Ot,{className:"h-20 w-full"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(C=>s.jsx(Ot,{className:"h-28"},C))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(Ot,{className:"h-64"}),s.jsx(Ot,{className:"h-64"})]})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",i]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Your self-service portal for documents and training"})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(ce,{variant:S>=80?"default":S>=50?"secondary":"destructive",className:S>=80?"bg-success/10 text-success":"",children:[S,"% Compliant"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Lt,{title:"Documents",value:c,description:`${u} pending review`,icon:Ai,variant:m.length>0||d>0?"warning":"success"}),s.jsx(Lt,{title:"Training Completed",value:g,description:`${v+p} remaining`,icon:bf,variant:b.length>0?"warning":"success"}),s.jsx(Lt,{title:"Expiring Soon",value:f.length,description:"Within 30 days",icon:xt,variant:f.length>0?"warning":"default"}),s.jsx(Lt,{title:"Action Required",value:m.length+b.length+d,description:"Items need attention",icon:ir,variant:m.length+b.length+d>0?"warning":"success"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(K,{children:[s.jsx(de,{className:"flex flex-row items-center justify-between pb-2",children:s.jsxs("div",{children:[s.jsxs(me,{className:"text-lg flex items-center gap-2",children:[s.jsx(YL,{className:"h-5 w-5 text-primary"}),"Priority Alerts"]}),s.jsx(Be,{children:"Items requiring your attention"})]})}),s.jsx(Y,{children:k.length>0?s.jsx("div",{className:"space-y-3",children:k.map((C,P)=>s.jsxs(On,{to:C.link,className:"flex items-start gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors",children:[C.type==="error"?s.jsx(ir,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}):C.type==="warning"?s.jsx(lG,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}):s.jsx(xt,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),s.jsx("span",{className:"text-sm flex-1",children:C.message}),s.jsx(TN,{className:"h-4 w-4 text-muted-foreground"})]},P))}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(yt,{className:"h-12 w-12 text-success mb-3"}),s.jsx("p",{className:"font-medium",children:"All caught up!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No urgent items require your attention"})]})})]}),s.jsxs(K,{children:[s.jsxs(de,{className:"pb-2",children:[s.jsx(me,{className:"text-lg",children:"Compliance Overview"}),s.jsx(Be,{children:"Your current compliance status"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Document Compliance"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[_,"%"]})]}),s.jsx(Ks,{value:_,className:"h-2"}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[w," of ",y," required documents uploaded"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Training Compliance"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[N,"%"]})]}),s.jsx(Ks,{value:N,className:"h-2"}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[g," of ",j," assigned training completed"]})]}),s.jsxs("div",{className:"pt-4 flex gap-2",children:[s.jsx(I,{asChild:!0,variant:"outline",className:"flex-1",children:s.jsxs(On,{to:"/portal/documents",children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"My Documents"]})}),s.jsx(I,{asChild:!0,variant:"outline",className:"flex-1",children:s.jsxs(On,{to:"/portal/training",children:[s.jsx(bf,{className:"h-4 w-4 mr-2"}),"My Training"]})})]})]})]})]}),n.filter(C=>C.status==="in_progress").length>0&&s.jsxs(K,{children:[s.jsxs(de,{className:"pb-2",children:[s.jsx(me,{className:"text-lg",children:"Continue Training"}),s.jsx(Be,{children:"Pick up where you left off"})]}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-4",children:n.filter(C=>C.status==="in_progress").slice(0,3).map(C=>{var P;return s.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium truncate",children:(P=C.course)==null?void 0:P.title}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Ks,{value:C.progress_percentage,className:"h-1.5 flex-1"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[C.progress_percentage,"%"]})]})]}),s.jsx(I,{asChild:!0,size:"sm",children:s.jsx(On,{to:`/portal/training/${C.id}`,children:"Resume"})})]},C.id)})})})]})]})}const KLe={pending:{label:"Pending Review",icon:xt,className:"bg-warning/10 text-warning"},approved:{label:"Approved",icon:yt,className:"bg-success/10 text-success"},rejected:{label:"Rejected",icon:zn,className:"bg-destructive/10 text-destructive"},expired:{label:"Expired",icon:ir,className:"bg-destructive/10 text-destructive"}};function GLe(){var D,T;const{documents:e,loading:t,uploadDocument:r,replaceDocument:n,deleteDocument:a}=QW(),{documentTypes:i,loading:o}=XW(),[l,c]=x.useState(!1),[u,d]=x.useState(""),[f,h]=x.useState(""),[m,g]=x.useState(""),[p,v]=x.useState(!1),[b,y]=x.useState(""),[w,_]=x.useState("all"),[j,N]=x.useState(null),S=x.useRef(null),k=x.useRef(null),C=async()=>{var H,ae;const U=(ae=(H=S.current)==null?void 0:H.files)==null?void 0:ae[0];if(!U||!u)return;v(!0);const X=await r(U,u,f||void 0,m||void 0);v(!1),X&&(c(!1),d(""),h(""),g(""),S.current&&(S.current.value=""))},P=async U=>{var H;const X=(H=U.target.files)==null?void 0:H[0];!X||!j||(v(!0),await n(j,X),v(!1),N(null),k.current&&(k.current.value=""))},A=async U=>{confirm("Are you sure you want to delete this document?")&&await a(U)},E=U=>U.status==="approved"&&U.expiry_date&&Km(new Date(U.expiry_date))?"expired":U.status,R=U=>{if(!U.expiry_date)return null;const X=ei(new Date(U.expiry_date),new Date);return X<0?{text:"Expired",className:"text-destructive"}:X<=30?{text:`Expires in ${X} days`,className:"text-warning"}:{text:ne(new Date(U.expiry_date),"dd MMM yyyy"),className:"text-muted-foreground"}},$=e.filter(U=>{var he;const X=U.file_name.toLowerCase().includes(b.toLowerCase())||((he=U.document_type)==null?void 0:he.name.toLowerCase().includes(b.toLowerCase())),H=E(U);return X&&(w==="all"||H===w)}),B=i.filter(U=>U.is_required),F=e.map(U=>U.document_type_id),L=B.filter(U=>!F.includes(U.id));return t||o?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx(Ot,{className:"h-10 w-full max-w-md"}),s.jsx(Ot,{className:"h-96"})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Documents"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Upload and manage your compliance documents"})]}),s.jsxs(I,{onClick:()=>c(!0),className:"gap-2",children:[s.jsx(Ml,{className:"h-4 w-4"}),"Upload Document"]})]}),L.length>0&&s.jsx(K,{className:"border-warning bg-warning/5",children:s.jsx(Y,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(ir,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Missing Required Documents"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Please upload the following: ",L.map(U=>U.name).join(", ")]})]})]})})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{placeholder:"Search documents...",value:b,onChange:U=>y(U.target.value),className:"pl-10"})]}),s.jsxs(Me,{value:w,onValueChange:_,children:[s.jsxs(Te,{className:"w-[180px]",children:[s.jsx(m0,{className:"h-4 w-4 mr-2"}),s.jsx($e,{placeholder:"Filter by status"})]}),s.jsxs(De,{children:[s.jsx(W,{value:"all",children:"All Status"}),s.jsx(W,{value:"pending",children:"Pending"}),s.jsx(W,{value:"approved",children:"Approved"}),s.jsx(W,{value:"rejected",children:"Rejected"}),s.jsx(W,{value:"expired",children:"Expired"})]})]})]}),s.jsx(K,{children:s.jsx(Y,{className:"p-0",children:$.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(ut,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No documents found"}),s.jsx("p",{className:"text-sm mt-1",children:"Upload your first document to get started"})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Document"}),s.jsx(re,{children:"Type"}),s.jsx(re,{children:"Status"}),s.jsx(re,{children:"Expiry"}),s.jsx(re,{children:"Version"}),s.jsx(re,{className:"text-right",children:"Actions"})]})}),s.jsx(jr,{children:$.map(U=>{var Ae;const X=E(U),H=KLe[X],ae=R(U),he=U.status==="pending",Pe=U.status!=="approved"||X==="expired";return s.jsxs(qe,{children:[s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ai,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium truncate max-w-[200px]",children:U.file_name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uploaded ",ne(new Date(U.created_at),"dd MMM yyyy")]})]})]})}),s.jsx(Z,{children:s.jsx(ce,{variant:"outline",children:((Ae=U.document_type)==null?void 0:Ae.name)||"Unknown"})}),s.jsx(Z,{children:s.jsxs(ce,{className:H.className,children:[s.jsx(H.icon,{className:"h-3 w-3 mr-1"}),H.label]})}),s.jsx(Z,{children:ae?s.jsx("span",{className:`text-sm ${ae.className}`,children:ae.text}):s.jsx("span",{className:"text-sm text-muted-foreground",children:"No expiry"})}),s.jsx(Z,{children:s.jsxs("span",{className:"text-sm",children:["v",U.current_version]})}),s.jsx(Z,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-1",children:[s.jsx(I,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx("a",{href:U.file_url,target:"_blank",rel:"noopener noreferrer",children:s.jsx(Li,{className:"h-4 w-4"})})}),s.jsx(I,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx("a",{href:U.file_url,download:U.file_name,children:s.jsx(As,{className:"h-4 w-4"})})}),Pe&&s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>{var ue;N(U.id),(ue=k.current)==null||ue.click()},children:s.jsx(aF,{className:"h-4 w-4"})}),he&&s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>A(U.id),children:s.jsx(bs,{className:"h-4 w-4 text-destructive"})})]})})]},U.id)})})]})})}),s.jsx("input",{ref:k,type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:P}),s.jsx($t,{open:l,onOpenChange:c,children:s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Upload Document"}),s.jsx(Mt,{children:"Upload a new compliance document. Accepted formats: PDF, JPG, PNG, DOC, DOCX"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Document Type *"}),s.jsxs(Me,{value:u,onValueChange:d,children:[s.jsx(Te,{children:s.jsx($e,{placeholder:"Select document type"})}),s.jsx(De,{children:i.map(U=>s.jsxs(W,{value:U.id,children:[U.name,U.is_required&&s.jsx("span",{className:"text-destructive ml-1",children:"*"})]},U.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Document File *"}),s.jsx(J,{ref:S,type:"file",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Issue Date"}),s.jsx(J,{type:"date",value:f,onChange:U=>h(U.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Expiry Date"}),s.jsx(J,{type:"date",value:m,onChange:U=>g(U.target.value)})]})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),s.jsx(I,{onClick:C,disabled:!u||!((T=(D=S.current)==null?void 0:D.files)!=null&&T[0])||p,children:p?"Uploading...":"Upload"})]})]})})]})}const YLe={assigned:{label:"Not Started",icon:dk,className:"bg-muted text-muted-foreground"},in_progress:{label:"In Progress",icon:Np,className:"bg-info/10 text-info"},completed:{label:"Completed",icon:yt,className:"bg-success/10 text-success"},overdue:{label:"Overdue",icon:ir,className:"bg-destructive/10 text-destructive"}};function XLe(){const{assignments:e,loading:t,startCourse:r}=JW(),[n,a]=x.useState(""),[i,o]=x.useState("all"),[l,c]=x.useState("all"),u=v=>v.status==="completed"?"completed":v.due_date&&Km(new Date(v.due_date))?"overdue":v.status,d=v=>{if(!v.due_date||v.status==="completed")return null;const b=ei(new Date(v.due_date),new Date);return b<0?{text:`${Math.abs(b)} days overdue`,className:"text-destructive"}:b===0?{text:"Due today",className:"text-warning"}:b<=7?{text:`Due in ${b} days`,className:"text-warning"}:{text:`Due ${ne(new Date(v.due_date),"dd MMM yyyy")}`,className:"text-muted-foreground"}},f=e.filter(v=>{var j,N,S;const b=((j=v.course)==null?void 0:j.title.toLowerCase().includes(n.toLowerCase()))||((S=(N=v.course)==null?void 0:N.description)==null?void 0:S.toLowerCase().includes(n.toLowerCase())),y=u(v);return b&&(i==="all"||y===i)&&(l==="all"||l==="active"&&(y==="assigned"||y==="in_progress"||y==="overdue")||l==="completed"&&y==="completed")}),h=async v=>{await r(v.id)};if(t)return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx(Ot,{className:"h-10 w-full max-w-md"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(v=>s.jsx(Ot,{className:"h-48"},v))})]});const m=e.filter(v=>{const b=u(v);return b==="assigned"||b==="in_progress"||b==="overdue"}).length,g=e.filter(v=>v.status==="completed").length,p=e.filter(v=>u(v)==="overdue").length;return s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Training"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Complete your assigned courses and track your progress"})]}),s.jsx("div",{className:"flex items-center gap-4 text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ce,{variant:"outline",children:[m," Active"]}),s.jsxs(ce,{className:"bg-success/10 text-success",children:[g," Completed"]}),p>0&&s.jsxs(ce,{className:"bg-destructive/10 text-destructive",children:[p," Overdue"]})]})})]}),s.jsxs(_n,{value:l,onValueChange:c,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs(mn,{children:[s.jsx(Ue,{value:"all",children:"All"}),s.jsx(Ue,{value:"active",children:"Active"}),s.jsx(Ue,{value:"completed",children:"Completed"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{placeholder:"Search courses...",value:n,onChange:v=>a(v.target.value),className:"pl-10 w-[200px]"})]}),s.jsxs(Me,{value:i,onValueChange:o,children:[s.jsxs(Te,{className:"w-[150px]",children:[s.jsx(m0,{className:"h-4 w-4 mr-2"}),s.jsx($e,{placeholder:"Status"})]}),s.jsxs(De,{children:[s.jsx(W,{value:"all",children:"All Status"}),s.jsx(W,{value:"assigned",children:"Not Started"}),s.jsx(W,{value:"in_progress",children:"In Progress"}),s.jsx(W,{value:"completed",children:"Completed"}),s.jsx(W,{value:"overdue",children:"Overdue"})]})]})]})]}),s.jsx(tt,{value:l,className:"mt-6",children:f.length===0?s.jsx(K,{children:s.jsxs(Y,{className:"py-12 text-center",children:[s.jsx(bf,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),s.jsx("p",{className:"text-muted-foreground",children:"No training courses found"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:l==="completed"?"Complete some courses to see them here":"Check back later for new assignments"})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(v=>{const b=u(v),y=YLe[b],w=d(v),_=v.course;return s.jsxs(K,{className:"flex flex-col",children:[s.jsxs(de,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx(me,{className:"text-base line-clamp-2",children:_==null?void 0:_.title}),s.jsxs(ce,{className:y.className,children:[s.jsx(y.icon,{className:"h-3 w-3 mr-1"}),y.label]})]}),(_==null?void 0:_.description)&&s.jsx(Be,{className:"line-clamp-2",children:_.description})]}),s.jsxs(Y,{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1 text-sm",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[v.progress_percentage,"%"]})]}),s.jsx(Ks,{value:v.progress_percentage,className:"h-2"})]}),s.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[(_==null?void 0:_.estimated_duration_minutes)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fG,{className:"h-4 w-4"}),s.jsxs("span",{children:[_.estimated_duration_minutes," min estimated"]})]}),w&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"h-4 w-4"}),s.jsx("span",{className:w.className,children:w.text})]}),v.completed_at&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yt,{className:"h-4 w-4 text-success"}),s.jsxs("span",{children:["Completed ",ne(new Date(v.completed_at),"dd MMM yyyy")]})]})]}),s.jsx("div",{className:"mt-auto",children:b==="assigned"?s.jsxs(I,{className:"w-full",onClick:()=>h(v),children:[s.jsx(Np,{className:"h-4 w-4 mr-2"}),"Start Course"]}):b==="in_progress"||b==="overdue"?s.jsx(I,{asChild:!0,className:"w-full",children:s.jsxs(On,{to:`/portal/training/${v.id}`,children:[s.jsx(Np,{className:"h-4 w-4 mr-2"}),"Continue"]})}):s.jsx(I,{variant:"outline",asChild:!0,className:"w-full",children:s.jsx(On,{to:`/portal/training/${v.id}`,children:"View Certificate"})})})]})]},v.id)})})})]})]})}function QLe(){var m;const[e,t]=x.useState(!0),[r,n]=x.useState(!1),[a,i]=x.useState(null),[o,l]=x.useState(!1),[c,u]=x.useState({}),{toast:d}=or();x.useEffect(()=>{f()},[]);const f=async()=>{var g,p,v,b,y,w,_,j,N,S,k,C;try{const{data:{user:P}}=await M.auth.getUser();if(!P)return;const{data:A}=await M.from("profiles").select("*").eq("user_id",P.id).maybeSingle(),E={email:P.email||"",display_name:(A==null?void 0:A.display_name)||((g=P.user_metadata)==null?void 0:g.display_name)||((p=P.email)==null?void 0:p.split("@")[0])||"",avatar_url:(A==null?void 0:A.avatar_url)||((v=P.user_metadata)==null?void 0:v.avatar_url),phone:(b=P.user_metadata)==null?void 0:b.phone,address:(y=P.user_metadata)==null?void 0:y.address,emergency_contact_name:(w=P.user_metadata)==null?void 0:w.emergency_contact_name,emergency_contact_phone:(_=P.user_metadata)==null?void 0:_.emergency_contact_phone,emergency_contact_relationship:(j=P.user_metadata)==null?void 0:j.emergency_contact_relationship,department:(N=P.user_metadata)==null?void 0:N.department,position:(S=P.user_metadata)==null?void 0:S.position,start_date:(k=P.user_metadata)==null?void 0:k.start_date,employee_id:(C=P.user_metadata)==null?void 0:C.employee_id};i(E),u(E)}catch(P){d({title:"Error loading profile",description:P.message,variant:"destructive"})}finally{t(!1)}},h=async()=>{try{n(!0);const{data:{user:g}}=await M.auth.getUser();if(!g)throw new Error("Not authenticated");await M.from("profiles").update({display_name:c.display_name}).eq("user_id",g.id),await M.auth.updateUser({data:{display_name:c.display_name,phone:c.phone,address:c.address,emergency_contact_name:c.emergency_contact_name,emergency_contact_phone:c.emergency_contact_phone,emergency_contact_relationship:c.emergency_contact_relationship}}),i({...a,...c}),l(!1),d({title:"Profile updated successfully"})}catch(g){d({title:"Error saving profile",description:g.message,variant:"destructive"})}finally{n(!1)}};return e?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx(Ot,{className:"h-32 w-full"}),s.jsx(Ot,{className:"h-64 w-full"}),s.jsx(Ot,{className:"h-48 w-full"})]}):a?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Profile"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"View and manage your personal information"})]}),o?s.jsxs("div",{className:"flex gap-2",children:[s.jsx(I,{variant:"outline",onClick:()=>{u(a),l(!1)},children:"Cancel"}),s.jsxs(I,{onClick:h,disabled:r,children:[s.jsx(oF,{className:"h-4 w-4 mr-2"}),r?"Saving...":"Save Changes"]})]}):s.jsx(I,{onClick:()=>l(!0),children:"Edit Profile"})]}),s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs(Pr,{className:"h-20 w-20",children:[s.jsx(Bg,{src:a.avatar_url}),s.jsx(Ar,{className:"text-xl",children:((m=a.display_name)==null?void 0:m.split(" ").map(g=>g[0]).join(""))||"U"})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:a.display_name}),s.jsx("p",{className:"text-muted-foreground",children:a.email}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.position&&s.jsx(ce,{variant:"outline",children:a.position}),a.department&&s.jsx(ce,{variant:"secondary",children:a.department})]})]})]})})}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-5 w-5"}),"Personal Information"]}),s.jsx(Be,{children:"Your contact details and personal info"})]}),s.jsx(Y,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Display Name"}),o?s.jsx(J,{value:c.display_name||"",onChange:g=>u({...c,display_name:g.target.value})}):s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(ns,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.display_name})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Email"}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(fu,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.email}),s.jsx(ce,{variant:"outline",className:"ml-auto text-xs",children:"Read-only"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Phone"}),o?s.jsx(J,{value:c.phone||"",onChange:g=>u({...c,phone:g.target.value}),placeholder:"Enter phone number"}):s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(Vd,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.phone||"Not provided"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Address"}),o?s.jsx(J,{value:c.address||"",onChange:g=>u({...c,address:g.target.value}),placeholder:"Enter address"}):s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(nF,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.address||"Not provided"})]})]})]})})]}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(cu,{className:"h-5 w-5"}),"Emergency Contact"]}),s.jsx(Be,{children:"Contact in case of emergency"})]}),s.jsx(Y,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Contact Name"}),o?s.jsx(J,{value:c.emergency_contact_name||"",onChange:g=>u({...c,emergency_contact_name:g.target.value}),placeholder:"Full name"}):s.jsx("div",{className:"p-2 bg-muted/50 rounded-md",children:a.emergency_contact_name||"Not provided"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Phone Number"}),o?s.jsx(J,{value:c.emergency_contact_phone||"",onChange:g=>u({...c,emergency_contact_phone:g.target.value}),placeholder:"Phone number"}):s.jsx("div",{className:"p-2 bg-muted/50 rounded-md",children:a.emergency_contact_phone||"Not provided"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Relationship"}),o?s.jsx(J,{value:c.emergency_contact_relationship||"",onChange:g=>u({...c,emergency_contact_relationship:g.target.value}),placeholder:"e.g., Spouse, Parent"}):s.jsx("div",{className:"p-2 bg-muted/50 rounded-md",children:a.emergency_contact_relationship||"Not provided"})]})]})})]}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Rl,{className:"h-5 w-5"}),"Employment Information"]}),s.jsx(Be,{children:"Your role and employment details (read-only)"})]}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Employee ID"}),s.jsx("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:s.jsx("span",{children:a.employee_id||"Not assigned"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Position"}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(Rl,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.position||"Not assigned"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Department"}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(JK,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.department||"Not assigned"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Start Date"}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[s.jsx(zt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:a.start_date?ne(new Date(a.start_date),"dd MMMM yyyy"):"Not provided"})]})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Employment details are managed by HR. Contact your manager to request changes."})]})]})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(cu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{children:"Unable to load profile"})]})}function ZLe(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:a}=or(),i=x.useCallback(async()=>{try{n(!0);const{data:{user:o}}=await M.auth.getUser();if(!(o!=null&&o.email)){n(!1);return}const{data:l,error:c}=await M.from("performance_reviews").select("*").eq("employee_email",o.email).order("created_at",{ascending:!1});if(c)throw c;t(l||[])}catch(o){a({title:"Error fetching reviews",description:o.message,variant:"destructive"})}finally{n(!1)}},[a]);return x.useEffect(()=>{i()},[i]),{reviews:e,loading:r,refetch:i}}function eH(e){const[t,r]=x.useState(null),[n,a]=x.useState([]),[i,o]=x.useState([]),[l,c]=x.useState(null),[u,d]=x.useState(!0),{toast:f}=or(),h=x.useCallback(async()=>{if(!e){d(!1);return}try{d(!0);const{data:{user:m}}=await M.auth.getUser();if(!(m!=null&&m.email)){d(!1);return}const{data:g,error:p}=await M.from("performance_reviews").select("*").eq("id",e).maybeSingle();if(p)throw p;if(r(g),!g){d(!1);return}const[v,b,y]=await Promise.all([M.from("review_goals").select("*").eq("review_id",e).order("created_at",{ascending:!0}),M.from("competency_ratings").select("*, competency:competencies(*)").eq("review_id",e),M.from("review_feedback").select("*").eq("review_id",e).eq("responder_email",m.email).eq("feedback_type","self").maybeSingle()]);if(v.error)throw v.error;if(b.error)throw b.error;if(y.error)throw y.error;a(v.data||[]),o(b.data||[]),c(y.data)}catch(m){f({title:"Error fetching review details",description:m.message,variant:"destructive"})}finally{d(!1)}},[e,f]);return x.useEffect(()=>{h()},[h]),{review:t,goals:n,ratings:i,selfAssessment:l,loading:u,refetch:h}}function JLe(e){const{toast:t}=or(),[r,n]=x.useState(!1);return{submitSelfAssessment:async i=>{var o;if(!e)return null;try{n(!0);const{data:{user:l}}=await M.auth.getUser();if(!(l!=null&&l.email))throw new Error("Not authenticated");const{data:c}=await M.from("review_feedback").select("id").eq("review_id",e).eq("responder_email",l.email).eq("feedback_type","self").maybeSingle();if(c){const{data:u,error:d}=await M.from("review_feedback").update({overall_rating:i.overall_rating,strengths:i.strengths,areas_for_improvement:i.areas_for_improvement,additional_comments:i.additional_comments,status:"submitted",submitted_at:new Date().toISOString()}).eq("id",c.id).select().single();if(d)throw d;return t({title:"Self-assessment updated successfully"}),u}else{const u=((o=l.user_metadata)==null?void 0:o.display_name)||l.email.split("@")[0],{data:d,error:f}=await M.from("review_feedback").insert({review_id:e,feedback_type:"self",responder_name:u,responder_email:l.email,relationship_to_employee:"Self",overall_rating:i.overall_rating,strengths:i.strengths,areas_for_improvement:i.areas_for_improvement,additional_comments:i.additional_comments,is_anonymous:!1,status:"submitted",submitted_at:new Date().toISOString()}).select().single();if(f)throw f;return t({title:"Self-assessment submitted successfully"}),d}}catch(l){return t({title:"Error submitting self-assessment",description:l.message,variant:"destructive"}),null}finally{n(!1)}},submitting:r}}const U4={draft:{label:"Draft",color:"bg-muted text-muted-foreground"},in_progress:{label:"In Progress",color:"bg-info/10 text-info"},pending_approval:{label:"Pending Approval",color:"bg-warning/10 text-warning"},completed:{label:"Completed",color:"bg-success/10 text-success"}},B4={not_started:{label:"Not Started",color:"bg-muted"},in_progress:{label:"In Progress",color:"bg-info"},completed:{label:"Completed",color:"bg-success"},deferred:{label:"Deferred",color:"bg-warning"}};function eFe({review:e,open:t,onOpenChange:r,onStartSelfAssessment:n}){const{goals:a,ratings:i,selfAssessment:o,loading:l}=eH(e.id),c=U4[e.status]||U4.draft;return s.jsx(Oo,{open:t,onOpenChange:r,children:s.jsxs(Ui,{className:"w-full sm:max-w-xl overflow-y-auto",children:[s.jsxs(Bi,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(zi,{className:"capitalize",children:[e.review_type," Review"]}),s.jsx(ce,{className:c.color,children:c.label})]}),s.jsxs(To,{children:["Review period: ",ne(new Date(e.review_period_start),"MMM d, yyyy")," - ",ne(new Date(e.review_period_end),"MMM d, yyyy")]})]}),l?s.jsxs("div",{className:"space-y-4 mt-6",children:[s.jsx(Ot,{className:"h-24"}),s.jsx(Ot,{className:"h-32"}),s.jsx(Ot,{className:"h-32"})]}):s.jsxs("div",{className:"space-y-6 mt-6",children:[s.jsxs(K,{children:[s.jsx(de,{className:"pb-3",children:s.jsxs(me,{className:"text-base flex items-center gap-2",children:[s.jsx(ns,{className:"h-4 w-4"}),"Review Overview"]})}),s.jsxs(Y,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Reviewer"}),s.jsx("p",{className:"font-medium",children:e.reviewer_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Position"}),s.jsx("p",{className:"font-medium",children:e.employee_position||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Department"}),s.jsx("p",{className:"font-medium",children:e.employee_department||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Created"}),s.jsx("p",{className:"font-medium",children:ne(new Date(e.created_at),"MMM d, yyyy")})]})]}),e.overall_rating&&s.jsxs("div",{className:"flex items-center gap-3 pt-3 border-t",children:[s.jsxs("div",{className:"flex items-center gap-1 text-warning",children:[s.jsx(Ws,{className:"h-6 w-6 fill-current"}),s.jsx("span",{className:"text-2xl font-bold",children:e.overall_rating.toFixed(1)})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"/ 5.0 Overall Rating"})]})]})]}),s.jsxs(K,{children:[s.jsx(de,{className:"pb-3",children:s.jsxs(me,{className:"text-base flex items-center gap-2",children:[s.jsx(Mg,{className:"h-4 w-4"}),"Self-Assessment"]})}),s.jsx(Y,{children:o?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-success",children:[s.jsx(yt,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Submitted"}),o.submitted_at&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:["on ",ne(new Date(o.submitted_at),"MMM d, yyyy")]})]}),o.overall_rating&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ws,{className:"h-4 w-4 text-warning fill-current"}),s.jsxs("span",{children:["Self-Rating: ",o.overall_rating.toFixed(1),"/5"]})]}),o.strengths&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Strengths"}),s.jsx("p",{className:"text-sm",children:o.strengths})]}),o.areas_for_improvement&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Areas for Improvement"}),s.jsx("p",{className:"text-sm",children:o.areas_for_improvement})]})]}):s.jsxs("div",{className:"flex flex-col items-center py-4 text-center",children:[s.jsx(cu,{className:"h-8 w-8 text-warning mb-2"}),s.jsx("p",{className:"font-medium",children:"Self-assessment not submitted"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Share your perspective on your performance"}),e.status!=="completed"&&n&&s.jsx(I,{onClick:n,children:"Start Self-Assessment"})]})})]}),a.length>0&&s.jsxs(K,{children:[s.jsx(de,{className:"pb-3",children:s.jsxs(me,{className:"text-base flex items-center gap-2",children:[s.jsx(Qs,{className:"h-4 w-4"}),"Goals (",a.length,")"]})}),s.jsx(Y,{className:"space-y-4",children:a.map(u=>{const d=B4[u.status]||B4.not_started;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:u.title}),u.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:u.description})]}),s.jsx(ce,{variant:"outline",className:"shrink-0",children:d.label})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ks,{value:u.progress_percentage,className:"h-2 flex-1"}),s.jsxs("span",{className:"text-xs text-muted-foreground w-10",children:[u.progress_percentage,"%"]})]}),u.target_date&&s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(zt,{className:"h-3 w-3"}),"Target: ",ne(new Date(u.target_date),"MMM d, yyyy")]})]},u.id)})})]}),i.length>0&&s.jsxs(K,{children:[s.jsx(de,{className:"pb-3",children:s.jsxs(me,{className:"text-base flex items-center gap-2",children:[s.jsx(Zs,{className:"h-4 w-4"}),"Competency Ratings"]})}),s.jsx(Y,{className:"space-y-4",children:i.map(u=>{var d,f;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"font-medium",children:((d=u.competency)==null?void 0:d.name)||"Unknown Competency"}),u.rating&&s.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(h=>s.jsx(Ws,{className:`h-4 w-4 ${h<=u.rating?"text-warning fill-current":"text-muted"}`},h))})]}),((f=u.competency)==null?void 0:f.description)&&s.jsx("p",{className:"text-xs text-muted-foreground",children:u.competency.description}),u.comments&&s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:u.comments})]},u.id)})})]}),e.status==="completed"&&s.jsxs(K,{children:[s.jsx(de,{className:"pb-3",children:s.jsx(me,{className:"text-base",children:"Manager Feedback"})}),s.jsxs(Y,{className:"space-y-4",children:[e.overall_feedback&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Overall Feedback"}),s.jsx("p",{className:"text-sm",children:e.overall_feedback})]}),e.strengths&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Strengths"}),s.jsx("p",{className:"text-sm",children:e.strengths})]}),e.areas_for_improvement&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Areas for Improvement"}),s.jsx("p",{className:"text-sm",children:e.areas_for_improvement})]}),e.development_plan&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Development Plan"}),s.jsx("p",{className:"text-sm",children:e.development_plan})]})]})]}),e.employee_comments&&s.jsxs(K,{children:[s.jsx(de,{className:"pb-3",children:s.jsx(me,{className:"text-base",children:"Your Comments"})}),s.jsx(Y,{children:s.jsx("p",{className:"text-sm",children:e.employee_comments})})]})]})]})})}function tFe({review:e,open:t,onOpenChange:r}){const{selfAssessment:n,refetch:a}=eH(e.id),{submitSelfAssessment:i,submitting:o}=JLe(e.id),[l,c]=x.useState(0),[u,d]=x.useState(0),[f,h]=x.useState(""),[m,g]=x.useState(""),[p,v]=x.useState("");x.useEffect(()=>{n?(c(n.overall_rating||0),h(n.strengths||""),g(n.areas_for_improvement||""),v(n.additional_comments||"")):(c(0),h(""),g(""),v(""))},[n,t]);const b=async()=>{if(l===0||!f.trim()||!m.trim())return;await i({overall_rating:l,strengths:f.trim(),areas_for_improvement:m.trim(),additional_comments:p.trim()||void 0})&&(a(),r(!1))},y=l>0&&f.trim().length>0&&m.trim().length>0;return s.jsx($t,{open:t,onOpenChange:r,children:s.jsxs(Tt,{className:"sm:max-w-lg",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Self-Assessment"}),s.jsx(Mt,{children:"Reflect on your performance during this review period. Your input helps provide a complete picture of your achievements and growth areas."})]}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Overall Self-Rating *"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"How would you rate your overall performance?"}),s.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(w=>s.jsx("button",{type:"button",onClick:()=>c(w),onMouseEnter:()=>d(w),onMouseLeave:()=>d(0),className:"p-1 transition-transform hover:scale-110",children:s.jsx(Ws,{className:`h-8 w-8 transition-colors ${w<=(u||l)?"text-warning fill-current":"text-muted-foreground"}`})},w)),s.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:l>0?`${l}/5`:"Select a rating"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"strengths",children:"Key Strengths *"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"What do you consider your main achievements and strengths during this period?"}),s.jsx(wt,{id:"strengths",value:f,onChange:w=>h(w.target.value),placeholder:"Describe your key accomplishments and areas where you excelled...",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"improvements",children:"Areas for Improvement *"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"What areas would you like to develop or improve?"}),s.jsx(wt,{id:"improvements",value:m,onChange:w=>g(w.target.value),placeholder:"Describe areas where you'd like to grow or challenges you faced...",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"comments",children:"Additional Comments (Optional)"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Any other thoughts you'd like to share with your reviewer?"}),s.jsx(wt,{id:"comments",value:p,onChange:w=>v(w.target.value),placeholder:"Additional context, goals for next period, or feedback...",rows:3})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsxs(I,{onClick:b,disabled:!y||o,children:[o&&s.jsx(et,{className:"h-4 w-4 mr-2 animate-spin"}),n?"Update Assessment":"Submit Assessment"]})]})]})})}const z4={draft:{label:"Draft",variant:"secondary",icon:ut},in_progress:{label:"In Progress",variant:"default",icon:xt},pending_approval:{label:"Pending Approval",variant:"outline",icon:xt},completed:{label:"Completed",variant:"default",icon:yt}},rFe={performance:"Performance Review",annual:"Annual Review",probation:"Probation Review"};function nFe(){const{reviews:e,loading:t}=ZLe(),[r,n]=x.useState(null),[a,i]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(null),d=e.filter(g=>g.status!=="completed"),f=e.filter(g=>g.status==="completed"),h=g=>{n(g),i(!0)},m=g=>{u(g),l(!0)};return t?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx(Ot,{className:"h-20 w-full"}),s.jsx("div",{className:"grid gap-4",children:[1,2,3].map(g=>s.jsx(Ot,{className:"h-32"},g))})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Performance Reviews"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"View your performance reviews and submit self-assessments"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsx(K,{children:s.jsxs(Y,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:s.jsx(uu,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:e.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Reviews"})]})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-info/10",children:s.jsx(xt,{className:"h-5 w-5 text-info"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:d.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"})]})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-success/10",children:s.jsx(yt,{className:"h-5 w-5 text-success"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:f.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]})]})})]}),s.jsxs(_n,{defaultValue:"active",className:"space-y-4",children:[s.jsxs(mn,{children:[s.jsxs(Ue,{value:"active",className:"flex items-center gap-2",children:[s.jsx(xt,{className:"h-4 w-4"}),"Active (",d.length,")"]}),s.jsxs(Ue,{value:"completed",className:"flex items-center gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"Completed (",f.length,")"]})]}),s.jsx(tt,{value:"active",className:"space-y-4",children:d.length===0?s.jsx(K,{children:s.jsxs(Y,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(uu,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-semibold text-lg",children:"No Active Reviews"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"You don't have any performance reviews in progress"})]})}):d.map(g=>s.jsx(V4,{review:g,onViewDetails:h,onStartSelfAssessment:m},g.id))}),s.jsx(tt,{value:"completed",className:"space-y-4",children:f.length===0?s.jsx(K,{children:s.jsxs(Y,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(yt,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-semibold text-lg",children:"No Completed Reviews"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Your completed performance reviews will appear here"})]})}):f.map(g=>s.jsx(V4,{review:g,onViewDetails:h,onStartSelfAssessment:m},g.id))})]}),r&&s.jsx(eFe,{review:r,open:a,onOpenChange:i,onStartSelfAssessment:()=>{i(!1),m(r)}}),c&&s.jsx(tFe,{review:c,open:o,onOpenChange:l})]})}function V4({review:e,onViewDetails:t,onStartSelfAssessment:r}){const n=z4[e.status]||z4.draft,a=n.icon;return s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold",children:rFe[e.review_type]||e.review_type}),s.jsxs(ce,{variant:n.variant,className:"flex items-center gap-1",children:[s.jsx(a,{className:"h-3 w-3"}),n.label]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[ne(new Date(e.review_period_start),"MMM d, yyyy")," - ",ne(new Date(e.review_period_end),"MMM d, yyyy")]})]}),e.overall_rating&&s.jsxs("div",{className:"flex items-center gap-1 text-warning",children:[s.jsx(Ws,{className:"h-5 w-5 fill-current"}),s.jsx("span",{className:"font-semibold",children:e.overall_rating.toFixed(1)})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ns,{className:"h-4 w-4"}),s.jsxs("span",{children:["Reviewer: ",e.reviewer_name]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(zt,{className:"h-4 w-4"}),s.jsxs("span",{children:["Created: ",ne(new Date(e.created_at),"MMM d, yyyy")]})]})]}),e.overall_feedback&&s.jsx("p",{className:"text-sm line-clamp-2",children:e.overall_feedback})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[e.status!=="completed"&&s.jsxs(I,{variant:"outline",onClick:()=>r(e),children:[s.jsx(Mg,{className:"h-4 w-4 mr-2"}),"Self-Assessment"]}),s.jsxs(I,{onClick:()=>t(e),children:["View Details",s.jsx(Po,{className:"h-4 w-4 ml-2"})]})]})]})})})}function M_(e){return!e||!Array.isArray(e)?[]:e.map(t=>typeof t=="object"&&t!==null&&!Array.isArray(t)?{id:String(t.id||""),title:String(t.title||""),completed:!!t.completed,completed_at:t.completed_at?String(t.completed_at):void 0}:{id:"",title:"",completed:!1})}function q4(e){return e.map(t=>({id:t.id,title:t.title,completed:t.completed,completed_at:t.completed_at||null}))}function sFe(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:a}=or(),i=x.useCallback(async()=>{try{n(!0);const{data:{user:d}}=await M.auth.getUser();if(!d)return;const{data:f,error:h}=await M.from("employee_goals").select("*").eq("user_id",d.id).order("created_at",{ascending:!1});if(h)throw h;t((f||[]).map(m=>({...m,milestones:M_(m.milestones),status:m.status,priority:m.priority})))}catch(d){console.error("Error fetching goals:",d),a({title:"Error",description:"Failed to load goals",variant:"destructive"})}finally{n(!1)}},[a]);x.useEffect(()=>{i()},[i]);const o=async d=>{try{const{data:{user:f}}=await M.auth.getUser();if(!f)throw new Error("Not authenticated");const{data:h,error:m}=await M.from("employee_goals").insert({user_id:f.id,title:d.title,description:d.description||null,category:d.category||"professional",target_date:d.target_date||null,priority:d.priority||"medium",milestones:q4(d.milestones||[])}).select().single();if(m)throw m;const g={...h,milestones:M_(h.milestones),status:h.status,priority:h.priority};return t(p=>[g,...p]),a({title:"Goal Created",description:"Your development goal has been created successfully."}),g}catch(f){throw console.error("Error creating goal:",f),a({title:"Error",description:"Failed to create goal",variant:"destructive"}),f}},l=async(d,f)=>{try{const h={...f};f.milestones&&(h.milestones=q4(f.milestones));const{data:m,error:g}=await M.from("employee_goals").update(h).eq("id",d).select().single();if(g)throw g;const p={...m,milestones:M_(m.milestones),status:m.status,priority:m.priority};return t(v=>v.map(b=>b.id===d?p:b)),a({title:"Goal Updated",description:"Your goal has been updated successfully."}),p}catch(h){throw console.error("Error updating goal:",h),a({title:"Error",description:"Failed to update goal",variant:"destructive"}),h}};return{goals:e,loading:r,createGoal:o,updateGoal:l,deleteGoal:async d=>{try{const{error:f}=await M.from("employee_goals").delete().eq("id",d);if(f)throw f;t(h=>h.filter(m=>m.id!==d)),a({title:"Goal Deleted",description:"Your goal has been deleted."})}catch(f){throw console.error("Error deleting goal:",f),a({title:"Error",description:"Failed to delete goal",variant:"destructive"}),f}},toggleMilestone:async(d,f)=>{const h=e.find(v=>v.id===d);if(!h)return;const m=h.milestones.map(v=>v.id===f?{...v,completed:!v.completed,completed_at:v.completed?void 0:new Date().toISOString()}:v),g=m.filter(v=>v.completed).length,p=m.length>0?Math.round(g/m.length*100):h.progress_percentage;await l(d,{milestones:m,progress_percentage:p,status:p===100?"completed":p>0?"in_progress":"not_started"})},refetch:i}}function aFe({open:e,onOpenChange:t,onCreateGoal:r}){const[n,a]=x.useState(!1),[i,o]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState("professional"),[f,h]=x.useState("medium"),[m,g]=x.useState(""),[p,v]=x.useState([]),[b,y]=x.useState(""),w=()=>{o(""),c(""),d("professional"),h("medium"),g(""),v([]),y("")},_=()=>{b.trim()&&(v(S=>[...S,{id:crypto.randomUUID(),title:b.trim(),completed:!1}]),y(""))},j=S=>{v(k=>k.filter(C=>C.id!==S))},N=async S=>{if(S.preventDefault(),!!i.trim()){a(!0);try{await r({title:i.trim(),description:l.trim()||void 0,category:u,priority:f,target_date:m||void 0,milestones:p}),w(),t(!1)}finally{a(!1)}}};return s.jsx($t,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Create Development Goal"}),s.jsx(Mt,{children:"Set a new personal or professional development goal to track your growth."})]}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"title",children:"Goal Title *"}),s.jsx(J,{id:"title",value:i,onChange:S=>o(S.target.value),placeholder:"e.g., Complete AWS Certification",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"description",children:"Description"}),s.jsx(wt,{id:"description",value:l,onChange:S=>c(S.target.value),placeholder:"Describe your goal and why it's important...",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"category",children:"Category"}),s.jsxs(Me,{value:u,onValueChange:d,children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"professional",children:"Professional Development"}),s.jsx(W,{value:"technical",children:"Technical Skills"}),s.jsx(W,{value:"leadership",children:"Leadership"}),s.jsx(W,{value:"personal",children:"Personal Growth"}),s.jsx(W,{value:"certification",children:"Certification"}),s.jsx(W,{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"priority",children:"Priority"}),s.jsxs(Me,{value:f,onValueChange:S=>h(S),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"low",children:"Low"}),s.jsx(W,{value:"medium",children:"Medium"}),s.jsx(W,{value:"high",children:"High"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"targetDate",children:"Target Date"}),s.jsx(J,{id:"targetDate",type:"date",value:m,onChange:S=>g(S.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Milestones (Optional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{value:b,onChange:S=>y(S.target.value),placeholder:"Add a milestone...",onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),_())}}),s.jsx(I,{type:"button",variant:"outline",size:"icon",onClick:_,children:s.jsx(jt,{className:"h-4 w-4"})})]}),p.length>0&&s.jsx("div",{className:"space-y-2 mt-2",children:p.map((S,k)=>s.jsxs("div",{className:"flex items-center gap-2 bg-muted p-2 rounded-md",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:[k+1,"."]}),s.jsx("span",{className:"flex-1 text-sm",children:S.title}),s.jsx(I,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>j(S.id),children:s.jsx(Bn,{className:"h-3 w-3"})})]},S.id))})]}),s.jsxs(fr,{children:[s.jsx(I,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{type:"submit",disabled:n||!i.trim(),children:n?"Creating...":"Create Goal"})]})]})]})})}var tH=["PageUp","PageDown"],rH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],nH={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},zh="Slider",[cC,iFe,oFe]=ch(zh),[sH,y3e]=zr(zh,[oFe]),[lFe,Xw]=sH(zh),aH=x.forwardRef((e,t)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:m=!1,form:g,...p}=e,v=x.useRef(new Set),b=x.useRef(0),w=o==="horizontal"?cFe:uFe,[_=[],j]=qn({prop:d,defaultProp:u,onChange:A=>{var R;(R=[...v.current][b.current])==null||R.focus(),f(A)}}),N=x.useRef(_);function S(A){const E=pFe(_,A);P(A,E)}function k(A){P(A,b.current)}function C(){const A=N.current[b.current];_[b.current]!==A&&h(_)}function P(A,E,{commit:R}={commit:!1}){const $=xFe(i),B=bFe(Math.round((A-n)/i)*i+n,$),F=Bp(B,[n,a]);j((L=[])=>{const D=hFe(L,F,E);if(yFe(D,c*i)){b.current=D.indexOf(F);const T=String(D)!==String(L);return T&&R&&h(D),T?D:L}else return L})}return s.jsx(lFe,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:b,thumbs:v.current,values:_,orientation:o,form:g,children:s.jsx(cC.Provider,{scope:e.__scopeSlider,children:s.jsx(cC.Slot,{scope:e.__scopeSlider,children:s.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...p,ref:t,onPointerDown:fe(p.onPointerDown,()=>{l||(N.current=_)}),min:n,max:a,inverted:m,onSlideStart:l?void 0:S,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:C,onHomeKeyDown:()=>!l&&P(n,0,{commit:!0}),onEndKeyDown:()=>!l&&P(a,_.length-1,{commit:!0}),onStepKeyDown:({event:A,direction:E})=>{if(!l){const B=tH.includes(A.key)||A.shiftKey&&rH.includes(A.key)?10:1,F=b.current,L=_[F],D=i*B*E;P(L+D,F,{commit:!0})}}})})})})});aH.displayName=zh;var[iH,oH]=sH(zh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),cFe=x.forwardRef((e,t)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,[f,h]=x.useState(null),m=We(t,w=>h(w)),g=x.useRef(void 0),p=Hl(a),v=p==="ltr",b=v&&!i||!v&&i;function y(w){const _=g.current||f.getBoundingClientRect(),j=[0,_.width],S=VP(j,b?[r,n]:[n,r]);return g.current=_,S(w-_.left)}return s.jsx(iH,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:s.jsx(lH,{dir:p,"data-orientation":"horizontal",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const _=y(w.clientX);o==null||o(_)},onSlideMove:w=>{const _=y(w.clientX);l==null||l(_)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:w=>{const j=nH[b?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:j?-1:1})}})})}),uFe=x.forwardRef((e,t)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,d=x.useRef(null),f=We(t,d),h=x.useRef(void 0),m=!a;function g(p){const v=h.current||d.current.getBoundingClientRect(),b=[0,v.height],w=VP(b,m?[n,r]:[r,n]);return h.current=v,w(p-v.top)}return s.jsx(iH,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:s.jsx(lH,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const v=g(p.clientY);i==null||i(v)},onSlideMove:p=>{const v=g(p.clientY);o==null||o(v)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:p=>{const b=nH[m?"from-bottom":"from-top"].includes(p.key);c==null||c({event:p,direction:b?-1:1})}})})}),lH=x.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=e,d=Xw(zh,r);return s.jsx(Ne.span,{...u,ref:t,onKeyDown:fe(e.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):tH.concat(rH).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:fe(e.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(h)?h.focus():n(f)}),onPointerMove:fe(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&a(f)}),onPointerUp:fe(e.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),i(f))})})}),cH="SliderTrack",uH=x.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=Xw(cH,r);return s.jsx(Ne.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:t})});uH.displayName=cH;var uC="SliderRange",dH=x.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=Xw(uC,r),i=oH(uC,r),o=x.useRef(null),l=We(t,o),c=a.values.length,u=a.values.map(h=>mH(h,a.min,a.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return s.jsx(Ne.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:f+"%"}})});dH.displayName=uC;var dC="SliderThumb",fH=x.forwardRef((e,t)=>{const r=iFe(e.__scopeSlider),[n,a]=x.useState(null),i=We(t,l=>a(l)),o=x.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(dFe,{...e,ref:i,index:o})}),dFe=x.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:a,...i}=e,o=Xw(dC,r),l=oH(dC,r),[c,u]=x.useState(null),d=We(t,y=>u(y)),f=c?o.form||!!c.closest("form"):!0,h=Ig(c),m=o.values[n],g=m===void 0?0:mH(m,o.min,o.max),p=mFe(n,o.values.length),v=h==null?void 0:h[l.size],b=v?gFe(v,g,l.direction):0;return x.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${b}px)`},children:[s.jsx(cC.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(Ne.span,{role:"slider","aria-label":e["aria-label"]||p,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:m===void 0?{display:"none"}:e.style,onFocus:fe(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),f&&s.jsx(hH,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},n)]})});fH.displayName=dC;var fFe="RadioBubbleInput",hH=x.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const a=x.useRef(null),i=We(a,n),o=Yg(t);return x.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("input",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Ne.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});hH.displayName=fFe;function hFe(e=[],t,r){const n=[...e];return n[r]=t,n.sort((a,i)=>a-i)}function mH(e,t,r){const i=100/(r-t)*(e-t);return Bp(i,[0,100])}function mFe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function pFe(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),n=Math.min(...r);return r.indexOf(n)}function gFe(e,t,r){const n=e/2,i=VP([0,50],[0,n]);return(n-i(t)*r)*r}function vFe(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function yFe(e,t){if(t>0){const r=vFe(e);return Math.min(...r)>=t}return!0}function VP(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function xFe(e){return(String(e).split(".")[1]||"").length}function bFe(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var pH=aH,wFe=uH,jFe=dH,_Fe=fH;const gH=x.forwardRef(({className:e,...t},r)=>s.jsxs(pH,{ref:r,className:Q("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(wFe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(jFe,{className:"absolute h-full bg-primary"})}),s.jsx(_Fe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));gH.displayName=pH.displayName;const W4={not_started:{label:"Not Started",variant:"secondary",icon:xt},in_progress:{label:"In Progress",variant:"default",icon:Zs},completed:{label:"Completed",variant:"default",icon:yt},on_hold:{label:"On Hold",variant:"outline",icon:p0}},NFe={professional:"Professional Development",technical:"Technical Skills",leadership:"Leadership",personal:"Personal Growth",certification:"Certification",other:"Other"};function SFe({goal:e,open:t,onOpenChange:r,onUpdate:n,onDelete:a,onToggleMilestone:i}){const[o,l]=x.useState(e.notes||""),[c,u]=x.useState(e.status),[d,f]=x.useState(e.progress_percentage),[h,m]=x.useState(!1),g=W4[e.status]||W4.not_started,p=g.icon,v=async()=>{m(!0);try{await n(e.id,{notes:o})}finally{m(!1)}},b=async _=>{u(_),await n(e.id,{status:_,progress_percentage:_==="completed"?100:d})},y=async _=>{const j=_[0];f(j),await n(e.id,{progress_percentage:j,status:j===100?"completed":j>0?"in_progress":"not_started"})},w=async()=>{await a(e.id),r(!1)};return s.jsx(Oo,{open:t,onOpenChange:r,children:s.jsxs(Ui,{className:"w-full sm:max-w-lg overflow-y-auto",children:[s.jsxs(Bi,{children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qs,{className:"h-5 w-5 text-primary"}),s.jsx(zi,{children:e.title})]})}),s.jsx(To,{children:NFe[e.category]||e.category})]}),s.jsxs("div",{className:"space-y-6 py-6",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs(ce,{variant:g.variant,className:"flex items-center gap-1",children:[s.jsx(p,{className:"h-3 w-3"}),g.label]}),s.jsxs(ce,{variant:"outline",className:"flex items-center gap-1",children:[s.jsx(ZL,{className:"h-3 w-3"}),e.priority.charAt(0).toUpperCase()+e.priority.slice(1)," Priority"]})]}),e.description&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Description"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]}),e.target_date&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(zt,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{children:["Target: ",ne(new Date(e.target_date),"MMMM d, yyyy")]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Progress"}),s.jsxs("span",{className:"text-sm font-medium",children:[d,"%"]})]}),s.jsx(Ks,{value:d,className:"h-3"}),s.jsx(gH,{value:[d],onValueChange:y,max:100,step:5,className:"mt-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Update Status"}),s.jsxs(Me,{value:c,onValueChange:b,children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"not_started",children:"Not Started"}),s.jsx(W,{value:"in_progress",children:"In Progress"}),s.jsx(W,{value:"on_hold",children:"On Hold"}),s.jsx(W,{value:"completed",children:"Completed"})]})]})]}),s.jsx(Nt,{}),e.milestones.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Milestones"}),s.jsx("div",{className:"space-y-2",children:e.milestones.map(_=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[s.jsx(Ri,{checked:_.completed,onCheckedChange:()=>i(e.id,_.id)}),s.jsx("span",{className:`text-sm flex-1 ${_.completed?"line-through text-muted-foreground":""}`,children:_.title}),_.completed&&_.completed_at&&s.jsx("span",{className:"text-xs text-muted-foreground",children:ne(new Date(_.completed_at),"MMM d")})]},_.id))})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"notes",children:"Notes"}),s.jsx(wt,{id:"notes",value:o,onChange:_=>l(_.target.value),placeholder:"Add notes about your progress, reflections, or next steps...",rows:4}),s.jsx(I,{variant:"outline",size:"sm",onClick:v,disabled:h||o===e.notes,children:h?"Saving...":"Save Notes"})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsxs("p",{children:["Created: ",ne(new Date(e.created_at),"MMMM d, yyyy")]}),s.jsxs("p",{children:["Last Updated: ",ne(new Date(e.updated_at),"MMMM d, yyyy")]})]}),s.jsxs(Ad,{children:[s.jsx(Q6,{asChild:!0,children:s.jsxs(I,{variant:"destructive",className:"w-full",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Delete Goal"]})}),s.jsxs(Pc,{children:[s.jsxs(Ac,{children:[s.jsx(Tc,{children:"Delete Goal?"}),s.jsx(Dc,{children:"This action cannot be undone. This will permanently delete your goal and all associated milestones."})]}),s.jsxs(Oc,{children:[s.jsx(Mc,{children:"Cancel"}),s.jsx(Rc,{onClick:w,children:"Delete"})]})]})]})]})]})})}const H4={not_started:{label:"Not Started",variant:"secondary",icon:xt},in_progress:{label:"In Progress",variant:"default",icon:Zs},completed:{label:"Completed",variant:"default",icon:yt},on_hold:{label:"On Hold",variant:"outline",icon:p0}},K4={low:{label:"Low",color:"text-muted-foreground"},medium:{label:"Medium",color:"text-warning"},high:{label:"High",color:"text-destructive"}},CFe={professional:"Professional Development",technical:"Technical Skills",leadership:"Leadership",personal:"Personal Growth",certification:"Certification",other:"Other"};function kFe(){const{goals:e,loading:t,createGoal:r,updateGoal:n,deleteGoal:a,toggleMilestone:i}=sFe(),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,f]=x.useState(!1),h=e.filter(v=>v.status!=="completed"),m=e.filter(v=>v.status==="completed"),g={total:e.length,inProgress:e.filter(v=>v.status==="in_progress").length,completed:m.length,avgProgress:e.length>0?Math.round(e.reduce((v,b)=>v+b.progress_percentage,0)/e.length):0},p=v=>{u(v),f(!0)};return t?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx(Ot,{className:"h-20 w-full"}),s.jsx("div",{className:"grid gap-4",children:[1,2,3].map(v=>s.jsx(Ot,{className:"h-32"},v))})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Development Goals"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Set and track your personal development objectives"})]}),s.jsxs(I,{onClick:()=>l(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"New Goal"]})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[s.jsx(K,{children:s.jsxs(Y,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:s.jsx(Qs,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.total}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Goals"})]})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-info/10",children:s.jsx(Zs,{className:"h-5 w-5 text-info"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.inProgress}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"})]})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-success/10",children:s.jsx(yt,{className:"h-5 w-5 text-success"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g.completed}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"flex items-center gap-4 p-4",children:[s.jsx("div",{className:"p-3 rounded-lg bg-warning/10",children:s.jsx(ZL,{className:"h-5 w-5 text-warning"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:[g.avgProgress,"%"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Progress"})]})]})})]}),s.jsxs(_n,{defaultValue:"active",className:"space-y-4",children:[s.jsxs(mn,{children:[s.jsxs(Ue,{value:"active",className:"flex items-center gap-2",children:[s.jsx(Zs,{className:"h-4 w-4"}),"Active (",h.length,")"]}),s.jsxs(Ue,{value:"completed",className:"flex items-center gap-2",children:[s.jsx(yt,{className:"h-4 w-4"}),"Completed (",m.length,")"]})]}),s.jsx(tt,{value:"active",className:"space-y-4",children:h.length===0?s.jsx(K,{children:s.jsxs(Y,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(Qs,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-semibold text-lg",children:"No Active Goals"}),s.jsx("p",{className:"text-muted-foreground mt-1 mb-4",children:"Start by creating your first development goal"}),s.jsxs(I,{onClick:()=>l(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Create Goal"]})]})}):h.map(v=>s.jsx(G4,{goal:v,onViewDetails:p},v.id))}),s.jsx(tt,{value:"completed",className:"space-y-4",children:m.length===0?s.jsx(K,{children:s.jsxs(Y,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(yt,{className:"h-12 w-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-semibold text-lg",children:"No Completed Goals"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Your completed goals will appear here"})]})}):m.map(v=>s.jsx(G4,{goal:v,onViewDetails:p},v.id))})]}),s.jsx(aFe,{open:o,onOpenChange:l,onCreateGoal:r}),c&&s.jsx(SFe,{goal:c,open:d,onOpenChange:f,onUpdate:n,onDelete:a,onToggleMilestone:i})]})}function G4({goal:e,onViewDetails:t}){const r=H4[e.status]||H4.not_started,n=K4[e.priority]||K4.medium,a=r.icon;return s.jsx(K,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t(e),children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("h3",{className:"font-semibold",children:e.title}),s.jsxs(ce,{variant:r.variant,className:"flex items-center gap-1",children:[s.jsx(a,{className:"h-3 w-3"}),r.label]}),s.jsxs("span",{className:`text-xs font-medium ${n.color}`,children:[n.label," Priority"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:CFe[e.category]||e.category})]})}),e.description&&s.jsx("p",{className:"text-sm line-clamp-2",children:e.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Progress"}),s.jsxs("span",{className:"font-medium",children:[e.progress_percentage,"%"]})]}),s.jsx(Ks,{value:e.progress_percentage,className:"h-2"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[e.target_date&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(zt,{className:"h-4 w-4"}),s.jsxs("span",{children:["Due: ",ne(new Date(e.target_date),"MMM d, yyyy")]})]}),e.milestones.length>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsxs("span",{children:[e.milestones.filter(i=>i.completed).length,"/",e.milestones.length," milestones"]})]})]})]})})})}function EFe(){const{courses:e,loading:t,createCourse:r,updateCourse:n,deleteCourse:a,publishCourse:i}=ZW(),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,f]=x.useState(""),[h,m]=x.useState("all"),[g,p]=x.useState({title:"",description:"",estimated_duration_minutes:"",pass_mark:"80"}),v=async()=>{await r({title:g.title,description:g.description||null,thumbnail_url:null,estimated_duration_minutes:g.estimated_duration_minutes?parseInt(g.estimated_duration_minutes):null,pass_mark:parseInt(g.pass_mark)||80,is_published:!1,is_active:!0,created_by:null})&&(l(!1),p({title:"",description:"",estimated_duration_minutes:"",pass_mark:"80"}))},b=async()=>{c&&(await n(c.id,{title:g.title,description:g.description||null,estimated_duration_minutes:g.estimated_duration_minutes?parseInt(g.estimated_duration_minutes):null,pass_mark:parseInt(g.pass_mark)||80}),u(null),p({title:"",description:"",estimated_duration_minutes:"",pass_mark:"80"}))},y=async j=>{confirm("Are you sure you want to delete this course?")&&await a(j)},w=j=>{var N,S;u(j),p({title:j.title,description:j.description||"",estimated_duration_minutes:((N=j.estimated_duration_minutes)==null?void 0:N.toString())||"",pass_mark:((S=j.pass_mark)==null?void 0:S.toString())||"80"})},_=e.filter(j=>{const N=j.title.toLowerCase().includes(d.toLowerCase()),S=h==="all"||h==="published"&&j.is_published||h==="draft"&&!j.is_published;return N&&S});return t?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx(Ot,{className:"h-10 w-full max-w-md"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(j=>s.jsx(Ot,{className:"h-48"},j))})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Learning Management"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Create and manage training courses"})]}),s.jsxs(I,{onClick:()=>l(!0),className:"gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Create Course"]})]}),s.jsxs(_n,{value:h,onValueChange:m,children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsxs(mn,{children:[s.jsxs(Ue,{value:"all",children:["All Courses (",e.length,")"]}),s.jsxs(Ue,{value:"published",children:["Published (",e.filter(j=>j.is_published).length,")"]}),s.jsxs(Ue,{value:"draft",children:["Drafts (",e.filter(j=>!j.is_published).length,")"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{placeholder:"Search courses...",value:d,onChange:j=>f(j.target.value),className:"pl-10 w-[250px]"})]})]}),s.jsx(tt,{value:h,className:"mt-6",children:_.length===0?s.jsx(K,{children:s.jsxs(Y,{className:"py-12 text-center",children:[s.jsx(bf,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),s.jsx("p",{className:"text-muted-foreground",children:"No courses found"}),s.jsxs(I,{className:"mt-4",onClick:()=>l(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Create your first course"]})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(j=>s.jsxs(K,{className:"flex flex-col",children:[s.jsx(de,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(me,{className:"text-base line-clamp-2",children:j.title}),j.description&&s.jsx(Be,{className:"line-clamp-2 mt-1",children:j.description})]}),s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:s.jsx(ai,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",children:[s.jsx(st,{asChild:!0,children:s.jsxs(On,{to:`/lms/courses/${j.id}`,children:[s.jsx(dk,{className:"h-4 w-4 mr-2"}),"Edit Modules"]})}),s.jsxs(st,{onClick:()=>w(j),children:[s.jsx(mk,{className:"h-4 w-4 mr-2"}),"Edit Details"]}),s.jsxs(st,{onClick:()=>y(j.id),className:"text-destructive",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}),s.jsxs(Y,{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-4",children:[j.estimated_duration_minutes&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(xt,{className:"h-4 w-4"}),j.estimated_duration_minutes," min"]}),s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("span",{children:["Pass: ",j.pass_mark,"%"]})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-auto pt-4 border-t",children:[s.jsx(ce,{variant:j.is_published?"default":"secondary",className:j.is_published?"bg-success/10 text-success":"",children:j.is_published?"Published":"Draft"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(An,{checked:j.is_published,onCheckedChange:N=>i(j.id,N)}),s.jsx("span",{className:"text-sm text-muted-foreground",children:j.is_published?"Live":"Publish"})]})]})]})]},j.id))})})]}),s.jsx($t,{open:o||!!c,onOpenChange:j=>{j||(l(!1),u(null),p({title:"",description:"",estimated_duration_minutes:"",pass_mark:"80"}))},children:s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:c?"Edit Course":"Create New Course"}),s.jsx(Mt,{children:c?"Update course details":"Add a new training course to the LMS"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Course Title *"}),s.jsx(J,{value:g.title,onChange:j=>p({...g,title:j.target.value}),placeholder:"e.g., NDIS Orientation Training"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Description"}),s.jsx(wt,{value:g.description,onChange:j=>p({...g,description:j.target.value}),placeholder:"Brief description of the course content...",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Estimated Duration (minutes)"}),s.jsx(J,{type:"number",value:g.estimated_duration_minutes,onChange:j=>p({...g,estimated_duration_minutes:j.target.value}),placeholder:"60"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Quiz Pass Mark (%)"}),s.jsx(J,{type:"number",value:g.pass_mark,onChange:j=>p({...g,pass_mark:j.target.value}),placeholder:"80",min:"0",max:"100"})]})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>{l(!1),u(null)},children:"Cancel"}),s.jsx(I,{onClick:c?b:v,disabled:!g.title,children:c?"Save Changes":"Create Course"})]})]})})]})}const PFe={video:cF,pdf:ut,policy:Ai,quiz:jp},AFe={video:"Video",pdf:"PDF/Document",policy:"Policy Acknowledgement",quiz:"Quiz"};function OFe(){const{courseId:e}=y3(),t=oi(),{modules:r,loading:n,createModule:a,updateModule:i,deleteModule:o}=qLe(e),[l,c]=x.useState(null),[u,d]=x.useState(!0),[f,h]=x.useState(!1),[m,g]=x.useState(null),[p,v]=x.useState({title:"",description:"",module_type:"video",content_url:"",content_text:"",duration_minutes:"",is_required:!0});x.useEffect(()=>{(async()=>{if(!e)return;const{data:S,error:k}=await M.from("courses").select("*").eq("id",e).single();if(k){console.error("Error fetching course:",k),t("/lms");return}c(S),d(!1)})()},[e,t]);const b=async()=>{if(!e)return;await a({course_id:e,title:p.title,description:p.description||null,module_type:p.module_type,content_url:p.content_url||null,content_text:p.content_text||null,is_required:p.is_required,display_order:r.length,duration_minutes:p.duration_minutes?parseInt(p.duration_minutes):null})&&(h(!1),j())},y=async()=>{m&&(await i(m.id,{title:p.title,description:p.description||null,module_type:p.module_type,content_url:p.content_url||null,content_text:p.content_text||null,is_required:p.is_required,duration_minutes:p.duration_minutes?parseInt(p.duration_minutes):null}),g(null),j())},w=async N=>{confirm("Are you sure you want to delete this module?")&&await o(N)},_=N=>{var S;g(N),v({title:N.title,description:N.description||"",module_type:N.module_type,content_url:N.content_url||"",content_text:N.content_text||"",duration_minutes:((S=N.duration_minutes)==null?void 0:S.toString())||"",is_required:N.is_required})},j=()=>{v({title:"",description:"",module_type:"video",content_url:"",content_text:"",duration_minutes:"",is_required:!0})};return u||n?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx(Ot,{className:"h-10 w-64"}),s.jsx(Ot,{className:"h-64"})]}):l?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(I,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(On,{to:"/lms",children:s.jsx(Qc,{className:"h-4 w-4"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold",children:l.title}),s.jsx("p",{className:"text-muted-foreground",children:"Course Builder - Add and arrange modules"})]}),s.jsxs(I,{onClick:()=>h(!0),className:"gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Add Module"]})]}),s.jsx(K,{children:s.jsx(Y,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(ce,{variant:l.is_published?"default":"secondary",children:l.is_published?"Published":"Draft"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.length," module",r.length!==1?"s":""]}),l.estimated_duration_minutes&&s.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(xt,{className:"h-4 w-4"}),l.estimated_duration_minutes," min total"]})]}),s.jsx(On,{to:`/lms/courses/${e}/quiz`,children:s.jsxs(I,{variant:"outline",size:"sm",children:[s.jsx(jp,{className:"h-4 w-4 mr-2"}),"Manage Quiz Questions"]})})]})})}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{children:"Course Modules"}),s.jsx(Be,{children:"Drag to reorder modules. Learners will complete them in order."})]}),s.jsx(Y,{children:r.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(ut,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No modules yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Add your first module to start building the course"}),s.jsxs(I,{className:"mt-4",onClick:()=>h(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Add Module"]})]}):s.jsx("div",{className:"space-y-2",children:r.map((N,S)=>{const k=PFe[N.module_type];return s.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsx("div",{className:"cursor-grab text-muted-foreground",children:s.jsx(cG,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(k,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium truncate",children:N.title}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(ce,{variant:"outline",className:"text-xs",children:AFe[N.module_type]}),N.duration_minutes&&s.jsxs("span",{children:[N.duration_minutes," min"]}),N.is_required&&s.jsx(ce,{variant:"secondary",className:"text-xs",children:"Required"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>_(N),children:s.jsx(mk,{className:"h-4 w-4"})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>w(N.id),children:s.jsx(bs,{className:"h-4 w-4 text-destructive"})})]})]},N.id)})})})]}),s.jsx($t,{open:f||!!m,onOpenChange:N=>{N||(h(!1),g(null),j())},children:s.jsxs(Tt,{className:"max-w-lg",children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:m?"Edit Module":"Add Module"}),s.jsx(Mt,{children:m?"Update module details":"Add a new learning module to this course"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Module Type *"}),s.jsxs(Me,{value:p.module_type,onValueChange:N=>v({...p,module_type:N}),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"video",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cF,{className:"h-4 w-4"}),"Video"]})}),s.jsx(W,{value:"pdf",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ut,{className:"h-4 w-4"}),"PDF/Document"]})}),s.jsx(W,{value:"policy",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ai,{className:"h-4 w-4"}),"Policy Acknowledgement"]})}),s.jsx(W,{value:"quiz",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jp,{className:"h-4 w-4"}),"Quiz"]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Title *"}),s.jsx(J,{value:p.title,onChange:N=>v({...p,title:N.target.value}),placeholder:"e.g., Introduction to NDIS"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Description"}),s.jsx(wt,{value:p.description,onChange:N=>v({...p,description:N.target.value}),placeholder:"Brief description...",rows:2})]}),(p.module_type==="video"||p.module_type==="pdf")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Content URL *"}),s.jsx(J,{value:p.content_url,onChange:N=>v({...p,content_url:N.target.value}),placeholder:p.module_type==="video"?"https://youtube.com/...":"https://..."})]}),p.module_type==="policy"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Policy Text *"}),s.jsx(wt,{value:p.content_text,onChange:N=>v({...p,content_text:N.target.value}),placeholder:"Enter the policy text that learners must acknowledge...",rows:5})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Duration (minutes)"}),s.jsx(J,{type:"number",value:p.duration_minutes,onChange:N=>v({...p,duration_minutes:N.target.value}),placeholder:"10"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Required"}),s.jsxs("div",{className:"flex items-center h-10",children:[s.jsx("input",{type:"checkbox",checked:p.is_required,onChange:N=>v({...p,is_required:N.target.checked}),className:"h-4 w-4"}),s.jsx("span",{className:"ml-2 text-sm",children:"Must complete"})]})]})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>{h(!1),g(null),j()},children:"Cancel"}),s.jsx(I,{onClick:m?y:b,disabled:!p.title,children:m?"Save Changes":"Add Module"})]})]})})]}):s.jsx("div",{children:"Course not found"})}const TFe={individual:"Individual",team:"Team",role:"Role",department:"Department",location:"Location",all:"All Staff"},DFe={none:"One-time",monthly:"Monthly",quarterly:"Quarterly",biannual:"Every 6 months",annual:"Annually"};function RFe(){const{assignments:e,loading:t,createAssignment:r,deleteAssignment:n}=WLe(),{courses:a}=ZW(),[i,o]=x.useState(!1),[l,c]=x.useState(""),[u,d]=x.useState({course_id:"",target_type:"all",target_value:"",due_date:"",recurrence:"none",is_mandatory:!0,auto_assign_on_hire:!1,notes:""}),f=async()=>{await r({course_id:u.course_id,target_type:u.target_type,target_value:u.target_type==="all"?null:u.target_value||null,due_date:u.due_date||null,recurrence:u.recurrence,is_mandatory:u.is_mandatory,auto_assign_on_hire:u.auto_assign_on_hire,notes:u.notes||null,assigned_by:null,assigned_by_name:null})&&(o(!1),d({course_id:"",target_type:"all",target_value:"",due_date:"",recurrence:"none",is_mandatory:!0,auto_assign_on_hire:!1,notes:""}))},h=async g=>{confirm("Are you sure you want to delete this assignment?")&&await n(g)},m=e.filter(g=>{var p;return(p=g.course)==null?void 0:p.title.toLowerCase().includes(l.toLowerCase())});return t?s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsx(Ot,{className:"h-10 w-full max-w-md"}),s.jsx(Ot,{className:"h-96"})]}):s.jsxs("div",{className:"space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Training Assignments"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Assign courses to individuals, teams, or all staff"})]}),s.jsxs(I,{onClick:()=>o(!0),className:"gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Create Assignment"]})]}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{placeholder:"Search assignments...",value:l,onChange:g=>c(g.target.value),className:"pl-10"})]}),s.jsx(K,{children:s.jsx(Y,{className:"p-0",children:m.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Er,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No assignments found"}),s.jsxs(I,{className:"mt-4",onClick:()=>o(!0),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Create your first assignment"]})]}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Course"}),s.jsx(re,{children:"Assigned To"}),s.jsx(re,{children:"Due Date"}),s.jsx(re,{children:"Recurrence"}),s.jsx(re,{children:"Type"}),s.jsx(re,{children:"Assigned By"}),s.jsx(re,{className:"text-right",children:"Actions"})]})}),s.jsx(jr,{children:m.map(g=>{var p;return s.jsxs(qe,{children:[s.jsx(Z,{className:"font-medium",children:((p=g.course)==null?void 0:p.title)||"Unknown Course"}),s.jsx(Z,{children:s.jsxs(ce,{variant:"outline",children:[TFe[g.target_type],g.target_value&&`: ${g.target_value}`]})}),s.jsx(Z,{children:g.due_date?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"h-4 w-4 text-muted-foreground"}),ne(new Date(g.due_date),"dd MMM yyyy")]}):s.jsx("span",{className:"text-muted-foreground",children:"No deadline"})}),s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(aF,{className:"h-4 w-4 text-muted-foreground"}),DFe[g.recurrence]]})}),s.jsx(Z,{children:s.jsx(ce,{variant:g.is_mandatory?"default":"secondary",children:g.is_mandatory?"Mandatory":"Optional"})}),s.jsx(Z,{className:"text-muted-foreground",children:g.assigned_by_name||"System"}),s.jsx(Z,{className:"text-right",children:s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>h(g.id),children:s.jsx(bs,{className:"h-4 w-4 text-destructive"})})})]},g.id)})})]})})}),s.jsx($t,{open:i,onOpenChange:o,children:s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Create Assignment"}),s.jsx(Mt,{children:"Assign a course to staff members"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Course *"}),s.jsxs(Me,{value:u.course_id,onValueChange:g=>d({...u,course_id:g}),children:[s.jsx(Te,{children:s.jsx($e,{placeholder:"Select a course"})}),s.jsx(De,{children:a.filter(g=>g.is_published).map(g=>s.jsx(W,{value:g.id,children:g.title},g.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Assign To *"}),s.jsxs(Me,{value:u.target_type,onValueChange:g=>d({...u,target_type:g}),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"all",children:"All Staff"}),s.jsx(W,{value:"role",children:"By Role"}),s.jsx(W,{value:"department",children:"By Department"}),s.jsx(W,{value:"location",children:"By Location"}),s.jsx(W,{value:"individual",children:"Individual"})]})]})]}),u.target_type!=="all"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:u.target_type==="individual"?"User Email":u.target_type==="role"?"Role Name":u.target_type==="department"?"Department":"Location"}),s.jsx(J,{value:u.target_value,onChange:g=>d({...u,target_value:g.target.value}),placeholder:u.target_type==="individual"?"user@example.com":"Enter value..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Due Date"}),s.jsx(J,{type:"date",value:u.due_date,onChange:g=>d({...u,due_date:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Recurrence"}),s.jsxs(Me,{value:u.recurrence,onValueChange:g=>d({...u,recurrence:g}),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"none",children:"One-time"}),s.jsx(W,{value:"monthly",children:"Monthly"}),s.jsx(W,{value:"quarterly",children:"Quarterly"}),s.jsx(W,{value:"biannual",children:"Every 6 months"}),s.jsx(W,{value:"annual",children:"Annually"})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:u.is_mandatory,onChange:g=>d({...u,is_mandatory:g.target.checked})}),s.jsx("span",{className:"text-sm",children:"Mandatory"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:u.auto_assign_on_hire,onChange:g=>d({...u,auto_assign_on_hire:g.target.checked})}),s.jsx("span",{className:"text-sm",children:"Auto-assign new hires"})]})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsx(I,{onClick:f,disabled:!u.course_id,children:"Create Assignment"})]})]})})]})}function MFe(){const e=oi(),[t,r]=x.useState(""),[n,a]=x.useState(""),[i,o]=x.useState(!1),l=async c=>{c.preventDefault(),o(!0);try{const{data:u,error:d}=await M.auth.signInWithPassword({email:t,password:n});if(d)throw d;const{data:f,error:h}=await M.from("platform_users").select("id, role, status").eq("user_id",u.user.id).eq("status","active").maybeSingle();if(h)throw h;if(!f)throw await M.auth.signOut(),new Error("You do not have platform admin access");await M.from("platform_users").update({last_login_at:new Date().toISOString()}).eq("id",f.id),oe({title:"Welcome back",description:"You have been logged in to Platform Admin."}),e("/platform/orgs")}catch(u){oe({title:"Login failed",description:u.message||"Invalid credentials or access denied",variant:"destructive"})}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:s.jsxs(K,{className:"w-full max-w-md border-slate-700 bg-slate-800/50 backdrop-blur",children:[s.jsxs(de,{className:"text-center space-y-4",children:[s.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(dn,{className:"h-8 w-8 text-primary"})}),s.jsxs("div",{children:[s.jsx(me,{className:"text-2xl text-white",children:"Platform Admin"}),s.jsx(Be,{className:"text-slate-400",children:"Sign in to access the control plane"})]})]}),s.jsxs(Y,{children:[s.jsxs("form",{onSubmit:l,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"email",className:"text-slate-200",children:"Email"}),s.jsx(J,{id:"email",type:"email",placeholder:"admin@platform.com",value:t,onChange:c=>r(c.target.value),required:!0,className:"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{htmlFor:"password",className:"text-slate-200",children:"Password"}),s.jsx(J,{id:"password",type:"password",placeholder:"",value:n,onChange:c=>a(c.target.value),required:!0,className:"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400"})]}),s.jsx(I,{type:"submit",className:"w-full",disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign in to Platform"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-sm text-slate-400",children:"This is a restricted area for platform administrators only."})})]})]})})}const Y4=[{label:"Organisations",icon:ux,href:"/platform/orgs"},{label:"Plans",icon:dx,href:"/platform/plans"},{label:"Platform Users",icon:Er,href:"/platform/users"},{label:"Audit Logs",icon:ut,href:"/platform/audit"},{label:"Settings",icon:mh,href:"/platform/settings"}];function Pl({children:e}){const[t,r]=x.useState(!1),[n,a]=x.useState(!1),i=Iu(),o=oi(),l=async()=>{await M.auth.signOut(),oe({title:"Logged out",description:"You have been logged out of Platform Admin."}),o("/platform/login")},c=({item:u})=>{const d=i.pathname.startsWith(u.href),f=u.icon,h=s.jsxs(On,{to:u.href,onClick:()=>a(!1),className:Q("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",d?"bg-primary text-primary-foreground":"text-slate-300 hover:text-white hover:bg-slate-700/50"),children:[s.jsx(f,{className:"h-5 w-5 flex-shrink-0"}),!t&&s.jsx("span",{className:"font-medium text-sm",children:u.label})]});return t?s.jsxs(YF,{delayDuration:0,children:[s.jsx(XF,{asChild:!0,children:h}),s.jsx(Ck,{side:"right",className:"font-medium",children:u.label})]}):h};return s.jsxs("div",{className:"min-h-screen bg-slate-900",children:[s.jsx("div",{className:"bg-amber-500/10 border-b border-amber-500/20 px-4 py-2",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-400 text-sm font-medium",children:[s.jsx(dn,{className:"h-4 w-4"}),s.jsx("span",{children:"Platform Admin Control Plane"})]})}),s.jsxs("aside",{className:Q("fixed left-0 top-10 z-40 h-[calc(100vh-40px)] bg-slate-800 border-r border-slate-700 hidden md:flex flex-col transition-all duration-300",t?"w-16":"w-64"),children:[s.jsxs("div",{className:Q("flex items-center h-16 px-4 border-b border-slate-700",t?"justify-center":"gap-3"),children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary flex items-center justify-center flex-shrink-0",children:s.jsx(dn,{className:"h-4 w-4 text-primary-foreground"})}),!t&&s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-semibold text-white text-sm",children:"Social Plus"}),s.jsx("span",{className:"text-xs text-slate-400",children:"Platform Admin"})]})]}),s.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1",children:Y4.map(u=>s.jsx(c,{item:u},u.href))}),s.jsx("div",{className:"px-3 py-4 border-t border-slate-700",children:s.jsxs(I,{variant:"ghost",onClick:l,className:Q("w-full text-slate-300 hover:text-white hover:bg-slate-700/50",t?"justify-center px-0":"justify-start"),children:[s.jsx(p2,{className:"h-5 w-5"}),!t&&s.jsx("span",{className:"ml-3",children:"Logout"})]})}),s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>r(!t),className:"absolute -right-3 top-20 h-6 w-6 rounded-full border border-slate-600 bg-slate-800 text-slate-300 hover:bg-slate-700",children:t?s.jsx(Po,{className:"h-3 w-3"}):s.jsx(hk,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"md:hidden flex items-center justify-between h-14 px-4 bg-slate-800 border-b border-slate-700",children:[s.jsx(I,{variant:"ghost",size:"icon",onClick:()=>a(!n),className:"text-slate-300",children:s.jsx(sF,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dn,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"font-semibold text-white",children:"Platform Admin"})]}),s.jsx(I,{variant:"ghost",size:"icon",onClick:l,className:"text-slate-300",children:s.jsx(p2,{className:"h-5 w-5"})})]}),n&&s.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>a(!1),children:s.jsxs("div",{className:"w-64 h-full bg-slate-800 border-r border-slate-700",onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center gap-3 h-16 px-4 border-b border-slate-700",children:[s.jsx(dn,{className:"h-6 w-6 text-primary"}),s.jsx("span",{className:"font-semibold text-white",children:"Platform Admin"})]}),s.jsx("nav",{className:"px-3 py-4 space-y-1",children:Y4.map(u=>s.jsx(c,{item:u},u.href))})]})}),s.jsx("main",{className:Q("min-h-[calc(100vh-40px)] transition-all duration-300 pt-14 md:pt-0",t?"md:ml-16":"md:ml-64"),children:s.jsx("div",{className:"p-4 md:p-6",children:e})})]})}function Vh(){const[e,t]=x.useState(null),[r,n]=x.useState(!0),a=oi();x.useEffect(()=>{(async()=>{try{const{data:{session:d}}=await M.auth.getSession();if(!(d!=null&&d.user)){a("/platform/login");return}const{data:f,error:h}=await M.from("platform_users").select("*").eq("user_id",d.user.id).eq("status","active").maybeSingle();if(h||!f){a("/platform/login");return}t(f)}catch(d){console.error("Platform auth check failed:",d),a("/platform/login")}finally{n(!1)}})();const{data:{subscription:u}}=M.auth.onAuthStateChange(d=>{d==="SIGNED_OUT"&&(t(null),a("/platform/login"))});return()=>u.unsubscribe()},[a]);const i=(e==null?void 0:e.role)==="owner",o=(e==null?void 0:e.role)==="admin"||i,l=i||(e==null?void 0:e.role)==="admin";return{platformUser:e,loading:r,isOwner:i,isAdmin:o,canImpersonate:l}}function Al({children:e}){const{loading:t,platformUser:r}=Vh();return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("p",{className:"text-slate-400",children:"Verifying platform access..."})]})}):r?s.jsx(s.Fragment,{children:e}):null}const $Fe={trial:"bg-blue-500/10 text-blue-500 border-blue-500/20",active:"bg-green-500/10 text-green-500 border-green-500/20",suspended:"bg-red-500/10 text-red-500 border-red-500/20",readonly:"bg-amber-500/10 text-amber-500 border-amber-500/20"};function IFe(){const[e,t]=x.useState(""),[r,n]=x.useState("all"),a=ii(),{data:i,isLoading:o}=sr({queryKey:["platform-organisations",e,r],queryFn:async()=>{let c=M.from("organisations").select(`
          *,
          organisation_subscriptions (
            id,
            status,
            trial_ends_at,
            plans (
              id,
              name
            )
          )
        `).order("created_at",{ascending:!1});e&&(c=c.or(`legal_name.ilike.%${e}%,trading_name.ilike.%${e}%`)),r!=="all"&&(c=c.eq("status",r));const{data:u,error:d}=await c;if(d)throw d;return u}}),l=Wt({mutationFn:async({id:c,status:u})=>{const{error:d}=await M.from("organisations").update({status:u}).eq("id",c);if(d)throw d},onSuccess:()=>{a.invalidateQueries({queryKey:["platform-organisations"]}),oe({title:"Organisation status updated"})},onError:c=>{oe({title:"Failed to update status",description:c.message,variant:"destructive"})}});return s.jsx(Al,{children:s.jsx(Pl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Organisations"}),s.jsx("p",{className:"text-slate-400 mt-1",children:"Manage tenant organisations"})]}),s.jsxs(I,{className:"gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Add Organisation"]})]}),s.jsx(K,{className:"bg-slate-800 border-slate-700",children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),s.jsx(J,{placeholder:"Search organisations...",value:e,onChange:c=>t(c.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-white"})]}),s.jsxs(Me,{value:r,onValueChange:c=>n(c),children:[s.jsx(Te,{className:"w-[180px] bg-slate-700/50 border-slate-600 text-white",children:s.jsx($e,{placeholder:"Filter by status"})}),s.jsxs(De,{children:[s.jsx(W,{value:"all",children:"All Statuses"}),s.jsx(W,{value:"trial",children:"Trial"}),s.jsx(W,{value:"active",children:"Active"}),s.jsx(W,{value:"suspended",children:"Suspended"}),s.jsx(W,{value:"readonly",children:"Read-only"})]})]})]})})}),s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsx(de,{children:s.jsxs(me,{className:"text-white flex items-center gap-2",children:[s.jsx(ux,{className:"h-5 w-5"}),"All Organisations"]})}),s.jsx(Y,{children:o?s.jsx("div",{className:"text-center py-8 text-slate-400",children:"Loading organisations..."}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(re,{className:"text-slate-300",children:"Organisation"}),s.jsx(re,{className:"text-slate-300",children:"Plan"}),s.jsx(re,{className:"text-slate-300",children:"Status"}),s.jsx(re,{className:"text-slate-300",children:"Trial Ends"}),s.jsx(re,{className:"text-slate-300",children:"Created"}),s.jsx(re,{className:"text-slate-300 text-right",children:"Actions"})]})}),s.jsxs(jr,{children:[i==null?void 0:i.map(c=>{var f;const u=(f=c.organisation_subscriptions)==null?void 0:f[0],d=u==null?void 0:u.plans;return s.jsxs(qe,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(Z,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:c.legal_name}),c.trading_name&&s.jsxs("p",{className:"text-sm text-slate-400",children:["t/a ",c.trading_name]})]})}),s.jsx(Z,{className:"text-slate-300",children:(d==null?void 0:d.name)||"No plan"}),s.jsx(Z,{children:s.jsx(ce,{variant:"outline",className:$Fe[c.status],children:c.status})}),s.jsx(Z,{className:"text-slate-300",children:u!=null&&u.trial_ends_at?ne(new Date(u.trial_ends_at),"dd MMM yyyy"):"-"}),s.jsx(Z,{className:"text-slate-300",children:ne(new Date(c.created_at),"dd MMM yyyy")}),s.jsx(Z,{className:"text-right",children:s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",className:"text-slate-300",children:s.jsx(ai,{className:"h-4 w-4"})})}),s.jsxs(ss,{align:"end",children:[s.jsx(st,{asChild:!0,children:s.jsxs(On,{to:`/platform/orgs/${c.id}`,children:[s.jsx(Li,{className:"mr-2 h-4 w-4"}),"View Details"]})}),c.status!=="suspended"&&s.jsxs(st,{onClick:()=>l.mutate({id:c.id,status:"suspended"}),className:"text-red-400",children:[s.jsx(p0,{className:"mr-2 h-4 w-4"}),"Suspend"]}),c.status==="suspended"&&s.jsxs(st,{onClick:()=>l.mutate({id:c.id,status:"active"}),className:"text-green-400",children:[s.jsx(Np,{className:"mr-2 h-4 w-4"}),"Activate"]}),c.status!=="readonly"&&c.status!=="suspended"&&s.jsxs(st,{onClick:()=>l.mutate({id:c.id,status:"readonly"}),className:"text-amber-400",children:[s.jsx(du,{className:"mr-2 h-4 w-4"}),"Set Read-only"]})]})]})})]},c.id)}),(i==null?void 0:i.length)===0&&s.jsx(qe,{children:s.jsx(Z,{colSpan:6,className:"text-center py-8 text-slate-400",children:"No organisations found"})})]})]})})]})]})})})}const LFe={trial:"bg-blue-500/10 text-blue-500 border-blue-500/20",active:"bg-green-500/10 text-green-500 border-green-500/20",suspended:"bg-red-500/10 text-red-500 border-red-500/20",readonly:"bg-amber-500/10 text-amber-500 border-amber-500/20"},FFe=[{key:"module_hr_core",label:"HR Core",type:"boolean"},{key:"module_onboarding",label:"Onboarding",type:"boolean"},{key:"module_compliance",label:"Compliance",type:"boolean"},{key:"module_docs",label:"Documents",type:"boolean"},{key:"module_leave",label:"Leave Management",type:"boolean"},{key:"module_payroll",label:"Payroll",type:"boolean"},{key:"module_reporting",label:"Reporting",type:"boolean"},{key:"module_lms",label:"LMS",type:"boolean"},{key:"limit_users",label:"User Limit",type:"number"},{key:"limit_employees",label:"Employee Limit",type:"number"},{key:"limit_storage_gb",label:"Storage (GB)",type:"number"},{key:"audit_export_enabled",label:"Audit Export",type:"boolean"}];function UFe(){var g,p,v,b,y,w,_,j;const{id:e}=y3(),t=ii(),{canImpersonate:r}=Vh(),{data:n,isLoading:a}=sr({queryKey:["platform-organisation",e],queryFn:async()=>{const{data:N,error:S}=await M.from("organisations").select(`
          *,
          organisation_subscriptions (
            id,
            status,
            trial_ends_at,
            start_date,
            end_date,
            plans (
              id,
              name,
              description
            )
          )
        `).eq("id",e).single();if(S)throw S;return N},enabled:!!e}),{data:i}=sr({queryKey:["platform-plans"],queryFn:async()=>{const{data:N,error:S}=await M.from("plans").select("*").eq("status","active").order("name");if(S)throw S;return N}}),{data:o}=sr({queryKey:["platform-plan-entitlements",(v=(p=(g=n==null?void 0:n.organisation_subscriptions)==null?void 0:g[0])==null?void 0:p.plans)==null?void 0:v.id],queryFn:async()=>{var C,P,A;const N=(A=(P=(C=n==null?void 0:n.organisation_subscriptions)==null?void 0:C[0])==null?void 0:P.plans)==null?void 0:A.id;if(!N)return[];const{data:S,error:k}=await M.from("plan_entitlements").select("*").eq("plan_id",N);if(k)throw k;return S},enabled:!!((w=(y=(b=n==null?void 0:n.organisation_subscriptions)==null?void 0:b[0])==null?void 0:y.plans)!=null&&w.id)}),{data:l}=sr({queryKey:["platform-org-entitlements",e],queryFn:async()=>{const{data:N,error:S}=await M.from("organisation_entitlements").select("*").eq("organisation_id",e);if(S)throw S;return N},enabled:!!e}),{data:c}=sr({queryKey:["platform-audit-logs",e],queryFn:async()=>{const{data:N,error:S}=await M.from("platform_audit_logs").select("*").eq("organisation_id",e).order("created_at",{ascending:!1}).limit(20);if(S)throw S;return N},enabled:!!e}),u=Wt({mutationFn:async N=>{const{error:S}=await M.from("organisations").update({status:N}).eq("id",e);if(S)throw S},onSuccess:()=>{t.invalidateQueries({queryKey:["platform-organisation",e]}),oe({title:"Status updated successfully"})},onError:N=>{oe({title:"Failed to update status",description:N.message,variant:"destructive"})}}),d=Wt({mutationFn:async({key:N,value:S})=>{const k=l==null?void 0:l.find(C=>C.key===N);if(k){const{error:C}=await M.from("organisation_entitlements").update({value:S}).eq("id",k.id);if(C)throw C}else{const{error:C}=await M.from("organisation_entitlements").insert({organisation_id:e,key:N,value:S});if(C)throw C}},onSuccess:()=>{t.invalidateQueries({queryKey:["platform-org-entitlements",e]}),oe({title:"Entitlement updated"})},onError:N=>{oe({title:"Failed to update entitlement",description:N.message,variant:"destructive"})}}),f=N=>{const S=l==null?void 0:l.find(C=>C.key===N);if(S)return S.value;const k=o==null?void 0:o.find(C=>C.key===N);return(k==null?void 0:k.value)||"false"};if(a)return s.jsx(Al,{children:s.jsx(Pl,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(et,{className:"h-8 w-8 animate-spin text-primary"})})})});if(!n)return s.jsx(Al,{children:s.jsx(Pl,{children:s.jsx("div",{className:"text-center py-16",children:s.jsx("p",{className:"text-slate-400",children:"Organisation not found"})})})});const h=(_=n.organisation_subscriptions)==null?void 0:_[0],m=h==null?void 0:h.plans;return s.jsx(Al,{children:s.jsx(Pl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(I,{variant:"ghost",size:"icon",asChild:!0,className:"text-slate-300",children:s.jsx(On,{to:"/platform/orgs",children:s.jsx(Qc,{className:"h-5 w-5"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:n.legal_name}),s.jsx(ce,{variant:"outline",className:LFe[n.status],children:n.status})]}),n.trading_name&&s.jsxs("p",{className:"text-slate-400 mt-1",children:["t/a ",n.trading_name]})]})]}),s.jsxs(_n,{defaultValue:"overview",className:"space-y-6",children:[s.jsxs(mn,{className:"bg-slate-800 border border-slate-700",children:[s.jsx(Ue,{value:"overview",children:"Overview"}),s.jsx(Ue,{value:"subscription",children:"Subscription"}),s.jsx(Ue,{value:"entitlements",children:"Entitlements"}),s.jsx(Ue,{value:"audit",children:"Audit Log"}),s.jsx(Ue,{value:"support",children:"Support"})]}),s.jsxs(tt,{value:"overview",className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsx(de,{className:"pb-2",children:s.jsx(Be,{className:"text-slate-400",children:"Status"})}),s.jsx(Y,{children:s.jsxs(Me,{value:n.status,onValueChange:N=>u.mutate(N),children:[s.jsx(Te,{className:"bg-slate-700/50 border-slate-600 text-white",children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"trial",children:"Trial"}),s.jsx(W,{value:"active",children:"Active"}),s.jsx(W,{value:"suspended",children:"Suspended"}),s.jsx(W,{value:"readonly",children:"Read-only"})]})]})})]}),s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsx(de,{className:"pb-2",children:s.jsx(Be,{className:"text-slate-400",children:"Current Plan"})}),s.jsx(Y,{children:s.jsx("p",{className:"text-xl font-semibold text-white",children:(m==null?void 0:m.name)||"No plan"})})]}),s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsx(de,{className:"pb-2",children:s.jsx(Be,{className:"text-slate-400",children:"Trial Ends"})}),s.jsx(Y,{children:s.jsx("p",{className:"text-xl font-semibold text-white",children:h!=null&&h.trial_ends_at?ne(new Date(h.trial_ends_at),"dd MMM yyyy"):"N/A"})})]}),s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsx(de,{className:"pb-2",children:s.jsx(Be,{className:"text-slate-400",children:"Created"})}),s.jsx(Y,{children:s.jsx("p",{className:"text-xl font-semibold text-white",children:ne(new Date(n.created_at),"dd MMM yyyy")})})]})]}),s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsx(de,{children:s.jsx(me,{className:"text-white",children:"Organisation Details"})}),s.jsx(Y,{className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-400",children:"Legal Name"}),s.jsx("p",{className:"text-white",children:n.legal_name})]}),s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-400",children:"Trading Name"}),s.jsx("p",{className:"text-white",children:n.trading_name||"-"})]}),s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-400",children:"Timezone"}),s.jsx("p",{className:"text-white",children:n.timezone||"Australia/Sydney"})]}),s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-400",children:"Organisation ID"}),s.jsx("p",{className:"text-white font-mono text-sm",children:n.id})]})]})})]})]}),s.jsx(tt,{value:"subscription",className:"space-y-6",children:s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsx(de,{children:s.jsxs(me,{className:"text-white flex items-center gap-2",children:[s.jsx(dx,{className:"h-5 w-5"}),"Subscription Management"]})}),s.jsx(Y,{className:"space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-400",children:"Assigned Plan"}),s.jsxs(Me,{value:m==null?void 0:m.id,onValueChange:N=>{oe({title:"Plan change will be implemented"})},children:[s.jsx(Te,{className:"mt-2 bg-slate-700/50 border-slate-600 text-white",children:s.jsx($e,{placeholder:"Select a plan"})}),s.jsx(De,{children:i==null?void 0:i.map(N=>s.jsx(W,{value:N.id,children:N.name},N.id))})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-400",children:"Trial End Date"}),s.jsx(J,{type:"date",value:((j=h==null?void 0:h.trial_ends_at)==null?void 0:j.split("T")[0])||"",className:"mt-2 bg-slate-700/50 border-slate-600 text-white",onChange:N=>{oe({title:"Trial date change will be implemented"})}})]}),s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-400",children:"Subscription Status"}),s.jsx("p",{className:"mt-2 text-white capitalize",children:(h==null?void 0:h.status)||"None"})]})]})]})})]})}),s.jsx(tt,{value:"entitlements",className:"space-y-6",children:s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(de,{children:[s.jsxs(me,{className:"text-white flex items-center gap-2",children:[s.jsx(mh,{className:"h-5 w-5"}),"Feature Entitlements"]}),s.jsx(Be,{className:"text-slate-400",children:"Configure module access and limits. Overrides apply on top of the plan defaults."})]}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-6",children:FFe.map(N=>{const S=f(N.key),k=l==null?void 0:l.some(C=>C.key===N.key);return s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-700 last:border-0",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium",children:N.label}),s.jsx("p",{className:"text-sm text-slate-400",children:k?s.jsx("span",{className:"text-amber-400",children:"Override active"}):"Using plan default"})]}),s.jsx("div",{className:"flex items-center gap-4",children:N.type==="boolean"?s.jsx(An,{checked:S==="true",onCheckedChange:C=>{d.mutate({key:N.key,value:C?"true":"false"})}}):s.jsx(J,{type:"number",value:S,onChange:C=>{d.mutate({key:N.key,value:C.target.value})},className:"w-24 bg-slate-700/50 border-slate-600 text-white"})})]},N.key)})})})]})}),s.jsx(tt,{value:"audit",className:"space-y-6",children:s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsx(de,{children:s.jsxs(me,{className:"text-white flex items-center gap-2",children:[s.jsx(ut,{className:"h-5 w-5"}),"Audit Log"]})}),s.jsx(Y,{children:(c==null?void 0:c.length)===0?s.jsx("p",{className:"text-slate-400 text-center py-8",children:"No audit logs found"}):s.jsx("div",{className:"space-y-3",children:c==null?void 0:c.map(N=>s.jsx("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-slate-700/50",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-medium",children:N.action}),s.jsxs("p",{className:"text-sm text-slate-400",children:["Target: ",N.target_type," ",N.target_id&&`(${N.target_id})`]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:ne(new Date(N.created_at),"dd MMM yyyy HH:mm:ss")})]})},N.id))})})]})}),s.jsx(tt,{value:"support",className:"space-y-6",children:s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(de,{children:[s.jsxs(me,{className:"text-white flex items-center gap-2",children:[s.jsx(dn,{className:"h-5 w-5"}),"Support Impersonation"]}),s.jsx(Be,{className:"text-slate-400",children:"Start a support session to access this organisation's HRMS as an admin. All actions will be logged."})]}),s.jsx(Y,{children:r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-400",children:"Reason for impersonation"}),s.jsx(J,{placeholder:"e.g., Customer support ticket #12345",className:"mt-2 bg-slate-700/50 border-slate-600 text-white"})]}),s.jsxs(I,{className:"gap-2",children:[s.jsx(dn,{className:"h-4 w-4"}),"Start Support Session"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Session will automatically expire after 30 minutes."})]}):s.jsx("p",{className:"text-amber-400",children:"You do not have permission to start impersonation sessions."})})]})})]})]})})})}const BFe=[{key:"module_hr_core",label:"HR Core",type:"boolean"},{key:"module_onboarding",label:"Onboarding",type:"boolean"},{key:"module_compliance",label:"Compliance",type:"boolean"},{key:"module_docs",label:"Documents",type:"boolean"},{key:"module_leave",label:"Leave Management",type:"boolean"},{key:"module_payroll",label:"Payroll",type:"boolean"},{key:"module_reporting",label:"Reporting",type:"boolean"},{key:"module_lms",label:"LMS",type:"boolean"},{key:"limit_users",label:"User Limit",type:"number"},{key:"limit_employees",label:"Employee Limit",type:"number"},{key:"limit_storage_gb",label:"Storage (GB)",type:"number"},{key:"audit_export_enabled",label:"Audit Export",type:"boolean"}];function zFe(){const[e,t]=x.useState(null),[r,n]=x.useState(!1),[a,i]=x.useState(""),[o,l]=x.useState(""),c=ii(),{isOwner:u}=Vh(),{data:d,isLoading:f}=sr({queryKey:["platform-plans-list"],queryFn:async()=>{const{data:b,error:y}=await M.from("plans").select(`
          *,
          plan_entitlements (*),
          organisation_subscriptions (count)
        `).order("name");if(y)throw y;return b}}),{data:h}=sr({queryKey:["platform-plan-entitlements",e],queryFn:async()=>{if(!e)return[];const{data:b,error:y}=await M.from("plan_entitlements").select("*").eq("plan_id",e);if(y)throw y;return b},enabled:!!e}),m=Wt({mutationFn:async()=>{const{data:b,error:y}=await M.from("plans").insert({name:a,description:o,status:"active"}).select().single();if(y)throw y;return b},onSuccess:()=>{c.invalidateQueries({queryKey:["platform-plans-list"]}),n(!1),i(""),l(""),oe({title:"Plan created successfully"})},onError:b=>{oe({title:"Failed to create plan",description:b.message,variant:"destructive"})}}),g=Wt({mutationFn:async({key:b,value:y})=>{if(!e)return;const w=h==null?void 0:h.find(_=>_.key===b);if(w){const{error:_}=await M.from("plan_entitlements").update({value:y}).eq("id",w.id);if(_)throw _}else{const{error:_}=await M.from("plan_entitlements").insert({plan_id:e,key:b,value:y});if(_)throw _}},onSuccess:()=>{c.invalidateQueries({queryKey:["platform-plan-entitlements",e]}),oe({title:"Entitlement updated"})},onError:b=>{oe({title:"Failed to update",description:b.message,variant:"destructive"})}}),p=b=>{const y=h==null?void 0:h.find(w=>w.key===b);return(y==null?void 0:y.value)||"false"},v=d==null?void 0:d.find(b=>b.id===e);return s.jsx(Al,{children:s.jsx(Pl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Plans"}),s.jsx("p",{className:"text-slate-400 mt-1",children:"Manage subscription plans and entitlements"})]}),u&&s.jsxs($t,{open:r,onOpenChange:n,children:[s.jsx(ev,{asChild:!0,children:s.jsxs(I,{className:"gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Create Plan"]})}),s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Create New Plan"}),s.jsx(Mt,{children:"Add a new subscription plan. You can configure entitlements after creation."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Plan Name"}),s.jsx(J,{value:a,onChange:b=>i(b.target.value),placeholder:"e.g., Enterprise Plus"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Description"}),s.jsx(J,{value:o,onChange:b=>l(b.target.value),placeholder:"Plan description..."})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(I,{onClick:()=>m.mutate(),disabled:!a,children:"Create Plan"})]})]})]})]}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:f?s.jsx("div",{className:"col-span-full text-center py-8 text-slate-400",children:"Loading plans..."}):d==null?void 0:d.map(b=>{var w,_,j;const y=((_=(w=b.organisation_subscriptions)==null?void 0:w[0])==null?void 0:_.count)||0;return s.jsxs(K,{className:"bg-slate-800 border-slate-700 cursor-pointer hover:border-slate-600 transition-colors",onClick:()=>t(b.id),children:[s.jsx(de,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:s.jsx(dx,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx(me,{className:"text-white",children:b.name}),s.jsxs(Be,{className:"text-slate-400",children:[y," organisation",y!==1?"s":""]})]})]}),s.jsx(ce,{variant:"outline",className:b.status==="active"?"border-green-500/20 text-green-500":"border-slate-500/20 text-slate-400",children:b.status})]})}),s.jsxs(Y,{children:[s.jsx("p",{className:"text-sm text-slate-400 line-clamp-2",children:b.description||"No description"}),s.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-slate-500",children:[s.jsx(mh,{className:"h-4 w-4"}),((j=b.plan_entitlements)==null?void 0:j.length)||0," entitlements configured"]})]})]},b.id)})}),s.jsx(Oo,{open:!!e,onOpenChange:b=>!b&&t(null),children:s.jsxs(Ui,{className:"w-full sm:max-w-lg bg-slate-800 border-slate-700",children:[s.jsxs(Bi,{children:[s.jsxs(zi,{className:"text-white flex items-center gap-2",children:[s.jsx(dx,{className:"h-5 w-5"}),v==null?void 0:v.name," Entitlements"]}),s.jsx(To,{className:"text-slate-400",children:"Configure default entitlements for this plan. Changes affect all organisations on this plan."})]}),s.jsxs("div",{className:"mt-6 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20 text-amber-400 text-sm mb-4",children:[s.jsx(ir,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{children:"Changes will affect all organisations using this plan"})]}),BFe.map(b=>{const y=p(b.key);return s.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-700 last:border-0",children:[s.jsx(q,{className:"text-white",children:b.label}),b.type==="boolean"?s.jsx(An,{checked:y==="true",onCheckedChange:w=>{g.mutate({key:b.key,value:w?"true":"false"})},disabled:!u}):s.jsx(J,{type:"number",value:y,onChange:w=>{g.mutate({key:b.key,value:w.target.value})},className:"w-24 bg-slate-700/50 border-slate-600 text-white",disabled:!u})]},b.key)})]})]})})]})})})}const X4={owner:"bg-purple-500/10 text-purple-400 border-purple-500/20",admin:"bg-blue-500/10 text-blue-400 border-blue-500/20",support:"bg-green-500/10 text-green-400 border-green-500/20",support_readonly:"bg-slate-500/10 text-slate-400 border-slate-500/20"};function VFe(){const[e,t]=x.useState(!1),[r,n]=x.useState(""),[a,i]=x.useState(""),[o,l]=x.useState("support_readonly"),c=ii(),{isOwner:u}=Vh(),{data:d,isLoading:f}=sr({queryKey:["platform-users-list"],queryFn:async()=>{const{data:g,error:p}=await M.from("platform_users").select("*").order("created_at",{ascending:!1});if(p)throw p;return g}}),h=Wt({mutationFn:async({id:g,status:p})=>{const{error:v}=await M.from("platform_users").update({status:p}).eq("id",g);if(v)throw v},onSuccess:()=>{c.invalidateQueries({queryKey:["platform-users-list"]}),oe({title:"User status updated"})},onError:g=>{oe({title:"Failed to update user",description:g.message,variant:"destructive"})}}),m=Wt({mutationFn:async({id:g,role:p})=>{const{error:v}=await M.from("platform_users").update({role:p}).eq("id",g);if(v)throw v},onSuccess:()=>{c.invalidateQueries({queryKey:["platform-users-list"]}),oe({title:"User role updated"})},onError:g=>{oe({title:"Failed to update role",description:g.message,variant:"destructive"})}});return s.jsx(Al,{children:s.jsx(Pl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Platform Users"}),s.jsx("p",{className:"text-slate-400 mt-1",children:"Manage platform administrator access"})]}),u&&s.jsxs($t,{open:e,onOpenChange:t,children:[s.jsx(ev,{asChild:!0,children:s.jsxs(I,{className:"gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Invite User"]})}),s.jsxs(Tt,{children:[s.jsxs(Dt,{children:[s.jsx(Rt,{children:"Invite Platform User"}),s.jsx(Mt,{children:"Add a new platform administrator. They will need an existing auth account."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Name"}),s.jsx(J,{value:a,onChange:g=>i(g.target.value),placeholder:"Full name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Email"}),s.jsx(J,{type:"email",value:r,onChange:g=>n(g.target.value),placeholder:"admin@example.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Role"}),s.jsxs(Me,{value:o,onValueChange:g=>l(g),children:[s.jsx(Te,{children:s.jsx($e,{})}),s.jsxs(De,{children:[s.jsx(W,{value:"admin",children:"Admin"}),s.jsx(W,{value:"support",children:"Support"}),s.jsx(W,{value:"support_readonly",children:"Support (Read-only)"})]})]})]})]}),s.jsxs(fr,{children:[s.jsx(I,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(I,{onClick:()=>{oe({title:"User invitation will be implemented via edge function"}),t(!1)},disabled:!r||!a,children:"Send Invite"})]})]})]})]}),s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsx(de,{children:s.jsxs(me,{className:"text-white flex items-center gap-2",children:[s.jsx(Er,{className:"h-5 w-5"}),"All Platform Users"]})}),s.jsx(Y,{children:f?s.jsx("div",{className:"text-center py-8 text-slate-400",children:"Loading users..."}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(re,{className:"text-slate-300",children:"User"}),s.jsx(re,{className:"text-slate-300",children:"Role"}),s.jsx(re,{className:"text-slate-300",children:"Status"}),s.jsx(re,{className:"text-slate-300",children:"Last Login"}),s.jsx(re,{className:"text-slate-300 text-right",children:"Actions"})]})}),s.jsxs(jr,{children:[d==null?void 0:d.map(g=>s.jsxs(qe,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(Z,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-600 flex items-center justify-center",children:s.jsx(dn,{className:"h-5 w-5 text-slate-300"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:g.name}),s.jsx("p",{className:"text-sm text-slate-400",children:g.email})]})]})}),s.jsx(Z,{children:u&&g.role!=="owner"?s.jsxs(Me,{value:g.role,onValueChange:p=>m.mutate({id:g.id,role:p}),children:[s.jsx(Te,{className:"w-36 bg-transparent border-0 text-white",children:s.jsx(ce,{variant:"outline",className:X4[g.role],children:g.role})}),s.jsxs(De,{children:[s.jsx(W,{value:"admin",children:"Admin"}),s.jsx(W,{value:"support",children:"Support"}),s.jsx(W,{value:"support_readonly",children:"Support (Read-only)"})]})]}):s.jsx(ce,{variant:"outline",className:X4[g.role],children:g.role})}),s.jsx(Z,{children:s.jsx(ce,{variant:"outline",className:g.status==="active"?"border-green-500/20 text-green-400":"border-red-500/20 text-red-400",children:g.status})}),s.jsx(Z,{className:"text-slate-300",children:g.last_login_at?ne(new Date(g.last_login_at),"dd MMM yyyy HH:mm"):"Never"}),s.jsx(Z,{className:"text-right",children:u&&g.role!=="owner"&&s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",className:"text-slate-300",children:s.jsx(ai,{className:"h-4 w-4"})})}),s.jsx(ss,{align:"end",children:g.status==="active"?s.jsxs(st,{onClick:()=>h.mutate({id:g.id,status:"disabled"}),className:"text-red-400",children:[s.jsx(hx,{className:"mr-2 h-4 w-4"}),"Disable User"]}):s.jsxs(st,{onClick:()=>h.mutate({id:g.id,status:"active"}),className:"text-green-400",children:[s.jsx(lF,{className:"mr-2 h-4 w-4"}),"Enable User"]})})]})})]},g.id)),(d==null?void 0:d.length)===0&&s.jsx(qe,{children:s.jsx(Z,{colSpan:5,className:"text-center py-8 text-slate-400",children:"No platform users found"})})]})]})})]})]})})})}function qFe(){const[e,t]=x.useState(""),[r,n]=x.useState("all"),[a,i]=x.useState(""),[o,l]=x.useState(""),{isOwner:c}=Vh(),{data:u,isLoading:d}=sr({queryKey:["platform-audit-logs-all",e,r,a,o],queryFn:async()=>{let m=M.from("platform_audit_logs").select(`
          *,
          platform_users!platform_audit_logs_actor_platform_user_id_fkey (
            name,
            email
          ),
          organisations (
            legal_name
          )
        `).order("created_at",{ascending:!1}).limit(100);r!=="all"&&(m=m.ilike("action",`%${r}%`)),a&&(m=m.gte("created_at",a)),o&&(m=m.lte("created_at",`${o}T23:59:59`));const{data:g,error:p}=await m;if(p)throw p;return g}}),f=u==null?void 0:u.filter(m=>{var p,v,b,y,w,_;if(!e)return!0;const g=e.toLowerCase();return((p=m.action)==null?void 0:p.toLowerCase().includes(g))||((v=m.target_type)==null?void 0:v.toLowerCase().includes(g))||((y=(b=m.platform_users)==null?void 0:b.name)==null?void 0:y.toLowerCase().includes(g))||((_=(w=m.organisations)==null?void 0:w.legal_name)==null?void 0:_.toLowerCase().includes(g))}),h=()=>{if(!(f!=null&&f.length)){oe({title:"No data to export",variant:"destructive"});return}const m=["Date","Actor","Action","Target Type","Target ID","Organisation"],g=f.map(w=>{var _,j;return[ne(new Date(w.created_at),"yyyy-MM-dd HH:mm:ss"),((_=w.platform_users)==null?void 0:_.name)||"System",w.action,w.target_type||"",w.target_id||"",((j=w.organisations)==null?void 0:j.legal_name)||""]}),p=[m,...g].map(w=>w.join(",")).join(`
`),v=new Blob([p],{type:"text/csv"}),b=URL.createObjectURL(v),y=document.createElement("a");y.href=b,y.download=`audit-logs-${ne(new Date,"yyyy-MM-dd")}.csv`,y.click(),URL.revokeObjectURL(b),oe({title:"Audit logs exported"})};return s.jsx(Al,{children:s.jsx(Pl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Audit Logs"}),s.jsx("p",{className:"text-slate-400 mt-1",children:"View platform-wide audit trail"})]}),c&&s.jsxs(I,{onClick:h,variant:"outline",className:"gap-2",children:[s.jsx(As,{className:"h-4 w-4"}),"Export CSV"]})]}),s.jsx(K,{className:"bg-slate-800 border-slate-700",children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),s.jsx(J,{placeholder:"Search logs...",value:e,onChange:m=>t(m.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-white"})]}),s.jsxs(Me,{value:r,onValueChange:n,children:[s.jsxs(Te,{className:"w-[180px] bg-slate-700/50 border-slate-600 text-white",children:[s.jsx(m0,{className:"mr-2 h-4 w-4"}),s.jsx($e,{placeholder:"Filter action"})]}),s.jsxs(De,{children:[s.jsx(W,{value:"all",children:"All Actions"}),s.jsx(W,{value:"create",children:"Create"}),s.jsx(W,{value:"update",children:"Update"}),s.jsx(W,{value:"delete",children:"Delete"}),s.jsx(W,{value:"impersonate",children:"Impersonate"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{type:"date",value:a,onChange:m=>i(m.target.value),className:"bg-slate-700/50 border-slate-600 text-white",placeholder:"From"}),s.jsx(J,{type:"date",value:o,onChange:m=>l(m.target.value),className:"bg-slate-700/50 border-slate-600 text-white",placeholder:"To"})]})]})})}),s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsx(de,{children:s.jsxs(me,{className:"text-white flex items-center gap-2",children:[s.jsx(ut,{className:"h-5 w-5"}),"Audit Trail"]})}),s.jsx(Y,{children:d?s.jsx("div",{className:"text-center py-8 text-slate-400",children:"Loading audit logs..."}):s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(re,{className:"text-slate-300",children:"Timestamp"}),s.jsx(re,{className:"text-slate-300",children:"Actor"}),s.jsx(re,{className:"text-slate-300",children:"Action"}),s.jsx(re,{className:"text-slate-300",children:"Target"}),s.jsx(re,{className:"text-slate-300",children:"Organisation"})]})}),s.jsxs(jr,{children:[f==null?void 0:f.map(m=>{var g,p,v;return s.jsxs(qe,{className:"border-slate-700 hover:bg-slate-700/50",children:[s.jsx(Z,{className:"text-slate-300 font-mono text-sm",children:ne(new Date(m.created_at),"dd MMM yyyy HH:mm:ss")}),s.jsx(Z,{children:s.jsxs("div",{children:[s.jsx("p",{className:"text-white",children:((g=m.platform_users)==null?void 0:g.name)||"System"}),s.jsx("p",{className:"text-xs text-slate-400",children:((p=m.platform_users)==null?void 0:p.email)||""})]})}),s.jsx(Z,{children:s.jsx("span",{className:"px-2 py-1 rounded bg-slate-700 text-slate-200 text-sm",children:m.action})}),s.jsx(Z,{className:"text-slate-300",children:m.target_type&&s.jsxs("span",{children:[m.target_type,m.target_id&&s.jsxs("span",{className:"text-slate-500 text-xs ml-1",children:["(",m.target_id.slice(0,8),"...)"]})]})}),s.jsx(Z,{className:"text-slate-300",children:((v=m.organisations)==null?void 0:v.legal_name)||"-"})]},m.id)}),(f==null?void 0:f.length)===0&&s.jsx(qe,{children:s.jsx(Z,{colSpan:5,className:"text-center py-8 text-slate-400",children:"No audit logs found"})})]})]})})]})]})})})}function WFe(){const{isOwner:e}=Vh(),t=()=>{oe({title:"Settings saved",description:"Platform settings have been updated."})};return s.jsx(Al,{children:s.jsx(Pl,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Platform Settings"}),s.jsx("p",{className:"text-slate-400 mt-1",children:"Configure global platform settings"})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(de,{children:[s.jsxs(me,{className:"text-white flex items-center gap-2",children:[s.jsx(xt,{className:"h-5 w-5"}),"Trial Settings"]}),s.jsx(Be,{className:"text-slate-400",children:"Configure default trial period for new organisations"})]}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{className:"text-slate-200",children:"Default Trial Length (days)"}),s.jsx(J,{type:"number",defaultValue:14,className:"bg-slate-700/50 border-slate-600 text-white",disabled:!e})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-200",children:"Auto-suspend on trial expiry"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Automatically suspend orgs when trial ends"})]}),s.jsx(An,{defaultChecked:!0,disabled:!e})]})]})]}),s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(de,{children:[s.jsxs(me,{className:"text-white flex items-center gap-2",children:[s.jsx(dn,{className:"h-5 w-5"}),"Security Settings"]}),s.jsx(Be,{className:"text-slate-400",children:"Configure platform security options"})]}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{className:"text-slate-200",children:"Session Timeout (minutes)"}),s.jsx(J,{type:"number",defaultValue:60,className:"bg-slate-700/50 border-slate-600 text-white",disabled:!e})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{className:"text-slate-200",children:"Impersonation Session Max (minutes)"}),s.jsx(J,{type:"number",defaultValue:30,className:"bg-slate-700/50 border-slate-600 text-white",disabled:!e})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-200",children:"Require MFA for platform users"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Enforce MFA for all platform admins"})]}),s.jsx(An,{disabled:!e})]})]})]}),s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(de,{children:[s.jsxs(me,{className:"text-white flex items-center gap-2",children:[s.jsx(sG,{className:"h-5 w-5"}),"Audit & Retention"]}),s.jsx(Be,{className:"text-slate-400",children:"Configure audit log retention policies"})]}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{className:"text-slate-200",children:"Audit Log Retention (days)"}),s.jsx(J,{type:"number",defaultValue:365,className:"bg-slate-700/50 border-slate-600 text-white",disabled:!e})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-200",children:"Log all API access"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Record all API calls (increases storage)"})]}),s.jsx(An,{disabled:!e})]})]})]}),s.jsxs(K,{className:"bg-slate-800 border-slate-700",children:[s.jsxs(de,{children:[s.jsxs(me,{className:"text-white flex items-center gap-2",children:[s.jsx(mh,{className:"h-5 w-5"}),"Notifications"]}),s.jsx(Be,{className:"text-slate-400",children:"Configure platform notification preferences"})]}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-200",children:"Trial expiry alerts"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Notify when org trials are expiring"})]}),s.jsx(An,{defaultChecked:!0,disabled:!e})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(q,{className:"text-slate-200",children:"Security event alerts"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Notify on suspicious activity"})]}),s.jsx(An,{defaultChecked:!0,disabled:!e})]})]})]})]}),e&&s.jsx("div",{className:"flex justify-end",children:s.jsx(I,{onClick:t,size:"lg",children:"Save Settings"})})]})})})}class HFe{async getAuditPacks(t){const{data:r,error:n}=await M.from("audit_packs").select("*").eq("organisation_id",t).order("created_at",{ascending:!1});if(n)throw console.error("[AuditPackService] Failed to fetch audit packs:",n),n;return(r||[]).map(this.mapAuditPack)}async getAuditPack(t){const{data:r,error:n}=await M.from("audit_packs").select("*").eq("id",t).maybeSingle();if(n)throw console.error("[AuditPackService] Failed to fetch audit pack:",n),n;return r?this.mapAuditPack(r):null}async getPreview(t,r,n,a,i){const o={},l=a||"1900-01-01",c=i||"2100-12-31";switch(t){case"employee_compliance":if(n){const{count:y}=await M.from("employee_certifications").select("*",{count:"exact",head:!0}).eq("employee_id",n);o.certifications=y||0;const{count:w}=await M.from("compliance_overrides").select("*",{count:"exact",head:!0}).eq("employee_id",n);o.overrides=w||0;const{count:_}=await M.from("audit_logs").select("*",{count:"exact",head:!0}).eq("entity_id",n);o.auditLogs=_||0}break;case"organisation_compliance":const{count:u}=await M.from("employees").select("*",{count:"exact",head:!0}).eq("organisation_id",r);o.employees=u||0;const{count:d}=await M.from("employee_certifications").select("*",{count:"exact",head:!0}).eq("organisation_id",r);o.certifications=d||0;const{count:f}=await M.from("compliance_overrides").select("*",{count:"exact",head:!0}).eq("organisation_id",r).gte("created_at",l).lte("created_at",c);o.overrides=f||0;break;case"hr_incidents":let h=M.from("hr_cases").select("*",{count:"exact",head:!0}).eq("organisation_id",r).gte("created_at",l).lte("created_at",c);n&&(h=h.eq("employee_id",n));const{count:m}=await h;o.cases=m||0;break;case"payroll_verification":let g=M.from("timesheets").select("*",{count:"exact",head:!0}).eq("organisation_id",r).gte("date",l).lte("date",c);n&&(g=g.eq("employee_id",n));const{count:p}=await g;o.timesheets=p||0;const{count:v}=await M.from("pay_periods").select("*",{count:"exact",head:!0}).eq("organisation_id",r);o.payPeriods=v||0;const{count:b}=await M.from("payroll_exports").select("*",{count:"exact",head:!0}).eq("organisation_id",r).gte("created_at",l).lte("created_at",c);o.payrollExports=b||0;break}return{pack_type:t,scope:n?"Single Employee":"Organisation-wide",dateRange:a&&i?`${a} to ${i}`:"All time",estimatedRecords:o}}async createAuditPack(t,r){const{data:{user:n}}=await M.auth.getUser();if(!n)throw new Error("Not authenticated");const{data:a}=await M.from("profiles").select("display_name").eq("user_id",n.id).maybeSingle(),i={organisation_id:t,pack_type:r.pack_type,employee_id:r.employee_id||null,date_range_start:r.date_range_start||null,date_range_end:r.date_range_end||null,include_restricted_content:r.include_restricted_content||!1,include_attachments:r.include_attachments||!1,generated_by:n.id,generated_by_name:(a==null?void 0:a.display_name)||n.email,generated_by_email:n.email,status:"pending"},{data:o,error:l}=await M.from("audit_packs").insert(i).select().single();if(l)throw console.error("[AuditPackService] Failed to create audit pack:",l),l;return await Nr.log({action:"document.upload",entityType:"document",entityId:o.id,organisationId:t,afterState:{pack_type:r.pack_type,employee_id:r.employee_id,date_range:`${r.date_range_start} - ${r.date_range_end}`,include_restricted:r.include_restricted_content,action:"audit_pack_requested"}}),this.mapAuditPack(o)}async generatePack(t){const{error:r}=await M.functions.invoke("generate-audit-pack",{body:{packId:t}});if(r)throw console.error("[AuditPackService] Failed to trigger pack generation:",r),r}async getDownloadUrl(t){const{data:r,error:n}=await M.storage.from("audit-packs").createSignedUrl(t,3600);if(n)throw console.error("[AuditPackService] Failed to get download URL:",n),n;return r.signedUrl}mapAuditPack(t){return{id:t.id,organisation_id:t.organisation_id,pack_type:t.pack_type,status:t.status,employee_id:t.employee_id,date_range_start:t.date_range_start,date_range_end:t.date_range_end,include_restricted_content:t.include_restricted_content,include_attachments:t.include_attachments,generated_by:t.generated_by,generated_by_name:t.generated_by_name,generated_by_email:t.generated_by_email,file_urls:t.file_urls||[],summary:t.summary||{},error_message:t.error_message,retention_days:t.retention_days,expires_at:t.expires_at,started_at:t.started_at,completed_at:t.completed_at,created_at:t.created_at,updated_at:t.updated_at}}}const jm=new HFe;function vH(e){const t=ii(),{data:r}=sr({queryKey:["default-organisation"],queryFn:async()=>{const{data:g,error:p}=await M.from("organisations").select("id").limit(1).maybeSingle();if(p)throw p;return g},enabled:!e}),n=r==null?void 0:r.id,{data:a=[],isLoading:i,error:o,refetch:l}=sr({queryKey:["audit-packs",n],queryFn:async()=>n?jm.getAuditPacks(n):[],enabled:!!n,refetchInterval:1e4}),c=Wt({mutationFn:async({packType:g,employeeId:p,dateRangeStart:v,dateRangeEnd:b})=>{if(!n)throw new Error("Organisation not found");return jm.getPreview(g,n,p,v,b)}}),u=Wt({mutationFn:async g=>{if(!n)throw new Error("Organisation not found");const p=await jm.createAuditPack(n,g);return await jm.generatePack(p.id),p},onSuccess:()=>{t.invalidateQueries({queryKey:["audit-packs",n]}),oe({title:"Audit Pack Requested",description:"Your audit pack is being generated. This may take a few moments."})},onError:g=>{console.error("[useAuditPacks] Create failed:",g),oe({title:"Error",description:"Failed to create audit pack. Please try again.",variant:"destructive"})}}),d=Wt({mutationFn:async g=>jm.getDownloadUrl(g),onError:g=>{console.error("[useAuditPacks] Download failed:",g),oe({title:"Error",description:"Failed to get download link. Please try again.",variant:"destructive"})}}),f=a.filter(g=>g.status==="completed"),h=a.filter(g=>g.status==="pending"||g.status==="generating"),m=a.filter(g=>g.status==="failed");return{auditPacks:a,completedPacks:f,pendingPacks:h,failedPacks:m,organisationId:n,isLoading:i,error:o,getPreview:c.mutateAsync,createAuditPack:u.mutateAsync,getDownloadUrl:d.mutateAsync,refetch:l,isCreating:u.isPending,isPreviewing:c.isPending,isDownloading:d.isPending,preview:c.data}}const Fy={employee_compliance:"Employee Compliance Audit Pack",organisation_compliance:"Organisation Compliance Overview",hr_incidents:"HR Incidents & Disciplinary Pack",payroll_verification:"Payroll & Timesheet Verification"},KFe={employee_compliance:"Complete compliance history for a selected employee including certifications, overrides, and audit trail.",organisation_compliance:"Organisation-wide compliance snapshot including all employees, certifications, and enforcement events.",hr_incidents:"HR case register with findings, outcomes, disciplinary actions, and full audit trail.",payroll_verification:"Timesheet verification including approvals, edits, and pay rate history."};function GFe(){const[e,t]=x.useState("organisation_compliance"),[r,n]=x.useState(null),[a,i]=x.useState(),[o,l]=x.useState(),[c,u]=x.useState(!1),[d,f]=x.useState(!1),[h,m]=x.useState(!1),{employees:g,isLoading:p}=Kl(),{getPreview:v,createAuditPack:b,isCreating:y,isPreviewing:w,preview:_}=vH(),j=e==="employee_compliance",N=["employee_compliance","hr_incidents","payroll_verification"].includes(e);x.useEffect(()=>{N||n(null)},[e,N]),x.useEffect(()=>{if(j&&!r)return;const C=setTimeout(()=>{v({packType:e,employeeId:N?r:null,dateRangeStart:a?ne(a,"yyyy-MM-dd"):null,dateRangeEnd:o?ne(o,"yyyy-MM-dd"):null}).catch(console.error)},500);return()=>clearTimeout(C)},[e,r,a,o,j,N,v]);const S=async()=>{j&&!r||c&&!h||await b({pack_type:e,employee_id:N?r:null,date_range_start:a?ne(a,"yyyy-MM-dd"):null,date_range_end:o?ne(o,"yyyy-MM-dd"):null,include_restricted_content:c,include_attachments:d})},k=(!j||r)&&(!c||h)&&!y;return s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(xf,{className:"h-5 w-5"}),"Select Audit Pack Type"]}),s.jsx(Be,{children:"Choose the type of audit pack to generate"})]}),s.jsx(Y,{className:"grid gap-4 sm:grid-cols-2",children:Object.keys(Fy).map(C=>s.jsxs("button",{onClick:()=>t(C),className:Q("p-4 rounded-lg border text-left transition-all",e===C?"border-primary bg-primary/5 ring-1 ring-primary":"border-border hover:border-primary/50 hover:bg-muted/50"),children:[s.jsx("div",{className:"font-medium",children:Fy[C]}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:KFe[C]})]},C))})]}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Er,{className:"h-5 w-5"}),"Define Scope"]}),s.jsx(Be,{children:"Set the employee and date range for the audit pack"})]}),s.jsxs(Y,{className:"space-y-4",children:[N&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(q,{children:["Employee ",j&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(Me,{value:r||"all",onValueChange:C=>n(C==="all"?null:C),disabled:p,children:[s.jsx(Te,{children:s.jsx($e,{placeholder:"Select employee..."})}),s.jsxs(De,{children:[!j&&s.jsx(W,{value:"all",children:"All Employees"}),g.map(C=>s.jsxs(W,{value:C.id,children:[C.first_name," ",C.last_name]},C.id))]})]})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"Start Date"}),s.jsxs(Mi,{children:[s.jsx($i,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:Q("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[s.jsx(zt,{className:"mr-2 h-4 w-4"}),a?ne(a,"PPP"):"All time"]})}),s.jsx(ti,{className:"w-auto p-0",align:"start",children:s.jsx(ni,{mode:"single",selected:a,onSelect:i,initialFocus:!0})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{children:"End Date"}),s.jsxs(Mi,{children:[s.jsx($i,{asChild:!0,children:s.jsxs(I,{variant:"outline",className:Q("w-full justify-start text-left font-normal",!o&&"text-muted-foreground"),children:[s.jsx(zt,{className:"mr-2 h-4 w-4"}),o?ne(o,"PPP"):"All time"]})}),s.jsx(ti,{className:"w-auto p-0",align:"start",children:s.jsx(ni,{mode:"single",selected:o,onSelect:l,initialFocus:!0})})]})]})]})]})]}),s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(hu,{className:"h-5 w-5"}),"Options"]}),s.jsx(Be,{children:"Configure what to include in the audit pack"})]}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(q,{children:"Include Attachments"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Include uploaded documents and evidence files"})]}),s.jsx(An,{checked:d,onCheckedChange:f})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs(q,{className:"flex items-center gap-2",children:["Include Restricted Content",s.jsx(ce,{variant:"destructive",className:"text-xs",children:"Sensitive"})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Include confidential HR notes and restricted evidence"})]}),s.jsx(An,{checked:c,onCheckedChange:C=>{u(C),C||m(!1)}})]}),c&&s.jsxs(Cl,{variant:"destructive",children:[s.jsx(ir,{className:"h-4 w-4"}),s.jsxs(kl,{className:"space-y-2",children:[s.jsx("p",{children:"Restricted content may contain sensitive personal information and confidential investigation details."}),s.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[s.jsx(An,{checked:h,onCheckedChange:m}),s.jsx("span",{className:"text-sm",children:"I confirm I have authority to access restricted content"})]})]})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(ut,{className:"h-5 w-5"}),"Pack Preview"]}),s.jsx(Be,{children:"Estimated contents of the audit pack"})]}),s.jsx(Y,{className:"space-y-4",children:w?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(et,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):_?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Pack Type"}),s.jsx("span",{className:"font-medium",children:Fy[_.pack_type]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Scope"}),s.jsx("span",{className:"font-medium",children:_.scope})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date Range"}),s.jsx("span",{className:"font-medium",children:_.dateRange})]})]}),s.jsx(Nt,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm font-medium",children:"Estimated Records"}),Object.entries(_.estimatedRecords).map(([C,P])=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground capitalize",children:C.replace(/([A-Z])/g," $1").trim()}),s.jsx(ce,{variant:"secondary",children:P})]},C))]})]}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(DN,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:j&&!r?"Select an employee to see preview":"Loading preview..."})]})})]}),s.jsx(I,{className:"w-full",size:"lg",onClick:S,disabled:!k,children:y?s.jsxs(s.Fragment,{children:[s.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xf,{className:"mr-2 h-4 w-4"}),"Generate Audit Pack"]})}),s.jsxs(Cl,{children:[s.jsx(DN,{className:"h-4 w-4"}),s.jsx(kl,{children:"Audit packs are retained for 90 days and all generation actions are logged for compliance purposes."})]})]})]})}const YFe={pending:{label:"Pending",variant:"secondary",icon:xt},generating:{label:"Generating",variant:"default",icon:et},completed:{label:"Completed",variant:"default",icon:yt},failed:{label:"Failed",variant:"destructive",icon:zn},expired:{label:"Expired",variant:"outline",icon:ir}};function XFe(){const{auditPacks:e,isLoading:t,getDownloadUrl:r,isDownloading:n}=vH(),[a,i]=x.useState(null),o=async(l,c)=>{i(l);try{const u=await r(c);window.open(u,"_blank")}finally{i(null)}};return t?s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{children:"Export History"}),s.jsx(Be,{children:"Previously generated audit packs"})]}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-3",children:[1,2,3].map(l=>s.jsx(Ot,{className:"h-16 w-full"},l))})})]}):e.length===0?s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{children:"Export History"}),s.jsx(Be,{children:"Previously generated audit packs"})]}),s.jsx(Y,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(xf,{className:"h-12 w-12 mx-auto text-muted-foreground opacity-50"}),s.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No audit packs yet"}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Generate your first audit pack using the builder tab"})]})})]}):s.jsxs(K,{children:[s.jsxs(de,{children:[s.jsx(me,{children:"Export History"}),s.jsxs(Be,{children:[e.length," audit pack",e.length!==1?"s":""," generated"]})]}),s.jsx(Y,{children:s.jsxs(br,{children:[s.jsx(wr,{children:s.jsxs(qe,{children:[s.jsx(re,{children:"Pack Type"}),s.jsx(re,{children:"Scope"}),s.jsx(re,{children:"Generated By"}),s.jsx(re,{children:"Status"}),s.jsx(re,{children:"Created"}),s.jsx(re,{children:"Expires"}),s.jsx(re,{className:"w-[80px]"})]})}),s.jsx(jr,{children:e.map(l=>{const c=YFe[l.status],u=c.icon,d=l.status==="generating"||l.status==="pending";return s.jsxs(qe,{children:[s.jsxs(Z,{children:[s.jsx("div",{className:"font-medium",children:Fy[l.pack_type]}),l.include_restricted_content&&s.jsx(ce,{variant:"destructive",className:"text-xs mt-1",children:"Includes Restricted"})]}),s.jsxs(Z,{children:[s.jsx("div",{className:"text-sm",children:l.employee_id?"Single Employee":"Organisation-wide"}),l.date_range_start&&l.date_range_end&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:[ne(new Date(l.date_range_start),"MMM d, yyyy")," - "," ",ne(new Date(l.date_range_end),"MMM d, yyyy")]})]}),s.jsxs(Z,{children:[s.jsx("div",{className:"text-sm",children:l.generated_by_name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:l.generated_by_email})]}),s.jsxs(Z,{children:[s.jsxs(ce,{variant:c.variant,className:"flex items-center gap-1 w-fit",children:[s.jsx(u,{className:`h-3 w-3 ${d?"animate-spin":""}`}),c.label]}),l.status==="failed"&&l.error_message&&s.jsx("div",{className:"text-xs text-destructive mt-1 max-w-[200px] truncate",children:l.error_message})]}),s.jsxs(Z,{children:[s.jsx("div",{className:"text-sm",children:ne(new Date(l.created_at),"MMM d, yyyy")}),s.jsx("div",{className:"text-xs text-muted-foreground",children:ne(new Date(l.created_at),"HH:mm")})]}),s.jsx(Z,{children:l.expires_at?s.jsx("div",{className:"text-sm text-muted-foreground",children:fU(new Date(l.expires_at),{addSuffix:!0})}):s.jsx("span",{className:"text-muted-foreground",children:""})}),s.jsx(Z,{children:l.status==="completed"&&l.file_urls.length>0?s.jsxs(ks,{children:[s.jsx(Es,{asChild:!0,children:s.jsx(I,{variant:"ghost",size:"icon",children:a===l.id?s.jsx(et,{className:"h-4 w-4 animate-spin"}):s.jsx(ai,{className:"h-4 w-4"})})}),s.jsx(ss,{align:"end",children:l.file_urls.map((f,h)=>{const m=f.split("/").pop()||`File ${h+1}`;return s.jsxs(st,{onClick:()=>o(l.id,f),children:[s.jsx(As,{className:"mr-2 h-4 w-4"}),m]},f)})})]}):s.jsx("span",{className:"text-muted-foreground",children:""})})]},l.id)})})]})})]})}function QFe(){const[e,t]=x.useState("builder");return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Audit & Exports"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Generate regulator-ready audit packs for compliance verification"})]}),s.jsxs(_n,{value:e,onValueChange:t,className:"space-y-4",children:[s.jsxs(mn,{children:[s.jsxs(Ue,{value:"builder",className:"flex items-center gap-2",children:[s.jsx(xf,{className:"h-4 w-4"}),"Audit Pack Builder"]}),s.jsxs(Ue,{value:"history",className:"flex items-center gap-2",children:[s.jsx(Xa,{className:"h-4 w-4"}),"Export History"]})]}),s.jsx(tt,{value:"builder",children:s.jsx(GFe,{})}),s.jsx(tt,{value:"history",children:s.jsx(XFe,{})})]})]})}const ZFe=new PQ,pr=({children:e})=>s.jsx(qae,{children:s.jsx(pU,{children:e})}),JFe=()=>s.jsx(RQ,{client:ZFe,children:s.jsxs(hQ,{children:[s.jsx(YG,{}),s.jsx(kY,{}),s.jsx(BZ,{children:s.jsxs(RZ,{children:[s.jsx(Ct,{path:"/",element:s.jsx(iie,{})}),s.jsx(Ct,{path:"/auth",element:s.jsx(uoe,{})}),s.jsx(Ct,{path:"/employees",element:s.jsx(pr,{children:s.jsx(Nue,{})})}),s.jsx(Ct,{path:"/employees/deactivated",element:s.jsx(pr,{children:s.jsx(Uue,{})})}),s.jsx(Ct,{path:"/compliance",element:s.jsx(pr,{children:s.jsx(Hue,{})})}),s.jsx(Ct,{path:"/leave",element:s.jsx(pr,{children:s.jsx(rde,{})})}),s.jsx(Ct,{path:"/timesheets",element:s.jsx(pr,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Timesheets"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Coming soon..."})]})})}),s.jsx(Ct,{path:"/recruitment",element:s.jsx(pr,{children:s.jsx(Mde,{})})}),s.jsx(Ct,{path:"/documents",element:s.jsx(pr,{children:s.jsx(ife,{})})}),s.jsx(Ct,{path:"/contracts",element:s.jsx(pr,{children:s.jsx(Yde,{})})}),s.jsx(Ct,{path:"/performance",element:s.jsx(pr,{children:s.jsx(pLe,{})})}),s.jsx(Ct,{path:"/payroll",element:s.jsx(pr,{children:s.jsx(pfe,{})})}),s.jsx(Ct,{path:"/payroll-export",element:s.jsx(pr,{children:s.jsx(Tfe,{})})}),s.jsx(Ct,{path:"/reports",element:s.jsx(pr,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Reports"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Coming soon..."})]})})}),s.jsx(Ct,{path:"/hr-cases",element:s.jsx(pr,{children:s.jsx(VLe,{})})}),s.jsx(Ct,{path:"/audit-exports",element:s.jsx(pr,{children:s.jsx(QFe,{})})}),s.jsx(Ct,{path:"/settings",element:s.jsx(pr,{children:s.jsx(bLe,{})})}),s.jsx(Ct,{path:"/help",element:s.jsx(pr,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Help Center"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Coming soon..."})]})})}),s.jsx(Ct,{path:"/portal",element:s.jsx(pr,{children:s.jsx(HLe,{})})}),s.jsx(Ct,{path:"/portal/documents",element:s.jsx(pr,{children:s.jsx(GLe,{})})}),s.jsx(Ct,{path:"/portal/training",element:s.jsx(pr,{children:s.jsx(XLe,{})})}),s.jsx(Ct,{path:"/portal/profile",element:s.jsx(pr,{children:s.jsx(QLe,{})})}),s.jsx(Ct,{path:"/portal/reviews",element:s.jsx(pr,{children:s.jsx(nFe,{})})}),s.jsx(Ct,{path:"/portal/goals",element:s.jsx(pr,{children:s.jsx(kFe,{})})}),s.jsx(Ct,{path:"/lms",element:s.jsx(pr,{children:s.jsx(EFe,{})})}),s.jsx(Ct,{path:"/lms/course/:courseId",element:s.jsx(pr,{children:s.jsx(OFe,{})})}),s.jsx(Ct,{path:"/lms/assignments",element:s.jsx(pr,{children:s.jsx(RFe,{})})}),s.jsx(Ct,{path:"/platform/login",element:s.jsx(MFe,{})}),s.jsx(Ct,{path:"/platform/orgs",element:s.jsx(IFe,{})}),s.jsx(Ct,{path:"/platform/orgs/:id",element:s.jsx(UFe,{})}),s.jsx(Ct,{path:"/platform/plans",element:s.jsx(zFe,{})}),s.jsx(Ct,{path:"/platform/users",element:s.jsx(VFe,{})}),s.jsx(Ct,{path:"/platform/audit",element:s.jsx(qFe,{})}),s.jsx(Ct,{path:"/platform/settings",element:s.jsx(WFe,{})}),s.jsx(Ct,{path:"*",element:s.jsx(wLe,{})})]})})]})});bL(document.getElementById("root")).render(s.jsx(JFe,{}));
